begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Find out if we need the pad field in the header for this machine    Copyright (C) 1991 Free Software Foundation     This program is free software; you can redistribute it and/or    modify it under the terms of the GNU General Public License as    published by the Free Software Foundation; either version 1, or (at    your option) any later version.     This program is distributed in the hope that it will be useful, but    WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU    General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA. */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_struct
struct|struct
name|inc
block|{
name|char
name|a
index|[
literal|20
index|]
decl_stmt|;
name|char
name|b
index|[
literal|20
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|test1
block|{
name|char
name|a
decl_stmt|;
name|struct
name|inc
name|in
index|[
literal|5
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|test2
block|{
name|char
name|a
decl_stmt|;
name|char
name|b
decl_stmt|;
name|struct
name|inc
name|in
index|[
literal|5
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_function
name|main
parameter_list|()
block|{
name|struct
name|test1
name|t1
decl_stmt|;
name|struct
name|test2
name|t2
decl_stmt|;
name|int
name|t1diff
decl_stmt|,
name|t2diff
decl_stmt|;
name|t1diff
operator|=
operator|(
name|char
operator|*
operator|)
operator|&
name|t1
operator|.
name|in
operator|-
operator|(
name|char
operator|*
operator|)
operator|&
name|t1
expr_stmt|;
name|t2diff
operator|=
operator|(
name|char
operator|*
operator|)
operator|&
name|t2
operator|.
name|in
operator|-
operator|(
name|char
operator|*
operator|)
operator|&
name|t2
expr_stmt|;
if|if
condition|(
name|t2diff
operator|==
name|t1diff
operator|+
literal|1
condition|)
name|printf
argument_list|(
literal|"#define NEEDPAD\n"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|t1diff
operator|!=
name|t2diff
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Cannot determine padding for tar struct, \n\ will try with none.\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

