begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* BFD back-end for TMS320C4X coff binaries.    Copyright 1996, 1997, 1998, 1999, 2000, 2002, 2003    Free Software Foundation, Inc.     Contributed by Michael Hayes (m.hayes@elec.canterbury.ac.nz)     This file is part of BFD, the Binary File Descriptor library.     This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2 of the License, or    (at your option) any later version.     This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA    02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"bfd.h"
end_include

begin_include
include|#
directive|include
file|"sysdep.h"
end_include

begin_include
include|#
directive|include
file|"libbfd.h"
end_include

begin_include
include|#
directive|include
file|"bfdlink.h"
end_include

begin_include
include|#
directive|include
file|"coff/tic4x.h"
end_include

begin_include
include|#
directive|include
file|"coff/internal.h"
end_include

begin_include
include|#
directive|include
file|"libcoff.h"
end_include

begin_undef
undef|#
directive|undef
name|F_LSYMS
end_undef

begin_define
define|#
directive|define
name|F_LSYMS
value|F_LSYMS_TICOFF
end_define

begin_decl_stmt
specifier|static
name|bfd_boolean
name|ticoff_bfd_is_local_label_name
name|PARAMS
argument_list|(
operator|(
name|bfd
operator|*
operator|,
specifier|const
name|char
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|bfd_reloc_status_type
name|tic4x_relocation
name|PARAMS
argument_list|(
operator|(
name|bfd
operator|*
operator|,
name|arelent
operator|*
operator|,
name|asymbol
operator|*
operator|,
name|PTR
operator|,
name|asection
operator|*
operator|,
name|bfd
operator|*
operator|,
name|char
operator|*
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|reloc_howto_type
modifier|*
name|tic4x_coff_reloc_type_lookup
name|PARAMS
argument_list|(
operator|(
name|bfd
operator|*
operator|,
name|bfd_reloc_code_real_type
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|tic4x_lookup_howto
name|PARAMS
argument_list|(
operator|(
name|arelent
operator|*
operator|,
expr|struct
name|internal_reloc
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|reloc_howto_type
modifier|*
name|coff_tic4x_rtype_to_howto
name|PARAMS
argument_list|(
operator|(
name|bfd
operator|*
operator|,
name|asection
operator|*
operator|,
expr|struct
name|internal_reloc
operator|*
operator|,
expr|struct
name|coff_link_hash_entry
operator|*
operator|,
expr|struct
name|internal_syment
operator|*
operator|,
name|bfd_vma
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|tic4x_reloc_processing
name|PARAMS
argument_list|(
operator|(
name|arelent
operator|*
operator|,
expr|struct
name|internal_reloc
operator|*
operator|,
name|asymbol
operator|*
operator|*
operator|,
name|bfd
operator|*
operator|,
name|asection
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Replace the stock _bfd_coff_is_local_label_name to recognize TI COFF local    labels.  */
end_comment

begin_function
specifier|static
name|bfd_boolean
name|ticoff_bfd_is_local_label_name
parameter_list|(
name|abfd
parameter_list|,
name|name
parameter_list|)
name|bfd
modifier|*
name|abfd
name|ATTRIBUTE_UNUSED
decl_stmt|;
specifier|const
name|char
modifier|*
name|name
decl_stmt|;
block|{
if|if
condition|(
name|TICOFF_LOCAL_LABEL_P
argument_list|(
name|name
argument_list|)
condition|)
return|return
name|TRUE
return|;
return|return
name|FALSE
return|;
block|}
end_function

begin_define
define|#
directive|define
name|coff_bfd_is_local_label_name
value|ticoff_bfd_is_local_label_name
end_define

begin_define
define|#
directive|define
name|RELOC_PROCESSING
parameter_list|(
name|RELENT
parameter_list|,
name|RELOC
parameter_list|,
name|SYMS
parameter_list|,
name|ABFD
parameter_list|,
name|SECT
parameter_list|)
define|\
value|tic4x_reloc_processing (RELENT,RELOC,SYMS,ABFD,SECT)
end_define

begin_comment
comment|/* Customize coffcode.h; the default coff_ functions are set up to use    COFF2; coff_bad_format_hook uses BADMAG, so set that for COFF2.    The COFF1 and COFF0 vectors use custom _bad_format_hook procs    instead of setting BADMAG.  */
end_comment

begin_define
define|#
directive|define
name|BADMAG
parameter_list|(
name|x
parameter_list|)
value|COFF2_BADMAG(x)
end_define

begin_include
include|#
directive|include
file|"coffcode.h"
end_include

begin_function
specifier|static
name|bfd_reloc_status_type
name|tic4x_relocation
parameter_list|(
name|abfd
parameter_list|,
name|reloc_entry
parameter_list|,
name|symbol
parameter_list|,
name|data
parameter_list|,
name|input_section
parameter_list|,
name|output_bfd
parameter_list|,
name|error_message
parameter_list|)
name|bfd
modifier|*
name|abfd
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|arelent
modifier|*
name|reloc_entry
decl_stmt|;
name|asymbol
modifier|*
name|symbol
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|PTR
name|data
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|asection
modifier|*
name|input_section
decl_stmt|;
name|bfd
modifier|*
name|output_bfd
decl_stmt|;
name|char
modifier|*
modifier|*
name|error_message
name|ATTRIBUTE_UNUSED
decl_stmt|;
block|{
if|if
condition|(
name|output_bfd
operator|!=
operator|(
name|bfd
operator|*
operator|)
name|NULL
condition|)
block|{
comment|/* This is a partial relocation, and we want to apply the  	 relocation to the reloc entry rather than the raw data.  	 Modify the reloc inplace to reflect what we now know.  */
name|reloc_entry
operator|->
name|address
operator|+=
name|input_section
operator|->
name|output_offset
expr_stmt|;
return|return
name|bfd_reloc_ok
return|;
block|}
return|return
name|bfd_reloc_continue
return|;
block|}
end_function

begin_decl_stmt
name|reloc_howto_type
name|tic4x_howto_table
index|[]
init|=
block|{
name|HOWTO
argument_list|(
name|R_RELWORD
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"RELWORD"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_REL24
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|24
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_bitfield
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"REL24"
argument_list|,
name|TRUE
argument_list|,
literal|0x00ffffff
argument_list|,
literal|0x00ffffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_RELLONG
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|32
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_dont
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"RELLONG"
argument_list|,
name|TRUE
argument_list|,
literal|0xffffffff
argument_list|,
literal|0xffffffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PCRWORD
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"PCRWORD"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PCR24
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|24
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"PCR24"
argument_list|,
name|TRUE
argument_list|,
literal|0x00ffffff
argument_list|,
literal|0x00ffffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PARTLS16
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_dont
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"PARTLS16"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PARTMS8
argument_list|,
literal|16
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_dont
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"PARTMS8"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_RELWORD
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"ARELWORD"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_REL24
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|24
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"AREL24"
argument_list|,
name|TRUE
argument_list|,
literal|0x00ffffff
argument_list|,
literal|0x00ffffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_RELLONG
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|32
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"ARELLONG"
argument_list|,
name|TRUE
argument_list|,
literal|0xffffffff
argument_list|,
literal|0xffffffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PCRWORD
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"APCRWORD"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PCR24
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|24
argument_list|,
name|TRUE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_signed
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"APCR24"
argument_list|,
name|TRUE
argument_list|,
literal|0x00ffffff
argument_list|,
literal|0x00ffffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PARTLS16
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_dont
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"APARTLS16"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|,
name|HOWTO
argument_list|(
name|R_PARTMS8
argument_list|,
literal|16
argument_list|,
literal|2
argument_list|,
literal|16
argument_list|,
name|FALSE
argument_list|,
literal|0
argument_list|,
name|complain_overflow_dont
argument_list|,
name|tic4x_relocation
argument_list|,
literal|"APARTMS8"
argument_list|,
name|TRUE
argument_list|,
literal|0x0000ffff
argument_list|,
literal|0x0000ffff
argument_list|,
name|FALSE
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|HOWTO_SIZE
value|(sizeof(tic4x_howto_table) / sizeof(tic4x_howto_table[0]))
end_define

begin_undef
undef|#
directive|undef
name|coff_bfd_reloc_type_lookup
end_undef

begin_define
define|#
directive|define
name|coff_bfd_reloc_type_lookup
value|tic4x_coff_reloc_type_lookup
end_define

begin_comment
comment|/* For the case statement use the code values used tc_gen_reloc (defined in    bfd/reloc.c) to map to the howto table entries.  */
end_comment

begin_function
specifier|static
name|reloc_howto_type
modifier|*
name|tic4x_coff_reloc_type_lookup
parameter_list|(
name|abfd
parameter_list|,
name|code
parameter_list|)
name|bfd
modifier|*
name|abfd
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|bfd_reloc_code_real_type
name|code
decl_stmt|;
block|{
name|unsigned
name|int
name|type
decl_stmt|;
name|unsigned
name|int
name|i
decl_stmt|;
switch|switch
condition|(
name|code
condition|)
block|{
case|case
name|BFD_RELOC_32
case|:
name|type
operator|=
name|R_RELLONG
expr_stmt|;
break|break;
case|case
name|BFD_RELOC_24
case|:
name|type
operator|=
name|R_REL24
expr_stmt|;
break|break;
case|case
name|BFD_RELOC_16
case|:
name|type
operator|=
name|R_RELWORD
expr_stmt|;
break|break;
case|case
name|BFD_RELOC_24_PCREL
case|:
name|type
operator|=
name|R_PCR24
expr_stmt|;
break|break;
case|case
name|BFD_RELOC_16_PCREL
case|:
name|type
operator|=
name|R_PCRWORD
expr_stmt|;
break|break;
case|case
name|BFD_RELOC_HI16
case|:
name|type
operator|=
name|R_PARTMS8
expr_stmt|;
break|break;
case|case
name|BFD_RELOC_LO16
case|:
name|type
operator|=
name|R_PARTLS16
expr_stmt|;
break|break;
default|default:
return|return
name|NULL
return|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|HOWTO_SIZE
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|tic4x_howto_table
index|[
name|i
index|]
operator|.
name|type
operator|==
name|type
condition|)
return|return
name|tic4x_howto_table
operator|+
name|i
return|;
block|}
return|return
name|NULL
return|;
block|}
end_function

begin_comment
comment|/* Code to turn a r_type into a howto ptr, uses the above howto table.    Called after some initial checking by the tic4x_rtype_to_howto fn    below.  */
end_comment

begin_function
specifier|static
name|void
name|tic4x_lookup_howto
parameter_list|(
name|internal
parameter_list|,
name|dst
parameter_list|)
name|arelent
modifier|*
name|internal
decl_stmt|;
name|struct
name|internal_reloc
modifier|*
name|dst
decl_stmt|;
block|{
name|unsigned
name|int
name|i
decl_stmt|;
name|int
name|bank
init|=
operator|(
name|dst
operator|->
name|r_symndx
operator|==
operator|-
literal|1
operator|)
condition|?
name|HOWTO_BANK
else|:
literal|0
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|HOWTO_SIZE
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|tic4x_howto_table
index|[
name|i
index|]
operator|.
name|type
operator|==
name|dst
operator|->
name|r_type
condition|)
block|{
name|internal
operator|->
name|howto
operator|=
name|tic4x_howto_table
operator|+
name|i
operator|+
name|bank
expr_stmt|;
return|return;
block|}
block|}
call|(
modifier|*
name|_bfd_error_handler
call|)
argument_list|(
name|_
argument_list|(
literal|"Unrecognized reloc type 0x%x"
argument_list|)
argument_list|,
operator|(
name|unsigned
name|int
operator|)
name|dst
operator|->
name|r_type
argument_list|)
expr_stmt|;
name|abort
argument_list|()
expr_stmt|;
block|}
end_function

begin_undef
undef|#
directive|undef
name|coff_rtype_to_howto
end_undef

begin_define
define|#
directive|define
name|coff_rtype_to_howto
value|coff_tic4x_rtype_to_howto
end_define

begin_function
specifier|static
name|reloc_howto_type
modifier|*
name|coff_tic4x_rtype_to_howto
parameter_list|(
name|abfd
parameter_list|,
name|sec
parameter_list|,
name|rel
parameter_list|,
name|h
parameter_list|,
name|sym
parameter_list|,
name|addendp
parameter_list|)
name|bfd
modifier|*
name|abfd
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|asection
modifier|*
name|sec
decl_stmt|;
name|struct
name|internal_reloc
modifier|*
name|rel
decl_stmt|;
name|struct
name|coff_link_hash_entry
modifier|*
name|h
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|struct
name|internal_syment
modifier|*
name|sym
name|ATTRIBUTE_UNUSED
decl_stmt|;
name|bfd_vma
modifier|*
name|addendp
decl_stmt|;
block|{
name|arelent
name|genrel
decl_stmt|;
if|if
condition|(
name|rel
operator|->
name|r_symndx
operator|==
operator|-
literal|1
operator|&&
name|addendp
operator|!=
name|NULL
condition|)
comment|/* This is a TI "internal relocation", which means that the relocation        amount is the amount by which the current section is being relocated        in the output section.  */
operator|*
name|addendp
operator|=
operator|(
name|sec
operator|->
name|output_section
operator|->
name|vma
operator|+
name|sec
operator|->
name|output_offset
operator|)
operator|-
name|sec
operator|->
name|vma
expr_stmt|;
name|tic4x_lookup_howto
argument_list|(
operator|&
name|genrel
argument_list|,
name|rel
argument_list|)
expr_stmt|;
return|return
name|genrel
operator|.
name|howto
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|tic4x_reloc_processing
parameter_list|(
name|relent
parameter_list|,
name|reloc
parameter_list|,
name|symbols
parameter_list|,
name|abfd
parameter_list|,
name|section
parameter_list|)
name|arelent
modifier|*
name|relent
decl_stmt|;
name|struct
name|internal_reloc
modifier|*
name|reloc
decl_stmt|;
name|asymbol
modifier|*
modifier|*
name|symbols
decl_stmt|;
name|bfd
modifier|*
name|abfd
decl_stmt|;
name|asection
modifier|*
name|section
decl_stmt|;
block|{
name|asymbol
modifier|*
name|ptr
decl_stmt|;
name|relent
operator|->
name|address
operator|=
name|reloc
operator|->
name|r_vaddr
expr_stmt|;
if|if
condition|(
name|reloc
operator|->
name|r_symndx
operator|!=
operator|-
literal|1
condition|)
block|{
if|if
condition|(
name|reloc
operator|->
name|r_symndx
operator|<
literal|0
operator|||
name|reloc
operator|->
name|r_symndx
operator|>=
name|obj_conv_table_size
argument_list|(
name|abfd
argument_list|)
condition|)
block|{
call|(
modifier|*
name|_bfd_error_handler
call|)
argument_list|(
name|_
argument_list|(
literal|"%s: warning: illegal symbol index %ld in relocs"
argument_list|)
argument_list|,
name|bfd_get_filename
argument_list|(
name|abfd
argument_list|)
argument_list|,
name|reloc
operator|->
name|r_symndx
argument_list|)
expr_stmt|;
name|relent
operator|->
name|sym_ptr_ptr
operator|=
name|bfd_abs_section_ptr
operator|->
name|symbol_ptr_ptr
expr_stmt|;
name|ptr
operator|=
name|NULL
expr_stmt|;
block|}
else|else
block|{
name|relent
operator|->
name|sym_ptr_ptr
operator|=
operator|(
name|symbols
operator|+
name|obj_convert
argument_list|(
name|abfd
argument_list|)
index|[
name|reloc
operator|->
name|r_symndx
index|]
operator|)
expr_stmt|;
name|ptr
operator|=
operator|*
operator|(
name|relent
operator|->
name|sym_ptr_ptr
operator|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|relent
operator|->
name|sym_ptr_ptr
operator|=
name|section
operator|->
name|symbol_ptr_ptr
expr_stmt|;
name|ptr
operator|=
operator|*
operator|(
name|relent
operator|->
name|sym_ptr_ptr
operator|)
expr_stmt|;
block|}
comment|/* The symbols definitions that we have read in have been relocated      as if their sections started at 0.  But the offsets refering to      the symbols in the raw data have not been modified, so we have to      have a negative addend to compensate.       Note that symbols which used to be common must be left alone.  */
comment|/* Calculate any reloc addend by looking at the symbol.  */
name|CALC_ADDEND
argument_list|(
name|abfd
argument_list|,
name|ptr
argument_list|,
operator|*
name|reloc
argument_list|,
name|relent
argument_list|)
expr_stmt|;
name|relent
operator|->
name|address
operator|-=
name|section
operator|->
name|vma
expr_stmt|;
comment|/* !!     relent->section = (asection *) NULL;  */
comment|/* Fill in the relent->howto field from reloc->r_type.  */
name|tic4x_lookup_howto
argument_list|(
name|relent
argument_list|,
name|reloc
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* TI COFF v0, DOS tools (little-endian headers).  */
end_comment

begin_expr_stmt
name|CREATE_LITTLE_COFF_TARGET_VEC
argument_list|(
name|tic4x_coff0_vec
argument_list|,
literal|"coff0-tic4x"
argument_list|,
name|HAS_LOAD_PAGE
argument_list|,
literal|0
argument_list|,
literal|'_'
argument_list|,
name|NULL
argument_list|,
operator|(
name|PTR
operator|)
operator|&
name|ticoff0_swap_table
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* TI COFF v0, SPARC tools (big-endian headers).  */
end_comment

begin_expr_stmt
name|CREATE_BIGHDR_COFF_TARGET_VEC
argument_list|(
name|tic4x_coff0_beh_vec
argument_list|,
literal|"coff0-beh-tic4x"
argument_list|,
name|HAS_LOAD_PAGE
argument_list|,
literal|0
argument_list|,
literal|'_'
argument_list|,
operator|&
name|tic4x_coff0_vec
argument_list|,
operator|(
name|PTR
operator|)
operator|&
name|ticoff0_swap_table
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* TI COFF v1, DOS tools (little-endian headers).  */
end_comment

begin_expr_stmt
name|CREATE_LITTLE_COFF_TARGET_VEC
argument_list|(
name|tic4x_coff1_vec
argument_list|,
literal|"coff1-tic4x"
argument_list|,
name|HAS_LOAD_PAGE
argument_list|,
literal|0
argument_list|,
literal|'_'
argument_list|,
operator|&
name|tic4x_coff0_beh_vec
argument_list|,
operator|(
name|PTR
operator|)
operator|&
name|ticoff1_swap_table
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* TI COFF v1, SPARC tools (big-endian headers).  */
end_comment

begin_expr_stmt
name|CREATE_BIGHDR_COFF_TARGET_VEC
argument_list|(
name|tic4x_coff1_beh_vec
argument_list|,
literal|"coff1-beh-tic4x"
argument_list|,
name|HAS_LOAD_PAGE
argument_list|,
literal|0
argument_list|,
literal|'_'
argument_list|,
operator|&
name|tic4x_coff1_vec
argument_list|,
operator|(
name|PTR
operator|)
operator|&
name|ticoff1_swap_table
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* TI COFF v2, TI DOS tools output (little-endian headers).  */
end_comment

begin_expr_stmt
name|CREATE_LITTLE_COFF_TARGET_VEC
argument_list|(
name|tic4x_coff2_vec
argument_list|,
literal|"coff2-tic4x"
argument_list|,
name|HAS_LOAD_PAGE
argument_list|,
literal|0
argument_list|,
literal|'_'
argument_list|,
operator|&
name|tic4x_coff1_beh_vec
argument_list|,
name|COFF_SWAP_TABLE
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* TI COFF v2, TI SPARC tools output (big-endian headers).  */
end_comment

begin_expr_stmt
name|CREATE_BIGHDR_COFF_TARGET_VEC
argument_list|(
name|tic4x_coff2_beh_vec
argument_list|,
literal|"coff2-beh-tic4x"
argument_list|,
name|HAS_LOAD_PAGE
argument_list|,
literal|0
argument_list|,
literal|'_'
argument_list|,
operator|&
name|tic4x_coff2_vec
argument_list|,
name|COFF_SWAP_TABLE
argument_list|)
expr_stmt|;
end_expr_stmt

end_unit

