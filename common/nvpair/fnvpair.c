begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * CDDL HEADER START  *  * The contents of this file are subject to the terms of the  * Common Development and Distribution License (the "License").  * You may not use this file except in compliance with the License.  *  * You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE  * or http://www.opensolaris.org/os/licensing.  * See the License for the specific language governing permissions  * and limitations under the License.  *  * When distributing Covered Code, include this CDDL HEADER in each  * file and include the License file at usr/src/OPENSOLARIS.LICENSE.  * If applicable, add the following below this CDDL HEADER, with the  * fields enclosed by brackets "[]" replaced with your own identifying  * information: Portions Copyright [yyyy] [name of copyright owner]  *  * CDDL HEADER END  */
end_comment

begin_comment
comment|/*  * Copyright (c) 2012 by Delphix. All rights reserved.  */
end_comment

begin_include
include|#
directive|include
file|<sys/nvpair.h>
end_include

begin_include
include|#
directive|include
file|<sys/kmem.h>
end_include

begin_include
include|#
directive|include
file|<sys/debug.h>
end_include

begin_ifndef
ifndef|#
directive|ifndef
name|_KERNEL
end_ifndef

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  * "Force" nvlist wrapper.  *  * These functions wrap the nvlist_* functions with assertions that assume  * the operation is successful.  This allows the caller's code to be much  * more readable, especially for the fnvlist_lookup_* and fnvpair_value_*  * functions, which can return the requested value (rather than filling in  * a pointer).  *  * These functions use NV_UNIQUE_NAME, encoding NV_ENCODE_NATIVE, and allocate  * with KM_SLEEP.  *  * More wrappers should be added as needed -- for example  * nvlist_lookup_*_array and nvpair_value_*_array.  */
end_comment

begin_function
name|nvlist_t
modifier|*
name|fnvlist_alloc
parameter_list|(
name|void
parameter_list|)
block|{
name|nvlist_t
modifier|*
name|nvl
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_alloc
argument_list|(
operator|&
name|nvl
argument_list|,
name|NV_UNIQUE_NAME
argument_list|,
name|KM_SLEEP
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|nvl
operator|)
return|;
block|}
end_function

begin_function
name|void
name|fnvlist_free
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|)
block|{
name|nvlist_free
argument_list|(
name|nvl
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|size_t
name|fnvlist_size
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|)
block|{
name|size_t
name|size
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_size
argument_list|(
name|nvl
argument_list|,
operator|&
name|size
argument_list|,
name|NV_ENCODE_NATIVE
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|size
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * Returns allocated buffer of size *sizep.  Caller must free the buffer with  * fnvlist_pack_free().  */
end_comment

begin_function
name|char
modifier|*
name|fnvlist_pack
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
name|size_t
modifier|*
name|sizep
parameter_list|)
block|{
name|char
modifier|*
name|packed
init|=
literal|0
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_pack
argument_list|(
name|nvl
argument_list|,
operator|&
name|packed
argument_list|,
name|sizep
argument_list|,
name|NV_ENCODE_NATIVE
argument_list|,
name|KM_SLEEP
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|packed
operator|)
return|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
name|void
name|fnvlist_pack_free
parameter_list|(
name|char
modifier|*
name|pack
parameter_list|,
name|size_t
name|size
parameter_list|)
block|{
ifdef|#
directive|ifdef
name|_KERNEL
name|kmem_free
argument_list|(
name|pack
argument_list|,
name|size
argument_list|)
expr_stmt|;
else|#
directive|else
name|free
argument_list|(
name|pack
argument_list|)
expr_stmt|;
endif|#
directive|endif
block|}
end_function

begin_function
name|nvlist_t
modifier|*
name|fnvlist_unpack
parameter_list|(
name|char
modifier|*
name|buf
parameter_list|,
name|size_t
name|buflen
parameter_list|)
block|{
name|nvlist_t
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_unpack
argument_list|(
name|buf
argument_list|,
name|buflen
argument_list|,
operator|&
name|rv
argument_list|,
name|KM_SLEEP
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|nvlist_t
modifier|*
name|fnvlist_dup
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|)
block|{
name|nvlist_t
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_dup
argument_list|(
name|nvl
argument_list|,
operator|&
name|rv
argument_list|,
name|KM_SLEEP
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|void
name|fnvlist_merge
parameter_list|(
name|nvlist_t
modifier|*
name|dst
parameter_list|,
name|nvlist_t
modifier|*
name|src
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_merge
argument_list|(
name|dst
argument_list|,
name|src
argument_list|,
name|KM_SLEEP
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_boolean
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_boolean
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_boolean_value
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|boolean_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_boolean_value
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_byte
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uchar_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_byte
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int8
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int8_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int8
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint8
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint8_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint8
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int16
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int16_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int16
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint16
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint16_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint16
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int32
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int32_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int32
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint32
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint32_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint32
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int64
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int64_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int64
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint64
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint64_t
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint64
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_string
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
specifier|const
name|char
modifier|*
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_string
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_nvlist
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|nvlist_t
modifier|*
name|val
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_nvlist
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_nvpair
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
name|nvpair_t
modifier|*
name|pair
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_nvpair
argument_list|(
name|nvl
argument_list|,
name|pair
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_boolean_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|boolean_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_boolean_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_byte_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uchar_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_byte_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int8_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int8_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int8_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint8_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint8_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint8_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int16_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int16_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int16_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint16_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint16_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint16_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int32_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int32_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int32_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint32_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint32_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint32_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_int64_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|int64_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_int64_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_uint64_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|uint64_t
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_uint64_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_string_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|char
modifier|*
specifier|const
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_string_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_add_nvlist_array
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|nvlist_t
modifier|*
modifier|*
name|val
parameter_list|,
name|uint_t
name|n
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_add_nvlist_array
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
name|val
argument_list|,
name|n
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_remove
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_remove_all
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fnvlist_remove_nvpair
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
name|nvpair_t
modifier|*
name|pair
parameter_list|)
block|{
name|VERIFY3U
argument_list|(
name|nvlist_remove_nvpair
argument_list|(
name|nvl
argument_list|,
name|pair
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|nvpair_t
modifier|*
name|fnvlist_lookup_nvpair
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|nvpair_t
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_nvpair
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_comment
comment|/* returns B_TRUE if the entry exists */
end_comment

begin_function
name|boolean_t
name|fnvlist_lookup_boolean
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
return|return
operator|(
name|nvlist_lookup_boolean
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|)
operator|==
literal|0
operator|)
return|;
block|}
end_function

begin_function
name|boolean_t
name|fnvlist_lookup_boolean_value
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|boolean_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_boolean_value
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uchar_t
name|fnvlist_lookup_byte
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|uchar_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_byte
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int8_t
name|fnvlist_lookup_int8
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|int8_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_int8
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int16_t
name|fnvlist_lookup_int16
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|int16_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_int16
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int32_t
name|fnvlist_lookup_int32
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|int32_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_int32
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int64_t
name|fnvlist_lookup_int64
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|int64_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_int64
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint8_t
name|fnvlist_lookup_uint8_t
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|uint8_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_uint8
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint16_t
name|fnvlist_lookup_uint16
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|uint16_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_uint16
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint32_t
name|fnvlist_lookup_uint32
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|uint32_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_uint32
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint64_t
name|fnvlist_lookup_uint64
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|uint64_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_uint64
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|char
modifier|*
name|fnvlist_lookup_string
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|char
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_string
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|nvlist_t
modifier|*
name|fnvlist_lookup_nvlist
parameter_list|(
name|nvlist_t
modifier|*
name|nvl
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
block|{
name|nvlist_t
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvlist_lookup_nvlist
argument_list|(
name|nvl
argument_list|,
name|name
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|boolean_t
name|fnvpair_value_boolean_value
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|boolean_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_boolean_value
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uchar_t
name|fnvpair_value_byte
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|uchar_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_byte
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int8_t
name|fnvpair_value_int8
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|int8_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_int8
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int16_t
name|fnvpair_value_int16
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|int16_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_int16
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int32_t
name|fnvpair_value_int32
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|int32_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_int32
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|int64_t
name|fnvpair_value_int64
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|int64_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_int64
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint8_t
name|fnvpair_value_uint8_t
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|uint8_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_uint8
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint16_t
name|fnvpair_value_uint16
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|uint16_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_uint16
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint32_t
name|fnvpair_value_uint32
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|uint32_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_uint32
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|uint64_t
name|fnvpair_value_uint64
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|uint64_t
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_uint64
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|char
modifier|*
name|fnvpair_value_string
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|char
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_string
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

begin_function
name|nvlist_t
modifier|*
name|fnvpair_value_nvlist
parameter_list|(
name|nvpair_t
modifier|*
name|nvp
parameter_list|)
block|{
name|nvlist_t
modifier|*
name|rv
decl_stmt|;
name|VERIFY3U
argument_list|(
name|nvpair_value_nvlist
argument_list|(
name|nvp
argument_list|,
operator|&
name|rv
argument_list|)
argument_list|,
operator|==
argument_list|,
literal|0
argument_list|)
expr_stmt|;
return|return
operator|(
name|rv
operator|)
return|;
block|}
end_function

end_unit

