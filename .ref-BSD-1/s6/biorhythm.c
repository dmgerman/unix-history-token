begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* biorhythm predictions 	biorhythm mmddyy [y1] [y2] 	jeff schriebman		3-75 */
end_comment

begin_extern
extern|extern fout;
end_extern

begin_decl_stmt
name|char
modifier|*
name|bptr
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|month
decl_stmt|,
name|day
decl_stmt|,
name|year
decl_stmt|,
name|nday
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|mon
index|[]
block|{
literal|"jan"
operator|,
literal|"feb"
operator|,
literal|"mar"
operator|,
literal|"apr"
operator|,
literal|"may"
operator|,
literal|"jun"
operator|,
literal|"jul"
operator|,
literal|"aug"
operator|,
literal|"sep"
operator|,
literal|"oct"
operator|,
literal|"nov"
operator|,
literal|"dec"
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|dy
index|[]
block|{
literal|31
operator|,
literal|28
operator|,
literal|31
operator|,
literal|30
operator|,
literal|31
operator|,
literal|30
operator|,
literal|31
operator|,
literal|31
operator|,
literal|30
operator|,
literal|31
operator|,
literal|30
operator|,
literal|31
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
specifier|register
name|char
name|ph
decl_stmt|,
name|em
decl_stmt|,
name|in
decl_stmt|;
name|int
name|i
decl_stmt|,
name|ystart
decl_stmt|,
name|yfin
decl_stmt|;
if|if
condition|(
name|argc
operator|<
literal|2
condition|)
block|{
name|printf
argument_list|(
literal|"bior mmddyy [yy] [yy]\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|()
expr_stmt|;
block|}
name|fout
operator|=
name|dup
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"Biorhythm transition predictions\n\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"ph em in  date\n"
argument_list|)
expr_stmt|;
name|nday
operator|=
operator|-
literal|1
expr_stmt|;
name|bptr
operator|=
operator|*
operator|++
name|argv
expr_stmt|;
name|month
operator|=
name|gettwo
argument_list|()
expr_stmt|;
name|day
operator|=
name|gettwo
argument_list|()
expr_stmt|;
name|day
operator|=
operator|-
literal|1
expr_stmt|;
name|year
operator|=
name|gettwo
argument_list|()
expr_stmt|;
name|year
operator|=
operator|+
literal|1900
expr_stmt|;
if|if
condition|(
operator|*
name|bptr
operator|!=
literal|'\0'
condition|)
block|{
name|printf
argument_list|(
literal|"\n\nIllegal input data. Please enter "
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"mmddyy of birth\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|()
expr_stmt|;
block|}
name|ystart
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|argc
operator|>=
literal|3
condition|)
block|{
name|bptr
operator|=
operator|*
operator|++
name|argv
expr_stmt|;
name|ystart
operator|=
name|gettwo
argument_list|()
expr_stmt|;
name|ystart
operator|=
operator|+
literal|1900
expr_stmt|;
block|}
name|yfin
operator|=
literal|30000
expr_stmt|;
if|if
condition|(
name|argc
operator|>=
literal|4
condition|)
block|{
name|bptr
operator|=
operator|*
operator|++
name|argv
expr_stmt|;
name|yfin
operator|=
name|gettwo
argument_list|()
expr_stmt|;
name|yfin
operator|=
operator|+
literal|1900
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
name|year
init|;
name|year
operator|<
name|i
operator|+
literal|100
condition|;
control|)
block|{
name|update
argument_list|()
expr_stmt|;
if|if
condition|(
name|year
operator|<
name|ystart
condition|)
continue|continue;
if|if
condition|(
name|year
operator|>
name|yfin
condition|)
name|exit
argument_list|()
expr_stmt|;
name|ph
operator|=
literal|' '
expr_stmt|;
name|em
operator|=
literal|' '
expr_stmt|;
name|in
operator|=
literal|' '
expr_stmt|;
if|if
condition|(
name|lrem
argument_list|(
literal|0
argument_list|,
name|nday
argument_list|,
literal|23
argument_list|)
operator|==
literal|11
condition|)
name|ph
operator|=
literal|'-'
expr_stmt|;
if|if
condition|(
name|lrem
argument_list|(
literal|0
argument_list|,
name|nday
argument_list|,
literal|23
argument_list|)
operator|==
literal|0
condition|)
name|ph
operator|=
literal|'+'
expr_stmt|;
if|if
condition|(
name|lrem
argument_list|(
literal|0
argument_list|,
name|nday
argument_list|,
literal|28
argument_list|)
operator|==
literal|14
condition|)
name|em
operator|=
literal|'-'
expr_stmt|;
if|if
condition|(
name|lrem
argument_list|(
literal|0
argument_list|,
name|nday
argument_list|,
literal|28
argument_list|)
operator|==
literal|0
condition|)
name|em
operator|=
literal|'+'
expr_stmt|;
if|if
condition|(
name|lrem
argument_list|(
literal|0
argument_list|,
name|nday
argument_list|,
literal|33
argument_list|)
operator|==
literal|16
condition|)
name|in
operator|=
literal|'-'
expr_stmt|;
if|if
condition|(
name|lrem
argument_list|(
literal|0
argument_list|,
name|nday
argument_list|,
literal|33
argument_list|)
operator|==
literal|0
condition|)
name|in
operator|=
literal|'+'
expr_stmt|;
if|if
condition|(
name|ph
operator|==
literal|' '
operator|&&
name|em
operator|==
literal|' '
operator|&&
name|in
operator|==
literal|' '
condition|)
continue|continue;
name|printf
argument_list|(
literal|"%c  %c  %c  %s %2d %d\n"
argument_list|,
name|ph
argument_list|,
name|em
argument_list|,
name|in
argument_list|,
name|mon
index|[
name|month
operator|-
literal|1
index|]
argument_list|,
name|day
argument_list|,
name|year
argument_list|)
expr_stmt|;
block|}
name|flush
argument_list|()
expr_stmt|;
block|}
end_function

begin_macro
name|update
argument_list|()
end_macro

begin_block
block|{
name|nday
operator|=
operator|+
literal|1
expr_stmt|;
name|day
operator|=
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|day
operator|>
name|dy
index|[
name|month
operator|-
literal|1
index|]
condition|)
block|{
if|if
condition|(
name|month
operator|==
literal|2
operator|&&
name|lrem
argument_list|(
literal|0
argument_list|,
name|year
argument_list|,
literal|4
argument_list|)
operator|==
literal|0
operator|&&
name|day
operator|==
literal|29
condition|)
return|return;
name|day
operator|=
literal|1
expr_stmt|;
name|month
operator|=
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|month
operator|>
literal|12
condition|)
block|{
name|month
operator|=
literal|1
expr_stmt|;
name|year
operator|=
operator|+
literal|1
expr_stmt|;
block|}
block|}
block|}
end_block

begin_macro
name|gettwo
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|int
name|num
decl_stmt|;
name|num
operator|=
operator|*
name|bptr
operator|++
operator|-
literal|'0'
expr_stmt|;
name|num
operator|=
name|num
operator|*
literal|10
operator|+
operator|*
name|bptr
operator|++
operator|-
literal|'0'
expr_stmt|;
return|return
operator|(
name|num
operator|)
return|;
block|}
end_block

end_unit

