begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
modifier|*
name|rcsid
init|=
literal|"$Header: /f/osi/others/quipu/uips/pod/RCS/pod.c,v 7.2 91/02/22 09:31:41 mrose Interim $"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  * $Header: /f/osi/others/quipu/uips/pod/RCS/pod.c,v 7.2 91/02/22 09:31:41 mrose Interim $  */
end_comment

begin_include
include|#
directive|include
file|"bitmap"
end_include

begin_include
include|#
directive|include
file|"pod.h"
end_include

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_include
include|#
directive|include
file|"dir_entry.h"
end_include

begin_include
include|#
directive|include
file|<manifest.h>
end_include

begin_include
include|#
directive|include
file|<general.h>
end_include

begin_decl_stmt
name|dsEnqError
name|srch_start
argument_list|()
decl_stmt|,
name|read_config_types
argument_list|()
decl_stmt|,
name|list_start
argument_list|()
decl_stmt|,
name|read_all
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
name|dsErrorStruct
name|modify_entry
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|void
name|make_friendly
argument_list|()
decl_stmt|,
name|make_template
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
name|void
name|quit
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|extern
name|bool
name|read_all_flag
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
name|base_path
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
name|friendly_base_path
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
name|mvalue
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|unsigned
name|int
name|filt_num
decl_stmt|,
name|typeindx
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
modifier|*
name|av_typeindx
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|filtvalue
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|filttype
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
name|dua_help_dir
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|NUMLINES
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|px
decl_stmt|,
name|py
decl_stmt|,
name|maxx
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|Pixmap
name|photo_pixmap
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|bool
name|photo_on
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Widget
name|PhotoWindow
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|icon
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|sizelimit
decl_stmt|,
name|histlimit
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|curr_help
index|[
name|STRINGLEN
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|curr_selection
index|[
name|STRINGLEN
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|help_string
index|[
name|RESBUF
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|Widget
name|standby
init|=
literal|0
decl_stmt|,
name|error_popup
init|=
literal|0
decl_stmt|,
name|curr_read_popup
init|=
literal|0
decl_stmt|,
name|curr_list_popup
init|=
literal|0
decl_stmt|,
name|curr_modify_popup
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|Display
modifier|*
name|dpy
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|Screen
modifier|*
name|screen
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|int
name|scr
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|str_seq
name|showseq
decl_stmt|,
name|dnseq
decl_stmt|,
name|backseq
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|entry_number
decl_stmt|,
name|dn_number
decl_stmt|,
name|back_buf_num
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|element_number
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|rdn_number
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|help_up
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|CreateCurrPosWindow
argument_list|()
decl_stmt|,
name|CreateSearchWindow
argument_list|()
decl_stmt|,
name|CreateMessagePopup
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|CreateErrorPopup
argument_list|()
decl_stmt|,
name|CreateHelpPopup
argument_list|()
decl_stmt|,
name|CreateHistoryPopup
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|CreateCommandForm
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|dirEntry
name|createModifyTemplate
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|Widget
name|createModifyPopup
argument_list|()
decl_stmt|,
name|createReadPopup
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|Widget
name|createTypeMenu
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|void
name|Quit
argument_list|()
decl_stmt|,
name|QuitFromHelp
argument_list|()
decl_stmt|,
name|InsertHelp
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|List
argument_list|()
decl_stmt|,
name|ListDestroy
argument_list|()
decl_stmt|,
name|Close
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|AddNewList
argument_list|()
decl_stmt|,
name|ListSelect
argument_list|()
decl_stmt|,
name|destroyList
argument_list|()
decl_stmt|,
name|keepList
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|Move
argument_list|()
decl_stmt|,
name|DnMoveRead
argument_list|()
decl_stmt|,
name|DnMove
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|SetType
argument_list|()
decl_stmt|,
name|Read
argument_list|()
decl_stmt|,
name|Help
argument_list|()
decl_stmt|,
name|ReadAll
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|TSearch
argument_list|()
decl_stmt|,
name|ClearSearchArea
argument_list|()
decl_stmt|,
name|StartSearch
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|createList
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|void
name|createHistoryPopup
argument_list|()
decl_stmt|,
name|popupHistory
argument_list|()
decl_stmt|,
name|popdownHistory
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|displayReadPopup
argument_list|()
decl_stmt|,
name|readDestroy
argument_list|()
decl_stmt|,
name|keepRead
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|submitModif
argument_list|()
decl_stmt|,
name|closeModify
argument_list|()
decl_stmt|,
name|modifyEntry
argument_list|()
decl_stmt|,
name|addValField
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|UndoValChanges
argument_list|()
decl_stmt|,
name|UndoAttrChanges
argument_list|()
decl_stmt|,
name|modUpdate
argument_list|()
decl_stmt|,
name|keepModify
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|killError
argument_list|()
decl_stmt|,
name|doError
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|ChangeHelp
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|buttonPress
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|void
name|SetBorder
argument_list|()
decl_stmt|,
name|UnSetBorder
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|freeEntry
argument_list|()
decl_stmt|,
name|freeSpace
argument_list|()
decl_stmt|,
name|CutString
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|void
name|ListSelectList
argument_list|()
decl_stmt|,
name|DnList
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|ListSelectMove
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|bool
name|ConvSel
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|int
name|GetTextWidth
argument_list|()
decl_stmt|,
name|GetTextHeight
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|PopupMessage
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|entry_print
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|displayModMessage
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|kill_error
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|void
name|kill_message
argument_list|()
decl_stmt|,
name|message
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
name|void
name|CreateBackgroundPixmap
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|displayError
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|void
name|print_photo
argument_list|()
decl_stmt|,
name|kill_photo
argument_list|()
decl_stmt|,
name|make_photo_widget
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Widget
name|toplevel
decl_stmt|,
name|outer
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|XtActionsRec
name|buttonActionsTable
index|[]
init|=
block|{
block|{
literal|"ChangeHelp"
block|,
operator|(
name|XtActionProc
operator|)
name|ChangeHelp
block|}
block|,
block|{
literal|"buttonPress"
block|,
operator|(
name|XtActionProc
operator|)
name|buttonPress
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|XtActionsRec
name|borderActionsTable
index|[]
init|=
block|{
block|{
literal|"SetBorder"
block|,
operator|(
name|XtActionProc
operator|)
name|SetBorder
block|}
block|,
block|{
literal|"UnSetBorder"
block|,
operator|(
name|XtActionProc
operator|)
name|UnSetBorder
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|XtActionsRec
name|listActionsTable
index|[]
init|=
block|{
block|{
literal|"ListSelectList"
block|,
operator|(
name|XtActionProc
operator|)
name|ListSelectList
block|}
block|,
block|{
literal|"ListSelectMove"
block|,
operator|(
name|XtActionProc
operator|)
name|ListSelectMove
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|XtActionsRec
name|currPosActionsTable
index|[]
init|=
block|{
block|{
literal|"DnList"
block|,
operator|(
name|XtActionProc
operator|)
name|DnList
block|}
block|,
block|{
literal|"DnMove"
block|,
operator|(
name|XtActionProc
operator|)
name|DnMove
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|CreateWidgets
parameter_list|()
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|outer
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"outer"
argument_list|,
name|formWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|dpy
operator|=
name|XtDisplay
argument_list|(
name|toplevel
argument_list|)
expr_stmt|;
name|scr
operator|=
name|DefaultScreen
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|screen
operator|=
name|XtScreen
argument_list|(
name|toplevel
argument_list|)
expr_stmt|;
name|XtAddActions
argument_list|(
name|buttonActionsTable
argument_list|,
name|XtNumber
argument_list|(
name|buttonActionsTable
argument_list|)
argument_list|)
expr_stmt|;
name|XtAddActions
argument_list|(
name|borderActionsTable
argument_list|,
name|XtNumber
argument_list|(
name|borderActionsTable
argument_list|)
argument_list|)
expr_stmt|;
name|XtAddActions
argument_list|(
name|listActionsTable
argument_list|,
name|XtNumber
argument_list|(
name|listActionsTable
argument_list|)
argument_list|)
expr_stmt|;
name|XtAddActions
argument_list|(
name|currPosActionsTable
argument_list|,
name|XtNumber
argument_list|(
name|currPosActionsTable
argument_list|)
argument_list|)
expr_stmt|;
name|curr_help
index|[
literal|0
index|]
operator|=
literal|'\0'
expr_stmt|;
name|CreateCurrPosWindow
argument_list|(
name|outer
argument_list|)
expr_stmt|;
name|CreateSearchWindow
argument_list|(
name|outer
argument_list|)
expr_stmt|;
name|CreateCommandForm
argument_list|(
name|outer
argument_list|)
expr_stmt|;
name|CreateHistoryPopup
argument_list|(
name|backseq
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|CreateHelpPopup
argument_list|()
expr_stmt|;
name|CreateMessagePopup
argument_list|()
expr_stmt|;
name|CreateErrorPopup
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
name|PodLoop
parameter_list|()
block|{
name|Widget
name|PosWindow
decl_stmt|;
name|XSizeHints
name|hints
decl_stmt|;
name|XtRealizeWidget
argument_list|(
name|toplevel
argument_list|)
expr_stmt|;
name|icon
operator|=
name|XCreatePixmapFromBitmapData
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|toplevel
argument_list|)
argument_list|,
name|icon_bits
argument_list|,
name|icon_width
argument_list|,
name|icon_height
argument_list|,
name|BlackPixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|,
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|hints
operator|.
name|flags
operator|=
literal|0
expr_stmt|;
name|XSetStandardProperties
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|toplevel
argument_list|)
argument_list|,
literal|"Pod"
argument_list|,
literal|"Directory"
argument_list|,
name|icon
argument_list|,
operator|(
name|char
operator|*
operator|*
operator|)
literal|0
argument_list|,
operator|(
name|int
operator|)
literal|0
argument_list|,
operator|&
name|hints
argument_list|)
expr_stmt|;
name|PosWindow
operator|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
expr_stmt|;
name|print_search_area
argument_list|(
name|PosWindow
argument_list|)
expr_stmt|;
if|if
condition|(
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
operator|==
literal|1
condition|)
block|{
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"MainButtonForm"
argument_list|)
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|outer
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"TypeForm"
argument_list|)
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
block|}
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"MainButtonForm.searchButton"
argument_list|)
argument_list|,
name|Search_bits
argument_list|,
name|Search_width
argument_list|,
name|Search_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"MainButtonForm.listButton"
argument_list|)
argument_list|,
name|List_bits
argument_list|,
name|List_width
argument_list|,
name|List_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"MainButtonForm.historyButton"
argument_list|)
argument_list|,
name|History_bits
argument_list|,
name|History_width
argument_list|,
name|History_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"MainButtonForm.quitButton"
argument_list|)
argument_list|,
name|Quit_bits
argument_list|,
name|Quit_width
argument_list|,
name|Quit_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"MainButtonForm.helpButton"
argument_list|)
argument_list|,
name|Help_bits
argument_list|,
name|Help_width
argument_list|,
name|Help_height
argument_list|)
expr_stmt|;
name|goto_addr
argument_list|()
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XtMainLoop
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
name|make_photo_widget
parameter_list|()
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Widget
name|TextForm
decl_stmt|,
name|TextWindow
decl_stmt|;
name|TextForm
operator|=
name|XtNameToWidget
argument_list|(
name|curr_read_popup
argument_list|,
literal|"ReadForm.TextScrolledWindow.TextForm"
argument_list|)
expr_stmt|;
name|TextWindow
operator|=
name|XtNameToWidget
argument_list|(
name|curr_read_popup
argument_list|,
literal|"ReadForm.TextScrolledWindow.TextForm.AttrWindow"
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNforeground
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackground
argument_list|,
name|BlackPixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|(
name|Dimension
operator|)
name|maxx
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
operator|(
name|Dimension
operator|)
name|py
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|TextWindow
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|PhotoWindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"PhotoWindow"
argument_list|,
name|labelWidgetClass
argument_list|,
name|TextForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|kill_photo
parameter_list|()
block|{
if|if
condition|(
name|PhotoWindow
operator|!=
name|NULL
condition|)
block|{
name|XtUnmanageChild
argument_list|(
name|PhotoWindow
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|PhotoWindow
argument_list|)
expr_stmt|;
name|PhotoWindow
operator|=
operator|(
name|Widget
operator|)
literal|0
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|print_photo
parameter_list|()
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|photo_pixmap
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
name|photo_pixmap
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|PhotoWindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|photo_pixmap
operator|=
operator|(
name|Pixmap
operator|)
literal|0
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|createList
parameter_list|(
name|list_seq
parameter_list|,
name|top_mess
parameter_list|,
name|lower_mess
parameter_list|)
name|str_seq
name|list_seq
decl_stmt|;
name|char
modifier|*
name|top_mess
decl_stmt|,
decl|*
name|lower_mess
decl_stmt|;
end_function

begin_block
block|{
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Widget
name|shell
decl_stmt|,
name|swindow
decl_stmt|,
name|ListForm
decl_stmt|,
name|ListWindow
decl_stmt|,
name|closeButton
decl_stmt|,
name|keepButton
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
if|if
condition|(
name|curr_list_popup
condition|)
block|{
if|if
condition|(
operator|!
name|XtIsManaged
argument_list|(
name|curr_list_popup
argument_list|)
condition|)
name|XtManageChild
argument_list|(
name|curr_list_popup
argument_list|)
expr_stmt|;
name|shell
operator|=
name|curr_list_popup
expr_stmt|;
name|ListForm
operator|=
name|XtNameToWidget
argument_list|(
name|shell
argument_list|,
literal|"ListForm"
argument_list|)
expr_stmt|;
name|swindow
operator|=
name|XtNameToWidget
argument_list|(
name|shell
argument_list|,
literal|"ListForm.ListScrolledWindow"
argument_list|)
expr_stmt|;
name|ListWindow
operator|=
name|XtNameToWidget
argument_list|(
name|shell
argument_list|,
literal|"ListForm.ListScrolledWindow.ListWindow"
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|ListForm
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|ListWindow
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|ListWindow
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|ListWindow
operator|=
name|XtCreateWidget
argument_list|(
literal|"ListWindow"
argument_list|,
name|formWidgetClass
argument_list|,
name|swindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|AddNewList
argument_list|(
name|ListWindow
argument_list|,
name|list_seq
argument_list|,
operator|(
name|unsigned
operator|)
name|entry_number
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|ListWindow
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|ListWindow
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|ListForm
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|top_mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|XtNameToWidget
argument_list|(
name|shell
argument_list|,
literal|"ListForm.ListTitle"
argument_list|)
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|lower_mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|XtNameToWidget
argument_list|(
name|shell
argument_list|,
literal|"ListForm.ListMessage"
argument_list|)
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XRaiseWindow
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|shell
argument_list|)
argument_list|)
expr_stmt|;
return|return;
block|}
name|count
operator|=
literal|0
expr_stmt|;
name|shell
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"ListOutput"
argument_list|,
name|topLevelShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|ListForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ListForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|shell
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Close_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|closeButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"closeButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ListForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|closeButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|destroyList
argument_list|,
operator|(
name|XtPointer
operator|)
name|shell
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Keep_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|keepButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"keepButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ListForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|keepButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|keepList
argument_list|,
operator|(
name|XtPointer
operator|)
name|shell
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|top_mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"ListTitle"
argument_list|,
name|labelWidgetClass
argument_list|,
name|ListForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|swindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ListScrolledWindow"
argument_list|,
name|viewportWidgetClass
argument_list|,
name|ListForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|ListWindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ListWindow"
argument_list|,
name|formWidgetClass
argument_list|,
name|swindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|lower_mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"ListMessage"
argument_list|,
name|labelWidgetClass
argument_list|,
name|ListForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|ListWindow
argument_list|,
name|XtNdestroyCallback
argument_list|,
name|ListDestroy
argument_list|,
operator|(
name|XtPointer
operator|)
name|list_seq
argument_list|)
expr_stmt|;
name|AddNewList
argument_list|(
name|ListWindow
argument_list|,
name|list_seq
argument_list|,
operator|(
name|unsigned
operator|)
name|entry_number
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|shell
argument_list|)
expr_stmt|;
name|XtPopup
argument_list|(
name|shell
argument_list|,
name|XtGrabNone
argument_list|)
expr_stmt|;
name|curr_list_popup
operator|=
name|shell
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|closeButton
argument_list|,
name|Close_bits
argument_list|,
name|Close_width
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|keepButton
argument_list|,
name|Keep_bits
argument_list|,
name|Keep_width
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
if|if
condition|(
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
operator|==
literal|1
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|ListForm
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
block|}
end_block

begin_function
specifier|static
name|void
name|CreateCurrPosWindow
parameter_list|(
name|parent
parameter_list|)
name|Widget
name|parent
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|Widget
name|PosForm
decl_stmt|,
name|swindow
decl_stmt|,
name|title
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|PosForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"PosForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|parent
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|title
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"PosTitle"
argument_list|,
name|commandWidgetClass
argument_list|,
name|PosForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|title
argument_list|,
name|XtNcallback
argument_list|,
name|CutString
argument_list|,
operator|(
name|XtPointer
operator|)
name|base_path
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|swindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"PosScrolledWindow"
argument_list|,
name|viewportWidgetClass
argument_list|,
name|PosForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"PosWindow"
argument_list|,
name|formWidgetClass
argument_list|,
name|swindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
end_function

begin_decl_stmt
specifier|static
name|XtActionsRec
name|actionsTable
index|[]
init|=
block|{
block|{
literal|"TSearch"
block|,
operator|(
name|XtActionProc
operator|)
name|TSearch
block|}
block|,
block|{
literal|"ClearSearchArea"
block|,
operator|(
name|XtActionProc
operator|)
name|ClearSearchArea
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|char
name|defaultTranslations
index|[]
init|=
literal|"<Key>Return: TSearch() \n\    Ctrl<Key>M:  TSearch() \n\    Ctrl<Key>O:  TSearch() \n\    Ctrl<Key>J:  TSearch() \n\    Ctrl<Key>U:  ClearSearchArea()"
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|CreateSearchWindow
parameter_list|(
name|parent
parameter_list|)
name|Widget
name|parent
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Widget
name|TypeForm
decl_stmt|,
name|SearchVal
decl_stmt|;
name|XtTranslations
name|trans_table
decl_stmt|;
name|XFontStruct
modifier|*
name|font
decl_stmt|;
name|Dimension
name|height
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|TypeForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"TypeForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|parent
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Searching For "
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"SearchValLabel"
argument_list|,
name|labelWidgetClass
argument_list|,
name|TypeForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNeditType
argument_list|,
name|XawtextEdit
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|SearchVal
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"SearchVal"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|TypeForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|SearchVal
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|height
operator|=
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|height
operator|+=
literal|8
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|SearchVal
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"                                "
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"TypeButton"
argument_list|,
name|menuButtonWidgetClass
argument_list|,
name|TypeForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtSetKeyboardFocus
argument_list|(
name|parent
argument_list|,
name|SearchVal
argument_list|)
expr_stmt|;
name|XtAddActions
argument_list|(
name|actionsTable
argument_list|,
name|XtNumber
argument_list|(
name|actionsTable
argument_list|)
argument_list|)
expr_stmt|;
name|trans_table
operator|=
name|XtParseTranslationTable
argument_list|(
name|defaultTranslations
argument_list|)
expr_stmt|;
name|XtOverrideTranslations
argument_list|(
name|SearchVal
argument_list|,
name|trans_table
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|add_to_history
parameter_list|(
name|seqnum
parameter_list|)
name|int
name|seqnum
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|char
name|curr_base
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|Widget
name|history_form
decl_stmt|,
name|history_display
decl_stmt|,
name|scrolwin
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|str_seq
name|first
decl_stmt|;
name|history_form
operator|=
name|XtNameToWidget
argument_list|(
name|toplevel
argument_list|,
literal|"Session History.HistoryForm"
argument_list|)
expr_stmt|;
name|history_display
operator|=
name|XtNameToWidget
argument_list|(
name|history_form
argument_list|,
literal|"ListScrolledWindow.ListWindow"
argument_list|)
expr_stmt|;
name|scrolwin
operator|=
name|XtParent
argument_list|(
name|history_display
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|history_form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|history_display
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|history_display
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|history_display
operator|=
name|XtCreateWidget
argument_list|(
literal|"ListWindow"
argument_list|,
name|formWidgetClass
argument_list|,
name|scrolwin
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|seqnum
operator|>
name|histlimit
condition|)
block|{
name|first
operator|=
name|backseq
expr_stmt|;
name|backseq
operator|=
name|backseq
operator|->
name|next
expr_stmt|;
name|first
operator|->
name|next
operator|=
name|NULLDS
expr_stmt|;
name|free_seq
argument_list|(
name|first
argument_list|)
expr_stmt|;
name|back_buf_num
operator|--
expr_stmt|;
block|}
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|curr_base
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
name|base_path
index|[
literal|0
index|]
operator|=
literal|'\0'
expr_stmt|;
name|AddNewList
argument_list|(
name|history_display
argument_list|,
name|backseq
argument_list|,
operator|(
name|unsigned
operator|)
name|back_buf_num
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|history_display
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|history_display
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|curr_base
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|history_form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_macro
name|print_search_area
argument_list|(
argument|PosWindow
argument_list|)
end_macro

begin_decl_stmt
name|Widget
name|PosWindow
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
modifier|*
name|str
decl_stmt|,
modifier|*
name|end
decl_stmt|,
name|save
decl_stmt|,
name|name_array
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|char
modifier|*
name|trans_start_btn2
init|=
literal|"<Btn2Up>:  DnList("
decl_stmt|,
modifier|*
name|trans_start_btn3
init|=
literal|"<Btn3Up>:  DnMove("
decl_stmt|,
name|translations
index|[
name|STRINGLEN
index|]
decl_stmt|,
name|trans_buf
index|[
name|SMALLSTRING
index|]
decl_stmt|;
name|Dimension
name|width
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Widget
name|rdn_window
decl_stmt|,
name|last_rdn
init|=
literal|0
decl_stmt|;
name|XtTranslations
name|trans_table
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|&
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|PosWindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|width
operator|-=
literal|24
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
operator|(
literal|"The World"
operator|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderWidth
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderColor
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNhighlightThickness
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNjustify
argument_list|,
name|XtJustifyLeft
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|rdn_window
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"x"
argument_list|,
name|commandWidgetClass
argument_list|,
name|PosWindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|rdn_window
argument_list|,
name|XtNcallback
argument_list|,
name|DnMoveRead
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|trans_buf
argument_list|,
literal|"%d"
argument_list|,
literal|0
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|translations
argument_list|,
name|trans_start_btn2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_buf
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|") \n\ "
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_start_btn3
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_buf
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|")"
argument_list|)
expr_stmt|;
name|trans_table
operator|=
name|XtParseTranslationTable
argument_list|(
name|translations
argument_list|)
expr_stmt|;
name|XtOverrideTranslations
argument_list|(
name|rdn_window
argument_list|,
name|trans_table
argument_list|)
expr_stmt|;
name|last_rdn
operator|=
name|rdn_window
expr_stmt|;
name|rdn_number
operator|=
literal|1
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|name_array
argument_list|,
literal|"xx"
argument_list|)
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
name|end
operator|=
name|friendly_base_path
expr_stmt|;
while|while
condition|(
operator|*
name|end
operator|!=
literal|'\0'
condition|)
name|end
operator|++
expr_stmt|;
name|str
operator|=
name|end
expr_stmt|;
while|while
condition|(
name|str
operator|>
operator|(
name|char
operator|*
operator|)
name|friendly_base_path
condition|)
block|{
while|while
condition|(
operator|*
name|str
operator|!=
literal|','
operator|&&
name|str
operator|>
operator|(
name|char
operator|*
operator|)
name|friendly_base_path
condition|)
name|str
operator|--
expr_stmt|;
while|while
condition|(
operator|!
name|isalnum
argument_list|(
operator|*
name|str
argument_list|)
condition|)
name|str
operator|++
expr_stmt|;
name|save
operator|=
operator|*
name|end
expr_stmt|;
operator|*
name|end
operator|=
literal|'\0'
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
operator|(
operator|*
name|str
condition|?
name|str
else|:
literal|"ahem"
operator|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderWidth
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderColor
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNhighlightThickness
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNjustify
argument_list|,
name|XtJustifyLeft
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|last_rdn
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|rdn_window
operator|=
name|XtCreateManagedWidget
argument_list|(
operator|(
name|String
operator|)
name|name_array
argument_list|,
name|commandWidgetClass
argument_list|,
name|PosWindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|last_rdn
operator|=
name|rdn_window
expr_stmt|;
name|XtAddCallback
argument_list|(
name|rdn_window
argument_list|,
name|XtNcallback
argument_list|,
name|DnMoveRead
argument_list|,
operator|(
name|XtPointer
operator|)
name|rdn_number
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|trans_buf
argument_list|,
literal|"%d"
argument_list|,
operator|(
name|strlen
argument_list|(
name|name_array
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|translations
argument_list|,
name|trans_start_btn2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_buf
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|") \n\ "
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_start_btn3
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_buf
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|")"
argument_list|)
expr_stmt|;
name|trans_table
operator|=
name|XtParseTranslationTable
argument_list|(
name|translations
argument_list|)
expr_stmt|;
name|XtOverrideTranslations
argument_list|(
name|rdn_window
argument_list|,
name|trans_table
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|name_array
argument_list|,
literal|"x"
argument_list|)
expr_stmt|;
name|rdn_number
operator|++
expr_stmt|;
operator|*
name|end
operator|=
name|save
expr_stmt|;
if|if
condition|(
name|str
operator|>
operator|(
name|char
operator|*
operator|)
name|friendly_base_path
condition|)
block|{
while|while
condition|(
operator|*
name|str
operator|!=
literal|','
operator|&&
name|str
operator|>
operator|(
name|char
operator|*
operator|)
name|friendly_base_path
condition|)
name|str
operator|--
expr_stmt|;
name|end
operator|=
name|str
expr_stmt|;
if|if
condition|(
operator|*
name|str
operator|==
literal|','
condition|)
name|str
operator|--
expr_stmt|;
block|}
block|}
block|}
end_block

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|StartSearch
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|,
name|indx
decl_stmt|;
name|Widget
name|text
decl_stmt|;
name|char
name|entry
index|[
name|STRINGLEN
index|]
decl_stmt|,
name|string
index|[
name|STRINGLEN
index|]
decl_stmt|,
name|mess
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|char
modifier|*
name|value
decl_stmt|;
name|dsEnqError
name|status
decl_stmt|;
name|Cursor
name|time_cur
init|=
name|XCreateFontCursor
argument_list|(
name|dpy
argument_list|,
name|XC_watch
argument_list|)
decl_stmt|;
name|Cursor
name|normal_cur
init|=
name|XCreateFontCursor
argument_list|(
name|dpy
argument_list|,
name|XC_left_ptr
argument_list|)
decl_stmt|;
name|message
argument_list|(
literal|"Please Stand By........"
argument_list|)
expr_stmt|;
name|text
operator|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"TypeForm.SearchVal"
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|mvalue
argument_list|,
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|mvalue
index|[
literal|0
index|]
operator|==
literal|'\0'
condition|)
block|{
name|kill_message
argument_list|()
expr_stmt|;
name|displayError
argument_list|(
literal|"You have not specified a search value!\nClick on this window to continue"
argument_list|)
expr_stmt|;
return|return;
block|}
name|XDefineCursor
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|outer
argument_list|)
argument_list|,
name|time_cur
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|status
operator|=
name|srch_start
argument_list|()
expr_stmt|;
name|XDefineCursor
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|outer
argument_list|)
argument_list|,
name|normal_cur
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|kill_message
argument_list|()
expr_stmt|;
switch|switch
condition|(
name|status
condition|)
block|{
case|case
name|Okay
case|:
if|if
condition|(
name|entry_number
operator|==
literal|1
condition|)
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|entry
argument_list|,
operator|(
name|get_from_seq
argument_list|(
literal|1
argument_list|,
name|dnseq
argument_list|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|isleafnode
argument_list|(
name|entry
argument_list|)
condition|)
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|entry
argument_list|)
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
name|set_search_area
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
argument_list|)
expr_stmt|;
name|goto_addr
argument_list|()
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
if|if
condition|(
name|curr_read_popup
operator|==
literal|0
condition|)
name|curr_read_popup
operator|=
name|createReadPopup
argument_list|()
expr_stmt|;
name|status
operator|=
name|read_config_types
argument_list|()
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|Okay
condition|)
name|displayReadPopup
argument_list|()
expr_stmt|;
else|else
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|string
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|entry
argument_list|)
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
if|if
condition|(
name|curr_read_popup
operator|==
literal|0
condition|)
name|curr_read_popup
operator|=
name|createReadPopup
argument_list|()
expr_stmt|;
name|status
operator|=
name|read_config_types
argument_list|()
expr_stmt|;
name|displayReadPopup
argument_list|()
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|Okay
condition|)
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|string
argument_list|)
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
block|}
else|else
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
block|}
name|clear_dnseq
argument_list|()
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|entry_number
operator|>
literal|0
condition|)
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|mess
argument_list|,
literal|"Results of search under "
argument_list|)
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|base_path
argument_list|)
operator|>
literal|3
condition|)
block|{
name|indx
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|','
operator|&&
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|'\0'
condition|)
name|indx
operator|++
expr_stmt|;
name|friendly_base_path
index|[
name|indx
index|]
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|(
name|friendly_base_path
operator|+
name|indx
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
literal|"The World"
argument_list|)
expr_stmt|;
name|indx
operator|=
literal|0
expr_stmt|;
block|}
name|createList
argument_list|(
name|dnseq
argument_list|,
name|mess
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|dnseq
operator|=
literal|0
expr_stmt|;
break|break;
case|case
name|listsizelimit
case|:
case|case
name|adminlimit_w_partial
case|:
case|case
name|timelimit_w_partial
case|:
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|mess
argument_list|,
literal|"Results of search under "
argument_list|)
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|base_path
argument_list|)
operator|>
literal|3
condition|)
block|{
name|indx
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|','
operator|&&
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|'\0'
condition|)
name|indx
operator|++
expr_stmt|;
name|friendly_base_path
index|[
name|indx
index|]
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|(
name|friendly_base_path
operator|+
name|indx
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
literal|"The World"
argument_list|)
expr_stmt|;
name|indx
operator|=
literal|0
expr_stmt|;
block|}
switch|switch
condition|(
name|status
condition|)
block|{
case|case
name|timelimit_w_partial
case|:
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|string
argument_list|,
literal|"%s. %s. %d %s."
argument_list|,
literal|"Time limit reached"
argument_list|,
literal|"Partial results only"
argument_list|,
name|entry_number
argument_list|,
literal|"items displayed"
argument_list|)
expr_stmt|;
break|break;
case|case
name|adminlimit_w_partial
case|:
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|string
argument_list|,
literal|"%s. %s. %d %s."
argument_list|,
literal|"Administrative limit reached"
argument_list|,
literal|"Partial results only"
argument_list|,
name|entry_number
argument_list|,
literal|"items displayed"
argument_list|)
expr_stmt|;
break|break;
case|case
name|listsizelimit
case|:
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|string
argument_list|,
literal|"List size limit exceeded. Only %d items displayed."
argument_list|,
name|entry_number
argument_list|)
expr_stmt|;
break|break;
block|}
name|createList
argument_list|(
name|dnseq
argument_list|,
name|mess
argument_list|,
name|string
argument_list|)
expr_stmt|;
name|dnseq
operator|=
literal|0
expr_stmt|;
break|break;
default|default:
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
block|}
block|}
name|ClearSearchArea
argument_list|(
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"TypeForm.SearchVal"
argument_list|)
argument_list|,
operator|(
name|XEvent
operator|*
operator|)
literal|0
argument_list|,
operator|(
name|String
operator|*
operator|)
literal|0
argument_list|,
operator|(
name|Cardinal
operator|*
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|Widget
name|createTypeMenu
parameter_list|(
name|parent
parameter_list|)
name|Widget
name|parent
decl_stmt|;
block|{
name|Widget
name|menu_mgr
decl_stmt|,
name|button
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|,
name|n
decl_stmt|;
name|menu_mgr
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"menu"
argument_list|,
name|simpleMenuWidgetClass
argument_list|,
name|parent
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|n
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|av_typeindx
index|[
name|n
index|]
operator|!=
operator|-
literal|1
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
operator|(
name|String
operator|)
name|filttype
index|[
name|av_typeindx
index|[
name|n
index|]
index|]
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|button
operator|=
name|XtCreateManagedWidget
argument_list|(
operator|(
name|String
operator|)
name|filttype
index|[
name|av_typeindx
index|[
name|n
index|]
index|]
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|menu_mgr
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|button
argument_list|,
name|XtNcallback
argument_list|,
name|SetType
argument_list|,
operator|(
name|XtPointer
operator|)
name|av_typeindx
index|[
name|n
index|]
argument_list|)
expr_stmt|;
name|n
operator|++
expr_stmt|;
block|}
return|return
name|menu_mgr
return|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|SetType
parameter_list|(
name|w
parameter_list|,
name|indx
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|indx
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|menu
decl_stmt|,
name|menuButton
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|char
name|label
index|[
literal|1024
index|]
decl_stmt|;
name|menuButton
operator|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"TypeForm.TypeButton"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|int
operator|)
name|indx
operator|<
literal|0
operator|||
operator|(
name|int
operator|)
name|indx
operator|>=
operator|(
name|int
operator|)
name|filt_num
condition|)
return|return;
if|if
condition|(
operator|(
name|menu
operator|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"TypeForm.TypeButton.menu"
argument_list|)
operator|)
condition|)
name|XtDestroyWidget
argument_list|(
name|menu
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|createTypeMenu
argument_list|(
name|menuButton
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|label
argument_list|,
name|filttype
index|[
operator|(
name|int
operator|)
name|indx
index|]
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|menuButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|typeindx
operator|=
operator|(
name|int
operator|)
name|indx
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|CreateCommandForm
parameter_list|(
name|parent
parameter_list|)
name|Widget
name|parent
decl_stmt|;
block|{
name|Widget
name|form
decl_stmt|,
name|quitButton
decl_stmt|,
name|helpButton
decl_stmt|,
name|searchButton
decl_stmt|,
name|listButton
decl_stmt|,
name|historyButton
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|form
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"MainButtonForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|parent
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Quit_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Quit_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|quitButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"quitButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|quitButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|Quit
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Help_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Help_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|helpButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"helpButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|helpButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|Help
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Search_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Search_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|searchButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"searchButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|searchButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|StartSearch
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|List_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|List_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|listButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"listButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|listButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|List
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|History_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|History_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|historyButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"historyButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|historyButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|popupHistory
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|displayReadPopup
parameter_list|()
block|{
if|if
condition|(
name|curr_read_popup
condition|)
block|{
name|XtPopup
argument_list|(
name|curr_read_popup
argument_list|,
name|XtGrabNone
argument_list|)
expr_stmt|;
name|XRaiseWindow
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|curr_read_popup
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|setReadEntryName
parameter_list|(
name|entry_name
parameter_list|)
name|char
modifier|*
name|entry_name
decl_stmt|;
block|{
name|Widget
name|title
decl_stmt|,
name|modifyButton
decl_stmt|,
name|showAllButton
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|char
modifier|*
name|object
decl_stmt|,
name|friendly_name
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|make_friendly
argument_list|(
name|friendly_name
argument_list|,
name|entry_name
argument_list|)
expr_stmt|;
if|if
condition|(
name|curr_read_popup
condition|)
block|{
name|object
operator|=
name|strdup
argument_list|(
name|entry_name
argument_list|)
expr_stmt|;
name|title
operator|=
name|XtNameToWidget
argument_list|(
name|curr_read_popup
argument_list|,
literal|"ReadForm.ReadTitle"
argument_list|)
expr_stmt|;
name|modifyButton
operator|=
name|XtNameToWidget
argument_list|(
name|curr_read_popup
argument_list|,
literal|"ReadForm.ReadButtonForm.modifyButton"
argument_list|)
expr_stmt|;
name|showAllButton
operator|=
name|XtNameToWidget
argument_list|(
name|XtParent
argument_list|(
name|modifyButton
argument_list|)
argument_list|,
literal|"showAllButton"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|friendly_name
operator|==
literal|'\0'
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"The World"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|friendly_name
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|XtSetValues
argument_list|(
name|title
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|XtHasCallbacks
argument_list|(
name|title
argument_list|,
name|XtNcallback
argument_list|)
operator|==
name|XtCallbackHasSome
condition|)
name|XtRemoveAllCallbacks
argument_list|(
name|title
argument_list|,
name|XtNcallback
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|title
argument_list|,
name|XtNcallback
argument_list|,
name|CutString
argument_list|,
operator|(
name|XtPointer
operator|)
name|object
argument_list|)
expr_stmt|;
if|if
condition|(
name|XtHasCallbacks
argument_list|(
name|showAllButton
argument_list|,
name|XtNcallback
argument_list|)
operator|==
name|XtCallbackHasSome
condition|)
name|XtRemoveAllCallbacks
argument_list|(
name|showAllButton
argument_list|,
name|XtNcallback
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|showAllButton
argument_list|,
name|XtNcallback
argument_list|,
name|ReadAll
argument_list|,
operator|(
name|XtPointer
operator|)
name|object
argument_list|)
expr_stmt|;
if|if
condition|(
name|XtHasCallbacks
argument_list|(
name|modifyButton
argument_list|,
name|XtNdestroyCallback
argument_list|)
operator|==
name|XtCallbackHasSome
condition|)
name|XtRemoveAllCallbacks
argument_list|(
name|modifyButton
argument_list|,
name|XtNdestroyCallback
argument_list|)
expr_stmt|;
if|if
condition|(
name|XtHasCallbacks
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|)
operator|==
name|XtCallbackHasSome
condition|)
name|XtRemoveAllCallbacks
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|,
name|modifyEntry
argument_list|,
operator|(
name|XtPointer
operator|)
name|object
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modifyButton
argument_list|,
name|XtNdestroyCallback
argument_list|,
name|freeSpace
argument_list|,
operator|(
name|XtPointer
operator|)
name|object
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_decl_stmt
specifier|static
name|XawTextSelectType
name|select_types
index|[]
init|=
block|{
name|XawselectLine
block|,
name|XawselectNull
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|Widget
name|createReadPopup
parameter_list|()
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Widget
name|closeButton
decl_stmt|,
name|keepButton
decl_stmt|,
name|modifyButton
decl_stmt|,
name|showAllButton
decl_stmt|,
name|TextScrolledWindow
decl_stmt|,
name|AttrWindow
decl_stmt|,
name|TextForm
decl_stmt|,
name|ReadPopup
decl_stmt|,
name|ReadForm
decl_stmt|,
name|ButtonForm
decl_stmt|;
name|ReadPopup
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"Directory Entry"
argument_list|,
name|topLevelShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Top of popup form. */
name|ReadForm
operator|=
name|XtCreateWidget
argument_list|(
literal|"ReadForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|ReadPopup
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Buttons */
name|ButtonForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ReadButtonForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|ReadForm
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Close_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|closeButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"closeButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|closeButton
argument_list|,
name|XtNcallback
argument_list|,
name|readDestroy
argument_list|,
operator|(
name|XtPointer
operator|)
name|ReadPopup
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Keep_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|keepButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"keepButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|keepButton
argument_list|,
name|XtNcallback
argument_list|,
name|keepRead
argument_list|,
operator|(
name|XtPointer
operator|)
name|ReadPopup
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|ShowAll_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|ShowAll_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|showAllButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"showAllButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Modify_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Modify_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modifyButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"modifyButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
comment|/* End of buttons */
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|friendly_base_path
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"ReadTitle"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ReadForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|TextScrolledWindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"TextScrolledWindow"
argument_list|,
name|viewportWidgetClass
argument_list|,
name|ReadForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderWidth
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|TextForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"TextForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|TextScrolledWindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|AttrWindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"AttrWindow"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|TextForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XawTextSetSelectionArray
argument_list|(
name|AttrWindow
argument_list|,
name|select_types
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"SepWindow"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|TextForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"ValWindow"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|TextForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|TextForm
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
comment|/* End of text layout */
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|ReadForm
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|ReadPopup
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|closeButton
argument_list|,
name|Close_bits
argument_list|,
name|Close_width
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|keepButton
argument_list|,
name|Keep_bits
argument_list|,
name|Keep_width
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|showAllButton
argument_list|,
name|ShowAll_bits
argument_list|,
name|ShowAll_width
argument_list|,
name|ShowAll_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|modifyButton
argument_list|,
name|Modify_bits
argument_list|,
name|Modify_width
argument_list|,
name|Modify_height
argument_list|)
expr_stmt|;
if|if
condition|(
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
operator|==
literal|1
condition|)
block|{
name|CreateBackgroundPixmap
argument_list|(
name|ReadForm
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|ButtonForm
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
block|}
name|PhotoWindow
operator|=
literal|0
expr_stmt|;
return|return
name|ReadPopup
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|AddNewList
parameter_list|(
name|list_widget
parameter_list|,
name|list_seq
parameter_list|,
name|list_size
parameter_list|)
name|Widget
name|list_widget
decl_stmt|;
name|str_seq
name|list_seq
decl_stmt|;
name|unsigned
name|int
name|list_size
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Widget
name|element
decl_stmt|,
name|scrolwin
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|,
name|n
decl_stmt|;
name|char
name|name
index|[
name|STRINGLEN
index|]
decl_stmt|,
name|friendly_rdn
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|char
modifier|*
name|prev
decl_stmt|,
modifier|*
name|object
decl_stmt|;
name|Dimension
name|width
decl_stmt|,
name|rwidth
decl_stmt|;
name|char
modifier|*
name|trans_start_btn2
init|=
literal|"<Btn2Up>:  ListSelectList("
decl_stmt|,
modifier|*
name|trans_start_btn3
init|=
literal|"<Btn3Up>:  ListSelectMove("
decl_stmt|,
name|translations
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|XtTranslations
name|trans_table
decl_stmt|;
name|scrolwin
operator|=
operator|(
name|Widget
operator|)
name|XtParent
argument_list|(
name|list_widget
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|&
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|scrolwin
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|width
operator|-=
literal|15
expr_stmt|;
name|element_number
operator|=
name|list_size
expr_stmt|;
operator|*
name|name
operator|=
literal|'\0'
expr_stmt|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
name|element_number
condition|;
name|n
operator|++
control|)
block|{
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|name
argument_list|,
literal|"X"
argument_list|)
expr_stmt|;
name|object
operator|=
name|get_from_seq
argument_list|(
name|n
operator|+
literal|1
argument_list|,
name|list_seq
argument_list|)
expr_stmt|;
name|make_friendly_rdn
argument_list|(
name|friendly_rdn
argument_list|,
name|object
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
operator|(
operator|*
name|friendly_rdn
condition|?
name|friendly_rdn
else|:
literal|"The World"
operator|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderWidth
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderColor
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNhighlightThickness
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNjustify
argument_list|,
name|XtJustifyLeft
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|name
argument_list|)
operator|>
literal|1
condition|)
block|{
name|prev
operator|=
operator|(
name|char
operator|*
operator|)
name|name
operator|+
literal|1
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|XtNameToWidget
argument_list|(
name|list_widget
argument_list|,
name|prev
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|element
operator|=
name|XtCreateManagedWidget
argument_list|(
operator|(
name|String
operator|)
name|name
argument_list|,
name|commandWidgetClass
argument_list|,
name|list_widget
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|element
argument_list|,
name|XtNcallback
argument_list|,
name|ListSelect
argument_list|,
operator|(
name|XtPointer
operator|)
name|object
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|translations
argument_list|,
name|trans_start_btn2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|"\""
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|object
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|"\""
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|") \n\ "
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|trans_start_btn3
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|"\""
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
name|object
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|"\""
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|translations
argument_list|,
literal|")"
argument_list|)
expr_stmt|;
name|trans_table
operator|=
name|XtParseTranslationTable
argument_list|(
name|translations
argument_list|)
expr_stmt|;
name|XtOverrideTranslations
argument_list|(
name|element
argument_list|,
name|trans_table
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|&
name|rwidth
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|element
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|rwidth
operator|<
name|width
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|element
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
name|readEntryPrint
parameter_list|(
name|entry
parameter_list|)
name|char
modifier|*
name|entry
decl_stmt|;
block|{
name|Widget
name|entry_form
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|curr_read_popup
condition|)
block|{
name|entry_form
operator|=
name|XtNameToWidget
argument_list|(
name|curr_read_popup
argument_list|,
literal|"ReadForm.TextScrolledWindow.TextForm"
argument_list|)
expr_stmt|;
name|entry_print
argument_list|(
name|entry_form
argument_list|,
name|entry
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
name|entry_print
parameter_list|(
name|entry_form
parameter_list|,
name|entry
parameter_list|)
name|Widget
name|entry_form
decl_stmt|;
name|char
modifier|*
name|entry
decl_stmt|;
block|{
name|Widget
name|attr_list
decl_stmt|,
name|val_list
decl_stmt|,
name|sep_list
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|,
name|attr_count
init|=
literal|0
decl_stmt|;
specifier|register
name|char
modifier|*
name|str_start
decl_stmt|,
modifier|*
name|str_end
decl_stmt|;
name|char
name|save
decl_stmt|,
name|vals
index|[
name|RESBUF
index|]
decl_stmt|,
name|attrs
index|[
name|RESBUF
index|]
decl_stmt|,
name|seps
index|[
name|RESBUF
index|]
decl_stmt|;
name|Dimension
name|attr_width
init|=
literal|0
decl_stmt|,
name|max_attr_width
init|=
literal|0
decl_stmt|;
name|Dimension
name|val_width
init|=
literal|0
decl_stmt|,
name|max_val_width
init|=
literal|0
decl_stmt|;
name|Dimension
name|sep_width
decl_stmt|;
name|Dimension
name|height
decl_stmt|;
name|XFontStruct
modifier|*
name|font
decl_stmt|;
name|XawFormDoLayout
argument_list|(
name|entry_form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|vals
argument_list|,
literal|""
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|attrs
argument_list|,
literal|""
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|seps
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|attr_list
operator|=
name|XtNameToWidget
argument_list|(
name|entry_form
argument_list|,
literal|"AttrWindow"
argument_list|)
expr_stmt|;
name|val_list
operator|=
name|XtNameToWidget
argument_list|(
name|entry_form
argument_list|,
literal|"ValWindow"
argument_list|)
expr_stmt|;
name|sep_list
operator|=
name|XtNameToWidget
argument_list|(
name|entry_form
argument_list|,
literal|"SepWindow"
argument_list|)
expr_stmt|;
name|XawTextDisableRedisplay
argument_list|(
name|attr_list
argument_list|)
expr_stmt|;
name|XawTextDisableRedisplay
argument_list|(
name|val_list
argument_list|)
expr_stmt|;
name|XawTextDisableRedisplay
argument_list|(
name|sep_list
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|attr_list
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|str_start
operator|=
name|str_end
operator|=
name|entry
expr_stmt|;
while|while
condition|(
operator|*
name|str_end
operator|!=
literal|'\0'
condition|)
block|{
name|attr_count
operator|++
expr_stmt|;
if|if
condition|(
operator|*
name|str_end
operator|==
literal|'\t'
condition|)
block|{
while|while
condition|(
name|isspace
argument_list|(
operator|*
name|str_end
argument_list|)
condition|)
name|str_end
operator|++
expr_stmt|;
name|str_start
operator|=
name|str_end
expr_stmt|;
while|while
condition|(
operator|*
name|str_end
operator|!=
literal|'\n'
operator|&&
operator|*
name|str_end
operator|!=
literal|'\0'
condition|)
name|str_end
operator|++
expr_stmt|;
name|save
operator|=
operator|*
name|str_end
expr_stmt|;
operator|*
name|str_end
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|attrs
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|vals
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|vals
argument_list|,
name|str_start
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|seps
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|val_width
operator|=
name|XTextWidth
argument_list|(
name|font
argument_list|,
name|str_start
argument_list|,
name|strlen
argument_list|(
name|str_start
argument_list|)
argument_list|)
operator|+
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
expr_stmt|;
if|if
condition|(
name|val_width
operator|>
name|max_val_width
condition|)
name|max_val_width
operator|=
name|val_width
expr_stmt|;
if|if
condition|(
name|save
operator|==
literal|'\0'
condition|)
name|str_end
operator|--
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
operator|!
name|isspace
argument_list|(
operator|*
name|str_end
argument_list|)
condition|)
name|str_end
operator|++
expr_stmt|;
name|save
operator|=
operator|*
name|str_end
expr_stmt|;
operator|*
name|str_end
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|attrs
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|attrs
argument_list|,
name|str_start
argument_list|)
expr_stmt|;
name|attr_width
operator|=
name|XTextWidth
argument_list|(
name|font
argument_list|,
name|str_start
argument_list|,
name|strlen
argument_list|(
name|str_start
argument_list|)
argument_list|)
operator|+
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
expr_stmt|;
if|if
condition|(
name|attr_width
operator|>
name|max_attr_width
condition|)
name|max_attr_width
operator|=
name|attr_width
expr_stmt|;
operator|*
name|str_end
operator|=
name|save
expr_stmt|;
while|while
condition|(
operator|*
name|str_end
operator|!=
literal|'-'
condition|)
name|str_end
operator|++
expr_stmt|;
name|str_end
operator|++
expr_stmt|;
while|while
condition|(
name|isspace
argument_list|(
operator|*
name|str_end
argument_list|)
condition|)
name|str_end
operator|++
expr_stmt|;
name|str_start
operator|=
name|str_end
expr_stmt|;
while|while
condition|(
operator|*
name|str_end
operator|!=
literal|'\n'
operator|&&
operator|*
name|str_end
operator|!=
literal|'\0'
condition|)
name|str_end
operator|++
expr_stmt|;
name|save
operator|=
operator|*
name|str_end
expr_stmt|;
operator|*
name|str_end
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|seps
argument_list|,
literal|"-\n"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|vals
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|vals
argument_list|,
name|str_start
argument_list|)
expr_stmt|;
name|val_width
operator|=
name|XTextWidth
argument_list|(
name|font
argument_list|,
name|str_start
argument_list|,
name|strlen
argument_list|(
name|str_start
argument_list|)
argument_list|)
operator|+
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
expr_stmt|;
if|if
condition|(
name|val_width
operator|>
name|max_val_width
condition|)
name|max_val_width
operator|=
name|val_width
expr_stmt|;
if|if
condition|(
name|save
operator|==
literal|'\0'
condition|)
name|str_end
operator|--
expr_stmt|;
block|}
name|str_start
operator|=
operator|++
name|str_end
expr_stmt|;
block|}
name|max_attr_width
operator|+=
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|max_val_width
operator|+=
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|height
operator|=
operator|++
name|attr_count
operator|*
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|sep_width
operator|=
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
operator|(
name|attrs
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|max_attr_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|attr_list
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
operator|(
name|vals
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|max_val_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|val_list
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
name|seps
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|sep_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|sep_list
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XawTextEnableRedisplay
argument_list|(
name|attr_list
argument_list|)
expr_stmt|;
name|XawTextEnableRedisplay
argument_list|(
name|val_list
argument_list|)
expr_stmt|;
name|XawTextEnableRedisplay
argument_list|(
name|sep_list
argument_list|)
expr_stmt|;
if|if
condition|(
name|PhotoWindow
operator|!=
name|NULL
operator|&&
name|photo_on
operator|==
name|TRUE
condition|)
block|{
name|XtRealizeWidget
argument_list|(
name|PhotoWindow
argument_list|)
expr_stmt|;
name|print_photo
argument_list|()
expr_stmt|;
block|}
name|XawFormDoLayout
argument_list|(
name|entry_form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|Quit
parameter_list|(
name|widget
parameter_list|,
name|closure
parameter_list|,
name|callData
parameter_list|)
name|Widget
name|widget
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|callData
decl_stmt|;
block|{
name|XtDestroyWidget
argument_list|(
name|toplevel
argument_list|)
expr_stmt|;
name|quit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|TSearch
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|Cardinal
modifier|*
name|num_params
decl_stmt|;
block|{
name|StartSearch
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ClearSearchArea
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|Cardinal
modifier|*
name|num_params
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|"\0"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|w
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ReadAll
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|dsEnqError
name|status
decl_stmt|;
name|Widget
name|temp_read_popup
decl_stmt|;
name|char
name|current_path
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|char
modifier|*
name|object
init|=
operator|(
name|char
operator|*
operator|)
name|closure
decl_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|current_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|object
argument_list|)
expr_stmt|;
name|temp_read_popup
operator|=
name|curr_read_popup
expr_stmt|;
name|curr_read_popup
operator|=
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|status
operator|=
name|read_all
argument_list|()
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|Okay
condition|)
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
else|else
name|displayReadPopup
argument_list|()
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|current_path
argument_list|)
expr_stmt|;
name|curr_read_popup
operator|=
name|temp_read_popup
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|Read
parameter_list|(
name|w
parameter_list|,
name|data
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|data
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|dsEnqError
name|status
decl_stmt|;
if|if
condition|(
name|curr_read_popup
operator|==
literal|0
condition|)
name|curr_read_popup
operator|=
name|createReadPopup
argument_list|()
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|status
operator|=
name|read_config_types
argument_list|()
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|Okay
condition|)
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
else|else
name|displayReadPopup
argument_list|()
expr_stmt|;
block|}
end_function

begin_macro
name|set_search_area
argument_list|(
argument|search_area
argument_list|)
end_macro

begin_decl_stmt
name|Widget
name|search_area
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|WidgetList
name|wlist
decl_stmt|;
name|char
name|name
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|,
name|n
decl_stmt|;
name|wlist
operator|=
operator|(
name|WidgetList
operator|)
name|XtMalloc
argument_list|(
operator|(
name|rdn_number
operator|+
literal|1
operator|)
operator|*
sizeof|sizeof
argument_list|(
name|Widget
argument_list|)
argument_list|)
expr_stmt|;
name|name
index|[
literal|0
index|]
operator|=
literal|'\0'
expr_stmt|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
name|rdn_number
condition|;
name|n
operator|++
control|)
block|{
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|name
argument_list|,
literal|"x"
argument_list|)
expr_stmt|;
name|wlist
index|[
name|n
index|]
operator|=
name|XtNameToWidget
argument_list|(
name|search_area
argument_list|,
name|name
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|XtUnmanageChildren
argument_list|(
name|wlist
argument_list|,
name|count
argument_list|)
expr_stmt|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
name|count
condition|;
name|n
operator|++
control|)
name|XtDestroyWidget
argument_list|(
name|wlist
index|[
name|n
index|]
argument_list|)
expr_stmt|;
name|XtFree
argument_list|(
name|wlist
argument_list|)
expr_stmt|;
name|print_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
block|}
end_block

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|List
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|int
name|indx
decl_stmt|;
name|char
name|string
index|[
literal|1024
index|]
decl_stmt|,
name|mess
index|[
literal|1024
index|]
decl_stmt|;
name|dsEnqError
name|status
decl_stmt|;
name|Cursor
name|time_cur
init|=
name|XCreateFontCursor
argument_list|(
name|dpy
argument_list|,
name|XC_watch
argument_list|)
decl_stmt|;
name|Cursor
name|normal_cur
init|=
name|XCreateFontCursor
argument_list|(
name|dpy
argument_list|,
name|XC_left_ptr
argument_list|)
decl_stmt|;
name|message
argument_list|(
literal|"Please Stand By......"
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|XDefineCursor
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|outer
argument_list|)
argument_list|,
name|time_cur
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|status
operator|=
name|list_start
argument_list|()
expr_stmt|;
name|XDefineCursor
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|outer
argument_list|)
argument_list|,
name|normal_cur
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|kill_message
argument_list|()
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|status
condition|)
block|{
case|case
name|listsizelimit
case|:
case|case
name|adminlimit_w_partial
case|:
case|case
name|timelimit_w_partial
case|:
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|mess
argument_list|,
literal|"Results of list under "
argument_list|)
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|base_path
argument_list|)
operator|>
literal|3
condition|)
block|{
name|indx
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|','
operator|&&
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|'\0'
condition|)
name|indx
operator|++
expr_stmt|;
name|friendly_base_path
index|[
name|indx
index|]
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
operator|(
name|char
operator|*
operator|)
name|friendly_base_path
argument_list|)
expr_stmt|;
block|}
else|else
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
literal|"The World"
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|status
condition|)
block|{
case|case
name|listsizelimit
case|:
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|string
argument_list|,
literal|"List size limit exceeded. Only %d items displayed."
argument_list|,
name|entry_number
argument_list|)
expr_stmt|;
break|break;
case|case
name|adminlimit_w_partial
case|:
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|string
argument_list|,
literal|"%s. %s. %d %s."
argument_list|,
literal|"Administrative limit reached"
argument_list|,
literal|"Partial results only"
argument_list|,
name|entry_number
argument_list|,
literal|"items displayed"
argument_list|)
expr_stmt|;
break|break;
case|case
name|timelimit_w_partial
case|:
operator|(
name|void
operator|)
name|sprintf
argument_list|(
name|string
argument_list|,
literal|"%s. %s. %d %s."
argument_list|,
literal|"Time limit reached"
argument_list|,
literal|"Partial results only"
argument_list|,
name|entry_number
argument_list|,
literal|"items displayed"
argument_list|)
expr_stmt|;
break|break;
block|}
name|createList
argument_list|(
name|dnseq
argument_list|,
name|mess
argument_list|,
name|string
argument_list|)
expr_stmt|;
name|dnseq
operator|=
literal|0
expr_stmt|;
break|break;
case|case
name|Okay
case|:
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|mess
argument_list|,
literal|"Results of list under "
argument_list|)
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|base_path
argument_list|)
operator|>
literal|3
condition|)
block|{
name|indx
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|','
operator|&&
name|friendly_base_path
index|[
name|indx
index|]
operator|!=
literal|'\0'
condition|)
name|indx
operator|++
expr_stmt|;
name|friendly_base_path
index|[
name|indx
index|]
operator|=
literal|'\0'
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
operator|(
name|char
operator|*
operator|)
name|friendly_base_path
argument_list|)
expr_stmt|;
block|}
else|else
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|mess
argument_list|,
literal|"The World"
argument_list|)
expr_stmt|;
name|createList
argument_list|(
name|dnseq
argument_list|,
name|mess
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|dnseq
operator|=
literal|0
expr_stmt|;
break|break;
default|default:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ListSelect
parameter_list|(
name|w
parameter_list|,
name|object
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|object
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|char
modifier|*
name|entry_name
decl_stmt|,
name|parent
index|[
name|STRINGLEN
index|]
decl_stmt|;
operator|(
name|void
operator|)
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
expr_stmt|;
name|entry_name
operator|=
operator|(
name|char
operator|*
operator|)
name|object
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|parent
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|entry_name
argument_list|)
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|isleafnode
argument_list|(
name|entry_name
argument_list|)
condition|)
block|{
if|if
condition|(
name|read_all_flag
operator|==
name|TRUE
condition|)
block|{
name|Read
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
name|Move
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|entry_name
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Read
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|parent
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ListSelectMove
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
name|char
name|temp_path
index|[
name|STRINGLEN
index|]
decl_stmt|;
name|Widget
name|search_area
init|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
decl_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|temp_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|params
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|isleafnode
argument_list|(
name|base_path
argument_list|)
condition|)
block|{
name|goto_addr
argument_list|()
expr_stmt|;
name|set_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|temp_path
argument_list|)
expr_stmt|;
name|displayError
argument_list|(
literal|"Cannot move to a leaf entry!\nClick on this window to continue"
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ListSelectList
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
name|Widget
name|search_area
init|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
decl_stmt|;
name|char
name|temp_path
index|[
name|STRINGLEN
index|]
decl_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|temp_path
argument_list|,
name|base_path
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|params
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|isleafnode
argument_list|(
name|base_path
argument_list|)
condition|)
block|{
name|List
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|goto_addr
argument_list|()
expr_stmt|;
name|set_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|temp_path
argument_list|)
expr_stmt|;
name|displayError
argument_list|(
literal|"Cannot list under a leaf entry!\nClick on this window to continue"
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|DnList
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
name|Widget
name|search_area
init|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
decl_stmt|;
specifier|register
name|char
modifier|*
name|end
init|=
name|base_path
decl_stmt|;
name|int
name|rdnlevel
init|=
name|atoi
argument_list|(
name|params
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
if|if
condition|(
name|rdnlevel
operator|==
literal|0
condition|)
operator|*
name|base_path
operator|=
literal|'\0'
expr_stmt|;
elseif|else
if|if
condition|(
name|rdn_number
operator|>
call|(
name|int
call|)
argument_list|(
name|rdnlevel
operator|+
literal|1
argument_list|)
condition|)
block|{
while|while
condition|(
name|rdnlevel
condition|)
block|{
while|while
condition|(
operator|*
name|end
operator|!=
literal|'@'
condition|)
name|end
operator|++
expr_stmt|;
if|if
condition|(
operator|*
name|end
operator|==
literal|'@'
condition|)
name|end
operator|++
expr_stmt|;
name|rdnlevel
operator|--
expr_stmt|;
block|}
operator|*
operator|--
name|end
operator|=
literal|'\0'
expr_stmt|;
block|}
name|List
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|goto_addr
argument_list|()
expr_stmt|;
name|set_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|DnMove
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
specifier|register
name|char
modifier|*
name|end
decl_stmt|;
name|Widget
name|search_area
init|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
decl_stmt|;
name|int
name|rdnlevel
init|=
name|atoi
argument_list|(
name|params
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|end
operator|=
name|base_path
expr_stmt|;
if|if
condition|(
name|rdnlevel
operator|==
literal|0
condition|)
operator|*
name|base_path
operator|=
literal|'\0'
expr_stmt|;
elseif|else
if|if
condition|(
name|rdn_number
operator|>
call|(
name|int
call|)
argument_list|(
name|rdnlevel
operator|+
literal|1
argument_list|)
condition|)
block|{
while|while
condition|(
name|rdnlevel
condition|)
block|{
while|while
condition|(
operator|*
name|end
operator|!=
literal|'@'
condition|)
name|end
operator|++
expr_stmt|;
if|if
condition|(
operator|*
name|end
operator|==
literal|'@'
condition|)
name|end
operator|++
expr_stmt|;
name|rdnlevel
operator|--
expr_stmt|;
block|}
operator|*
operator|--
name|end
operator|=
literal|'\0'
expr_stmt|;
block|}
name|goto_addr
argument_list|()
expr_stmt|;
name|set_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|DnMoveRead
parameter_list|(
name|w
parameter_list|,
name|rdnlevel
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|rdnlevel
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|search_area
decl_stmt|;
name|char
modifier|*
name|end
decl_stmt|;
name|dsEnqError
name|status
decl_stmt|;
name|search_area
operator|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
expr_stmt|;
name|end
operator|=
name|base_path
expr_stmt|;
if|if
condition|(
name|rdnlevel
operator|==
literal|0
condition|)
operator|*
name|base_path
operator|=
literal|'\0'
expr_stmt|;
elseif|else
if|if
condition|(
name|rdn_number
operator|>
call|(
name|int
call|)
argument_list|(
name|rdnlevel
operator|+
literal|1
argument_list|)
condition|)
block|{
while|while
condition|(
name|rdnlevel
condition|)
block|{
while|while
condition|(
operator|*
name|end
operator|!=
literal|'@'
condition|)
name|end
operator|++
expr_stmt|;
if|if
condition|(
operator|*
name|end
operator|==
literal|'@'
condition|)
name|end
operator|++
expr_stmt|;
name|rdnlevel
operator|--
expr_stmt|;
block|}
operator|*
operator|--
name|end
operator|=
literal|'\0'
expr_stmt|;
block|}
name|goto_addr
argument_list|()
expr_stmt|;
name|set_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
if|if
condition|(
name|read_all_flag
operator|==
name|TRUE
condition|)
block|{
if|if
condition|(
name|curr_read_popup
operator|==
literal|0
condition|)
name|curr_read_popup
operator|=
name|createReadPopup
argument_list|()
expr_stmt|;
name|status
operator|=
name|read_config_types
argument_list|()
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|Okay
condition|)
name|doError
argument_list|(
name|status
argument_list|)
expr_stmt|;
else|else
block|{
name|displayReadPopup
argument_list|()
expr_stmt|;
block|}
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|Move
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|search_area
decl_stmt|;
name|char
modifier|*
name|new_base
decl_stmt|;
name|search_area
operator|=
name|XtNameToWidget
argument_list|(
name|outer
argument_list|,
literal|"PosForm.PosScrolledWindow.PosWindow"
argument_list|)
expr_stmt|;
name|new_base
operator|=
operator|(
name|char
operator|*
operator|)
name|closure
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|base_path
argument_list|,
name|new_base
argument_list|)
expr_stmt|;
name|make_friendly
argument_list|(
name|friendly_base_path
argument_list|,
name|new_base
argument_list|)
expr_stmt|;
name|set_search_area
argument_list|(
name|search_area
argument_list|)
expr_stmt|;
name|goto_addr
argument_list|()
expr_stmt|;
name|SetType
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|typeindx
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|CreateMessagePopup
parameter_list|()
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|standby
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"POD: Working."
argument_list|,
name|transientShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresize
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"standby"
argument_list|,
name|labelWidgetClass
argument_list|,
name|standby
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|standby
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|CreateErrorPopup
parameter_list|()
block|{
name|Widget
name|text
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|error_popup
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"POD:<Directory Error>"
argument_list|,
name|transientShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresize
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|text
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"error_popup"
argument_list|,
name|commandWidgetClass
argument_list|,
name|error_popup
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|text
argument_list|,
name|XtNcallback
argument_list|,
name|killError
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|error_popup
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|doError
parameter_list|(
name|status
parameter_list|)
name|dsEnqError
name|status
decl_stmt|;
block|{
switch|switch
condition|(
name|status
condition|)
block|{
case|case
name|timelimit
case|:
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Time limit reached.\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|adminlimit
case|:
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Administrative limit reached.\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|nothingfound
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Nothing found!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|localdsaerror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Problem with remote directory server.\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|remotedsaerror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Requested data unavailable at present.\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|duaerror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Internal error. Sorry!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|security
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"You do not have the access privileges required\nto make this request!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|namerror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Invalid directory position!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|attributerror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Faulty data found in database!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|serviceerror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Directory Service Error!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
case|case
name|updaterror
case|:
name|dnseq
operator|=
literal|0
expr_stmt|;
name|entry_number
operator|=
literal|0
expr_stmt|;
name|displayError
argument_list|(
literal|"Update Error!\nClick on this window to continue"
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_function

begin_function
name|void
name|displayError
parameter_list|(
name|mess
parameter_list|)
name|String
name|mess
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Widget
name|text
decl_stmt|;
name|text
operator|=
name|XtNameToWidget
argument_list|(
name|error_popup
argument_list|,
literal|"error_popup"
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|PopupMessage
argument_list|(
name|error_popup
argument_list|,
name|text
argument_list|,
name|mess
argument_list|,
name|XtGrabExclusive
argument_list|)
expr_stmt|;
name|XBell
argument_list|(
name|dpy
argument_list|,
literal|100
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|displayStartupError
parameter_list|(
name|mess
parameter_list|)
name|String
name|mess
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Widget
name|text
decl_stmt|;
name|text
operator|=
name|XtNameToWidget
argument_list|(
name|error_popup
argument_list|,
literal|"error_popup"
argument_list|)
expr_stmt|;
name|XtRemoveAllCallbacks
argument_list|(
name|text
argument_list|,
name|XtNcallback
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|text
argument_list|,
name|XtNcallback
argument_list|,
name|Quit
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|PopupMessage
argument_list|(
name|error_popup
argument_list|,
name|text
argument_list|,
name|mess
argument_list|,
name|XtGrabExclusive
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|killError
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|kill_error
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|kill_error
parameter_list|()
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Pixmap
name|pixmap_resource
decl_stmt|;
name|Widget
name|text
init|=
name|XtNameToWidget
argument_list|(
name|error_popup
argument_list|,
literal|"error_popup"
argument_list|)
decl_stmt|;
name|XtPopdown
argument_list|(
name|error_popup
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
operator|&
name|pixmap_resource
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
name|XtUnspecifiedPixmap
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|pixmap_resource
operator|!=
name|XtUnspecifiedPixmap
condition|)
name|XFreePixmap
argument_list|(
name|dpy
argument_list|,
name|pixmap_resource
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|message
parameter_list|(
name|mess
parameter_list|)
name|char
modifier|*
name|mess
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Widget
name|text
decl_stmt|;
name|XEvent
name|event
decl_stmt|;
name|text
operator|=
name|XtNameToWidget
argument_list|(
name|standby
argument_list|,
literal|"standby"
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|PopupMessage
argument_list|(
name|standby
argument_list|,
name|text
argument_list|,
name|mess
argument_list|,
name|XtGrabNonexclusive
argument_list|)
expr_stmt|;
while|while
condition|(
operator|!
name|XCheckTypedWindowEvent
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|text
argument_list|)
argument_list|,
name|Expose
argument_list|,
operator|&
name|event
argument_list|)
condition|)
empty_stmt|;
name|XtDispatchEvent
argument_list|(
operator|&
name|event
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|kill_message
parameter_list|()
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Pixmap
name|pixmap_resource
decl_stmt|;
name|Widget
name|text
init|=
name|XtNameToWidget
argument_list|(
name|standby
argument_list|,
literal|"standby"
argument_list|)
decl_stmt|;
name|XtPopdown
argument_list|(
name|standby
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
operator|&
name|pixmap_resource
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
name|XtUnspecifiedPixmap
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|pixmap_resource
operator|!=
name|XtUnspecifiedPixmap
condition|)
name|XFreePixmap
argument_list|(
name|dpy
argument_list|,
name|pixmap_resource
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|CreateHelpPopup
parameter_list|()
block|{
name|Widget
name|popup_help
decl_stmt|,
name|popup_help_button
decl_stmt|,
name|popup_quit_button
decl_stmt|,
name|popup_help_form
decl_stmt|,
name|popup_help_scrolwin
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|popup_help
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"Pod Help Screen"
argument_list|,
name|topLevelShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|popup_help_form
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"popup_help_form"
argument_list|,
name|formWidgetClass
argument_list|,
name|popup_help
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Close_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|popup_quit_button
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"popup_help_quit"
argument_list|,
name|commandWidgetClass
argument_list|,
name|popup_help_form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|popup_quit_button
argument_list|,
name|XtNcallback
argument_list|,
name|QuitFromHelp
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|About_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|About_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|popup_help_button
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"popup_help_general"
argument_list|,
name|commandWidgetClass
argument_list|,
name|popup_help_form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|popup_help_button
argument_list|,
name|XtNcallback
argument_list|,
name|InsertHelp
argument_list|,
operator|(
name|XtPointer
operator|)
literal|"general"
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|popup_help_scrolwin
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"popup_help_scrolwin"
argument_list|,
name|viewportWidgetClass
argument_list|,
name|popup_help_form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"popup_help_text"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|popup_help_scrolwin
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|popup_help
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|popup_help_button
argument_list|,
name|About_bits
argument_list|,
name|About_width
argument_list|,
name|About_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|popup_quit_button
argument_list|,
name|Close_bits
argument_list|,
name|Close_width
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
if|if
condition|(
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
operator|==
literal|1
condition|)
block|{
name|CreateBackgroundPixmap
argument_list|(
name|popup_help_form
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|Help
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|help_popup
decl_stmt|;
name|help_popup
operator|=
name|XtNameToWidget
argument_list|(
name|toplevel
argument_list|,
literal|"Pod Help Screen"
argument_list|)
expr_stmt|;
name|XtPopup
argument_list|(
name|help_popup
argument_list|,
name|XtGrabNone
argument_list|)
expr_stmt|;
name|InsertHelp
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
literal|"help"
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|help_up
operator|=
name|TRUE
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|QuitFromHelp
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|help_popup
decl_stmt|;
name|help_up
operator|=
name|FALSE
expr_stmt|;
name|help_popup
operator|=
name|XtNameToWidget
argument_list|(
name|toplevel
argument_list|,
literal|"Pod Help Screen"
argument_list|)
expr_stmt|;
name|XtPopdown
argument_list|(
name|help_popup
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|InsertHelp
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|text
decl_stmt|,
name|scrolwin
decl_stmt|;
name|FILE
modifier|*
name|file
decl_stmt|;
name|char
name|filename
index|[
name|STRINGLEN
index|]
decl_stmt|,
name|help_buf
index|[
name|RESBUF
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Dimension
name|width
decl_stmt|,
name|height
decl_stmt|;
name|XFontStruct
modifier|*
name|font
decl_stmt|;
name|scrolwin
operator|=
name|XtNameToWidget
argument_list|(
name|toplevel
argument_list|,
literal|"Pod Help Screen.popup_help_form.popup_help_scrolwin"
argument_list|)
expr_stmt|;
name|text
operator|=
name|XtNameToWidget
argument_list|(
name|scrolwin
argument_list|,
literal|"popup_help_text"
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|&
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|scrolwin
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|filename
argument_list|,
name|dua_help_dir
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|filename
argument_list|,
operator|(
name|String
operator|)
name|closure
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|height
operator|=
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|height
operator|=
literal|0
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|file
operator|=
name|fopen
argument_list|(
name|filename
argument_list|,
literal|"r"
argument_list|)
operator|)
condition|)
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|filename
argument_list|,
literal|"./Xd/podHelpdir/"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|filename
argument_list|,
operator|(
name|String
operator|)
name|closure
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|file
operator|=
name|fopen
argument_list|(
name|filename
argument_list|,
literal|"r"
argument_list|)
operator|)
condition|)
operator|(
name|void
operator|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Helpfile not found\n"
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|file
condition|)
block|{
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|help_buf
argument_list|,
literal|"\0"
argument_list|)
expr_stmt|;
while|while
condition|(
name|fgets
argument_list|(
name|help_string
argument_list|,
name|STRINGLEN
operator|-
literal|1
argument_list|,
name|file
argument_list|)
condition|)
block|{
name|height
operator|+=
operator|(
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
operator|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|help_buf
argument_list|,
name|help_string
argument_list|)
expr_stmt|;
block|}
operator|(
name|void
operator|)
name|fclose
argument_list|(
name|file
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|width
operator|-
literal|18
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
name|help_buf
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|text
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|CreateBackgroundPixmap
parameter_list|(
name|widget
parameter_list|,
name|bits
parameter_list|,
name|width
parameter_list|,
name|height
parameter_list|)
name|Widget
name|widget
decl_stmt|;
name|char
name|bits
index|[]
decl_stmt|;
name|Cardinal
name|width
decl_stmt|,
name|height
decl_stmt|;
block|{
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Pixmap
name|bitmap
decl_stmt|;
name|bitmap
operator|=
name|XCreatePixmapFromBitmapData
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|widget
argument_list|)
argument_list|,
name|bits
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|BlackPixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|,
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
name|bitmap
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|widget
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ListDestroy
parameter_list|(
name|w
parameter_list|,
name|list_seq
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|calldata
decl_stmt|,
name|list_seq
decl_stmt|;
block|{
name|free_seq
argument_list|(
operator|(
name|str_seq
operator|)
name|list_seq
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|destroyList
parameter_list|(
name|w
parameter_list|,
name|shellwidget
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|shellwidget
decl_stmt|,
name|calldata
decl_stmt|;
block|{
if|if
condition|(
name|curr_list_popup
operator|==
operator|(
name|Widget
operator|)
name|shellwidget
condition|)
name|curr_list_popup
operator|=
literal|0
expr_stmt|;
name|XtPopdown
argument_list|(
operator|(
name|Widget
operator|)
name|shellwidget
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
operator|(
name|Widget
operator|)
name|shellwidget
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
operator|(
name|Widget
operator|)
name|shellwidget
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|keepList
parameter_list|(
name|w
parameter_list|,
name|shellwidget
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|calldata
decl_stmt|,
name|shellwidget
decl_stmt|;
block|{
if|if
condition|(
name|curr_list_popup
operator|==
operator|(
name|Widget
operator|)
name|shellwidget
condition|)
name|curr_list_popup
operator|=
literal|0
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|CreateHistoryPopup
parameter_list|(
name|list_seq
parameter_list|,
name|mess
parameter_list|)
name|str_seq
name|list_seq
decl_stmt|;
name|char
modifier|*
name|mess
decl_stmt|;
block|{
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Widget
name|shell
decl_stmt|,
name|swindow
decl_stmt|,
name|HistoryForm
decl_stmt|,
name|ListWindow
decl_stmt|,
name|closeButton
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|shell
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"Session History"
argument_list|,
name|topLevelShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|HistoryForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"HistoryForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|shell
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Close_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|closeButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"closeButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|HistoryForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|closeButton
argument_list|,
name|XtNcallback
argument_list|,
operator|(
name|XtCallbackProc
operator|)
name|popdownHistory
argument_list|,
operator|(
name|XtPointer
operator|)
name|shell
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"History Window"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"HistoryTitle"
argument_list|,
name|labelWidgetClass
argument_list|,
name|HistoryForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|swindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ListScrolledWindow"
argument_list|,
name|viewportWidgetClass
argument_list|,
name|HistoryForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|ListWindow
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ListWindow"
argument_list|,
name|formWidgetClass
argument_list|,
name|swindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|mess
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"ListMessage"
argument_list|,
name|labelWidgetClass
argument_list|,
name|HistoryForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|ListWindow
argument_list|,
name|XtNdestroyCallback
argument_list|,
name|ListDestroy
argument_list|,
operator|(
name|XtPointer
operator|)
name|list_seq
argument_list|)
expr_stmt|;
name|AddNewList
argument_list|(
name|ListWindow
argument_list|,
name|list_seq
argument_list|,
operator|(
name|unsigned
operator|)
name|entry_number
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|shell
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|closeButton
argument_list|,
name|Close_bits
argument_list|,
name|Close_width
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
if|if
condition|(
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
operator|==
literal|1
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|HistoryForm
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|popupHistory
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|history_popup
decl_stmt|;
name|history_popup
operator|=
name|XtNameToWidget
argument_list|(
name|toplevel
argument_list|,
literal|"Session History"
argument_list|)
expr_stmt|;
name|XtPopup
argument_list|(
name|history_popup
argument_list|,
name|XtGrabNone
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|popdownHistory
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|history_popup
decl_stmt|;
name|history_popup
operator|=
name|XtNameToWidget
argument_list|(
name|toplevel
argument_list|,
literal|"Session History"
argument_list|)
expr_stmt|;
name|XtPopdown
argument_list|(
name|history_popup
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|ChangeHelp
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
if|if
condition|(
operator|(
name|help_up
operator|)
operator|&&
name|strcmp
argument_list|(
name|params
index|[
literal|0
index|]
argument_list|,
name|curr_help
argument_list|)
condition|)
block|{
name|InsertHelp
argument_list|(
operator|(
name|Widget
operator|)
literal|0
argument_list|,
operator|(
name|XtPointer
operator|)
name|params
index|[
literal|0
index|]
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|curr_help
argument_list|,
name|params
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|buttonPress
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
name|char
modifier|*
name|buttonName
init|=
name|params
index|[
literal|0
index|]
decl_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"search"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|SearchPress_bits
argument_list|,
name|SearchPress_width
argument_list|,
name|SearchPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"help"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|HelpPress_bits
argument_list|,
name|HelpPress_width
argument_list|,
name|HelpPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"quit"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|QuitPress_bits
argument_list|,
name|QuitPress_width
argument_list|,
name|QuitPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"list"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|ListPress_bits
argument_list|,
name|ListPress_width
argument_list|,
name|ListPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"history"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|HistoryPress_bits
argument_list|,
name|HistoryPress_width
argument_list|,
name|HistoryPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"close"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|ClosePress_bits
argument_list|,
name|ClosePress_width
argument_list|,
name|ClosePress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"about"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|AboutPress_bits
argument_list|,
name|AboutPress_width
argument_list|,
name|AboutPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"keep"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|KeepPress_bits
argument_list|,
name|KeepPress_width
argument_list|,
name|KeepPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"modify"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|ModifyPress_bits
argument_list|,
name|ModifyPress_width
argument_list|,
name|ModifyPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"show_all"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|ShowAllPress_bits
argument_list|,
name|ShowAllPress_width
argument_list|,
name|ShowAllPress_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"submit_modify"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|ModifyPress_bits
argument_list|,
name|ModifyPress_width
argument_list|,
name|ModifyPress_height
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|XtCallCallbacks
argument_list|(
name|w
argument_list|,
name|XtNcallback
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"search"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Search_bits
argument_list|,
name|Search_width
argument_list|,
name|Search_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"help"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Help_bits
argument_list|,
name|Help_width
argument_list|,
name|Help_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"quit"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Quit_bits
argument_list|,
name|Quit_width
argument_list|,
name|Quit_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"list"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|List_bits
argument_list|,
name|List_width
argument_list|,
name|List_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"history"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|History_bits
argument_list|,
name|History_width
argument_list|,
name|History_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"close"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Close_bits
argument_list|,
name|Close_width
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"about"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|About_bits
argument_list|,
name|About_width
argument_list|,
name|About_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"keep"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Kept_bits
argument_list|,
name|Kept_width
argument_list|,
name|Kept_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"modify"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Modify_bits
argument_list|,
name|Modify_width
argument_list|,
name|Modify_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"show_all"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|ShowAll_bits
argument_list|,
name|ShowAll_width
argument_list|,
name|ShowAll_height
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|buttonName
argument_list|,
literal|"submit_modify"
argument_list|)
condition|)
name|CreateBackgroundPixmap
argument_list|(
name|w
argument_list|,
name|Modify_bits
argument_list|,
name|Modify_width
argument_list|,
name|Modify_height
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|readDestroy
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|readForm
init|=
name|XtNameToWidget
argument_list|(
operator|(
name|Widget
operator|)
name|closure
argument_list|,
literal|"ReadForm"
argument_list|)
decl_stmt|;
name|PhotoWindow
operator|=
name|XtNameToWidget
argument_list|(
name|readForm
argument_list|,
literal|"TextScrolledWindow.TextForm.PhotoWindow"
argument_list|)
expr_stmt|;
if|if
condition|(
name|PhotoWindow
operator|!=
operator|(
name|Widget
operator|)
literal|0
condition|)
name|kill_photo
argument_list|()
expr_stmt|;
if|if
condition|(
name|curr_read_popup
operator|==
operator|(
name|Widget
operator|)
name|closure
condition|)
block|{
name|XtPopdown
argument_list|(
name|curr_read_popup
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|curr_read_popup
operator|==
operator|(
name|Widget
operator|)
literal|0
condition|)
block|{
name|Widget
name|keepButton
init|=
name|XtNameToWidget
argument_list|(
operator|(
name|Widget
operator|)
name|closure
argument_list|,
literal|"ReadForm.ReadButtonForm.keepButton"
argument_list|)
decl_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|keepButton
argument_list|,
name|Keep_bits
argument_list|,
name|Keep_width
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
name|XtPopdown
argument_list|(
operator|(
name|Widget
operator|)
name|closure
argument_list|)
expr_stmt|;
name|curr_read_popup
operator|=
operator|(
name|Widget
operator|)
name|closure
expr_stmt|;
return|return;
block|}
name|XtPopdown
argument_list|(
operator|(
name|Widget
operator|)
name|closure
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|readForm
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|readForm
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
operator|(
name|Widget
operator|)
name|closure
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
operator|(
name|Widget
operator|)
name|closure
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|keepRead
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
if|if
condition|(
name|curr_read_popup
operator|==
operator|(
name|Widget
operator|)
name|closure
condition|)
block|{
name|PhotoWindow
operator|=
literal|0
expr_stmt|;
name|curr_read_popup
operator|=
literal|0
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|modifyEntry
parameter_list|(
name|w
parameter_list|,
name|object
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|object
decl_stmt|,
name|calldata
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|curr_modify_popup
condition|)
name|curr_modify_popup
operator|=
name|createModifyPopup
argument_list|(
operator|(
name|char
operator|*
operator|)
name|object
argument_list|)
expr_stmt|;
else|else
block|{
name|Widget
name|modify_form
init|=
name|XtNameToWidget
argument_list|(
name|curr_modify_popup
argument_list|,
literal|"modifyForm"
argument_list|)
decl_stmt|;
name|XawFormDoLayout
argument_list|(
name|modify_form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|createModifyTemplate
argument_list|(
name|curr_modify_popup
argument_list|,
operator|(
name|char
operator|*
operator|)
name|object
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|modify_form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|XtPopup
argument_list|(
name|curr_modify_popup
argument_list|,
name|XtGrabNone
argument_list|)
expr_stmt|;
name|XRaiseWindow
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|curr_modify_popup
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|closeModify
parameter_list|(
name|w
parameter_list|,
name|clientdata
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|clientdata
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|modifyPopup
init|=
operator|(
name|Widget
operator|)
name|clientdata
decl_stmt|;
name|Widget
name|modifyForm
init|=
name|XtNameToWidget
argument_list|(
name|modifyPopup
argument_list|,
literal|"modifyForm"
argument_list|)
decl_stmt|;
name|Widget
name|modifyButtonForm
init|=
name|XtNameToWidget
argument_list|(
name|modifyForm
argument_list|,
literal|"ModifyButtonForm"
argument_list|)
decl_stmt|;
name|Widget
name|modifyScrolledWindow
init|=
name|XtNameToWidget
argument_list|(
name|modifyForm
argument_list|,
literal|"modifyScrolledWindow"
argument_list|)
decl_stmt|;
name|Widget
name|modMessage
init|=
name|XtNameToWidget
argument_list|(
name|modifyForm
argument_list|,
literal|"modMessage"
argument_list|)
decl_stmt|;
name|XtPopdown
argument_list|(
name|modifyPopup
argument_list|)
expr_stmt|;
if|if
condition|(
name|modifyPopup
operator|==
name|curr_modify_popup
condition|)
return|return;
if|if
condition|(
name|curr_read_popup
operator|==
operator|(
name|Widget
operator|)
literal|0
condition|)
block|{
name|Widget
name|keepButton
init|=
name|XtNameToWidget
argument_list|(
name|modifyButtonForm
argument_list|,
literal|"keepButton"
argument_list|)
decl_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|keepButton
argument_list|,
name|Keep_bits
argument_list|,
name|Keep_width
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
return|return;
block|}
name|XtUnmanageChild
argument_list|(
name|modifyButtonForm
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|modifyButtonForm
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|modifyScrolledWindow
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|modifyScrolledWindow
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|modMessage
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|modMessage
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|modifyForm
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|modifyForm
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|modifyPopup
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|modifyPopup
argument_list|)
expr_stmt|;
if|if
condition|(
name|modifyPopup
operator|==
name|curr_modify_popup
condition|)
name|curr_modify_popup
operator|=
operator|(
name|Widget
operator|)
literal|0
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|keepModify
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
if|if
condition|(
name|curr_modify_popup
operator|==
operator|(
name|Widget
operator|)
name|closure
condition|)
block|{
name|curr_modify_popup
operator|=
literal|0
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|modUpdate
parameter_list|(
name|w
parameter_list|,
name|attrValue
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|attrValue
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Widget
name|form
init|=
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|modVals
name|val
init|=
operator|(
name|modVals
operator|)
name|attrValue
decl_stmt|;
name|val
operator|->
name|mod_flag
operator|=
name|TRUE
expr_stmt|;
name|val
operator|->
name|attr
operator|->
name|mod_flag
operator|=
name|TRUE
expr_stmt|;
name|displayModMessage
argument_list|(
name|form
argument_list|,
literal|""
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|submitModif
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|dirEntry
name|mods
init|=
operator|(
name|dirEntry
operator|)
name|closure
decl_stmt|;
name|dirAttrs
name|attrs
decl_stmt|;
name|modVals
name|vals
decl_stmt|;
name|int
name|curr_mod_num
init|=
literal|0
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|char
modifier|*
name|string
decl_stmt|;
name|dsErrorStruct
name|mod_error
decl_stmt|;
for|for
control|(
name|attrs
operator|=
name|mods
operator|->
name|attrs
init|;
name|attrs
condition|;
name|attrs
operator|=
name|attrs
operator|->
name|next
control|)
if|if
condition|(
name|attrs
operator|->
name|mod_flag
condition|)
block|{
for|for
control|(
name|vals
operator|=
name|attrs
operator|->
name|val_seq
init|;
name|vals
condition|;
name|vals
operator|=
name|vals
operator|->
name|next
control|)
if|if
condition|(
name|vals
operator|->
name|mod_flag
condition|)
block|{
if|if
condition|(
name|vals
operator|->
name|text_widg
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
operator|&
name|string
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|vals
operator|->
name|text_widg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|*
name|string
operator|==
literal|'\0'
operator|&&
operator|(
operator|!
name|vals
operator|->
name|value
operator|||
operator|*
name|vals
operator|->
name|value
operator|==
literal|'\0'
operator|)
operator|)
condition|)
block|{
name|vals
operator|->
name|new_value
operator|=
operator|(
operator|*
name|string
operator|==
literal|'\0'
condition|?
name|NULLCP
else|:
name|strdup
argument_list|(
name|string
argument_list|)
operator|)
expr_stmt|;
name|curr_mod_num
operator|++
expr_stmt|;
block|}
else|else
block|{
name|vals
operator|->
name|mod_flag
operator|=
name|FALSE
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|vals
operator|->
name|value
operator|&&
operator|*
name|vals
operator|->
name|value
operator|!=
literal|'\0'
condition|)
block|{
name|vals
operator|->
name|new_value
operator|=
literal|0
expr_stmt|;
name|curr_mod_num
operator|++
expr_stmt|;
block|}
else|else
block|{
name|vals
operator|->
name|mod_flag
operator|=
name|FALSE
expr_stmt|;
block|}
block|}
block|}
if|if
condition|(
name|curr_mod_num
operator|==
literal|0
condition|)
name|attrs
operator|->
name|mod_flag
operator|=
literal|0
expr_stmt|;
name|curr_mod_num
operator|=
literal|0
expr_stmt|;
block|}
name|mod_error
operator|=
name|modify_entry
argument_list|(
name|mods
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|mod_error
operator|.
name|error
condition|)
block|{
case|case
name|Okay
case|:
name|displayModMessage
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|,
literal|"Modifications made"
argument_list|)
expr_stmt|;
break|break;
default|default:
name|displayModMessage
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|,
name|mod_error
operator|.
name|err_mess
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|mod_error
operator|.
name|err_mess
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
name|displayModMessage
parameter_list|(
name|form
parameter_list|,
name|err_mess
parameter_list|)
name|Widget
name|form
decl_stmt|;
name|char
modifier|*
name|err_mess
decl_stmt|;
block|{
name|Widget
name|messageWidg
init|=
name|XtNameToWidget
argument_list|(
name|form
argument_list|,
literal|"modMessage"
argument_list|)
decl_stmt|;
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
operator|(
name|err_mess
condition|?
name|err_mess
else|:
literal|""
operator|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|messageWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
end_function

begin_decl_stmt
name|XtCallbackRec
name|modCallbacks
index|[]
init|=
block|{
block|{
name|modUpdate
block|,
operator|(
name|XtPointer
operator|)
name|NULL
block|}
block|,
block|{
operator|(
name|XtCallbackProc
operator|)
name|NULL
block|,
operator|(
name|XtPointer
operator|)
name|NULL
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|deleteVal
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|modVals
name|this_val
init|=
operator|(
name|modVals
operator|)
name|closure
decl_stmt|,
name|curr_val
decl_stmt|;
name|dirAttrs
name|this_attr
init|=
operator|(
name|dirAttrs
operator|)
name|this_val
operator|->
name|attr
decl_stmt|,
name|curr_attr
decl_stmt|;
name|Widget
name|valWidg
decl_stmt|,
name|menuWidg
decl_stmt|,
name|nextValWidg
decl_stmt|,
name|nextValMenuWidg
decl_stmt|,
name|nextAttrWidg
init|=
literal|0
decl_stmt|,
name|fromVertWidg
decl_stmt|,
name|form
decl_stmt|;
name|int
name|count
decl_stmt|,
name|vertDistance
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|valWidg
operator|=
name|this_val
operator|->
name|text_widg
expr_stmt|;
if|if
condition|(
operator|!
name|valWidg
condition|)
return|return;
name|form
operator|=
name|XtParent
argument_list|(
name|valWidg
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
operator|&
name|fromVertWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|menuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|valWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|curr_val
operator|=
name|this_attr
operator|->
name|val_seq
expr_stmt|;
while|while
condition|(
name|curr_val
operator|&&
name|curr_val
operator|!=
name|this_val
operator|&&
operator|!
operator|(
name|curr_val
operator|->
name|text_widg
operator|)
condition|)
name|curr_val
operator|=
name|curr_val
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|curr_val
operator|==
name|this_val
condition|)
name|vertDistance
operator|=
literal|10
expr_stmt|;
else|else
name|vertDistance
operator|=
literal|2
expr_stmt|;
name|curr_val
operator|=
name|this_val
operator|->
name|next
expr_stmt|;
while|while
condition|(
name|curr_val
operator|&&
operator|!
operator|(
name|nextValWidg
operator|=
name|curr_val
operator|->
name|text_widg
operator|)
condition|)
name|curr_val
operator|=
name|curr_val
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|curr_val
operator|&&
name|nextValWidg
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|nextValMenuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|this_val
operator|->
name|text_widg
operator|=
literal|0
expr_stmt|;
name|nextAttrWidg
operator|=
literal|0
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|valWidg
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|valWidg
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|menuWidg
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|menuWidg
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|curr_attr
operator|=
name|this_attr
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|curr_attr
condition|)
block|{
name|vertDistance
operator|=
literal|10
expr_stmt|;
name|curr_val
operator|=
name|curr_attr
operator|->
name|val_seq
expr_stmt|;
while|while
condition|(
operator|!
operator|(
name|nextValWidg
operator|=
name|curr_val
operator|->
name|text_widg
operator|)
condition|)
name|curr_val
operator|=
name|curr_val
operator|->
name|next
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|nextValMenuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|nextAttrWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
else|else
name|nextValWidg
operator|=
name|nextValMenuWidg
operator|=
name|nextAttrWidg
operator|=
literal|0
expr_stmt|;
name|curr_val
operator|=
name|this_attr
operator|->
name|val_seq
expr_stmt|;
while|while
condition|(
name|curr_val
operator|&&
operator|!
name|curr_val
operator|->
name|text_widg
condition|)
name|curr_val
operator|=
name|curr_val
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|this_val
operator|==
name|curr_val
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|valWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|nextValWidg
operator|=
name|nextValMenuWidg
operator|=
name|nextAttrWidg
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|this_val
operator|->
name|text_widg
operator|=
literal|0
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|valWidg
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|valWidg
argument_list|)
expr_stmt|;
name|XtUnmanageChild
argument_list|(
name|menuWidg
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|menuWidg
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|nextValWidg
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|fromVertWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|nextValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtSetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|nextAttrWidg
condition|)
name|XtSetValues
argument_list|(
name|nextAttrWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
name|this_val
operator|->
name|mod_flag
operator|=
name|TRUE
expr_stmt|;
name|this_attr
operator|->
name|mod_flag
operator|=
name|TRUE
expr_stmt|;
if|if
condition|(
name|this_val
operator|->
name|new_value
condition|)
block|{
name|free
argument_list|(
name|this_val
operator|->
name|new_value
argument_list|)
expr_stmt|;
name|this_val
operator|->
name|new_value
operator|=
literal|0
expr_stmt|;
block|}
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|addValField
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|dirAttrs
name|attr
init|=
operator|(
name|dirAttrs
operator|)
name|closure
decl_stmt|;
name|modVals
name|first_val
init|=
name|attr
operator|->
name|val_seq
decl_stmt|,
name|new_val
decl_stmt|;
name|Widget
name|newValWidg
decl_stmt|,
name|firstValWidg
init|=
name|first_val
operator|->
name|text_widg
decl_stmt|,
name|fromVertWidg
decl_stmt|,
name|form
decl_stmt|,
name|modValButton
decl_stmt|,
name|modValMenu
decl_stmt|,
name|modValMenuButton
decl_stmt|,
name|firstValButton
decl_stmt|;
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|XFontStruct
modifier|*
name|font
init|=
literal|0
decl_stmt|;
name|Dimension
name|height
decl_stmt|;
name|new_val
operator|=
operator|(
name|modVals
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
expr|struct
name|mod_vals
argument_list|)
argument_list|)
expr_stmt|;
name|new_val
operator|->
name|next
operator|=
name|first_val
expr_stmt|;
name|new_val
operator|->
name|mod_flag
operator|=
name|FALSE
expr_stmt|;
name|new_val
operator|->
name|new_value
operator|=
literal|0
expr_stmt|;
name|new_val
operator|->
name|value
operator|=
literal|0
expr_stmt|;
name|new_val
operator|->
name|attr
operator|=
name|attr
expr_stmt|;
name|attr
operator|->
name|val_seq
operator|=
name|new_val
expr_stmt|;
name|form
operator|=
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
while|while
condition|(
name|first_val
operator|&&
operator|!
operator|(
name|firstValWidg
operator|=
name|first_val
operator|->
name|text_widg
operator|)
condition|)
name|first_val
operator|=
name|first_val
operator|->
name|next
expr_stmt|;
name|firstValWidg
operator|=
name|first_val
operator|->
name|text_widg
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
operator|&
name|fromVertWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|firstValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|fromVertWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|menuicon_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValButton
operator|=
name|XtCreateWidget
argument_list|(
literal|"modValMenu"
argument_list|,
name|menuButtonWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|modValMenu
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"menu"
argument_list|,
name|simpleMenuWidgetClass
argument_list|,
name|modValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Delete this value"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"delValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modValMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modValMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|deleteVal
argument_list|,
operator|(
name|XtPointer
operator|)
name|new_val
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Undo changes to this value"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"undoValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modValMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modValMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|UndoValChanges
argument_list|,
operator|(
name|XtPointer
operator|)
name|new_val
argument_list|)
expr_stmt|;
name|height
operator|=
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
operator|+
name|font
operator|->
name|ascent
expr_stmt|;
name|modCallbacks
index|[
literal|0
index|]
operator|.
name|closure
operator|=
operator|(
name|XtPointer
operator|)
name|new_val
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNeditType
argument_list|,
name|XawtextEdit
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresize
argument_list|,
name|XawtextResizeBoth
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNcallback
argument_list|,
name|modCallbacks
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|fromVertWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|newValWidg
operator|=
name|XtCreateWidget
argument_list|(
literal|"valText"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|form
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|new_val
operator|->
name|text_widg
operator|=
name|newValWidg
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|firstValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|firstValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|newValWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|firstValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtSetValues
argument_list|(
name|firstValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|modValButton
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|newValWidg
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|modValButton
argument_list|,
name|menuicon_bits
argument_list|,
name|menuicon_width
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|UndoAttrChanges
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|dirAttrs
name|this_attr
init|=
operator|(
name|dirAttrs
operator|)
name|closure
decl_stmt|;
name|modVals
name|this_val
init|=
name|this_attr
operator|->
name|val_seq
decl_stmt|;
name|Widget
name|form
init|=
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
name|this_attr
operator|->
name|mod_flag
operator|=
name|FALSE
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
while|while
condition|(
name|this_val
condition|)
block|{
name|UndoValChanges
argument_list|(
name|w
argument_list|,
operator|(
name|XtPointer
operator|)
name|this_val
argument_list|,
operator|(
name|XtPointer
operator|)
name|w
argument_list|)
expr_stmt|;
name|this_val
operator|=
name|this_val
operator|->
name|next
expr_stmt|;
block|}
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|UndoValChanges
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Widget
name|thisValWidg
decl_stmt|,
name|thisValMenuWidg
decl_stmt|,
name|thisAttrWidg
decl_stmt|,
name|prevValWidg
decl_stmt|,
name|prevValMenuWidg
decl_stmt|,
name|nextValWidg
decl_stmt|,
name|nextValMenuWidg
decl_stmt|,
name|nextAttrWidg
decl_stmt|,
name|modValMenu
decl_stmt|,
name|modValMenuButton
decl_stmt|,
name|form
decl_stmt|;
name|int
name|vertDistance
decl_stmt|;
name|modVals
name|this_val
init|=
operator|(
name|modVals
operator|)
name|closure
decl_stmt|,
name|next_val
decl_stmt|,
name|prev_val
decl_stmt|;
name|dirAttrs
name|this_attr
init|=
name|this_val
operator|->
name|attr
decl_stmt|,
name|next_attr
decl_stmt|;
if|if
condition|(
operator|!
name|this_val
operator|->
name|mod_flag
operator|&&
name|this_val
operator|->
name|value
condition|)
return|return;
if|if
condition|(
name|w
operator|!=
operator|(
name|Widget
operator|)
name|calldata
condition|)
block|{
name|form
operator|=
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|XtParent
argument_list|(
name|w
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
block|}
name|this_val
operator|->
name|mod_flag
operator|=
name|FALSE
expr_stmt|;
name|thisValWidg
operator|=
name|this_val
operator|->
name|text_widg
expr_stmt|;
if|if
condition|(
name|this_val
operator|->
name|new_value
condition|)
block|{
name|free
argument_list|(
name|this_val
operator|->
name|new_value
argument_list|)
expr_stmt|;
name|this_val
operator|->
name|new_value
operator|=
name|NULLCP
expr_stmt|;
block|}
if|if
condition|(
name|this_val
operator|->
name|value
operator|&&
operator|*
name|this_val
operator|->
name|value
operator|!=
literal|'\0'
condition|)
block|{
if|if
condition|(
operator|!
name|thisValWidg
condition|)
block|{
name|prevValWidg
operator|=
literal|0
expr_stmt|;
name|prev_val
operator|=
name|this_attr
operator|->
name|val_seq
expr_stmt|;
while|while
condition|(
name|prev_val
operator|&&
name|prev_val
operator|!=
name|this_val
condition|)
block|{
if|if
condition|(
name|prev_val
operator|->
name|text_widg
condition|)
name|prevValWidg
operator|=
name|prev_val
operator|->
name|text_widg
expr_stmt|;
name|prev_val
operator|=
name|prev_val
operator|->
name|next
expr_stmt|;
block|}
name|nextValWidg
operator|=
literal|0
expr_stmt|;
if|if
condition|(
operator|!
name|prevValWidg
condition|)
block|{
name|next_val
operator|=
name|this_val
operator|->
name|next
expr_stmt|;
while|while
condition|(
name|next_val
operator|&&
operator|!
operator|(
name|next_val
operator|->
name|text_widg
operator|)
condition|)
name|next_val
operator|=
name|next_val
operator|->
name|next
expr_stmt|;
if|if
condition|(
operator|!
name|next_val
condition|)
block|{
if|if
condition|(
name|w
operator|!=
operator|(
name|Widget
operator|)
name|calldata
condition|)
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
return|return;
block|}
name|nextValWidg
operator|=
name|next_val
operator|->
name|text_widg
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
operator|&
name|prevValWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|prevValMenuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|thisAttrWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|prevValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|vertDistance
operator|=
literal|10
expr_stmt|;
block|}
else|else
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|prevValMenuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|prevValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|thisAttrWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|prevValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|vertDistance
operator|=
literal|2
expr_stmt|;
block|}
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
name|thisAttrWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|prevValWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|menuicon_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|thisValMenuWidg
operator|=
name|XtCreateWidget
argument_list|(
literal|"modValMenu"
argument_list|,
name|menuButtonWidgetClass
argument_list|,
name|XtParent
argument_list|(
name|thisAttrWidg
argument_list|)
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|modValMenu
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"menu"
argument_list|,
name|simpleMenuWidgetClass
argument_list|,
name|thisValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Delete this value"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"delValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modValMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modValMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|deleteVal
argument_list|,
operator|(
name|XtPointer
operator|)
name|this_val
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Undo changes to this value"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"undoValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modValMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modValMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|UndoValChanges
argument_list|,
operator|(
name|XtPointer
operator|)
name|this_val
argument_list|)
expr_stmt|;
name|modCallbacks
index|[
literal|0
index|]
operator|.
name|closure
operator|=
operator|(
name|XtPointer
operator|)
name|this_val
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|GetTextWidth
argument_list|(
name|prevValWidg
argument_list|,
name|this_val
operator|->
name|value
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|GetTextHeight
argument_list|(
name|prevValWidg
argument_list|,
name|this_val
operator|->
name|value
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|prevValWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
name|thisValMenuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
name|this_val
operator|->
name|value
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNeditType
argument_list|,
name|XawtextEdit
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresize
argument_list|,
name|XawtextResizeBoth
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNcallback
argument_list|,
name|modCallbacks
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|thisValWidg
operator|=
name|XtCreateWidget
argument_list|(
literal|"valText"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|XtParent
argument_list|(
name|thisAttrWidg
argument_list|)
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|this_val
operator|->
name|text_widg
operator|=
name|thisValWidg
expr_stmt|;
name|next_attr
operator|=
literal|0
expr_stmt|;
name|next_val
operator|=
name|this_val
operator|->
name|next
expr_stmt|;
while|while
condition|(
name|next_val
operator|&&
operator|!
operator|(
name|next_val
operator|->
name|text_widg
operator|)
condition|)
name|next_val
operator|=
name|next_val
operator|->
name|next
expr_stmt|;
if|if
condition|(
name|next_val
condition|)
name|nextValWidg
operator|=
name|next_val
operator|->
name|text_widg
expr_stmt|;
else|else
block|{
name|next_attr
operator|=
name|this_attr
operator|->
name|next
expr_stmt|;
if|if
condition|(
operator|!
name|next_attr
condition|)
name|nextValWidg
operator|=
literal|0
expr_stmt|;
else|else
block|{
name|next_val
operator|=
name|next_attr
operator|->
name|val_seq
expr_stmt|;
while|while
condition|(
operator|!
operator|(
name|next_val
operator|->
name|text_widg
operator|)
condition|)
name|next_val
operator|=
name|next_val
operator|->
name|next
expr_stmt|;
name|nextValWidg
operator|=
name|next_val
operator|->
name|text_widg
expr_stmt|;
block|}
block|}
if|if
condition|(
name|nextValWidg
condition|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|nextValMenuWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|next_attr
condition|)
block|{
name|vertDistance
operator|=
literal|10
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|nextAttrWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|nextValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|vertDistance
operator|=
literal|2
expr_stmt|;
name|nextAttrWidg
operator|=
literal|0
expr_stmt|;
block|}
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|thisValWidg
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|nextValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtSetValues
argument_list|(
name|nextValMenuWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
name|nextAttrWidg
condition|)
name|XtSetValues
argument_list|(
name|nextAttrWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
name|XtManageChild
argument_list|(
name|thisValMenuWidg
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|thisValWidg
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|thisValMenuWidg
argument_list|,
name|menuicon_bits
argument_list|,
name|menuicon_width
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|GetTextWidth
argument_list|(
name|thisValWidg
argument_list|,
name|this_val
operator|->
name|value
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|GetTextHeight
argument_list|(
name|thisValWidg
argument_list|,
name|this_val
operator|->
name|value
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
name|this_val
operator|->
name|value
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|thisValWidg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|deleteVal
argument_list|(
name|thisValWidg
argument_list|,
operator|(
name|XtPointer
operator|)
name|this_val
argument_list|,
operator|(
name|XtPointer
operator|)
literal|0
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|w
operator|!=
operator|(
name|Widget
operator|)
name|calldata
condition|)
name|XawFormDoLayout
argument_list|(
name|form
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|dirEntry
name|createModifyTemplate
parameter_list|(
name|modify_form
parameter_list|,
name|entry_name
parameter_list|)
name|Widget
name|modify_form
decl_stmt|;
name|char
modifier|*
name|entry_name
decl_stmt|;
block|{
name|Widget
name|modifyViewForm
decl_stmt|,
name|modAttrMenu
decl_stmt|,
name|attrName
decl_stmt|,
name|lastVal
decl_stmt|,
name|modAttrMenuButton
decl_stmt|,
name|modValButton
decl_stmt|,
name|modValMenu
decl_stmt|,
name|modifyScrolledWindow
decl_stmt|,
name|valName
decl_stmt|,
name|modValMenuButton
decl_stmt|,
name|modifyButton
decl_stmt|;
name|dirEntry
name|entry
decl_stmt|;
name|dirAttrs
name|attrs
decl_stmt|,
name|curr_attrs
decl_stmt|;
name|modVals
name|curr_val
decl_stmt|;
name|Dimension
name|text_width
decl_stmt|,
name|text_height
decl_stmt|,
name|max_width
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|,
name|vertDistance
decl_stmt|;
name|make_template
argument_list|(
name|entry_name
argument_list|,
operator|&
name|attrs
argument_list|)
expr_stmt|;
name|entry
operator|=
operator|(
name|dirEntry
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|dir_entry
argument_list|)
argument_list|)
expr_stmt|;
name|entry
operator|->
name|entry_name
operator|=
name|malloc
argument_list|(
operator|(
name|unsigned
operator|)
name|strlen
argument_list|(
name|entry_name
argument_list|)
operator|+
literal|1
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|entry
operator|->
name|entry_name
argument_list|,
name|entry_name
argument_list|)
expr_stmt|;
name|entry
operator|->
name|attrs
operator|=
name|attrs
expr_stmt|;
name|modifyViewForm
operator|=
name|XtNameToWidget
argument_list|(
name|modify_form
argument_list|,
literal|"modifyForm.modifyScrolledWindow.modifyViewForm"
argument_list|)
expr_stmt|;
name|modifyScrolledWindow
operator|=
name|XtNameToWidget
argument_list|(
name|modify_form
argument_list|,
literal|"modifyForm.modifyScrolledWindow"
argument_list|)
expr_stmt|;
if|if
condition|(
name|modifyViewForm
operator|!=
literal|0
condition|)
block|{
name|XtUnmanageChild
argument_list|(
name|modifyViewForm
argument_list|)
expr_stmt|;
name|XtDestroyWidget
argument_list|(
name|modifyViewForm
argument_list|)
expr_stmt|;
block|}
name|count
operator|=
literal|0
expr_stmt|;
name|modifyViewForm
operator|=
name|XtCreateWidget
argument_list|(
literal|"modifyViewForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|modifyScrolledWindow
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|lastVal
operator|=
operator|(
name|Widget
operator|)
literal|0
expr_stmt|;
for|for
control|(
name|curr_attrs
operator|=
name|entry
operator|->
name|attrs
init|;
name|curr_attrs
condition|;
name|curr_attrs
operator|=
name|curr_attrs
operator|->
name|next
control|)
block|{
name|vertDistance
operator|=
literal|10
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|lastVal
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|lastVal
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNjustify
argument_list|,
name|XtJustifyLeft
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|attrName
operator|=
name|XtCreateWidget
argument_list|(
literal|"attrLabel"
argument_list|,
name|menuButtonWidgetClass
argument_list|,
name|modifyViewForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|text_width
operator|=
name|GetTextWidth
argument_list|(
name|attrName
argument_list|,
name|curr_attrs
operator|->
name|attr_name
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|modAttrMenu
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"menu"
argument_list|,
name|simpleMenuWidgetClass
argument_list|,
name|attrName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Add value field"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modAttrMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"addValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modAttrMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modAttrMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|addValField
argument_list|,
operator|(
name|XtPointer
operator|)
name|curr_attrs
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Undo ALL changes"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modAttrMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"undoMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modAttrMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modAttrMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|UndoAttrChanges
argument_list|,
operator|(
name|XtPointer
operator|)
name|curr_attrs
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|curr_attrs
operator|->
name|attr_name
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|text_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|attrName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
for|for
control|(
name|curr_val
operator|=
name|curr_attrs
operator|->
name|val_seq
init|;
name|curr_val
condition|;
name|curr_val
operator|=
name|curr_val
operator|->
name|next
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
if|if
condition|(
name|lastVal
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|lastVal
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|menuicon_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValButton
operator|=
name|XtCreateWidget
argument_list|(
literal|"modValMenu"
argument_list|,
name|menuButtonWidgetClass
argument_list|,
name|modifyViewForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|modValMenu
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"menu"
argument_list|,
name|simpleMenuWidgetClass
argument_list|,
name|modValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Delete this value"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"delValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modValMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modValMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|deleteVal
argument_list|,
operator|(
name|XtPointer
operator|)
name|curr_val
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|"Undo changes to this value"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modValMenuButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"undoValMenuButton"
argument_list|,
name|smeBSBObjectClass
argument_list|,
name|modValMenu
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modValMenuButton
argument_list|,
name|XtNcallback
argument_list|,
name|UndoValChanges
argument_list|,
operator|(
name|XtPointer
operator|)
name|curr_val
argument_list|)
expr_stmt|;
name|modCallbacks
index|[
literal|0
index|]
operator|.
name|closure
operator|=
operator|(
name|XtPointer
operator|)
name|curr_val
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|curr_val
operator|->
name|value
condition|)
if|if
condition|(
operator|!
name|curr_attrs
operator|->
name|hidden_flag
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
name|curr_val
operator|->
name|value
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
else|else
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNstring
argument_list|,
literal|"HIDDEN"
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|lastVal
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromVert
argument_list|,
name|lastVal
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
block|}
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNvertDistance
argument_list|,
name|vertDistance
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNeditType
argument_list|,
name|XawtextEdit
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresize
argument_list|,
name|XawtextResizeBoth
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNresizable
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNcallback
argument_list|,
name|modCallbacks
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|valName
operator|=
name|XtCreateWidget
argument_list|(
literal|"valText"
argument_list|,
name|asciiTextWidgetClass
argument_list|,
name|modifyViewForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|text_height
operator|=
name|text_width
operator|=
literal|0
expr_stmt|;
if|if
condition|(
operator|!
name|attrs
operator|->
name|hidden_flag
condition|)
block|{
name|text_height
operator|=
name|GetTextHeight
argument_list|(
name|valName
argument_list|,
name|curr_val
operator|->
name|value
argument_list|)
expr_stmt|;
name|text_width
operator|=
name|GetTextWidth
argument_list|(
name|valName
argument_list|,
name|curr_val
operator|->
name|value
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|text_height
operator|=
name|GetTextHeight
argument_list|(
name|valName
argument_list|,
literal|"HIDDEN"
argument_list|)
expr_stmt|;
name|text_width
operator|=
name|GetTextWidth
argument_list|(
name|valName
argument_list|,
literal|"HIDDEN"
argument_list|)
expr_stmt|;
block|}
name|count
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|text_height
operator|&&
name|text_width
condition|)
block|{
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|text_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|text_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|valName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
name|curr_val
operator|->
name|text_widg
operator|=
name|valName
expr_stmt|;
name|lastVal
operator|=
name|valName
expr_stmt|;
name|vertDistance
operator|=
literal|2
expr_stmt|;
block|}
block|}
if|if
condition|(
name|curr_modify_popup
condition|)
block|{
for|for
control|(
name|max_width
operator|=
literal|0
operator|,
name|curr_attrs
operator|=
name|entry
operator|->
name|attrs
init|;
name|curr_attrs
condition|;
name|curr_attrs
operator|=
name|curr_attrs
operator|->
name|next
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|curr_attrs
operator|->
name|val_seq
operator|->
name|text_widg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|modValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|&
name|text_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|attrName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|max_width
operator|=
operator|(
name|text_width
operator|>
name|max_width
condition|?
name|text_width
else|:
name|max_width
operator|)
expr_stmt|;
block|}
for|for
control|(
name|curr_attrs
operator|=
name|entry
operator|->
name|attrs
init|;
name|curr_attrs
condition|;
name|curr_attrs
operator|=
name|curr_attrs
operator|->
name|next
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|curr_attrs
operator|->
name|val_seq
operator|->
name|text_widg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|modValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|max_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|attrName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
for|for
control|(
name|curr_val
operator|=
name|curr_attrs
operator|->
name|val_seq
init|;
name|curr_val
condition|;
name|curr_val
operator|=
name|curr_val
operator|->
name|next
control|)
block|{
name|valName
operator|=
name|curr_val
operator|->
name|text_widg
expr_stmt|;
name|XtGetValues
argument_list|(
name|valName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|modValButton
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|valName
argument_list|)
expr_stmt|;
block|}
block|}
name|XtManageChild
argument_list|(
name|modifyViewForm
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
for|for
control|(
name|curr_attrs
operator|=
name|entry
operator|->
name|attrs
init|;
name|curr_attrs
condition|;
name|curr_attrs
operator|=
name|curr_attrs
operator|->
name|next
control|)
block|{
for|for
control|(
name|curr_val
operator|=
name|curr_attrs
operator|->
name|val_seq
init|;
name|curr_val
condition|;
name|curr_val
operator|=
name|curr_val
operator|->
name|next
control|)
block|{
name|valName
operator|=
name|curr_val
operator|->
name|text_widg
expr_stmt|;
name|XtGetValues
argument_list|(
name|valName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|modValButton
argument_list|,
name|menuicon_bits
argument_list|,
name|menuicon_width
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
block|}
block|}
name|modifyButton
operator|=
name|XtNameToWidget
argument_list|(
name|modify_form
argument_list|,
literal|"modifyForm.ModifyButtonForm.modifyButton"
argument_list|)
expr_stmt|;
comment|/*    XtCallCallbacks(modifyButton, XtNdestroyCallback, NULL);     XtRemoveAllCallbacks(modifyButton, XtNdestroyCallback);*/
if|if
condition|(
name|XtHasCallbacks
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|)
operator|==
name|XtCallbackHasSome
condition|)
name|XtRemoveAllCallbacks
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|,
name|submitModif
argument_list|,
operator|(
name|XtPointer
operator|)
name|entry
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modifyButton
argument_list|,
name|XtNdestroyCallback
argument_list|,
name|freeEntry
argument_list|,
operator|(
name|XtPointer
operator|)
name|entry
argument_list|)
expr_stmt|;
block|}
else|else
name|XtManageChild
argument_list|(
name|modifyViewForm
argument_list|)
expr_stmt|;
return|return
name|entry
return|;
block|}
end_function

begin_function
specifier|static
name|Widget
name|createModifyPopup
parameter_list|(
name|entry_name
parameter_list|)
name|char
modifier|*
name|entry_name
decl_stmt|;
block|{
name|Widget
name|modifyPopup
decl_stmt|,
name|modifyForm
decl_stmt|,
name|modifyButton
decl_stmt|,
name|closeButton
decl_stmt|,
name|keepButton
decl_stmt|,
name|attrName
decl_stmt|,
name|valName
decl_stmt|,
name|ButtonForm
decl_stmt|,
name|modMessage
decl_stmt|,
name|modValButton
decl_stmt|;
name|dirEntry
name|entry
decl_stmt|;
name|dirAttrs
name|curr_attrs
decl_stmt|;
name|modVals
name|curr_val
decl_stmt|;
name|Dimension
name|text_width
decl_stmt|,
name|text_height
decl_stmt|,
name|max_width
decl_stmt|;
name|XFontStruct
modifier|*
name|font
init|=
literal|0
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|int
name|count
decl_stmt|;
name|modifyPopup
operator|=
name|XtCreatePopupShell
argument_list|(
literal|"Modify Entry"
argument_list|,
name|topLevelShellWidgetClass
argument_list|,
name|toplevel
argument_list|,
name|args
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|modifyForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"modifyForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|modifyPopup
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|ButtonForm
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"ModifyButtonForm"
argument_list|,
name|formWidgetClass
argument_list|,
name|modifyForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Close_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|closeButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"closeButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|closeButton
argument_list|,
name|XtNcallback
argument_list|,
name|closeModify
argument_list|,
operator|(
name|XtPointer
operator|)
name|modifyPopup
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Keep_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|keepButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"keepButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|keepButton
argument_list|,
name|XtNcallback
argument_list|,
name|keepModify
argument_list|,
operator|(
name|XtPointer
operator|)
name|modifyPopup
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|Modify_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|Modify_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modifyButton
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"modifyButton"
argument_list|,
name|commandWidgetClass
argument_list|,
name|ButtonForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
operator|(
name|void
operator|)
name|XtCreateManagedWidget
argument_list|(
literal|"modifyScrolledWindow"
argument_list|,
name|viewportWidgetClass
argument_list|,
name|modifyForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|entry
operator|=
name|createModifyTemplate
argument_list|(
name|modifyPopup
argument_list|,
name|entry_name
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modifyButton
argument_list|,
name|XtNcallback
argument_list|,
name|submitModif
argument_list|,
operator|(
name|XtPointer
operator|)
name|entry
argument_list|)
expr_stmt|;
name|XtAddCallback
argument_list|(
name|modifyButton
argument_list|,
name|XtNdestroyCallback
argument_list|,
name|freeEntry
argument_list|,
operator|(
name|XtPointer
operator|)
name|entry
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|modMessage
operator|=
name|XtCreateManagedWidget
argument_list|(
literal|"modMessage"
argument_list|,
name|labelWidgetClass
argument_list|,
name|modifyForm
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|modMessage
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|text_height
operator|=
literal|5
operator|*
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNheight
argument_list|,
name|text_height
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|modMessage
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtRealizeWidget
argument_list|(
name|modifyPopup
argument_list|)
expr_stmt|;
for|for
control|(
name|max_width
operator|=
literal|0
operator|,
name|curr_attrs
operator|=
name|entry
operator|->
name|attrs
init|;
name|curr_attrs
condition|;
name|curr_attrs
operator|=
name|curr_attrs
operator|->
name|next
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|curr_attrs
operator|->
name|val_seq
operator|->
name|text_widg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|modValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
operator|&
name|text_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|attrName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|max_width
operator|=
operator|(
name|text_width
operator|>
name|max_width
condition|?
name|text_width
else|:
name|max_width
operator|)
expr_stmt|;
block|}
for|for
control|(
name|curr_attrs
operator|=
name|entry
operator|->
name|attrs
init|;
name|curr_attrs
condition|;
name|curr_attrs
operator|=
name|curr_attrs
operator|->
name|next
control|)
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|curr_attrs
operator|->
name|val_seq
operator|->
name|text_widg
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|modValButton
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNwidth
argument_list|,
name|max_width
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|attrName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|attrName
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfromHoriz
argument_list|,
operator|&
name|modValButton
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
for|for
control|(
name|curr_val
operator|=
name|curr_attrs
operator|->
name|val_seq
init|;
name|curr_val
condition|;
name|curr_val
operator|=
name|curr_val
operator|->
name|next
control|)
block|{
name|valName
operator|=
name|curr_val
operator|->
name|text_widg
expr_stmt|;
name|XtGetValues
argument_list|(
name|valName
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|modValButton
argument_list|)
expr_stmt|;
name|XtManageChild
argument_list|(
name|valName
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|modValButton
argument_list|,
name|menuicon_bits
argument_list|,
name|menuicon_width
argument_list|,
name|menuicon_height
argument_list|)
expr_stmt|;
block|}
block|}
name|CreateBackgroundPixmap
argument_list|(
name|modifyButton
argument_list|,
name|Modify_bits
argument_list|,
name|Modify_width
argument_list|,
name|Modify_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|closeButton
argument_list|,
name|Close_bits
argument_list|,
name|Close_width
argument_list|,
name|Close_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|keepButton
argument_list|,
name|Keep_bits
argument_list|,
name|Keep_width
argument_list|,
name|Keep_height
argument_list|)
expr_stmt|;
if|if
condition|(
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
operator|==
literal|1
condition|)
block|{
name|CreateBackgroundPixmap
argument_list|(
name|ButtonForm
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
name|CreateBackgroundPixmap
argument_list|(
name|modifyForm
argument_list|,
name|gray_bits
argument_list|,
name|gray_width
argument_list|,
name|gray_height
argument_list|)
expr_stmt|;
block|}
name|XtPopup
argument_list|(
name|modifyPopup
argument_list|,
name|XtGrabNone
argument_list|)
expr_stmt|;
name|XRaiseWindow
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|modifyPopup
argument_list|)
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
return|return
operator|(
name|modifyPopup
operator|)
return|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|freeEntry
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|free_dir_entry
argument_list|(
operator|(
name|dirEntry
operator|)
name|closure
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|freeSpace
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|free
argument_list|(
name|closure
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|SetBorder
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderColor
argument_list|,
name|BlackPixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|w
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|UnSetBorder
parameter_list|(
name|w
parameter_list|,
name|event
parameter_list|,
name|params
parameter_list|,
name|num_params
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
name|String
modifier|*
name|params
decl_stmt|;
name|int
name|num_params
decl_stmt|;
block|{
name|int
name|count
init|=
literal|0
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNborderColor
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|w
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|dpy
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|GetTextWidth
parameter_list|(
name|widget
parameter_list|,
name|string
parameter_list|)
name|Widget
name|widget
decl_stmt|;
name|char
modifier|*
name|string
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|XFontStruct
modifier|*
name|font
decl_stmt|;
name|int
name|max_width
decl_stmt|,
name|text_width
decl_stmt|;
specifier|register
name|char
modifier|*
name|sptr
decl_stmt|,
modifier|*
name|str
decl_stmt|;
if|if
condition|(
operator|!
name|widget
condition|)
return|return
literal|0
return|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|widget
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|string
operator|||
operator|*
name|string
operator|==
literal|'\0'
condition|)
return|return
operator|(
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
operator|)
return|;
name|max_width
operator|=
literal|0
expr_stmt|;
name|sptr
operator|=
name|str
operator|=
name|string
expr_stmt|;
while|while
condition|(
name|str
operator|&&
operator|*
name|str
operator|!=
literal|'\0'
condition|)
block|{
if|if
condition|(
operator|*
name|str
operator|==
literal|'\n'
condition|)
block|{
operator|*
name|str
operator|=
literal|'\0'
expr_stmt|;
name|text_width
operator|=
name|XTextWidth
argument_list|(
name|font
argument_list|,
name|sptr
argument_list|,
name|strlen
argument_list|(
name|sptr
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|text_width
operator|>
name|max_width
condition|)
name|max_width
operator|=
name|text_width
expr_stmt|;
operator|*
name|str
operator|=
literal|'\n'
expr_stmt|;
name|sptr
operator|=
operator|++
name|str
expr_stmt|;
block|}
else|else
name|str
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|sptr
condition|)
block|{
name|text_width
operator|=
name|XTextWidth
argument_list|(
name|font
argument_list|,
name|sptr
argument_list|,
name|strlen
argument_list|(
name|sptr
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|text_width
operator|>
name|max_width
condition|)
name|max_width
operator|=
name|text_width
expr_stmt|;
block|}
return|return
operator|(
name|max_width
operator|+
name|FONTWIDTH
argument_list|(
name|font
argument_list|)
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|GetTextHeight
parameter_list|(
name|widget
parameter_list|,
name|string
parameter_list|)
name|Widget
name|widget
decl_stmt|;
name|char
modifier|*
name|string
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|XFontStruct
modifier|*
name|font
decl_stmt|;
name|int
name|lines
decl_stmt|;
specifier|register
name|char
modifier|*
name|str
decl_stmt|;
if|if
condition|(
operator|!
name|widget
condition|)
return|return
literal|0
return|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNfont
argument_list|,
operator|&
name|font
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|widget
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|string
operator|||
operator|*
name|string
operator|==
literal|'\0'
condition|)
return|return
operator|(
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
operator|+
name|font
operator|->
name|ascent
operator|)
return|;
name|lines
operator|=
literal|1
expr_stmt|;
name|str
operator|=
name|string
expr_stmt|;
while|while
condition|(
name|str
operator|&&
operator|*
name|str
operator|!=
literal|'\0'
condition|)
block|{
if|if
condition|(
operator|*
name|str
operator|==
literal|'\n'
condition|)
name|lines
operator|++
expr_stmt|;
name|str
operator|++
expr_stmt|;
block|}
return|return
operator|(
operator|(
name|FONTHEIGHT
argument_list|(
name|font
argument_list|)
operator|*
name|lines
operator|)
operator|+
name|font
operator|->
name|ascent
operator|)
return|;
block|}
end_function

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|bool
name|ConvSel
parameter_list|(
name|w
parameter_list|,
name|selection
parameter_list|,
name|target
parameter_list|,
name|type
parameter_list|,
name|value
parameter_list|,
name|length
parameter_list|,
name|format
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|Atom
modifier|*
name|selection
decl_stmt|,
decl|*
name|target
decl_stmt|,
modifier|*
name|type
decl_stmt|;
end_function

begin_decl_stmt
name|XtPointer
modifier|*
name|value
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|long
modifier|*
name|length
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
modifier|*
name|format
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
name|XmuConvertStandardSelection
argument_list|(
name|w
argument_list|,
name|selection
argument_list|,
name|target
argument_list|,
name|type
argument_list|,
name|value
argument_list|,
name|length
argument_list|,
name|format
argument_list|)
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
operator|*
name|target
operator|==
name|XA_STRING
condition|)
block|{
operator|*
name|type
operator|=
name|XA_STRING
expr_stmt|;
operator|*
name|value
operator|=
name|strdup
argument_list|(
name|curr_selection
argument_list|)
expr_stmt|;
operator|*
name|length
operator|=
name|strlen
argument_list|(
operator|*
name|value
argument_list|)
expr_stmt|;
operator|*
name|format
operator|=
literal|8
expr_stmt|;
return|return
name|TRUE
return|;
block|}
else|else
return|return
name|FALSE
return|;
block|}
end_block

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_function
specifier|static
name|void
name|CutString
parameter_list|(
name|w
parameter_list|,
name|closure
parameter_list|,
name|calldata
parameter_list|)
name|Widget
name|w
decl_stmt|;
name|XtPointer
name|closure
decl_stmt|,
name|calldata
decl_stmt|;
block|{
name|Time
name|time
init|=
name|XtLastTimestampProcessed
argument_list|(
name|dpy
argument_list|)
decl_stmt|;
name|char
modifier|*
name|string
init|=
operator|(
name|char
operator|*
operator|)
name|closure
decl_stmt|;
operator|(
name|void
operator|)
name|strcpy
argument_list|(
name|curr_selection
argument_list|,
literal|"@"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|strcat
argument_list|(
name|curr_selection
argument_list|,
name|string
argument_list|)
expr_stmt|;
name|XtOwnSelection
argument_list|(
name|w
argument_list|,
name|XA_PRIMARY
argument_list|,
name|time
argument_list|,
name|ConvSel
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|PopupMessage
parameter_list|(
name|shell
parameter_list|,
name|label_widget
parameter_list|,
name|label
parameter_list|,
name|grab_kind
parameter_list|)
name|Widget
name|shell
decl_stmt|,
name|label_widget
decl_stmt|;
name|char
modifier|*
name|label
decl_stmt|;
name|XtGrabKind
name|grab_kind
decl_stmt|;
block|{
name|int
name|count
decl_stmt|;
name|Arg
name|args
index|[
name|MAXARGS
index|]
decl_stmt|;
name|Dimension
name|width
decl_stmt|,
name|height
decl_stmt|;
name|Pixmap
name|border_pixmap
decl_stmt|;
name|GC
name|gc
decl_stmt|;
name|char
name|dash_list
index|[
literal|2
index|]
decl_stmt|;
name|Position
name|x
decl_stmt|,
name|y
decl_stmt|;
name|dash_list
index|[
literal|0
index|]
operator|=
name|dash_list
index|[
literal|1
index|]
operator|=
literal|1
expr_stmt|;
name|width
operator|=
name|GetTextWidth
argument_list|(
name|label_widget
argument_list|,
name|label
argument_list|)
operator|+
literal|8
expr_stmt|;
name|height
operator|=
name|GetTextHeight
argument_list|(
name|label_widget
argument_list|,
name|label
argument_list|)
operator|+
literal|8
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNlabel
argument_list|,
name|label
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|label_widget
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|XtIsRealized
argument_list|(
name|outer
argument_list|)
condition|)
name|XtMoveWidget
argument_list|(
name|shell
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
else|else
block|{
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNx
argument_list|,
operator|&
name|x
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNy
argument_list|,
operator|&
name|y
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtGetValues
argument_list|(
name|outer
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
name|XtTranslateCoords
argument_list|(
name|outer
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
operator|&
name|x
argument_list|,
operator|&
name|y
argument_list|)
expr_stmt|;
name|XtMoveWidget
argument_list|(
name|shell
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
expr_stmt|;
block|}
name|XtMakeResizeRequest
argument_list|(
name|shell
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|NULL
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|XtResizeWidget
argument_list|(
name|label_widget
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
operator|(
name|Dimension
operator|)
literal|1
argument_list|)
expr_stmt|;
name|XtPopup
argument_list|(
name|shell
argument_list|,
name|grab_kind
argument_list|)
expr_stmt|;
name|XRaiseWindow
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|shell
argument_list|)
argument_list|)
expr_stmt|;
name|border_pixmap
operator|=
name|XCreatePixmap
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|label_widget
argument_list|)
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|DefaultDepthOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|gc
operator|=
name|XCreateGC
argument_list|(
name|dpy
argument_list|,
name|XtWindow
argument_list|(
name|label_widget
argument_list|)
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
name|XSetFunction
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
name|GXcopy
argument_list|)
expr_stmt|;
name|XSetBackground
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|XSetForeground
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
name|WhitePixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|XFillRectangle
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|XSetForeground
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
name|BlackPixelOfScreen
argument_list|(
name|screen
argument_list|)
argument_list|)
expr_stmt|;
name|XSetDashes
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
name|dash_list
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|XSetLineAttributes
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
name|LineOnOffDash
argument_list|,
name|CapButt
argument_list|,
name|JoinBevel
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|width
operator|-
literal|1
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
name|width
operator|-
literal|2
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
name|width
operator|-
literal|3
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
name|width
operator|-
literal|4
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|height
operator|-
literal|1
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
name|height
operator|-
literal|2
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
name|height
operator|-
literal|3
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
literal|3
argument_list|,
name|height
operator|-
literal|4
argument_list|)
expr_stmt|;
name|XSetLineAttributes
argument_list|(
name|dpy
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
name|LineSolid
argument_list|,
name|CapButt
argument_list|,
name|JoinBevel
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|0
argument_list|,
name|height
operator|-
literal|1
argument_list|,
name|width
operator|-
literal|1
argument_list|,
name|height
operator|-
literal|1
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|1
argument_list|,
name|height
operator|-
literal|2
argument_list|,
name|width
operator|-
literal|2
argument_list|,
name|height
operator|-
literal|2
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|2
argument_list|,
name|height
operator|-
literal|3
argument_list|,
name|width
operator|-
literal|3
argument_list|,
name|height
operator|-
literal|3
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
literal|3
argument_list|,
name|height
operator|-
literal|4
argument_list|,
name|width
operator|-
literal|4
argument_list|,
name|height
operator|-
literal|4
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
name|width
operator|-
literal|1
argument_list|,
literal|0
argument_list|,
name|width
operator|-
literal|1
argument_list|,
name|height
operator|-
literal|1
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
name|width
operator|-
literal|2
argument_list|,
literal|1
argument_list|,
name|width
operator|-
literal|2
argument_list|,
name|height
operator|-
literal|2
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
name|width
operator|-
literal|3
argument_list|,
literal|2
argument_list|,
name|width
operator|-
literal|3
argument_list|,
name|height
operator|-
literal|3
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|dpy
argument_list|,
name|border_pixmap
argument_list|,
name|gc
argument_list|,
name|width
operator|-
literal|4
argument_list|,
literal|3
argument_list|,
name|width
operator|-
literal|4
argument_list|,
name|height
operator|-
literal|4
argument_list|)
expr_stmt|;
name|count
operator|=
literal|0
expr_stmt|;
name|XtSetArg
argument_list|(
name|args
index|[
name|count
index|]
argument_list|,
name|XtNbackgroundPixmap
argument_list|,
name|border_pixmap
argument_list|)
expr_stmt|;
name|count
operator|++
expr_stmt|;
name|XtSetValues
argument_list|(
name|label_widget
argument_list|,
name|args
argument_list|,
name|count
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

