begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Assembler interface for targets using CGEN. -*- C -*-    CGEN: Cpu tools GENerator     THIS FILE IS MACHINE GENERATED WITH CGEN.    - the resultant file is machine generated, cgen-asm.in isn't     Copyright 1996, 1997, 1998, 1999, 2000, 2001, 2005    Free Software Foundation, Inc.     This file is part of the GNU Binutils and GDB, the GNU debugger.     This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2, or (at your option)    any later version.     This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software Foundation, Inc.,    51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.  */
end_comment

begin_comment
comment|/* ??? Eventually more and more of this stuff can go to cpu-independent files.    Keep that in mind.  */
end_comment

begin_include
include|#
directive|include
file|"sysdep.h"
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"ansidecl.h"
end_include

begin_include
include|#
directive|include
file|"bfd.h"
end_include

begin_include
include|#
directive|include
file|"symcat.h"
end_include

begin_include
include|#
directive|include
file|"m32c-desc.h"
end_include

begin_include
include|#
directive|include
file|"m32c-opc.h"
end_include

begin_include
include|#
directive|include
file|"opintl.h"
end_include

begin_include
include|#
directive|include
file|"xregex.h"
end_include

begin_include
include|#
directive|include
file|"libiberty.h"
end_include

begin_include
include|#
directive|include
file|"safe-ctype.h"
end_include

begin_undef
undef|#
directive|undef
name|min
end_undef

begin_define
define|#
directive|define
name|min
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|)
value|((a)< (b) ? (a) : (b))
end_define

begin_undef
undef|#
directive|undef
name|max
end_undef

begin_define
define|#
directive|define
name|max
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|)
value|((a)> (b) ? (a) : (b))
end_define

begin_function_decl
specifier|static
specifier|const
name|char
modifier|*
name|parse_insn_normal
parameter_list|(
name|CGEN_CPU_DESC
parameter_list|,
specifier|const
name|CGEN_INSN
modifier|*
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
parameter_list|,
name|CGEN_FIELDS
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_escape
end_escape

begin_comment
comment|/* -- assembler routines inserted here.  */
end_comment

begin_comment
comment|/* -- asm.c */
end_comment

begin_include
include|#
directive|include
file|"safe-ctype.h"
end_include

begin_define
define|#
directive|define
name|MACH_M32C
value|5
end_define

begin_comment
comment|/* Must match md_begin.  */
end_comment

begin_function
specifier|static
name|int
name|m32c_cgen_isa_register
parameter_list|(
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|)
block|{
name|int
name|u
decl_stmt|;
specifier|const
name|char
modifier|*
name|s
init|=
operator|*
name|strp
decl_stmt|;
specifier|static
name|char
modifier|*
name|m32c_register_names
index|[]
init|=
block|{
literal|"r0"
block|,
literal|"r1"
block|,
literal|"r2"
block|,
literal|"r3"
block|,
literal|"r0l"
block|,
literal|"r0h"
block|,
literal|"r1l"
block|,
literal|"r1h"
block|,
literal|"a0"
block|,
literal|"a1"
block|,
literal|"r2r0"
block|,
literal|"r3r1"
block|,
literal|"sp"
block|,
literal|"fb"
block|,
literal|"dct0"
block|,
literal|"dct1"
block|,
literal|"flg"
block|,
literal|"svf"
block|,
literal|"drc0"
block|,
literal|"drc1"
block|,
literal|"dmd0"
block|,
literal|"dmd1"
block|,
literal|"intb"
block|,
literal|"svp"
block|,
literal|"vct"
block|,
literal|"isp"
block|,
literal|"dma0"
block|,
literal|"dma1"
block|,
literal|"dra0"
block|,
literal|"dra1"
block|,
literal|"dsa0"
block|,
literal|"dsa1"
block|,
literal|0
block|}
decl_stmt|;
for|for
control|(
name|u
operator|=
literal|0
init|;
name|m32c_register_names
index|[
name|u
index|]
condition|;
name|u
operator|++
control|)
block|{
name|int
name|len
init|=
name|strlen
argument_list|(
name|m32c_register_names
index|[
name|u
index|]
argument_list|)
decl_stmt|;
if|if
condition|(
name|memcmp
argument_list|(
name|m32c_register_names
index|[
name|u
index|]
argument_list|,
name|s
argument_list|,
name|len
argument_list|)
operator|==
literal|0
operator|&&
operator|(
name|s
index|[
name|len
index|]
operator|==
literal|0
operator|||
operator|!
name|ISALNUM
argument_list|(
name|s
index|[
name|len
index|]
argument_list|)
operator|)
condition|)
return|return
literal|1
return|;
block|}
return|return
literal|0
return|;
block|}
end_function

begin_define
define|#
directive|define
name|PARSE_UNSIGNED
define|\
value|do									\     {									\
comment|/* Don't successfully parse literals beginning with '['.  */
value|\       if (**strp == '[')						\ 	return "Invalid literal";
comment|/* Anything -- will not be seen.  */
value|\ 									\       errmsg = cgen_parse_unsigned_integer (cd, strp, opindex,& value);\       if (errmsg)							\ 	return errmsg;							\     }									\   while (0)
end_define

begin_define
define|#
directive|define
name|PARSE_SIGNED
define|\
value|do									\     {									\
comment|/* Don't successfully parse literals beginning with '['.  */
value|\       if (**strp == '[')						\ 	return "Invalid literal";
comment|/* Anything -- will not be seen.  */
value|\ 									\       errmsg = cgen_parse_signed_integer (cd, strp, opindex,& value);  \       if (errmsg)							\ 	return errmsg;							\     }									\   while (0)
end_define

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned6
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|value
decl_stmt|;
name|PARSE_UNSIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|>
literal|0x3f
condition|)
return|return
name|_
argument_list|(
literal|"imm:6 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned8
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|value
decl_stmt|;
name|long
name|have_zero
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"%dsp8("
argument_list|,
literal|6
argument_list|)
operator|==
literal|0
condition|)
block|{
name|enum
name|cgen_parse_operand_result
name|result_type
decl_stmt|;
name|bfd_vma
name|value
decl_stmt|;
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
operator|*
name|strp
operator|+=
literal|6
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|BFD_RELOC_8
argument_list|,
operator|&
name|result_type
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|!=
literal|')'
condition|)
return|return
name|_
argument_list|(
literal|"missing `)'"
argument_list|)
return|;
operator|(
operator|*
name|strp
operator|)
operator|++
expr_stmt|;
if|if
condition|(
name|errmsg
operator|==
name|NULL
operator|&&
name|result_type
operator|==
name|CGEN_PARSE_OPERAND_RESULT_NUMBER
condition|)
block|{
return|return
name|_
argument_list|(
literal|"%dsp8() takes a symbolic address, not a number"
argument_list|)
return|;
block|}
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
name|errmsg
return|;
block|}
if|if
condition|(
name|strncmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"0x0"
argument_list|,
literal|3
argument_list|)
operator|==
literal|0
operator|||
operator|(
operator|*
operator|*
name|strp
operator|==
literal|'0'
operator|&&
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|!=
literal|'x'
operator|)
condition|)
name|have_zero
operator|=
literal|1
expr_stmt|;
name|PARSE_UNSIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|>
literal|0xff
condition|)
return|return
name|_
argument_list|(
literal|"dsp:8 immediate is out of range"
argument_list|)
return|;
comment|/* If this field may require a relocation then use larger dsp16.  */
if|if
condition|(
operator|!
name|have_zero
operator|&&
name|value
operator|==
literal|0
condition|)
return|return
name|_
argument_list|(
literal|"dsp:8 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed4
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|long
name|have_zero
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|strncmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"0x0"
argument_list|,
literal|3
argument_list|)
operator|==
literal|0
operator|||
operator|(
operator|*
operator|*
name|strp
operator|==
literal|'0'
operator|&&
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|!=
literal|'x'
operator|)
condition|)
name|have_zero
operator|=
literal|1
expr_stmt|;
name|PARSE_SIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|<
operator|-
literal|8
operator|||
name|value
operator|>
literal|7
condition|)
return|return
name|_
argument_list|(
literal|"Immediate is out of range -8 to 7"
argument_list|)
return|;
comment|/* If this field may require a relocation then use larger dsp16.  */
if|if
condition|(
operator|!
name|have_zero
operator|&&
name|value
operator|==
literal|0
condition|)
return|return
name|_
argument_list|(
literal|"Immediate is out of range -8 to 7"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed4n
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|long
name|have_zero
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|strncmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"0x0"
argument_list|,
literal|3
argument_list|)
operator|==
literal|0
operator|||
operator|(
operator|*
operator|*
name|strp
operator|==
literal|'0'
operator|&&
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|!=
literal|'x'
operator|)
condition|)
name|have_zero
operator|=
literal|1
expr_stmt|;
name|PARSE_SIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|<
operator|-
literal|7
operator|||
name|value
operator|>
literal|8
condition|)
return|return
name|_
argument_list|(
literal|"Immediate is out of range -7 to 8"
argument_list|)
return|;
comment|/* If this field may require a relocation then use larger dsp16.  */
if|if
condition|(
operator|!
name|have_zero
operator|&&
name|value
operator|==
literal|0
condition|)
return|return
name|_
argument_list|(
literal|"Immediate is out of range -7 to 8"
argument_list|)
return|;
operator|*
name|valuep
operator|=
operator|-
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed8
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"%hi8("
argument_list|,
literal|5
argument_list|)
operator|==
literal|0
condition|)
block|{
name|enum
name|cgen_parse_operand_result
name|result_type
decl_stmt|;
name|bfd_vma
name|value
decl_stmt|;
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
operator|*
name|strp
operator|+=
literal|5
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|BFD_RELOC_M32C_HI8
argument_list|,
operator|&
name|result_type
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|!=
literal|')'
condition|)
return|return
name|_
argument_list|(
literal|"missing `)'"
argument_list|)
return|;
operator|(
operator|*
name|strp
operator|)
operator|++
expr_stmt|;
if|if
condition|(
name|errmsg
operator|==
name|NULL
operator|&&
name|result_type
operator|==
name|CGEN_PARSE_OPERAND_RESULT_NUMBER
condition|)
block|{
name|value
operator|>>=
literal|16
expr_stmt|;
block|}
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
name|errmsg
return|;
block|}
name|PARSE_SIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|<=
literal|255
operator|&&
name|value
operator|>
literal|127
condition|)
name|value
operator|-=
literal|0x100
expr_stmt|;
if|if
condition|(
name|value
operator|<
operator|-
literal|128
operator|||
name|value
operator|>
literal|127
condition|)
return|return
name|_
argument_list|(
literal|"dsp:8 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned16
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|value
decl_stmt|;
name|long
name|have_zero
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"%dsp16("
argument_list|,
literal|7
argument_list|)
operator|==
literal|0
condition|)
block|{
name|enum
name|cgen_parse_operand_result
name|result_type
decl_stmt|;
name|bfd_vma
name|value
decl_stmt|;
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
operator|*
name|strp
operator|+=
literal|7
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|BFD_RELOC_16
argument_list|,
operator|&
name|result_type
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|!=
literal|')'
condition|)
return|return
name|_
argument_list|(
literal|"missing `)'"
argument_list|)
return|;
operator|(
operator|*
name|strp
operator|)
operator|++
expr_stmt|;
if|if
condition|(
name|errmsg
operator|==
name|NULL
operator|&&
name|result_type
operator|==
name|CGEN_PARSE_OPERAND_RESULT_NUMBER
condition|)
block|{
return|return
name|_
argument_list|(
literal|"%dsp16() takes a symbolic address, not a number"
argument_list|)
return|;
block|}
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
name|errmsg
return|;
block|}
comment|/* Don't successfully parse literals beginning with '['.  */
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|'['
condition|)
return|return
literal|"Invalid literal"
return|;
comment|/* Anything -- will not be seen.  */
comment|/* Don't successfully parse register names.  */
if|if
condition|(
name|m32c_cgen_isa_register
argument_list|(
name|strp
argument_list|)
condition|)
return|return
literal|"Invalid literal"
return|;
comment|/* Anything -- will not be seen.  */
if|if
condition|(
name|strncmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"0x0"
argument_list|,
literal|3
argument_list|)
operator|==
literal|0
operator|||
operator|(
operator|*
operator|*
name|strp
operator|==
literal|'0'
operator|&&
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|!=
literal|'x'
operator|)
condition|)
name|have_zero
operator|=
literal|1
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|>
literal|0xffff
condition|)
return|return
name|_
argument_list|(
literal|"dsp:16 immediate is out of range"
argument_list|)
return|;
comment|/* If this field may require a relocation then use larger dsp24.  */
if|if
condition|(
name|cd
operator|->
name|machs
operator|==
name|MACH_M32C
operator|&&
operator|!
name|have_zero
operator|&&
name|value
operator|==
literal|0
operator|&&
operator|(
name|strncmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"[a"
argument_list|,
literal|2
argument_list|)
operator|==
literal|0
operator|||
operator|*
operator|*
name|strp
operator|==
literal|','
operator|||
operator|*
operator|*
name|strp
operator|==
literal|0
operator|)
condition|)
return|return
name|_
argument_list|(
literal|"dsp:16 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed16
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"%lo16("
argument_list|,
literal|6
argument_list|)
operator|==
literal|0
condition|)
block|{
name|enum
name|cgen_parse_operand_result
name|result_type
decl_stmt|;
name|bfd_vma
name|value
decl_stmt|;
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
operator|*
name|strp
operator|+=
literal|6
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|BFD_RELOC_LO16
argument_list|,
operator|&
name|result_type
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|!=
literal|')'
condition|)
return|return
name|_
argument_list|(
literal|"missing `)'"
argument_list|)
return|;
operator|(
operator|*
name|strp
operator|)
operator|++
expr_stmt|;
if|if
condition|(
name|errmsg
operator|==
name|NULL
operator|&&
name|result_type
operator|==
name|CGEN_PARSE_OPERAND_RESULT_NUMBER
condition|)
block|{
name|value
operator|&=
literal|0xffff
expr_stmt|;
block|}
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
name|errmsg
return|;
block|}
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"%hi16("
argument_list|,
literal|6
argument_list|)
operator|==
literal|0
condition|)
block|{
name|enum
name|cgen_parse_operand_result
name|result_type
decl_stmt|;
name|bfd_vma
name|value
decl_stmt|;
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
operator|*
name|strp
operator|+=
literal|6
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|BFD_RELOC_HI16
argument_list|,
operator|&
name|result_type
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|!=
literal|')'
condition|)
return|return
name|_
argument_list|(
literal|"missing `)'"
argument_list|)
return|;
operator|(
operator|*
name|strp
operator|)
operator|++
expr_stmt|;
if|if
condition|(
name|errmsg
operator|==
name|NULL
operator|&&
name|result_type
operator|==
name|CGEN_PARSE_OPERAND_RESULT_NUMBER
condition|)
block|{
name|value
operator|>>=
literal|16
expr_stmt|;
block|}
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
name|errmsg
return|;
block|}
name|PARSE_SIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|<=
literal|65535
operator|&&
name|value
operator|>
literal|32767
condition|)
name|value
operator|-=
literal|0x10000
expr_stmt|;
if|if
condition|(
name|value
operator|<
operator|-
literal|32768
operator|||
name|value
operator|>
literal|32767
condition|)
return|return
name|_
argument_list|(
literal|"dsp:16 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned20
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|value
decl_stmt|;
comment|/* Don't successfully parse literals beginning with '['.  */
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|'['
condition|)
return|return
literal|"Invalid literal"
return|;
comment|/* Anything -- will not be seen.  */
comment|/* Don't successfully parse register names.  */
if|if
condition|(
name|m32c_cgen_isa_register
argument_list|(
name|strp
argument_list|)
condition|)
return|return
literal|"Invalid literal"
return|;
comment|/* Anything -- will not be seen.  */
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|>
literal|0xfffff
condition|)
return|return
name|_
argument_list|(
literal|"dsp:20 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned24
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|value
decl_stmt|;
comment|/* Don't successfully parse literals beginning with '['.  */
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|'['
condition|)
return|return
literal|"Invalid literal"
return|;
comment|/* Anything -- will not be seen.  */
comment|/* Don't successfully parse register names.  */
if|if
condition|(
name|m32c_cgen_isa_register
argument_list|(
name|strp
argument_list|)
condition|)
return|return
literal|"Invalid literal"
return|;
comment|/* Anything -- will not be seen.  */
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|>
literal|0xffffff
condition|)
return|return
name|_
argument_list|(
literal|"dsp:24 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_comment
comment|/* This should only be used for #imm->reg.  */
end_comment

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed24
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|PARSE_SIGNED
expr_stmt|;
if|if
condition|(
name|value
operator|<=
literal|0xffffff
operator|&&
name|value
operator|>
literal|0x7fffff
condition|)
name|value
operator|-=
literal|0x1000000
expr_stmt|;
if|if
condition|(
name|value
operator|>
literal|0xffffff
condition|)
return|return
name|_
argument_list|(
literal|"dsp:24 immediate is out of range"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed32
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_signed_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_imm1_S
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_signed_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|<
literal|1
operator|||
name|value
operator|>
literal|2
condition|)
return|return
name|_
argument_list|(
literal|"immediate is out of range 1-2"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_imm3_S
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_signed_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|<
literal|1
operator|||
name|value
operator|>
literal|8
condition|)
return|return
name|_
argument_list|(
literal|"immediate is out of range 1-8"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_bit3_S
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_signed_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|<
literal|0
operator|||
name|value
operator|>
literal|7
condition|)
return|return
name|_
argument_list|(
literal|"immediate is out of range 0-7"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_lab_5_3
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|int
name|opinfo
parameter_list|,
name|enum
name|cgen_parse_operand_result
modifier|*
name|type_addr
parameter_list|,
name|bfd_vma
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|bfd_vma
name|value
decl_stmt|;
name|enum
name|cgen_parse_operand_result
name|op_res
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_5_3
argument_list|,
name|opinfo
argument_list|,
operator|&
name|op_res
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|type_addr
condition|)
operator|*
name|type_addr
operator|=
name|op_res
expr_stmt|;
if|if
condition|(
name|op_res
operator|==
name|CGEN_PARSE_OPERAND_ADDRESS
condition|)
block|{
comment|/* This is a hack; the field cannot handle near-zero signed 	 offsets that CGEN wants to put in to indicate an "empty" 	 operand at first.  */
operator|*
name|valuep
operator|=
literal|2
expr_stmt|;
return|return
literal|0
return|;
block|}
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|<
literal|2
operator|||
name|value
operator|>
literal|9
condition|)
return|return
name|_
argument_list|(
literal|"immediate is out of range 2-9"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_Bitno16R
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|value
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
name|value
operator|>
literal|15
condition|)
return|return
name|_
argument_list|(
literal|"Bit number for indexing general register is out of range 0-15"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned_bitbase
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|,
name|unsigned
name|bits
parameter_list|,
name|int
name|allow_syms
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|bit
decl_stmt|;
name|unsigned
name|long
name|base
decl_stmt|;
specifier|const
name|char
modifier|*
name|newp
init|=
operator|*
name|strp
decl_stmt|;
name|unsigned
name|long
name|long
name|bitbase
decl_stmt|;
name|long
name|have_zero
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
name|opindex
argument_list|,
operator|&
name|bit
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
operator|*
name|newp
operator|!=
literal|','
condition|)
return|return
literal|"Missing base for bit,base:8"
return|;
operator|++
name|newp
expr_stmt|;
if|if
condition|(
name|strncmp
argument_list|(
name|newp
argument_list|,
literal|"0x0"
argument_list|,
literal|3
argument_list|)
operator|==
literal|0
operator|||
operator|(
name|newp
index|[
literal|0
index|]
operator|==
literal|'0'
operator|&&
name|newp
index|[
literal|1
index|]
operator|!=
literal|'x'
operator|)
condition|)
name|have_zero
operator|=
literal|1
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
name|opindex
argument_list|,
operator|&
name|base
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
name|bitbase
operator|=
operator|(
name|unsigned
name|long
name|long
operator|)
name|bit
operator|+
operator|(
operator|(
name|unsigned
name|long
name|long
operator|)
name|base
operator|*
literal|8
operator|)
expr_stmt|;
if|if
condition|(
name|bitbase
operator|>=
operator|(
literal|1ull
operator|<<
name|bits
operator|)
condition|)
return|return
name|_
argument_list|(
literal|"bit,base is out of range"
argument_list|)
return|;
comment|/* If this field may require a relocation then use larger displacement.  */
if|if
condition|(
operator|!
name|have_zero
operator|&&
name|base
operator|==
literal|0
condition|)
block|{
switch|switch
condition|(
name|allow_syms
condition|)
block|{
case|case
literal|0
case|:
return|return
name|_
argument_list|(
literal|"bit,base out of range for symbol"
argument_list|)
return|;
case|case
literal|1
case|:
break|break;
case|case
literal|2
case|:
if|if
condition|(
name|strncmp
argument_list|(
name|newp
argument_list|,
literal|"[sb]"
argument_list|,
literal|4
argument_list|)
operator|!=
literal|0
condition|)
return|return
name|_
argument_list|(
literal|"bit,base out of range for symbol"
argument_list|)
return|;
break|break;
block|}
block|}
operator|*
name|valuep
operator|=
name|bitbase
expr_stmt|;
operator|*
name|strp
operator|=
name|newp
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed_bitbase
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|,
name|unsigned
name|bits
parameter_list|,
name|int
name|allow_syms
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|unsigned
name|long
name|bit
decl_stmt|;
name|signed
name|long
name|base
decl_stmt|;
specifier|const
name|char
modifier|*
name|newp
init|=
operator|*
name|strp
decl_stmt|;
name|long
name|long
name|bitbase
decl_stmt|;
name|long
name|long
name|limit
decl_stmt|;
name|long
name|have_zero
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
name|opindex
argument_list|,
operator|&
name|bit
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
operator|*
name|newp
operator|!=
literal|','
condition|)
return|return
literal|"Missing base for bit,base:8"
return|;
operator|++
name|newp
expr_stmt|;
if|if
condition|(
name|strncmp
argument_list|(
name|newp
argument_list|,
literal|"0x0"
argument_list|,
literal|3
argument_list|)
operator|==
literal|0
operator|||
operator|(
name|newp
index|[
literal|0
index|]
operator|==
literal|'0'
operator|&&
name|newp
index|[
literal|1
index|]
operator|!=
literal|'x'
operator|)
condition|)
name|have_zero
operator|=
literal|1
expr_stmt|;
name|errmsg
operator|=
name|cgen_parse_signed_integer
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
name|opindex
argument_list|,
operator|&
name|base
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
name|bitbase
operator|=
operator|(
name|long
name|long
operator|)
name|bit
operator|+
operator|(
operator|(
name|long
name|long
operator|)
name|base
operator|*
literal|8
operator|)
expr_stmt|;
name|limit
operator|=
literal|1ll
operator|<<
operator|(
name|bits
operator|-
literal|1
operator|)
expr_stmt|;
if|if
condition|(
name|bitbase
operator|<
operator|-
name|limit
operator|||
name|bitbase
operator|>=
name|limit
condition|)
return|return
name|_
argument_list|(
literal|"bit,base is out of range"
argument_list|)
return|;
comment|/* If this field may require a relocation then use larger displacement.  */
if|if
condition|(
operator|!
name|have_zero
operator|&&
name|base
operator|==
literal|0
operator|&&
operator|!
name|allow_syms
condition|)
return|return
name|_
argument_list|(
literal|"bit,base out of range for symbol"
argument_list|)
return|;
operator|*
name|valuep
operator|=
name|bitbase
expr_stmt|;
operator|*
name|strp
operator|=
name|newp
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned_bitbase8
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_unsigned_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|8
argument_list|,
literal|0
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned_bitbase11
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_unsigned_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|11
argument_list|,
literal|0
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned_bitbase16
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_unsigned_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|16
argument_list|,
literal|1
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned_bitbase19
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_unsigned_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|19
argument_list|,
literal|2
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_unsigned_bitbase27
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_unsigned_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|27
argument_list|,
literal|1
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed_bitbase8
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_signed_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|8
argument_list|,
literal|1
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed_bitbase11
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_signed_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|11
argument_list|,
literal|0
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_signed_bitbase19
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_signed_bitbase
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
literal|19
argument_list|,
literal|1
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Parse the suffix as :<char> or as nothing followed by a whitespace.  */
end_comment

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_suffix
parameter_list|(
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|char
name|suffix
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|newp
init|=
operator|*
name|strp
decl_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|':'
operator|&&
name|TOLOWER
argument_list|(
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
argument_list|)
operator|==
name|suffix
condition|)
name|newp
operator|=
operator|*
name|strp
operator|+
literal|2
expr_stmt|;
if|if
condition|(
name|ISSPACE
argument_list|(
operator|*
name|newp
argument_list|)
condition|)
block|{
operator|*
name|strp
operator|=
name|newp
expr_stmt|;
return|return
literal|0
return|;
block|}
return|return
literal|"Invalid suffix"
return|;
comment|/* Anything -- will not be seen.  */
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_S
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
return|return
name|parse_suffix
argument_list|(
name|strp
argument_list|,
literal|'s'
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_G
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
return|return
name|parse_suffix
argument_list|(
name|strp
argument_list|,
literal|'g'
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_Q
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
return|return
name|parse_suffix
argument_list|(
name|strp
argument_list|,
literal|'q'
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_Z
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
return|return
name|parse_suffix
argument_list|(
name|strp
argument_list|,
literal|'z'
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Parse an empty suffix. Fail if the next char is ':'.  */
end_comment

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_X
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|':'
condition|)
return|return
literal|"Unexpected suffix"
return|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_r0l_r0h
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
name|signed
name|long
name|value
decl_stmt|;
name|signed
name|long
name|junk
decl_stmt|;
specifier|const
name|char
modifier|*
name|newp
init|=
operator|*
name|strp
decl_stmt|;
comment|/* Parse r0[hl].  */
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0l_r0h
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
if|if
condition|(
operator|*
name|newp
operator|!=
literal|','
condition|)
return|return
name|_
argument_list|(
literal|"not a valid r0l/r0h pair"
argument_list|)
return|;
operator|++
name|newp
expr_stmt|;
comment|/* Parse the second register in the pair.  */
if|if
condition|(
name|value
operator|==
literal|0
condition|)
comment|/* r0l */
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0h
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
else|else
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
operator|&
name|newp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0l
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
operator|*
name|strp
operator|=
name|newp
expr_stmt|;
operator|*
name|valuep
operator|=
operator|!
name|value
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_comment
comment|/* Accept .b or .w in any case.  */
end_comment

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_size
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|signed
name|long
modifier|*
name|valuep
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|'.'
operator|&&
operator|(
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|==
literal|'b'
operator|||
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|==
literal|'B'
operator|||
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|==
literal|'w'
operator|||
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|==
literal|'W'
operator|)
condition|)
block|{
operator|*
name|strp
operator|+=
literal|2
expr_stmt|;
return|return
name|NULL
return|;
block|}
return|return
name|_
argument_list|(
literal|"Invalid size specifier"
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Special check to ensure that instruction exists for given machine.  */
end_comment

begin_function
name|int
name|m32c_cgen_insn_supported
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|CGEN_INSN
modifier|*
name|insn
parameter_list|)
block|{
name|int
name|machs
init|=
name|CGEN_INSN_ATTR_VALUE
argument_list|(
name|insn
argument_list|,
name|CGEN_INSN_MACH
argument_list|)
decl_stmt|;
name|CGEN_BITSET
name|isas
init|=
name|CGEN_INSN_BITSET_ATTR_VALUE
argument_list|(
name|insn
argument_list|,
name|CGEN_INSN_ISA
argument_list|)
decl_stmt|;
comment|/* If attributes are absent, assume no restriction.  */
if|if
condition|(
name|machs
operator|==
literal|0
condition|)
name|machs
operator|=
operator|~
literal|0
expr_stmt|;
return|return
operator|(
operator|(
name|machs
operator|&
name|cd
operator|->
name|machs
operator|)
operator|&&
name|cgen_bitset_intersect_p
argument_list|(
operator|&
name|isas
argument_list|,
name|cd
operator|->
name|isas
argument_list|)
operator|)
return|;
block|}
end_function

begin_comment
comment|/* Parse a set of registers, R0,R1,A0,A1,SB,FB.  */
end_comment

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_regset
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|,
name|int
name|push
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
literal|0
decl_stmt|;
name|int
name|regno
init|=
literal|0
decl_stmt|;
operator|*
name|valuep
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|*
operator|*
name|strp
operator|&&
operator|*
operator|*
name|strp
operator|!=
literal|')'
condition|)
block|{
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|'r'
operator|||
operator|*
operator|*
name|strp
operator|==
literal|'R'
condition|)
block|{
operator|++
operator|*
name|strp
expr_stmt|;
name|regno
operator|=
operator|*
operator|*
name|strp
operator|-
literal|'0'
expr_stmt|;
if|if
condition|(
name|regno
operator|>
literal|4
condition|)
name|errmsg
operator|=
name|_
argument_list|(
literal|"Register number is not valid"
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|'a'
operator|||
operator|*
operator|*
name|strp
operator|==
literal|'A'
condition|)
block|{
operator|++
operator|*
name|strp
expr_stmt|;
name|regno
operator|=
operator|*
operator|*
name|strp
operator|-
literal|'0'
expr_stmt|;
if|if
condition|(
name|regno
operator|>
literal|2
condition|)
name|errmsg
operator|=
name|_
argument_list|(
literal|"Register number is not valid"
argument_list|)
expr_stmt|;
name|regno
operator|=
operator|*
operator|*
name|strp
operator|-
literal|'0'
operator|+
literal|4
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"sb"
argument_list|,
literal|2
argument_list|)
operator|==
literal|0
operator|||
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"SB"
argument_list|,
literal|2
argument_list|)
operator|==
literal|0
condition|)
block|{
name|regno
operator|=
literal|6
expr_stmt|;
operator|++
operator|*
name|strp
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"fb"
argument_list|,
literal|2
argument_list|)
operator|==
literal|0
operator|||
name|strncasecmp
argument_list|(
operator|*
name|strp
argument_list|,
literal|"FB"
argument_list|,
literal|2
argument_list|)
operator|==
literal|0
condition|)
block|{
name|regno
operator|=
literal|7
expr_stmt|;
operator|++
operator|*
name|strp
expr_stmt|;
block|}
if|if
condition|(
name|push
condition|)
comment|/* Mask is reversed for push.  */
operator|*
name|valuep
operator||=
literal|0x80
operator|>>
name|regno
expr_stmt|;
else|else
operator|*
name|valuep
operator||=
literal|1
operator|<<
name|regno
expr_stmt|;
operator|++
operator|*
name|strp
expr_stmt|;
if|if
condition|(
operator|*
operator|*
name|strp
operator|==
literal|','
condition|)
block|{
if|if
condition|(
operator|*
operator|(
operator|*
name|strp
operator|+
literal|1
operator|)
operator|==
literal|')'
condition|)
break|break;
operator|++
operator|*
name|strp
expr_stmt|;
block|}
block|}
if|if
condition|(
operator|!
operator|*
name|strp
condition|)
name|errmsg
operator|=
name|_
argument_list|(
literal|"Register list is not valid"
argument_list|)
expr_stmt|;
return|return
name|errmsg
return|;
block|}
end_function

begin_define
define|#
directive|define
name|POP
value|0
end_define

begin_define
define|#
directive|define
name|PUSH
value|1
end_define

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_pop_regset
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_regset
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
name|POP
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_push_regset
parameter_list|(
name|CGEN_CPU_DESC
name|cd
name|ATTRIBUTE_UNUSED
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|int
name|opindex
name|ATTRIBUTE_UNUSED
parameter_list|,
name|unsigned
name|long
modifier|*
name|valuep
parameter_list|)
block|{
return|return
name|parse_regset
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|opindex
argument_list|,
name|valuep
argument_list|,
name|PUSH
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* -- dis.c */
end_comment

begin_function_decl
specifier|const
name|char
modifier|*
name|m32c_cgen_parse_operand
parameter_list|(
name|CGEN_CPU_DESC
parameter_list|,
name|int
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
parameter_list|,
name|CGEN_FIELDS
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Main entry point for operand parsing.     This function is basically just a big switch statement.  Earlier versions    used tables to look up the function to use, but    - if the table contains both assembler and disassembler functions then      the disassembler contains much of the assembler and vice-versa,    - there's a lot of inlining possibilities as things grow,    - using a switch statement avoids the function call overhead.     This function could be moved into `parse_insn_normal', but keeping it    separate makes clear the interface between `parse_insn_normal' and each of    the handlers.  */
end_comment

begin_function
specifier|const
name|char
modifier|*
name|m32c_cgen_parse_operand
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
name|int
name|opindex
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|CGEN_FIELDS
modifier|*
name|fields
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|errmsg
init|=
name|NULL
decl_stmt|;
comment|/* Used by scalar operands that still need to be parsed.  */
name|long
name|junk
name|ATTRIBUTE_UNUSED
decl_stmt|;
switch|switch
condition|(
name|opindex
condition|)
block|{
case|case
name|M32C_OPERAND_A0
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_a0
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_A1
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_a1
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_AN16_PUSH_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_4_1
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT16AN
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT16RN
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT3_S
case|:
name|errmsg
operator|=
name|parse_bit3_S
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BIT3_S
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm3_S
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT32ANPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT32ANUNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT32RNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_prefixed_QI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BIT32RNUNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_unprefixed_QI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE16_16_S8
case|:
name|errmsg
operator|=
name|parse_signed_bitbase8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE16_16_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE16_16_U16
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE16_16_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE16_16_U8
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE16_16_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE16_8_U11_S
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase11
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE16_8_U11_S
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase16_u11_S
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_16_S11_UNPREFIXED
case|:
name|errmsg
operator|=
name|parse_signed_bitbase11
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_16_S11_UNPREFIXED
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_16_s11_unprefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_16_S19_UNPREFIXED
case|:
name|errmsg
operator|=
name|parse_signed_bitbase19
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_16_S19_UNPREFIXED
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_16_s19_unprefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_16_U11_UNPREFIXED
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase11
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_16_U11_UNPREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_16_u11_unprefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_16_U19_UNPREFIXED
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase19
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_16_U19_UNPREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_16_u19_unprefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_16_U27_UNPREFIXED
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase27
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_16_U27_UNPREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_16_u27_unprefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_24_S11_PREFIXED
case|:
name|errmsg
operator|=
name|parse_signed_bitbase11
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_24_S11_PREFIXED
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_24_s11_prefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_24_S19_PREFIXED
case|:
name|errmsg
operator|=
name|parse_signed_bitbase19
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_24_S19_PREFIXED
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_24_s19_prefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_24_U11_PREFIXED
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase11
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_24_U11_PREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_24_u11_prefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_24_U19_PREFIXED
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase19
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_24_U19_PREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_24_u19_prefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITBASE32_24_U27_PREFIXED
case|:
name|errmsg
operator|=
name|parse_unsigned_bitbase27
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITBASE32_24_U27_PREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitbase32_24_u27_prefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITNO16R
case|:
name|errmsg
operator|=
name|parse_Bitno16R
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITNO16R
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITNO32PREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITNO32PREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitno32_prefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_BITNO32UNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_unsigned_integer
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_BITNO32UNPREFIXED
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_bitno32_unprefixed
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_10_U6
case|:
name|errmsg
operator|=
name|parse_unsigned6
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_10_U6
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_10_u6
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_16_S16
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_16_S16
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_16_S8
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_16_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_16_U16
case|:
name|errmsg
operator|=
name|parse_unsigned16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_16_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_16_U20
case|:
name|errmsg
operator|=
name|parse_unsigned20
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_16_U20
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_16_U24
case|:
name|errmsg
operator|=
name|parse_unsigned24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_16_U24
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_16_U8
case|:
name|errmsg
operator|=
name|parse_unsigned8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_16_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_24_S16
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_24_S16
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_24_S8
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_24_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_24_U16
case|:
name|errmsg
operator|=
name|parse_unsigned16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_24_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_24_U20
case|:
name|errmsg
operator|=
name|parse_unsigned20
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_24_U20
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_24_U24
case|:
name|errmsg
operator|=
name|parse_unsigned24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_24_U24
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_24_U8
case|:
name|errmsg
operator|=
name|parse_unsigned8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_24_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_32_S16
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_32_S16
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_32_S8
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_32_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_32_U16
case|:
name|errmsg
operator|=
name|parse_unsigned16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_32_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_32_U20
case|:
name|errmsg
operator|=
name|parse_unsigned20
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_32_U20
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_32_U24
case|:
name|errmsg
operator|=
name|parse_unsigned24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_32_U24
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_32_U8
case|:
name|errmsg
operator|=
name|parse_unsigned8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_32_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_40_S16
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_40_S16
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_40_S8
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_40_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_40_U16
case|:
name|errmsg
operator|=
name|parse_unsigned16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_40_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_40_U24
case|:
name|errmsg
operator|=
name|parse_unsigned24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_40_U24
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_40_U8
case|:
name|errmsg
operator|=
name|parse_unsigned8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_40_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_48_S16
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_48_S16
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_48_S8
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_48_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_48_U16
case|:
name|errmsg
operator|=
name|parse_unsigned16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_48_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_48_U24
case|:
name|errmsg
operator|=
name|parse_unsigned24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_48_U24
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_48_U8
case|:
name|errmsg
operator|=
name|parse_unsigned8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_48_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_8_S24
case|:
name|errmsg
operator|=
name|parse_signed24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_8_S24
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_s24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_8_S8
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_8_S8
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_8_U16
case|:
name|errmsg
operator|=
name|parse_unsigned16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_8_U16
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_u16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_8_U24
case|:
name|errmsg
operator|=
name|parse_unsigned24
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_8_U24
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_u24
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_8_U6
case|:
name|errmsg
operator|=
name|parse_unsigned6
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_8_U6
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_u6
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DSP_8_U8
case|:
name|errmsg
operator|=
name|parse_unsigned8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_DSP_8_U8
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_u8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16AN
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16AN_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_an_s
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16ANHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16ANQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16ANQI_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn_QI_s
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16ANSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_SI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16RNEXTQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_ext_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn_ext
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16RNHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16RNQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16RNQI_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0l_r0h
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn_QI_s
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST16RNSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_SI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst16_rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANEXTUNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANUNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANUNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANUNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32ANUNPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32R0HI_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32R0QI_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0l
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNEXTUNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_ext_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_ext_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNEXTUNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_ext_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_ext_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_prefixed_HI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_prefixed_QI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_SI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_prefixed_SI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNUNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_unprefixed_HI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNUNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_unprefixed_QI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_DST32RNUNPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_SI
argument_list|,
operator|&
name|fields
operator|->
name|f_dst32_rn_unprefixed_SI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_G
case|:
name|errmsg
operator|=
name|parse_G
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_G
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|junk
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_12_S4
case|:
name|errmsg
operator|=
name|parse_signed4
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_12_S4
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm_12_s4
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_12_S4N
case|:
name|errmsg
operator|=
name|parse_signed4n
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_12_S4N
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm_12_s4
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_13_U3
case|:
name|errmsg
operator|=
name|parse_signed4
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_13_U3
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm_13_u3
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_16_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_16_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_16_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_16_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_16_SI
case|:
name|errmsg
operator|=
name|parse_signed32
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_16_SI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_16_s32
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_20_S4
case|:
name|errmsg
operator|=
name|parse_signed4
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_20_S4
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm_20_s4
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_24_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_24_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_24_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_24_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_24_SI
case|:
name|errmsg
operator|=
name|parse_signed32
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_24_SI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_24_s32
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_32_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_32_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_32_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_32_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_32_SI
case|:
name|errmsg
operator|=
name|parse_signed32
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_32_SI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_32_s32
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_40_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_40_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_40_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_40_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_40_SI
case|:
name|errmsg
operator|=
name|parse_signed32
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_40_SI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_40_s32
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_48_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_48_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_48_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_48_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_48_SI
case|:
name|errmsg
operator|=
name|parse_signed32
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_48_SI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_48_s32
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_56_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_56_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_56_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_56_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_56_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_56_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_64_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_64_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_64_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_8_HI
case|:
name|errmsg
operator|=
name|parse_signed16
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_8_HI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_s16
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_8_QI
case|:
name|errmsg
operator|=
name|parse_signed8
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_8_QI
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_dsp_8_s8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_8_S4
case|:
name|errmsg
operator|=
name|parse_signed4
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_8_S4
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm_8_s4
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_8_S4N
case|:
name|errmsg
operator|=
name|parse_signed4n
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM_8_S4N
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm_8_s4
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_SH_12_S4
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_shimm
argument_list|,
operator|&
name|fields
operator|->
name|f_imm_12_s4
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_SH_20_S4
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_shimm
argument_list|,
operator|&
name|fields
operator|->
name|f_imm_20_s4
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM_SH_8_S4
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_shimm
argument_list|,
operator|&
name|fields
operator|->
name|f_imm_8_s4
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM1_S
case|:
name|errmsg
operator|=
name|parse_imm1_S
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM1_S
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm1_S
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_IMM3_S
case|:
name|errmsg
operator|=
name|parse_imm3_S
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_IMM3_S
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_imm3_S
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_LAB_16_8
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_16_8
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_16_8
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_24_8
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_24_8
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_24_8
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_32_8
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_32_8
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_32_8
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_40_8
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_40_8
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_40_8
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_5_3
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|parse_lab_5_3
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_5_3
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_5_3
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_8_16
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_8_16
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_8_16
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_8_24
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_8_24
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_8_24
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB_8_8
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|cgen_parse_address
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB_8_8
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab_8_8
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_LAB32_JMP_S
case|:
block|{
name|bfd_vma
name|value
init|=
literal|0
decl_stmt|;
name|errmsg
operator|=
name|parse_lab_5_3
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_LAB32_JMP_S
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|&
name|value
argument_list|)
expr_stmt|;
name|fields
operator|->
name|f_lab32_jmp_s
operator|=
name|value
expr_stmt|;
block|}
break|break;
case|case
name|M32C_OPERAND_Q
case|:
name|errmsg
operator|=
name|parse_Q
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_Q
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|junk
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R0
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R0H
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0h
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R0L
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r0l
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R1
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r1
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R1R2R0
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r1r2r0
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R2
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r2
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R2R0
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r2r0
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R3
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r3
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_R3R1
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_r3r1
argument_list|,
operator|&
name|junk
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_REGSETPOP
case|:
name|errmsg
operator|=
name|parse_pop_regset
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_REGSETPOP
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_8_8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_REGSETPUSH
case|:
name|errmsg
operator|=
name|parse_push_regset
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_REGSETPUSH
argument_list|,
operator|(
name|unsigned
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_8_8
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_RN16_PUSH_S
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_4_1
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_S
case|:
name|errmsg
operator|=
name|parse_S
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_S
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|junk
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC16AN
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_src16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC16ANHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_src16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC16ANQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_src16_an
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC16RNHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_src16_rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC16RNQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_src16_rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_prefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANUNPREFIXED
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANUNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANUNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32ANUNPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_ar
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_an_unprefixed
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32RNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_rn_prefixed_HI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32RNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_rn_prefixed_QI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32RNPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_SI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_rn_prefixed_SI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32RNUNPREFIXEDHI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_HI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_rn_unprefixed_HI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32RNUNPREFIXEDQI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_QI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_rn_unprefixed_QI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRC32RNUNPREFIXEDSI
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_gr_SI
argument_list|,
operator|&
name|fields
operator|->
name|f_src32_rn_unprefixed_SI
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SRCDST16_R0L_R0H_S_NORMAL
case|:
name|errmsg
operator|=
name|parse_r0l_r0h
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_SRCDST16_R0L_R0H_S_NORMAL
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|fields
operator|->
name|f_5_1
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_X
case|:
name|errmsg
operator|=
name|parse_X
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_X
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|junk
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_Z
case|:
name|errmsg
operator|=
name|parse_Z
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_Z
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|junk
operator|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND16_16
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond16
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_16_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND16_24
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond16
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_24_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND16_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond16
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_32_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND16C
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond16c
argument_list|,
operator|&
name|fields
operator|->
name|f_cond16
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND16J
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond16j
argument_list|,
operator|&
name|fields
operator|->
name|f_cond16
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND16J5
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond16j_5
argument_list|,
operator|&
name|fields
operator|->
name|f_cond16j_5
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_cond32
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND32_16
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_16_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND32_24
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_24_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND32_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_32_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND32_40
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_dsp_40_u8
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_COND32J
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_cond32j
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_CR1_PREFIXED_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cr1_32
argument_list|,
operator|&
name|fields
operator|->
name|f_21_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_CR1_UNPREFIXED_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cr1_32
argument_list|,
operator|&
name|fields
operator|->
name|f_13_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_CR16
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cr_16
argument_list|,
operator|&
name|fields
operator|->
name|f_9_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_CR2_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cr2_32
argument_list|,
operator|&
name|fields
operator|->
name|f_13_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_CR3_PREFIXED_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cr3_32
argument_list|,
operator|&
name|fields
operator|->
name|f_21_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_CR3_UNPREFIXED_32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cr3_32
argument_list|,
operator|&
name|fields
operator|->
name|f_13_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_FLAGS16
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_flags
argument_list|,
operator|&
name|fields
operator|->
name|f_9_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_FLAGS32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_flags
argument_list|,
operator|&
name|fields
operator|->
name|f_13_3
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SCCOND32
case|:
name|errmsg
operator|=
name|cgen_parse_keyword
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
operator|&
name|m32c_cgen_opval_h_cond32
argument_list|,
operator|&
name|fields
operator|->
name|f_cond16
argument_list|)
expr_stmt|;
break|break;
case|case
name|M32C_OPERAND_SIZE
case|:
name|errmsg
operator|=
name|parse_size
argument_list|(
name|cd
argument_list|,
name|strp
argument_list|,
name|M32C_OPERAND_SIZE
argument_list|,
operator|(
name|long
operator|*
operator|)
operator|(
operator|&
name|junk
operator|)
argument_list|)
expr_stmt|;
break|break;
default|default :
comment|/* xgettext:c-format */
name|fprintf
argument_list|(
name|stderr
argument_list|,
name|_
argument_list|(
literal|"Unrecognized field %d while parsing.\n"
argument_list|)
argument_list|,
name|opindex
argument_list|)
expr_stmt|;
name|abort
argument_list|()
expr_stmt|;
block|}
return|return
name|errmsg
return|;
block|}
end_function

begin_decl_stmt
name|cgen_parse_fn
modifier|*
specifier|const
name|m32c_cgen_parse_handlers
index|[]
init|=
block|{
name|parse_insn_normal
block|, }
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|m32c_cgen_init_asm
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|)
block|{
name|m32c_cgen_init_opcode_table
argument_list|(
name|cd
argument_list|)
expr_stmt|;
name|m32c_cgen_init_ibld_table
argument_list|(
name|cd
argument_list|)
expr_stmt|;
name|cd
operator|->
name|parse_handlers
operator|=
operator|&
name|m32c_cgen_parse_handlers
index|[
literal|0
index|]
expr_stmt|;
name|cd
operator|->
name|parse_operand
operator|=
name|m32c_cgen_parse_operand
expr_stmt|;
block|}
end_function

begin_escape
end_escape

begin_comment
comment|/* Regex construction routine.     This translates an opcode syntax string into a regex string,    by replacing any non-character syntax element (such as an    opcode) with the pattern '.*'     It then compiles the regex and stores it in the opcode, for    later use by m32c_cgen_assemble_insn     Returns NULL for success, an error message for failure.  */
end_comment

begin_function
name|char
modifier|*
name|m32c_cgen_build_insn_regex
parameter_list|(
name|CGEN_INSN
modifier|*
name|insn
parameter_list|)
block|{
name|CGEN_OPCODE
modifier|*
name|opc
init|=
operator|(
name|CGEN_OPCODE
operator|*
operator|)
name|CGEN_INSN_OPCODE
argument_list|(
name|insn
argument_list|)
decl_stmt|;
specifier|const
name|char
modifier|*
name|mnem
init|=
name|CGEN_INSN_MNEMONIC
argument_list|(
name|insn
argument_list|)
decl_stmt|;
name|char
name|rxbuf
index|[
name|CGEN_MAX_RX_ELEMENTS
index|]
decl_stmt|;
name|char
modifier|*
name|rx
init|=
name|rxbuf
decl_stmt|;
specifier|const
name|CGEN_SYNTAX_CHAR_TYPE
modifier|*
name|syn
decl_stmt|;
name|int
name|reg_err
decl_stmt|;
name|syn
operator|=
name|CGEN_SYNTAX_STRING
argument_list|(
name|CGEN_OPCODE_SYNTAX
argument_list|(
name|opc
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Mnemonics come first in the syntax string.  */
if|if
condition|(
operator|!
name|CGEN_SYNTAX_MNEMONIC_P
argument_list|(
operator|*
name|syn
argument_list|)
condition|)
return|return
name|_
argument_list|(
literal|"missing mnemonic in syntax string"
argument_list|)
return|;
operator|++
name|syn
expr_stmt|;
comment|/* Generate a case sensitive regular expression that emulates case      insensitive matching in the "C" locale.  We cannot generate a case      insensitive regular expression because in Turkish locales, 'i' and 'I'      are not equal modulo case conversion.  */
comment|/* Copy the literal mnemonic out of the insn.  */
for|for
control|(
init|;
operator|*
name|mnem
condition|;
name|mnem
operator|++
control|)
block|{
name|char
name|c
init|=
operator|*
name|mnem
decl_stmt|;
if|if
condition|(
name|ISALPHA
argument_list|(
name|c
argument_list|)
condition|)
block|{
operator|*
name|rx
operator|++
operator|=
literal|'['
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
name|TOLOWER
argument_list|(
name|c
argument_list|)
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
name|TOUPPER
argument_list|(
name|c
argument_list|)
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|']'
expr_stmt|;
block|}
else|else
operator|*
name|rx
operator|++
operator|=
name|c
expr_stmt|;
block|}
comment|/* Copy any remaining literals from the syntax string into the rx.  */
for|for
control|(
init|;
operator|*
name|syn
operator|!=
literal|0
operator|&&
name|rx
operator|<=
name|rxbuf
operator|+
operator|(
name|CGEN_MAX_RX_ELEMENTS
operator|-
literal|7
operator|-
literal|4
operator|)
condition|;
operator|++
name|syn
control|)
block|{
if|if
condition|(
name|CGEN_SYNTAX_CHAR_P
argument_list|(
operator|*
name|syn
argument_list|)
condition|)
block|{
name|char
name|c
init|=
name|CGEN_SYNTAX_CHAR
argument_list|(
operator|*
name|syn
argument_list|)
decl_stmt|;
switch|switch
condition|(
name|c
condition|)
block|{
comment|/* Escape any regex metacharacters in the syntax.  */
case|case
literal|'.'
case|:
case|case
literal|'['
case|:
case|case
literal|'\\'
case|:
case|case
literal|'*'
case|:
case|case
literal|'^'
case|:
case|case
literal|'$'
case|:
ifdef|#
directive|ifdef
name|CGEN_ESCAPE_EXTENDED_REGEX
case|case
literal|'?'
case|:
case|case
literal|'{'
case|:
case|case
literal|'}'
case|:
case|case
literal|'('
case|:
case|case
literal|')'
case|:
case|case
literal|'*'
case|:
case|case
literal|'|'
case|:
case|case
literal|'+'
case|:
case|case
literal|']'
case|:
endif|#
directive|endif
operator|*
name|rx
operator|++
operator|=
literal|'\\'
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
name|c
expr_stmt|;
break|break;
default|default:
if|if
condition|(
name|ISALPHA
argument_list|(
name|c
argument_list|)
condition|)
block|{
operator|*
name|rx
operator|++
operator|=
literal|'['
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
name|TOLOWER
argument_list|(
name|c
argument_list|)
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
name|TOUPPER
argument_list|(
name|c
argument_list|)
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|']'
expr_stmt|;
block|}
else|else
operator|*
name|rx
operator|++
operator|=
name|c
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
comment|/* Replace non-syntax fields with globs.  */
operator|*
name|rx
operator|++
operator|=
literal|'.'
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|'*'
expr_stmt|;
block|}
block|}
comment|/* Trailing whitespace ok.  */
operator|*
name|rx
operator|++
operator|=
literal|'['
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|' '
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|'\t'
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|']'
expr_stmt|;
operator|*
name|rx
operator|++
operator|=
literal|'*'
expr_stmt|;
comment|/* But anchor it after that.  */
operator|*
name|rx
operator|++
operator|=
literal|'$'
expr_stmt|;
operator|*
name|rx
operator|=
literal|'\0'
expr_stmt|;
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
operator|=
name|xmalloc
argument_list|(
sizeof|sizeof
argument_list|(
name|regex_t
argument_list|)
argument_list|)
expr_stmt|;
name|reg_err
operator|=
name|regcomp
argument_list|(
operator|(
name|regex_t
operator|*
operator|)
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
argument_list|,
name|rxbuf
argument_list|,
name|REG_NOSUB
argument_list|)
expr_stmt|;
if|if
condition|(
name|reg_err
operator|==
literal|0
condition|)
return|return
name|NULL
return|;
else|else
block|{
specifier|static
name|char
name|msg
index|[
literal|80
index|]
decl_stmt|;
name|regerror
argument_list|(
name|reg_err
argument_list|,
operator|(
name|regex_t
operator|*
operator|)
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
argument_list|,
name|msg
argument_list|,
literal|80
argument_list|)
expr_stmt|;
name|regfree
argument_list|(
operator|(
name|regex_t
operator|*
operator|)
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
argument_list|)
expr_stmt|;
operator|(
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
operator|)
operator|=
name|NULL
expr_stmt|;
return|return
name|msg
return|;
block|}
block|}
end_function

begin_escape
end_escape

begin_comment
comment|/* Default insn parser.     The syntax string is scanned and operands are parsed and stored in FIELDS.    Relocs are queued as we go via other callbacks.     ??? Note that this is currently an all-or-nothing parser.  If we fail to    parse the instruction, we return 0 and the caller will start over from    the beginning.  Backtracking will be necessary in parsing subexpressions,    but that can be handled there.  Not handling backtracking here may get    expensive in the case of the m68k.  Deal with later.     Returns NULL for success, an error message for failure.  */
end_comment

begin_function
specifier|static
specifier|const
name|char
modifier|*
name|parse_insn_normal
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|CGEN_INSN
modifier|*
name|insn
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|strp
parameter_list|,
name|CGEN_FIELDS
modifier|*
name|fields
parameter_list|)
block|{
comment|/* ??? Runtime added insns not handled yet.  */
specifier|const
name|CGEN_SYNTAX
modifier|*
name|syntax
init|=
name|CGEN_INSN_SYNTAX
argument_list|(
name|insn
argument_list|)
decl_stmt|;
specifier|const
name|char
modifier|*
name|str
init|=
operator|*
name|strp
decl_stmt|;
specifier|const
name|char
modifier|*
name|errmsg
decl_stmt|;
specifier|const
name|char
modifier|*
name|p
decl_stmt|;
specifier|const
name|CGEN_SYNTAX_CHAR_TYPE
modifier|*
name|syn
decl_stmt|;
ifdef|#
directive|ifdef
name|CGEN_MNEMONIC_OPERANDS
comment|/* FIXME: wip */
name|int
name|past_opcode_p
decl_stmt|;
endif|#
directive|endif
comment|/* For now we assume the mnemonic is first (there are no leading operands).      We can parse it without needing to set up operand parsing.      GAS's input scrubber will ensure mnemonics are lowercase, but we may      not be called from GAS.  */
name|p
operator|=
name|CGEN_INSN_MNEMONIC
argument_list|(
name|insn
argument_list|)
expr_stmt|;
while|while
condition|(
operator|*
name|p
operator|&&
name|TOLOWER
argument_list|(
operator|*
name|p
argument_list|)
operator|==
name|TOLOWER
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|p
operator|,
operator|++
name|str
expr_stmt|;
if|if
condition|(
operator|*
name|p
condition|)
return|return
name|_
argument_list|(
literal|"unrecognized instruction"
argument_list|)
return|;
ifndef|#
directive|ifndef
name|CGEN_MNEMONIC_OPERANDS
if|if
condition|(
operator|*
name|str
operator|&&
operator|!
name|ISSPACE
argument_list|(
operator|*
name|str
argument_list|)
condition|)
return|return
name|_
argument_list|(
literal|"unrecognized instruction"
argument_list|)
return|;
endif|#
directive|endif
name|CGEN_INIT_PARSE
argument_list|(
name|cd
argument_list|)
expr_stmt|;
name|cgen_init_parse_operand
argument_list|(
name|cd
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|CGEN_MNEMONIC_OPERANDS
name|past_opcode_p
operator|=
literal|0
expr_stmt|;
endif|#
directive|endif
comment|/* We don't check for (*str != '\0') here because we want to parse      any trailing fake arguments in the syntax string.  */
name|syn
operator|=
name|CGEN_SYNTAX_STRING
argument_list|(
name|syntax
argument_list|)
expr_stmt|;
comment|/* Mnemonics come first for now, ensure valid string.  */
if|if
condition|(
operator|!
name|CGEN_SYNTAX_MNEMONIC_P
argument_list|(
operator|*
name|syn
argument_list|)
condition|)
name|abort
argument_list|()
expr_stmt|;
operator|++
name|syn
expr_stmt|;
while|while
condition|(
operator|*
name|syn
operator|!=
literal|0
condition|)
block|{
comment|/* Non operand chars must match exactly.  */
if|if
condition|(
name|CGEN_SYNTAX_CHAR_P
argument_list|(
operator|*
name|syn
argument_list|)
condition|)
block|{
comment|/* FIXME: While we allow for non-GAS callers above, we assume the 	     first char after the mnemonic part is a space.  */
comment|/* FIXME: We also take inappropriate advantage of the fact that 	     GAS's input scrubber will remove extraneous blanks.  */
if|if
condition|(
name|TOLOWER
argument_list|(
operator|*
name|str
argument_list|)
operator|==
name|TOLOWER
argument_list|(
name|CGEN_SYNTAX_CHAR
argument_list|(
operator|*
name|syn
argument_list|)
argument_list|)
condition|)
block|{
ifdef|#
directive|ifdef
name|CGEN_MNEMONIC_OPERANDS
if|if
condition|(
name|CGEN_SYNTAX_CHAR
argument_list|(
operator|*
name|syn
argument_list|)
operator|==
literal|' '
condition|)
name|past_opcode_p
operator|=
literal|1
expr_stmt|;
endif|#
directive|endif
operator|++
name|syn
expr_stmt|;
operator|++
name|str
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|*
name|str
condition|)
block|{
comment|/* Syntax char didn't match.  Can't be this insn.  */
specifier|static
name|char
name|msg
index|[
literal|80
index|]
decl_stmt|;
comment|/* xgettext:c-format */
name|sprintf
argument_list|(
name|msg
argument_list|,
name|_
argument_list|(
literal|"syntax error (expected char `%c', found `%c')"
argument_list|)
argument_list|,
name|CGEN_SYNTAX_CHAR
argument_list|(
operator|*
name|syn
argument_list|)
argument_list|,
operator|*
name|str
argument_list|)
expr_stmt|;
return|return
name|msg
return|;
block|}
else|else
block|{
comment|/* Ran out of input.  */
specifier|static
name|char
name|msg
index|[
literal|80
index|]
decl_stmt|;
comment|/* xgettext:c-format */
name|sprintf
argument_list|(
name|msg
argument_list|,
name|_
argument_list|(
literal|"syntax error (expected char `%c', found end of instruction)"
argument_list|)
argument_list|,
name|CGEN_SYNTAX_CHAR
argument_list|(
operator|*
name|syn
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|msg
return|;
block|}
continue|continue;
block|}
comment|/* We have an operand of some sort.  */
name|errmsg
operator|=
name|cd
operator|->
name|parse_operand
argument_list|(
name|cd
argument_list|,
name|CGEN_SYNTAX_FIELD
argument_list|(
operator|*
name|syn
argument_list|)
argument_list|,
operator|&
name|str
argument_list|,
name|fields
argument_list|)
expr_stmt|;
if|if
condition|(
name|errmsg
condition|)
return|return
name|errmsg
return|;
comment|/* Done with this operand, continue with next one.  */
operator|++
name|syn
expr_stmt|;
block|}
comment|/* If we're at the end of the syntax string, we're done.  */
if|if
condition|(
operator|*
name|syn
operator|==
literal|0
condition|)
block|{
comment|/* FIXME: For the moment we assume a valid `str' can only contain 	 blanks now.  IE: We needn't try again with a longer version of 	 the insn and it is assumed that longer versions of insns appear 	 before shorter ones (eg: lsr r2,r3,1 vs lsr r2,r3).  */
while|while
condition|(
name|ISSPACE
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
expr_stmt|;
if|if
condition|(
operator|*
name|str
operator|!=
literal|'\0'
condition|)
return|return
name|_
argument_list|(
literal|"junk at end of line"
argument_list|)
return|;
comment|/* FIXME: would like to include `str' */
return|return
name|NULL
return|;
block|}
comment|/* We couldn't parse it.  */
return|return
name|_
argument_list|(
literal|"unrecognized instruction"
argument_list|)
return|;
block|}
end_function

begin_escape
end_escape

begin_comment
comment|/* Main entry point.    This routine is called for each instruction to be assembled.    STR points to the insn to be assembled.    We assume all necessary tables have been initialized.    The assembled instruction, less any fixups, is stored in BUF.    Remember that if CGEN_INT_INSN_P then BUF is an int and thus the value    still needs to be converted to target byte order, otherwise BUF is an array    of bytes in target byte order.    The result is a pointer to the insn's entry in the opcode table,    or NULL if an error occured (an error message will have already been    printed).     Note that when processing (non-alias) macro-insns,    this function recurses.     ??? It's possible to make this cpu-independent.    One would have to deal with a few minor things.    At this point in time doing so would be more of a curiosity than useful    [for example this file isn't _that_ big], but keeping the possibility in    mind helps keep the design clean.  */
end_comment

begin_function
specifier|const
name|CGEN_INSN
modifier|*
name|m32c_cgen_assemble_insn
parameter_list|(
name|CGEN_CPU_DESC
name|cd
parameter_list|,
specifier|const
name|char
modifier|*
name|str
parameter_list|,
name|CGEN_FIELDS
modifier|*
name|fields
parameter_list|,
name|CGEN_INSN_BYTES_PTR
name|buf
parameter_list|,
name|char
modifier|*
modifier|*
name|errmsg
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|start
decl_stmt|;
name|CGEN_INSN_LIST
modifier|*
name|ilist
decl_stmt|;
specifier|const
name|char
modifier|*
name|parse_errmsg
init|=
name|NULL
decl_stmt|;
specifier|const
name|char
modifier|*
name|insert_errmsg
init|=
name|NULL
decl_stmt|;
name|int
name|recognized_mnemonic
init|=
literal|0
decl_stmt|;
comment|/* Skip leading white space.  */
while|while
condition|(
name|ISSPACE
argument_list|(
operator|*
name|str
argument_list|)
condition|)
operator|++
name|str
expr_stmt|;
comment|/* The instructions are stored in hashed lists.      Get the first in the list.  */
name|ilist
operator|=
name|CGEN_ASM_LOOKUP_INSN
argument_list|(
name|cd
argument_list|,
name|str
argument_list|)
expr_stmt|;
comment|/* Keep looking until we find a match.  */
name|start
operator|=
name|str
expr_stmt|;
for|for
control|(
init|;
name|ilist
operator|!=
name|NULL
condition|;
name|ilist
operator|=
name|CGEN_ASM_NEXT_INSN
argument_list|(
name|ilist
argument_list|)
control|)
block|{
specifier|const
name|CGEN_INSN
modifier|*
name|insn
init|=
name|ilist
operator|->
name|insn
decl_stmt|;
name|recognized_mnemonic
operator|=
literal|1
expr_stmt|;
ifdef|#
directive|ifdef
name|CGEN_VALIDATE_INSN_SUPPORTED
comment|/* Not usually needed as unsupported opcodes 	 shouldn't be in the hash lists.  */
comment|/* Is this insn supported by the selected cpu?  */
if|if
condition|(
operator|!
name|m32c_cgen_insn_supported
argument_list|(
name|cd
argument_list|,
name|insn
argument_list|)
condition|)
continue|continue;
endif|#
directive|endif
comment|/* If the RELAXED attribute is set, this is an insn that shouldn't be 	 chosen immediately.  Instead, it is used during assembler/linker 	 relaxation if possible.  */
if|if
condition|(
name|CGEN_INSN_ATTR_VALUE
argument_list|(
name|insn
argument_list|,
name|CGEN_INSN_RELAXED
argument_list|)
operator|!=
literal|0
condition|)
continue|continue;
name|str
operator|=
name|start
expr_stmt|;
comment|/* Skip this insn if str doesn't look right lexically.  */
if|if
condition|(
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
operator|!=
name|NULL
operator|&&
name|regexec
argument_list|(
operator|(
name|regex_t
operator|*
operator|)
name|CGEN_INSN_RX
argument_list|(
name|insn
argument_list|)
argument_list|,
name|str
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
literal|0
argument_list|)
operator|==
name|REG_NOMATCH
condition|)
continue|continue;
comment|/* Allow parse/insert handlers to obtain length of insn.  */
name|CGEN_FIELDS_BITSIZE
argument_list|(
name|fields
argument_list|)
operator|=
name|CGEN_INSN_BITSIZE
argument_list|(
name|insn
argument_list|)
expr_stmt|;
name|parse_errmsg
operator|=
name|CGEN_PARSE_FN
argument_list|(
name|cd
argument_list|,
name|insn
argument_list|)
argument_list|(
name|cd
argument_list|,
name|insn
argument_list|,
operator|&
name|str
argument_list|,
name|fields
argument_list|)
expr_stmt|;
if|if
condition|(
name|parse_errmsg
operator|!=
name|NULL
condition|)
continue|continue;
comment|/* ??? 0 is passed for `pc'.  */
name|insert_errmsg
operator|=
name|CGEN_INSERT_FN
argument_list|(
name|cd
argument_list|,
name|insn
argument_list|)
argument_list|(
name|cd
argument_list|,
name|insn
argument_list|,
name|fields
argument_list|,
name|buf
argument_list|,
operator|(
name|bfd_vma
operator|)
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|insert_errmsg
operator|!=
name|NULL
condition|)
continue|continue;
comment|/* It is up to the caller to actually output the insn and any          queued relocs.  */
return|return
name|insn
return|;
block|}
block|{
specifier|static
name|char
name|errbuf
index|[
literal|150
index|]
decl_stmt|;
ifdef|#
directive|ifdef
name|CGEN_VERBOSE_ASSEMBLER_ERRORS
specifier|const
name|char
modifier|*
name|tmp_errmsg
decl_stmt|;
comment|/* If requesting verbose error messages, use insert_errmsg.        Failing that, use parse_errmsg.  */
name|tmp_errmsg
operator|=
operator|(
name|insert_errmsg
condition|?
name|insert_errmsg
else|:
name|parse_errmsg
condition|?
name|parse_errmsg
else|:
name|recognized_mnemonic
condition|?
name|_
argument_list|(
literal|"unrecognized form of instruction"
argument_list|)
else|:
name|_
argument_list|(
literal|"unrecognized instruction"
argument_list|)
operator|)
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|start
argument_list|)
operator|>
literal|50
condition|)
comment|/* xgettext:c-format */
name|sprintf
argument_list|(
name|errbuf
argument_list|,
literal|"%s `%.50s...'"
argument_list|,
name|tmp_errmsg
argument_list|,
name|start
argument_list|)
expr_stmt|;
else|else
comment|/* xgettext:c-format */
name|sprintf
argument_list|(
name|errbuf
argument_list|,
literal|"%s `%.50s'"
argument_list|,
name|tmp_errmsg
argument_list|,
name|start
argument_list|)
expr_stmt|;
else|#
directive|else
if|if
condition|(
name|strlen
argument_list|(
name|start
argument_list|)
operator|>
literal|50
condition|)
comment|/* xgettext:c-format */
name|sprintf
argument_list|(
name|errbuf
argument_list|,
name|_
argument_list|(
literal|"bad instruction `%.50s...'"
argument_list|)
argument_list|,
name|start
argument_list|)
expr_stmt|;
else|else
comment|/* xgettext:c-format */
name|sprintf
argument_list|(
name|errbuf
argument_list|,
name|_
argument_list|(
literal|"bad instruction `%.50s'"
argument_list|)
argument_list|,
name|start
argument_list|)
expr_stmt|;
endif|#
directive|endif
operator|*
name|errmsg
operator|=
name|errbuf
expr_stmt|;
return|return
name|NULL
return|;
block|}
block|}
end_function

end_unit

