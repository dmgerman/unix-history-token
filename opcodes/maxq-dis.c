begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Instruction printing code for the MAXQ     Copyright 2004, 2005 Free Software Foundation, Inc.     Written by Vineet Sharma(vineets@noida.hcltech.com) Inderpreet    S.(inderpreetb@noida.hcltech.com)     This file is part of GDB.     This program is free software; you can redistribute it and/or modify it    under the terms of the GNU General Public License as published by the Free     Software Foundation; either version 2 of the License, or (at your option)    any later version.     This program is distributed in the hope that it will be useful, but    WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY     or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License    for more details.     You should have received a copy of the GNU General Public License along    with this program; if not, write to the Free Software Foundation, Inc.,     51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.  */
end_comment

begin_include
include|#
directive|include
file|"sysdep.h"
end_include

begin_include
include|#
directive|include
file|"dis-asm.h"
end_include

begin_include
include|#
directive|include
file|"opcode/maxq.h"
end_include

begin_struct
struct|struct
name|_group_info
block|{
name|unsigned
name|char
name|group_no
decl_stmt|;
name|unsigned
name|char
name|sub_opcode
decl_stmt|;
name|unsigned
name|char
name|src
decl_stmt|;
name|unsigned
name|char
name|dst
decl_stmt|;
name|unsigned
name|char
name|fbit
decl_stmt|;
name|unsigned
name|char
name|bit_no
decl_stmt|;
name|unsigned
name|char
name|flag
decl_stmt|;
block|}
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|_group_info
name|group_info
typedef|;
end_typedef

begin_define
define|#
directive|define
name|SRC
value|0x01
end_define

begin_define
define|#
directive|define
name|DST
value|0x02
end_define

begin_define
define|#
directive|define
name|FORMAT
value|0x04
end_define

begin_define
define|#
directive|define
name|BIT_NO
value|0x08
end_define

begin_define
define|#
directive|define
name|SUB_OP
value|0x10
end_define

begin_define
define|#
directive|define
name|MASK_LOW_BYTE
value|0x0f
end_define

begin_define
define|#
directive|define
name|MASK_HIGH_BYTE
value|0xf0
end_define

begin_comment
comment|/* Flags for retrieving the bits from the op-code.  */
end_comment

begin_define
define|#
directive|define
name|_DECODE_LOWNIB_LOWBYTE
value|0x000f
end_define

begin_define
define|#
directive|define
name|_DECODE_HIGHNIB_LOWBYTE
value|0x00f0
end_define

begin_define
define|#
directive|define
name|_DECODE_LOWNIB_HIGHBYTE
value|0x0f00
end_define

begin_define
define|#
directive|define
name|_DECODE_HIGHNIB_HIGHBYTE
value|0xf000
end_define

begin_define
define|#
directive|define
name|_DECODE_HIGHBYTE
value|0xff00
end_define

begin_define
define|#
directive|define
name|_DECODE_LOWBYTE
value|0x00ff
end_define

begin_define
define|#
directive|define
name|_DECODE_4TO6_HIGHBYTE
value|0x7000
end_define

begin_define
define|#
directive|define
name|_DECODE_4TO6_LOWBYTE
value|0x0070
end_define

begin_define
define|#
directive|define
name|_DECODE_0TO6_HIGHBYTE
value|0x7f00
end_define

begin_define
define|#
directive|define
name|_DECODE_0TO2_HIGHBYTE
value|0x0700
end_define

begin_define
define|#
directive|define
name|_DECODE_GET_F_HIGHBYTE
value|0x8000
end_define

begin_define
define|#
directive|define
name|_DECODE_BIT7_HIGHBYTE
value|0x8000
end_define

begin_define
define|#
directive|define
name|_DECODE_BIT7_LOWBYTE
value|0x0080
end_define

begin_define
define|#
directive|define
name|_DECODE_GET_CARRY
value|0x10000
end_define

begin_define
define|#
directive|define
name|_DECODE_BIT0_LOWBYTE
value|0x1
end_define

begin_define
define|#
directive|define
name|_DECODE_BIT6AND7_HIGHBYTE
value|0xc000
end_define

begin_comment
comment|/* Module and Register Indexed of System Registers.  */
end_comment

begin_define
define|#
directive|define
name|_CURR_ACC_MODINDEX
value|0xa
end_define

begin_define
define|#
directive|define
name|_CURR_ACC_REGINDEX
value|0x0
end_define

begin_define
define|#
directive|define
name|_PSF_REG_MODINDEX
value|0x8
end_define

begin_define
define|#
directive|define
name|_PSF_REG_REGINDEX
value|0x4
end_define

begin_define
define|#
directive|define
name|_PFX_REG_MODINDEX
value|0xb
end_define

begin_define
define|#
directive|define
name|_PFX0_REG_REGINDEX
value|0x0
end_define

begin_define
define|#
directive|define
name|_PFX2_REG_REGINDEX
value|0x2
end_define

begin_define
define|#
directive|define
name|_DP_REG_MODINDEX
value|0xf
end_define

begin_define
define|#
directive|define
name|_DP0_REG_REGINDEX
value|0x3
end_define

begin_define
define|#
directive|define
name|_DP1_REG_REGINDEX
value|0x7
end_define

begin_define
define|#
directive|define
name|_IP_REG_MODINDEX
value|0xc
end_define

begin_define
define|#
directive|define
name|_IP_REG_REGINDEX
value|0x0
end_define

begin_define
define|#
directive|define
name|_IIR_REG_MODINDEX
value|0x8
end_define

begin_define
define|#
directive|define
name|_IIR_REG_REGINDEX
value|0xb
end_define

begin_define
define|#
directive|define
name|_SP_REG_MODINDEX
value|0xd
end_define

begin_define
define|#
directive|define
name|_SP_REG_REGINDEX
value|0x1
end_define

begin_define
define|#
directive|define
name|_IC_REG_MODINDEX
value|0x8
end_define

begin_define
define|#
directive|define
name|_IC_REG_REGINDEX
value|0x5
end_define

begin_define
define|#
directive|define
name|_LC_REG_MODINDEX
value|0xe
end_define

begin_define
define|#
directive|define
name|_LC0_REG_REGINDEX
value|0x0
end_define

begin_define
define|#
directive|define
name|_LC1_REG_REGINDEX
value|0x1
end_define

begin_define
define|#
directive|define
name|_LC2_REG_REGINDEX
value|0x2
end_define

begin_define
define|#
directive|define
name|_LC3_REG_REGINDEX
value|0x3
end_define

begin_comment
comment|/* Flags for finding the bits in PSF Register.  */
end_comment

begin_define
define|#
directive|define
name|SIM_ALU_DECODE_CARRY_BIT_POS
value|0x2
end_define

begin_define
define|#
directive|define
name|SIM_ALU_DECODE_SIGN_BIT_POS
value|0x40
end_define

begin_define
define|#
directive|define
name|SIM_ALU_DECODE_ZERO_BIT_POS
value|0x80
end_define

begin_define
define|#
directive|define
name|SIM_ALU_DECODE_EQUAL_BIT_POS
value|0x1
end_define

begin_define
define|#
directive|define
name|SIM_ALU_DECODE_IGE_BIT_POS
value|0x1
end_define

begin_comment
comment|/* Number Of Op-code Groups.  */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_OPCODE_GROUPS
init|=
literal|11
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Op-code Groups.  */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_LOGICAL_XCHG_OP_GROUP
init|=
literal|1
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Group1: AND/OR/XOR/ADD/SUB Operations: fxxx 1010 ssss ssss.  */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_AND_OR_ADD_SUB_OP_GROUP
init|=
literal|2
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Group2: Logical Operations: 1000 1010 xxxx 1010.  */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_BIT_OP_GROUP
init|=
literal|3
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* XCHG/Bit Operations: 1xxx 1010 xxxx 1010.  */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_SET_DEST_BIT_GROUP
init|=
literal|4
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Move value in bit of destination register: 1ddd dddd xbbb 0111.  */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_JUMP_OP_GROUP
init|=
literal|5
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|JUMP_CHECK
parameter_list|(
name|insn
parameter_list|)
define|\
value|(   ((insn& _DECODE_4TO6_HIGHBYTE) == 0x0000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x2000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x6000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x1000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x5000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x3000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x7000) \     || ((insn& _DECODE_4TO6_HIGHBYTE) == 0x4000) )
end_define

begin_comment
comment|/* JUMP operations: fxxx 1100 ssss ssss */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_RET_OP_GROUP
init|=
literal|6
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* RET Operations: 1xxx 1100 0000 1101 */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_MOVE_SRC_DST_GROUP
init|=
literal|7
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Move src into dest register: fddd dddd ssss ssss */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_SET_SRC_BIT_GROUP
init|=
literal|8
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Move value in bit of source register: fbbb 0111 ssss ssss */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_DJNZ_CALL_PUSH_OP_GROUP
init|=
literal|9
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* PUSH, DJNZ and CALL operations: fxxx 1101 ssss ssss */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_POP_OP_GROUP
init|=
literal|10
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* POP operation: 1ddd dddd 0000 1101 */
end_comment

begin_decl_stmt
name|unsigned
name|char
specifier|const
name|SIM_ALU_DECODE_CMP_SRC_OP_GROUP
init|=
literal|11
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* GLOBAL */
end_comment

begin_decl_stmt
name|char
name|unres_reg_name
index|[
literal|20
index|]
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|char
modifier|*
name|get_reg_name
parameter_list|(
name|unsigned
name|char
name|reg_code
parameter_list|,
name|type1
name|arg_pos
parameter_list|)
block|{
name|unsigned
name|char
name|module
decl_stmt|;
name|unsigned
name|char
name|index
decl_stmt|;
name|int
name|ix
init|=
literal|0
decl_stmt|;
name|reg_entry
specifier|const
modifier|*
name|reg_x
decl_stmt|;
name|mem_access_syntax
specifier|const
modifier|*
name|syntax
decl_stmt|;
name|mem_access
modifier|*
name|mem_acc
decl_stmt|;
name|module
operator|=
literal|0
expr_stmt|;
name|index
operator|=
literal|0
expr_stmt|;
name|module
operator|=
operator|(
name|reg_code
operator|&
name|MASK_LOW_BYTE
operator|)
expr_stmt|;
name|index
operator|=
operator|(
name|reg_code
operator|&
name|MASK_HIGH_BYTE
operator|)
expr_stmt|;
name|index
operator|=
name|index
operator|>>
literal|4
expr_stmt|;
comment|/* Search the system register table.  */
for|for
control|(
name|reg_x
operator|=
operator|&
name|system_reg_table
index|[
literal|0
index|]
init|;
name|reg_x
operator|->
name|reg_name
operator|!=
name|NULL
condition|;
operator|++
name|reg_x
control|)
if|if
condition|(
operator|(
name|reg_x
operator|->
name|Mod_name
operator|==
name|module
operator|)
operator|&&
operator|(
name|reg_x
operator|->
name|Mod_index
operator|==
name|index
operator|)
condition|)
return|return
name|reg_x
operator|->
name|reg_name
return|;
comment|/* Serch pheripheral table.  */
for|for
control|(
name|ix
operator|=
literal|0
init|;
name|ix
operator|<
name|num_of_reg
condition|;
name|ix
operator|++
control|)
block|{
name|reg_x
operator|=
operator|&
name|new_reg_table
index|[
name|ix
index|]
expr_stmt|;
if|if
condition|(
operator|(
name|reg_x
operator|->
name|Mod_name
operator|==
name|module
operator|)
operator|&&
operator|(
name|reg_x
operator|->
name|Mod_index
operator|==
name|index
operator|)
condition|)
return|return
name|reg_x
operator|->
name|reg_name
return|;
block|}
for|for
control|(
name|mem_acc
operator|=
operator|&
name|mem_table
index|[
literal|0
index|]
init|;
name|mem_acc
operator|->
name|name
operator|!=
name|NULL
operator|||
operator|!
name|mem_acc
condition|;
operator|++
name|mem_acc
control|)
block|{
if|if
condition|(
name|reg_code
operator|==
name|mem_acc
operator|->
name|opcode
condition|)
block|{
for|for
control|(
name|syntax
operator|=
name|mem_access_syntax_table
init|;
name|mem_access_syntax_table
operator|!=
name|NULL
operator|||
name|mem_access_syntax_table
operator|->
name|name
condition|;
operator|++
name|syntax
control|)
if|if
condition|(
operator|!
name|strcmp
argument_list|(
name|mem_acc
operator|->
name|name
argument_list|,
name|syntax
operator|->
name|name
argument_list|)
condition|)
block|{
if|if
condition|(
operator|(
name|arg_pos
operator|==
name|syntax
operator|->
name|type
operator|)
operator|||
operator|(
name|syntax
operator|->
name|type
operator|==
name|BOTH
operator|)
condition|)
return|return
name|mem_acc
operator|->
name|name
return|;
break|break;
block|}
block|}
block|}
name|memset
argument_list|(
name|unres_reg_name
argument_list|,
literal|0
argument_list|,
literal|20
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|unres_reg_name
argument_list|,
literal|"%01x%01xh"
argument_list|,
name|index
argument_list|,
name|module
argument_list|)
expr_stmt|;
return|return
name|unres_reg_name
return|;
block|}
end_function

begin_function
specifier|static
name|bfd_boolean
name|check_move
parameter_list|(
name|unsigned
name|char
name|insn0
parameter_list|,
name|unsigned
name|char
name|insn8
parameter_list|)
block|{
name|bfd_boolean
name|first
init|=
name|FALSE
decl_stmt|;
name|bfd_boolean
name|second
init|=
name|FALSE
decl_stmt|;
name|char
modifier|*
name|first_reg
decl_stmt|;
name|char
modifier|*
name|second_reg
decl_stmt|;
name|reg_entry
specifier|const
modifier|*
name|reg_x
decl_stmt|;
specifier|const
name|unsigned
name|char
name|module1
init|=
name|insn0
operator|&
name|MASK_LOW_BYTE
decl_stmt|;
specifier|const
name|unsigned
name|char
name|index1
init|=
operator|(
operator|(
name|insn0
operator|&
literal|0x70
operator|)
operator|>>
literal|4
operator|)
decl_stmt|;
specifier|const
name|unsigned
name|char
name|module2
init|=
name|insn8
operator|&
name|MASK_LOW_BYTE
decl_stmt|;
specifier|const
name|unsigned
name|char
name|index2
init|=
operator|(
operator|(
name|insn8
operator|&
name|MASK_HIGH_BYTE
operator|)
operator|>>
literal|4
operator|)
decl_stmt|;
comment|/* DST */
if|if
condition|(
operator|(
operator|(
name|insn0
operator|&
name|MASK_LOW_BYTE
operator|)
operator|==
name|MASK_LOW_BYTE
operator|)
operator|&&
operator|(
operator|(
name|index1
operator|==
literal|0
operator|)
operator|||
operator|(
name|index1
operator|==
literal|1
operator|)
operator|||
operator|(
name|index1
operator|==
literal|2
operator|)
operator|||
operator|(
name|index1
operator|==
literal|5
operator|)
operator|||
operator|(
name|index1
operator|==
literal|4
operator|)
operator|||
operator|(
name|index1
operator|==
literal|6
operator|)
operator|)
condition|)
name|first
operator|=
name|TRUE
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
operator|(
name|insn0
operator|&
name|MASK_LOW_BYTE
operator|)
operator|==
literal|0x0D
operator|)
operator|&&
operator|(
name|index1
operator|==
literal|0
operator|)
condition|)
name|first
operator|=
name|TRUE
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|module1
operator|==
literal|0x0E
operator|)
operator|&&
operator|(
operator|(
name|index1
operator|==
literal|0
operator|)
operator|||
operator|(
name|index1
operator|==
literal|1
operator|)
operator|||
operator|(
name|index1
operator|==
literal|2
operator|)
operator|)
condition|)
name|first
operator|=
name|TRUE
expr_stmt|;
else|else
block|{
for|for
control|(
name|reg_x
operator|=
operator|&
name|system_reg_table
index|[
literal|0
index|]
init|;
name|reg_x
operator|->
name|reg_name
operator|!=
name|NULL
operator|&&
name|reg_x
condition|;
operator|++
name|reg_x
control|)
block|{
if|if
condition|(
operator|(
name|reg_x
operator|->
name|Mod_name
operator|==
name|module1
operator|)
operator|&&
operator|(
name|reg_x
operator|->
name|Mod_index
operator|==
name|index1
operator|)
operator|&&
operator|(
operator|(
name|reg_x
operator|->
name|rtype
operator|==
name|Reg_16W
operator|)
operator|||
operator|(
name|reg_x
operator|->
name|rtype
operator|==
name|Reg_8W
operator|)
operator|)
condition|)
block|{
comment|/* IP not allowed.  */
if|if
condition|(
operator|(
name|reg_x
operator|->
name|Mod_name
operator|==
literal|0x0C
operator|)
operator|&&
operator|(
name|reg_x
operator|->
name|Mod_index
operator|==
literal|0x00
operator|)
condition|)
continue|continue;
comment|/* A[AP] not allowed.  */
if|if
condition|(
operator|(
name|reg_x
operator|->
name|Mod_name
operator|==
literal|0x0A
operator|)
operator|&&
operator|(
name|reg_x
operator|->
name|Mod_index
operator|==
literal|0x01
operator|)
condition|)
continue|continue;
name|first_reg
operator|=
name|reg_x
operator|->
name|reg_name
expr_stmt|;
name|first
operator|=
name|TRUE
expr_stmt|;
break|break;
block|}
block|}
block|}
if|if
condition|(
operator|!
name|first
condition|)
comment|/* No need to check further.  */
return|return
name|FALSE
return|;
if|if
condition|(
name|insn0
operator|&
literal|0x80
condition|)
block|{
comment|/* SRC */
if|if
condition|(
operator|(
operator|(
name|insn8
operator|&
name|MASK_LOW_BYTE
operator|)
operator|==
name|MASK_LOW_BYTE
operator|)
operator|&&
operator|(
operator|(
name|index2
operator|==
literal|0
operator|)
operator|||
operator|(
name|index2
operator|==
literal|1
operator|)
operator|||
operator|(
name|index2
operator|==
literal|2
operator|)
operator|||
operator|(
name|index2
operator|==
literal|4
operator|)
operator|||
operator|(
name|index2
operator|==
literal|5
operator|)
operator|||
operator|(
name|index2
operator|==
literal|6
operator|)
operator|)
condition|)
name|second
operator|=
name|TRUE
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
operator|(
name|insn8
operator|&
name|MASK_LOW_BYTE
operator|)
operator|==
literal|0x0D
operator|)
operator|&&
operator|(
name|index2
operator|==
literal|0
operator|)
condition|)
name|second
operator|=
name|TRUE
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|module2
operator|==
literal|0x0E
operator|)
operator|&&
operator|(
operator|(
name|index2
operator|==
literal|0
operator|)
operator|||
operator|(
name|index2
operator|==
literal|1
operator|)
operator|||
operator|(
name|index2
operator|==
literal|2
operator|)
operator|)
condition|)
name|second
operator|=
name|TRUE
expr_stmt|;
else|else
block|{
for|for
control|(
name|reg_x
operator|=
operator|&
name|system_reg_table
index|[
literal|0
index|]
init|;
name|reg_x
operator|->
name|reg_name
operator|!=
name|NULL
operator|&&
name|reg_x
condition|;
operator|++
name|reg_x
control|)
block|{
if|if
condition|(
operator|(
name|reg_x
operator|->
name|Mod_name
operator|==
operator|(
name|insn8
operator|&
name|MASK_LOW_BYTE
operator|)
operator|)
operator|&&
operator|(
name|reg_x
operator|->
name|Mod_index
operator|==
operator|(
operator|(
operator|(
name|insn8
operator|&
literal|0xf0
operator|)
operator|>>
literal|4
operator|)
operator|)
operator|)
condition|)
block|{
name|second
operator|=
name|TRUE
expr_stmt|;
name|second_reg
operator|=
name|reg_x
operator|->
name|reg_name
expr_stmt|;
break|break;
block|}
block|}
block|}
if|if
condition|(
name|second
condition|)
block|{
if|if
condition|(
operator|(
name|module1
operator|==
literal|0x0A
operator|&&
name|index1
operator|==
literal|0x0
operator|)
operator|&&
operator|(
name|module2
operator|==
literal|0x0A
operator|&&
name|index2
operator|==
literal|0x01
operator|)
condition|)
return|return
name|FALSE
return|;
return|return
name|TRUE
return|;
block|}
return|return
name|FALSE
return|;
block|}
return|return
name|first
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|maxq_print_arg
parameter_list|(
name|MAX_ARG_TYPE
name|arg
parameter_list|,
name|struct
name|disassemble_info
modifier|*
name|info
parameter_list|,
name|group_info
name|grp
parameter_list|)
block|{
switch|switch
condition|(
name|arg
condition|)
block|{
case|case
name|FLAG_C
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"C"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLAG_NC
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"NC"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLAG_Z
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"Z"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLAG_NZ
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"NZ"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLAG_S
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"S"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLAG_E
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"E"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLAG_NE
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"NE"
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACC_BIT
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"Acc"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|BIT_NO
operator|)
operator|==
name|BIT_NO
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|".%d"
argument_list|,
name|grp
operator|.
name|bit_no
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_BIT_0
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"#0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_BIT_1
case|:
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"#1"
argument_list|)
expr_stmt|;
break|break;
default|default:
break|break;
block|}
block|}
end_function

begin_function
specifier|static
name|unsigned
name|char
name|get_group
parameter_list|(
specifier|const
name|unsigned
name|int
name|insn
parameter_list|)
block|{
if|if
condition|(
name|check_move
argument_list|(
operator|(
name|insn
operator|>>
literal|8
operator|)
argument_list|,
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
argument_list|)
condition|)
return|return
literal|8
return|;
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_LOWNIB_HIGHBYTE
operator|)
operator|==
literal|0x0A00
condition|)
block|{
comment|/*&& condition with sec part added on 26 May for resolving 2& 3 grp 	 conflict.  */
if|if
condition|(
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWNIB_LOWBYTE
operator|)
operator|==
literal|0x000A
operator|)
operator|&&
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|==
literal|0x8000
operator|)
condition|)
block|{
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_HIGHNIB_HIGHBYTE
operator|)
operator|==
literal|0x8000
condition|)
return|return
literal|2
return|;
else|else
return|return
literal|3
return|;
block|}
return|return
literal|1
return|;
block|}
elseif|else
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_LOWNIB_HIGHBYTE
operator|)
operator|==
literal|0x0C00
condition|)
block|{
if|if
condition|(
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|==
literal|0x000D
operator|)
operator|&&
name|JUMP_CHECK
argument_list|(
name|insn
argument_list|)
operator|&&
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|==
literal|0x8000
operator|)
condition|)
return|return
literal|6
return|;
elseif|else
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|==
literal|0x008D
condition|)
return|return
literal|7
return|;
return|return
literal|5
return|;
block|}
elseif|else
if|if
condition|(
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWNIB_HIGHBYTE
operator|)
operator|==
literal|0x0D00
operator|)
operator|&&
operator|(
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|==
literal|0x3000
operator|)
operator|||
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|==
literal|0x4000
operator|)
operator|||
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|==
literal|0x5000
operator|)
operator|||
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|==
literal|0x0000
operator|)
operator|)
condition|)
return|return
literal|10
return|;
elseif|else
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|==
literal|0x000D
condition|)
return|return
literal|11
return|;
elseif|else
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|==
literal|0x008D
condition|)
return|return
literal|12
return|;
elseif|else
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_0TO6_HIGHBYTE
operator|)
operator|==
literal|0x7800
condition|)
return|return
literal|13
return|;
elseif|else
if|if
condition|(
operator|(
name|insn
operator|&
name|_DECODE_LOWNIB_HIGHBYTE
operator|)
operator|==
literal|0x0700
condition|)
return|return
literal|9
return|;
elseif|else
if|if
condition|(
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWNIB_LOWBYTE
operator|)
operator|==
literal|0x0007
operator|)
operator|&&
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|==
literal|0x8000
operator|)
condition|)
return|return
literal|4
return|;
return|return
literal|8
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|get_insn_opcode
parameter_list|(
specifier|const
name|unsigned
name|int
name|insn
parameter_list|,
name|group_info
modifier|*
name|i
parameter_list|)
block|{
specifier|static
name|unsigned
name|char
name|pfx_flag
init|=
literal|0
decl_stmt|;
specifier|static
name|unsigned
name|char
name|count_for_pfx
init|=
literal|0
decl_stmt|;
name|i
operator|->
name|flag
operator|^=
name|i
operator|->
name|flag
expr_stmt|;
name|i
operator|->
name|bit_no
operator|^=
name|i
operator|->
name|bit_no
expr_stmt|;
name|i
operator|->
name|dst
operator|^=
name|i
operator|->
name|dst
expr_stmt|;
name|i
operator|->
name|fbit
operator|^=
name|i
operator|->
name|fbit
expr_stmt|;
name|i
operator|->
name|group_no
operator|^=
name|i
operator|->
name|group_no
expr_stmt|;
name|i
operator|->
name|src
operator|^=
name|i
operator|->
name|src
expr_stmt|;
name|i
operator|->
name|sub_opcode
operator|^=
name|i
operator|->
name|sub_opcode
expr_stmt|;
if|if
condition|(
name|count_for_pfx
operator|>
literal|0
condition|)
name|count_for_pfx
operator|++
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|insn
operator|>>
literal|8
operator|)
operator|==
literal|0x0b
operator|)
operator|||
operator|(
operator|(
name|insn
operator|>>
literal|8
operator|)
operator|==
literal|0x2b
operator|)
condition|)
block|{
name|pfx_flag
operator|=
literal|1
expr_stmt|;
name|count_for_pfx
operator|=
literal|1
expr_stmt|;
block|}
name|i
operator|->
name|group_no
operator|=
name|get_group
argument_list|(
name|insn
argument_list|)
expr_stmt|;
if|if
condition|(
name|pfx_flag
operator|&&
operator|(
name|i
operator|->
name|group_no
operator|==
literal|0x0D
operator|)
operator|&&
operator|(
name|count_for_pfx
operator|==
literal|2
operator|)
operator|&&
operator|(
operator|(
name|insn
operator|&
name|_DECODE_0TO6_HIGHBYTE
operator|)
operator|==
literal|0x7800
operator|)
condition|)
block|{
name|i
operator|->
name|group_no
operator|=
literal|0x08
expr_stmt|;
name|count_for_pfx
operator|=
literal|0
expr_stmt|;
name|pfx_flag
operator|^=
name|pfx_flag
expr_stmt|;
block|}
switch|switch
condition|(
name|i
operator|->
name|group_no
condition|)
block|{
case|case
literal|1
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|src
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SRC
expr_stmt|;
name|i
operator|->
name|fbit
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|>>
literal|15
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|FORMAT
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_HIGHNIB_LOWBYTE
operator|)
operator|>>
literal|4
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_HIGHNIB_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|bit_no
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_HIGHNIB_LOWBYTE
operator|)
operator|>>
literal|4
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|BIT_NO
expr_stmt|;
break|break;
case|case
literal|4
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_BIT7_LOWBYTE
operator|)
operator|>>
literal|7
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|dst
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_0TO6_HIGHBYTE
operator|)
operator|>>
literal|8
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|DST
expr_stmt|;
name|i
operator|->
name|bit_no
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_LOWBYTE
operator|)
operator|>>
literal|4
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|BIT_NO
expr_stmt|;
break|break;
case|case
literal|5
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|src
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SRC
expr_stmt|;
name|i
operator|->
name|fbit
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|>>
literal|15
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|FORMAT
expr_stmt|;
break|break;
case|case
literal|6
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_HIGHNIB_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
break|break;
case|case
literal|7
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_HIGHNIB_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
break|break;
case|case
literal|8
case|:
name|i
operator|->
name|dst
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_0TO6_HIGHBYTE
operator|)
operator|>>
literal|8
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|DST
expr_stmt|;
name|i
operator|->
name|src
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SRC
expr_stmt|;
name|i
operator|->
name|fbit
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|>>
literal|15
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|FORMAT
expr_stmt|;
break|break;
case|case
literal|9
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_0TO2_HIGHBYTE
operator|)
operator|>>
literal|8
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|bit_no
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|BIT_NO
expr_stmt|;
name|i
operator|->
name|fbit
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|>>
literal|15
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|FORMAT
expr_stmt|;
name|i
operator|->
name|src
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SRC
expr_stmt|;
break|break;
case|case
literal|10
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|src
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SRC
expr_stmt|;
name|i
operator|->
name|fbit
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|>>
literal|15
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|FORMAT
expr_stmt|;
break|break;
case|case
literal|11
case|:
name|i
operator|->
name|dst
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_0TO6_HIGHBYTE
operator|)
operator|>>
literal|8
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|DST
expr_stmt|;
break|break;
case|case
literal|12
case|:
name|i
operator|->
name|dst
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_0TO6_HIGHBYTE
operator|)
operator|>>
literal|8
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|DST
expr_stmt|;
break|break;
case|case
literal|13
case|:
name|i
operator|->
name|sub_opcode
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_4TO6_HIGHBYTE
operator|)
operator|>>
literal|12
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SUB_OP
expr_stmt|;
name|i
operator|->
name|src
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_LOWBYTE
operator|)
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|SRC
expr_stmt|;
name|i
operator|->
name|fbit
operator|=
operator|(
operator|(
name|insn
operator|&
name|_DECODE_GET_F_HIGHBYTE
operator|)
operator|>>
literal|15
operator|)
expr_stmt|;
name|i
operator|->
name|flag
operator||=
name|FORMAT
expr_stmt|;
break|break;
block|}
return|return;
block|}
end_function

begin_comment
comment|/* Print one instruction from MEMADDR on INFO->STREAM. Return the size of the     instruction (always 2 on MAXQ20).  */
end_comment

begin_function
specifier|static
name|int
name|print_insn
parameter_list|(
name|bfd_vma
name|memaddr
parameter_list|,
name|struct
name|disassemble_info
modifier|*
name|info
parameter_list|,
name|enum
name|bfd_endian
name|endianess
parameter_list|)
block|{
comment|/* The raw instruction.  */
name|unsigned
name|char
name|insn
index|[
literal|2
index|]
decl_stmt|,
name|insn0
decl_stmt|,
name|insn8
decl_stmt|,
name|derived_code
decl_stmt|;
name|unsigned
name|int
name|format
decl_stmt|;
name|unsigned
name|int
name|actual_operands
decl_stmt|;
name|unsigned
name|int
name|i
decl_stmt|;
comment|/* The group_info collected/decoded.  */
name|group_info
name|grp
decl_stmt|;
name|MAXQ20_OPCODE_INFO
specifier|const
modifier|*
name|opcode
decl_stmt|;
name|int
name|status
decl_stmt|;
name|format
operator|=
literal|0
expr_stmt|;
name|status
operator|=
name|info
operator|->
name|read_memory_func
argument_list|(
name|memaddr
argument_list|,
operator|(
name|bfd_byte
operator|*
operator|)
operator|&
name|insn
index|[
literal|0
index|]
argument_list|,
literal|2
argument_list|,
name|info
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
literal|0
condition|)
block|{
name|info
operator|->
name|memory_error_func
argument_list|(
name|status
argument_list|,
name|memaddr
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
name|insn8
operator|=
name|insn
index|[
literal|1
index|]
expr_stmt|;
name|insn0
operator|=
name|insn
index|[
literal|0
index|]
expr_stmt|;
comment|/* FIXME: Endianness always little.  */
if|if
condition|(
name|endianess
operator|==
name|BFD_ENDIAN_BIG
condition|)
name|get_insn_opcode
argument_list|(
operator|(
operator|(
name|insn
index|[
literal|0
index|]
operator|<<
literal|8
operator|)
operator||
operator|(
name|insn
index|[
literal|1
index|]
operator|)
operator|)
argument_list|,
operator|&
name|grp
argument_list|)
expr_stmt|;
else|else
name|get_insn_opcode
argument_list|(
operator|(
operator|(
name|insn
index|[
literal|1
index|]
operator|<<
literal|8
operator|)
operator||
operator|(
name|insn
index|[
literal|0
index|]
operator|)
operator|)
argument_list|,
operator|&
name|grp
argument_list|)
expr_stmt|;
name|derived_code
operator|=
operator|(
operator|(
name|grp
operator|.
name|group_no
operator|<<
literal|4
operator|)
operator||
name|grp
operator|.
name|sub_opcode
operator|)
expr_stmt|;
if|if
condition|(
name|insn
index|[
literal|0
index|]
operator|==
literal|0
operator|&&
name|insn
index|[
literal|1
index|]
operator|==
literal|0
condition|)
block|{
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"00 00"
argument_list|)
expr_stmt|;
return|return
literal|2
return|;
block|}
comment|/* The opcode is always in insn0.  */
for|for
control|(
name|opcode
operator|=
operator|&
name|op_table
index|[
literal|0
index|]
init|;
name|opcode
operator|->
name|name
operator|!=
name|NULL
condition|;
operator|++
name|opcode
control|)
block|{
if|if
condition|(
name|opcode
operator|->
name|instr_id
operator|==
name|derived_code
condition|)
block|{
if|if
condition|(
name|opcode
operator|->
name|instr_id
operator|==
literal|0x3D
condition|)
block|{
if|if
condition|(
operator|(
name|grp
operator|.
name|bit_no
operator|==
literal|0
operator|)
operator|&&
operator|(
name|opcode
operator|->
name|arg
index|[
literal|1
index|]
operator|!=
name|A_BIT_0
operator|)
condition|)
continue|continue;
if|if
condition|(
operator|(
name|grp
operator|.
name|bit_no
operator|==
literal|1
operator|)
operator|&&
operator|(
name|opcode
operator|->
name|arg
index|[
literal|1
index|]
operator|!=
name|A_BIT_1
operator|)
condition|)
continue|continue;
if|if
condition|(
operator|(
name|grp
operator|.
name|bit_no
operator|==
literal|3
operator|)
operator|&&
operator|(
name|opcode
operator|->
name|arg
index|[
literal|0
index|]
operator|!=
literal|0
operator|)
condition|)
continue|continue;
block|}
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"%s "
argument_list|,
name|opcode
operator|->
name|name
argument_list|)
expr_stmt|;
name|actual_operands
operator|=
literal|0
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|SRC
operator|)
operator|==
name|SRC
condition|)
name|actual_operands
operator|++
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|DST
operator|)
operator|==
name|DST
condition|)
name|actual_operands
operator|++
expr_stmt|;
comment|/* If Implict FLAG in the Instruction.  */
if|if
condition|(
operator|(
name|opcode
operator|->
name|op_number
operator|>
name|actual_operands
operator|)
operator|&&
operator|!
operator|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|SRC
operator|)
operator|==
name|SRC
operator|)
operator|&&
operator|!
operator|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|DST
operator|)
operator|==
name|DST
operator|)
condition|)
block|{
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|opcode
operator|->
name|op_number
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|i
operator|==
literal|1
operator|&&
operator|(
name|opcode
operator|->
name|arg
index|[
literal|1
index|]
operator|!=
name|NO_ARG
operator|)
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
name|maxq_print_arg
argument_list|(
name|opcode
operator|->
name|arg
index|[
name|i
index|]
argument_list|,
name|info
argument_list|,
name|grp
argument_list|)
expr_stmt|;
block|}
block|}
comment|/* DST is ABSENT in the grp.  */
if|if
condition|(
operator|(
name|opcode
operator|->
name|op_number
operator|>
name|actual_operands
operator|)
operator|&&
operator|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|SRC
operator|)
operator|==
name|SRC
operator|)
condition|)
block|{
name|maxq_print_arg
argument_list|(
name|opcode
operator|->
name|arg
index|[
literal|0
index|]
argument_list|,
name|info
argument_list|,
name|grp
argument_list|)
expr_stmt|;
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
if|if
condition|(
name|opcode
operator|->
name|instr_id
operator|==
literal|0xA4
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"LC[0]"
argument_list|)
expr_stmt|;
if|if
condition|(
name|opcode
operator|->
name|instr_id
operator|==
literal|0xA5
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"LC[1]"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|SRC
operator|)
operator|==
name|SRC
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|DST
operator|)
operator|==
name|DST
condition|)
block|{
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|BIT_NO
operator|)
operator|==
name|BIT_NO
condition|)
block|{
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" %s.%d"
argument_list|,
name|get_reg_name
argument_list|(
name|grp
operator|.
name|dst
argument_list|,
operator|(
name|type1
operator|)
literal|0
comment|/*DST*/
argument_list|)
argument_list|,
name|grp
operator|.
name|bit_no
argument_list|)
expr_stmt|;
block|}
else|else
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" %s"
argument_list|,
name|get_reg_name
argument_list|(
name|grp
operator|.
name|dst
argument_list|,
operator|(
name|type1
operator|)
literal|0
argument_list|)
argument_list|)
expr_stmt|;
block|}
comment|/* SRC is ABSENT in the grp.  */
if|if
condition|(
operator|(
name|opcode
operator|->
name|op_number
operator|>
name|actual_operands
operator|)
operator|&&
operator|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|DST
operator|)
operator|==
name|DST
operator|)
condition|)
block|{
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
name|maxq_print_arg
argument_list|(
name|opcode
operator|->
name|arg
index|[
literal|1
index|]
argument_list|,
name|info
argument_list|,
name|grp
argument_list|)
expr_stmt|;
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|SRC
operator|)
operator|==
name|SRC
condition|)
block|{
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|DST
operator|)
operator|==
name|DST
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|BIT_NO
operator|)
operator|==
name|BIT_NO
condition|)
block|{
name|format
operator|=
name|opcode
operator|->
name|format
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|FORMAT
operator|)
operator|==
name|FORMAT
condition|)
name|format
operator|=
name|grp
operator|.
name|fbit
expr_stmt|;
if|if
condition|(
name|format
operator|==
literal|1
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" %s.%d"
argument_list|,
name|get_reg_name
argument_list|(
name|grp
operator|.
name|src
argument_list|,
operator|(
name|type1
operator|)
literal|1
comment|/*SRC*/
argument_list|)
argument_list|,
name|grp
operator|.
name|bit_no
argument_list|)
expr_stmt|;
if|if
condition|(
name|format
operator|==
literal|0
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" #%02xh.%d"
argument_list|,
name|grp
operator|.
name|src
argument_list|,
name|grp
operator|.
name|bit_no
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|format
operator|=
name|opcode
operator|->
name|format
expr_stmt|;
if|if
condition|(
operator|(
name|grp
operator|.
name|flag
operator|&
name|FORMAT
operator|)
operator|==
name|FORMAT
condition|)
name|format
operator|=
name|grp
operator|.
name|fbit
expr_stmt|;
if|if
condition|(
name|format
operator|==
literal|1
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" %s"
argument_list|,
name|get_reg_name
argument_list|(
name|grp
operator|.
name|src
argument_list|,
operator|(
name|type1
operator|)
literal|1
comment|/*SRC*/
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|format
operator|==
literal|0
condition|)
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|" #%02xh"
argument_list|,
operator|(
name|grp
operator|.
name|src
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
return|return
literal|2
return|;
block|}
block|}
name|info
operator|->
name|fprintf_func
argument_list|(
name|info
operator|->
name|stream
argument_list|,
literal|"Unable to Decode :  %02x %02x"
argument_list|,
name|insn
index|[
literal|0
index|]
argument_list|,
name|insn
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
return|return
literal|2
return|;
block|}
end_function

begin_function
name|int
name|print_insn_maxq_little
parameter_list|(
name|bfd_vma
name|memaddr
parameter_list|,
name|struct
name|disassemble_info
modifier|*
name|info
parameter_list|)
block|{
return|return
name|print_insn
argument_list|(
name|memaddr
argument_list|,
name|info
argument_list|,
name|BFD_ENDIAN_LITTLE
argument_list|)
return|;
block|}
end_function

end_unit

