begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1997-1999 Erez Zadok  * Copyright (c) 1989 Jan-Simon Pendry  * Copyright (c) 1989 Imperial College of Science, Technology& Medicine  * Copyright (c) 1989 The Regents of the University of California.  * All rights reserved.  *  * This code is derived from software contributed to Berkeley by  * Jan-Simon Pendry at Imperial College, London.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  * 3. All advertising materials mentioning features or use of this software  *    must display the following acknowledgment:  *      This product includes software developed by the University of  *      California, Berkeley and its contributors.  * 4. Neither the name of the University nor the names of its contributors  *    may be used to endorse or promote products derived from this software  *    without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  *  *      %W% (Berkeley) %G%  *  * $Id: fsi_data.h,v 1.2 1999/01/10 21:54:27 ezk Exp $  *  */
end_comment

begin_typedef
typedef|typedef
name|struct
name|auto_tree
name|auto_tree
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|automount
name|automount
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|dict
name|dict
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|dict_data
name|dict_data
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|dict_ent
name|dict_ent
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|disk_fs
name|disk_fs
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|ether_if
name|ether_if
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|fsmount
name|fsmount
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|host
name|host
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|ioloc
name|ioloc
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|fsi_mount
name|fsi_mount
typedef|;
end_typedef

begin_comment
comment|/*  * Automount tree  */
end_comment

begin_struct
struct|struct
name|automount
block|{
name|qelem
name|a_q
decl_stmt|;
name|ioloc
modifier|*
name|a_ioloc
decl_stmt|;
name|char
modifier|*
name|a_name
decl_stmt|;
comment|/* Automount key */
name|char
modifier|*
name|a_volname
decl_stmt|;
comment|/* Equivalent volume to be referenced */
name|char
modifier|*
name|a_symlink
decl_stmt|;
comment|/* Symlink representation */
name|char
modifier|*
name|a_opts
decl_stmt|;
comment|/* opts for mounting */
name|char
modifier|*
name|a_hardwiredfs
decl_stmt|;
comment|/* hack to bypass bogus fs definitions */
name|qelem
modifier|*
name|a_mount
decl_stmt|;
comment|/* Tree representation */
name|dict_ent
modifier|*
name|a_mounted
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * List of automount trees  */
end_comment

begin_struct
struct|struct
name|auto_tree
block|{
name|qelem
name|t_q
decl_stmt|;
name|ioloc
modifier|*
name|t_ioloc
decl_stmt|;
name|char
modifier|*
name|t_defaults
decl_stmt|;
name|qelem
modifier|*
name|t_mount
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * A host  */
end_comment

begin_struct
struct|struct
name|host
block|{
name|qelem
name|q
decl_stmt|;
name|int
name|h_mask
decl_stmt|;
name|ioloc
modifier|*
name|h_ioloc
decl_stmt|;
name|fsmount
modifier|*
name|h_netroot
decl_stmt|,
modifier|*
name|h_netswap
decl_stmt|;
define|#
directive|define
name|HF_HOST
value|0
name|char
modifier|*
name|h_hostname
decl_stmt|;
comment|/* The full name of the host */
name|char
modifier|*
name|h_lochost
decl_stmt|;
comment|/* The name of the host with local domains stripped */
name|char
modifier|*
name|h_hostpath
decl_stmt|;
comment|/* The filesystem path to the host (cf 			   compute_hostpath) */
define|#
directive|define
name|HF_ETHER
value|1
name|qelem
modifier|*
name|h_ether
decl_stmt|;
define|#
directive|define
name|HF_CONFIG
value|2
name|qelem
modifier|*
name|h_config
decl_stmt|;
define|#
directive|define
name|HF_ARCH
value|3
name|char
modifier|*
name|h_arch
decl_stmt|;
define|#
directive|define
name|HF_CLUSTER
value|4
name|char
modifier|*
name|h_cluster
decl_stmt|;
define|#
directive|define
name|HF_OS
value|5
name|char
modifier|*
name|h_os
decl_stmt|;
name|qelem
modifier|*
name|h_disk_fs
decl_stmt|;
name|qelem
modifier|*
name|h_mount
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * An ethernet interface  */
end_comment

begin_struct
struct|struct
name|ether_if
block|{
name|qelem
name|e_q
decl_stmt|;
name|int
name|e_mask
decl_stmt|;
name|ioloc
modifier|*
name|e_ioloc
decl_stmt|;
name|char
modifier|*
name|e_if
decl_stmt|;
define|#
directive|define
name|EF_INADDR
value|0
name|struct
name|in_addr
name|e_inaddr
decl_stmt|;
define|#
directive|define
name|EF_NETMASK
value|1
name|u_long
name|e_netmask
decl_stmt|;
define|#
directive|define
name|EF_HWADDR
value|2
name|char
modifier|*
name|e_hwaddr
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * Disk filesystem structure.  *  * If the DF_* numbers are changed  * disk_fs_strings in analyze.c will  * need updating.  */
end_comment

begin_struct
struct|struct
name|disk_fs
block|{
name|qelem
name|d_q
decl_stmt|;
name|int
name|d_mask
decl_stmt|;
name|ioloc
modifier|*
name|d_ioloc
decl_stmt|;
name|host
modifier|*
name|d_host
decl_stmt|;
name|char
modifier|*
name|d_mountpt
decl_stmt|;
name|char
modifier|*
name|d_dev
decl_stmt|;
define|#
directive|define
name|DF_FSTYPE
value|0
name|char
modifier|*
name|d_fstype
decl_stmt|;
define|#
directive|define
name|DF_OPTS
value|1
name|char
modifier|*
name|d_opts
decl_stmt|;
define|#
directive|define
name|DF_DUMPSET
value|2
name|char
modifier|*
name|d_dumpset
decl_stmt|;
define|#
directive|define
name|DF_PASSNO
value|3
name|int
name|d_passno
decl_stmt|;
define|#
directive|define
name|DF_FREQ
value|4
name|int
name|d_freq
decl_stmt|;
define|#
directive|define
name|DF_MOUNT
value|5
name|qelem
modifier|*
name|d_mount
decl_stmt|;
define|#
directive|define
name|DF_LOG
value|6
name|char
modifier|*
name|d_log
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|DF_REQUIRED
value|((1<<DF_FSTYPE)|(1<<DF_OPTS)|(1<<DF_PASSNO)|(1<<DF_MOUNT))
end_define

begin_comment
comment|/*  * A mount tree  */
end_comment

begin_struct
struct|struct
name|fsi_mount
block|{
name|qelem
name|m_q
decl_stmt|;
name|ioloc
modifier|*
name|m_ioloc
decl_stmt|;
name|int
name|m_mask
decl_stmt|;
define|#
directive|define
name|DM_VOLNAME
value|0
name|char
modifier|*
name|m_volname
decl_stmt|;
define|#
directive|define
name|DM_EXPORTFS
value|1
name|char
modifier|*
name|m_exportfs
decl_stmt|;
define|#
directive|define
name|DM_SEL
value|2
name|char
modifier|*
name|m_sel
decl_stmt|;
name|char
modifier|*
name|m_name
decl_stmt|;
name|int
name|m_name_len
decl_stmt|;
name|fsi_mount
modifier|*
name|m_parent
decl_stmt|;
name|disk_fs
modifier|*
name|m_dk
decl_stmt|;
name|fsi_mount
modifier|*
name|m_exported
decl_stmt|;
name|qelem
modifier|*
name|m_mount
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * Additional filesystem mounts  *  * If the FM_* numbers are changed  * disk_fs_strings in analyze.c will  * need updating.  */
end_comment

begin_struct
struct|struct
name|fsmount
block|{
name|qelem
name|f_q
decl_stmt|;
name|fsi_mount
modifier|*
name|f_ref
decl_stmt|;
name|ioloc
modifier|*
name|f_ioloc
decl_stmt|;
name|int
name|f_mask
decl_stmt|;
define|#
directive|define
name|FM_LOCALNAME
value|0
name|char
modifier|*
name|f_localname
decl_stmt|;
define|#
directive|define
name|FM_VOLNAME
value|1
name|char
modifier|*
name|f_volname
decl_stmt|;
define|#
directive|define
name|FM_FSTYPE
value|2
name|char
modifier|*
name|f_fstype
decl_stmt|;
define|#
directive|define
name|FM_OPTS
value|3
name|char
modifier|*
name|f_opts
decl_stmt|;
define|#
directive|define
name|FM_FROM
value|4
name|char
modifier|*
name|f_from
decl_stmt|;
define|#
directive|define
name|FM_DIRECT
value|5
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|FM_REQUIRED
value|((1<<FM_VOLNAME)|(1<<FM_FSTYPE)|(1<<FM_OPTS)|(1<<FM_FROM)|(1<<FM_LOCALNAME))
end_define

begin_define
define|#
directive|define
name|FM_NETROOT
value|0x01
end_define

begin_define
define|#
directive|define
name|FM_NETSWAP
value|0x02
end_define

begin_define
define|#
directive|define
name|FM_NETBOOT
value|(FM_NETROOT|FM_NETSWAP)
end_define

begin_define
define|#
directive|define
name|DICTHASH
value|5
end_define

begin_struct
struct|struct
name|dict_ent
block|{
name|dict_ent
modifier|*
name|de_next
decl_stmt|;
name|char
modifier|*
name|de_key
decl_stmt|;
name|int
name|de_count
decl_stmt|;
name|qelem
name|de_q
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * Dictionaries ...  */
end_comment

begin_struct
struct|struct
name|dict_data
block|{
name|qelem
name|dd_q
decl_stmt|;
name|char
modifier|*
name|dd_data
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|dict
block|{
name|dict_ent
modifier|*
name|de
index|[
name|DICTHASH
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * Source text location for error reports  */
end_comment

begin_struct
struct|struct
name|ioloc
block|{
name|int
name|i_line
decl_stmt|;
name|char
modifier|*
name|i_file
decl_stmt|;
block|}
struct|;
end_struct

end_unit

