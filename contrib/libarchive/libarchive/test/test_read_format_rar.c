begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2003-2007 Tim Kientzle  * Copyright (c) 2011 Andres Mejia  * Copyright (c) 2011-2012 Michihiro NAKAJIMA  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) ``AS IS'' AND ANY EXPRESS OR  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES  * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  * IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR ANY DIRECT, INDIRECT,  * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT  * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  */
end_comment

begin_include
include|#
directive|include
file|"test.h"
end_include

begin_include
include|#
directive|include
file|<locale.h>
end_include

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_basic
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"test text document\r\n"
decl_stmt|;
name|int
name|size
init|=
sizeof|sizeof
argument_list|(
name|test_txt
argument_list|)
operator|-
literal|1
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|20
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testlink"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"test.txt"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|20
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|5
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_subblock
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_subblock.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"test text document\r\n"
decl_stmt|;
name|int
name|size
init|=
sizeof|sizeof
argument_list|(
name|test_txt
argument_list|)
operator|-
literal|1
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|20
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_noeof
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_noeof.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"test text document\r\n"
decl_stmt|;
name|int
name|size
init|=
sizeof|sizeof
argument_list|(
name|test_txt
argument_list|)
operator|-
literal|1
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|20
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_unicode_UTF8
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|30
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_unicode.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"kanji"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
if|if
condition|(
name|NULL
operator|==
name|setlocale
argument_list|(
name|LC_ALL
argument_list|,
literal|"en_US.UTF-8"
argument_list|)
condition|)
block|{
name|skipping
argument_list|(
literal|"en_US.UTF-8 locale not available on this system."
argument_list|)
expr_stmt|;
return|return;
block|}
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|__APPLE__
argument_list|)
define|#
directive|define
name|f1name
value|"\xE8\xA1\xA8\xE3\x81\x9F\xE3\x82\x99\xE3\x82\x88/"\       "\xE6\x96\xB0\xE3\x81\x97\xE3\x81\x84\xE3\x83\x95\xE3\x82\xA9"\       "\xE3\x83\xAB\xE3\x82\xBF\xE3\x82\x99/\xE6\x96\xB0\xE8\xA6\x8F"\       "\xE3\x83\x86\xE3\x82\xAD\xE3\x82\xB9\xE3\x83\x88 "\       "\xE3\x83\x88\xE3\x82\x99\xE3\x82\xAD\xE3\x83\xA5\xE3\x83\xA1"\       "\xE3\x83\xB3\xE3\x83\x88.txt"
comment|/* NFD */
else|#
directive|else
define|#
directive|define
name|f1name
value|"\xE8\xA1\xA8\xE3\x81\xA0\xE3\x82\x88/"\       "\xE6\x96\xB0\xE3\x81\x97\xE3\x81\x84\xE3\x83\x95\xE3\x82\xA9"\       "\xE3\x83\xAB\xE3\x83\x80/\xE6\x96\xB0\xE8\xA6\x8F"\       "\xE3\x83\x86\xE3\x82\xAD\xE3\x82\xB9\xE3\x83\x88 "\       "\xE3\x83\x89\xE3\x82\xAD\xE3\x83\xA5\xE3\x83\xA1"\       "\xE3\x83\xB3\xE3\x83\x88.txt"
comment|/* NFC */
endif|#
directive|endif
name|assertEqualUTF8String
argument_list|(
name|f1name
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|__APPLE__
argument_list|)
define|#
directive|define
name|f2name
value|"\xE8\xA1\xA8\xE3\x81\x9F\xE3\x82\x99\xE3\x82\x88/"\       "\xE6\xBC\xA2\xE5\xAD\x97\xE9\x95\xB7\xE3\x81\x84\xE3\x83\x95"\       "\xE3\x82\xA1\xE3\x82\xA4\xE3\x83\xAB\xE5\x90\x8Dlong-filename-in-"\       "\xE6\xBC\xA2\xE5\xAD\x97.txt"
comment|/* NFD */
else|#
directive|else
define|#
directive|define
name|f2name
value|"\xE8\xA1\xA8\xE3\x81\xA0\xE3\x82\x88/"\       "\xE6\xBC\xA2\xE5\xAD\x97\xE9\x95\xB7\xE3\x81\x84\xE3\x83\x95"\       "\xE3\x82\xA1\xE3\x82\xA4\xE3\x83\xAB\xE5\x90\x8Dlong-filename-in-"\       "\xE6\xBC\xA2\xE5\xAD\x97.txt"
comment|/* NFC */
endif|#
directive|endif
name|assertEqualUTF8String
argument_list|(
name|f2name
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|5
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
literal|5
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|__APPLE__
argument_list|)
define|#
directive|define
name|f3name
value|"\xE8\xA1\xA8\xE3\x81\x9F\xE3\x82\x99\xE3\x82\x88/"\       "\xE6\x96\xB0\xE3\x81\x97\xE3\x81\x84\xE3\x83\x95\xE3\x82"\       "\xA9\xE3\x83\xAB\xE3\x82\xBF\xE3\x82\x99"
comment|/* NFD */
else|#
directive|else
define|#
directive|define
name|f3name
value|"\xE8\xA1\xA8\xE3\x81\xA0\xE3\x82\x88/"\       "\xE6\x96\xB0\xE3\x81\x97\xE3\x81\x84\xE3\x83\x95\xE3\x82"\       "\xA9\xE3\x83\xAB\xE3\x83\x80"
comment|/* NFC */
endif|#
directive|endif
name|assertEqualUTF8String
argument_list|(
name|f3name
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|__APPLE__
argument_list|)
define|#
directive|define
name|f4name
value|"\xE8\xA1\xA8\xE3\x81\x9F\xE3\x82\x99\xE3\x82\x88"
comment|/* NFD */
else|#
directive|else
define|#
directive|define
name|f4name
value|"\xE8\xA1\xA8\xE3\x81\xA0\xE3\x82\x88"
comment|/* NFC */
endif|#
directive|endif
name|assertEqualUTF8String
argument_list|(
name|f4name
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Fifth header, which has a symbolic-link name in multi-byte characters. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|__APPLE__
argument_list|)
define|#
directive|define
name|f5name
value|"\xE8\xA1\xA8\xE3\x81\x9F\xE3\x82\x99\xE3\x82\x88/"\       "\xE3\x83\x95\xE3\x82\xA1\xE3\x82\xA4\xE3\x83\xAB"
comment|/* NFD */
else|#
directive|else
define|#
directive|define
name|f5name
value|"\xE8\xA1\xA8\xE3\x81\xA0\xE3\x82\x88/"\       "\xE3\x83\x95\xE3\x82\xA1\xE3\x82\xA4\xE3\x83\xAB"
comment|/* NFC */
endif|#
directive|endif
name|assertEqualUTF8String
argument_list|(
name|f5name
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualUTF8String
argument_list|(
literal|"\xE6\xBC\xA2\xE5\xAD\x97\xE9\x95\xB7\xE3\x81\x84\xE3\x83\x95"
literal|"\xE3\x82\xA1\xE3\x82\xA4\xE3\x83\xAB\xE5\x90\x8Dlong-filename-in-"
literal|"\xE6\xBC\xA2\xE5\xAD\x97.txt"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41453
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Sixth header */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualUTF8String
argument_list|(
literal|"abcdefghijklmnopqrs\xE3\x83\x86\xE3\x82\xB9\xE3\x83\x88.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33204
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|16
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|6
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_unicode_CP932
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|30
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_unicode.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"kanji"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
if|if
condition|(
name|NULL
operator|==
name|setlocale
argument_list|(
name|LC_ALL
argument_list|,
literal|"Japanese_Japan"
argument_list|)
operator|&&
name|NULL
operator|==
name|setlocale
argument_list|(
name|LC_ALL
argument_list|,
literal|"ja_JP.SJIS"
argument_list|)
condition|)
block|{
name|skipping
argument_list|(
literal|"CP932 locale not available on this system."
argument_list|)
expr_stmt|;
return|return;
block|}
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Specify the charset of symbolic-link file name. */
if|if
condition|(
name|ARCHIVE_OK
operator|!=
name|archive_read_set_options
argument_list|(
name|a
argument_list|,
literal|"rar:hdrcharset=UTF-8"
argument_list|)
condition|)
block|{
name|skipping
argument_list|(
literal|"This system cannot convert character-set"
literal|" from UTF-8 to CP932."
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
return|return;
block|}
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"\x95\x5c\x82\xbe\x82\xe6/\x90\x56\x82\xb5\x82\xa2"
literal|"\x83\x74\x83\x48\x83\x8b\x83\x5f/\x90\x56\x8b\x4b\x83\x65\x83\x4c"
literal|"\x83\x58\x83\x67 \x83\x68\x83\x4c\x83\x85\x83\x81\x83\x93\x83\x67.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"\x95\x5c\x82\xbe\x82\xe6/\x8a\xbf\x8e\x9a"
literal|"\x92\xb7\x82\xa2\x83\x74\x83\x40\x83\x43\x83\x8b\x96\xbc\x6c"
literal|"\x6f\x6e\x67\x2d\x66\x69\x6c\x65\x6e\x61\x6d\x65\x2d\x69\x6e"
literal|"\x2d\x8a\xbf\x8e\x9a.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|5
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|5
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
literal|5
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
literal|5
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"\x95\x5c\x82\xbe\x82\xe6/"
literal|"\x90\x56\x82\xb5\x82\xa2\x83\x74\x83\x48\x83\x8b\x83\x5f"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"\x95\x5c\x82\xbe\x82\xe6"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fifth header, which has a symbolic-link name in multi-byte characters. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"\x95\x5c\x82\xbe\x82\xe6/"
literal|"\x83\x74\x83\x40\x83\x43\x83\x8B"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"\x8a\xbf\x8e\x9a"
literal|"\x92\xb7\x82\xa2\x83\x74\x83\x40\x83\x43\x83\x8b\x96\xbc\x6c"
literal|"\x6f\x6e\x67\x2d\x66\x69\x6c\x65\x6e\x61\x6d\x65\x2d\x69\x6e"
literal|"\x2d\x8a\xbf\x8e\x9a.txt"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41453
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Sixth header */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualUTF8String
argument_list|(
literal|"abcdefghijklmnopqrs\x83\x65\x83\x58\x83\x67.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33204
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|16
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|6
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_compress_normal
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_compress_normal.rar"
decl_stmt|;
name|char
name|file1_buff
index|[
literal|20111
index|]
decl_stmt|;
name|int
name|file1_size
init|=
sizeof|sizeof
argument_list|(
name|file1_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file1_test_txt
index|[]
init|=
literal|"<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n"
literal|"</BODY>\n"
literal|"</HTML>"
decl_stmt|;
name|char
name|file2_buff
index|[
literal|20
index|]
decl_stmt|;
name|int
name|file2_size
init|=
sizeof|sizeof
argument_list|(
name|file2_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file2_test_txt
index|[]
init|=
literal|"test text document\r\n"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file1_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
name|file1_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file1_buff
index|[
name|file1_size
operator|-
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file1_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testlink"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
literal|30
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file2_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file2_buff
argument_list|,
name|file2_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file2_buff
index|[
name|file2_size
operator|+
literal|1
operator|-
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
index|]
argument_list|,
name|file2_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file1_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
name|file1_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file1_buff
index|[
name|file1_size
operator|-
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file1_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Sixth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|6
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_comment
comment|/* This test is for sufficiently large files that would have been compressed  * using multiple lzss blocks.  */
end_comment

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multi_lzss_blocks
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_multi_lzss_blocks.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"-bottom: 0in\"><BR>\n</P>\n</BODY>\n</HTML>"
decl_stmt|;
name|int
name|size
init|=
literal|20131111
decl_stmt|,
name|offset
init|=
literal|0
decl_stmt|;
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"multi_lzss_blocks_test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
while|while
condition|(
name|offset
operator|+
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|<
name|size
condition|)
block|{
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|offset
operator|+=
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
name|assertA
argument_list|(
name|size
operator|-
name|offset
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
operator|-
name|offset
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
operator|-
name|offset
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_compress_best
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_compress_best.rar"
decl_stmt|;
name|char
name|file1_buff
index|[
literal|20111
index|]
decl_stmt|;
name|int
name|file1_size
init|=
sizeof|sizeof
argument_list|(
name|file1_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file1_test_txt
index|[]
init|=
literal|"<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n"
literal|"</BODY>\n"
literal|"</HTML>"
decl_stmt|;
name|char
name|file2_buff
index|[
literal|20
index|]
decl_stmt|;
name|int
name|file2_size
init|=
sizeof|sizeof
argument_list|(
name|file2_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file2_test_txt
index|[]
init|=
literal|"test text document\r\n"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file1_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
name|file1_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file1_buff
index|[
name|file1_size
operator|-
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file1_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testlink"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
literal|30
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file2_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file2_buff
argument_list|,
name|file2_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file2_buff
index|[
name|file2_size
operator|+
literal|1
operator|-
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
index|]
argument_list|,
name|file2_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file1_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
name|file1_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file1_buff
index|[
name|file1_size
operator|-
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file1_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Sixth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|6
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_comment
comment|/* This is a test for RAR files compressed using a technique where compression  * switches back and forth to and from ppmd and lzss decoding.  */
end_comment

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_ppmd_lzss_conversion
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_ppmd_lzss_conversion.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"gin-bottom: 0in\"><BR>\n</P>\n</BODY>\n</HTML>"
decl_stmt|;
name|int
name|size
init|=
literal|241647978
decl_stmt|,
name|offset
init|=
literal|0
decl_stmt|;
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"ppmd_lzss_conversion_test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
while|while
condition|(
name|offset
operator|+
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|<
name|size
condition|)
block|{
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|offset
operator|+=
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
name|assertA
argument_list|(
name|size
operator|-
name|offset
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
operator|-
name|offset
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
operator|-
name|offset
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_binary
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_binary_data.rar"
decl_stmt|;
name|char
modifier|*
name|file1_buff
init|=
name|malloc
argument_list|(
literal|1048576
argument_list|)
decl_stmt|;
name|int
name|file1_size
init|=
literal|1048576
decl_stmt|;
specifier|const
name|char
name|file1_test_txt
index|[]
init|=
literal|"\x37\xef\xb2\xbe\x33\xf6\xcc\xcb\xee\x2a\x10"
literal|"\x9d\x2e\x01\xe9\xf6\xf9\xe5\xe6\x67\x0c\x2b"
literal|"\xd8\x6b\xa0\x26\x9a\xf7\x93\x87\x42\xf1\x08"
literal|"\x42\xdc\x9b\x76\x91\x20\xa4\x01\xbe\x67\xbd"
literal|"\x08\x74\xde\xec"
decl_stmt|;
name|char
name|file2_buff
index|[
literal|32618
index|]
decl_stmt|;
name|int
name|file2_size
init|=
sizeof|sizeof
argument_list|(
name|file2_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file2_test_txt
index|[]
init|=
literal|"\x00\xee\x78\x00\x00\x4d\x45\x54\x41\x2d\x49"
literal|"\x4e\x46\x2f\x6d\x61\x6e\x69\x66\x65\x73\x74"
literal|"\x2e\x78\x6d\x6c\x50\x4b\x05\x06\x00\x00\x00"
literal|"\x00\x12\x00\x12\x00\xaa\x04\x00\x00\xaa\x7a"
literal|"\x00\x00\x00\x00"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"random_data.bin"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file1_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file1_buff
argument_list|,
name|file1_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file1_buff
index|[
name|file1_size
operator|-
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file1_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file1_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.odt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file2_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file2_buff
argument_list|,
name|file2_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file2_buff
index|[
name|file2_size
operator|+
literal|1
operator|-
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
index|]
argument_list|,
name|file2_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|2
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|file1_buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_windows
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|441
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_windows.rar"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"test text file\r\n"
decl_stmt|;
name|int
name|size
init|=
sizeof|sizeof
argument_list|(
name|test_txt
argument_list|)
operator|-
literal|1
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testshortcut.lnk"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|5
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_read_format_rar_multivolume.part0001.rar"
block|,
literal|"test_read_format_rar_multivolume.part0002.rar"
block|,
literal|"test_read_format_rar_multivolume.part0003.rar"
block|,
literal|"test_read_format_rar_multivolume.part0004.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|int
name|file1_size
init|=
literal|241647978
decl_stmt|,
name|offset
init|=
literal|0
decl_stmt|;
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
specifier|const
name|char
name|file1_test_txt
index|[]
init|=
literal|"gin-bottom: 0in\"><BR>\n</P>\n</BODY>\n"
literal|"</HTML>"
decl_stmt|;
name|char
name|file2_buff
index|[
literal|20111
index|]
decl_stmt|;
name|int
name|file2_size
init|=
sizeof|sizeof
argument_list|(
name|file2_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file2_test_txt
index|[]
init|=
literal|"<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n"
literal|"</BODY>\n"
literal|"</HTML>"
decl_stmt|;
name|char
name|file3_buff
index|[
literal|20
index|]
decl_stmt|;
name|int
name|file3_size
init|=
sizeof|sizeof
argument_list|(
name|file3_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file3_test_txt
index|[]
init|=
literal|"test text document\r\n"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"ppmd_lzss_conversion_test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
while|while
condition|(
name|offset
operator|+
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|<
name|file1_size
condition|)
block|{
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|offset
operator|+=
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
name|assertA
argument_list|(
name|file1_size
operator|-
name|offset
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|file1_size
operator|-
name|offset
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file1_test_txt
argument_list|,
name|file1_size
operator|-
name|offset
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file2_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file2_buff
argument_list|,
name|file2_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file2_buff
index|[
name|file2_size
operator|-
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file2_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testlink"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file2_buff
argument_list|,
literal|30
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file3_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file3_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file3_buff
argument_list|,
name|file3_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file3_buff
index|[
name|file3_size
operator|+
literal|1
operator|-
sizeof|sizeof
argument_list|(
name|file3_test_txt
argument_list|)
index|]
argument_list|,
name|file3_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file3_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file2_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file2_buff
argument_list|,
name|file2_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file2_buff
index|[
name|file2_size
operator|-
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file2_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file2_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Sixth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Seventh header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|7
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume_skip
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_read_format_rar_multivolume.part0001.rar"
block|,
literal|"test_read_format_rar_multivolume.part0002.rar"
block|,
literal|"test_read_format_rar_multivolume.part0003.rar"
block|,
literal|"test_read_format_rar_multivolume.part0004.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|int
name|file1_size
init|=
literal|241647978
decl_stmt|;
name|int
name|file2_size
init|=
literal|20111
decl_stmt|;
name|int
name|file3_size
init|=
literal|20
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"ppmd_lzss_conversion_test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file1_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testlink"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file3_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file2_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Sixth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Seventh header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|7
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_sfx
argument_list|)
end_macro

begin_block
block|{
name|char
name|buff
index|[
literal|441
index|]
decl_stmt|;
specifier|const
name|char
name|reffile
index|[]
init|=
literal|"test_read_format_rar_sfx.exe"
decl_stmt|;
specifier|const
name|char
name|test_txt
index|[]
init|=
literal|"test text file\r\n"
decl_stmt|;
name|int
name|size
init|=
sizeof|sizeof
argument_list|(
name|test_txt
argument_list|)
operator|-
literal|1
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_file
argument_list|(
name|reffile
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filename
argument_list|(
name|a
argument_list|,
name|reffile
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testshortcut.lnk"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Third header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/test.txt"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
name|size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|test_txt
argument_list|,
name|size
argument_list|)
expr_stmt|;
comment|/* Fourth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Fifth header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|5
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume_stored_file
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_rar_multivolume_single_file.part1.rar"
block|,
literal|"test_rar_multivolume_single_file.part2.rar"
block|,
literal|"test_rar_multivolume_single_file.part3.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|char
name|file_buff
index|[
literal|20111
index|]
decl_stmt|;
name|int
name|file_size
init|=
sizeof|sizeof
argument_list|(
name|file_buff
argument_list|)
decl_stmt|;
specifier|const
name|char
name|file_test_txt
index|[]
init|=
literal|"<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n"
literal|"</BODY>\n"
literal|"</HTML>"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file_size
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|file_buff
argument_list|,
name|file_size
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
operator|&
name|file_buff
index|[
name|file_size
operator|-
sizeof|sizeof
argument_list|(
name|file_test_txt
argument_list|)
operator|+
literal|1
index|]
argument_list|,
name|file_test_txt
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume_stored_file_skip
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_rar_multivolume_single_file.part1.rar"
block|,
literal|"test_rar_multivolume_single_file.part2.rar"
block|,
literal|"test_rar_multivolume_single_file.part3.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|int
name|file_size
init|=
literal|20111
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume_seek_data
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_rar_multivolume_single_file.part1.rar"
block|,
literal|"test_rar_multivolume_single_file.part2.rar"
block|,
literal|"test_rar_multivolume_single_file.part3.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
name|int
name|file_size
init|=
literal|20111
decl_stmt|;
specifier|const
name|char
name|file_test_txt1
index|[]
init|=
literal|"d. \n</P>\n<P STYLE=\"margin-bottom: 0in\">"
literal|"<BR>\n</P>\n</BODY>\n</HTML>"
decl_stmt|;
specifier|const
name|char
name|file_test_txt2
index|[]
init|=
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4."
literal|"0 Transitional//EN\">\n<"
decl_stmt|;
specifier|const
name|char
name|file_test_txt3
index|[]
init|=
literal|"mplify writing such tests,\ntry to use plat"
literal|"form-independent codin"
decl_stmt|;
specifier|const
name|char
name|file_test_txt4
index|[]
init|=
literal|"lString</TT> in the example above)\ngenerat"
literal|"e detailed log message"
decl_stmt|;
specifier|const
name|char
name|file_test_txt5
index|[]
init|=
literal|"SS=\"western\">make check</TT> will usually"
literal|" run\n\tall of the tests."
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Seek to the end minus 64 bytes */
name|assertA
argument_list|(
name|file_size
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
name|file_size
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt1
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt1
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt2
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt2
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to the middle of the combined data block */
name|assertA
argument_list|(
literal|10054
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|10054
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt3
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt3
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the first data sub-block */
name|assertA
argument_list|(
literal|6860
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6860
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt4
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt4
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the second data sub-block */
name|assertA
argument_list|(
literal|13752
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13752
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt5
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt5
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Use various combinations of SEEK_SET, SEEK_CUR, and SEEK_END */
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
operator|-
literal|1
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|10
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|10
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|10
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
operator|-
literal|1
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|10
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|-
literal|20
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|40
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
operator|+
literal|20
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
operator|+
literal|20
operator|+
literal|20
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|20
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|-
literal|20
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Attempt to read from the end of the file. These should return    * 0 for end of file.    */
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|40
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Seek to the end minus 64 bytes */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
name|file_size
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt1
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt1
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* The file position should be at the end of the file here */
name|assertA
argument_list|(
name|file_size
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
name|file_size
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt2
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt2
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to the middle of the combined data block */
name|assertA
argument_list|(
literal|10054
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|10054
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt3
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt3
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the first data sub-block */
name|assertA
argument_list|(
literal|6860
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6860
operator|-
operator|(
literal|10054
operator|+
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt4
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt4
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the second data sub-block */
name|assertA
argument_list|(
literal|13752
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13752
operator|-
name|file_size
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt5
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt5
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|1
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume_seek_multiple_files
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_rar_multivolume_multiple_files.part1.rar"
block|,
literal|"test_rar_multivolume_multiple_files.part2.rar"
block|,
literal|"test_rar_multivolume_multiple_files.part3.rar"
block|,
literal|"test_rar_multivolume_multiple_files.part4.rar"
block|,
literal|"test_rar_multivolume_multiple_files.part5.rar"
block|,
literal|"test_rar_multivolume_multiple_files.part6.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
name|int
name|file_size
init|=
literal|20111
decl_stmt|;
specifier|const
name|char
name|file_test_txt1
index|[]
init|=
literal|"d. \n</P>\n<P STYLE=\"margin-bottom: 0in\">"
literal|"<BR>\n</P>\n</BODY>\n</HTML>"
decl_stmt|;
specifier|const
name|char
name|file_test_txt2
index|[]
init|=
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4."
literal|"0 Transitional//EN\">\n<"
decl_stmt|;
specifier|const
name|char
name|file_test_txt3
index|[]
init|=
literal|"mplify writing such tests,\ntry to use plat"
literal|"form-independent codin"
decl_stmt|;
specifier|const
name|char
name|file_test_txt4
index|[]
init|=
literal|"\nfailures. \n</P>\n<H1 CLASS=\"western\"><"
literal|"A NAME=\"Life_cycle_of_a_te"
decl_stmt|;
specifier|const
name|char
name|file_test_txt5
index|[]
init|=
literal|"LE=\"margin-bottom: 0in\">DO use runtime te"
literal|"sts for platform\n\tfeatu"
decl_stmt|;
specifier|const
name|char
name|file_test_txt6
index|[]
init|=
literal|"rough test suite is essential\nboth for ver"
literal|"ifying new ports and f"
decl_stmt|;
specifier|const
name|char
name|file_test_txt7
index|[]
init|=
literal|"m: 0in\">Creates a temporary directory\n\tw"
literal|"hose name matches the na"
decl_stmt|;
specifier|const
name|char
name|file_test_txt8
index|[]
init|=
literal|"lt\ninput file and verify the results. Thes"
literal|"e use<TT CLASS=\"weste"
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/* First header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Attempt to read past end of file */
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|40
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Seek to the end minus 64 bytes */
name|assertA
argument_list|(
name|file_size
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt1
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt1
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
name|file_size
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt2
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt2
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to the middle of the combined data block */
name|assertA
argument_list|(
literal|10054
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|10054
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt3
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt3
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the first data sub-block */
name|assertA
argument_list|(
literal|7027
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|7027
operator|-
operator|(
literal|10054
operator|+
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt4
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt4
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the second data sub-block */
name|assertA
argument_list|(
literal|14086
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|14086
operator|-
name|file_size
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt5
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt5
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Attempt to read past end of file */
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|40
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Second header. */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Attempt to read past end of file */
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|40
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Seek to the end minus 64 bytes */
name|assertA
argument_list|(
name|file_size
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
name|file_size
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt1
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt1
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt2
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt2
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to the middle of the combined data block */
name|assertA
argument_list|(
literal|10054
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|10054
operator|-
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt3
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt3
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the first data sub-block */
name|assertA
argument_list|(
literal|969
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|969
operator|-
operator|(
literal|10054
operator|+
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt6
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt4
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the second data sub-block */
name|assertA
argument_list|(
literal|8029
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|8029
operator|-
name|file_size
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt7
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt5
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Seek to 32 bytes before the end of the third data sub-block */
name|assertA
argument_list|(
literal|15089
operator|==
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|15089
operator|-
name|file_size
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualMem
argument_list|(
name|buff
argument_list|,
name|file_test_txt8
argument_list|,
sizeof|sizeof
argument_list|(
name|file_test_txt5
argument_list|)
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Attempt to read past end of file */
name|assertEqualInt
argument_list|(
name|file_size
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|file_size
operator|+
literal|40
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|40
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertA
argument_list|(
literal|1
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|2
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

begin_function
specifier|static
name|void
name|test_read_format_rar_multivolume_uncompressed_files_helper
parameter_list|(
name|struct
name|archive
modifier|*
name|a
parameter_list|)
block|{
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
comment|/* Do checks for seeks/reads past beginning and end of file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|-
literal|1
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD "
literal|"HTML 4.0 Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|-
literal|1
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|2
operator|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|2
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<HTML>\n<HEAD>\n\t<META HTTP-EQUIV=\"CONTENT-TYPE\" "
literal|"CONTENT=\"text/ht"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|-
literal|1
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
literal|20111
operator|+
literal|32
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|2
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|3
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ml; charset=utf-8\">\n\t<TITLE></TITLE>\n\t<META "
literal|"NAME=\"GENERATOR\" CO"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|""
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|+
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|+
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|""
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|+
operator|(
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|2
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|(
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|2
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|+
operator|(
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
operator|*
literal|2
operator|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|""
argument_list|,
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_macro
name|DEFINE_TEST
argument_list|(
argument|test_read_format_rar_multivolume_uncompressed_files
argument_list|)
end_macro

begin_block
block|{
specifier|const
name|char
modifier|*
name|reffiles
index|[]
init|=
block|{
literal|"test_rar_multivolume_uncompressed_files.part01.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part02.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part03.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part04.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part05.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part06.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part07.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part08.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part09.rar"
block|,
literal|"test_rar_multivolume_uncompressed_files.part10.rar"
block|,
name|NULL
block|}
decl_stmt|;
name|char
name|buff
index|[
literal|64
index|]
decl_stmt|;
name|ssize_t
name|bytes_read
decl_stmt|;
name|struct
name|archive
modifier|*
name|a
decl_stmt|;
name|struct
name|archive_entry
modifier|*
name|ae
decl_stmt|;
name|extract_reference_files
argument_list|(
name|reffiles
argument_list|)
expr_stmt|;
name|assert
argument_list|(
operator|(
name|a
operator|=
name|archive_read_new
argument_list|()
operator|)
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_support_filter_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_support_format_all
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_open_filenames
argument_list|(
name|a
argument_list|,
name|reffiles
argument_list|,
literal|10240
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * First header.    */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"testdir/LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/* Read from the beginning to the end of the file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
do|do
block|{
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|bytes_read
operator|=
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
name|bytes_read
operator|>
literal|0
condition|)
do|;
comment|/* Seek to the end minus (sizeof(buff)-1) bytes */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_SET works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_CUR works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13227
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6947
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6821
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6947
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13227
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_END works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6947
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6947
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13164
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6947
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"ertEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equalit"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/*    * Second header.    */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"testdir/testsubdir/LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/* Read from the beginning to the end of the file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
do|do
block|{
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|bytes_read
operator|=
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
name|bytes_read
operator|>
literal|0
condition|)
do|;
comment|/* Seek to the end minus (sizeof(buff)-1) bytes */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_SET works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_CUR works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13122
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|638
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|764
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13248
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6225
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13949
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13122
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|19410
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19284
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13248
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_END works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13949
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|764
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|764
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13949
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13949
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|764
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|19347
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|764
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" when a block being written out by\n"
literal|"the archive writer is the sa"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|6162
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13949
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"arguments satisfy certain conditions. "
literal|"If the assertion fails--f"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/*    * Third header.    */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/* Read from the beginning to the end of the file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
do|do
block|{
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|bytes_read
operator|=
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
name|bytes_read
operator|>
literal|0
condition|)
do|;
comment|/* Seek to the end minus (sizeof(buff)-1) bytes */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_SET works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_CUR works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|12416
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7758
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|7632
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7758
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|12416
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_END works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7758
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7758
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|12353
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7758
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|" 0.2in\">&nbsp;&nbsp; "
literal|"extract_reference_file(&quot;test_foo.tar"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/*    * Fourth header.    */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"testdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/* Read from the beginning to the end of the file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
do|do
block|{
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|bytes_read
operator|=
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
name|bytes_read
operator|>
literal|0
condition|)
do|;
comment|/* Seek to the end minus (sizeof(buff)-1) bytes */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_SET works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_CUR works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|7731
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|6820
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6946
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7857
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|5434
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|14740
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|7731
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13228
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13102
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|7857
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_END works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|14740
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6946
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6946
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|14740
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|14740
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6946
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|13165
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|6946
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"rtEqualInt,\n\tassertEqualString, "
literal|"assertEqualMem to test equality"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|5371
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|14740
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"zip)\n&nbsp; {\n&nbsp;&nbsp; "
literal|"/* ... setup omitted ... */\n&nbsp; "
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/*    * Fifth header.    */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"testdir/testsubdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/* Read from the beginning to the end of the file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
do|do
block|{
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|bytes_read
operator|=
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
name|bytes_read
operator|>
literal|0
condition|)
do|;
comment|/* Seek to the end minus (sizeof(buff)-1) bytes */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_SET works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_CUR works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|11631
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|8543
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|8417
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|8543
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|11631
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_END works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|8543
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|8543
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|11568
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|8543
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|",<TT CLASS=\"western\">assertFileContents</TT>,"
literal|"\n\t<TT CLASS=\"west"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/*    * Sixth header.    */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|33188
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/* Read from the beginning to the end of the file */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
do|do
block|{
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|bytes_read
operator|=
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
name|bytes_read
operator|>
literal|0
condition|)
do|;
comment|/* Seek to the end minus (sizeof(buff)-1) bytes */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Seek back to the beginning */
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_SET works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_CUR works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13110
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|2236
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|2362
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13236
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|4639
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|15535
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|13110
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|17812
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|19985
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|17686
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|13236
argument_list|,
name|SEEK_CUR
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
comment|/* Test that SEEK_END works correctly between data blocks */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|SEEK_SET
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|15535
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|2362
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|2362
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|15535
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|15535
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|2362
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|20111
operator|-
call|(
name|int
call|)
argument_list|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
operator|(
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|". \n</P>\n<P STYLE=\"margin-bottom: 0in\"><BR>\n"
literal|"</P>\n</BODY>\n</HTML>"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|20111
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 "
literal|"Transitional//EN\">\n"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|17749
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|2362
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"\"></A>Large tar tester</H2>\n<P>The "
literal|"large tar tester attempts to"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|buff
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|4576
argument_list|,
name|archive_seek_data
argument_list|(
name|a
argument_list|,
operator|-
literal|15535
argument_list|,
name|SEEK_END
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
operator|-
literal|1
operator|)
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualStringA
argument_list|(
name|a
argument_list|,
literal|"hat was expected. \n</P>\n<H1 CLASS=\"western\"><A "
literal|"NAME=\"Basic_test"
argument_list|,
name|buff
argument_list|)
expr_stmt|;
name|test_read_format_rar_multivolume_uncompressed_files_helper
argument_list|(
name|a
argument_list|)
expr_stmt|;
comment|/*    * Seventh header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/testsymlink5"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testsubdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Eigth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/testsymlink6"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testsubdir/LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Ninth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testsymlink"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Tenth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testsymlink2"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Eleventh header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testsymlink3"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/testsubdir/LibarchiveAddingTest.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Twelfth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testsymlink4"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|41471
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/testsubdir/LibarchiveAddingTest2.html"
argument_list|,
name|archive_entry_symlink
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|0
argument_list|,
name|archive_read_data
argument_list|(
name|a
argument_list|,
name|buff
argument_list|,
sizeof|sizeof
argument_list|(
name|buff
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
comment|/*    * Thirteenth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/testemptysubdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/*    * Fourteenth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir/testsubdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/*    * Fifteenth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testdir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/*    * Sixteenth header.    */
name|assertA
argument_list|(
literal|0
operator|==
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualString
argument_list|(
literal|"testemptydir"
argument_list|,
name|archive_entry_pathname
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_mtime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_ctime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertA
argument_list|(
operator|(
name|int
operator|)
name|archive_entry_atime
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|0
argument_list|,
name|archive_entry_size
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
literal|16877
argument_list|,
name|archive_entry_mode
argument_list|(
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualInt
argument_list|(
name|archive_entry_is_encrypted
argument_list|(
name|ae
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|archive_read_has_encrypted_entries
argument_list|(
name|a
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Test EOF */
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_EOF
argument_list|,
name|archive_read_next_header
argument_list|(
name|a
argument_list|,
operator|&
name|ae
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
literal|16
argument_list|,
name|archive_file_count
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_close
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|assertEqualIntA
argument_list|(
name|a
argument_list|,
name|ARCHIVE_OK
argument_list|,
name|archive_read_free
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

end_unit

