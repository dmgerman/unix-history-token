begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Disassemble SH instructions.    Copyright 1993, 1994, 1995, 1997, 1998, 2000    Free Software Foundation, Inc.  This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"sysdep.h"
end_include

begin_define
define|#
directive|define
name|STATIC_TABLE
end_define

begin_define
define|#
directive|define
name|DEFINE_TABLE
end_define

begin_include
include|#
directive|include
file|"sh-opc.h"
end_include

begin_include
include|#
directive|include
file|"dis-asm.h"
end_include

begin_define
define|#
directive|define
name|LITTLE_BIT
value|2
end_define

begin_function
specifier|static
name|void
name|print_movxy
parameter_list|(
name|op
parameter_list|,
name|rn
parameter_list|,
name|rm
parameter_list|,
name|fprintf_fn
parameter_list|,
name|stream
parameter_list|)
name|sh_opcode_info
modifier|*
name|op
decl_stmt|;
name|int
name|rn
decl_stmt|,
name|rm
decl_stmt|;
name|fprintf_ftype
name|fprintf_fn
decl_stmt|;
name|void
modifier|*
name|stream
decl_stmt|;
block|{
name|int
name|n
decl_stmt|;
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"%s\t"
argument_list|,
name|op
operator|->
name|name
argument_list|)
expr_stmt|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
literal|2
condition|;
name|n
operator|++
control|)
block|{
switch|switch
condition|(
name|op
operator|->
name|arg
index|[
name|n
index|]
condition|)
block|{
case|case
name|A_IND_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_INC_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d+"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_PMOD_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d+r8"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_PMODY_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d+r9"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|DSP_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"a%c"
argument_list|,
literal|'0'
operator|+
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|DSP_REG_X
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"x%c"
argument_list|,
literal|'0'
operator|+
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|DSP_REG_Y
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"y%c"
argument_list|,
literal|'0'
operator|+
name|rm
argument_list|)
expr_stmt|;
break|break;
default|default:
name|abort
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
name|n
operator|==
literal|0
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/* Print a double data transfer insn.  INSN is just the lower three    nibbles of the insn, i.e. field a and the bit that indicates if    a parallel processing insn follows.    Return nonzero if a field b of a parallel processing insns follows.  */
end_comment

begin_function
specifier|static
name|void
name|print_insn_ddt
parameter_list|(
name|insn
parameter_list|,
name|info
parameter_list|)
name|int
name|insn
decl_stmt|;
name|struct
name|disassemble_info
modifier|*
name|info
decl_stmt|;
block|{
name|fprintf_ftype
name|fprintf_fn
init|=
name|info
operator|->
name|fprintf_func
decl_stmt|;
name|void
modifier|*
name|stream
init|=
name|info
operator|->
name|stream
decl_stmt|;
comment|/* If this is just a nop, make sure to emit something.  */
if|if
condition|(
name|insn
operator|==
literal|0x000
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"nopx\tnopy"
argument_list|)
expr_stmt|;
comment|/* If a parallel processing insn was printed before,      and we got a non-nop, emit a tab.  */
if|if
condition|(
operator|(
name|insn
operator|&
literal|0x800
operator|)
operator|&&
operator|(
name|insn
operator|&
literal|0x3ff
operator|)
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"\t"
argument_list|)
expr_stmt|;
comment|/* Check if either the x or y part is invalid.  */
if|if
condition|(
operator|(
operator|(
name|insn
operator|&
literal|0xc
operator|)
operator|==
literal|0
operator|&&
operator|(
name|insn
operator|&
literal|0x2a0
operator|)
operator|)
operator|||
operator|(
operator|(
name|insn
operator|&
literal|3
operator|)
operator|==
literal|0
operator|&&
operator|(
name|insn
operator|&
literal|0x150
operator|)
operator|)
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|".word 0x%x"
argument_list|,
name|insn
argument_list|)
expr_stmt|;
else|else
block|{
specifier|static
name|sh_opcode_info
modifier|*
name|first_movx
decl_stmt|,
modifier|*
name|first_movy
decl_stmt|;
name|sh_opcode_info
modifier|*
name|opx
decl_stmt|,
modifier|*
name|opy
decl_stmt|;
name|unsigned
name|int
name|insn_x
decl_stmt|,
name|insn_y
decl_stmt|;
if|if
condition|(
operator|!
name|first_movx
condition|)
block|{
for|for
control|(
name|first_movx
operator|=
name|sh_table
init|;
name|first_movx
operator|->
name|nibbles
index|[
literal|1
index|]
operator|!=
name|MOVX
condition|;
control|)
name|first_movx
operator|++
expr_stmt|;
for|for
control|(
name|first_movy
operator|=
name|first_movx
init|;
name|first_movy
operator|->
name|nibbles
index|[
literal|1
index|]
operator|!=
name|MOVY
condition|;
control|)
name|first_movy
operator|++
expr_stmt|;
block|}
name|insn_x
operator|=
operator|(
name|insn
operator|>>
literal|2
operator|)
operator|&
literal|0xb
expr_stmt|;
if|if
condition|(
name|insn_x
condition|)
block|{
for|for
control|(
name|opx
operator|=
name|first_movx
init|;
name|opx
operator|->
name|nibbles
index|[
literal|2
index|]
operator|!=
name|insn_x
condition|;
control|)
name|opx
operator|++
expr_stmt|;
name|print_movxy
argument_list|(
name|opx
argument_list|,
operator|(
operator|(
name|insn
operator|>>
literal|9
operator|)
operator|&
literal|1
operator|)
operator|+
literal|4
argument_list|,
operator|(
name|insn
operator|>>
literal|7
operator|)
operator|&
literal|1
argument_list|,
name|fprintf_fn
argument_list|,
name|stream
argument_list|)
expr_stmt|;
block|}
name|insn_y
operator|=
operator|(
name|insn
operator|&
literal|3
operator|)
operator||
operator|(
operator|(
name|insn
operator|>>
literal|1
operator|)
operator|&
literal|8
operator|)
expr_stmt|;
if|if
condition|(
name|insn_y
condition|)
block|{
if|if
condition|(
name|insn_x
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"\t"
argument_list|)
expr_stmt|;
for|for
control|(
name|opy
operator|=
name|first_movy
init|;
name|opy
operator|->
name|nibbles
index|[
literal|2
index|]
operator|!=
name|insn_y
condition|;
control|)
name|opy
operator|++
expr_stmt|;
name|print_movxy
argument_list|(
name|opy
argument_list|,
operator|(
operator|(
name|insn
operator|>>
literal|8
operator|)
operator|&
literal|1
operator|)
operator|+
literal|6
argument_list|,
operator|(
name|insn
operator|>>
literal|6
operator|)
operator|&
literal|1
argument_list|,
name|fprintf_fn
argument_list|,
name|stream
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
specifier|static
name|void
name|print_dsp_reg
parameter_list|(
name|rm
parameter_list|,
name|fprintf_fn
parameter_list|,
name|stream
parameter_list|)
name|int
name|rm
decl_stmt|;
name|fprintf_ftype
name|fprintf_fn
decl_stmt|;
name|void
modifier|*
name|stream
decl_stmt|;
block|{
switch|switch
condition|(
name|rm
condition|)
block|{
case|case
name|A_A1_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"a1"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_A0_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"a0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_X0_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"x0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_X1_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"x1"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_Y0_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"y0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_Y1_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"y1"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_M0_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"m0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_A1G_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"a1g"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_M1_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"m1"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_A0G_NUM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"a0g"
argument_list|)
expr_stmt|;
break|break;
default|default:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"0x%x"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_function

begin_function
specifier|static
name|void
name|print_insn_ppi
parameter_list|(
name|field_b
parameter_list|,
name|info
parameter_list|)
name|int
name|field_b
decl_stmt|;
name|struct
name|disassemble_info
modifier|*
name|info
decl_stmt|;
block|{
specifier|static
name|char
modifier|*
name|sx_tab
index|[]
init|=
block|{
literal|"x0"
block|,
literal|"x1"
block|,
literal|"a0"
block|,
literal|"a1"
block|}
decl_stmt|;
specifier|static
name|char
modifier|*
name|sy_tab
index|[]
init|=
block|{
literal|"y0"
block|,
literal|"y1"
block|,
literal|"m0"
block|,
literal|"m1"
block|}
decl_stmt|;
name|fprintf_ftype
name|fprintf_fn
init|=
name|info
operator|->
name|fprintf_func
decl_stmt|;
name|void
modifier|*
name|stream
init|=
name|info
operator|->
name|stream
decl_stmt|;
name|unsigned
name|int
name|nib1
decl_stmt|,
name|nib2
decl_stmt|,
name|nib3
decl_stmt|;
name|char
modifier|*
name|dc
init|=
name|NULL
decl_stmt|;
name|sh_opcode_info
modifier|*
name|op
decl_stmt|;
if|if
condition|(
operator|(
name|field_b
operator|&
literal|0xe800
operator|)
operator|==
literal|0
condition|)
block|{
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"psh%c\t#%d,"
argument_list|,
name|field_b
operator|&
literal|0x1000
condition|?
literal|'a'
else|:
literal|'l'
argument_list|,
operator|(
name|field_b
operator|>>
literal|4
operator|)
operator|&
literal|127
argument_list|)
expr_stmt|;
name|print_dsp_reg
argument_list|(
name|field_b
operator|&
literal|0xf
argument_list|,
name|fprintf_fn
argument_list|,
name|stream
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
operator|(
name|field_b
operator|&
literal|0xc000
operator|)
operator|==
literal|0x4000
operator|&&
operator|(
name|field_b
operator|&
literal|0x3000
operator|)
operator|!=
literal|0x1000
condition|)
block|{
specifier|static
name|char
modifier|*
name|du_tab
index|[]
init|=
block|{
literal|"x0"
block|,
literal|"y0"
block|,
literal|"a0"
block|,
literal|"a1"
block|}
decl_stmt|;
specifier|static
name|char
modifier|*
name|se_tab
index|[]
init|=
block|{
literal|"x0"
block|,
literal|"x1"
block|,
literal|"y0"
block|,
literal|"a1"
block|}
decl_stmt|;
specifier|static
name|char
modifier|*
name|sf_tab
index|[]
init|=
block|{
literal|"y0"
block|,
literal|"y1"
block|,
literal|"x0"
block|,
literal|"a1"
block|}
decl_stmt|;
specifier|static
name|char
modifier|*
name|sg_tab
index|[]
init|=
block|{
literal|"m0"
block|,
literal|"m1"
block|,
literal|"a0"
block|,
literal|"a1"
block|}
decl_stmt|;
if|if
condition|(
name|field_b
operator|&
literal|0x2000
condition|)
block|{
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"p%s %s,%s,%s\t"
argument_list|,
operator|(
name|field_b
operator|&
literal|0x1000
operator|)
condition|?
literal|"add"
else|:
literal|"sub"
argument_list|,
name|sx_tab
index|[
operator|(
name|field_b
operator|>>
literal|6
operator|)
operator|&
literal|3
index|]
argument_list|,
name|sy_tab
index|[
operator|(
name|field_b
operator|>>
literal|4
operator|)
operator|&
literal|3
index|]
argument_list|,
name|du_tab
index|[
operator|(
name|field_b
operator|>>
literal|0
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
block|}
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"pmuls%c%s,%s,%s"
argument_list|,
name|field_b
operator|&
literal|0x2000
condition|?
literal|' '
else|:
literal|'\t'
argument_list|,
name|se_tab
index|[
operator|(
name|field_b
operator|>>
literal|10
operator|)
operator|&
literal|3
index|]
argument_list|,
name|sf_tab
index|[
operator|(
name|field_b
operator|>>
literal|8
operator|)
operator|&
literal|3
index|]
argument_list|,
name|sg_tab
index|[
operator|(
name|field_b
operator|>>
literal|2
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
return|return;
block|}
name|nib1
operator|=
name|PPIC
expr_stmt|;
name|nib2
operator|=
name|field_b
operator|>>
literal|12
operator|&
literal|0xf
expr_stmt|;
name|nib3
operator|=
name|field_b
operator|>>
literal|8
operator|&
literal|0xf
expr_stmt|;
switch|switch
condition|(
name|nib3
operator|&
literal|0x3
condition|)
block|{
case|case
literal|0
case|:
name|dc
operator|=
literal|""
expr_stmt|;
name|nib1
operator|=
name|PPI3
expr_stmt|;
break|break;
case|case
literal|1
case|:
name|dc
operator|=
literal|""
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|dc
operator|=
literal|"dct "
expr_stmt|;
name|nib3
operator|-=
literal|1
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|dc
operator|=
literal|"dcf "
expr_stmt|;
name|nib3
operator|-=
literal|2
expr_stmt|;
break|break;
block|}
for|for
control|(
name|op
operator|=
name|sh_table
init|;
name|op
operator|->
name|name
condition|;
name|op
operator|++
control|)
block|{
if|if
condition|(
name|op
operator|->
name|nibbles
index|[
literal|1
index|]
operator|==
name|nib1
operator|&&
name|op
operator|->
name|nibbles
index|[
literal|2
index|]
operator|==
name|nib2
operator|&&
name|op
operator|->
name|nibbles
index|[
literal|3
index|]
operator|==
name|nib3
condition|)
block|{
name|int
name|n
decl_stmt|;
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"%s%s\t"
argument_list|,
name|dc
argument_list|,
name|op
operator|->
name|name
argument_list|)
expr_stmt|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
literal|3
operator|&&
name|op
operator|->
name|arg
index|[
name|n
index|]
operator|!=
name|A_END
condition|;
name|n
operator|++
control|)
block|{
if|if
condition|(
name|n
operator|&&
name|op
operator|->
name|arg
index|[
literal|1
index|]
operator|!=
name|A_END
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|op
operator|->
name|arg
index|[
name|n
index|]
condition|)
block|{
case|case
name|DSP_REG_N
case|:
name|print_dsp_reg
argument_list|(
name|field_b
operator|&
literal|0xf
argument_list|,
name|fprintf_fn
argument_list|,
name|stream
argument_list|)
expr_stmt|;
break|break;
case|case
name|DSP_REG_X
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
name|sx_tab
index|[
operator|(
name|field_b
operator|>>
literal|6
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|DSP_REG_Y
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
name|sy_tab
index|[
operator|(
name|field_b
operator|>>
literal|4
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_MACH
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"mach"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_MACL
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"macl"
argument_list|)
expr_stmt|;
break|break;
default|default:
name|abort
argument_list|()
expr_stmt|;
block|}
block|}
return|return;
block|}
block|}
comment|/* Not found.  */
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|".word 0x%x"
argument_list|,
name|field_b
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|print_insn_shx
parameter_list|(
name|memaddr
parameter_list|,
name|info
parameter_list|)
name|bfd_vma
name|memaddr
decl_stmt|;
name|struct
name|disassemble_info
modifier|*
name|info
decl_stmt|;
block|{
name|fprintf_ftype
name|fprintf_fn
init|=
name|info
operator|->
name|fprintf_func
decl_stmt|;
name|void
modifier|*
name|stream
init|=
name|info
operator|->
name|stream
decl_stmt|;
name|unsigned
name|char
name|insn
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|nibs
index|[
literal|4
index|]
decl_stmt|;
name|int
name|status
decl_stmt|;
name|bfd_vma
name|relmask
init|=
operator|~
operator|(
name|bfd_vma
operator|)
literal|0
decl_stmt|;
name|sh_opcode_info
modifier|*
name|op
decl_stmt|;
name|int
name|target_arch
decl_stmt|;
switch|switch
condition|(
name|info
operator|->
name|mach
condition|)
block|{
case|case
name|bfd_mach_sh
case|:
name|target_arch
operator|=
name|arch_sh1
expr_stmt|;
break|break;
case|case
name|bfd_mach_sh2
case|:
name|target_arch
operator|=
name|arch_sh2
expr_stmt|;
break|break;
case|case
name|bfd_mach_sh_dsp
case|:
name|target_arch
operator|=
name|arch_sh_dsp
expr_stmt|;
break|break;
case|case
name|bfd_mach_sh3
case|:
name|target_arch
operator|=
name|arch_sh3
expr_stmt|;
break|break;
case|case
name|bfd_mach_sh3_dsp
case|:
name|target_arch
operator|=
name|arch_sh3_dsp
expr_stmt|;
break|break;
case|case
name|bfd_mach_sh3e
case|:
name|target_arch
operator|=
name|arch_sh3e
expr_stmt|;
break|break;
case|case
name|bfd_mach_sh4
case|:
name|target_arch
operator|=
name|arch_sh4
expr_stmt|;
break|break;
default|default:
name|abort
argument_list|()
expr_stmt|;
block|}
name|status
operator|=
name|info
operator|->
name|read_memory_func
argument_list|(
name|memaddr
argument_list|,
name|insn
argument_list|,
literal|2
argument_list|,
name|info
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
literal|0
condition|)
block|{
name|info
operator|->
name|memory_error_func
argument_list|(
name|status
argument_list|,
name|memaddr
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
if|if
condition|(
name|info
operator|->
name|flags
operator|&
name|LITTLE_BIT
condition|)
block|{
name|nibs
index|[
literal|0
index|]
operator|=
operator|(
name|insn
index|[
literal|1
index|]
operator|>>
literal|4
operator|)
operator|&
literal|0xf
expr_stmt|;
name|nibs
index|[
literal|1
index|]
operator|=
name|insn
index|[
literal|1
index|]
operator|&
literal|0xf
expr_stmt|;
name|nibs
index|[
literal|2
index|]
operator|=
operator|(
name|insn
index|[
literal|0
index|]
operator|>>
literal|4
operator|)
operator|&
literal|0xf
expr_stmt|;
name|nibs
index|[
literal|3
index|]
operator|=
name|insn
index|[
literal|0
index|]
operator|&
literal|0xf
expr_stmt|;
block|}
else|else
block|{
name|nibs
index|[
literal|0
index|]
operator|=
operator|(
name|insn
index|[
literal|0
index|]
operator|>>
literal|4
operator|)
operator|&
literal|0xf
expr_stmt|;
name|nibs
index|[
literal|1
index|]
operator|=
name|insn
index|[
literal|0
index|]
operator|&
literal|0xf
expr_stmt|;
name|nibs
index|[
literal|2
index|]
operator|=
operator|(
name|insn
index|[
literal|1
index|]
operator|>>
literal|4
operator|)
operator|&
literal|0xf
expr_stmt|;
name|nibs
index|[
literal|3
index|]
operator|=
name|insn
index|[
literal|1
index|]
operator|&
literal|0xf
expr_stmt|;
block|}
if|if
condition|(
name|nibs
index|[
literal|0
index|]
operator|==
literal|0xf
operator|&&
operator|(
name|nibs
index|[
literal|1
index|]
operator|&
literal|4
operator|)
operator|==
literal|0
operator|&&
name|target_arch
operator|&
name|arch_sh_dsp_up
condition|)
block|{
if|if
condition|(
name|nibs
index|[
literal|1
index|]
operator|&
literal|8
condition|)
block|{
name|int
name|field_b
decl_stmt|;
name|status
operator|=
name|info
operator|->
name|read_memory_func
argument_list|(
name|memaddr
operator|+
literal|2
argument_list|,
name|insn
argument_list|,
literal|2
argument_list|,
name|info
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
literal|0
condition|)
block|{
name|info
operator|->
name|memory_error_func
argument_list|(
name|status
argument_list|,
name|memaddr
operator|+
literal|2
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
operator|-
literal|1
return|;
block|}
if|if
condition|(
name|info
operator|->
name|flags
operator|&
name|LITTLE_BIT
condition|)
name|field_b
operator|=
name|insn
index|[
literal|1
index|]
operator|<<
literal|8
operator||
name|insn
index|[
literal|0
index|]
expr_stmt|;
else|else
name|field_b
operator|=
name|insn
index|[
literal|0
index|]
operator|<<
literal|8
operator||
name|insn
index|[
literal|1
index|]
expr_stmt|;
name|print_insn_ppi
argument_list|(
name|field_b
argument_list|,
name|info
argument_list|)
expr_stmt|;
name|print_insn_ddt
argument_list|(
operator|(
name|nibs
index|[
literal|1
index|]
operator|<<
literal|8
operator|)
operator||
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
literal|4
return|;
block|}
name|print_insn_ddt
argument_list|(
operator|(
name|nibs
index|[
literal|1
index|]
operator|<<
literal|8
operator|)
operator||
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
literal|2
return|;
block|}
for|for
control|(
name|op
operator|=
name|sh_table
init|;
name|op
operator|->
name|name
condition|;
name|op
operator|++
control|)
block|{
name|int
name|n
decl_stmt|;
name|int
name|imm
init|=
literal|0
decl_stmt|;
name|int
name|rn
init|=
literal|0
decl_stmt|;
name|int
name|rm
init|=
literal|0
decl_stmt|;
name|int
name|rb
init|=
literal|0
decl_stmt|;
name|int
name|disp_pc
decl_stmt|;
name|bfd_vma
name|disp_pc_addr
init|=
literal|0
decl_stmt|;
if|if
condition|(
operator|(
name|op
operator|->
name|arch
operator|&
name|target_arch
operator|)
operator|==
literal|0
condition|)
goto|goto
name|fail
goto|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
literal|4
condition|;
name|n
operator|++
control|)
block|{
name|int
name|i
init|=
name|op
operator|->
name|nibbles
index|[
name|n
index|]
decl_stmt|;
if|if
condition|(
name|i
operator|<
literal|16
condition|)
block|{
if|if
condition|(
name|nibs
index|[
name|n
index|]
operator|==
name|i
condition|)
continue|continue;
goto|goto
name|fail
goto|;
block|}
switch|switch
condition|(
name|i
condition|)
block|{
case|case
name|BRANCH_8
case|:
name|imm
operator|=
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
operator|(
name|nibs
index|[
literal|3
index|]
operator|)
expr_stmt|;
if|if
condition|(
name|imm
operator|&
literal|0x80
condition|)
name|imm
operator||=
operator|~
literal|0xff
expr_stmt|;
name|imm
operator|=
operator|(
operator|(
name|char
operator|)
name|imm
operator|)
operator|*
literal|2
operator|+
literal|4
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|BRANCH_12
case|:
name|imm
operator|=
operator|(
operator|(
name|nibs
index|[
literal|1
index|]
operator|)
operator|<<
literal|8
operator|)
operator||
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
operator|(
name|nibs
index|[
literal|3
index|]
operator|)
expr_stmt|;
if|if
condition|(
name|imm
operator|&
literal|0x800
condition|)
name|imm
operator||=
operator|~
literal|0xfff
expr_stmt|;
name|imm
operator|=
name|imm
operator|*
literal|2
operator|+
literal|4
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|IMM0_4
case|:
case|case
name|IMM1_4
case|:
name|imm
operator|=
name|nibs
index|[
literal|3
index|]
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|IMM0_4BY2
case|:
case|case
name|IMM1_4BY2
case|:
name|imm
operator|=
name|nibs
index|[
literal|3
index|]
operator|<<
literal|1
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|IMM0_4BY4
case|:
case|case
name|IMM1_4BY4
case|:
name|imm
operator|=
name|nibs
index|[
literal|3
index|]
operator|<<
literal|2
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|IMM0_8
case|:
case|case
name|IMM1_8
case|:
name|imm
operator|=
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|PCRELIMM_8BY2
case|:
name|imm
operator|=
operator|(
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
operator|)
operator|<<
literal|1
expr_stmt|;
name|relmask
operator|=
operator|~
operator|(
name|bfd_vma
operator|)
literal|1
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|PCRELIMM_8BY4
case|:
name|imm
operator|=
operator|(
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
operator|)
operator|<<
literal|2
expr_stmt|;
name|relmask
operator|=
operator|~
operator|(
name|bfd_vma
operator|)
literal|3
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|IMM0_8BY2
case|:
case|case
name|IMM1_8BY2
case|:
name|imm
operator|=
operator|(
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
operator|)
operator|<<
literal|1
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|IMM0_8BY4
case|:
case|case
name|IMM1_8BY4
case|:
name|imm
operator|=
operator|(
operator|(
name|nibs
index|[
literal|2
index|]
operator|<<
literal|4
operator|)
operator||
name|nibs
index|[
literal|3
index|]
operator|)
operator|<<
literal|2
expr_stmt|;
goto|goto
name|ok
goto|;
case|case
name|REG_N
case|:
name|rn
operator|=
name|nibs
index|[
name|n
index|]
expr_stmt|;
break|break;
case|case
name|REG_M
case|:
name|rm
operator|=
name|nibs
index|[
name|n
index|]
expr_stmt|;
break|break;
case|case
name|REG_NM
case|:
name|rn
operator|=
operator|(
name|nibs
index|[
name|n
index|]
operator|&
literal|0xc
operator|)
operator|>>
literal|2
expr_stmt|;
name|rm
operator|=
operator|(
name|nibs
index|[
name|n
index|]
operator|&
literal|0x3
operator|)
expr_stmt|;
break|break;
case|case
name|REG_B
case|:
name|rb
operator|=
name|nibs
index|[
name|n
index|]
operator|&
literal|0x07
expr_stmt|;
break|break;
case|case
name|SDT_REG_N
case|:
comment|/* sh-dsp: single data transfer.  */
name|rn
operator|=
name|nibs
index|[
name|n
index|]
expr_stmt|;
if|if
condition|(
operator|(
name|rn
operator|&
literal|0xc
operator|)
operator|!=
literal|4
condition|)
goto|goto
name|fail
goto|;
name|rn
operator|=
name|rn
operator|&
literal|0x3
expr_stmt|;
name|rn
operator||=
operator|(
operator|!
operator|(
name|rn
operator|&
literal|2
operator|)
operator|)
operator|<<
literal|2
expr_stmt|;
break|break;
case|case
name|PPI
case|:
case|case
name|REPEAT
case|:
goto|goto
name|fail
goto|;
default|default:
name|abort
argument_list|()
expr_stmt|;
block|}
block|}
name|ok
label|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"%s\t"
argument_list|,
name|op
operator|->
name|name
argument_list|)
expr_stmt|;
name|disp_pc
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|n
operator|=
literal|0
init|;
name|n
operator|<
literal|3
operator|&&
name|op
operator|->
name|arg
index|[
name|n
index|]
operator|!=
name|A_END
condition|;
name|n
operator|++
control|)
block|{
if|if
condition|(
name|n
operator|&&
name|op
operator|->
name|arg
index|[
literal|1
index|]
operator|!=
name|A_END
condition|)
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|","
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|op
operator|->
name|arg
index|[
name|n
index|]
condition|)
block|{
case|case
name|A_IMM
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"#%d"
argument_list|,
call|(
name|char
call|)
argument_list|(
name|imm
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_R0
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"r0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_REG_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"r%d"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_INC_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d+"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DEC_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@-r%d"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_IND_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DISP_REG_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@(%d,r%d)"
argument_list|,
name|imm
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_PMOD_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d+r8"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"r%d"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_INC_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d+"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DEC_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@-r%d"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_IND_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@r%d"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DISP_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@(%d,r%d)"
argument_list|,
name|imm
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_REG_B
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"r%d_bank"
argument_list|,
name|rb
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DISP_PC
case|:
name|disp_pc
operator|=
literal|1
expr_stmt|;
name|disp_pc_addr
operator|=
name|imm
operator|+
literal|4
operator|+
operator|(
name|memaddr
operator|&
name|relmask
operator|)
expr_stmt|;
call|(
modifier|*
name|info
operator|->
name|print_address_func
call|)
argument_list|(
name|disp_pc_addr
argument_list|,
name|info
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_IND_R0_REG_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@(r0,r%d)"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_IND_R0_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@(r0,r%d)"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DISP_GBR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@(%d,gbr)"
argument_list|,
name|imm
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_R0_GBR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"@(r0,gbr)"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_BDISP12
case|:
case|case
name|A_BDISP8
case|:
call|(
modifier|*
name|info
operator|->
name|print_address_func
call|)
argument_list|(
name|imm
operator|+
name|memaddr
argument_list|,
name|info
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_SR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"sr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_GBR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"gbr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_VBR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"vbr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DSR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"dsr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_MOD
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"mod"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_RE
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"re"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_RS
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"rs"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_A0
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"a0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_X0
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"x0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_X1
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"x1"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_Y0
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"y0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_Y1
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"y1"
argument_list|)
expr_stmt|;
break|break;
case|case
name|DSP_REG_M
case|:
name|print_dsp_reg
argument_list|(
name|rm
argument_list|,
name|fprintf_fn
argument_list|,
name|stream
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_SSR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"ssr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_SPC
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"spc"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_MACH
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"mach"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_MACL
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"macl"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_PR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"pr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_SGR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"sgr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|A_DBR
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"dbr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|F_REG_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fr%d"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|F_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fr%d"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|DX_REG_N
case|:
if|if
condition|(
name|rn
operator|&
literal|1
condition|)
block|{
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"xd%d"
argument_list|,
name|rn
operator|&
operator|~
literal|1
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|D_REG_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"dr%d"
argument_list|,
name|rn
argument_list|)
expr_stmt|;
break|break;
case|case
name|DX_REG_M
case|:
if|if
condition|(
name|rm
operator|&
literal|1
condition|)
block|{
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"xd%d"
argument_list|,
name|rm
operator|&
operator|~
literal|1
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|D_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"dr%d"
argument_list|,
name|rm
argument_list|)
expr_stmt|;
break|break;
case|case
name|FPSCR_M
case|:
case|case
name|FPSCR_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fpscr"
argument_list|)
expr_stmt|;
break|break;
case|case
name|FPUL_M
case|:
case|case
name|FPUL_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fpul"
argument_list|)
expr_stmt|;
break|break;
case|case
name|F_FR0
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fr0"
argument_list|)
expr_stmt|;
break|break;
case|case
name|V_REG_N
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fv%d"
argument_list|,
name|rn
operator|*
literal|4
argument_list|)
expr_stmt|;
break|break;
case|case
name|V_REG_M
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"fv%d"
argument_list|,
name|rm
operator|*
literal|4
argument_list|)
expr_stmt|;
break|break;
case|case
name|XMTRX_M4
case|:
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"xmtrx"
argument_list|)
expr_stmt|;
break|break;
default|default:
name|abort
argument_list|()
expr_stmt|;
block|}
block|}
if|#
directive|if
literal|0
comment|/* This code prints instructions in delay slots on the same line          as the instruction which needs the delay slots.  This can be          confusing, since other disassembler don't work this way, and          it means that the instructions are not all in a line.  So I          disabled it.  Ian.  */
block|if (!(info->flags& 1)&& (op->name[0] == 'j' 	      || (op->name[0] == 'b'&& (op->name[1] == 'r' 		      || op->name[1] == 's')) 	      || (op->name[0] == 'r'&& op->name[1] == 't') 	      || (op->name[0] == 'b'&& op->name[2] == '.'))) 	{ 	  info->flags |= 1; 	  fprintf_fn (stream, "\t(slot "); 	  print_insn_shx (memaddr + 2, info); 	  info->flags&= ~1; 	  fprintf_fn (stream, ")"); 	  return 4; 	}
endif|#
directive|endif
if|if
condition|(
name|disp_pc
operator|&&
name|strcmp
argument_list|(
name|op
operator|->
name|name
argument_list|,
literal|"mova"
argument_list|)
operator|!=
literal|0
condition|)
block|{
name|int
name|size
decl_stmt|;
name|bfd_byte
name|bytes
index|[
literal|4
index|]
decl_stmt|;
if|if
condition|(
name|relmask
operator|==
operator|~
operator|(
name|bfd_vma
operator|)
literal|1
condition|)
name|size
operator|=
literal|2
expr_stmt|;
else|else
name|size
operator|=
literal|4
expr_stmt|;
name|status
operator|=
name|info
operator|->
name|read_memory_func
argument_list|(
name|disp_pc_addr
argument_list|,
name|bytes
argument_list|,
name|size
argument_list|,
name|info
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|==
literal|0
condition|)
block|{
name|unsigned
name|int
name|val
decl_stmt|;
if|if
condition|(
name|size
operator|==
literal|2
condition|)
block|{
if|if
condition|(
operator|(
name|info
operator|->
name|flags
operator|&
name|LITTLE_BIT
operator|)
operator|!=
literal|0
condition|)
name|val
operator|=
name|bfd_getl16
argument_list|(
name|bytes
argument_list|)
expr_stmt|;
else|else
name|val
operator|=
name|bfd_getb16
argument_list|(
name|bytes
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
operator|(
name|info
operator|->
name|flags
operator|&
name|LITTLE_BIT
operator|)
operator|!=
literal|0
condition|)
name|val
operator|=
name|bfd_getl32
argument_list|(
name|bytes
argument_list|)
expr_stmt|;
else|else
name|val
operator|=
name|bfd_getb32
argument_list|(
name|bytes
argument_list|)
expr_stmt|;
block|}
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|"\t! 0x%x"
argument_list|,
name|val
argument_list|)
expr_stmt|;
block|}
block|}
return|return
literal|2
return|;
name|fail
label|:
empty_stmt|;
block|}
name|fprintf_fn
argument_list|(
name|stream
argument_list|,
literal|".word 0x%x%x%x%x"
argument_list|,
name|nibs
index|[
literal|0
index|]
argument_list|,
name|nibs
index|[
literal|1
index|]
argument_list|,
name|nibs
index|[
literal|2
index|]
argument_list|,
name|nibs
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
return|return
literal|2
return|;
block|}
end_function

begin_function
name|int
name|print_insn_shl
parameter_list|(
name|memaddr
parameter_list|,
name|info
parameter_list|)
name|bfd_vma
name|memaddr
decl_stmt|;
name|struct
name|disassemble_info
modifier|*
name|info
decl_stmt|;
block|{
name|int
name|r
decl_stmt|;
name|info
operator|->
name|flags
operator|=
name|LITTLE_BIT
expr_stmt|;
name|r
operator|=
name|print_insn_shx
argument_list|(
name|memaddr
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
name|r
return|;
block|}
end_function

begin_function
name|int
name|print_insn_sh
parameter_list|(
name|memaddr
parameter_list|,
name|info
parameter_list|)
name|bfd_vma
name|memaddr
decl_stmt|;
name|struct
name|disassemble_info
modifier|*
name|info
decl_stmt|;
block|{
name|int
name|r
decl_stmt|;
name|info
operator|->
name|flags
operator|=
literal|0
expr_stmt|;
name|r
operator|=
name|print_insn_shx
argument_list|(
name|memaddr
argument_list|,
name|info
argument_list|)
expr_stmt|;
return|return
name|r
return|;
block|}
end_function

end_unit

