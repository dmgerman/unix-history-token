begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Select disassembly routine for specified architecture.    Copyright 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001    Free Software Foundation, Inc.  This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"sysdep.h"
end_include

begin_include
include|#
directive|include
file|"dis-asm.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|ARCH_all
end_ifdef

begin_define
define|#
directive|define
name|ARCH_a29k
end_define

begin_define
define|#
directive|define
name|ARCH_alpha
end_define

begin_define
define|#
directive|define
name|ARCH_arc
end_define

begin_define
define|#
directive|define
name|ARCH_arm
end_define

begin_define
define|#
directive|define
name|ARCH_avr
end_define

begin_define
define|#
directive|define
name|ARCH_cris
end_define

begin_define
define|#
directive|define
name|ARCH_d10v
end_define

begin_define
define|#
directive|define
name|ARCH_d30v
end_define

begin_define
define|#
directive|define
name|ARCH_h8300
end_define

begin_define
define|#
directive|define
name|ARCH_h8500
end_define

begin_define
define|#
directive|define
name|ARCH_hppa
end_define

begin_define
define|#
directive|define
name|ARCH_i370
end_define

begin_define
define|#
directive|define
name|ARCH_i386
end_define

begin_define
define|#
directive|define
name|ARCH_i860
end_define

begin_define
define|#
directive|define
name|ARCH_i960
end_define

begin_define
define|#
directive|define
name|ARCH_ia64
end_define

begin_define
define|#
directive|define
name|ARCH_fr30
end_define

begin_define
define|#
directive|define
name|ARCH_m32r
end_define

begin_define
define|#
directive|define
name|ARCH_m68k
end_define

begin_define
define|#
directive|define
name|ARCH_m68hc11
end_define

begin_define
define|#
directive|define
name|ARCH_m68hc12
end_define

begin_define
define|#
directive|define
name|ARCH_m88k
end_define

begin_define
define|#
directive|define
name|ARCH_mcore
end_define

begin_define
define|#
directive|define
name|ARCH_mips
end_define

begin_define
define|#
directive|define
name|ARCH_mn10200
end_define

begin_define
define|#
directive|define
name|ARCH_mn10300
end_define

begin_define
define|#
directive|define
name|ARCH_ns32k
end_define

begin_define
define|#
directive|define
name|ARCH_pj
end_define

begin_define
define|#
directive|define
name|ARCH_powerpc
end_define

begin_define
define|#
directive|define
name|ARCH_rs6000
end_define

begin_define
define|#
directive|define
name|ARCH_sh
end_define

begin_define
define|#
directive|define
name|ARCH_sparc
end_define

begin_define
define|#
directive|define
name|ARCH_tic30
end_define

begin_define
define|#
directive|define
name|ARCH_tic54x
end_define

begin_define
define|#
directive|define
name|ARCH_tic80
end_define

begin_define
define|#
directive|define
name|ARCH_v850
end_define

begin_define
define|#
directive|define
name|ARCH_vax
end_define

begin_define
define|#
directive|define
name|ARCH_w65
end_define

begin_define
define|#
directive|define
name|ARCH_z8k
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|disassembler_ftype
name|disassembler
parameter_list|(
name|abfd
parameter_list|)
name|bfd
modifier|*
name|abfd
decl_stmt|;
block|{
name|enum
name|bfd_architecture
name|a
init|=
name|bfd_get_arch
argument_list|(
name|abfd
argument_list|)
decl_stmt|;
name|disassembler_ftype
name|disassemble
decl_stmt|;
switch|switch
condition|(
name|a
condition|)
block|{
comment|/* If you add a case to this table, also add it to the 	 ARCH_all definition right above this function.  */
ifdef|#
directive|ifdef
name|ARCH_a29k
case|case
name|bfd_arch_a29k
case|:
comment|/* As far as I know we only handle big-endian 29k objects.  */
name|disassemble
operator|=
name|print_insn_big_a29k
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_alpha
case|case
name|bfd_arch_alpha
case|:
name|disassemble
operator|=
name|print_insn_alpha
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_arc
case|case
name|bfd_arch_arc
case|:
block|{
name|disassemble
operator|=
name|arc_get_disassembler
argument_list|(
name|abfd
argument_list|)
expr_stmt|;
break|break;
block|}
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_arm
case|case
name|bfd_arch_arm
case|:
if|if
condition|(
name|bfd_big_endian
argument_list|(
name|abfd
argument_list|)
condition|)
name|disassemble
operator|=
name|print_insn_big_arm
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_little_arm
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_avr
case|case
name|bfd_arch_avr
case|:
name|disassemble
operator|=
name|print_insn_avr
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_cris
case|case
name|bfd_arch_cris
case|:
name|disassemble
operator|=
name|cris_get_disassembler
argument_list|(
name|abfd
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_d10v
case|case
name|bfd_arch_d10v
case|:
name|disassemble
operator|=
name|print_insn_d10v
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_d30v
case|case
name|bfd_arch_d30v
case|:
name|disassemble
operator|=
name|print_insn_d30v
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_h8300
case|case
name|bfd_arch_h8300
case|:
if|if
condition|(
name|bfd_get_mach
argument_list|(
name|abfd
argument_list|)
operator|==
name|bfd_mach_h8300h
condition|)
name|disassemble
operator|=
name|print_insn_h8300h
expr_stmt|;
elseif|else
if|if
condition|(
name|bfd_get_mach
argument_list|(
name|abfd
argument_list|)
operator|==
name|bfd_mach_h8300s
condition|)
name|disassemble
operator|=
name|print_insn_h8300s
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_h8300
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_h8500
case|case
name|bfd_arch_h8500
case|:
name|disassemble
operator|=
name|print_insn_h8500
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_hppa
case|case
name|bfd_arch_hppa
case|:
name|disassemble
operator|=
name|print_insn_hppa
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_i370
case|case
name|bfd_arch_i370
case|:
name|disassemble
operator|=
name|print_insn_i370
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_i386
case|case
name|bfd_arch_i386
case|:
if|if
condition|(
name|bfd_get_mach
argument_list|(
name|abfd
argument_list|)
operator|==
name|bfd_mach_i386_i386_intel_syntax
operator|||
name|bfd_get_mach
argument_list|(
name|abfd
argument_list|)
operator|==
name|bfd_mach_x86_64_intel_syntax
condition|)
name|disassemble
operator|=
name|print_insn_i386_intel
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_i386_att
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_i860
case|case
name|bfd_arch_i860
case|:
name|disassemble
operator|=
name|print_insn_i860
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_i960
case|case
name|bfd_arch_i960
case|:
name|disassemble
operator|=
name|print_insn_i960
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_ia64
case|case
name|bfd_arch_ia64
case|:
name|disassemble
operator|=
name|print_insn_ia64
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_fr30
case|case
name|bfd_arch_fr30
case|:
name|disassemble
operator|=
name|print_insn_fr30
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_m32r
case|case
name|bfd_arch_m32r
case|:
name|disassemble
operator|=
name|print_insn_m32r
expr_stmt|;
break|break;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|ARCH_m68hc11
argument_list|)
operator|||
name|defined
argument_list|(
name|ARCH_m68hc12
argument_list|)
case|case
name|bfd_arch_m68hc11
case|:
name|disassemble
operator|=
name|print_insn_m68hc11
expr_stmt|;
break|break;
case|case
name|bfd_arch_m68hc12
case|:
name|disassemble
operator|=
name|print_insn_m68hc12
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_m68k
case|case
name|bfd_arch_m68k
case|:
name|disassemble
operator|=
name|print_insn_m68k
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_m88k
case|case
name|bfd_arch_m88k
case|:
name|disassemble
operator|=
name|print_insn_m88k
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_ns32k
case|case
name|bfd_arch_ns32k
case|:
name|disassemble
operator|=
name|print_insn_ns32k
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_mcore
case|case
name|bfd_arch_mcore
case|:
name|disassemble
operator|=
name|print_insn_mcore
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_mips
case|case
name|bfd_arch_mips
case|:
if|if
condition|(
name|bfd_big_endian
argument_list|(
name|abfd
argument_list|)
condition|)
name|disassemble
operator|=
name|print_insn_big_mips
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_little_mips
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_mn10200
case|case
name|bfd_arch_mn10200
case|:
name|disassemble
operator|=
name|print_insn_mn10200
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_mn10300
case|case
name|bfd_arch_mn10300
case|:
name|disassemble
operator|=
name|print_insn_mn10300
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_pj
case|case
name|bfd_arch_pj
case|:
name|disassemble
operator|=
name|print_insn_pj
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_powerpc
case|case
name|bfd_arch_powerpc
case|:
if|if
condition|(
name|bfd_big_endian
argument_list|(
name|abfd
argument_list|)
condition|)
name|disassemble
operator|=
name|print_insn_big_powerpc
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_little_powerpc
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_rs6000
case|case
name|bfd_arch_rs6000
case|:
if|if
condition|(
name|bfd_get_mach
argument_list|(
name|abfd
argument_list|)
operator|==
name|bfd_mach_ppc_620
condition|)
name|disassemble
operator|=
name|print_insn_big_powerpc
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_rs6000
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_sh
case|case
name|bfd_arch_sh
case|:
if|if
condition|(
name|bfd_big_endian
argument_list|(
name|abfd
argument_list|)
condition|)
name|disassemble
operator|=
name|print_insn_sh
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_shl
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_sparc
case|case
name|bfd_arch_sparc
case|:
name|disassemble
operator|=
name|print_insn_sparc
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_tic30
case|case
name|bfd_arch_tic30
case|:
name|disassemble
operator|=
name|print_insn_tic30
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_tic54x
case|case
name|bfd_arch_tic54x
case|:
name|disassemble
operator|=
name|print_insn_tic54x
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_tic80
case|case
name|bfd_arch_tic80
case|:
name|disassemble
operator|=
name|print_insn_tic80
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_v850
case|case
name|bfd_arch_v850
case|:
name|disassemble
operator|=
name|print_insn_v850
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_w65
case|case
name|bfd_arch_w65
case|:
name|disassemble
operator|=
name|print_insn_w65
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_z8k
case|case
name|bfd_arch_z8k
case|:
if|if
condition|(
name|bfd_get_mach
argument_list|(
name|abfd
argument_list|)
operator|==
name|bfd_mach_z8001
condition|)
name|disassemble
operator|=
name|print_insn_z8001
expr_stmt|;
else|else
name|disassemble
operator|=
name|print_insn_z8002
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|ARCH_vax
case|case
name|bfd_arch_vax
case|:
name|disassemble
operator|=
name|print_insn_vax
expr_stmt|;
break|break;
endif|#
directive|endif
default|default:
return|return
literal|0
return|;
block|}
return|return
name|disassemble
return|;
block|}
end_function

begin_function
name|void
name|disassembler_usage
parameter_list|(
name|stream
parameter_list|)
name|FILE
modifier|*
name|stream
name|ATTRIBUTE_UNUSED
decl_stmt|;
block|{
ifdef|#
directive|ifdef
name|ARCH_arm
name|print_arm_disassembler_options
argument_list|(
name|stream
argument_list|)
expr_stmt|;
endif|#
directive|endif
return|return;
block|}
end_function

end_unit

