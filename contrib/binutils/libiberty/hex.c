begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Hex character manipulation support.    Copyright (C) 1995, 2001 Free Software Foundation, Inc.  This file is part of the libiberty library. Libiberty is free software; you can redistribute it and/or modify it under the terms of the GNU Library General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  Libiberty is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Library General Public License for more details.  You should have received a copy of the GNU Library General Public License along with libiberty; see the file COPYING.LIB.  If not, write to the Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_comment
comment|/* for EOF */
end_comment

begin_include
include|#
directive|include
file|"libiberty.h"
end_include

begin_comment
comment|/*  @deftypefn Extension void hex_init (void)  Initializes the array mapping the current character set to corresponding hex values.  This function must be called before any call to @code{hex_p} or @code{hex_value}.  If you fail to call it, a default ASCII-based table will normally be used on ASCII systems.  @end deftypefn  @deftypefn Extension int hex_p (int @var{c})  Evaluates to non-zero if the given character is a valid hex character, or zero if it is not.  Note that the value you pass will be cast to @code{unsigned char} within the macro.  @end deftypefn  @deftypefn Extension int hex_value (int @var{c})  Returns the numeric equivalent of the given character when interpreted as a hexidecimal digit.  The result is undefined if you pass an invalid hex digit.  Note that the value you pass will be cast to @code{unsigned char} within the macro.  @end deftypefn  @undocumented _hex_array_size @undocumented _hex_bad @undocumented _hex_value  */
end_comment

begin_comment
comment|/* Are we ASCII? */
end_comment

begin_if
if|#
directive|if
literal|'\n'
operator|==
literal|0x0A
operator|&&
literal|' '
operator|==
literal|0x20
operator|&&
literal|'0'
operator|==
literal|0x30
expr|\
operator|&&
literal|'A'
operator|==
literal|0x41
operator|&&
literal|'a'
operator|==
literal|0x61
operator|&&
literal|'!'
operator|==
literal|0x21
expr|\
operator|&&
name|EOF
operator|==
operator|-
literal|1
end_if

begin_decl_stmt
specifier|const
name|char
name|_hex_value
index|[
name|_hex_array_size
index|]
init|=
block|{
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* NUL SOH STX ETX */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* EOT ENQ ACK BEL */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* BS  HT  LF  VT  */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* FF  CR  SO  SI  */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* DLE DC1 DC2 DC3 */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* DC4 NAK SYN ETB */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* CAN EM  SUB ESC */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* FS  GS  RS  US  */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* SP  !   "   #   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* $   %&   '   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* (   )   *   +   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* ,   -   .   /   */
literal|0
block|,
literal|1
block|,
literal|2
block|,
literal|3
block|,
comment|/* 0   1   2   3   */
literal|4
block|,
literal|5
block|,
literal|6
block|,
literal|7
block|,
comment|/* 4   5   6   7   */
literal|8
block|,
literal|9
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* 8   9   :   ;   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/*<   =>   ?   */
name|_hex_bad
block|,
literal|10
block|,
literal|11
block|,
literal|12
block|,
comment|/* @   A   B   C   */
literal|13
block|,
literal|14
block|,
literal|15
block|,
name|_hex_bad
block|,
comment|/* D   E   F   G   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* H   I   J   K   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* L   M   N   O   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* P   Q   R   S   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* T   U   V   W   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* X   Y   Z   [   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* \   ]   ^   _   */
name|_hex_bad
block|,
literal|10
block|,
literal|11
block|,
literal|12
block|,
comment|/* `   a   b   c   */
literal|13
block|,
literal|14
block|,
literal|15
block|,
name|_hex_bad
block|,
comment|/* d   e   f   g   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* h   i   j   k   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* l   m   n   o   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* p   q   r   s   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* t   u   v   w   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* x   y   z   {   */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
comment|/* |   }   ~   DEL */
comment|/* The high half of unsigned char, all values are _hex_bad.  */
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|,
name|_hex_bad
block|, }
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|HEX_TABLE_INITIALIZED
end_define

begin_else
else|#
directive|else
end_else

begin_decl_stmt
name|char
name|_hex_value
index|[
name|_hex_array_size
index|]
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not ASCII */
end_comment

begin_function
name|void
name|hex_init
parameter_list|()
block|{
ifndef|#
directive|ifndef
name|HEX_TABLE_INITIALIZED
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|_hex_array_size
condition|;
name|i
operator|++
control|)
block|{
switch|switch
condition|(
name|i
condition|)
block|{
case|case
literal|'0'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|0
expr_stmt|;
break|break;
case|case
literal|'1'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|1
expr_stmt|;
break|break;
case|case
literal|'2'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|2
expr_stmt|;
break|break;
case|case
literal|'3'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|3
expr_stmt|;
break|break;
case|case
literal|'4'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|4
expr_stmt|;
break|break;
case|case
literal|'5'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|5
expr_stmt|;
break|break;
case|case
literal|'6'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|6
expr_stmt|;
break|break;
case|case
literal|'7'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|7
expr_stmt|;
break|break;
case|case
literal|'8'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|8
expr_stmt|;
break|break;
case|case
literal|'9'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|9
expr_stmt|;
break|break;
case|case
literal|'a'
case|:
case|case
literal|'A'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|10
expr_stmt|;
break|break;
case|case
literal|'b'
case|:
case|case
literal|'B'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|11
expr_stmt|;
break|break;
case|case
literal|'c'
case|:
case|case
literal|'C'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|12
expr_stmt|;
break|break;
case|case
literal|'d'
case|:
case|case
literal|'D'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|13
expr_stmt|;
break|break;
case|case
literal|'e'
case|:
case|case
literal|'E'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|14
expr_stmt|;
break|break;
case|case
literal|'f'
case|:
case|case
literal|'F'
case|:
name|_hex_value
index|[
name|i
index|]
operator|=
literal|15
expr_stmt|;
break|break;
default|default:
name|_hex_value
index|[
name|i
index|]
operator|=
name|_hex_bad
expr_stmt|;
break|break;
block|}
block|}
endif|#
directive|endif
block|}
end_function

end_unit

