begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|"ntp_calendar.h"
end_include

begin_include
include|#
directive|include
file|"unity.h"
end_include

begin_function_decl
name|void
name|test_DateGivenMonthDay
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|test_DateGivenYearDay
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|test_DateLeapYear
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|test_WraparoundDateIn2036
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function
name|void
name|test_DateGivenMonthDay
parameter_list|(
name|void
parameter_list|)
block|{
comment|// 2010-06-24 12:50:00
name|struct
name|calendar
name|input
init|=
block|{
literal|2010
block|,
literal|0
block|,
literal|6
block|,
literal|24
block|,
literal|12
block|,
literal|50
block|,
literal|0
block|}
decl_stmt|;
name|u_long
name|expected
init|=
literal|3486372600UL
decl_stmt|;
comment|// This is the timestamp above.
name|TEST_ASSERT_EQUAL_UINT
argument_list|(
name|expected
argument_list|,
name|caltontp
argument_list|(
operator|&
name|input
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|test_DateGivenYearDay
parameter_list|(
name|void
parameter_list|)
block|{
comment|// 2010-06-24 12:50:00
comment|// This is the 175th day of 2010.
name|struct
name|calendar
name|input
init|=
block|{
literal|2010
block|,
literal|175
block|,
literal|0
block|,
literal|0
block|,
literal|12
block|,
literal|50
block|,
literal|0
block|}
decl_stmt|;
name|u_long
name|expected
init|=
literal|3486372600UL
decl_stmt|;
comment|// This is the timestamp above.
name|TEST_ASSERT_EQUAL_UINT
argument_list|(
name|expected
argument_list|,
name|caltontp
argument_list|(
operator|&
name|input
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|test_DateLeapYear
parameter_list|(
name|void
parameter_list|)
block|{
comment|// 2012-06-24 12:00:00
comment|// This is the 176th day of 2012 (since 2012 is a leap year).
name|struct
name|calendar
name|inputYd
init|=
block|{
literal|2012
block|,
literal|176
block|,
literal|0
block|,
literal|0
block|,
literal|12
block|,
literal|00
block|,
literal|00
block|}
decl_stmt|;
name|struct
name|calendar
name|inputMd
init|=
block|{
literal|2012
block|,
literal|0
block|,
literal|6
block|,
literal|24
block|,
literal|12
block|,
literal|00
block|,
literal|00
block|}
decl_stmt|;
name|u_long
name|expected
init|=
literal|3549528000UL
decl_stmt|;
name|TEST_ASSERT_EQUAL_UINT
argument_list|(
name|expected
argument_list|,
name|caltontp
argument_list|(
operator|&
name|inputYd
argument_list|)
argument_list|)
expr_stmt|;
name|TEST_ASSERT_EQUAL_UINT
argument_list|(
name|expected
argument_list|,
name|caltontp
argument_list|(
operator|&
name|inputMd
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|test_WraparoundDateIn2036
parameter_list|(
name|void
parameter_list|)
block|{
comment|// 2036-02-07 06:28:16
comment|// This is (one) wrapping boundary where we go from ULONG_MAX to 0.
name|struct
name|calendar
name|input
init|=
block|{
literal|2036
block|,
literal|0
block|,
literal|2
block|,
literal|7
block|,
literal|6
block|,
literal|28
block|,
literal|16
block|}
decl_stmt|;
name|u_long
name|expected
init|=
literal|0UL
decl_stmt|;
name|TEST_ASSERT_EQUAL_UINT
argument_list|(
name|expected
argument_list|,
name|caltontp
argument_list|(
operator|&
name|input
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

