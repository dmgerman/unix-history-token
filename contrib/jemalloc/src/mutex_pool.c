begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_define
define|#
directive|define
name|JEMALLOC_MUTEX_POOL_C_
end_define

begin_include
include|#
directive|include
file|"jemalloc/internal/jemalloc_preamble.h"
end_include

begin_include
include|#
directive|include
file|"jemalloc/internal/jemalloc_internal_includes.h"
end_include

begin_include
include|#
directive|include
file|"jemalloc/internal/mutex.h"
end_include

begin_include
include|#
directive|include
file|"jemalloc/internal/mutex_pool.h"
end_include

begin_function
name|bool
name|mutex_pool_init
parameter_list|(
name|mutex_pool_t
modifier|*
name|pool
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|witness_rank_t
name|rank
parameter_list|)
block|{
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|MUTEX_POOL_SIZE
condition|;
operator|++
name|i
control|)
block|{
if|if
condition|(
name|malloc_mutex_init
argument_list|(
operator|&
name|pool
operator|->
name|mutexes
index|[
name|i
index|]
argument_list|,
name|name
argument_list|,
name|rank
argument_list|,
name|malloc_mutex_address_ordered
argument_list|)
condition|)
block|{
return|return
name|true
return|;
block|}
block|}
return|return
name|false
return|;
block|}
end_function

end_unit

