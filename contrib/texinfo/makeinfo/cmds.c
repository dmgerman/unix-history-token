begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* cmds.c -- Texinfo commands.    $Id: cmds.c,v 1.57 1999/09/19 16:39:35 karl Exp $     Copyright (C) 1998, 99 Free Software Foundation, Inc.     This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2, or (at your option)    any later version.     This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software Foundation,    Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"system.h"
end_include

begin_include
include|#
directive|include
file|"cmds.h"
end_include

begin_include
include|#
directive|include
file|"defun.h"
end_include

begin_include
include|#
directive|include
file|"files.h"
end_include

begin_include
include|#
directive|include
file|"footnote.h"
end_include

begin_include
include|#
directive|include
file|"insertion.h"
end_include

begin_include
include|#
directive|include
file|"lang.h"
end_include

begin_include
include|#
directive|include
file|"macro.h"
end_include

begin_include
include|#
directive|include
file|"makeinfo.h"
end_include

begin_include
include|#
directive|include
file|"node.h"
end_include

begin_include
include|#
directive|include
file|"sectioning.h"
end_include

begin_include
include|#
directive|include
file|"toc.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|TM_IN_SYS_TIME
end_ifdef

begin_include
include|#
directive|include
file|<sys/time.h>
end_include

begin_else
else|#
directive|else
end_else

begin_include
include|#
directive|include
file|<time.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_decl_stmt
name|void
name|insert_self
argument_list|()
decl_stmt|,
name|insert_space
argument_list|()
decl_stmt|,
name|cm_ignore_line
argument_list|()
decl_stmt|,
name|cm_ignore_arg
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|void
name|cm_TeX
argument_list|()
decl_stmt|,
name|cm_acronym
argument_list|()
decl_stmt|,
name|cm_asterisk
argument_list|()
decl_stmt|,
name|cm_b
argument_list|()
decl_stmt|,
name|cm_bullet
argument_list|()
decl_stmt|,
name|cm_cite
argument_list|()
decl_stmt|,
name|cm_code
argument_list|()
decl_stmt|,
name|cm_copyright
argument_list|()
decl_stmt|,
name|cm_ctrl
argument_list|()
decl_stmt|,
name|cm_dfn
argument_list|()
decl_stmt|,
name|cm_dircategory
argument_list|()
decl_stmt|,
name|cm_direntry
argument_list|()
decl_stmt|,
name|cm_dmn
argument_list|()
decl_stmt|,
name|cm_dots
argument_list|()
decl_stmt|,
name|cm_emph
argument_list|()
decl_stmt|,
name|cm_enddots
argument_list|()
decl_stmt|,
name|cm_i
argument_list|()
decl_stmt|,
name|cm_image
argument_list|()
decl_stmt|,
name|cm_kbd
argument_list|()
decl_stmt|,
name|cm_key
argument_list|()
decl_stmt|,
name|cm_no_op
argument_list|()
decl_stmt|,
name|cm_novalidate
argument_list|()
decl_stmt|,
name|cm_not_fixed_width
argument_list|()
decl_stmt|,
name|cm_r
argument_list|()
decl_stmt|,
name|cm_strong
argument_list|()
decl_stmt|,
name|cm_var
argument_list|()
decl_stmt|,
name|cm_sc
argument_list|()
decl_stmt|,
name|cm_w
argument_list|()
decl_stmt|,
name|cm_email
argument_list|()
decl_stmt|,
name|cm_url
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|void
name|cm_anchor
argument_list|()
decl_stmt|,
name|cm_node
argument_list|()
decl_stmt|,
name|cm_menu
argument_list|()
decl_stmt|,
name|cm_xref
argument_list|()
decl_stmt|,
name|cm_ftable
argument_list|()
decl_stmt|,
name|cm_vtable
argument_list|()
decl_stmt|,
name|cm_pxref
argument_list|()
decl_stmt|,
name|cm_inforef
argument_list|()
decl_stmt|,
name|cm_uref
argument_list|()
decl_stmt|,
name|cm_email
argument_list|()
decl_stmt|,
name|cm_quotation
argument_list|()
decl_stmt|,
name|cm_display
argument_list|()
decl_stmt|,
name|cm_smalldisplay
argument_list|()
decl_stmt|,
name|cm_itemize
argument_list|()
decl_stmt|,
name|cm_enumerate
argument_list|()
decl_stmt|,
name|cm_tab
argument_list|()
decl_stmt|,
name|cm_table
argument_list|()
decl_stmt|,
name|cm_itemx
argument_list|()
decl_stmt|,
name|cm_noindent
argument_list|()
decl_stmt|,
name|cm_setfilename
argument_list|()
decl_stmt|,
name|cm_br
argument_list|()
decl_stmt|,
name|cm_sp
argument_list|()
decl_stmt|,
name|cm_page
argument_list|()
decl_stmt|,
name|cm_group
argument_list|()
decl_stmt|,
name|cm_center
argument_list|()
decl_stmt|,
name|cm_ref
argument_list|()
decl_stmt|,
name|cm_include
argument_list|()
decl_stmt|,
name|cm_bye
argument_list|()
decl_stmt|,
name|cm_item
argument_list|()
decl_stmt|,
name|cm_end
argument_list|()
decl_stmt|,
name|cm_kindex
argument_list|()
decl_stmt|,
name|cm_cindex
argument_list|()
decl_stmt|,
name|cm_findex
argument_list|()
decl_stmt|,
name|cm_pindex
argument_list|()
decl_stmt|,
name|cm_vindex
argument_list|()
decl_stmt|,
name|cm_tindex
argument_list|()
decl_stmt|,
name|cm_synindex
argument_list|()
decl_stmt|,
name|cm_printindex
argument_list|()
decl_stmt|,
name|cm_minus
argument_list|()
decl_stmt|,
name|cm_example
argument_list|()
decl_stmt|,
name|cm_smallexample
argument_list|()
decl_stmt|,
name|cm_smalllisp
argument_list|()
decl_stmt|,
name|cm_lisp
argument_list|()
decl_stmt|,
name|cm_format
argument_list|()
decl_stmt|,
name|cm_smallformat
argument_list|()
decl_stmt|,
name|cm_exdent
argument_list|()
decl_stmt|,
name|cm_defindex
argument_list|()
decl_stmt|,
name|cm_defcodeindex
argument_list|()
decl_stmt|,
name|cm_result
argument_list|()
decl_stmt|,
name|cm_expansion
argument_list|()
decl_stmt|,
name|cm_equiv
argument_list|()
decl_stmt|,
name|cm_print
argument_list|()
decl_stmt|,
name|cm_error
argument_list|()
decl_stmt|,
name|cm_point
argument_list|()
decl_stmt|,
name|cm_today
argument_list|()
decl_stmt|,
name|cm_flushleft
argument_list|()
decl_stmt|,
name|cm_flushright
argument_list|()
decl_stmt|,
name|cm_finalout
argument_list|()
decl_stmt|,
name|cm_cartouche
argument_list|()
decl_stmt|,
name|cm_detailmenu
argument_list|()
decl_stmt|,
name|cm_multitable
argument_list|()
decl_stmt|,
name|cm_settitle
argument_list|()
decl_stmt|,
name|cm_titlefont
argument_list|()
decl_stmt|,
name|cm_tt
argument_list|()
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Conditionals. */
end_comment

begin_decl_stmt
name|void
name|cm_set
argument_list|()
decl_stmt|,
name|cm_clear
argument_list|()
decl_stmt|,
name|cm_ifset
argument_list|()
decl_stmt|,
name|cm_ifclear
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|void
name|cm_value
argument_list|()
decl_stmt|,
name|cm_ifeq
argument_list|()
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Options. */
end_comment

begin_decl_stmt
specifier|static
name|void
name|cm_paragraphindent
argument_list|()
decl_stmt|,
name|cm_exampleindent
argument_list|()
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Internals. */
end_comment

begin_function_decl
specifier|static
name|void
name|cm_obsolete
parameter_list|()
function_decl|;
end_function_decl

begin_comment
comment|/* A random string.  */
end_comment

begin_decl_stmt
specifier|static
specifier|const
name|char
name|small_tag
index|[]
init|=
literal|"small"
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* The dispatch table.  */
end_comment

begin_decl_stmt
name|COMMAND
name|command_table
index|[]
init|=
block|{
block|{
literal|"\t"
block|,
name|insert_space
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"\n"
block|,
name|insert_space
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|" "
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"!"
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"\""
block|,
name|cm_accent_umlaut
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"'"
block|,
name|cm_accent_acute
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"*"
block|,
name|cm_asterisk
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|","
block|,
name|cm_accent_cedilla
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"-"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"."
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|":"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"="
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"?"
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"@"
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"^"
block|,
name|cm_accent_hat
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"`"
block|,
name|cm_accent_grave
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"{"
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"|"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"}"
block|,
name|insert_self
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"~"
block|,
name|cm_accent_tilde
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"AA"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"AE"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"H"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"L"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"O"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"OE"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"TeX"
block|,
name|cm_TeX
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"aa"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"acronym"
block|,
name|cm_acronym
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"ae"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"afourpaper"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"alias"
block|,
name|cm_alias
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"anchor"
block|,
name|cm_anchor
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"appendix"
block|,
name|cm_appendix
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"appendixsection"
block|,
name|cm_appendixsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"appendixsec"
block|,
name|cm_appendixsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"appendixsubsec"
block|,
name|cm_appendixsubsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"appendixsubsubsec"
block|,
name|cm_appendixsubsubsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"asis"
block|,
name|cm_no_op
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"b"
block|,
name|cm_b
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"bullet"
block|,
name|cm_bullet
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"bye"
block|,
name|cm_bye
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"c"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"cartouche"
block|,
name|cm_cartouche
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"center"
block|,
name|cm_center
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"centerchap"
block|,
name|cm_unnumbered
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"chapheading"
block|,
name|cm_chapheading
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"chapter"
block|,
name|cm_chapter
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"cindex"
block|,
name|cm_cindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"cite"
block|,
name|cm_cite
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"clear"
block|,
name|cm_clear
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"code"
block|,
name|cm_code
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"command"
block|,
name|cm_code
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"comment"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"contents"
block|,
name|cm_contents
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"copyright"
block|,
name|cm_copyright
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"ctrl"
block|,
name|cm_obsolete
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"defcodeindex"
block|,
name|cm_defcodeindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defcv"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defcvx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deffn"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deffnx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defindex"
block|,
name|cm_defindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"definfoenclose"
block|,
name|cm_definfoenclose
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defivar"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defivarx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defmac"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defmacx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defmethod"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defmethodx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defop"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defopt"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defoptx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defopx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defspec"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defspecx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftp"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftpx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypefn"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypefnx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypefun"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypefunx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypeivar"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypeivarx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypemethod"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypemethodx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypeop"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypeopx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypevar"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypevarx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypevr"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"deftypevrx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defun"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defunx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defvar"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defvarx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defvr"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"defvrx"
block|,
name|cm_defun
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"detailmenu"
block|,
name|cm_detailmenu
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"dfn"
block|,
name|cm_dfn
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"dircategory"
block|,
name|cm_dircategory
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"direntry"
block|,
name|cm_direntry
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"display"
block|,
name|cm_display
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"dmn"
block|,
name|cm_no_op
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"documentencoding"
block|,
name|cm_documentencoding
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"documentlanguage"
block|,
name|cm_documentlanguage
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"dotaccent"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"dotless"
block|,
name|cm_dotless
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"dots"
block|,
name|cm_dots
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"email"
block|,
name|cm_email
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"emph"
block|,
name|cm_emph
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"end"
block|,
name|cm_end
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"enddots"
block|,
name|cm_enddots
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"enumerate"
block|,
name|cm_enumerate
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"env"
block|,
name|cm_code
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"equiv"
block|,
name|cm_equiv
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"error"
block|,
name|cm_error
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"example"
block|,
name|cm_example
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"exampleindent"
block|,
name|cm_exampleindent
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"exclamdown"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"exdent"
block|,
name|cm_exdent
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"expansion"
block|,
name|cm_expansion
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"file"
block|,
name|cm_code
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"finalout"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"findex"
block|,
name|cm_findex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"flushleft"
block|,
name|cm_flushleft
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"flushright"
block|,
name|cm_flushright
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"footnote"
block|,
name|cm_footnote
block|,
name|NO_BRACE_ARGS
block|}
block|,
comment|/* self-arg eater */
block|{
literal|"footnotestyle"
block|,
name|cm_footnotestyle
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"format"
block|,
name|cm_format
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ftable"
block|,
name|cm_ftable
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"group"
block|,
name|cm_group
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"heading"
block|,
name|cm_heading
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"headings"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"html"
block|,
name|cm_html
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"hyphenation"
block|,
name|cm_ignore_arg
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"i"
block|,
name|cm_i
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"ifclear"
block|,
name|cm_ifclear
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifeq"
block|,
name|cm_ifeq
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifhtml"
block|,
name|cm_ifhtml
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifinfo"
block|,
name|cm_ifinfo
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifnothtml"
block|,
name|cm_ifnothtml
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifnotinfo"
block|,
name|cm_ifnotinfo
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifnottex"
block|,
name|cm_ifnottex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ifset"
block|,
name|cm_ifset
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iftex"
block|,
name|cm_iftex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ignore"
block|,
name|command_name_condition
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"image"
block|,
name|cm_image
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"include"
block|,
name|cm_include
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"inforef"
block|,
name|cm_inforef
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"item"
block|,
name|cm_item
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"itemize"
block|,
name|cm_itemize
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"itemx"
block|,
name|cm_itemx
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"kbd"
block|,
name|cm_kbd
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"kbdinputstyle"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"key"
block|,
name|cm_key
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"kindex"
block|,
name|cm_kindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"l"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"lisp"
block|,
name|cm_lisp
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"lowersections"
block|,
name|cm_lowersections
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"macro"
block|,
name|cm_macro
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"majorheading"
block|,
name|cm_majorheading
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"math"
block|,
name|cm_no_op
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"menu"
block|,
name|cm_menu
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"minus"
block|,
name|cm_minus
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"multitable"
block|,
name|cm_multitable
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"need"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"node"
block|,
name|cm_node
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"noindent"
block|,
name|cm_noindent
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"noindent"
block|,
name|cm_novalidate
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"nwnode"
block|,
name|cm_node
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"o"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"oe"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"option"
block|,
name|cm_code
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"page"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"pagesizes"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"paragraphindent"
block|,
name|cm_paragraphindent
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"pindex"
block|,
name|cm_pindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"point"
block|,
name|cm_point
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"pounds"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"print"
block|,
name|cm_print
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"printindex"
block|,
name|cm_printindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"pxref"
block|,
name|cm_pxref
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"questiondown"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"quotation"
block|,
name|cm_quotation
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"r"
block|,
name|cm_r
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"raisesections"
block|,
name|cm_raisesections
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ref"
block|,
name|cm_ref
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"refill"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"result"
block|,
name|cm_result
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"ringaccent"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"rmacro"
block|,
name|cm_rmacro
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"samp"
block|,
name|cm_code
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"sc"
block|,
name|cm_sc
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"section"
block|,
name|cm_section
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"set"
block|,
name|cm_set
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"setchapternewpage"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"setchapterstyle"
block|,
name|cm_obsolete
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"setcontentsaftertitlepage"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"setfilename"
block|,
name|cm_setfilename
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"setshortcontentsaftertitlepage"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"settitle"
block|,
name|cm_settitle
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"shortcontents"
block|,
name|cm_shortcontents
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"shorttitlepage"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"smallbook"
block|,
name|cm_ignore_line
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"smalldisplay"
block|,
name|cm_smalldisplay
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"smallexample"
block|,
name|cm_smallexample
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"smallformat"
block|,
name|cm_smallformat
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"smalllisp"
block|,
name|cm_smalllisp
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"sp"
block|,
name|cm_sp
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ss"
block|,
name|cm_special_char
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"strong"
block|,
name|cm_strong
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"subheading"
block|,
name|cm_subheading
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"subsection"
block|,
name|cm_subsection
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"subsubheading"
block|,
name|cm_subsubheading
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"subsubsection"
block|,
name|cm_subsubsection
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"summarycontents"
block|,
name|cm_no_op
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"syncodeindex"
block|,
name|cm_synindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"synindex"
block|,
name|cm_synindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"t"
block|,
name|cm_tt
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"tab"
block|,
name|cm_tab
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"table"
block|,
name|cm_table
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"tex"
block|,
name|cm_tex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"tieaccent"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"tindex"
block|,
name|cm_tindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"titlefont"
block|,
name|cm_titlefont
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"titlepage"
block|,
name|command_name_condition
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"today"
block|,
name|cm_today
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"top"
block|,
name|cm_top
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"u"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"ubaraccent"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"udotaccent"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"unmacro"
block|,
name|cm_unmacro
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"unnumbered"
block|,
name|cm_unnumbered
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"unnumberedsec"
block|,
name|cm_unnumberedsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"unnumberedsubsec"
block|,
name|cm_unnumberedsubsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"unnumberedsubsubsec"
block|,
name|cm_unnumberedsubsubsec
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"uref"
block|,
name|cm_uref
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"url"
block|,
name|cm_url
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"v"
block|,
name|cm_accent
block|,
name|MAYBE_BRACE_ARGS
block|}
block|,
block|{
literal|"value"
block|,
name|cm_value
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"var"
block|,
name|cm_var
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"vindex"
block|,
name|cm_vindex
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"vtable"
block|,
name|cm_vtable
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"w"
block|,
name|cm_w
block|,
name|BRACE_ARGS
block|}
block|,
block|{
literal|"xref"
block|,
name|cm_xref
block|,
name|BRACE_ARGS
block|}
block|,
comment|/* Deprecated commands.  These used to be for italics.  */
block|{
literal|"iappendix"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iappendixsec"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iappendixsection"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iappendixsubsec"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iappendixsubsubsec"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"ichapter"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"isection"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"isubsection"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"isubsubsection"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iunnumbered"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iunnumberedsec"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iunnumberedsubsec"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"iunnumberedsubsubsec"
block|,
name|cm_ideprecated
block|,
name|NO_BRACE_ARGS
block|}
block|,
comment|/* Now @include does what this was used to. */
block|{
literal|"infoinclude"
block|,
name|cm_obsolete
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
literal|"titlespec"
block|,
name|cm_obsolete
block|,
name|NO_BRACE_ARGS
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
name|NO_BRACE_ARGS
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_escape
end_escape

begin_comment
comment|/* The bulk of the Texinfo commands. */
end_comment

begin_comment
comment|/* Commands which insert their own names. */
end_comment

begin_function
name|void
name|insert_self
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_word
argument_list|(
name|command
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|insert_space
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_char
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Force a line break in the output. */
end_comment

begin_function
name|void
name|cm_asterisk
parameter_list|()
block|{
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"<br>"
argument_list|)
expr_stmt|;
else|else
block|{
name|close_single_paragraph
argument_list|()
expr_stmt|;
name|cm_noindent
argument_list|()
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/* Insert ellipsis. */
end_comment

begin_function
name|void
name|cm_dots
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_word
argument_list|(
name|html
condition|?
literal|"<small>...</small>"
else|:
literal|"..."
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Insert ellipsis for sentence end. */
end_comment

begin_function
name|void
name|cm_enddots
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_word
argument_list|(
name|html
condition|?
literal|"<small>...</small>."
else|:
literal|"...."
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_bullet
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
block|{
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"&#149;"
argument_list|)
expr_stmt|;
else|else
name|add_char
argument_list|(
literal|'*'
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|cm_minus
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_char
argument_list|(
literal|'-'
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Insert "TeX". */
end_comment

begin_function
name|void
name|cm_TeX
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_word
argument_list|(
literal|"TeX"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Copyright symbol.  */
end_comment

begin_function
name|void
name|cm_copyright
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"&copy;"
argument_list|)
expr_stmt|;
else|else
name|add_word
argument_list|(
literal|"(C)"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_today
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
specifier|static
name|char
modifier|*
name|months
index|[
literal|12
index|]
init|=
block|{
name|N_
argument_list|(
literal|"January"
argument_list|)
block|,
name|N_
argument_list|(
literal|"February"
argument_list|)
block|,
name|N_
argument_list|(
literal|"March"
argument_list|)
block|,
name|N_
argument_list|(
literal|"April"
argument_list|)
block|,
name|N_
argument_list|(
literal|"May"
argument_list|)
block|,
name|N_
argument_list|(
literal|"June"
argument_list|)
block|,
name|N_
argument_list|(
literal|"July"
argument_list|)
block|,
name|N_
argument_list|(
literal|"August"
argument_list|)
block|,
name|N_
argument_list|(
literal|"September"
argument_list|)
block|,
name|N_
argument_list|(
literal|"October"
argument_list|)
block|,
name|N_
argument_list|(
literal|"November"
argument_list|)
block|,
name|N_
argument_list|(
literal|"December"
argument_list|)
block|}
decl_stmt|;
if|if
condition|(
name|arg
operator|==
name|START
condition|)
block|{
name|time_t
name|timer
init|=
name|time
argument_list|(
literal|0
argument_list|)
decl_stmt|;
name|struct
name|tm
modifier|*
name|ts
init|=
name|localtime
argument_list|(
operator|&
name|timer
argument_list|)
decl_stmt|;
name|add_word_args
argument_list|(
literal|"%d %s %d"
argument_list|,
name|ts
operator|->
name|tm_mday
argument_list|,
name|_
argument_list|(
name|months
index|[
name|ts
operator|->
name|tm_mon
index|]
argument_list|)
argument_list|,
name|ts
operator|->
name|tm_year
operator|+
literal|1900
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|cm_acronym
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
name|small_tag
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_tt
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
comment|/* @t{} is a no-op in Info.  */
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"tt"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_code
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
specifier|extern
name|int
name|printing_index
decl_stmt|;
if|if
condition|(
name|arg
operator|==
name|START
condition|)
block|{
name|in_fixed_width_font
operator|++
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"code"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|printing_index
condition|)
name|add_char
argument_list|(
literal|'`'
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"code"
argument_list|)
expr_stmt|;
else|else
block|{
if|if
condition|(
operator|!
name|printing_index
condition|)
name|add_meta_char
argument_list|(
literal|'\''
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|cm_kbd
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
block|{
comment|/* Seems like we should increment in_fixed_width_font for Info          format too, but then the quote-omitting special case gets          confused.  Punt.  */
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|in_fixed_width_font
operator|++
expr_stmt|;
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"kbd"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/* People use @kbd in an example to get the "user input" font.          We don't want quotes in that case.  */
if|if
condition|(
operator|!
name|in_fixed_width_font
condition|)
name|cm_code
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|cm_url
parameter_list|(
name|arg
parameter_list|,
name|start
parameter_list|,
name|end
parameter_list|)
block|{
if|if
condition|(
name|html
condition|)
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_word
argument_list|(
literal|"&lt;<code>"
argument_list|)
expr_stmt|;
else|else
name|add_word
argument_list|(
literal|"</code>&gt;"
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_word
argument_list|(
literal|"<"
argument_list|)
expr_stmt|;
else|else
name|add_word
argument_list|(
literal|">"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_key
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
name|arg
operator|==
name|START
condition|?
literal|"&lt;"
else|:
literal|"&gt;"
argument_list|)
expr_stmt|;
else|else
name|add_char
argument_list|(
name|arg
operator|==
name|START
condition|?
literal|'<'
else|:
literal|'>'
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Handle a command that switches to a non-fixed-width font.  */
end_comment

begin_function
name|void
name|not_fixed_width
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|in_fixed_width_font
operator|=
literal|0
expr_stmt|;
block|}
end_function

begin_comment
comment|/* @var in makeinfo just uppercases the text. */
end_comment

begin_function
name|void
name|cm_var
parameter_list|(
name|arg
parameter_list|,
name|start_pos
parameter_list|,
name|end_pos
parameter_list|)
name|int
name|arg
decl_stmt|,
name|start_pos
decl_stmt|,
name|end_pos
decl_stmt|;
block|{
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"var"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|arg
operator|==
name|END
condition|)
block|{
while|while
condition|(
name|start_pos
operator|<
name|end_pos
condition|)
block|{
name|unsigned
name|char
name|c
init|=
name|output_paragraph
index|[
name|start_pos
index|]
decl_stmt|;
if|if
condition|(
name|strchr
argument_list|(
literal|"[](),"
argument_list|,
name|c
argument_list|)
condition|)
name|warning
argument_list|(
name|_
argument_list|(
literal|"unlikely character %c in @var"
argument_list|)
argument_list|,
name|c
argument_list|)
expr_stmt|;
name|output_paragraph
index|[
name|start_pos
index|]
operator|=
name|coerce_to_upper
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|start_pos
operator|++
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
name|cm_sc
parameter_list|(
name|arg
parameter_list|,
name|start_pos
parameter_list|,
name|end_pos
parameter_list|)
name|int
name|arg
decl_stmt|,
name|start_pos
decl_stmt|,
name|end_pos
decl_stmt|;
block|{
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
if|if
condition|(
name|arg
operator|==
name|START
condition|)
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
name|small_tag
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|int
name|all_upper
init|=
literal|1
decl_stmt|;
if|if
condition|(
name|html
condition|)
name|start_pos
operator|+=
sizeof|sizeof
argument_list|(
name|small_tag
argument_list|)
operator|+
literal|2
operator|-
literal|1
expr_stmt|;
comment|/* skip<small> */
while|while
condition|(
name|start_pos
operator|<
name|end_pos
condition|)
block|{
name|unsigned
name|char
name|c
init|=
name|output_paragraph
index|[
name|start_pos
index|]
decl_stmt|;
if|if
condition|(
operator|!
name|isupper
argument_list|(
name|c
argument_list|)
condition|)
name|all_upper
operator|=
literal|0
expr_stmt|;
name|output_paragraph
index|[
name|start_pos
index|]
operator|=
name|coerce_to_upper
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|start_pos
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|all_upper
condition|)
name|warning
argument_list|(
name|_
argument_list|(
literal|"@sc argument all uppercase, thus no effect"
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
name|small_tag
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|cm_dfn
parameter_list|(
name|arg
parameter_list|,
name|position
parameter_list|)
name|int
name|arg
decl_stmt|,
name|position
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"dfn"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_char
argument_list|(
literal|'"'
argument_list|)
expr_stmt|;
else|else
name|add_meta_char
argument_list|(
literal|'"'
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_emph
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"em"
argument_list|)
expr_stmt|;
else|else
name|add_char
argument_list|(
literal|'_'
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_strong
parameter_list|(
name|arg
parameter_list|,
name|position
parameter_list|)
name|int
name|arg
decl_stmt|,
name|position
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"strong"
argument_list|)
expr_stmt|;
else|else
name|add_char
argument_list|(
literal|'*'
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_cite
parameter_list|(
name|arg
parameter_list|,
name|position
parameter_list|)
name|int
name|arg
decl_stmt|,
name|position
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"cite"
argument_list|)
expr_stmt|;
else|else
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|add_char
argument_list|(
literal|'`'
argument_list|)
expr_stmt|;
else|else
name|add_char
argument_list|(
literal|'\''
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/* No highlighting, but argument switches fonts.  */
end_comment

begin_function
name|void
name|cm_not_fixed_width
parameter_list|(
name|arg
parameter_list|,
name|start
parameter_list|,
name|end
parameter_list|)
name|int
name|arg
decl_stmt|,
name|start
decl_stmt|,
name|end
decl_stmt|;
block|{
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_i
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"i"
argument_list|)
expr_stmt|;
else|else
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_b
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|html
condition|)
name|insert_html_tag
argument_list|(
name|arg
argument_list|,
literal|"b"
argument_list|)
expr_stmt|;
else|else
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_r
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
specifier|extern
name|int
name|printing_index
decl_stmt|;
comment|/* People use @r{} in index entries like this:       @findex foo@r{, some text}       This is supposed to produce output as if the entry were saying      "@code{foo}, some text", since the "fn" index is typeset as      @code.  The following attempts to do the same in HTML.  Note that      this relies on the fact that only @code bumps up the variable      in_fixed_width_font while processing index entries in HTML mode.  */
if|if
condition|(
name|html
operator|&&
name|printing_index
condition|)
block|{
name|int
name|level
init|=
name|in_fixed_width_font
decl_stmt|;
while|while
condition|(
name|level
operator|--
condition|)
name|insert_html_tag
argument_list|(
name|arg
operator|==
name|START
condition|?
name|END
else|:
name|START
argument_list|,
literal|"code"
argument_list|)
expr_stmt|;
block|}
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_titlefont
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
name|not_fixed_width
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Various commands are no-op's. */
end_comment

begin_function
name|void
name|cm_no_op
parameter_list|()
block|{ }
end_function

begin_comment
comment|/* For proofing single chapters, etc.  */
end_comment

begin_function
name|void
name|cm_novalidate
parameter_list|()
block|{
name|validating
operator|=
literal|0
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Prevent the argument from being split across two lines. */
end_comment

begin_function
name|void
name|cm_w
parameter_list|(
name|arg
parameter_list|,
name|start
parameter_list|,
name|end
parameter_list|)
name|int
name|arg
decl_stmt|,
name|start
decl_stmt|,
name|end
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|non_splitting_words
operator|++
expr_stmt|;
else|else
name|non_splitting_words
operator|--
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Explain that this command is obsolete, thus the user shouldn't    do anything with it. */
end_comment

begin_function
specifier|static
name|void
name|cm_obsolete
parameter_list|(
name|arg
parameter_list|,
name|start
parameter_list|,
name|end
parameter_list|)
name|int
name|arg
decl_stmt|,
name|start
decl_stmt|,
name|end
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|START
condition|)
name|warning
argument_list|(
name|_
argument_list|(
literal|"%c%s is obsolete"
argument_list|)
argument_list|,
name|COMMAND_PREFIX
argument_list|,
name|command
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* This says to inhibit the indentation of the next paragraph, but    not of following paragraphs.  */
end_comment

begin_function
name|void
name|cm_noindent
parameter_list|()
block|{
if|if
condition|(
operator|!
name|inhibit_paragraph_indentation
condition|)
name|inhibit_paragraph_indentation
operator|=
operator|-
literal|1
expr_stmt|;
block|}
end_function

begin_comment
comment|/* I don't know exactly what to do with this.  Should I allow    someone to switch filenames in the middle of output?  Since the    file could be partially written, this doesn't seem to make sense.    Another option: ignore it, since they don't *really* want to    switch files.  Finally, complain, or at least warn.  It doesn't    really matter, anyway, since this doesn't get executed.  */
end_comment

begin_function
name|void
name|cm_setfilename
parameter_list|()
block|{
name|char
modifier|*
name|filename
decl_stmt|;
name|get_rest_of_line
argument_list|(
literal|1
argument_list|,
operator|&
name|filename
argument_list|)
expr_stmt|;
comment|/* warning ("`@%s %s' encountered and ignored", command, filename); */
name|free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cm_settitle
parameter_list|()
block|{
name|get_rest_of_line
argument_list|(
literal|0
argument_list|,
operator|&
name|title
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Ignore argument in braces.  */
end_comment

begin_function
name|void
name|cm_ignore_arg
parameter_list|(
name|arg
parameter_list|,
name|start_pos
parameter_list|,
name|end_pos
parameter_list|)
name|int
name|arg
decl_stmt|,
name|start_pos
decl_stmt|,
name|end_pos
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|output_paragraph_offset
operator|=
name|start_pos
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Ignore argument on rest of line.  */
end_comment

begin_function
name|void
name|cm_ignore_line
parameter_list|()
block|{
name|discard_until
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Insert the number of blank lines passed as argument. */
end_comment

begin_function
name|void
name|cm_sp
parameter_list|()
block|{
name|int
name|lines
decl_stmt|;
name|char
modifier|*
name|line
decl_stmt|;
name|get_rest_of_line
argument_list|(
literal|1
argument_list|,
operator|&
name|line
argument_list|)
expr_stmt|;
if|if
condition|(
name|sscanf
argument_list|(
name|line
argument_list|,
literal|"%d"
argument_list|,
operator|&
name|lines
argument_list|)
operator|!=
literal|1
operator|||
name|lines
operator|<=
literal|0
condition|)
name|line_error
argument_list|(
name|_
argument_list|(
literal|"@sp requires a positive numeric argument, not `%s'"
argument_list|)
argument_list|,
name|line
argument_list|)
expr_stmt|;
else|else
block|{
comment|/* Must disable filling since otherwise multiple newlines is like          multiple spaces.  Must close paragraph since that's what the          manual says and that's what TeX does.  */
name|int
name|save_filling_enabled
init|=
name|filling_enabled
decl_stmt|;
name|filling_enabled
operator|=
literal|0
expr_stmt|;
name|close_paragraph
argument_list|()
expr_stmt|;
while|while
condition|(
name|lines
operator|--
condition|)
block|{
if|if
condition|(
name|html
condition|)
name|insert_string
argument_list|(
literal|"<br><p>\n"
argument_list|)
expr_stmt|;
else|else
name|add_char
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
block|}
name|filling_enabled
operator|=
name|save_filling_enabled
expr_stmt|;
block|}
name|free
argument_list|(
name|line
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* @dircategory LINE outputs INFO-DIR-SECTION LINE, unless --no-headers.  */
end_comment

begin_function
name|void
name|cm_dircategory
parameter_list|()
block|{
name|char
modifier|*
name|line
decl_stmt|;
if|if
condition|(
name|html
condition|)
name|cm_ignore_line
argument_list|()
expr_stmt|;
else|else
block|{
name|get_rest_of_line
argument_list|(
literal|1
argument_list|,
operator|&
name|line
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|no_headers
operator|&&
operator|!
name|html
condition|)
block|{
name|kill_self_indent
argument_list|(
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* make sure there's no indentation */
name|insert_string
argument_list|(
literal|"INFO-DIR-SECTION "
argument_list|)
expr_stmt|;
name|insert_string
argument_list|(
name|line
argument_list|)
expr_stmt|;
name|insert
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
block|}
name|free
argument_list|(
name|line
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/* Start a new line with just this text on it.    Then center the line of text.    This always ends the current paragraph. */
end_comment

begin_function
name|void
name|cm_center
parameter_list|()
block|{
name|int
name|i
decl_stmt|,
name|start
decl_stmt|,
name|length
decl_stmt|;
name|unsigned
name|char
modifier|*
name|line
decl_stmt|;
name|int
name|save_indented_fill
init|=
name|indented_fill
decl_stmt|;
name|int
name|save_filling_enabled
init|=
name|filling_enabled
decl_stmt|;
name|int
name|fudge_factor
init|=
literal|1
decl_stmt|;
name|close_paragraph
argument_list|()
expr_stmt|;
name|filling_enabled
operator|=
name|indented_fill
operator|=
literal|0
expr_stmt|;
name|cm_noindent
argument_list|()
expr_stmt|;
name|start
operator|=
name|output_paragraph_offset
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"<p align=\"center\">"
argument_list|)
expr_stmt|;
name|inhibit_output_flushing
argument_list|()
expr_stmt|;
name|get_rest_of_line
argument_list|(
literal|0
argument_list|,
operator|(
name|char
operator|*
operator|*
operator|)
operator|&
name|line
argument_list|)
expr_stmt|;
name|execute_string
argument_list|(
literal|"%s"
argument_list|,
operator|(
name|char
operator|*
operator|)
name|line
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|line
argument_list|)
expr_stmt|;
name|uninhibit_output_flushing
argument_list|()
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"</p>"
argument_list|)
expr_stmt|;
else|else
block|{
name|i
operator|=
name|output_paragraph_offset
operator|-
literal|1
expr_stmt|;
while|while
condition|(
name|i
operator|>
operator|(
name|start
operator|-
literal|1
operator|)
operator|&&
name|output_paragraph
index|[
name|i
index|]
operator|==
literal|'\n'
condition|)
name|i
operator|--
expr_stmt|;
name|output_paragraph_offset
operator|=
operator|++
name|i
expr_stmt|;
name|length
operator|=
name|output_paragraph_offset
operator|-
name|start
expr_stmt|;
if|if
condition|(
name|length
operator|<
operator|(
name|fill_column
operator|-
name|fudge_factor
operator|)
condition|)
block|{
name|line
operator|=
name|xmalloc
argument_list|(
literal|1
operator|+
name|length
argument_list|)
expr_stmt|;
name|memcpy
argument_list|(
name|line
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|(
name|output_paragraph
operator|+
name|start
operator|)
argument_list|,
name|length
argument_list|)
expr_stmt|;
name|i
operator|=
operator|(
name|fill_column
operator|-
name|fudge_factor
operator|-
name|length
operator|)
operator|/
literal|2
expr_stmt|;
name|output_paragraph_offset
operator|=
name|start
expr_stmt|;
while|while
condition|(
name|i
operator|--
condition|)
name|insert
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|length
condition|;
name|i
operator|++
control|)
name|insert
argument_list|(
name|line
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|line
argument_list|)
expr_stmt|;
block|}
block|}
name|insert
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
name|close_paragraph
argument_list|()
expr_stmt|;
name|filling_enabled
operator|=
name|save_filling_enabled
expr_stmt|;
name|indented_fill
operator|=
name|save_indented_fill
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Show what an expression returns. */
end_comment

begin_function
name|void
name|cm_result
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|add_word
argument_list|(
name|html
condition|?
literal|"=&gt;"
else|:
literal|"=>"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* What an expression expands to. */
end_comment

begin_function
name|void
name|cm_expansion
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|add_word
argument_list|(
name|html
condition|?
literal|"==&gt;"
else|:
literal|"==>"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Indicates two expressions are equivalent. */
end_comment

begin_function
name|void
name|cm_equiv
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|add_word
argument_list|(
literal|"=="
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* What an expression may print. */
end_comment

begin_function
name|void
name|cm_print
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|add_word
argument_list|(
literal|"-|"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* An error signaled. */
end_comment

begin_function
name|void
name|cm_error
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|add_word
argument_list|(
name|html
condition|?
literal|"error--&gt;"
else|:
literal|"error-->"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* The location of point in an example of a buffer. */
end_comment

begin_function
name|void
name|cm_point
parameter_list|(
name|arg
parameter_list|)
name|int
name|arg
decl_stmt|;
block|{
if|if
condition|(
name|arg
operator|==
name|END
condition|)
name|add_word
argument_list|(
literal|"-!-"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* @exdent: Start a new line with just this text on it.    The text is outdented one level if possible. */
end_comment

begin_function
name|void
name|cm_exdent
parameter_list|()
block|{
name|char
modifier|*
name|line
decl_stmt|;
name|int
name|save_indent
init|=
name|current_indent
decl_stmt|;
name|int
name|save_in_fixed_width_font
init|=
name|in_fixed_width_font
decl_stmt|;
comment|/* Read argument  */
name|get_rest_of_line
argument_list|(
literal|0
argument_list|,
operator|&
name|line
argument_list|)
expr_stmt|;
comment|/* Exdent the output.  Actually this may be a no-op.   */
if|if
condition|(
name|current_indent
condition|)
name|current_indent
operator|-=
name|default_indentation_increment
expr_stmt|;
comment|/* @exdent arg is supposed to be in roman.  */
name|in_fixed_width_font
operator|=
literal|0
expr_stmt|;
comment|/* The preceding newline already inserted the `current_indent'.      Remove one level's worth.  */
name|kill_self_indent
argument_list|(
name|default_indentation_increment
argument_list|)
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"<br>"
argument_list|)
expr_stmt|;
comment|/* Can't close_single_paragraph, then we lose preceding blank lines.  */
name|flush_output
argument_list|()
expr_stmt|;
name|execute_string
argument_list|(
literal|"%s"
argument_list|,
name|line
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|line
argument_list|)
expr_stmt|;
if|if
condition|(
name|html
condition|)
name|add_word
argument_list|(
literal|"<br>"
argument_list|)
expr_stmt|;
name|close_single_paragraph
argument_list|()
expr_stmt|;
name|current_indent
operator|=
name|save_indent
expr_stmt|;
name|in_fixed_width_font
operator|=
name|save_in_fixed_width_font
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Remember this file, and move onto the next. */
end_comment

begin_function
name|void
name|cm_include
parameter_list|()
block|{
name|char
modifier|*
name|filename
decl_stmt|;
if|if
condition|(
name|macro_expansion_output_stream
operator|&&
operator|!
name|executing_string
condition|)
name|me_append_before_this_command
argument_list|()
expr_stmt|;
name|close_paragraph
argument_list|()
expr_stmt|;
name|get_rest_of_line
argument_list|(
literal|0
argument_list|,
operator|&
name|filename
argument_list|)
expr_stmt|;
if|if
condition|(
name|macro_expansion_output_stream
operator|&&
operator|!
name|executing_string
condition|)
name|remember_itext
argument_list|(
name|input_text
argument_list|,
name|input_text_offset
argument_list|)
expr_stmt|;
name|pushfile
argument_list|()
expr_stmt|;
comment|/* In verbose mode we print info about including another file. */
if|if
condition|(
name|verbose_mode
condition|)
block|{
name|int
name|i
init|=
literal|0
decl_stmt|;
name|FSTACK
modifier|*
name|stack
init|=
name|filestack
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
operator|,
name|stack
operator|=
name|filestack
init|;
name|stack
condition|;
name|stack
operator|=
name|stack
operator|->
name|next
operator|,
name|i
operator|++
control|)
empty_stmt|;
name|i
operator|*=
literal|2
expr_stmt|;
name|printf
argument_list|(
literal|"%*s"
argument_list|,
name|i
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%c%s %s\n"
argument_list|,
name|COMMAND_PREFIX
argument_list|,
name|command
argument_list|,
name|filename
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stdout
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|find_and_load
argument_list|(
name|filename
argument_list|)
condition|)
block|{
specifier|extern
name|int
name|errno
decl_stmt|;
name|popfile
argument_list|()
expr_stmt|;
name|line_number
operator|--
expr_stmt|;
comment|/* Cannot "@include foo", in line 5 of "/wh/bar". */
name|line_error
argument_list|(
literal|"%c%s %s: %s"
argument_list|,
name|COMMAND_PREFIX
argument_list|,
name|command
argument_list|,
name|filename
argument_list|,
name|strerror
argument_list|(
name|errno
argument_list|)
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
return|return;
block|}
else|else
block|{
if|if
condition|(
name|macro_expansion_output_stream
operator|&&
operator|!
name|executing_string
condition|)
name|remember_itext
argument_list|(
name|input_text
argument_list|,
name|input_text_offset
argument_list|)
expr_stmt|;
name|reader_loop
argument_list|()
expr_stmt|;
block|}
name|free
argument_list|(
name|filename
argument_list|)
expr_stmt|;
name|popfile
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/* @bye: Signals end of processing.  Easy to make this happen. */
end_comment

begin_function
name|void
name|cm_bye
parameter_list|()
block|{
name|discard_braces
argument_list|()
expr_stmt|;
comment|/* should not have any unclosed braces left */
name|flush_output
argument_list|()
expr_stmt|;
name|input_text_offset
operator|=
name|input_text_length
expr_stmt|;
block|}
end_function

begin_escape
end_escape

begin_comment
comment|/* @paragraphindent */
end_comment

begin_function
specifier|static
name|void
name|cm_paragraphindent
parameter_list|()
block|{
name|char
modifier|*
name|arg
decl_stmt|;
name|get_rest_of_line
argument_list|(
literal|1
argument_list|,
operator|&
name|arg
argument_list|)
expr_stmt|;
if|if
condition|(
name|set_paragraph_indent
argument_list|(
name|arg
argument_list|)
operator|!=
literal|0
condition|)
name|line_error
argument_list|(
name|_
argument_list|(
literal|"Bad argument to %c%s"
argument_list|)
argument_list|,
name|COMMAND_PREFIX
argument_list|,
name|command
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* @exampleindent: change indentation of example-like environments.   */
end_comment

begin_function
specifier|static
name|int
name|set_default_indentation_increment
parameter_list|(
name|string
parameter_list|)
name|char
modifier|*
name|string
decl_stmt|;
block|{
if|if
condition|(
name|strcmp
argument_list|(
name|string
argument_list|,
literal|"asis"
argument_list|)
operator|==
literal|0
operator|||
name|strcmp
argument_list|(
name|string
argument_list|,
name|_
argument_list|(
literal|"asis"
argument_list|)
argument_list|)
operator|==
literal|0
condition|)
empty_stmt|;
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|string
argument_list|,
literal|"none"
argument_list|)
operator|==
literal|0
operator|||
name|strcmp
argument_list|(
name|string
argument_list|,
name|_
argument_list|(
literal|"none"
argument_list|)
argument_list|)
operator|==
literal|0
condition|)
name|default_indentation_increment
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
name|sscanf
argument_list|(
name|string
argument_list|,
literal|"%d"
argument_list|,
operator|&
name|default_indentation_increment
argument_list|)
operator|!=
literal|1
condition|)
return|return
operator|-
literal|1
return|;
return|return
literal|0
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|cm_exampleindent
parameter_list|()
block|{
name|char
modifier|*
name|arg
decl_stmt|;
name|get_rest_of_line
argument_list|(
literal|1
argument_list|,
operator|&
name|arg
argument_list|)
expr_stmt|;
if|if
condition|(
name|set_default_indentation_increment
argument_list|(
name|arg
argument_list|)
operator|!=
literal|0
condition|)
name|line_error
argument_list|(
name|_
argument_list|(
literal|"Bad argument to %c%s"
argument_list|)
argument_list|,
name|COMMAND_PREFIX
argument_list|,
name|command
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|arg
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

