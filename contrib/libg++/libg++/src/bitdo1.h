begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|ONES
end_ifndef

begin_define
define|#
directive|define
name|ONES
value|((_BS_word)(~0L))
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_decl_stmt
specifier|register
name|int
name|nwords
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|_BS_word
name|mask
decl_stmt|;
end_decl_stmt

begin_if
if|if
condition|(
name|offset
operator|==
literal|0
condition|)
empty_stmt|;
elseif|else
if|if
condition|(
name|offset
operator|+
name|length
operator|>=
name|_BS_BITS_PER_WORD
condition|)
block|{
name|mask
operator|=
name|ONES
name|_BS_RIGHT
name|offset
expr_stmt|;
name|DOIT
argument_list|(
operator|*
name|ptr
operator|++
argument_list|,
name|mask
argument_list|)
expr_stmt|;
name|length
operator|-=
name|_BS_BITS_PER_WORD
operator|-
name|offset
expr_stmt|;
block|}
else|else
block|{
name|mask
operator|=
operator|(
name|ONES
name|_BS_RIGHT
argument_list|(
name|_BS_BITS_PER_WORD
operator|-
name|length
argument_list|)
operator|)
name|_BS_LEFT
argument_list|(
name|_BS_BITS_PER_WORD
operator|-
name|length
operator|-
name|offset
argument_list|)
expr_stmt|;
name|DOIT
argument_list|(
operator|*
name|ptr
argument_list|,
name|mask
argument_list|)
expr_stmt|;
goto|goto
name|done
goto|;
block|}
end_if

begin_expr_stmt
name|nwords
operator|=
name|_BS_INDEX
argument_list|(
name|length
argument_list|)
expr_stmt|;
end_expr_stmt

begin_while
while|while
condition|(
operator|--
name|nwords
operator|>=
literal|0
condition|)
block|{
name|DOIT
argument_list|(
operator|*
name|ptr
operator|++
argument_list|,
name|ONES
argument_list|)
expr_stmt|;
block|}
end_while

begin_expr_stmt
name|length
operator|=
name|_BS_POS
argument_list|(
name|length
argument_list|)
expr_stmt|;
end_expr_stmt

begin_if
if|if
condition|(
name|length
condition|)
block|{
name|mask
operator|=
name|ONES
name|_BS_LEFT
argument_list|(
name|_BS_BITS_PER_WORD
operator|-
name|length
argument_list|)
expr_stmt|;
name|DOIT
argument_list|(
operator|*
name|ptr
argument_list|,
name|mask
argument_list|)
expr_stmt|;
block|}
end_if

begin_label
name|done
label|:
end_label

begin_empty_stmt
empty_stmt|;
end_empty_stmt

end_unit

