begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Generate check macros for tree codes.    Copyright (C) 1998, 1999, 2000, 2002, 2003    Free Software Foundation, Inc.  This file is part of GCC.  GCC is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2, or (at your option) any later version.  GCC is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with GCC; see the file COPYING.  If not, write to the Free Software Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"bconfig.h"
end_include

begin_include
include|#
directive|include
file|"system.h"
end_include

begin_include
include|#
directive|include
file|"coretypes.h"
end_include

begin_include
include|#
directive|include
file|"tm.h"
end_include

begin_define
define|#
directive|define
name|DEFTREECODE
parameter_list|(
name|SYM
parameter_list|,
name|NAME
parameter_list|,
name|TYPE
parameter_list|,
name|LEN
parameter_list|)
value|#SYM,
end_define

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
specifier|const
name|tree_codes
index|[]
init|=
block|{
include|#
directive|include
file|"tree.def"
include|#
directive|include
file|"c-common.def"
include|#
directive|include
file|"gencheck.h"
operator|(
name|char
operator|*
operator|)
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|usage
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function
specifier|static
name|void
name|usage
parameter_list|(
name|void
parameter_list|)
block|{
name|fputs
argument_list|(
literal|"Usage: gencheck\n"
argument_list|,
name|stderr
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|int
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|char
modifier|*
modifier|*
name|argv
name|ATTRIBUTE_UNUSED
parameter_list|)
block|{
name|int
name|i
decl_stmt|,
name|j
decl_stmt|;
switch|switch
condition|(
name|argc
condition|)
block|{
case|case
literal|1
case|:
break|break;
default|default:
name|usage
argument_list|()
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
name|puts
argument_list|(
literal|"/* This file is generated using gencheck. Do not edit. */\n"
argument_list|)
expr_stmt|;
name|puts
argument_list|(
literal|"#ifndef GCC_TREE_CHECK_H"
argument_list|)
expr_stmt|;
name|puts
argument_list|(
literal|"#define GCC_TREE_CHECK_H\n"
argument_list|)
expr_stmt|;
comment|/* Print macros for checks based on each of the tree code names.  However,      since we include the tree nodes from all languages, we must check      for duplicate names to avoid defining the same macro twice.  */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|tree_codes
index|[
name|i
index|]
condition|;
name|i
operator|++
control|)
block|{
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|i
condition|;
name|j
operator|++
control|)
if|if
condition|(
name|strcmp
argument_list|(
name|tree_codes
index|[
name|i
index|]
argument_list|,
name|tree_codes
index|[
name|j
index|]
argument_list|)
operator|==
literal|0
condition|)
break|break;
if|if
condition|(
name|i
operator|==
name|j
condition|)
name|printf
argument_list|(
literal|"#define %s_CHECK(t)\tTREE_CHECK (t, %s)\n"
argument_list|,
name|tree_codes
index|[
name|i
index|]
argument_list|,
name|tree_codes
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|puts
argument_list|(
literal|"\n#endif /* GCC_TREE_CHECK_H */"
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

end_unit

