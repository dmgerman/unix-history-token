begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (C) 1984-2005  Mark Nudelman  *  * You may distribute under the terms of either the GNU General Public  * License or the Less License, as specified in the README file.  *  * For more information about less, or for information on how to   * contact the author, see the README file.  */
end_comment

begin_comment
comment|/*  * Functions to define the character set  * and do things specific to the character set.  */
end_comment

begin_include
include|#
directive|include
file|"less.h"
end_include

begin_if
if|#
directive|if
name|HAVE_LOCALE
end_if

begin_include
include|#
directive|include
file|<locale.h>
end_include

begin_include
include|#
directive|include
file|<ctype.h>
end_include

begin_include
include|#
directive|include
file|<langinfo.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|"charset.h"
end_include

begin_decl_stmt
name|public
name|int
name|utf_mode
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  * Predefined character sets,  * selected by the LESSCHARSET environment variable.  */
end_comment

begin_struct
struct|struct
name|charset
block|{
name|char
modifier|*
name|name
decl_stmt|;
name|int
modifier|*
name|p_flag
decl_stmt|;
name|char
modifier|*
name|desc
decl_stmt|;
block|}
name|charsets
index|[]
init|=
block|{
block|{
literal|"ascii"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.b"
block|}
block|,
block|{
literal|"utf-8"
block|,
operator|&
name|utf_mode
block|,
literal|"8bcccbcc18b95.b126.bb"
block|}
block|,
block|{
literal|"iso8859"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.33b."
block|}
block|,
block|{
literal|"latin3"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.33b5.b8.b15.b4.b12.b18.b12.b."
block|}
block|,
block|{
literal|"arabic"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.33b.3b.7b2.13b.3b.b26.5b19.b"
block|}
block|,
block|{
literal|"greek"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.33b4.2b4.b3.b35.b44.b"
block|}
block|,
block|{
literal|"greek2005"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.33b14.b35.b44.b"
block|}
block|,
block|{
literal|"hebrew"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.33b.b29.32b28.2b2.b"
block|}
block|,
block|{
literal|"koi8-r"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.b."
block|}
block|,
block|{
literal|"KOI8-T"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.b8.b6.b8.b.b.5b7.3b4.b4.b3.b.b.3b."
block|}
block|,
block|{
literal|"georgianps"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.3b11.4b12.2b."
block|}
block|,
block|{
literal|"tcvn"
block|,
name|NULL
block|,
literal|"b..b...bcccbccbbb7.8b95.b48.5b."
block|}
block|,
block|{
literal|"TIS-620"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.b.4b.11b7.8b."
block|}
block|,
block|{
literal|"next"
block|,
name|NULL
block|,
literal|"8bcccbcc18b95.bb125.bb"
block|}
block|,
block|{
literal|"dos"
block|,
name|NULL
block|,
literal|"8bcccbcc12bc5b95.b."
block|}
block|,
block|{
literal|"windows-1251"
block|,
name|NULL
block|,
literal|"8bcccbcc12bc5b95.b24.b."
block|}
block|,
block|{
literal|"windows-1252"
block|,
name|NULL
block|,
literal|"8bcccbcc12bc5b95.b.b11.b.2b12.b."
block|}
block|,
block|{
literal|"windows-1255"
block|,
name|NULL
block|,
literal|"8bcccbcc12bc5b95.b.b8.b.5b9.b.4b."
block|}
block|,
block|{
literal|"ebcdic"
block|,
name|NULL
block|,
literal|"5bc6bcc7bcc41b.9b7.9b5.b..8b6.10b6.b9.7b9.8b8.17b3.3b9.7b9.8b8.6b10.b.b.b."
block|}
block|,
block|{
literal|"IBM-1047"
block|,
name|NULL
block|,
literal|"4cbcbc3b9cbccbccbb4c6bcc5b3cbbc4bc4bccbc191.b"
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|}
struct|;
end_struct

begin_comment
comment|/*  * Support "locale charmap"/nl_langinfo(CODESET) values, as well as others.  */
end_comment

begin_struct
struct|struct
name|cs_alias
block|{
name|char
modifier|*
name|name
decl_stmt|;
name|char
modifier|*
name|oname
decl_stmt|;
block|}
name|cs_aliases
index|[]
init|=
block|{
block|{
literal|"UTF-8"
block|,
literal|"utf-8"
block|}
block|,
block|{
literal|"ANSI_X3.4-1968"
block|,
literal|"ascii"
block|}
block|,
block|{
literal|"US-ASCII"
block|,
literal|"ascii"
block|}
block|,
block|{
literal|"latin1"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-1"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"latin9"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-15"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"latin2"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-2"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-3"
block|,
literal|"latin3"
block|}
block|,
block|{
literal|"latin4"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-4"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"cyrillic"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-5"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-6"
block|,
literal|"arabic"
block|}
block|,
block|{
literal|"ISO-8859-7"
block|,
literal|"greek"
block|}
block|,
block|{
literal|"IBM9005"
block|,
literal|"greek2005"
block|}
block|,
block|{
literal|"ISO-8859-8"
block|,
literal|"hebrew"
block|}
block|,
block|{
literal|"latin5"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-9"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"latin6"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-10"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"latin7"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-13"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"latin8"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-14"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"latin10"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"ISO-8859-16"
block|,
literal|"iso8859"
block|}
block|,
block|{
literal|"IBM437"
block|,
literal|"dos"
block|}
block|,
block|{
literal|"EBCDIC-US"
block|,
literal|"ebcdic"
block|}
block|,
block|{
literal|"IBM1047"
block|,
literal|"IBM-1047"
block|}
block|,
block|{
literal|"KOI8-R"
block|,
literal|"koi8-r"
block|}
block|,
block|{
literal|"KOI8-U"
block|,
literal|"koi8-r"
block|}
block|,
block|{
literal|"GEORGIAN-PS"
block|,
literal|"georgianps"
block|}
block|,
block|{
literal|"TCVN5712-1"
block|,
literal|"tcvn"
block|}
block|,
block|{
literal|"NEXTSTEP"
block|,
literal|"next"
block|}
block|,
block|{
literal|"windows"
block|,
literal|"windows-1252"
block|}
block|,
comment|/* backward compatibility */
block|{
literal|"CP1251"
block|,
literal|"windows-1251"
block|}
block|,
block|{
literal|"CP1252"
block|,
literal|"windows-1252"
block|}
block|,
block|{
literal|"CP1255"
block|,
literal|"windows-1255"
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|}
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|IS_BINARY_CHAR
value|01
end_define

begin_define
define|#
directive|define
name|IS_CONTROL_CHAR
value|02
end_define

begin_decl_stmt
specifier|static
name|char
name|chardef
index|[
literal|256
index|]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|char
modifier|*
name|binfmt
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|char
modifier|*
name|utfbinfmt
init|=
name|NULL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|public
name|int
name|binattr
init|=
name|AT_STANDOUT
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  * Define a charset, given a description string.  * The string consists of 256 letters,  * one for each character in the charset.  * If the string is shorter than 256 letters, missing letters  * are taken to be identical to the last one.  * A decimal number followed by a letter is taken to be a   * repetition of the letter.  *  * Each letter is one of:  *	. normal character  *	b binary character  *	c control character  */
end_comment

begin_function
specifier|static
name|void
name|ichardef
parameter_list|(
name|s
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
block|{
specifier|register
name|char
modifier|*
name|cp
decl_stmt|;
specifier|register
name|int
name|n
decl_stmt|;
specifier|register
name|char
name|v
decl_stmt|;
name|n
operator|=
literal|0
expr_stmt|;
name|v
operator|=
literal|0
expr_stmt|;
name|cp
operator|=
name|chardef
expr_stmt|;
while|while
condition|(
operator|*
name|s
operator|!=
literal|'\0'
condition|)
block|{
switch|switch
condition|(
operator|*
name|s
operator|++
condition|)
block|{
case|case
literal|'.'
case|:
name|v
operator|=
literal|0
expr_stmt|;
break|break;
case|case
literal|'c'
case|:
name|v
operator|=
name|IS_CONTROL_CHAR
expr_stmt|;
break|break;
case|case
literal|'b'
case|:
name|v
operator|=
name|IS_BINARY_CHAR
operator||
name|IS_CONTROL_CHAR
expr_stmt|;
break|break;
case|case
literal|'0'
case|:
case|case
literal|'1'
case|:
case|case
literal|'2'
case|:
case|case
literal|'3'
case|:
case|case
literal|'4'
case|:
case|case
literal|'5'
case|:
case|case
literal|'6'
case|:
case|case
literal|'7'
case|:
case|case
literal|'8'
case|:
case|case
literal|'9'
case|:
name|n
operator|=
operator|(
literal|10
operator|*
name|n
operator|)
operator|+
operator|(
name|s
index|[
operator|-
literal|1
index|]
operator|-
literal|'0'
operator|)
expr_stmt|;
continue|continue;
default|default:
name|error
argument_list|(
literal|"invalid chardef"
argument_list|,
name|NULL_PARG
argument_list|)
expr_stmt|;
name|quit
argument_list|(
name|QUIT_ERROR
argument_list|)
expr_stmt|;
comment|/*NOTREACHED*/
block|}
do|do
block|{
if|if
condition|(
name|cp
operator|>=
name|chardef
operator|+
sizeof|sizeof
argument_list|(
name|chardef
argument_list|)
condition|)
block|{
name|error
argument_list|(
literal|"chardef longer than 256"
argument_list|,
name|NULL_PARG
argument_list|)
expr_stmt|;
name|quit
argument_list|(
name|QUIT_ERROR
argument_list|)
expr_stmt|;
comment|/*NOTREACHED*/
block|}
operator|*
name|cp
operator|++
operator|=
name|v
expr_stmt|;
block|}
do|while
condition|(
operator|--
name|n
operator|>
literal|0
condition|)
do|;
name|n
operator|=
literal|0
expr_stmt|;
block|}
while|while
condition|(
name|cp
operator|<
name|chardef
operator|+
sizeof|sizeof
argument_list|(
name|chardef
argument_list|)
condition|)
operator|*
name|cp
operator|++
operator|=
name|v
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * Define a charset, given a charset name.  * The valid charset names are listed in the "charsets" array.  */
end_comment

begin_function
specifier|static
name|int
name|icharset
parameter_list|(
name|name
parameter_list|,
name|no_error
parameter_list|)
specifier|register
name|char
modifier|*
name|name
decl_stmt|;
name|int
name|no_error
decl_stmt|;
block|{
specifier|register
name|struct
name|charset
modifier|*
name|p
decl_stmt|;
specifier|register
name|struct
name|cs_alias
modifier|*
name|a
decl_stmt|;
if|if
condition|(
name|name
operator|==
name|NULL
operator|||
operator|*
name|name
operator|==
literal|'\0'
condition|)
return|return
operator|(
literal|0
operator|)
return|;
comment|/* First see if the name is an alias. */
for|for
control|(
name|a
operator|=
name|cs_aliases
init|;
name|a
operator|->
name|name
operator|!=
name|NULL
condition|;
name|a
operator|++
control|)
block|{
if|if
condition|(
name|strcmp
argument_list|(
name|name
argument_list|,
name|a
operator|->
name|name
argument_list|)
operator|==
literal|0
condition|)
block|{
name|name
operator|=
name|a
operator|->
name|oname
expr_stmt|;
break|break;
block|}
block|}
for|for
control|(
name|p
operator|=
name|charsets
init|;
name|p
operator|->
name|name
operator|!=
name|NULL
condition|;
name|p
operator|++
control|)
block|{
if|if
condition|(
name|strcmp
argument_list|(
name|name
argument_list|,
name|p
operator|->
name|name
argument_list|)
operator|==
literal|0
condition|)
block|{
name|ichardef
argument_list|(
name|p
operator|->
name|desc
argument_list|)
expr_stmt|;
if|if
condition|(
name|p
operator|->
name|p_flag
operator|!=
name|NULL
condition|)
operator|*
operator|(
name|p
operator|->
name|p_flag
operator|)
operator|=
literal|1
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
block|}
if|if
condition|(
operator|!
name|no_error
condition|)
block|{
name|error
argument_list|(
literal|"invalid charset name"
argument_list|,
name|NULL_PARG
argument_list|)
expr_stmt|;
name|quit
argument_list|(
name|QUIT_ERROR
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_if
if|#
directive|if
name|HAVE_LOCALE
end_if

begin_comment
comment|/*  * Define a charset, given a locale name.  */
end_comment

begin_function
specifier|static
name|void
name|ilocale
parameter_list|()
block|{
specifier|register
name|int
name|c
decl_stmt|;
for|for
control|(
name|c
operator|=
literal|0
init|;
name|c
operator|<
operator|(
name|int
operator|)
sizeof|sizeof
argument_list|(
name|chardef
argument_list|)
condition|;
name|c
operator|++
control|)
block|{
if|if
condition|(
name|isprint
argument_list|(
name|c
argument_list|)
condition|)
name|chardef
index|[
name|c
index|]
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
name|iscntrl
argument_list|(
name|c
argument_list|)
condition|)
name|chardef
index|[
name|c
index|]
operator|=
name|IS_CONTROL_CHAR
expr_stmt|;
else|else
name|chardef
index|[
name|c
index|]
operator|=
name|IS_BINARY_CHAR
operator||
name|IS_CONTROL_CHAR
expr_stmt|;
block|}
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  * Define the printing format for control (or binary utf) chars.  */
end_comment

begin_function
specifier|static
name|void
name|setbinfmt
parameter_list|(
name|s
parameter_list|,
name|fmtvarptr
parameter_list|,
name|default_fmt
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
modifier|*
name|fmtvarptr
decl_stmt|;
name|char
modifier|*
name|default_fmt
decl_stmt|;
block|{
if|if
condition|(
name|s
operator|&&
name|utf_mode
condition|)
block|{
comment|/* It would be too hard to account for width otherwise.  */
name|char
modifier|*
name|t
init|=
name|s
decl_stmt|;
while|while
condition|(
operator|*
name|t
condition|)
block|{
if|if
condition|(
operator|*
name|t
operator|<
literal|' '
operator|||
operator|*
name|t
operator|>
literal|'~'
condition|)
block|{
name|s
operator|=
name|default_fmt
expr_stmt|;
goto|goto
name|attr
goto|;
block|}
name|t
operator|++
expr_stmt|;
block|}
block|}
comment|/* %n is evil */
if|if
condition|(
name|s
operator|==
name|NULL
operator|||
operator|*
name|s
operator|==
literal|'\0'
operator|||
operator|(
operator|*
name|s
operator|==
literal|'*'
operator|&&
operator|(
name|s
index|[
literal|1
index|]
operator|==
literal|'\0'
operator|||
name|s
index|[
literal|2
index|]
operator|==
literal|'\0'
operator|||
name|strchr
argument_list|(
name|s
operator|+
literal|2
argument_list|,
literal|'n'
argument_list|)
operator|)
operator|)
operator|||
operator|(
operator|*
name|s
operator|!=
literal|'*'
operator|&&
name|strchr
argument_list|(
name|s
argument_list|,
literal|'n'
argument_list|)
operator|)
condition|)
name|s
operator|=
name|default_fmt
expr_stmt|;
comment|/* 	 * Select the attributes if it starts with "*". 	 */
name|attr
label|:
if|if
condition|(
operator|*
name|s
operator|==
literal|'*'
condition|)
block|{
switch|switch
condition|(
name|s
index|[
literal|1
index|]
condition|)
block|{
case|case
literal|'d'
case|:
name|binattr
operator|=
name|AT_BOLD
expr_stmt|;
break|break;
case|case
literal|'k'
case|:
name|binattr
operator|=
name|AT_BLINK
expr_stmt|;
break|break;
case|case
literal|'s'
case|:
name|binattr
operator|=
name|AT_STANDOUT
expr_stmt|;
break|break;
case|case
literal|'u'
case|:
name|binattr
operator|=
name|AT_UNDERLINE
expr_stmt|;
break|break;
default|default:
name|binattr
operator|=
name|AT_NORMAL
expr_stmt|;
break|break;
block|}
name|s
operator|+=
literal|2
expr_stmt|;
block|}
operator|*
name|fmtvarptr
operator|=
name|s
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  *  */
end_comment

begin_function
specifier|static
name|void
name|set_charset
parameter_list|()
block|{
name|char
modifier|*
name|s
decl_stmt|;
comment|/* 	 * See if environment variable LESSCHARSET is defined. 	 */
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LESSCHARSET"
argument_list|)
expr_stmt|;
if|if
condition|(
name|icharset
argument_list|(
name|s
argument_list|,
literal|0
argument_list|)
condition|)
return|return;
comment|/* 	 * LESSCHARSET is not defined: try LESSCHARDEF. 	 */
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LESSCHARDEF"
argument_list|)
expr_stmt|;
if|if
condition|(
name|s
operator|!=
name|NULL
operator|&&
operator|*
name|s
operator|!=
literal|'\0'
condition|)
block|{
name|ichardef
argument_list|(
name|s
argument_list|)
expr_stmt|;
return|return;
block|}
if|#
directive|if
name|HAVE_LOCALE
comment|/* 	 * Try using the codeset name as the charset name. 	 */
name|s
operator|=
name|nl_langinfo
argument_list|(
name|CODESET
argument_list|)
expr_stmt|;
if|if
condition|(
name|icharset
argument_list|(
name|s
argument_list|,
literal|1
argument_list|)
condition|)
return|return;
endif|#
directive|endif
if|#
directive|if
name|HAVE_STRSTR
comment|/* 	 * Check whether LC_ALL, LC_CTYPE or LANG look like UTF-8 is used. 	 */
if|if
condition|(
operator|(
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LC_ALL"
argument_list|)
operator|)
operator|!=
name|NULL
operator|||
operator|(
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LC_CTYPE"
argument_list|)
operator|)
operator|!=
name|NULL
operator|||
operator|(
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LANG"
argument_list|)
operator|)
operator|!=
name|NULL
condition|)
block|{
if|if
condition|(
name|strstr
argument_list|(
name|s
argument_list|,
literal|"UTF-8"
argument_list|)
operator|!=
name|NULL
operator|||
name|strstr
argument_list|(
name|s
argument_list|,
literal|"utf-8"
argument_list|)
operator|!=
name|NULL
operator|||
name|strstr
argument_list|(
name|s
argument_list|,
literal|"UTF8"
argument_list|)
operator|!=
name|NULL
operator|||
name|strstr
argument_list|(
name|s
argument_list|,
literal|"utf8"
argument_list|)
operator|!=
name|NULL
condition|)
if|if
condition|(
name|icharset
argument_list|(
literal|"utf-8"
argument_list|,
literal|1
argument_list|)
condition|)
return|return;
block|}
endif|#
directive|endif
if|#
directive|if
name|HAVE_LOCALE
comment|/* 	 * Get character definitions from locale functions, 	 * rather than from predefined charset entry. 	 */
name|ilocale
argument_list|()
expr_stmt|;
if|#
directive|if
name|MSDOS_COMPILER
comment|/* 	 * Default to "dos". 	 */
operator|(
name|void
operator|)
name|icharset
argument_list|(
literal|"dos"
argument_list|,
literal|1
argument_list|)
expr_stmt|;
else|#
directive|else
comment|/* 	 * Default to "latin1". 	 */
operator|(
name|void
operator|)
name|icharset
argument_list|(
literal|"latin1"
argument_list|,
literal|1
argument_list|)
expr_stmt|;
endif|#
directive|endif
endif|#
directive|endif
block|}
end_function

begin_comment
comment|/*  * Initialize charset data structures.  */
end_comment

begin_function
name|public
name|void
name|init_charset
parameter_list|()
block|{
name|char
modifier|*
name|s
decl_stmt|;
if|#
directive|if
name|HAVE_LOCALE
name|setlocale
argument_list|(
name|LC_ALL
argument_list|,
literal|""
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|set_charset
argument_list|()
expr_stmt|;
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LESSBINFMT"
argument_list|)
expr_stmt|;
name|setbinfmt
argument_list|(
name|s
argument_list|,
operator|&
name|binfmt
argument_list|,
literal|"*s<%02X>"
argument_list|)
expr_stmt|;
name|s
operator|=
name|lgetenv
argument_list|(
literal|"LESSUTFBINFMT"
argument_list|)
expr_stmt|;
name|setbinfmt
argument_list|(
name|s
argument_list|,
operator|&
name|utfbinfmt
argument_list|,
literal|"<U+%04lX>"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * Is a given character a "binary" character?  */
end_comment

begin_function
name|public
name|int
name|binary_char
parameter_list|(
name|c
parameter_list|)
name|unsigned
name|char
name|c
decl_stmt|;
block|{
name|c
operator|&=
literal|0377
expr_stmt|;
return|return
operator|(
name|chardef
index|[
name|c
index|]
operator|&
name|IS_BINARY_CHAR
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * Is a given character a "control" character?  */
end_comment

begin_function
name|public
name|int
name|control_char
parameter_list|(
name|c
parameter_list|)
name|int
name|c
decl_stmt|;
block|{
name|c
operator|&=
literal|0377
expr_stmt|;
return|return
operator|(
name|chardef
index|[
name|c
index|]
operator|&
name|IS_CONTROL_CHAR
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * Return the printable form of a character.  * For example, in the "ascii" charset '\3' is printed as "^C".  */
end_comment

begin_function
name|public
name|char
modifier|*
name|prchar
parameter_list|(
name|c
parameter_list|)
name|int
name|c
decl_stmt|;
block|{
comment|/* {{ This buffer can be overrun if LESSBINFMT is a long string. }} */
specifier|static
name|char
name|buf
index|[
literal|32
index|]
decl_stmt|;
name|c
operator|&=
literal|0377
expr_stmt|;
if|if
condition|(
operator|(
name|c
operator|<
literal|128
operator|||
operator|!
name|utf_mode
operator|)
operator|&&
operator|!
name|control_char
argument_list|(
name|c
argument_list|)
condition|)
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
literal|"%c"
argument_list|,
name|c
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|c
operator|==
name|ESC
condition|)
name|strcpy
argument_list|(
name|buf
argument_list|,
literal|"ESC"
argument_list|)
expr_stmt|;
if|#
directive|if
name|IS_EBCDIC_HOST
elseif|else
if|if
condition|(
operator|!
name|binary_char
argument_list|(
name|c
argument_list|)
operator|&&
name|c
operator|<
literal|64
condition|)
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
literal|"^%c"
argument_list|,
comment|/* 		 * This array roughly inverts CONTROL() #defined in less.h, 	 	 * and should be kept in sync with CONTROL() and IBM-1047.  	 	 */
literal|"@ABC.I.?...KLMNO"
literal|"PQRS.JH.XY.."
literal|"\\]^_"
literal|"......W[.....EFG"
literal|"..V....D....TU.Z"
index|[
name|c
index|]
argument_list|)
expr_stmt|;
else|#
directive|else
elseif|else
if|if
condition|(
name|c
operator|<
literal|128
operator|&&
operator|!
name|control_char
argument_list|(
name|c
operator|^
literal|0100
argument_list|)
condition|)
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
literal|"^%c"
argument_list|,
name|c
operator|^
literal|0100
argument_list|)
expr_stmt|;
endif|#
directive|endif
else|else
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
name|binfmt
argument_list|,
name|c
argument_list|)
expr_stmt|;
return|return
operator|(
name|buf
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * Return the printable form of a UTF-8 character.  */
end_comment

begin_function
name|public
name|char
modifier|*
name|prutfchar
parameter_list|(
name|ch
parameter_list|)
name|LWCHAR
name|ch
decl_stmt|;
block|{
specifier|static
name|char
name|buf
index|[
literal|32
index|]
decl_stmt|;
if|if
condition|(
name|ch
operator|==
name|ESC
condition|)
name|strcpy
argument_list|(
name|buf
argument_list|,
literal|"ESC"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|ch
operator|<
literal|128
operator|&&
name|control_char
argument_list|(
name|ch
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|control_char
argument_list|(
name|ch
operator|^
literal|0100
argument_list|)
condition|)
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
literal|"^%c"
argument_list|,
operator|(
operator|(
name|char
operator|)
name|ch
operator|)
operator|^
literal|0100
argument_list|)
expr_stmt|;
else|else
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
name|binfmt
argument_list|,
operator|(
name|char
operator|)
name|ch
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|is_ubin_char
argument_list|(
name|ch
argument_list|)
condition|)
name|SNPRINTF1
argument_list|(
name|buf
argument_list|,
sizeof|sizeof
argument_list|(
name|buf
argument_list|)
argument_list|,
name|utfbinfmt
argument_list|,
name|ch
argument_list|)
expr_stmt|;
else|else
block|{
name|int
name|len
decl_stmt|;
if|if
condition|(
name|ch
operator|>=
literal|0x80000000
condition|)
block|{
name|len
operator|=
literal|3
expr_stmt|;
name|ch
operator|=
literal|0xFFFD
expr_stmt|;
block|}
else|else
block|{
name|len
operator|=
operator|(
name|ch
operator|<
literal|0x80
operator|)
condition|?
literal|1
else|:
operator|(
name|ch
operator|<
literal|0x800
operator|)
condition|?
literal|2
else|:
operator|(
name|ch
operator|<
literal|0x10000
operator|)
condition|?
literal|3
else|:
operator|(
name|ch
operator|<
literal|0x200000
operator|)
condition|?
literal|4
else|:
operator|(
name|ch
operator|<
literal|0x4000000
operator|)
condition|?
literal|5
else|:
literal|6
expr_stmt|;
block|}
name|buf
index|[
name|len
index|]
operator|=
literal|'\0'
expr_stmt|;
if|if
condition|(
name|len
operator|==
literal|1
condition|)
operator|*
name|buf
operator|=
operator|(
name|char
operator|)
name|ch
expr_stmt|;
else|else
block|{
operator|*
name|buf
operator|=
operator|(
operator|(
literal|1
operator|<<
name|len
operator|)
operator|-
literal|1
operator|)
operator|<<
operator|(
literal|8
operator|-
name|len
operator|)
expr_stmt|;
while|while
condition|(
operator|--
name|len
operator|>
literal|0
condition|)
block|{
name|buf
index|[
name|len
index|]
operator|=
call|(
name|char
call|)
argument_list|(
literal|0x80
operator||
operator|(
name|ch
operator|&
literal|0x3F
operator|)
argument_list|)
expr_stmt|;
name|ch
operator|>>=
literal|6
expr_stmt|;
block|}
operator|*
name|buf
operator||=
name|ch
expr_stmt|;
block|}
block|}
return|return
operator|(
name|buf
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * Get the length of a UTF-8 character in bytes.  */
end_comment

begin_function
name|public
name|int
name|utf_len
parameter_list|(
name|ch
parameter_list|)
name|char
name|ch
decl_stmt|;
block|{
if|if
condition|(
operator|(
name|ch
operator|&
literal|0x80
operator|)
operator|==
literal|0
condition|)
return|return
literal|1
return|;
if|if
condition|(
operator|(
name|ch
operator|&
literal|0xE0
operator|)
operator|==
literal|0xC0
condition|)
return|return
literal|2
return|;
if|if
condition|(
operator|(
name|ch
operator|&
literal|0xF0
operator|)
operator|==
literal|0xE0
condition|)
return|return
literal|3
return|;
if|if
condition|(
operator|(
name|ch
operator|&
literal|0xF8
operator|)
operator|==
literal|0xF0
condition|)
return|return
literal|4
return|;
if|if
condition|(
operator|(
name|ch
operator|&
literal|0xFC
operator|)
operator|==
literal|0xF8
condition|)
return|return
literal|5
return|;
if|if
condition|(
operator|(
name|ch
operator|&
literal|0xFE
operator|)
operator|==
literal|0xFC
condition|)
return|return
literal|6
return|;
comment|/* Invalid UTF-8 encoding. */
return|return
literal|1
return|;
block|}
end_function

begin_comment
comment|/*  * Is a UTF-8 character well-formed?  */
end_comment

begin_function
name|public
name|int
name|is_utf8_well_formed
parameter_list|(
name|s
parameter_list|)
name|unsigned
name|char
modifier|*
name|s
decl_stmt|;
block|{
name|int
name|i
decl_stmt|;
name|int
name|len
decl_stmt|;
if|if
condition|(
name|IS_UTF8_INVALID
argument_list|(
name|s
index|[
literal|0
index|]
argument_list|)
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|len
operator|=
name|utf_len
argument_list|(
operator|(
name|char
operator|)
name|s
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|len
operator|==
literal|1
condition|)
return|return
operator|(
literal|1
operator|)
return|;
if|if
condition|(
name|len
operator|==
literal|2
condition|)
block|{
if|if
condition|(
name|s
index|[
literal|0
index|]
operator|<
literal|0xC2
condition|)
return|return
operator|(
literal|0
operator|)
return|;
block|}
else|else
block|{
name|unsigned
name|char
name|mask
decl_stmt|;
name|mask
operator|=
operator|(
operator|~
operator|(
operator|(
literal|1
operator|<<
operator|(
literal|8
operator|-
name|len
operator|)
operator|)
operator|-
literal|1
operator|)
operator|)
operator|&
literal|0xFF
expr_stmt|;
if|if
condition|(
name|s
index|[
literal|0
index|]
operator|==
name|mask
operator|&&
operator|(
name|s
index|[
literal|1
index|]
operator|&
name|mask
operator|)
operator|==
literal|0x80
condition|)
return|return
operator|(
literal|0
operator|)
return|;
block|}
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
name|len
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IS_UTF8_TRAIL
argument_list|(
name|s
index|[
name|i
index|]
argument_list|)
condition|)
return|return
operator|(
literal|0
operator|)
return|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * Get the value of a UTF-8 character.  */
end_comment

begin_function
name|public
name|LWCHAR
name|get_wchar
parameter_list|(
name|p
parameter_list|)
name|char
modifier|*
name|p
decl_stmt|;
block|{
switch|switch
condition|(
name|utf_len
argument_list|(
name|p
index|[
literal|0
index|]
argument_list|)
condition|)
block|{
case|case
literal|1
case|:
default|default:
return|return
call|(
name|LWCHAR
call|)
argument_list|(
name|p
index|[
literal|0
index|]
operator|&
literal|0xFF
argument_list|)
return|;
case|case
literal|2
case|:
return|return
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0x1F
operator|)
operator|<<
literal|6
operator|)
operator||
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0x3F
operator|)
argument_list|)
return|;
case|case
literal|3
case|:
return|return
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0x0F
operator|)
operator|<<
literal|12
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|6
operator|)
operator||
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0x3F
operator|)
argument_list|)
return|;
case|case
literal|4
case|:
return|return
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0x07
operator|)
operator|<<
literal|18
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|12
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|6
operator|)
operator||
operator|(
name|p
index|[
literal|3
index|]
operator|&
literal|0x3F
operator|)
argument_list|)
return|;
case|case
literal|5
case|:
return|return
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0x03
operator|)
operator|<<
literal|24
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|18
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|12
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|3
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|6
operator|)
operator||
operator|(
name|p
index|[
literal|4
index|]
operator|&
literal|0x3F
operator|)
argument_list|)
return|;
case|case
literal|6
case|:
return|return
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0x01
operator|)
operator|<<
literal|30
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|24
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|18
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|3
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|12
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|4
index|]
operator|&
literal|0x3F
operator|)
operator|<<
literal|6
operator|)
operator||
operator|(
name|p
index|[
literal|5
index|]
operator|&
literal|0x3F
operator|)
argument_list|)
return|;
block|}
block|}
end_function

begin_comment
comment|/*  * Step forward or backward one character in a string.  */
end_comment

begin_function
name|public
name|LWCHAR
name|step_char
parameter_list|(
name|pp
parameter_list|,
name|dir
parameter_list|,
name|limit
parameter_list|)
name|char
modifier|*
modifier|*
name|pp
decl_stmt|;
name|signed
name|int
name|dir
decl_stmt|;
name|char
modifier|*
name|limit
decl_stmt|;
block|{
name|LWCHAR
name|ch
decl_stmt|;
name|char
modifier|*
name|p
init|=
operator|*
name|pp
decl_stmt|;
if|if
condition|(
operator|!
name|utf_mode
condition|)
block|{
comment|/* It's easy if chars are one byte. */
if|if
condition|(
name|dir
operator|>
literal|0
condition|)
name|ch
operator|=
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
name|p
operator|<
name|limit
operator|)
condition|?
operator|*
name|p
operator|++
else|:
literal|0
argument_list|)
expr_stmt|;
else|else
name|ch
operator|=
call|(
name|LWCHAR
call|)
argument_list|(
operator|(
name|p
operator|>
name|limit
operator|)
condition|?
operator|*
operator|--
name|p
else|:
literal|0
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|dir
operator|>
literal|0
condition|)
block|{
if|if
condition|(
name|p
operator|+
name|utf_len
argument_list|(
operator|*
name|p
argument_list|)
operator|>
name|limit
condition|)
name|ch
operator|=
literal|0
expr_stmt|;
else|else
block|{
name|ch
operator|=
name|get_wchar
argument_list|(
name|p
argument_list|)
expr_stmt|;
name|p
operator|++
expr_stmt|;
while|while
condition|(
name|IS_UTF8_TRAIL
argument_list|(
operator|*
name|p
argument_list|)
condition|)
name|p
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|p
operator|>
name|limit
operator|&&
name|IS_UTF8_TRAIL
argument_list|(
name|p
index|[
operator|-
literal|1
index|]
argument_list|)
condition|)
name|p
operator|--
expr_stmt|;
if|if
condition|(
name|p
operator|>
name|limit
condition|)
name|ch
operator|=
name|get_wchar
argument_list|(
operator|--
name|p
argument_list|)
expr_stmt|;
else|else
name|ch
operator|=
literal|0
expr_stmt|;
block|}
operator|*
name|pp
operator|=
name|p
expr_stmt|;
return|return
name|ch
return|;
block|}
end_function

begin_comment
comment|/*  * Unicode characters data  */
end_comment

begin_struct
struct|struct
name|wchar_range
block|{
name|LWCHAR
name|first
decl_stmt|,
name|last
decl_stmt|;
block|}
struct|;
end_struct

begin_decl_stmt
specifier|static
name|struct
name|wchar_range
name|comp_table
index|[]
init|=
block|{
block|{
literal|0x300
block|,
literal|0x357
block|}
block|,
block|{
literal|0x35d
block|,
literal|0x36f
block|}
block|,
block|{
literal|0x483
block|,
literal|0x486
block|}
block|,
block|{
literal|0x488
block|,
literal|0x489
block|}
block|,
block|{
literal|0x591
block|,
literal|0x5a1
block|}
block|,
block|{
literal|0x5a3
block|,
literal|0x5b9
block|}
block|,
block|{
literal|0x5bb
block|,
literal|0x5bd
block|}
block|,
block|{
literal|0x5bf
block|,
literal|0x5bf
block|}
block|,
block|{
literal|0x5c1
block|,
literal|0x5c2
block|}
block|,
block|{
literal|0x5c4
block|,
literal|0x5c4
block|}
block|,
block|{
literal|0x610
block|,
literal|0x615
block|}
block|,
block|{
literal|0x64b
block|,
literal|0x658
block|}
block|,
block|{
literal|0x670
block|,
literal|0x670
block|}
block|,
block|{
literal|0x6d6
block|,
literal|0x6dc
block|}
block|,
block|{
literal|0x6de
block|,
literal|0x6e4
block|}
block|,
block|{
literal|0x6e7
block|,
literal|0x6e8
block|}
block|,
block|{
literal|0x6ea
block|,
literal|0x6ed
block|}
block|,
block|{
literal|0x711
block|,
literal|0x711
block|}
block|,
block|{
literal|0x730
block|,
literal|0x74a
block|}
block|,
block|{
literal|0x7a6
block|,
literal|0x7b0
block|}
block|,
block|{
literal|0x901
block|,
literal|0x902
block|}
block|,
block|{
literal|0x93c
block|,
literal|0x93c
block|}
block|,
block|{
literal|0x941
block|,
literal|0x948
block|}
block|,
block|{
literal|0x94d
block|,
literal|0x94d
block|}
block|,
block|{
literal|0x951
block|,
literal|0x954
block|}
block|,
block|{
literal|0x962
block|,
literal|0x963
block|}
block|,
block|{
literal|0x981
block|,
literal|0x981
block|}
block|,
block|{
literal|0x9bc
block|,
literal|0x9bc
block|}
block|,
block|{
literal|0x9c1
block|,
literal|0x9c4
block|}
block|,
block|{
literal|0x9cd
block|,
literal|0x9cd
block|}
block|,
block|{
literal|0x9e2
block|,
literal|0x9e3
block|}
block|,
block|{
literal|0xa01
block|,
literal|0xa02
block|}
block|,
block|{
literal|0xa3c
block|,
literal|0xa3c
block|}
block|,
block|{
literal|0xa41
block|,
literal|0xa42
block|}
block|,
block|{
literal|0xa47
block|,
literal|0xa48
block|}
block|,
block|{
literal|0xa4b
block|,
literal|0xa4d
block|}
block|,
block|{
literal|0xa70
block|,
literal|0xa71
block|}
block|,
block|{
literal|0xa81
block|,
literal|0xa82
block|}
block|,
block|{
literal|0xabc
block|,
literal|0xabc
block|}
block|,
block|{
literal|0xac1
block|,
literal|0xac5
block|}
block|,
block|{
literal|0xac7
block|,
literal|0xac8
block|}
block|,
block|{
literal|0xacd
block|,
literal|0xacd
block|}
block|,
block|{
literal|0xae2
block|,
literal|0xae3
block|}
block|,
block|{
literal|0xb01
block|,
literal|0xb01
block|}
block|,
block|{
literal|0xb3c
block|,
literal|0xb3c
block|}
block|,
block|{
literal|0xb3f
block|,
literal|0xb3f
block|}
block|,
block|{
literal|0xb41
block|,
literal|0xb43
block|}
block|,
block|{
literal|0xb4d
block|,
literal|0xb4d
block|}
block|,
block|{
literal|0xb56
block|,
literal|0xb56
block|}
block|,
block|{
literal|0xb82
block|,
literal|0xb82
block|}
block|,
block|{
literal|0xbc0
block|,
literal|0xbc0
block|}
block|,
block|{
literal|0xbcd
block|,
literal|0xbcd
block|}
block|,
block|{
literal|0xc3e
block|,
literal|0xc40
block|}
block|,
block|{
literal|0xc46
block|,
literal|0xc48
block|}
block|,
block|{
literal|0xc4a
block|,
literal|0xc4d
block|}
block|,
block|{
literal|0xc55
block|,
literal|0xc56
block|}
block|,
block|{
literal|0xcbc
block|,
literal|0xcbc
block|}
block|,
block|{
literal|0xcbf
block|,
literal|0xcbf
block|}
block|,
block|{
literal|0xcc6
block|,
literal|0xcc6
block|}
block|,
block|{
literal|0xccc
block|,
literal|0xccd
block|}
block|,
block|{
literal|0xd41
block|,
literal|0xd43
block|}
block|,
block|{
literal|0xd4d
block|,
literal|0xd4d
block|}
block|,
block|{
literal|0xdca
block|,
literal|0xdca
block|}
block|,
block|{
literal|0xdd2
block|,
literal|0xdd4
block|}
block|,
block|{
literal|0xdd6
block|,
literal|0xdd6
block|}
block|,
block|{
literal|0xe31
block|,
literal|0xe31
block|}
block|,
block|{
literal|0xe34
block|,
literal|0xe3a
block|}
block|,
block|{
literal|0xe47
block|,
literal|0xe4e
block|}
block|,
block|{
literal|0xeb1
block|,
literal|0xeb1
block|}
block|,
block|{
literal|0xeb4
block|,
literal|0xeb9
block|}
block|,
block|{
literal|0xebb
block|,
literal|0xebc
block|}
block|,
block|{
literal|0xec8
block|,
literal|0xecd
block|}
block|,
block|{
literal|0xf18
block|,
literal|0xf19
block|}
block|,
block|{
literal|0xf35
block|,
literal|0xf35
block|}
block|,
block|{
literal|0xf37
block|,
literal|0xf37
block|}
block|,
block|{
literal|0xf39
block|,
literal|0xf39
block|}
block|,
block|{
literal|0xf71
block|,
literal|0xf7e
block|}
block|,
block|{
literal|0xf80
block|,
literal|0xf84
block|}
block|,
block|{
literal|0xf86
block|,
literal|0xf87
block|}
block|,
block|{
literal|0xf90
block|,
literal|0xf97
block|}
block|,
block|{
literal|0xf99
block|,
literal|0xfbc
block|}
block|,
block|{
literal|0xfc6
block|,
literal|0xfc6
block|}
block|,
block|{
literal|0x102d
block|,
literal|0x1030
block|}
block|,
block|{
literal|0x1032
block|,
literal|0x1032
block|}
block|,
block|{
literal|0x1036
block|,
literal|0x1037
block|}
block|,
block|{
literal|0x1039
block|,
literal|0x1039
block|}
block|,
block|{
literal|0x1058
block|,
literal|0x1059
block|}
block|,
block|{
literal|0x1712
block|,
literal|0x1714
block|}
block|,
block|{
literal|0x1732
block|,
literal|0x1734
block|}
block|,
block|{
literal|0x1752
block|,
literal|0x1753
block|}
block|,
block|{
literal|0x1772
block|,
literal|0x1773
block|}
block|,
block|{
literal|0x17b7
block|,
literal|0x17bd
block|}
block|,
block|{
literal|0x17c6
block|,
literal|0x17c6
block|}
block|,
block|{
literal|0x17c9
block|,
literal|0x17d3
block|}
block|,
block|{
literal|0x17dd
block|,
literal|0x17dd
block|}
block|,
block|{
literal|0x180b
block|,
literal|0x180d
block|}
block|,
block|{
literal|0x18a9
block|,
literal|0x18a9
block|}
block|,
block|{
literal|0x1920
block|,
literal|0x1922
block|}
block|,
block|{
literal|0x1927
block|,
literal|0x1928
block|}
block|,
block|{
literal|0x1932
block|,
literal|0x1932
block|}
block|,
block|{
literal|0x1939
block|,
literal|0x193b
block|}
block|,
block|{
literal|0x20d0
block|,
literal|0x20ea
block|}
block|,
block|{
literal|0x302a
block|,
literal|0x302f
block|}
block|,
block|{
literal|0x3099
block|,
literal|0x309a
block|}
block|,
block|{
literal|0xfb1e
block|,
literal|0xfb1e
block|}
block|,
block|{
literal|0xfe00
block|,
literal|0xfe0f
block|}
block|,
block|{
literal|0xfe20
block|,
literal|0xfe23
block|}
block|,
block|{
literal|0x1d167
block|,
literal|0x1d169
block|}
block|,
block|{
literal|0x1d17b
block|,
literal|0x1d182
block|}
block|,
block|{
literal|0x1d185
block|,
literal|0x1d18b
block|}
block|,
block|{
literal|0x1d1aa
block|,
literal|0x1d1ad
block|}
block|,
block|{
literal|0xe0100
block|,
literal|0xe01ef
block|}
block|,  }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|wchar_range
name|comb_table
index|[]
init|=
block|{
block|{
literal|0x0644
block|,
literal|0x0622
block|}
block|,
block|{
literal|0x0644
block|,
literal|0x0623
block|}
block|,
block|{
literal|0x0644
block|,
literal|0x0625
block|}
block|,
block|{
literal|0x0644
block|,
literal|0x0627
block|}
block|,  }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  * Characters with general category values  *	Cc: Other, Control  *	Cf: Other, Format  *	Cs: Other, Surrogate  *	Co: Other, Private Use  *	Cn: Other, Not Assigned  *	Zl: Separator, Line  *	Zp: Separator, Paragraph  */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|wchar_range
name|ubin_table
index|[]
init|=
block|{
block|{
literal|0x0000
block|,
literal|0x001f
block|}
comment|/* Cc */
block|,
block|{
literal|0x007f
block|,
literal|0x009f
block|}
comment|/* Cc */
block|,
if|#
directive|if
literal|0
block|{  0x00ad,  0x00ad}
comment|/* Cf */
block|,
endif|#
directive|endif
block|{
literal|0x0237
block|,
literal|0x024f
block|}
comment|/* Cn */
block|,
block|{
literal|0x0358
block|,
literal|0x035c
block|}
comment|/* Cn */
block|,
block|{
literal|0x0370
block|,
literal|0x0373
block|}
comment|/* Cn */
block|,
block|{
literal|0x0376
block|,
literal|0x0379
block|}
comment|/* Cn */
block|,
block|{
literal|0x037b
block|,
literal|0x037d
block|}
comment|/* Cn */
block|,
block|{
literal|0x037f
block|,
literal|0x0383
block|}
comment|/* Cn */
block|,
block|{
literal|0x038b
block|,
literal|0x038b
block|}
comment|/* Cn */
block|,
block|{
literal|0x038d
block|,
literal|0x038d
block|}
comment|/* Cn */
block|,
block|{
literal|0x03a2
block|,
literal|0x03a2
block|}
comment|/* Cn */
block|,
block|{
literal|0x03cf
block|,
literal|0x03cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x03fc
block|,
literal|0x03ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x0487
block|,
literal|0x0487
block|}
comment|/* Cn */
block|,
block|{
literal|0x04cf
block|,
literal|0x04cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x04f6
block|,
literal|0x04f7
block|}
comment|/* Cn */
block|,
block|{
literal|0x04fa
block|,
literal|0x04ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x0510
block|,
literal|0x0530
block|}
comment|/* Cn */
block|,
block|{
literal|0x0557
block|,
literal|0x0558
block|}
comment|/* Cn */
block|,
block|{
literal|0x0560
block|,
literal|0x0560
block|}
comment|/* Cn */
block|,
block|{
literal|0x0588
block|,
literal|0x0588
block|}
comment|/* Cn */
block|,
block|{
literal|0x058b
block|,
literal|0x0590
block|}
comment|/* Cn */
block|,
block|{
literal|0x05a2
block|,
literal|0x05a2
block|}
comment|/* Cn */
block|,
block|{
literal|0x05ba
block|,
literal|0x05ba
block|}
comment|/* Cn */
block|,
block|{
literal|0x05c5
block|,
literal|0x05cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x05eb
block|,
literal|0x05ef
block|}
comment|/* Cn */
block|,
block|{
literal|0x05f5
block|,
literal|0x05ff
block|}
comment|/* Cn */
block|,
if|#
directive|if
literal|0
block|{  0x0600,  0x0603}
comment|/* Cf */
block|,
endif|#
directive|endif
block|{
literal|0x0604
block|,
literal|0x060b
block|}
comment|/* Cn */
block|,
block|{
literal|0x0616
block|,
literal|0x061a
block|}
comment|/* Cn */
block|,
block|{
literal|0x061c
block|,
literal|0x061e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0620
block|,
literal|0x0620
block|}
comment|/* Cn */
block|,
block|{
literal|0x063b
block|,
literal|0x063f
block|}
comment|/* Cn */
block|,
block|{
literal|0x0659
block|,
literal|0x065f
block|}
comment|/* Cn */
block|,
if|#
directive|if
literal|0
block|{  0x06dd,  0x06dd}
comment|/* Cf */
block|,
endif|#
directive|endif
block|{
literal|0x070e
block|,
literal|0x070e
block|}
comment|/* Cn */
block|,
if|#
directive|if
literal|0
block|{  0x070f,  0x070f}
comment|/* Cf */
block|,
endif|#
directive|endif
block|{
literal|0x074b
block|,
literal|0x074c
block|}
comment|/* Cn */
block|,
block|{
literal|0x0750
block|,
literal|0x077f
block|}
comment|/* Cn */
block|,
block|{
literal|0x07b2
block|,
literal|0x0900
block|}
comment|/* Cn */
block|,
block|{
literal|0x093a
block|,
literal|0x093b
block|}
comment|/* Cn */
block|,
block|{
literal|0x094e
block|,
literal|0x094f
block|}
comment|/* Cn */
block|,
block|{
literal|0x0955
block|,
literal|0x0957
block|}
comment|/* Cn */
block|,
block|{
literal|0x0971
block|,
literal|0x0980
block|}
comment|/* Cn */
block|,
block|{
literal|0x0984
block|,
literal|0x0984
block|}
comment|/* Cn */
block|,
block|{
literal|0x098d
block|,
literal|0x098e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0991
block|,
literal|0x0992
block|}
comment|/* Cn */
block|,
block|{
literal|0x09a9
block|,
literal|0x09a9
block|}
comment|/* Cn */
block|,
block|{
literal|0x09b1
block|,
literal|0x09b1
block|}
comment|/* Cn */
block|,
block|{
literal|0x09b3
block|,
literal|0x09b5
block|}
comment|/* Cn */
block|,
block|{
literal|0x09ba
block|,
literal|0x09bb
block|}
comment|/* Cn */
block|,
block|{
literal|0x09c5
block|,
literal|0x09c6
block|}
comment|/* Cn */
block|,
block|{
literal|0x09c9
block|,
literal|0x09ca
block|}
comment|/* Cn */
block|,
block|{
literal|0x09ce
block|,
literal|0x09d6
block|}
comment|/* Cn */
block|,
block|{
literal|0x09d8
block|,
literal|0x09db
block|}
comment|/* Cn */
block|,
block|{
literal|0x09de
block|,
literal|0x09de
block|}
comment|/* Cn */
block|,
block|{
literal|0x09e4
block|,
literal|0x09e5
block|}
comment|/* Cn */
block|,
block|{
literal|0x09fb
block|,
literal|0x0a00
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a04
block|,
literal|0x0a04
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a0b
block|,
literal|0x0a0e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a11
block|,
literal|0x0a12
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a29
block|,
literal|0x0a29
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a31
block|,
literal|0x0a31
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a34
block|,
literal|0x0a34
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a37
block|,
literal|0x0a37
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a3a
block|,
literal|0x0a3b
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a3d
block|,
literal|0x0a3d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a43
block|,
literal|0x0a46
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a49
block|,
literal|0x0a4a
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a4e
block|,
literal|0x0a58
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a5d
block|,
literal|0x0a5d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a5f
block|,
literal|0x0a65
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a75
block|,
literal|0x0a80
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a84
block|,
literal|0x0a84
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a8e
block|,
literal|0x0a8e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0a92
block|,
literal|0x0a92
block|}
comment|/* Cn */
block|,
block|{
literal|0x0aa9
block|,
literal|0x0aa9
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ab1
block|,
literal|0x0ab1
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ab4
block|,
literal|0x0ab4
block|}
comment|/* Cn */
block|,
block|{
literal|0x0aba
block|,
literal|0x0abb
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ac6
block|,
literal|0x0ac6
block|}
comment|/* Cn */
block|,
block|{
literal|0x0aca
block|,
literal|0x0aca
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ace
block|,
literal|0x0acf
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ad1
block|,
literal|0x0adf
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ae4
block|,
literal|0x0ae5
block|}
comment|/* Cn */
block|,
block|{
literal|0x0af0
block|,
literal|0x0af0
block|}
comment|/* Cn */
block|,
block|{
literal|0x0af2
block|,
literal|0x0b00
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b04
block|,
literal|0x0b04
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b0d
block|,
literal|0x0b0e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b11
block|,
literal|0x0b12
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b29
block|,
literal|0x0b29
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b31
block|,
literal|0x0b31
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b34
block|,
literal|0x0b34
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b3a
block|,
literal|0x0b3b
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b44
block|,
literal|0x0b46
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b49
block|,
literal|0x0b4a
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b4e
block|,
literal|0x0b55
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b58
block|,
literal|0x0b5b
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b5e
block|,
literal|0x0b5e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b62
block|,
literal|0x0b65
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b72
block|,
literal|0x0b81
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b84
block|,
literal|0x0b84
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b8b
block|,
literal|0x0b8d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b91
block|,
literal|0x0b91
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b96
block|,
literal|0x0b98
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b9b
block|,
literal|0x0b9b
block|}
comment|/* Cn */
block|,
block|{
literal|0x0b9d
block|,
literal|0x0b9d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ba0
block|,
literal|0x0ba2
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ba5
block|,
literal|0x0ba7
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bab
block|,
literal|0x0bad
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bb6
block|,
literal|0x0bb6
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bba
block|,
literal|0x0bbd
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bc3
block|,
literal|0x0bc5
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bc9
block|,
literal|0x0bc9
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bce
block|,
literal|0x0bd6
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bd8
block|,
literal|0x0be6
block|}
comment|/* Cn */
block|,
block|{
literal|0x0bfb
block|,
literal|0x0c00
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c04
block|,
literal|0x0c04
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c0d
block|,
literal|0x0c0d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c11
block|,
literal|0x0c11
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c29
block|,
literal|0x0c29
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c34
block|,
literal|0x0c34
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c3a
block|,
literal|0x0c3d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c45
block|,
literal|0x0c45
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c49
block|,
literal|0x0c49
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c4e
block|,
literal|0x0c54
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c57
block|,
literal|0x0c5f
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c62
block|,
literal|0x0c65
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c70
block|,
literal|0x0c81
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c84
block|,
literal|0x0c84
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c8d
block|,
literal|0x0c8d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0c91
block|,
literal|0x0c91
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ca9
block|,
literal|0x0ca9
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cb4
block|,
literal|0x0cb4
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cba
block|,
literal|0x0cbb
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cc5
block|,
literal|0x0cc5
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cc9
block|,
literal|0x0cc9
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cce
block|,
literal|0x0cd4
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cd7
block|,
literal|0x0cdd
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cdf
block|,
literal|0x0cdf
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ce2
block|,
literal|0x0ce5
block|}
comment|/* Cn */
block|,
block|{
literal|0x0cf0
block|,
literal|0x0d01
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d04
block|,
literal|0x0d04
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d0d
block|,
literal|0x0d0d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d11
block|,
literal|0x0d11
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d29
block|,
literal|0x0d29
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d3a
block|,
literal|0x0d3d
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d44
block|,
literal|0x0d45
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d49
block|,
literal|0x0d49
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d4e
block|,
literal|0x0d56
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d58
block|,
literal|0x0d5f
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d62
block|,
literal|0x0d65
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d70
block|,
literal|0x0d81
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d84
block|,
literal|0x0d84
block|}
comment|/* Cn */
block|,
block|{
literal|0x0d97
block|,
literal|0x0d99
block|}
comment|/* Cn */
block|,
block|{
literal|0x0db2
block|,
literal|0x0db2
block|}
comment|/* Cn */
block|,
block|{
literal|0x0dbc
block|,
literal|0x0dbc
block|}
comment|/* Cn */
block|,
block|{
literal|0x0dbe
block|,
literal|0x0dbf
block|}
comment|/* Cn */
block|,
block|{
literal|0x0dc7
block|,
literal|0x0dc9
block|}
comment|/* Cn */
block|,
block|{
literal|0x0dcb
block|,
literal|0x0dce
block|}
comment|/* Cn */
block|,
block|{
literal|0x0dd5
block|,
literal|0x0dd5
block|}
comment|/* Cn */
block|,
block|{
literal|0x0dd7
block|,
literal|0x0dd7
block|}
comment|/* Cn */
block|,
block|{
literal|0x0de0
block|,
literal|0x0df1
block|}
comment|/* Cn */
block|,
block|{
literal|0x0df5
block|,
literal|0x0e00
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e3b
block|,
literal|0x0e3e
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e5c
block|,
literal|0x0e80
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e83
block|,
literal|0x0e83
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e85
block|,
literal|0x0e86
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e89
block|,
literal|0x0e89
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e8b
block|,
literal|0x0e8c
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e8e
block|,
literal|0x0e93
block|}
comment|/* Cn */
block|,
block|{
literal|0x0e98
block|,
literal|0x0e98
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ea0
block|,
literal|0x0ea0
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ea4
block|,
literal|0x0ea4
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ea6
block|,
literal|0x0ea6
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ea8
block|,
literal|0x0ea9
block|}
comment|/* Cn */
block|,
block|{
literal|0x0eac
block|,
literal|0x0eac
block|}
comment|/* Cn */
block|,
block|{
literal|0x0eba
block|,
literal|0x0eba
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ebe
block|,
literal|0x0ebf
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ec5
block|,
literal|0x0ec5
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ec7
block|,
literal|0x0ec7
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ece
block|,
literal|0x0ecf
block|}
comment|/* Cn */
block|,
block|{
literal|0x0eda
block|,
literal|0x0edb
block|}
comment|/* Cn */
block|,
block|{
literal|0x0ede
block|,
literal|0x0eff
block|}
comment|/* Cn */
block|,
block|{
literal|0x0f48
block|,
literal|0x0f48
block|}
comment|/* Cn */
block|,
block|{
literal|0x0f6b
block|,
literal|0x0f70
block|}
comment|/* Cn */
block|,
block|{
literal|0x0f8c
block|,
literal|0x0f8f
block|}
comment|/* Cn */
block|,
block|{
literal|0x0f98
block|,
literal|0x0f98
block|}
comment|/* Cn */
block|,
block|{
literal|0x0fbd
block|,
literal|0x0fbd
block|}
comment|/* Cn */
block|,
block|{
literal|0x0fcd
block|,
literal|0x0fce
block|}
comment|/* Cn */
block|,
block|{
literal|0x0fd0
block|,
literal|0x0fff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1022
block|,
literal|0x1022
block|}
comment|/* Cn */
block|,
block|{
literal|0x1028
block|,
literal|0x1028
block|}
comment|/* Cn */
block|,
block|{
literal|0x102b
block|,
literal|0x102b
block|}
comment|/* Cn */
block|,
block|{
literal|0x1033
block|,
literal|0x1035
block|}
comment|/* Cn */
block|,
block|{
literal|0x103a
block|,
literal|0x103f
block|}
comment|/* Cn */
block|,
block|{
literal|0x105a
block|,
literal|0x109f
block|}
comment|/* Cn */
block|,
block|{
literal|0x10c6
block|,
literal|0x10cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x10f9
block|,
literal|0x10fa
block|}
comment|/* Cn */
block|,
block|{
literal|0x10fc
block|,
literal|0x10ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x115a
block|,
literal|0x115e
block|}
comment|/* Cn */
block|,
block|{
literal|0x11a3
block|,
literal|0x11a7
block|}
comment|/* Cn */
block|,
block|{
literal|0x11fa
block|,
literal|0x11ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1207
block|,
literal|0x1207
block|}
comment|/* Cn */
block|,
block|{
literal|0x1247
block|,
literal|0x1247
block|}
comment|/* Cn */
block|,
block|{
literal|0x1249
block|,
literal|0x1249
block|}
comment|/* Cn */
block|,
block|{
literal|0x124e
block|,
literal|0x124f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1257
block|,
literal|0x1257
block|}
comment|/* Cn */
block|,
block|{
literal|0x1259
block|,
literal|0x1259
block|}
comment|/* Cn */
block|,
block|{
literal|0x125e
block|,
literal|0x125f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1287
block|,
literal|0x1287
block|}
comment|/* Cn */
block|,
block|{
literal|0x1289
block|,
literal|0x1289
block|}
comment|/* Cn */
block|,
block|{
literal|0x128e
block|,
literal|0x128f
block|}
comment|/* Cn */
block|,
block|{
literal|0x12af
block|,
literal|0x12af
block|}
comment|/* Cn */
block|,
block|{
literal|0x12b1
block|,
literal|0x12b1
block|}
comment|/* Cn */
block|,
block|{
literal|0x12b6
block|,
literal|0x12b7
block|}
comment|/* Cn */
block|,
block|{
literal|0x12bf
block|,
literal|0x12bf
block|}
comment|/* Cn */
block|,
block|{
literal|0x12c1
block|,
literal|0x12c1
block|}
comment|/* Cn */
block|,
block|{
literal|0x12c6
block|,
literal|0x12c7
block|}
comment|/* Cn */
block|,
block|{
literal|0x12cf
block|,
literal|0x12cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x12d7
block|,
literal|0x12d7
block|}
comment|/* Cn */
block|,
block|{
literal|0x12ef
block|,
literal|0x12ef
block|}
comment|/* Cn */
block|,
block|{
literal|0x130f
block|,
literal|0x130f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1311
block|,
literal|0x1311
block|}
comment|/* Cn */
block|,
block|{
literal|0x1316
block|,
literal|0x1317
block|}
comment|/* Cn */
block|,
block|{
literal|0x131f
block|,
literal|0x131f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1347
block|,
literal|0x1347
block|}
comment|/* Cn */
block|,
block|{
literal|0x135b
block|,
literal|0x1360
block|}
comment|/* Cn */
block|,
block|{
literal|0x137d
block|,
literal|0x139f
block|}
comment|/* Cn */
block|,
block|{
literal|0x13f5
block|,
literal|0x1400
block|}
comment|/* Cn */
block|,
block|{
literal|0x1677
block|,
literal|0x167f
block|}
comment|/* Cn */
block|,
block|{
literal|0x169d
block|,
literal|0x169f
block|}
comment|/* Cn */
block|,
block|{
literal|0x16f1
block|,
literal|0x16ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x170d
block|,
literal|0x170d
block|}
comment|/* Cn */
block|,
block|{
literal|0x1715
block|,
literal|0x171f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1737
block|,
literal|0x173f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1754
block|,
literal|0x175f
block|}
comment|/* Cn */
block|,
block|{
literal|0x176d
block|,
literal|0x176d
block|}
comment|/* Cn */
block|,
block|{
literal|0x1771
block|,
literal|0x1771
block|}
comment|/* Cn */
block|,
block|{
literal|0x1774
block|,
literal|0x177f
block|}
comment|/* Cn */
block|,
if|#
directive|if
literal|0
block|{  0x17b4,  0x17b5}
comment|/* Cf */
block|,
endif|#
directive|endif
block|{
literal|0x17de
block|,
literal|0x17df
block|}
comment|/* Cn */
block|,
block|{
literal|0x17ea
block|,
literal|0x17ef
block|}
comment|/* Cn */
block|,
block|{
literal|0x17fa
block|,
literal|0x17ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x180f
block|,
literal|0x180f
block|}
comment|/* Cn */
block|,
block|{
literal|0x181a
block|,
literal|0x181f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1878
block|,
literal|0x187f
block|}
comment|/* Cn */
block|,
block|{
literal|0x18aa
block|,
literal|0x18ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x191d
block|,
literal|0x191f
block|}
comment|/* Cn */
block|,
block|{
literal|0x192c
block|,
literal|0x192f
block|}
comment|/* Cn */
block|,
block|{
literal|0x193c
block|,
literal|0x193f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1941
block|,
literal|0x1943
block|}
comment|/* Cn */
block|,
block|{
literal|0x196e
block|,
literal|0x196f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1975
block|,
literal|0x19df
block|}
comment|/* Cn */
block|,
block|{
literal|0x1a00
block|,
literal|0x1cff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d6c
block|,
literal|0x1dff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1e9c
block|,
literal|0x1e9f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1efa
block|,
literal|0x1eff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f16
block|,
literal|0x1f17
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f1e
block|,
literal|0x1f1f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f46
block|,
literal|0x1f47
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f4e
block|,
literal|0x1f4f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f58
block|,
literal|0x1f58
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f5a
block|,
literal|0x1f5a
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f5c
block|,
literal|0x1f5c
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f5e
block|,
literal|0x1f5e
block|}
comment|/* Cn */
block|,
block|{
literal|0x1f7e
block|,
literal|0x1f7f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1fb5
block|,
literal|0x1fb5
block|}
comment|/* Cn */
block|,
block|{
literal|0x1fc5
block|,
literal|0x1fc5
block|}
comment|/* Cn */
block|,
block|{
literal|0x1fd4
block|,
literal|0x1fd5
block|}
comment|/* Cn */
block|,
block|{
literal|0x1fdc
block|,
literal|0x1fdc
block|}
comment|/* Cn */
block|,
block|{
literal|0x1ff0
block|,
literal|0x1ff1
block|}
comment|/* Cn */
block|,
block|{
literal|0x1ff5
block|,
literal|0x1ff5
block|}
comment|/* Cn */
block|,
block|{
literal|0x1fff
block|,
literal|0x1fff
block|}
comment|/* Cn */
block|,
block|{
literal|0x200b
block|,
literal|0x200f
block|}
comment|/* Cf */
block|,
block|{
literal|0x2028
block|,
literal|0x2028
block|}
comment|/* Zl */
block|,
block|{
literal|0x2029
block|,
literal|0x2029
block|}
comment|/* Zp */
block|,
block|{
literal|0x202a
block|,
literal|0x202e
block|}
comment|/* Cf */
block|,
block|{
literal|0x2055
block|,
literal|0x2056
block|}
comment|/* Cn */
block|,
block|{
literal|0x2058
block|,
literal|0x205e
block|}
comment|/* Cn */
block|,
block|{
literal|0x2060
block|,
literal|0x2063
block|}
comment|/* Cf */
block|,
block|{
literal|0x2064
block|,
literal|0x2069
block|}
comment|/* Cn */
block|,
block|{
literal|0x206a
block|,
literal|0x206f
block|}
comment|/* Cf */
block|,
block|{
literal|0x2072
block|,
literal|0x2073
block|}
comment|/* Cn */
block|,
block|{
literal|0x208f
block|,
literal|0x209f
block|}
comment|/* Cn */
block|,
block|{
literal|0x20b2
block|,
literal|0x20cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x20eb
block|,
literal|0x20ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x213c
block|,
literal|0x213c
block|}
comment|/* Cn */
block|,
block|{
literal|0x214c
block|,
literal|0x2152
block|}
comment|/* Cn */
block|,
block|{
literal|0x2184
block|,
literal|0x218f
block|}
comment|/* Cn */
block|,
block|{
literal|0x23d1
block|,
literal|0x23ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x2427
block|,
literal|0x243f
block|}
comment|/* Cn */
block|,
block|{
literal|0x244b
block|,
literal|0x245f
block|}
comment|/* Cn */
block|,
block|{
literal|0x2618
block|,
literal|0x2618
block|}
comment|/* Cn */
block|,
block|{
literal|0x267e
block|,
literal|0x267f
block|}
comment|/* Cn */
block|,
block|{
literal|0x2692
block|,
literal|0x269f
block|}
comment|/* Cn */
block|,
block|{
literal|0x26a2
block|,
literal|0x2700
block|}
comment|/* Cn */
block|,
block|{
literal|0x2705
block|,
literal|0x2705
block|}
comment|/* Cn */
block|,
block|{
literal|0x270a
block|,
literal|0x270b
block|}
comment|/* Cn */
block|,
block|{
literal|0x2728
block|,
literal|0x2728
block|}
comment|/* Cn */
block|,
block|{
literal|0x274c
block|,
literal|0x274c
block|}
comment|/* Cn */
block|,
block|{
literal|0x274e
block|,
literal|0x274e
block|}
comment|/* Cn */
block|,
block|{
literal|0x2753
block|,
literal|0x2755
block|}
comment|/* Cn */
block|,
block|{
literal|0x2757
block|,
literal|0x2757
block|}
comment|/* Cn */
block|,
block|{
literal|0x275f
block|,
literal|0x2760
block|}
comment|/* Cn */
block|,
block|{
literal|0x2795
block|,
literal|0x2797
block|}
comment|/* Cn */
block|,
block|{
literal|0x27b0
block|,
literal|0x27b0
block|}
comment|/* Cn */
block|,
block|{
literal|0x27bf
block|,
literal|0x27cf
block|}
comment|/* Cn */
block|,
block|{
literal|0x27ec
block|,
literal|0x27ef
block|}
comment|/* Cn */
block|,
block|{
literal|0x2b0e
block|,
literal|0x2e7f
block|}
comment|/* Cn */
block|,
block|{
literal|0x2e9a
block|,
literal|0x2e9a
block|}
comment|/* Cn */
block|,
block|{
literal|0x2ef4
block|,
literal|0x2eff
block|}
comment|/* Cn */
block|,
block|{
literal|0x2fd6
block|,
literal|0x2fef
block|}
comment|/* Cn */
block|,
block|{
literal|0x2ffc
block|,
literal|0x2fff
block|}
comment|/* Cn */
block|,
block|{
literal|0x3040
block|,
literal|0x3040
block|}
comment|/* Cn */
block|,
block|{
literal|0x3097
block|,
literal|0x3098
block|}
comment|/* Cn */
block|,
block|{
literal|0x3100
block|,
literal|0x3104
block|}
comment|/* Cn */
block|,
block|{
literal|0x312d
block|,
literal|0x3130
block|}
comment|/* Cn */
block|,
block|{
literal|0x318f
block|,
literal|0x318f
block|}
comment|/* Cn */
block|,
block|{
literal|0x31b8
block|,
literal|0x31ef
block|}
comment|/* Cn */
block|,
block|{
literal|0x321f
block|,
literal|0x321f
block|}
comment|/* Cn */
block|,
block|{
literal|0x3244
block|,
literal|0x324f
block|}
comment|/* Cn */
block|,
block|{
literal|0x327e
block|,
literal|0x327e
block|}
comment|/* Cn */
block|,
block|{
literal|0x32ff
block|,
literal|0x32ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x4db6
block|,
literal|0x4dbf
block|}
comment|/* Cn */
block|,
block|{
literal|0x9fa6
block|,
literal|0x9fff
block|}
comment|/* Cn */
block|,
block|{
literal|0xa48d
block|,
literal|0xa48f
block|}
comment|/* Cn */
block|,
block|{
literal|0xa4c7
block|,
literal|0xabff
block|}
comment|/* Cn */
block|,
block|{
literal|0xd7a4
block|,
literal|0xd7ff
block|}
comment|/* Cn */
block|,
block|{
literal|0xd800
block|,
literal|0xdfff
block|}
comment|/* Cs */
block|,
block|{
literal|0xe000
block|,
literal|0xf8ff
block|}
comment|/* Co */
block|,
block|{
literal|0xfa2e
block|,
literal|0xfa2f
block|}
comment|/* Cn */
block|,
block|{
literal|0xfa6b
block|,
literal|0xfaff
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb07
block|,
literal|0xfb12
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb18
block|,
literal|0xfb1c
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb37
block|,
literal|0xfb37
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb3d
block|,
literal|0xfb3d
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb3f
block|,
literal|0xfb3f
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb42
block|,
literal|0xfb42
block|}
comment|/* Cn */
block|,
block|{
literal|0xfb45
block|,
literal|0xfb45
block|}
comment|/* Cn */
block|,
block|{
literal|0xfbb2
block|,
literal|0xfbd2
block|}
comment|/* Cn */
block|,
block|{
literal|0xfd40
block|,
literal|0xfd4f
block|}
comment|/* Cn */
block|,
block|{
literal|0xfd90
block|,
literal|0xfd91
block|}
comment|/* Cn */
block|,
block|{
literal|0xfdc8
block|,
literal|0xfdef
block|}
comment|/* Cn */
block|,
block|{
literal|0xfdfe
block|,
literal|0xfdff
block|}
comment|/* Cn */
block|,
block|{
literal|0xfe10
block|,
literal|0xfe1f
block|}
comment|/* Cn */
block|,
block|{
literal|0xfe24
block|,
literal|0xfe2f
block|}
comment|/* Cn */
block|,
block|{
literal|0xfe53
block|,
literal|0xfe53
block|}
comment|/* Cn */
block|,
block|{
literal|0xfe67
block|,
literal|0xfe67
block|}
comment|/* Cn */
block|,
block|{
literal|0xfe6c
block|,
literal|0xfe6f
block|}
comment|/* Cn */
block|,
block|{
literal|0xfe75
block|,
literal|0xfe75
block|}
comment|/* Cn */
block|,
block|{
literal|0xfefd
block|,
literal|0xfefe
block|}
comment|/* Cn */
block|,
block|{
literal|0xfeff
block|,
literal|0xfeff
block|}
comment|/* Cf */
block|,
block|{
literal|0xff00
block|,
literal|0xff00
block|}
comment|/* Cn */
block|,
block|{
literal|0xffbf
block|,
literal|0xffc1
block|}
comment|/* Cn */
block|,
block|{
literal|0xffc8
block|,
literal|0xffc9
block|}
comment|/* Cn */
block|,
block|{
literal|0xffd0
block|,
literal|0xffd1
block|}
comment|/* Cn */
block|,
block|{
literal|0xffd8
block|,
literal|0xffd9
block|}
comment|/* Cn */
block|,
block|{
literal|0xffdd
block|,
literal|0xffdf
block|}
comment|/* Cn */
block|,
block|{
literal|0xffe7
block|,
literal|0xffe7
block|}
comment|/* Cn */
block|,
block|{
literal|0xffef
block|,
literal|0xfff8
block|}
comment|/* Cn */
block|,
block|{
literal|0xfff9
block|,
literal|0xfffb
block|}
comment|/* Cf */
block|,
block|{
literal|0xfffe
block|,
literal|0xffff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1000c
block|,
literal|0x1000c
block|}
comment|/* Cn */
block|,
block|{
literal|0x10027
block|,
literal|0x10027
block|}
comment|/* Cn */
block|,
block|{
literal|0x1003b
block|,
literal|0x1003b
block|}
comment|/* Cn */
block|,
block|{
literal|0x1003e
block|,
literal|0x1003e
block|}
comment|/* Cn */
block|,
block|{
literal|0x1004e
block|,
literal|0x1004f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1005e
block|,
literal|0x1007f
block|}
comment|/* Cn */
block|,
block|{
literal|0x100fb
block|,
literal|0x100ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x10103
block|,
literal|0x10106
block|}
comment|/* Cn */
block|,
block|{
literal|0x10134
block|,
literal|0x10136
block|}
comment|/* Cn */
block|,
block|{
literal|0x10140
block|,
literal|0x102ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1031f
block|,
literal|0x1031f
block|}
comment|/* Cn */
block|,
block|{
literal|0x10324
block|,
literal|0x1032f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1034b
block|,
literal|0x1037f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1039e
block|,
literal|0x1039e
block|}
comment|/* Cn */
block|,
block|{
literal|0x103a0
block|,
literal|0x103ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1049e
block|,
literal|0x1049f
block|}
comment|/* Cn */
block|,
block|{
literal|0x104aa
block|,
literal|0x107ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x10806
block|,
literal|0x10807
block|}
comment|/* Cn */
block|,
block|{
literal|0x10809
block|,
literal|0x10809
block|}
comment|/* Cn */
block|,
block|{
literal|0x10836
block|,
literal|0x10836
block|}
comment|/* Cn */
block|,
block|{
literal|0x10839
block|,
literal|0x1083b
block|}
comment|/* Cn */
block|,
block|{
literal|0x1083d
block|,
literal|0x1083e
block|}
comment|/* Cn */
block|,
block|{
literal|0x10840
block|,
literal|0x1cfff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d0f6
block|,
literal|0x1d0ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d127
block|,
literal|0x1d129
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d173
block|,
literal|0x1d17a
block|}
comment|/* Cf */
block|,
block|{
literal|0x1d1de
block|,
literal|0x1d2ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d357
block|,
literal|0x1d3ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d455
block|,
literal|0x1d455
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d49d
block|,
literal|0x1d49d
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4a0
block|,
literal|0x1d4a1
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4a3
block|,
literal|0x1d4a4
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4a7
block|,
literal|0x1d4a8
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4ad
block|,
literal|0x1d4ad
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4ba
block|,
literal|0x1d4ba
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4bc
block|,
literal|0x1d4bc
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d4c4
block|,
literal|0x1d4c4
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d506
block|,
literal|0x1d506
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d50b
block|,
literal|0x1d50c
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d515
block|,
literal|0x1d515
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d51d
block|,
literal|0x1d51d
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d53a
block|,
literal|0x1d53a
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d53f
block|,
literal|0x1d53f
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d545
block|,
literal|0x1d545
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d547
block|,
literal|0x1d549
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d551
block|,
literal|0x1d551
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d6a4
block|,
literal|0x1d6a7
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d7ca
block|,
literal|0x1d7cd
block|}
comment|/* Cn */
block|,
block|{
literal|0x1d800
block|,
literal|0x1ffff
block|}
comment|/* Cn */
block|,
block|{
literal|0x2a6d7
block|,
literal|0x2f7ff
block|}
comment|/* Cn */
block|,
block|{
literal|0x2fa1e
block|,
literal|0xe0000
block|}
comment|/* Cn */
block|,
block|{
literal|0xe0001
block|,
literal|0xe0001
block|}
comment|/* Cf */
block|,
block|{
literal|0xe0002
block|,
literal|0xe001f
block|}
comment|/* Cn */
block|,
block|{
literal|0xe0020
block|,
literal|0xe007f
block|}
comment|/* Cf */
block|,
block|{
literal|0xe0080
block|,
literal|0xe00ff
block|}
comment|/* Cn */
block|,
block|{
literal|0xe01f0
block|,
literal|0xeffff
block|}
comment|/* Cn */
block|,
block|{
literal|0xf0000
block|,
literal|0xffffd
block|}
comment|/* Co */
block|,
block|{
literal|0xffffe
block|,
literal|0xfffff
block|}
comment|/* Cn */
block|,
block|{
literal|0x100000
block|,
literal|0x10fffd
block|}
comment|/* Co */
block|,
block|{
literal|0x10fffe
block|,
literal|0x10ffff
block|}
comment|/* Cn */
block|,
block|{
literal|0x110000
block|,
literal|0x7fffffff
block|}
comment|/* ISO 10646?? */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  * Double width characters  *	W: East Asian Wide  *	F: East Asian Full-width  */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|wchar_range
name|wide_table
index|[]
init|=
block|{
block|{
literal|0x1100
block|,
literal|0x115f
block|}
comment|/* W */
block|,
block|{
literal|0x2329
block|,
literal|0x232a
block|}
comment|/* W */
block|,
block|{
literal|0x2E80
block|,
literal|0x2FFB
block|}
comment|/* W */
block|,
block|{
literal|0x3000
block|,
literal|0x3000
block|}
comment|/* F */
block|,
block|{
literal|0x3001
block|,
literal|0x303E
block|}
comment|/* W */
block|,
block|{
literal|0x3041
block|,
literal|0x4DB5
block|}
comment|/* W */
block|,
block|{
literal|0x4E00
block|,
literal|0x9FA5
block|}
comment|/* W */
block|,
block|{
literal|0xA000
block|,
literal|0xA4C6
block|}
comment|/* W */
block|,
block|{
literal|0xAC00
block|,
literal|0xD7A3
block|}
comment|/* W */
block|,
block|{
literal|0xF900
block|,
literal|0xFA6A
block|}
comment|/* W */
block|,
block|{
literal|0xFE30
block|,
literal|0xFE6B
block|}
comment|/* W */
block|,
block|{
literal|0xFF01
block|,
literal|0xFF60
block|}
comment|/* F */
block|,
block|{
literal|0xFFE0
block|,
literal|0xFFE6
block|}
comment|/* F */
block|,
block|{
literal|0x20000
block|,
literal|0x2FFFD
block|}
comment|/* W */
block|,
block|{
literal|0x30000
block|,
literal|0x3FFFD
block|}
comment|/* W */
block|,  }
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|int
name|is_in_table
parameter_list|(
name|ch
parameter_list|,
name|table
parameter_list|,
name|tsize
parameter_list|)
name|LWCHAR
name|ch
decl_stmt|;
name|struct
name|wchar_range
name|table
index|[]
decl_stmt|;
name|int
name|tsize
decl_stmt|;
block|{
name|int
name|hi
decl_stmt|;
name|int
name|lo
decl_stmt|;
comment|/* Binary search in the table. */
if|if
condition|(
name|ch
operator|<
name|table
index|[
literal|0
index|]
operator|.
name|first
condition|)
return|return
literal|0
return|;
name|lo
operator|=
literal|0
expr_stmt|;
name|hi
operator|=
name|tsize
operator|-
literal|1
expr_stmt|;
while|while
condition|(
name|lo
operator|<=
name|hi
condition|)
block|{
name|int
name|mid
init|=
operator|(
name|lo
operator|+
name|hi
operator|)
operator|/
literal|2
decl_stmt|;
if|if
condition|(
name|ch
operator|>
name|table
index|[
name|mid
index|]
operator|.
name|last
condition|)
name|lo
operator|=
name|mid
operator|+
literal|1
expr_stmt|;
elseif|else
if|if
condition|(
name|ch
operator|<
name|table
index|[
name|mid
index|]
operator|.
name|first
condition|)
name|hi
operator|=
name|mid
operator|-
literal|1
expr_stmt|;
else|else
return|return
literal|1
return|;
block|}
return|return
literal|0
return|;
block|}
end_function

begin_comment
comment|/*  * Is a character a UTF-8 composing character?  * If a composing character follows any char, the two combine into one glyph.  */
end_comment

begin_function
name|public
name|int
name|is_composing_char
parameter_list|(
name|ch
parameter_list|)
name|LWCHAR
name|ch
decl_stmt|;
block|{
return|return
name|is_in_table
argument_list|(
name|ch
argument_list|,
name|comp_table
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|comp_table
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
operator|*
name|comp_table
argument_list|)
operator|)
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  * Should this UTF-8 character be treated as binary?  */
end_comment

begin_function
name|public
name|int
name|is_ubin_char
parameter_list|(
name|ch
parameter_list|)
name|LWCHAR
name|ch
decl_stmt|;
block|{
return|return
name|is_in_table
argument_list|(
name|ch
argument_list|,
name|ubin_table
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|ubin_table
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
operator|*
name|ubin_table
argument_list|)
operator|)
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  * Is this a double width UTF-8 character?  */
end_comment

begin_function
name|public
name|int
name|is_wide_char
parameter_list|(
name|ch
parameter_list|)
name|LWCHAR
name|ch
decl_stmt|;
block|{
return|return
name|is_in_table
argument_list|(
name|ch
argument_list|,
name|wide_table
argument_list|,
operator|(
sizeof|sizeof
argument_list|(
name|wide_table
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
operator|*
name|wide_table
argument_list|)
operator|)
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  * Is a character a UTF-8 combining character?  * A combining char acts like an ordinary char, but if it follows  * a specific char (not any char), the two combine into one glyph.  */
end_comment

begin_function
name|public
name|int
name|is_combining_char
parameter_list|(
name|ch1
parameter_list|,
name|ch2
parameter_list|)
name|LWCHAR
name|ch1
decl_stmt|;
name|LWCHAR
name|ch2
decl_stmt|;
block|{
comment|/* The table is small; use linear search. */
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
sizeof|sizeof
argument_list|(
name|comb_table
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
operator|*
name|comb_table
argument_list|)
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|ch1
operator|==
name|comb_table
index|[
name|i
index|]
operator|.
name|first
operator|&&
name|ch2
operator|==
name|comb_table
index|[
name|i
index|]
operator|.
name|last
condition|)
return|return
literal|1
return|;
block|}
return|return
literal|0
return|;
block|}
end_function

end_unit

