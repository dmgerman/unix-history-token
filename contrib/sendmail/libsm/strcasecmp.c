begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2000-2001 Sendmail, Inc. and its suppliers.  *	All rights reserved.  * Copyright (c) 1983, 1995-1997 Eric P. Allman.  All rights reserved.  * Copyright (c) 1987, 1988, 1993  *	The Regents of the University of California.  All rights reserved.  *  * By using this file, you agree to the terms and conditions set  * forth in the LICENSE file which can be found at the top level of  * the sendmail distribution.  *  */
end_comment

begin_include
include|#
directive|include
file|<sm/gen.h>
end_include

begin_macro
name|SM_RCSID
argument_list|(
literal|"@(#)$Id: strcasecmp.c,v 1.15 2001/09/11 04:04:49 gshapiro Exp $"
argument_list|)
end_macro

begin_include
include|#
directive|include
file|<sm/config.h>
end_include

begin_include
include|#
directive|include
file|<sm/string.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_comment
comment|/* **  SM_STRCASECMP -- 8-bit clean version of strcasecmp ** **	Thank you, vendors, for making this all necessary. */
end_comment

begin_comment
comment|/* **  This array is designed for mapping upper and lower case letter **  together for a case independent comparison.  The mappings are **  based upon ascii character sequences. */
end_comment

begin_decl_stmt
specifier|const
name|unsigned
name|char
name|charmap
index|[]
init|=
block|{
literal|0000
block|,
literal|0001
block|,
literal|0002
block|,
literal|0003
block|,
literal|0004
block|,
literal|0005
block|,
literal|0006
block|,
literal|0007
block|,
literal|0010
block|,
literal|0011
block|,
literal|0012
block|,
literal|0013
block|,
literal|0014
block|,
literal|0015
block|,
literal|0016
block|,
literal|0017
block|,
literal|0020
block|,
literal|0021
block|,
literal|0022
block|,
literal|0023
block|,
literal|0024
block|,
literal|0025
block|,
literal|0026
block|,
literal|0027
block|,
literal|0030
block|,
literal|0031
block|,
literal|0032
block|,
literal|0033
block|,
literal|0034
block|,
literal|0035
block|,
literal|0036
block|,
literal|0037
block|,
literal|0040
block|,
literal|0041
block|,
literal|0042
block|,
literal|0043
block|,
literal|0044
block|,
literal|0045
block|,
literal|0046
block|,
literal|0047
block|,
literal|0050
block|,
literal|0051
block|,
literal|0052
block|,
literal|0053
block|,
literal|0054
block|,
literal|0055
block|,
literal|0056
block|,
literal|0057
block|,
literal|0060
block|,
literal|0061
block|,
literal|0062
block|,
literal|0063
block|,
literal|0064
block|,
literal|0065
block|,
literal|0066
block|,
literal|0067
block|,
literal|0070
block|,
literal|0071
block|,
literal|0072
block|,
literal|0073
block|,
literal|0074
block|,
literal|0075
block|,
literal|0076
block|,
literal|0077
block|,
literal|0100
block|,
literal|0141
block|,
literal|0142
block|,
literal|0143
block|,
literal|0144
block|,
literal|0145
block|,
literal|0146
block|,
literal|0147
block|,
literal|0150
block|,
literal|0151
block|,
literal|0152
block|,
literal|0153
block|,
literal|0154
block|,
literal|0155
block|,
literal|0156
block|,
literal|0157
block|,
literal|0160
block|,
literal|0161
block|,
literal|0162
block|,
literal|0163
block|,
literal|0164
block|,
literal|0165
block|,
literal|0166
block|,
literal|0167
block|,
literal|0170
block|,
literal|0171
block|,
literal|0172
block|,
literal|0133
block|,
literal|0134
block|,
literal|0135
block|,
literal|0136
block|,
literal|0137
block|,
literal|0140
block|,
literal|0141
block|,
literal|0142
block|,
literal|0143
block|,
literal|0144
block|,
literal|0145
block|,
literal|0146
block|,
literal|0147
block|,
literal|0150
block|,
literal|0151
block|,
literal|0152
block|,
literal|0153
block|,
literal|0154
block|,
literal|0155
block|,
literal|0156
block|,
literal|0157
block|,
literal|0160
block|,
literal|0161
block|,
literal|0162
block|,
literal|0163
block|,
literal|0164
block|,
literal|0165
block|,
literal|0166
block|,
literal|0167
block|,
literal|0170
block|,
literal|0171
block|,
literal|0172
block|,
literal|0173
block|,
literal|0174
block|,
literal|0175
block|,
literal|0176
block|,
literal|0177
block|,
literal|0200
block|,
literal|0201
block|,
literal|0202
block|,
literal|0203
block|,
literal|0204
block|,
literal|0205
block|,
literal|0206
block|,
literal|0207
block|,
literal|0210
block|,
literal|0211
block|,
literal|0212
block|,
literal|0213
block|,
literal|0214
block|,
literal|0215
block|,
literal|0216
block|,
literal|0217
block|,
literal|0220
block|,
literal|0221
block|,
literal|0222
block|,
literal|0223
block|,
literal|0224
block|,
literal|0225
block|,
literal|0226
block|,
literal|0227
block|,
literal|0230
block|,
literal|0231
block|,
literal|0232
block|,
literal|0233
block|,
literal|0234
block|,
literal|0235
block|,
literal|0236
block|,
literal|0237
block|,
literal|0240
block|,
literal|0241
block|,
literal|0242
block|,
literal|0243
block|,
literal|0244
block|,
literal|0245
block|,
literal|0246
block|,
literal|0247
block|,
literal|0250
block|,
literal|0251
block|,
literal|0252
block|,
literal|0253
block|,
literal|0254
block|,
literal|0255
block|,
literal|0256
block|,
literal|0257
block|,
literal|0260
block|,
literal|0261
block|,
literal|0262
block|,
literal|0263
block|,
literal|0264
block|,
literal|0265
block|,
literal|0266
block|,
literal|0267
block|,
literal|0270
block|,
literal|0271
block|,
literal|0272
block|,
literal|0273
block|,
literal|0274
block|,
literal|0275
block|,
literal|0276
block|,
literal|0277
block|,
literal|0300
block|,
literal|0301
block|,
literal|0302
block|,
literal|0303
block|,
literal|0304
block|,
literal|0305
block|,
literal|0306
block|,
literal|0307
block|,
literal|0310
block|,
literal|0311
block|,
literal|0312
block|,
literal|0313
block|,
literal|0314
block|,
literal|0315
block|,
literal|0316
block|,
literal|0317
block|,
literal|0320
block|,
literal|0321
block|,
literal|0322
block|,
literal|0323
block|,
literal|0324
block|,
literal|0325
block|,
literal|0326
block|,
literal|0327
block|,
literal|0330
block|,
literal|0331
block|,
literal|0332
block|,
literal|0333
block|,
literal|0334
block|,
literal|0335
block|,
literal|0336
block|,
literal|0337
block|,
literal|0340
block|,
literal|0341
block|,
literal|0342
block|,
literal|0343
block|,
literal|0344
block|,
literal|0345
block|,
literal|0346
block|,
literal|0347
block|,
literal|0350
block|,
literal|0351
block|,
literal|0352
block|,
literal|0353
block|,
literal|0354
block|,
literal|0355
block|,
literal|0356
block|,
literal|0357
block|,
literal|0360
block|,
literal|0361
block|,
literal|0362
block|,
literal|0363
block|,
literal|0364
block|,
literal|0365
block|,
literal|0366
block|,
literal|0367
block|,
literal|0370
block|,
literal|0371
block|,
literal|0372
block|,
literal|0373
block|,
literal|0374
block|,
literal|0375
block|,
literal|0376
block|,
literal|0377
block|, }
decl_stmt|;
end_decl_stmt

begin_function
name|int
name|sm_strcasecmp
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|)
specifier|const
name|char
modifier|*
name|s1
decl_stmt|,
decl|*
name|s2
decl_stmt|;
end_function

begin_block
block|{
specifier|const
name|unsigned
name|char
modifier|*
name|us1
init|=
operator|(
specifier|const
name|unsigned
name|char
operator|*
operator|)
name|s1
decl_stmt|;
specifier|const
name|unsigned
name|char
modifier|*
name|us2
init|=
operator|(
specifier|const
name|unsigned
name|char
operator|*
operator|)
name|s2
decl_stmt|;
while|while
condition|(
name|charmap
index|[
operator|*
name|us1
index|]
operator|==
name|charmap
index|[
operator|*
name|us2
index|]
condition|)
block|{
if|if
condition|(
operator|*
name|us1
operator|==
literal|'\0'
condition|)
return|return
literal|0
return|;
operator|++
name|us1
expr_stmt|;
operator|++
name|us2
expr_stmt|;
block|}
return|return
name|charmap
index|[
operator|*
name|us1
index|]
operator|-
name|charmap
index|[
operator|*
name|us2
index|]
return|;
block|}
end_block

begin_function
name|int
name|sm_strncasecmp
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|,
name|n
parameter_list|)
specifier|const
name|char
modifier|*
name|s1
decl_stmt|,
decl|*
name|s2
decl_stmt|;
end_function

begin_decl_stmt
specifier|register
name|size_t
name|n
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
name|n
operator|!=
literal|0
condition|)
block|{
specifier|register
specifier|const
name|unsigned
name|char
modifier|*
name|cm
init|=
name|charmap
decl_stmt|;
specifier|register
specifier|const
name|unsigned
name|char
modifier|*
name|us1
init|=
operator|(
specifier|const
name|unsigned
name|char
operator|*
operator|)
name|s1
decl_stmt|;
specifier|register
specifier|const
name|unsigned
name|char
modifier|*
name|us2
init|=
operator|(
specifier|const
name|unsigned
name|char
operator|*
operator|)
name|s2
decl_stmt|;
do|do
block|{
if|if
condition|(
name|cm
index|[
operator|*
name|us1
index|]
operator|!=
name|cm
index|[
operator|*
name|us2
operator|++
index|]
condition|)
return|return
operator|(
name|cm
index|[
operator|*
name|us1
index|]
operator|-
name|cm
index|[
operator|*
operator|--
name|us2
index|]
operator|)
return|;
if|if
condition|(
operator|*
name|us1
operator|++
operator|==
literal|'\0'
condition|)
break|break;
block|}
do|while
condition|(
operator|--
name|n
operator|!=
literal|0
condition|)
do|;
block|}
return|return
literal|0
return|;
block|}
end_block

end_unit

