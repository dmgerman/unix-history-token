begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2004-2007 Voltaire Inc.  All rights reserved.  *  * This software is available to you under a choice of one of two  * licenses.  You may choose to be licensed under the terms of the GNU  * General Public License (GPL) Version 2, available from the file  * COPYING in the main directory of this source tree, or the  * OpenIB.org BSD license below:  *  *     Redistribution and use in source and binary forms, with or  *     without modification, are permitted provided that the following  *     conditions are met:  *  *      - Redistributions of source code must retain the above  *        copyright notice, this list of conditions and the following  *        disclaimer.  *  *      - Redistributions in binary form must reproduce the above  *        copyright notice, this list of conditions and the following  *        disclaimer in the documentation and/or other materials  *        provided with the distribution.  *  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS  * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN  * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE  * SOFTWARE.  *  */
end_comment

begin_if
if|#
directive|if
name|HAVE_CONFIG_H
end_if

begin_include
include|#
directive|include
file|<config.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* HAVE_CONFIG_H */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<unistd.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<mad.h>
end_include

begin_include
include|#
directive|include
file|<infiniband/common.h>
end_include

begin_comment
comment|/*  * BITSOFFS and BE_OFFS are required due the fact that the bit offsets are inconsistently  * encoded in the IB spec - IB headers are encoded such that the bit offsets  * are in big endian convention (BE_OFFS), while the SMI/GSI queries data fields bit  * offsets are specified using real bit offset (?!)  * The following macros normalize everything to big endian offsets.  */
end_comment

begin_define
define|#
directive|define
name|BITSOFFS
parameter_list|(
name|o
parameter_list|,
name|w
parameter_list|)
value|(((o)& ~31) | ((32 - ((o)& 31) - (w)))), (w)
end_define

begin_define
define|#
directive|define
name|BE_OFFS
parameter_list|(
name|o
parameter_list|,
name|w
parameter_list|)
value|(o), (w)
end_define

begin_define
define|#
directive|define
name|BE_TO_BITSOFFS
parameter_list|(
name|o
parameter_list|,
name|w
parameter_list|)
value|(((o)& ~31) | ((32 - ((o)& 31) - (w))))
end_define

begin_decl_stmt
name|ib_field_t
name|ib_mad_f
index|[]
init|=
block|{
index|[
literal|0
index|]
block|{
literal|0
block|,
literal|0
block|}
block|,
comment|/* IB_NO_FIELD - reserved as invalid */
index|[
name|IB_GID_PREFIX_F
index|]
block|{
literal|0
block|,
literal|64
block|,
literal|"GidPrefix"
block|,
name|mad_dump_rhex
block|}
block|,
index|[
name|IB_GID_GUID_F
index|]
block|{
literal|64
block|,
literal|64
block|,
literal|"GidGuid"
block|,
name|mad_dump_rhex
block|}
block|,
comment|/* 	 * MAD: common MAD fields (IB spec 13.4.2) 	 * SMP: Subnet Management packets - lid routed (IB spec 14.2.1.1) 	 * DSMP: Subnet Management packets - direct route (IB spec 14.2.1.2) 	 * SA: Subnet Administration packets (IB spec 15.2.1.1) 	 */
comment|/* first MAD word (0-3 bytes) */
index|[
name|IB_MAD_METHOD_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|0
argument_list|,
literal|7
argument_list|)
block|,
literal|"MadMethod"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* TODO: add dumper */
index|[
name|IB_MAD_RESPONSE_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|7
argument_list|,
literal|1
argument_list|)
block|,
literal|"MadIsResponse"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* TODO: add dumper */
index|[
name|IB_MAD_CLASSVER_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|8
argument_list|,
literal|8
argument_list|)
block|,
literal|"MadClassVersion"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_MAD_MGMTCLASS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|16
argument_list|,
literal|8
argument_list|)
block|,
literal|"MadMgmtClass"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* TODO: add dumper */
index|[
name|IB_MAD_BASEVER_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|24
argument_list|,
literal|8
argument_list|)
block|,
literal|"MadBaseVersion"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* second MAD word (4-7 bytes) */
index|[
name|IB_MAD_STATUS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|48
argument_list|,
literal|16
argument_list|)
block|,
literal|"MadStatus"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* TODO: add dumper */
comment|/* DR SMP only */
index|[
name|IB_DRSMP_HOPCNT_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|32
argument_list|,
literal|8
argument_list|)
block|,
literal|"DrSmpHopCnt"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_DRSMP_HOPPTR_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|40
argument_list|,
literal|8
argument_list|)
block|,
literal|"DrSmpHopPtr"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_DRSMP_STATUS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|48
argument_list|,
literal|15
argument_list|)
block|,
literal|"DrSmpStatus"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* TODO: add dumper */
index|[
name|IB_DRSMP_DIRECTION_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|63
argument_list|,
literal|1
argument_list|)
block|,
literal|"DrSmpDirection"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* TODO: add dumper */
comment|/* words 3,4,5,6 (8-23 bytes) */
index|[
name|IB_MAD_TRID_F
index|]
block|{
literal|64
block|,
literal|64
block|,
literal|"MadTRID"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_MAD_ATTRID_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|144
argument_list|,
literal|16
argument_list|)
block|,
literal|"MadAttr"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* TODO: add dumper */
index|[
name|IB_MAD_ATTRMOD_F
index|]
block|{
literal|160
block|,
literal|32
block|,
literal|"MadModifier"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* TODO: add dumper */
comment|/* word 7,8 (24-31 bytes) */
index|[
name|IB_MAD_MKEY_F
index|]
block|{
literal|196
block|,
literal|64
block|,
literal|"MadMkey"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* word 9 (32-37 bytes) */
index|[
name|IB_DRSMP_DRDLID_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|256
argument_list|,
literal|16
argument_list|)
block|,
literal|"DrSmpDLID"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_DRSMP_DRSLID_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|272
argument_list|,
literal|16
argument_list|)
block|,
literal|"DrSmpSLID"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* word 12 (44-47 bytes) */
index|[
name|IB_SA_ATTROFFS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|46
operator|*
literal|8
argument_list|,
literal|16
argument_list|)
block|,
literal|"SaAttrOffs"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* word 13,14 (48-55 bytes) */
index|[
name|IB_SA_COMPMASK_F
index|]
block|{
literal|48
operator|*
literal|8
block|,
literal|64
block|,
literal|"SaCompMask"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* word 13,14 (56-255 bytes) */
index|[
name|IB_SA_DATA_F
index|]
block|{
literal|56
operator|*
literal|8
block|,
operator|(
literal|256
operator|-
literal|56
operator|)
operator|*
literal|8
block|,
literal|"SaData"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_DRSMP_PATH_F
index|]
block|{
literal|1024
block|,
literal|512
block|,
literal|"DrSmpPath"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_DRSMP_RPATH_F
index|]
block|{
literal|1536
block|,
literal|512
block|,
literal|"DrSmpRetPath"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_GS_DATA_F
index|]
block|{
literal|64
operator|*
literal|8
block|,
operator|(
literal|256
operator|-
literal|64
operator|)
operator|*
literal|8
block|,
literal|"GsData"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* 	 * PortInfo fields: 	 */
index|[
name|IB_PORT_MKEY_F
index|]
block|{
literal|0
block|,
literal|64
block|,
literal|"Mkey"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_GID_PREFIX_F
index|]
block|{
literal|64
block|,
literal|64
block|,
literal|"GidPrefix"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_LID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|128
argument_list|,
literal|16
argument_list|)
block|,
literal|"Lid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_SMLID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|144
argument_list|,
literal|16
argument_list|)
block|,
literal|"SMLid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_CAPMASK_F
index|]
block|{
literal|160
block|,
literal|32
block|,
literal|"CapMask"
block|,
name|mad_dump_portcapmask
block|}
block|,
index|[
name|IB_PORT_DIAG_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|192
argument_list|,
literal|16
argument_list|)
block|,
literal|"DiagCode"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_MKEY_LEASE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|208
argument_list|,
literal|16
argument_list|)
block|,
literal|"MkeyLeasePeriod"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_LOCAL_PORT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|224
argument_list|,
literal|8
argument_list|)
block|,
literal|"LocalPort"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_LINK_WIDTH_ENABLED_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|232
argument_list|,
literal|8
argument_list|)
block|,
literal|"LinkWidthEnabled"
block|,
name|mad_dump_linkwidthen
block|}
block|,
index|[
name|IB_PORT_LINK_WIDTH_SUPPORTED_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|240
argument_list|,
literal|8
argument_list|)
block|,
literal|"LinkWidthSupported"
block|,
name|mad_dump_linkwidthsup
block|}
block|,
index|[
name|IB_PORT_LINK_WIDTH_ACTIVE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|248
argument_list|,
literal|8
argument_list|)
block|,
literal|"LinkWidthActive"
block|,
name|mad_dump_linkwidth
block|}
block|,
index|[
name|IB_PORT_LINK_SPEED_SUPPORTED_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|256
argument_list|,
literal|4
argument_list|)
block|,
literal|"LinkSpeedSupported"
block|,
name|mad_dump_linkspeedsup
block|}
block|,
index|[
name|IB_PORT_STATE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|260
argument_list|,
literal|4
argument_list|)
block|,
literal|"LinkState"
block|,
name|mad_dump_portstate
block|}
block|,
index|[
name|IB_PORT_PHYS_STATE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|264
argument_list|,
literal|4
argument_list|)
block|,
literal|"PhysLinkState"
block|,
name|mad_dump_physportstate
block|}
block|,
index|[
name|IB_PORT_LINK_DOWN_DEF_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|268
argument_list|,
literal|4
argument_list|)
block|,
literal|"LinkDownDefState"
block|,
name|mad_dump_linkdowndefstate
block|}
block|,
index|[
name|IB_PORT_MKEY_PROT_BITS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|272
argument_list|,
literal|2
argument_list|)
block|,
literal|"ProtectBits"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_LMC_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|277
argument_list|,
literal|3
argument_list|)
block|,
literal|"LMC"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_LINK_SPEED_ACTIVE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|280
argument_list|,
literal|4
argument_list|)
block|,
literal|"LinkSpeedActive"
block|,
name|mad_dump_linkspeed
block|}
block|,
index|[
name|IB_PORT_LINK_SPEED_ENABLED_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|284
argument_list|,
literal|4
argument_list|)
block|,
literal|"LinkSpeedEnabled"
block|,
name|mad_dump_linkspeeden
block|}
block|,
index|[
name|IB_PORT_NEIGHBOR_MTU_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|288
argument_list|,
literal|4
argument_list|)
block|,
literal|"NeighborMTU"
block|,
name|mad_dump_mtu
block|}
block|,
index|[
name|IB_PORT_SMSL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|292
argument_list|,
literal|4
argument_list|)
block|,
literal|"SMSL"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_VL_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|296
argument_list|,
literal|4
argument_list|)
block|,
literal|"VLCap"
block|,
name|mad_dump_vlcap
block|}
block|,
index|[
name|IB_PORT_INIT_TYPE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|300
argument_list|,
literal|4
argument_list|)
block|,
literal|"InitType"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_VL_HIGH_LIMIT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|304
argument_list|,
literal|8
argument_list|)
block|,
literal|"VLHighLimit"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_VL_ARBITRATION_HIGH_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|312
argument_list|,
literal|8
argument_list|)
block|,
literal|"VLArbHighCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_VL_ARBITRATION_LOW_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|320
argument_list|,
literal|8
argument_list|)
block|,
literal|"VLArbLowCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_INIT_TYPE_REPLY_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|328
argument_list|,
literal|4
argument_list|)
block|,
literal|"InitReply"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PORT_MTU_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|332
argument_list|,
literal|4
argument_list|)
block|,
literal|"MtuCap"
block|,
name|mad_dump_mtu
block|}
block|,
index|[
name|IB_PORT_VL_STALL_COUNT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|336
argument_list|,
literal|3
argument_list|)
block|,
literal|"VLStallCount"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_HOQ_LIFE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|339
argument_list|,
literal|5
argument_list|)
block|,
literal|"HoqLife"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_OPER_VLS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|344
argument_list|,
literal|4
argument_list|)
block|,
literal|"OperVLs"
block|,
name|mad_dump_opervls
block|}
block|,
index|[
name|IB_PORT_PART_EN_INB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|348
argument_list|,
literal|1
argument_list|)
block|,
literal|"PartEnforceInb"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_PART_EN_OUTB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|349
argument_list|,
literal|1
argument_list|)
block|,
literal|"PartEnforceOutb"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_FILTER_RAW_INB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|350
argument_list|,
literal|1
argument_list|)
block|,
literal|"FilterRawInb"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_FILTER_RAW_OUTB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|351
argument_list|,
literal|1
argument_list|)
block|,
literal|"FilterRawOutb"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_MKEY_VIOL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|352
argument_list|,
literal|16
argument_list|)
block|,
literal|"MkeyViolations"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_PKEY_VIOL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|368
argument_list|,
literal|16
argument_list|)
block|,
literal|"PkeyViolations"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_QKEY_VIOL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|384
argument_list|,
literal|16
argument_list|)
block|,
literal|"QkeyViolations"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_GUID_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|400
argument_list|,
literal|8
argument_list|)
block|,
literal|"GuidCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_CLIENT_REREG_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|408
argument_list|,
literal|1
argument_list|)
block|,
literal|"ClientReregister"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_SUBN_TIMEOUT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|411
argument_list|,
literal|5
argument_list|)
block|,
literal|"SubnetTimeout"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_RESP_TIME_VAL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|419
argument_list|,
literal|5
argument_list|)
block|,
literal|"RespTimeVal"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_LOCAL_PHYS_ERR_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|424
argument_list|,
literal|4
argument_list|)
block|,
literal|"LocalPhysErr"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_OVERRUN_ERR_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|428
argument_list|,
literal|4
argument_list|)
block|,
literal|"OverrunErr"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_MAX_CREDIT_HINT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|432
argument_list|,
literal|16
argument_list|)
block|,
literal|"MaxCreditHint"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PORT_LINK_ROUND_TRIP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|456
argument_list|,
literal|24
argument_list|)
block|,
literal|"RoundTrip"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * NodeInfo fields: 	 */
index|[
name|IB_NODE_BASE_VERS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|0
argument_list|,
literal|8
argument_list|)
block|,
literal|"BaseVers"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NODE_CLASS_VERS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|8
argument_list|,
literal|8
argument_list|)
block|,
literal|"ClassVers"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NODE_TYPE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|16
argument_list|,
literal|8
argument_list|)
block|,
literal|"NodeType"
block|,
name|mad_dump_node_type
block|}
block|,
index|[
name|IB_NODE_NPORTS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|24
argument_list|,
literal|8
argument_list|)
block|,
literal|"NumPorts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NODE_SYSTEM_GUID_F
index|]
block|{
literal|32
block|,
literal|64
block|,
literal|"SystemGuid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_NODE_GUID_F
index|]
block|{
literal|96
block|,
literal|64
block|,
literal|"Guid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_NODE_PORT_GUID_F
index|]
block|{
literal|160
block|,
literal|64
block|,
literal|"PortGuid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_NODE_PARTITION_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|224
argument_list|,
literal|16
argument_list|)
block|,
literal|"PartCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NODE_DEVID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|240
argument_list|,
literal|16
argument_list|)
block|,
literal|"DevId"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_NODE_REVISION_F
index|]
block|{
literal|256
block|,
literal|32
block|,
literal|"Revision"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_NODE_LOCAL_PORT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|288
argument_list|,
literal|8
argument_list|)
block|,
literal|"LocalPort"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NODE_VENDORID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|296
argument_list|,
literal|24
argument_list|)
block|,
literal|"VendorId"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* 	 * SwitchInfo fields: 	 */
index|[
name|IB_SW_LINEAR_FDB_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|0
argument_list|,
literal|16
argument_list|)
block|,
literal|"LinearFdbCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_RANDOM_FDB_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|16
argument_list|,
literal|16
argument_list|)
block|,
literal|"RandomFdbCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_MCAST_FDB_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|32
argument_list|,
literal|16
argument_list|)
block|,
literal|"McastFdbCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_LINEAR_FDB_TOP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|48
argument_list|,
literal|16
argument_list|)
block|,
literal|"LinearFdbTop"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_DEF_PORT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|64
argument_list|,
literal|8
argument_list|)
block|,
literal|"DefPort"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_DEF_MCAST_PRIM_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|72
argument_list|,
literal|8
argument_list|)
block|,
literal|"DefMcastPrimPort"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_DEF_MCAST_NOT_PRIM_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|80
argument_list|,
literal|8
argument_list|)
block|,
literal|"DefMcastNotPrimPort"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_LIFE_TIME_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|88
argument_list|,
literal|5
argument_list|)
block|,
literal|"LifeTime"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_STATE_CHANGE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|93
argument_list|,
literal|1
argument_list|)
block|,
literal|"StateChange"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_LIDS_PER_PORT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|96
argument_list|,
literal|16
argument_list|)
block|,
literal|"LidsPerPort"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_PARTITION_ENFORCE_CAP_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|112
argument_list|,
literal|16
argument_list|)
block|,
literal|"PartEnforceCap"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_PARTITION_ENF_INB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|128
argument_list|,
literal|1
argument_list|)
block|,
literal|"InboundPartEnf"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_PARTITION_ENF_OUTB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|129
argument_list|,
literal|1
argument_list|)
block|,
literal|"OutboundPartEnf"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_FILTER_RAW_INB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|130
argument_list|,
literal|1
argument_list|)
block|,
literal|"FilterRawInbound"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_FILTER_RAW_OUTB_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|131
argument_list|,
literal|1
argument_list|)
block|,
literal|"FilterRawOutbound"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SW_ENHANCED_PORT0_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|132
argument_list|,
literal|1
argument_list|)
block|,
literal|"EnhancedPort0"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * SwitchLinearForwardingTable fields: 	 */
index|[
name|IB_LINEAR_FORW_TBL_F
index|]
block|{
literal|0
block|,
literal|512
block|,
literal|"LinearForwTbl"
block|,
name|mad_dump_array
block|}
block|,
comment|/* 	 * SwitchMulticastForwardingTable fields: 	 */
index|[
name|IB_MULTICAST_FORW_TBL_F
index|]
block|{
literal|0
block|,
literal|512
block|,
literal|"MulticastForwTbl"
block|,
name|mad_dump_array
block|}
block|,
comment|/* 	 * Notice/Trap fields 	 */
index|[
name|IB_NOTICE_IS_GENERIC_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|0
argument_list|,
literal|1
argument_list|)
block|,
literal|"NoticeIsGeneric"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_TYPE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|1
argument_list|,
literal|7
argument_list|)
block|,
literal|"NoticeType"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_PRODUCER_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|8
argument_list|,
literal|24
argument_list|)
block|,
literal|"NoticeProducerType"
block|,
name|mad_dump_node_type
block|}
block|,
index|[
name|IB_NOTICE_TRAP_NUMBER_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|32
argument_list|,
literal|16
argument_list|)
block|,
literal|"NoticeTrapNumber"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_ISSUER_LID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|48
argument_list|,
literal|16
argument_list|)
block|,
literal|"NoticeIssuerLID"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_TOGGLE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|64
argument_list|,
literal|1
argument_list|)
block|,
literal|"NoticeToggle"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_COUNT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|65
argument_list|,
literal|15
argument_list|)
block|,
literal|"NoticeCount"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_DATA_DETAILS_F
index|]
block|{
literal|80
block|,
literal|432
block|,
literal|"NoticeDataDetails"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_NOTICE_DATA_LID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|80
argument_list|,
literal|16
argument_list|)
block|,
literal|"NoticeDataLID"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_DATA_144_LID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|96
argument_list|,
literal|16
argument_list|)
block|,
literal|"NoticeDataTrap144LID"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_NOTICE_DATA_144_CAPMASK_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|128
argument_list|,
literal|32
argument_list|)
block|,
literal|"NoticeDataTrap144CapMask"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * NodeDescription fields: 	 */
index|[
name|IB_NODE_DESC_F
index|]
block|{
literal|0
block|,
literal|64
operator|*
literal|8
block|,
literal|"NodeDesc"
block|,
name|mad_dump_string
block|}
block|,
comment|/* 	 * Port counters 	 */
index|[
name|IB_PC_PORT_SELECT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|8
argument_list|,
literal|8
argument_list|)
block|,
literal|"PortSelect"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_COUNTER_SELECT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|16
argument_list|,
literal|16
argument_list|)
block|,
literal|"CounterSelect"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PC_ERR_SYM_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|32
argument_list|,
literal|16
argument_list|)
block|,
literal|"SymbolErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_LINK_RECOVERS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|48
argument_list|,
literal|8
argument_list|)
block|,
literal|"LinkRecovers"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_LINK_DOWNED_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|56
argument_list|,
literal|8
argument_list|)
block|,
literal|"LinkDowned"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_RCV_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|64
argument_list|,
literal|16
argument_list|)
block|,
literal|"RcvErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_PHYSRCV_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|80
argument_list|,
literal|16
argument_list|)
block|,
literal|"RcvRemotePhysErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_SWITCH_REL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|96
argument_list|,
literal|16
argument_list|)
block|,
literal|"RcvSwRelayErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_XMT_DISCARDS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|112
argument_list|,
literal|16
argument_list|)
block|,
literal|"XmtDiscards"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_XMTCONSTR_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|128
argument_list|,
literal|8
argument_list|)
block|,
literal|"XmtConstraintErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_RCVCONSTR_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|136
argument_list|,
literal|8
argument_list|)
block|,
literal|"RcvConstraintErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_LOCALINTEG_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|152
argument_list|,
literal|4
argument_list|)
block|,
literal|"LinkIntegrityErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_ERR_EXCESS_OVR_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|156
argument_list|,
literal|4
argument_list|)
block|,
literal|"ExcBufOverrunErrors"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_VL15_DROPPED_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|176
argument_list|,
literal|16
argument_list|)
block|,
literal|"VL15Dropped"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_XMT_BYTES_F
index|]
block|{
literal|192
block|,
literal|32
block|,
literal|"XmtData"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_RCV_BYTES_F
index|]
block|{
literal|224
block|,
literal|32
block|,
literal|"RcvData"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_XMT_PKTS_F
index|]
block|{
literal|256
block|,
literal|32
block|,
literal|"XmtPkts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_RCV_PKTS_F
index|]
block|{
literal|288
block|,
literal|32
block|,
literal|"RcvPkts"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * SMInfo 	 */
index|[
name|IB_SMINFO_GUID_F
index|]
block|{
literal|0
block|,
literal|64
block|,
literal|"SmInfoGuid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SMINFO_KEY_F
index|]
block|{
literal|64
block|,
literal|64
block|,
literal|"SmInfoKey"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SMINFO_ACT_F
index|]
block|{
literal|128
block|,
literal|32
block|,
literal|"SmActivity"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SMINFO_PRIO_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|160
argument_list|,
literal|4
argument_list|)
block|,
literal|"SmPriority"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SMINFO_STATE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|164
argument_list|,
literal|4
argument_list|)
block|,
literal|"SmState"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * SA RMPP 	 */
index|[
name|IB_SA_RMPP_VERS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|24
operator|*
literal|8
operator|+
literal|24
argument_list|,
literal|8
argument_list|)
block|,
literal|"RmppVers"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_RMPP_TYPE_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|24
operator|*
literal|8
operator|+
literal|16
argument_list|,
literal|8
argument_list|)
block|,
literal|"RmppType"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_RMPP_RESP_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|24
operator|*
literal|8
operator|+
literal|11
argument_list|,
literal|5
argument_list|)
block|,
literal|"RmppResp"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_RMPP_FLAGS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|24
operator|*
literal|8
operator|+
literal|8
argument_list|,
literal|3
argument_list|)
block|,
literal|"RmppFlags"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_RMPP_STATUS_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|24
operator|*
literal|8
operator|+
literal|0
argument_list|,
literal|8
argument_list|)
block|,
literal|"RmppStatus"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* data1 */
index|[
name|IB_SA_RMPP_D1_F
index|]
block|{
literal|28
operator|*
literal|8
block|,
literal|32
block|,
literal|"RmppData1"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_RMPP_SEGNUM_F
index|]
block|{
literal|28
operator|*
literal|8
block|,
literal|32
block|,
literal|"RmppSegNum"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* data2 */
index|[
name|IB_SA_RMPP_D2_F
index|]
block|{
literal|32
operator|*
literal|8
block|,
literal|32
block|,
literal|"RmppData2"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_RMPP_LEN_F
index|]
block|{
literal|32
operator|*
literal|8
block|,
literal|32
block|,
literal|"RmppPayload"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_RMPP_NEWWIN_F
index|]
block|{
literal|32
operator|*
literal|8
block|,
literal|32
block|,
literal|"RmppNewWin"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * SA Path rec 	 */
index|[
name|IB_SA_PR_DGID_F
index|]
block|{
literal|64
block|,
literal|128
block|,
literal|"PathRecDGid"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_SA_PR_SGID_F
index|]
block|{
literal|192
block|,
literal|128
block|,
literal|"PathRecSGid"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_SA_PR_DLID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|320
argument_list|,
literal|16
argument_list|)
block|,
literal|"PathRecDLid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_PR_SLID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|336
argument_list|,
literal|16
argument_list|)
block|,
literal|"PathRecSLid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_PR_NPATH_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|393
argument_list|,
literal|7
argument_list|)
block|,
literal|"PathRecNumPath"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * SA Get Multi Path 	 */
index|[
name|IB_SA_MP_NPATH_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|41
argument_list|,
literal|7
argument_list|)
block|,
literal|"MultiPathNumPath"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MP_NSRC_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|120
argument_list|,
literal|8
argument_list|)
block|,
literal|"MultiPathNumSrc"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MP_NDEST_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|128
argument_list|,
literal|8
argument_list|)
block|,
literal|"MultiPathNumDest"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MP_GID0_F
index|]
block|{
literal|192
block|,
literal|128
block|,
literal|"MultiPathGid"
block|,
name|mad_dump_array
block|}
block|,
comment|/* 	 * MC Member rec 	 */
index|[
name|IB_SA_MCM_MGID_F
index|]
block|{
literal|0
block|,
literal|128
block|,
literal|"McastMemMGid"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_SA_MCM_PORTGID_F
index|]
block|{
literal|128
block|,
literal|128
block|,
literal|"McastMemPortGid"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_SA_MCM_QKEY_F
index|]
block|{
literal|256
block|,
literal|32
block|,
literal|"McastMemQkey"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_MCM_MLID_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|288
argument_list|,
literal|16
argument_list|)
block|,
literal|"McastMemMLid"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_MCM_MTU_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|306
argument_list|,
literal|6
argument_list|)
block|,
literal|"McastMemMTU"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_TCLASS_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|312
argument_list|,
literal|8
argument_list|)
block|,
literal|"McastMemTClass"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_PKEY_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|320
argument_list|,
literal|16
argument_list|)
block|,
literal|"McastMemPkey"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_RATE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|338
argument_list|,
literal|6
argument_list|)
block|,
literal|"McastMemRate"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_SL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|352
argument_list|,
literal|4
argument_list|)
block|,
literal|"McastMemSL"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_FLOW_LABEL_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|356
argument_list|,
literal|20
argument_list|)
block|,
literal|"McastMemFlowLbl"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_JOIN_STATE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|388
argument_list|,
literal|4
argument_list|)
block|,
literal|"McastMemJoinState"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_SA_MCM_PROXY_JOIN_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|392
argument_list|,
literal|1
argument_list|)
block|,
literal|"McastMemProxyJoin"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * Service record 	 */
index|[
name|IB_SA_SR_ID_F
index|]
block|{
literal|0
block|,
literal|64
block|,
literal|"ServRecID"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_SR_GID_F
index|]
block|{
literal|64
block|,
literal|128
block|,
literal|"ServRecGid"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_SA_SR_PKEY_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|192
argument_list|,
literal|16
argument_list|)
block|,
literal|"ServRecPkey"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_SR_LEASE_F
index|]
block|{
literal|224
block|,
literal|32
block|,
literal|"ServRecLease"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_SR_KEY_F
index|]
block|{
literal|256
block|,
literal|128
block|,
literal|"ServRecKey"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_SA_SR_NAME_F
index|]
block|{
literal|384
block|,
literal|512
block|,
literal|"ServRecName"
block|,
name|mad_dump_string
block|}
block|,
index|[
name|IB_SA_SR_DATA_F
index|]
block|{
literal|896
block|,
literal|512
block|,
literal|"ServRecData"
block|,
name|mad_dump_array
block|}
block|,
comment|/* ATS for example */
comment|/* 	 * ATS SM record - within SA_SR_DATA 	 */
index|[
name|IB_ATS_SM_NODE_ADDR_F
index|]
block|{
literal|12
operator|*
literal|8
block|,
literal|32
block|,
literal|"ATSNodeAddr"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_ATS_SM_MAGIC_KEY_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|16
operator|*
literal|8
argument_list|,
literal|16
argument_list|)
block|,
literal|"ATSMagicKey"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_ATS_SM_NODE_TYPE_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|18
operator|*
literal|8
argument_list|,
literal|16
argument_list|)
block|,
literal|"ATSNodeType"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_ATS_SM_NODE_NAME_F
index|]
block|{
literal|32
operator|*
literal|8
block|,
literal|32
operator|*
literal|8
block|,
literal|"ATSNodeName"
block|,
name|mad_dump_string
block|}
block|,
comment|/* 	 * SLTOVL MAPPING TABLE 	 */
index|[
name|IB_SLTOVL_MAPPING_TABLE_F
index|]
block|{
literal|0
block|,
literal|64
block|,
literal|"SLToVLMap"
block|,
name|mad_dump_hex
block|}
block|,
comment|/* 	 * VL ARBITRATION TABLE 	 */
index|[
name|IB_VL_ARBITRATION_TABLE_F
index|]
block|{
literal|0
block|,
literal|512
block|,
literal|"VLArbTbl"
block|,
name|mad_dump_array
block|}
block|,
comment|/* 	 * IB vendor classes range 2 	 */
index|[
name|IB_VEND2_OUI_F
index|]
block|{
name|BE_OFFS
argument_list|(
literal|36
operator|*
literal|8
argument_list|,
literal|24
argument_list|)
block|,
literal|"OUI"
block|,
name|mad_dump_array
block|}
block|,
index|[
name|IB_VEND2_DATA_F
index|]
block|{
literal|40
operator|*
literal|8
block|,
operator|(
literal|256
operator|-
literal|40
operator|)
operator|*
literal|8
block|,
literal|"Vendor2Data"
block|,
name|mad_dump_array
block|}
block|,
comment|/* 	 * Extended port counters 	 */
index|[
name|IB_PC_EXT_PORT_SELECT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|8
argument_list|,
literal|8
argument_list|)
block|,
literal|"PortSelect"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_COUNTER_SELECT_F
index|]
block|{
name|BITSOFFS
argument_list|(
literal|16
argument_list|,
literal|16
argument_list|)
block|,
literal|"CounterSelect"
block|,
name|mad_dump_hex
block|}
block|,
index|[
name|IB_PC_EXT_XMT_BYTES_F
index|]
block|{
literal|64
block|,
literal|64
block|,
literal|"PortXmitData"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_RCV_BYTES_F
index|]
block|{
literal|128
block|,
literal|64
block|,
literal|"PortRcvData"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_XMT_PKTS_F
index|]
block|{
literal|192
block|,
literal|64
block|,
literal|"PortXmitPkts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_RCV_PKTS_F
index|]
block|{
literal|256
block|,
literal|64
block|,
literal|"PortRcvPkts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_XMT_UPKTS_F
index|]
block|{
literal|320
block|,
literal|64
block|,
literal|"PortUnicastXmitPkts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_RCV_UPKTS_F
index|]
block|{
literal|384
block|,
literal|64
block|,
literal|"PortUnicastRcvPkts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_XMT_MPKTS_F
index|]
block|{
literal|448
block|,
literal|64
block|,
literal|"PortMulticastXmitPkts"
block|,
name|mad_dump_uint
block|}
block|,
index|[
name|IB_PC_EXT_RCV_MPKTS_F
index|]
block|{
literal|512
block|,
literal|64
block|,
literal|"PortMulticastRcvPkts"
block|,
name|mad_dump_uint
block|}
block|,
comment|/* 	 * GUIDInfo fields 	 */
index|[
name|IB_GUID_GUID0_F
index|]
block|{
literal|0
block|,
literal|64
block|,
literal|"GUID0"
block|,
name|mad_dump_hex
block|}
block|,  }
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|_set_field64
parameter_list|(
name|void
modifier|*
name|buf
parameter_list|,
name|int
name|base_offs
parameter_list|,
name|ib_field_t
modifier|*
name|f
parameter_list|,
name|uint64_t
name|val
parameter_list|)
block|{
name|uint64_t
name|nval
decl_stmt|;
name|nval
operator|=
name|htonll
argument_list|(
name|val
argument_list|)
expr_stmt|;
name|memcpy
argument_list|(
operator|(
name|char
operator|*
operator|)
name|buf
operator|+
name|base_offs
operator|+
name|f
operator|->
name|bitoffs
operator|/
literal|8
argument_list|,
operator|&
name|nval
argument_list|,
sizeof|sizeof
argument_list|(
name|uint64_t
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|uint64_t
name|_get_field64
parameter_list|(
name|void
modifier|*
name|buf
parameter_list|,
name|int
name|base_offs
parameter_list|,
name|ib_field_t
modifier|*
name|f
parameter_list|)
block|{
name|uint64_t
name|val
decl_stmt|;
name|memcpy
argument_list|(
operator|&
name|val
argument_list|,
operator|(
operator|(
name|char
operator|*
operator|)
name|buf
operator|+
name|base_offs
operator|+
name|f
operator|->
name|bitoffs
operator|/
literal|8
operator|)
argument_list|,
sizeof|sizeof
argument_list|(
name|uint64_t
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|ntohll
argument_list|(
name|val
argument_list|)
return|;
block|}
end_function

begin_function
name|void
name|_set_field
parameter_list|(
name|void
modifier|*
name|buf
parameter_list|,
name|int
name|base_offs
parameter_list|,
name|ib_field_t
modifier|*
name|f
parameter_list|,
name|uint32_t
name|val
parameter_list|)
block|{
name|int
name|prebits
init|=
operator|(
literal|8
operator|-
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
operator|)
operator|&
literal|7
decl_stmt|;
name|int
name|postbits
init|=
operator|(
name|f
operator|->
name|bitoffs
operator|+
name|f
operator|->
name|bitlen
operator|)
operator|&
literal|7
decl_stmt|;
name|int
name|bytelen
init|=
name|f
operator|->
name|bitlen
operator|/
literal|8
decl_stmt|;
name|unsigned
name|idx
init|=
name|base_offs
operator|+
name|f
operator|->
name|bitoffs
operator|/
literal|8
decl_stmt|;
name|char
modifier|*
name|p
init|=
operator|(
name|char
operator|*
operator|)
name|buf
decl_stmt|;
if|if
condition|(
operator|!
name|bytelen
operator|&&
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
operator|+
name|f
operator|->
name|bitlen
operator|<
literal|8
condition|)
block|{
name|p
index|[
literal|3
operator|^
name|idx
index|]
operator|&=
operator|~
operator|(
operator|(
operator|(
operator|(
literal|1
operator|<<
name|f
operator|->
name|bitlen
operator|)
operator|-
literal|1
operator|)
operator|)
operator|<<
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
operator|)
expr_stmt|;
name|p
index|[
literal|3
operator|^
name|idx
index|]
operator||=
operator|(
name|val
operator|&
operator|(
operator|(
literal|1
operator|<<
name|f
operator|->
name|bitlen
operator|)
operator|-
literal|1
operator|)
operator|)
operator|<<
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|prebits
condition|)
block|{
comment|/* val lsb in byte msb */
name|p
index|[
literal|3
operator|^
name|idx
index|]
operator|&=
operator|(
literal|1
operator|<<
operator|(
literal|8
operator|-
name|prebits
operator|)
operator|)
operator|-
literal|1
expr_stmt|;
name|p
index|[
literal|3
operator|^
name|idx
operator|++
index|]
operator||=
operator|(
name|val
operator|&
operator|(
operator|(
literal|1
operator|<<
name|prebits
operator|)
operator|-
literal|1
operator|)
operator|)
operator|<<
operator|(
literal|8
operator|-
name|prebits
operator|)
expr_stmt|;
name|val
operator|>>=
name|prebits
expr_stmt|;
block|}
comment|/* BIG endian byte order */
for|for
control|(
init|;
name|bytelen
operator|--
condition|;
name|val
operator|>>=
literal|8
control|)
name|p
index|[
literal|3
operator|^
name|idx
operator|++
index|]
operator|=
name|val
operator|&
literal|0xff
expr_stmt|;
if|if
condition|(
name|postbits
condition|)
block|{
comment|/* val msb in byte lsb */
name|p
index|[
literal|3
operator|^
name|idx
index|]
operator|&=
operator|~
operator|(
operator|(
literal|1
operator|<<
name|postbits
operator|)
operator|-
literal|1
operator|)
expr_stmt|;
name|p
index|[
literal|3
operator|^
name|idx
index|]
operator||=
name|val
expr_stmt|;
block|}
block|}
end_function

begin_function
name|uint32_t
name|_get_field
parameter_list|(
name|void
modifier|*
name|buf
parameter_list|,
name|int
name|base_offs
parameter_list|,
name|ib_field_t
modifier|*
name|f
parameter_list|)
block|{
name|int
name|prebits
init|=
operator|(
literal|8
operator|-
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
operator|)
operator|&
literal|7
decl_stmt|;
name|int
name|postbits
init|=
operator|(
name|f
operator|->
name|bitoffs
operator|+
name|f
operator|->
name|bitlen
operator|)
operator|&
literal|7
decl_stmt|;
name|int
name|bytelen
init|=
name|f
operator|->
name|bitlen
operator|/
literal|8
decl_stmt|;
name|unsigned
name|idx
init|=
name|base_offs
operator|+
name|f
operator|->
name|bitoffs
operator|/
literal|8
decl_stmt|;
name|uint8_t
modifier|*
name|p
init|=
operator|(
name|uint8_t
operator|*
operator|)
name|buf
decl_stmt|;
name|uint32_t
name|val
init|=
literal|0
decl_stmt|,
name|v
init|=
literal|0
decl_stmt|,
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|bytelen
operator|&&
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
operator|+
name|f
operator|->
name|bitlen
operator|<
literal|8
condition|)
return|return
operator|(
name|p
index|[
literal|3
operator|^
name|idx
index|]
operator|>>
operator|(
name|f
operator|->
name|bitoffs
operator|&
literal|7
operator|)
operator|)
operator|&
operator|(
operator|(
literal|1
operator|<<
name|f
operator|->
name|bitlen
operator|)
operator|-
literal|1
operator|)
return|;
if|if
condition|(
name|prebits
condition|)
comment|/* val lsb from byte msb */
name|v
operator|=
name|p
index|[
literal|3
operator|^
name|idx
operator|++
index|]
operator|>>
operator|(
literal|8
operator|-
name|prebits
operator|)
expr_stmt|;
if|if
condition|(
name|postbits
condition|)
block|{
comment|/* val msb from byte lsb */
name|i
operator|=
name|base_offs
operator|+
operator|(
name|f
operator|->
name|bitoffs
operator|+
name|f
operator|->
name|bitlen
operator|)
operator|/
literal|8
expr_stmt|;
name|val
operator|=
operator|(
name|p
index|[
literal|3
operator|^
name|i
index|]
operator|&
operator|(
operator|(
literal|1
operator|<<
name|postbits
operator|)
operator|-
literal|1
operator|)
operator|)
expr_stmt|;
block|}
comment|/* BIG endian byte order */
for|for
control|(
name|idx
operator|+=
name|bytelen
operator|-
literal|1
init|;
name|bytelen
operator|--
condition|;
name|idx
operator|--
control|)
name|val
operator|=
operator|(
name|val
operator|<<
literal|8
operator|)
operator||
name|p
index|[
literal|3
operator|^
name|idx
index|]
expr_stmt|;
return|return
operator|(
name|val
operator|<<
name|prebits
operator|)
operator||
name|v
return|;
block|}
end_function

begin_comment
comment|/* field must be byte aligned */
end_comment

begin_function
name|void
name|_set_array
parameter_list|(
name|void
modifier|*
name|buf
parameter_list|,
name|int
name|base_offs
parameter_list|,
name|ib_field_t
modifier|*
name|f
parameter_list|,
name|void
modifier|*
name|val
parameter_list|)
block|{
name|int
name|bitoffs
init|=
name|f
operator|->
name|bitoffs
decl_stmt|;
if|if
condition|(
name|f
operator|->
name|bitlen
operator|<
literal|32
condition|)
name|bitoffs
operator|=
name|BE_TO_BITSOFFS
argument_list|(
name|bitoffs
argument_list|,
name|f
operator|->
name|bitlen
argument_list|)
expr_stmt|;
name|memcpy
argument_list|(
operator|(
name|uint8_t
operator|*
operator|)
name|buf
operator|+
name|base_offs
operator|+
name|bitoffs
operator|/
literal|8
argument_list|,
name|val
argument_list|,
name|f
operator|->
name|bitlen
operator|/
literal|8
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|_get_array
parameter_list|(
name|void
modifier|*
name|buf
parameter_list|,
name|int
name|base_offs
parameter_list|,
name|ib_field_t
modifier|*
name|f
parameter_list|,
name|void
modifier|*
name|val
parameter_list|)
block|{
name|int
name|bitoffs
init|=
name|f
operator|->
name|bitoffs
decl_stmt|;
if|if
condition|(
name|f
operator|->
name|bitlen
operator|<
literal|32
condition|)
name|bitoffs
operator|=
name|BE_TO_BITSOFFS
argument_list|(
name|bitoffs
argument_list|,
name|f
operator|->
name|bitlen
argument_list|)
expr_stmt|;
name|memcpy
argument_list|(
name|val
argument_list|,
operator|(
name|uint8_t
operator|*
operator|)
name|buf
operator|+
name|base_offs
operator|+
name|bitoffs
operator|/
literal|8
argument_list|,
name|f
operator|->
name|bitlen
operator|/
literal|8
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

