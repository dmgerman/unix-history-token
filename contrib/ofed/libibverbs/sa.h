begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2004 Topspin Communications.  All rights reserved.  * Copyright (c) 2005 Voltaire, Inc. All rights reserved.  *  * This software is available to you under a choice of one of two  * licenses.  You may choose to be licensed under the terms of the GNU  * General Public License (GPL) Version 2, available from the file  * COPYING in the main directory of this source tree, or the  * OpenIB.org BSD license below:  *  *     Redistribution and use in source and binary forms, with or  *     without modification, are permitted provided that the following  *     conditions are met:  *  *      - Redistributions of source code must retain the above  *        copyright notice, this list of conditions and the following  *        disclaimer.  *  *      - Redistributions in binary form must reproduce the above  *        copyright notice, this list of conditions and the following  *        disclaimer in the documentation and/or other materials  *        provided with the distribution.  *  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS  * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN  * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE  * SOFTWARE.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|INFINIBAND_SA_H
end_ifndef

begin_define
define|#
directive|define
name|INFINIBAND_SA_H
end_define

begin_include
include|#
directive|include
file|<infiniband/verbs.h>
end_include

begin_include
include|#
directive|include
file|<infiniband/types.h>
end_include

begin_struct
struct|struct
name|ibv_sa_path_rec
block|{
comment|/* reserved */
comment|/* reserved */
name|union
name|ibv_gid
name|dgid
decl_stmt|;
name|union
name|ibv_gid
name|sgid
decl_stmt|;
name|__be16
name|dlid
decl_stmt|;
name|__be16
name|slid
decl_stmt|;
name|int
name|raw_traffic
decl_stmt|;
comment|/* reserved */
name|__be32
name|flow_label
decl_stmt|;
name|uint8_t
name|hop_limit
decl_stmt|;
name|uint8_t
name|traffic_class
decl_stmt|;
name|int
name|reversible
decl_stmt|;
name|uint8_t
name|numb_path
decl_stmt|;
name|__be16
name|pkey
decl_stmt|;
comment|/* reserved */
name|uint8_t
name|sl
decl_stmt|;
name|uint8_t
name|mtu_selector
decl_stmt|;
name|uint8_t
name|mtu
decl_stmt|;
name|uint8_t
name|rate_selector
decl_stmt|;
name|uint8_t
name|rate
decl_stmt|;
name|uint8_t
name|packet_life_time_selector
decl_stmt|;
name|uint8_t
name|packet_life_time
decl_stmt|;
name|uint8_t
name|preference
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|ibv_sa_mcmember_rec
block|{
name|union
name|ibv_gid
name|mgid
decl_stmt|;
name|union
name|ibv_gid
name|port_gid
decl_stmt|;
name|uint32_t
name|qkey
decl_stmt|;
name|uint16_t
name|mlid
decl_stmt|;
name|uint8_t
name|mtu_selector
decl_stmt|;
name|uint8_t
name|mtu
decl_stmt|;
name|uint8_t
name|traffic_class
decl_stmt|;
name|uint16_t
name|pkey
decl_stmt|;
name|uint8_t
name|rate_selector
decl_stmt|;
name|uint8_t
name|rate
decl_stmt|;
name|uint8_t
name|packet_life_time_selector
decl_stmt|;
name|uint8_t
name|packet_life_time
decl_stmt|;
name|uint8_t
name|sl
decl_stmt|;
name|uint32_t
name|flow_label
decl_stmt|;
name|uint8_t
name|hop_limit
decl_stmt|;
name|uint8_t
name|scope
decl_stmt|;
name|uint8_t
name|join_state
decl_stmt|;
name|int
name|proxy_join
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|ibv_sa_service_rec
block|{
name|uint64_t
name|id
decl_stmt|;
name|union
name|ibv_gid
name|gid
decl_stmt|;
name|uint16_t
name|pkey
decl_stmt|;
comment|/* uint16_t  resv;   */
name|uint32_t
name|lease
decl_stmt|;
name|uint8_t
name|key
index|[
literal|16
index|]
decl_stmt|;
name|uint8_t
name|name
index|[
literal|64
index|]
decl_stmt|;
name|uint8_t
name|data8
index|[
literal|16
index|]
decl_stmt|;
name|uint16_t
name|data16
index|[
literal|8
index|]
decl_stmt|;
name|uint32_t
name|data32
index|[
literal|4
index|]
decl_stmt|;
name|uint64_t
name|data64
index|[
literal|2
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|IBV_PATH_RECORD_REVERSIBLE
value|0x80
end_define

begin_struct
struct|struct
name|ibv_path_record
block|{
name|__be64
name|service_id
decl_stmt|;
name|union
name|ibv_gid
name|dgid
decl_stmt|;
name|union
name|ibv_gid
name|sgid
decl_stmt|;
name|__be16
name|dlid
decl_stmt|;
name|__be16
name|slid
decl_stmt|;
name|__be32
name|flowlabel_hoplimit
decl_stmt|;
comment|/* resv-31:28 flow label-27:8 hop limit-7:0*/
name|uint8_t
name|tclass
decl_stmt|;
name|uint8_t
name|reversible_numpath
decl_stmt|;
comment|/* reversible-7:7 num path-6:0 */
name|__be16
name|pkey
decl_stmt|;
name|__be16
name|qosclass_sl
decl_stmt|;
comment|/* qos class-15:4 sl-3:0 */
name|uint8_t
name|mtu
decl_stmt|;
comment|/* mtu selector-7:6 mtu-5:0 */
name|uint8_t
name|rate
decl_stmt|;
comment|/* rate selector-7:6 rate-5:0 */
name|uint8_t
name|packetlifetime
decl_stmt|;
comment|/* lifetime selector-7:6 lifetime-5:0 */
name|uint8_t
name|preference
decl_stmt|;
name|uint8_t
name|reserved
index|[
literal|6
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_GMP
value|(1<<0)
end_define

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_PRIMARY
value|(1<<1)
end_define

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_ALTERNATE
value|(1<<2)
end_define

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_OUTBOUND
value|(1<<3)
end_define

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_INBOUND
value|(1<<4)
end_define

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_INBOUND_REVERSE
value|(1<<5)
end_define

begin_define
define|#
directive|define
name|IBV_PATH_FLAG_BIDIRECTIONAL
value|(IBV_PATH_FLAG_OUTBOUND |     \ 					IBV_PATH_FLAG_INBOUND_REVERSE)
end_define

begin_struct
struct|struct
name|ibv_path_data
block|{
name|uint32_t
name|flags
decl_stmt|;
name|uint32_t
name|reserved
decl_stmt|;
name|struct
name|ibv_path_record
name|path
decl_stmt|;
block|}
struct|;
end_struct

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* INFINIBAND_SA_H */
end_comment

end_unit

