begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * WPA Supplicant / dbus-based control interface  * Copyright (c) 2006, Dan Williams<dcbw@redhat.com> and Red Hat, Inc.  *  * This program is free software; you can redistribute it and/or modify  * it under the terms of the GNU General Public License version 2 as  * published by the Free Software Foundation.  *  * Alternatively, this software may be distributed under the terms of BSD  * license.  *  * See README and COPYING for more details.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|DBUS_DICT_HELPERS_H
end_ifndef

begin_define
define|#
directive|define
name|DBUS_DICT_HELPERS_H
end_define

begin_comment
comment|/*  * Adding a dict to a DBusMessage  */
end_comment

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_open_write
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_close_write
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|const
name|char
modifier|*
name|wpa_dbus_type_as_string
parameter_list|(
specifier|const
name|int
name|type
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_string
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|char
modifier|*
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_byte
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|char
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_bool
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_bool_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_int16
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_int16_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_uint16
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_uint16_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_int32
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_int32_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_uint32
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_uint32_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_int64
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_int64_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_uint64
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|dbus_uint64_t
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_double
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|double
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_object_path
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|char
modifier|*
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_byte_array
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|char
modifier|*
name|value
parameter_list|,
specifier|const
name|dbus_uint32_t
name|value_len
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Manual construction and addition of string array elements */
end_comment

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_begin_string_array
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict_entry
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict_val
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_array
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_string_array_add_element
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_array
parameter_list|,
specifier|const
name|char
modifier|*
name|elem
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_end_string_array
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict_entry
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict_val
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_array
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Convenience function to add a whole string list */
end_comment

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_append_string_array
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
specifier|const
name|char
modifier|*
name|key
parameter_list|,
specifier|const
name|char
modifier|*
modifier|*
name|items
parameter_list|,
specifier|const
name|dbus_uint32_t
name|num_items
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/*  * Reading a dict from a DBusMessage  */
end_comment

begin_struct
struct|struct
name|wpa_dbus_dict_entry
block|{
name|int
name|type
decl_stmt|;
comment|/** the dbus type of the dict entry's value */
name|int
name|array_type
decl_stmt|;
comment|/** the dbus type of the array elements if the dict 			      entry value contains an array */
specifier|const
name|char
modifier|*
name|key
decl_stmt|;
comment|/** key of the dict entry */
comment|/** Possible values of the property */
union|union
block|{
name|char
modifier|*
name|str_value
decl_stmt|;
name|char
name|byte_value
decl_stmt|;
name|dbus_bool_t
name|bool_value
decl_stmt|;
name|dbus_int16_t
name|int16_value
decl_stmt|;
name|dbus_uint16_t
name|uint16_value
decl_stmt|;
name|dbus_int32_t
name|int32_value
decl_stmt|;
name|dbus_uint32_t
name|uint32_value
decl_stmt|;
name|dbus_int64_t
name|int64_value
decl_stmt|;
name|dbus_uint64_t
name|uint64_value
decl_stmt|;
name|double
name|double_value
decl_stmt|;
name|char
modifier|*
name|bytearray_value
decl_stmt|;
name|char
modifier|*
modifier|*
name|strarray_value
decl_stmt|;
block|}
union|;
name|dbus_uint32_t
name|array_len
decl_stmt|;
comment|/** length of the array if the dict entry's 				     value contains an array */
block|}
struct|;
end_struct

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_open_read
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter
parameter_list|,
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_get_entry
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|,
name|struct
name|wpa_dbus_dict_entry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|dbus_bool_t
name|wpa_dbus_dict_has_dict_entry
parameter_list|(
name|DBusMessageIter
modifier|*
name|iter_dict
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|wpa_dbus_dict_entry_clear
parameter_list|(
name|struct
name|wpa_dbus_dict_entry
modifier|*
name|entry
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* DBUS_DICT_HELPERS_H */
end_comment

end_unit

