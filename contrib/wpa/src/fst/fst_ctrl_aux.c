begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * FST module implementation  * Copyright (c) 2014, Qualcomm Atheros, Inc.  *  * This software may be distributed under the terms of the BSD license.  * See README for more details.  */
end_comment

begin_include
include|#
directive|include
file|"utils/includes.h"
end_include

begin_include
include|#
directive|include
file|"utils/common.h"
end_include

begin_include
include|#
directive|include
file|"common/defs.h"
end_include

begin_include
include|#
directive|include
file|"fst_ctrl_defs.h"
end_include

begin_include
include|#
directive|include
file|"fst_ctrl_aux.h"
end_include

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|session_event_names
index|[]
init|=
block|{
index|[
name|EVENT_FST_ESTABLISHED
index|]
name|FST_PVAL_EVT_TYPE_ESTABLISHED
block|,
index|[
name|EVENT_FST_SETUP
index|]
name|FST_PVAL_EVT_TYPE_SETUP
block|,
index|[
name|EVENT_FST_SESSION_STATE_CHANGED
index|]
name|FST_PVAL_EVT_TYPE_SESSION_STATE
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|reason_names
index|[]
init|=
block|{
index|[
name|REASON_TEARDOWN
index|]
name|FST_CS_PVAL_REASON_TEARDOWN
block|,
index|[
name|REASON_SETUP
index|]
name|FST_CS_PVAL_REASON_SETUP
block|,
index|[
name|REASON_SWITCH
index|]
name|FST_CS_PVAL_REASON_SWITCH
block|,
index|[
name|REASON_STT
index|]
name|FST_CS_PVAL_REASON_STT
block|,
index|[
name|REASON_REJECT
index|]
name|FST_CS_PVAL_REASON_REJECT
block|,
index|[
name|REASON_ERROR_PARAMS
index|]
name|FST_CS_PVAL_REASON_ERROR_PARAMS
block|,
index|[
name|REASON_RESET
index|]
name|FST_CS_PVAL_REASON_RESET
block|,
index|[
name|REASON_DETACH_IFACE
index|]
name|FST_CS_PVAL_REASON_DETACH_IFACE
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|session_state_names
index|[]
init|=
block|{
index|[
name|FST_SESSION_STATE_INITIAL
index|]
name|FST_CS_PVAL_STATE_INITIAL
block|,
index|[
name|FST_SESSION_STATE_SETUP_COMPLETION
index|]
name|FST_CS_PVAL_STATE_SETUP_COMPLETION
block|,
index|[
name|FST_SESSION_STATE_TRANSITION_DONE
index|]
name|FST_CS_PVAL_STATE_TRANSITION_DONE
block|,
index|[
name|FST_SESSION_STATE_TRANSITION_CONFIRMED
index|]
name|FST_CS_PVAL_STATE_TRANSITION_CONFIRMED
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* helpers */
end_comment

begin_function
specifier|const
name|char
modifier|*
name|fst_get_str_name
parameter_list|(
name|unsigned
name|index
parameter_list|,
specifier|const
name|char
modifier|*
name|names
index|[]
parameter_list|,
name|size_t
name|names_size
parameter_list|)
block|{
if|if
condition|(
name|index
operator|>=
name|names_size
operator|||
operator|!
name|names
index|[
name|index
index|]
condition|)
return|return
name|FST_NAME_UNKNOWN
return|;
return|return
name|names
index|[
name|index
index|]
return|;
block|}
end_function

begin_function
specifier|const
name|char
modifier|*
name|fst_session_event_type_name
parameter_list|(
name|enum
name|fst_event_type
name|event
parameter_list|)
block|{
return|return
name|fst_get_str_name
argument_list|(
name|event
argument_list|,
name|session_event_names
argument_list|,
name|ARRAY_SIZE
argument_list|(
name|session_event_names
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|const
name|char
modifier|*
name|fst_reason_name
parameter_list|(
name|enum
name|fst_reason
name|reason
parameter_list|)
block|{
return|return
name|fst_get_str_name
argument_list|(
name|reason
argument_list|,
name|reason_names
argument_list|,
name|ARRAY_SIZE
argument_list|(
name|reason_names
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
specifier|const
name|char
modifier|*
name|fst_session_state_name
parameter_list|(
name|enum
name|fst_session_state
name|state
parameter_list|)
block|{
return|return
name|fst_get_str_name
argument_list|(
name|state
argument_list|,
name|session_state_names
argument_list|,
name|ARRAY_SIZE
argument_list|(
name|session_state_names
argument_list|)
argument_list|)
return|;
block|}
end_function

end_unit

