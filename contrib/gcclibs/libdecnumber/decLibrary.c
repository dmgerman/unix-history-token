begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Temporary library support for decimal floating point.    Copyright (C) 2005, 2006 Free Software Foundation, Inc.     This file is part of GCC.     GCC is free software; you can redistribute it and/or modify it    under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2, or (at your option)    any later version.     In addition to the permissions in the GNU General Public License,    the Free Software Foundation gives you unlimited permission to link    the compiled version of this file into combinations with other    programs, and to distribute those combinations without any    restriction coming from the use of this file.  (The General Public    License restrictions do apply in other respects; for example, they    cover modification of the file, and distribution when not linked    into a combine executable.)     GCC is distributed in the hope that it will be useful, but WITHOUT    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY    or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public    License for more details.     You should have received a copy of the GNU General Public License    along with GCC; see the file COPYING.  If not, write to the Free    Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA    02110-1301, USA.  */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_include
include|#
directive|include
file|"decContext.h"
end_include

begin_include
include|#
directive|include
file|"decimal128.h"
end_include

begin_include
include|#
directive|include
file|"decimal64.h"
end_include

begin_include
include|#
directive|include
file|"decimal32.h"
end_include

begin_function_decl
name|void
name|__host_to_ieee_32
parameter_list|(
name|_Decimal32
parameter_list|,
name|decimal32
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|__host_to_ieee_64
parameter_list|(
name|_Decimal64
parameter_list|,
name|decimal64
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|__host_to_ieee_128
parameter_list|(
name|_Decimal128
parameter_list|,
name|decimal128
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|isinfd32
parameter_list|(
name|_Decimal32
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|isinfd64
parameter_list|(
name|_Decimal64
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|isinfd128
parameter_list|(
name|_Decimal128
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|__dfp_enable_traps
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
specifier|extern
name|void
name|__dfp_raise
argument_list|(
name|int
name|exception
name|__attribute__
argument_list|(
operator|(
name|unused
operator|)
argument_list|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_function
name|int
name|isinfd32
parameter_list|(
name|_Decimal32
name|arg
parameter_list|)
block|{
name|decNumber
name|dn
decl_stmt|;
name|decimal32
name|d32
decl_stmt|;
name|__host_to_ieee_32
argument_list|(
name|arg
argument_list|,
operator|&
name|d32
argument_list|)
expr_stmt|;
name|decimal32ToNumber
argument_list|(
operator|&
name|d32
argument_list|,
operator|&
name|dn
argument_list|)
expr_stmt|;
return|return
operator|(
name|decNumberIsInfinite
argument_list|(
operator|&
name|dn
argument_list|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isinfd64
parameter_list|(
name|_Decimal64
name|arg
parameter_list|)
block|{
name|decNumber
name|dn
decl_stmt|;
name|decimal64
name|d64
decl_stmt|;
name|__host_to_ieee_64
argument_list|(
name|arg
argument_list|,
operator|&
name|d64
argument_list|)
expr_stmt|;
name|decimal64ToNumber
argument_list|(
operator|&
name|d64
argument_list|,
operator|&
name|dn
argument_list|)
expr_stmt|;
return|return
operator|(
name|decNumberIsInfinite
argument_list|(
operator|&
name|dn
argument_list|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isinfd128
parameter_list|(
name|_Decimal128
name|arg
parameter_list|)
block|{
name|decNumber
name|dn
decl_stmt|;
name|decimal128
name|d128
decl_stmt|;
name|__host_to_ieee_128
argument_list|(
name|arg
argument_list|,
operator|&
name|d128
argument_list|)
expr_stmt|;
name|decimal128ToNumber
argument_list|(
operator|&
name|d128
argument_list|,
operator|&
name|dn
argument_list|)
expr_stmt|;
return|return
operator|(
name|decNumberIsInfinite
argument_list|(
operator|&
name|dn
argument_list|)
operator|)
return|;
block|}
end_function

begin_decl_stmt
name|int
name|__dfp_traps
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|__dfp_enable_traps
parameter_list|(
name|void
parameter_list|)
block|{
name|__dfp_traps
operator|=
literal|1
expr_stmt|;
block|}
end_function

begin_decl_stmt
name|void
name|__dfp_raise
argument_list|(
name|int
name|exception
name|__attribute__
argument_list|(
operator|(
name|unused
operator|)
argument_list|)
argument_list|)
block|{
name|raise
argument_list|(
name|SIGFPE
argument_list|)
expr_stmt|;
block|}
end_decl_stmt

begin_function
name|uint32_t
name|__dec_byte_swap
parameter_list|(
name|uint32_t
name|in
parameter_list|)
block|{
name|uint32_t
name|out
init|=
literal|0
decl_stmt|;
name|unsigned
name|char
modifier|*
name|p
init|=
operator|(
name|unsigned
name|char
operator|*
operator|)
operator|&
name|out
decl_stmt|;
union|union
block|{
name|uint32_t
name|i
decl_stmt|;
name|unsigned
name|char
name|b
index|[
literal|4
index|]
decl_stmt|;
block|}
name|u
union|;
name|u
operator|.
name|i
operator|=
name|in
expr_stmt|;
name|p
index|[
literal|0
index|]
operator|=
name|u
operator|.
name|b
index|[
literal|3
index|]
expr_stmt|;
name|p
index|[
literal|1
index|]
operator|=
name|u
operator|.
name|b
index|[
literal|2
index|]
expr_stmt|;
name|p
index|[
literal|2
index|]
operator|=
name|u
operator|.
name|b
index|[
literal|1
index|]
expr_stmt|;
name|p
index|[
literal|3
index|]
operator|=
name|u
operator|.
name|b
index|[
literal|0
index|]
expr_stmt|;
return|return
name|out
return|;
block|}
end_function

end_unit

