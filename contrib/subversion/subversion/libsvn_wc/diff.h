begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * lock.h:  routines for diffing local files and directories.  *  * ====================================================================  *    Licensed to the Apache Software Foundation (ASF) under one  *    or more contributor license agreements.  See the NOTICE file  *    distributed with this work for additional information  *    regarding copyright ownership.  The ASF licenses this file  *    to you under the Apache License, Version 2.0 (the  *    "License"); you may not use this file except in compliance  *    with the License.  You may obtain a copy of the License at  *  *      http://www.apache.org/licenses/LICENSE-2.0  *  *    Unless required by applicable law or agreed to in writing,  *    software distributed under the License is distributed on an  *    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY  *    KIND, either express or implied.  See the License for the  *    specific language governing permissions and limitations  *    under the License.  * ====================================================================  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SVN_LIBSVN_WC_DIFF_H
end_ifndef

begin_define
define|#
directive|define
name|SVN_LIBSVN_WC_DIFF_H
end_define

begin_include
include|#
directive|include
file|<apr_pools.h>
end_include

begin_include
include|#
directive|include
file|<apr_hash.h>
end_include

begin_include
include|#
directive|include
file|"svn_types.h"
end_include

begin_include
include|#
directive|include
file|"svn_error.h"
end_include

begin_include
include|#
directive|include
file|"svn_wc.h"
end_include

begin_include
include|#
directive|include
file|"wc_db.h"
end_include

begin_include
include|#
directive|include
file|"private/svn_diff_tree.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|__cplusplus
end_ifdef

begin_extern
extern|extern
literal|"C"
block|{
endif|#
directive|endif
comment|/* __cplusplus */
comment|/* A function to diff locally added and locally copied files.       Reports the file LOCAL_ABSPATH as ADDED file with relpath RELPATH to    PROCESSOR with as parent baton PROCESSOR_PARENT_BATON.     The node is expected to have status svn_wc__db_status_normal, or    svn_wc__db_status_added. When DIFF_PRISTINE is TRUE, report the pristine    version of LOCAL_ABSPATH as ADDED. In this case an    svn_wc__db_status_deleted may shadow an added or deleted node.  */
name|svn_error_t
modifier|*
name|svn_wc__diff_local_only_file
parameter_list|(
name|svn_wc__db_t
modifier|*
name|db
parameter_list|,
specifier|const
name|char
modifier|*
name|local_abspath
parameter_list|,
specifier|const
name|char
modifier|*
name|relpath
parameter_list|,
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|processor
parameter_list|,
name|void
modifier|*
name|processor_parent_baton
parameter_list|,
name|svn_boolean_t
name|diff_pristine
parameter_list|,
name|svn_cancel_func_t
name|cancel_func
parameter_list|,
name|void
modifier|*
name|cancel_baton
parameter_list|,
name|apr_pool_t
modifier|*
name|scratch_pool
parameter_list|)
function_decl|;
comment|/* A function to diff locally added and locally copied directories.       Reports the directory LOCAL_ABSPATH and everything below it (limited by    DEPTH) as added with relpath RELPATH to PROCESSOR with as parent baton    PROCESSOR_PARENT_BATON.     The node is expected to have status svn_wc__db_status_normal, or    svn_wc__db_status_added. When DIFF_PRISTINE is TRUE, report the pristine    version of LOCAL_ABSPATH as ADDED. In this case an    svn_wc__db_status_deleted may shadow an added or deleted node.  */
name|svn_error_t
modifier|*
name|svn_wc__diff_local_only_dir
parameter_list|(
name|svn_wc__db_t
modifier|*
name|db
parameter_list|,
specifier|const
name|char
modifier|*
name|local_abspath
parameter_list|,
specifier|const
name|char
modifier|*
name|relpath
parameter_list|,
name|svn_depth_t
name|depth
parameter_list|,
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|processor
parameter_list|,
name|void
modifier|*
name|processor_parent_baton
parameter_list|,
name|svn_boolean_t
name|diff_pristine
parameter_list|,
name|svn_cancel_func_t
name|cancel_func
parameter_list|,
name|void
modifier|*
name|cancel_baton
parameter_list|,
name|apr_pool_t
modifier|*
name|scratch_pool
parameter_list|)
function_decl|;
comment|/* Reports the BASE-file LOCAL_ABSPATH as deleted to PROCESSOR with relpath    RELPATH, revision REVISION and parent baton PROCESSOR_PARENT_BATON.     If REVISION is invalid, the revision as stored in BASE is used.     The node is expected to have status svn_wc__db_status_normal in BASE. */
name|svn_error_t
modifier|*
name|svn_wc__diff_base_only_file
parameter_list|(
name|svn_wc__db_t
modifier|*
name|db
parameter_list|,
specifier|const
name|char
modifier|*
name|local_abspath
parameter_list|,
specifier|const
name|char
modifier|*
name|relpath
parameter_list|,
name|svn_revnum_t
name|revision
parameter_list|,
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|processor
parameter_list|,
name|void
modifier|*
name|processor_parent_baton
parameter_list|,
name|apr_pool_t
modifier|*
name|scratch_pool
parameter_list|)
function_decl|;
comment|/* Reports the BASE-directory LOCAL_ABSPATH and everything below it (limited    by DEPTH) as deleted to PROCESSOR with relpath RELPATH and parent baton    PROCESSOR_PARENT_BATON.     If REVISION is invalid, the revision as stored in BASE is used.     The node is expected to have status svn_wc__db_status_normal in BASE. */
name|svn_error_t
modifier|*
name|svn_wc__diff_base_only_dir
parameter_list|(
name|svn_wc__db_t
modifier|*
name|db
parameter_list|,
specifier|const
name|char
modifier|*
name|local_abspath
parameter_list|,
specifier|const
name|char
modifier|*
name|relpath
parameter_list|,
name|svn_revnum_t
name|revision
parameter_list|,
name|svn_depth_t
name|depth
parameter_list|,
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|processor
parameter_list|,
name|void
modifier|*
name|processor_parent_baton
parameter_list|,
name|svn_cancel_func_t
name|cancel_func
parameter_list|,
name|void
modifier|*
name|cancel_baton
parameter_list|,
name|apr_pool_t
modifier|*
name|scratch_pool
parameter_list|)
function_decl|;
comment|/* Diff the file PATH against the text base of its BASE layer.  At this  * stage we are dealing with a file that does exist in the working copy.  */
name|svn_error_t
modifier|*
name|svn_wc__diff_base_working_diff
parameter_list|(
name|svn_wc__db_t
modifier|*
name|db
parameter_list|,
specifier|const
name|char
modifier|*
name|local_abspath
parameter_list|,
specifier|const
name|char
modifier|*
name|relpath
parameter_list|,
name|svn_revnum_t
name|revision
parameter_list|,
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|processor
parameter_list|,
name|void
modifier|*
name|processor_dir_baton
parameter_list|,
name|svn_boolean_t
name|diff_pristine
parameter_list|,
name|svn_cancel_func_t
name|cancel_func
parameter_list|,
name|void
modifier|*
name|cancel_baton
parameter_list|,
name|apr_pool_t
modifier|*
name|scratch_pool
parameter_list|)
function_decl|;
comment|/* Return a tree processor filter that filters by changelist membership.  *  * This filter only passes on the changes for a file if the file's path  * (in the WC) is assigned to one of the changelists in @a changelist_hash.  * It also passes on the opening and closing of each directory that contains  * such a change, and possibly also of other directories, but not addition  * or deletion or changes to a directory.  *  * If @a changelist_hash is null then no filtering is performed and the  * returned diff processor is driven exactly like the input @a processor.  *  * @a wc_ctx is the WC context and @a root_local_abspath is the WC path of  * the root of the diff (for which relpath = "" in the diff processor).  *  * Allocate the returned diff processor in @a result_pool, or if no  * filtering is required then the input pointer @a processor itself may be  * returned.  */
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|svn_wc__changelist_filter_tree_processor_create
parameter_list|(
specifier|const
name|svn_diff_tree_processor_t
modifier|*
name|processor
parameter_list|,
name|svn_wc_context_t
modifier|*
name|wc_ctx
parameter_list|,
specifier|const
name|char
modifier|*
name|root_local_abspath
parameter_list|,
name|apr_hash_t
modifier|*
name|changelist_hash
parameter_list|,
name|apr_pool_t
modifier|*
name|result_pool
parameter_list|)
function_decl|;
ifdef|#
directive|ifdef
name|__cplusplus
block|}
end_extern

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* __cplusplus */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* SVN_LIBSVN_WC_DIFF_H */
end_comment

end_unit

