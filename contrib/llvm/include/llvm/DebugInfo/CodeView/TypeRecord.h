begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|//===- TypeRecord.h ---------------------------------------------*- C++ -*-===//
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|//                     The LLVM Compiler Infrastructure
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// This file is distributed under the University of Illinois Open Source
end_comment

begin_comment
comment|// License. See LICENSE.TXT for details.
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|//===----------------------------------------------------------------------===//
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LLVM_DEBUGINFO_CODEVIEW_TYPERECORD_H
end_ifndef

begin_define
define|#
directive|define
name|LLVM_DEBUGINFO_CODEVIEW_TYPERECORD_H
end_define

begin_include
include|#
directive|include
file|"llvm/ADT/APSInt.h"
end_include

begin_include
include|#
directive|include
file|"llvm/ADT/ArrayRef.h"
end_include

begin_include
include|#
directive|include
file|"llvm/ADT/StringRef.h"
end_include

begin_include
include|#
directive|include
file|"llvm/DebugInfo/CodeView/CVRecord.h"
end_include

begin_include
include|#
directive|include
file|"llvm/DebugInfo/CodeView/CodeView.h"
end_include

begin_include
include|#
directive|include
file|"llvm/DebugInfo/CodeView/TypeIndex.h"
end_include

begin_include
include|#
directive|include
file|"llvm/Support/ErrorOr.h"
end_include

begin_include
include|#
directive|include
file|<cinttypes>
end_include

begin_include
include|#
directive|include
file|<utility>
end_include

begin_decl_stmt
name|namespace
name|llvm
block|{
name|namespace
name|codeview
block|{
name|using
name|llvm
operator|::
name|support
operator|::
name|little32_t
expr_stmt|;
name|using
name|llvm
operator|::
name|support
operator|::
name|ulittle16_t
expr_stmt|;
name|using
name|llvm
operator|::
name|support
operator|::
name|ulittle32_t
expr_stmt|;
comment|/// Equvalent to CV_fldattr_t in cvinfo.h.
struct|struct
name|MemberAttributes
block|{
name|ulittle16_t
name|Attrs
decl_stmt|;
enum|enum
block|{
name|MethodKindShift
init|=
literal|2
block|,   }
enum|;
comment|/// Get the access specifier. Valid for any kind of member.
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|MemberAccess
argument_list|(
name|unsigned
argument_list|(
name|Attrs
argument_list|)
operator|&
name|unsigned
argument_list|(
name|MethodOptions
operator|::
name|AccessMask
argument_list|)
argument_list|)
return|;
block|}
comment|/// Indicates if a method is defined with friend, virtual, static, etc.
name|MethodKind
name|getMethodKind
argument_list|()
specifier|const
block|{
return|return
name|MethodKind
argument_list|(
operator|(
name|unsigned
argument_list|(
name|Attrs
argument_list|)
operator|&
name|unsigned
argument_list|(
name|MethodOptions
operator|::
name|MethodKindMask
argument_list|)
operator|)
operator|>>
name|MethodKindShift
argument_list|)
return|;
block|}
comment|/// Get the flags that are not included in access control or method
comment|/// properties.
name|MethodOptions
name|getFlags
argument_list|()
specifier|const
block|{
return|return
name|MethodOptions
argument_list|(
name|unsigned
argument_list|(
name|Attrs
argument_list|)
operator|&
operator|~
name|unsigned
argument_list|(
name|MethodOptions
operator|::
name|AccessMask
operator||
name|MethodOptions
operator|::
name|MethodKindMask
argument_list|)
argument_list|)
return|;
block|}
comment|/// Is this method virtual.
name|bool
name|isVirtual
argument_list|()
specifier|const
block|{
name|auto
name|MP
operator|=
name|getMethodKind
argument_list|()
block|;
return|return
name|MP
operator|!=
name|MethodKind
operator|::
name|Vanilla
operator|&&
name|MP
operator|!=
name|MethodKind
operator|::
name|Friend
operator|&&
name|MP
operator|!=
name|MethodKind
operator|::
name|Static
return|;
block|}
comment|/// Does this member introduce a new virtual method.
name|bool
name|isIntroducedVirtual
argument_list|()
specifier|const
block|{
name|auto
name|MP
operator|=
name|getMethodKind
argument_list|()
block|;
return|return
name|MP
operator|==
name|MethodKind
operator|::
name|IntroducingVirtual
operator|||
name|MP
operator|==
name|MethodKind
operator|::
name|PureIntroducingVirtual
return|;
block|}
block|}
struct|;
comment|// Does not correspond to any tag, this is the tail of an LF_POINTER record
comment|// if it represents a member pointer.
name|class
name|MemberPointerInfo
block|{
name|public
label|:
name|MemberPointerInfo
argument_list|()
block|{}
name|MemberPointerInfo
argument_list|(
argument|TypeIndex ContainingType
argument_list|,
argument|PointerToMemberRepresentation Representation
argument_list|)
block|:
name|ContainingType
argument_list|(
name|ContainingType
argument_list|)
operator|,
name|Representation
argument_list|(
argument|Representation
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
expr_stmt|;
specifier|static
name|ErrorOr
operator|<
name|MemberPointerInfo
operator|>
name|deserialize
argument_list|(
name|ArrayRef
operator|<
name|uint8_t
operator|>
operator|&
name|Data
argument_list|)
expr_stmt|;
name|TypeIndex
name|getContainingType
argument_list|()
specifier|const
block|{
return|return
name|ContainingType
return|;
block|}
name|PointerToMemberRepresentation
name|getRepresentation
argument_list|()
specifier|const
block|{
return|return
name|Representation
return|;
block|}
name|private
label|:
struct|struct
name|Layout
block|{
name|TypeIndex
name|ClassType
decl_stmt|;
name|ulittle16_t
name|Representation
decl_stmt|;
comment|// PointerToMemberRepresentation
block|}
struct|;
name|TypeIndex
name|ContainingType
decl_stmt|;
name|PointerToMemberRepresentation
name|Representation
decl_stmt|;
block|}
empty_stmt|;
name|class
name|TypeRecord
block|{
name|protected
label|:
name|explicit
name|TypeRecord
argument_list|(
argument|TypeRecordKind Kind
argument_list|)
block|:
name|Kind
argument_list|(
argument|Kind
argument_list|)
block|{}
name|public
label|:
name|TypeRecordKind
name|getKind
argument_list|()
specifier|const
block|{
return|return
name|Kind
return|;
block|}
name|private
label|:
name|TypeRecordKind
name|Kind
decl_stmt|;
block|}
empty_stmt|;
comment|// LF_MODIFIER
name|class
name|ModifierRecord
range|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|ModifierRecord
argument_list|(
argument|TypeIndex ModifiedType
argument_list|,
argument|ModifierOptions Modifiers
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Modifier
argument_list|)
block|,
name|ModifiedType
argument_list|(
name|ModifiedType
argument_list|)
block|,
name|Modifiers
argument_list|(
argument|Modifiers
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|ModifierRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getModifiedType
argument_list|()
specifier|const
block|{
return|return
name|ModifiedType
return|;
block|}
name|ModifierOptions
name|getModifiers
argument_list|()
specifier|const
block|{
return|return
name|Modifiers
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|ModifiedType
block|;
name|ulittle16_t
name|Modifiers
block|;
comment|// ModifierOptions
block|}
block|;
name|TypeIndex
name|ModifiedType
block|;
name|ModifierOptions
name|Modifiers
block|; }
decl_stmt|;
comment|// LF_PROCEDURE
name|class
name|ProcedureRecord
range|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|ProcedureRecord
argument_list|(
argument|TypeIndex ReturnType
argument_list|,
argument|CallingConvention CallConv
argument_list|,
argument|FunctionOptions Options
argument_list|,
argument|uint16_t ParameterCount
argument_list|,
argument|TypeIndex ArgumentList
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Procedure
argument_list|)
block|,
name|ReturnType
argument_list|(
name|ReturnType
argument_list|)
block|,
name|CallConv
argument_list|(
name|CallConv
argument_list|)
block|,
name|Options
argument_list|(
name|Options
argument_list|)
block|,
name|ParameterCount
argument_list|(
name|ParameterCount
argument_list|)
block|,
name|ArgumentList
argument_list|(
argument|ArgumentList
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|ProcedureRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
specifier|static
name|uint32_t
name|getLayoutSize
argument_list|()
block|{
return|return
literal|2
operator|+
sizeof|sizeof
argument_list|(
name|Layout
argument_list|)
return|;
block|}
name|TypeIndex
name|getReturnType
argument_list|()
specifier|const
block|{
return|return
name|ReturnType
return|;
block|}
name|CallingConvention
name|getCallConv
argument_list|()
specifier|const
block|{
return|return
name|CallConv
return|;
block|}
name|FunctionOptions
name|getOptions
argument_list|()
specifier|const
block|{
return|return
name|Options
return|;
block|}
name|uint16_t
name|getParameterCount
argument_list|()
specifier|const
block|{
return|return
name|ParameterCount
return|;
block|}
name|TypeIndex
name|getArgumentList
argument_list|()
specifier|const
block|{
return|return
name|ArgumentList
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|ReturnType
block|;
name|CallingConvention
name|CallConv
block|;
name|FunctionOptions
name|Options
block|;
name|ulittle16_t
name|NumParameters
block|;
name|TypeIndex
name|ArgListType
block|;   }
block|;
name|TypeIndex
name|ReturnType
block|;
name|CallingConvention
name|CallConv
block|;
name|FunctionOptions
name|Options
block|;
name|uint16_t
name|ParameterCount
block|;
name|TypeIndex
name|ArgumentList
block|; }
decl_stmt|;
comment|// LF_MFUNCTION
name|class
name|MemberFunctionRecord
range|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|MemberFunctionRecord
argument_list|(
argument|TypeIndex ReturnType
argument_list|,
argument|TypeIndex ClassType
argument_list|,
argument|TypeIndex ThisType
argument_list|,
argument|CallingConvention CallConv
argument_list|,
argument|FunctionOptions Options
argument_list|,
argument|uint16_t ParameterCount
argument_list|,
argument|TypeIndex ArgumentList
argument_list|,
argument|int32_t ThisPointerAdjustment
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|MemberFunction
argument_list|)
block|,
name|ReturnType
argument_list|(
name|ReturnType
argument_list|)
block|,
name|ClassType
argument_list|(
name|ClassType
argument_list|)
block|,
name|ThisType
argument_list|(
name|ThisType
argument_list|)
block|,
name|CallConv
argument_list|(
name|CallConv
argument_list|)
block|,
name|Options
argument_list|(
name|Options
argument_list|)
block|,
name|ParameterCount
argument_list|(
name|ParameterCount
argument_list|)
block|,
name|ArgumentList
argument_list|(
name|ArgumentList
argument_list|)
block|,
name|ThisPointerAdjustment
argument_list|(
argument|ThisPointerAdjustment
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|MemberFunctionRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getReturnType
argument_list|()
specifier|const
block|{
return|return
name|ReturnType
return|;
block|}
name|TypeIndex
name|getClassType
argument_list|()
specifier|const
block|{
return|return
name|ClassType
return|;
block|}
name|TypeIndex
name|getThisType
argument_list|()
specifier|const
block|{
return|return
name|ThisType
return|;
block|}
name|CallingConvention
name|getCallConv
argument_list|()
specifier|const
block|{
return|return
name|CallConv
return|;
block|}
name|FunctionOptions
name|getOptions
argument_list|()
specifier|const
block|{
return|return
name|Options
return|;
block|}
name|uint16_t
name|getParameterCount
argument_list|()
specifier|const
block|{
return|return
name|ParameterCount
return|;
block|}
name|TypeIndex
name|getArgumentList
argument_list|()
specifier|const
block|{
return|return
name|ArgumentList
return|;
block|}
name|int32_t
name|getThisPointerAdjustment
argument_list|()
specifier|const
block|{
return|return
name|ThisPointerAdjustment
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|ReturnType
block|;
name|TypeIndex
name|ClassType
block|;
name|TypeIndex
name|ThisType
block|;
name|CallingConvention
name|CallConv
block|;
name|FunctionOptions
name|Options
block|;
name|ulittle16_t
name|NumParameters
block|;
name|TypeIndex
name|ArgListType
block|;
name|little32_t
name|ThisAdjustment
block|;   }
block|;
name|TypeIndex
name|ReturnType
block|;
name|TypeIndex
name|ClassType
block|;
name|TypeIndex
name|ThisType
block|;
name|CallingConvention
name|CallConv
block|;
name|FunctionOptions
name|Options
block|;
name|uint16_t
name|ParameterCount
block|;
name|TypeIndex
name|ArgumentList
block|;
name|int32_t
name|ThisPointerAdjustment
block|; }
decl_stmt|;
comment|// LF_MFUNC_ID
name|class
name|MemberFuncIdRecord
range|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|MemberFuncIdRecord
argument_list|(
argument|TypeIndex ClassType
argument_list|,
argument|TypeIndex FunctionType
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|MemberFuncId
argument_list|)
block|,
name|ClassType
argument_list|(
name|ClassType
argument_list|)
block|,
name|FunctionType
argument_list|(
name|FunctionType
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|MemberFuncIdRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getClassType
argument_list|()
specifier|const
block|{
return|return
name|ClassType
return|;
block|}
name|TypeIndex
name|getFunctionType
argument_list|()
specifier|const
block|{
return|return
name|FunctionType
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|ClassType
block|;
name|TypeIndex
name|FunctionType
block|;
comment|// Name: The null-terminated name follows.
block|}
block|;
name|TypeIndex
name|ClassType
block|;
name|TypeIndex
name|FunctionType
block|;
name|StringRef
name|Name
block|; }
decl_stmt|;
comment|// LF_ARGLIST, LF_SUBSTR_LIST
name|class
name|ArgListRecord
range|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|ArgListRecord
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<TypeIndex> Indices
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|Kind
argument_list|)
block|,
name|StringIndices
argument_list|(
argument|Indices
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|ArgListRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|getIndices
argument_list|()
specifier|const
block|{
return|return
name|StringIndices
return|;
block|}
specifier|static
name|uint32_t
name|getLayoutSize
argument_list|()
block|{
return|return
literal|2
operator|+
sizeof|sizeof
argument_list|(
name|Layout
argument_list|)
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle32_t
name|NumArgs
block|;
comment|// Number of arguments
comment|// ArgTypes[]: Type indicies of arguments
block|}
block|;
name|std
operator|::
name|vector
operator|<
name|TypeIndex
operator|>
name|StringIndices
block|; }
decl_stmt|;
comment|// LF_POINTER
name|class
name|PointerRecord
range|:
name|public
name|TypeRecord
block|{
name|public
operator|:
specifier|static
specifier|const
name|uint32_t
name|PointerKindShift
operator|=
literal|0
block|;
specifier|static
specifier|const
name|uint32_t
name|PointerKindMask
operator|=
literal|0x1F
block|;
specifier|static
specifier|const
name|uint32_t
name|PointerModeShift
operator|=
literal|5
block|;
specifier|static
specifier|const
name|uint32_t
name|PointerModeMask
operator|=
literal|0x07
block|;
specifier|static
specifier|const
name|uint32_t
name|PointerSizeShift
operator|=
literal|13
block|;
specifier|static
specifier|const
name|uint32_t
name|PointerSizeMask
operator|=
literal|0xFF
block|;
name|PointerRecord
argument_list|(
argument|TypeIndex ReferentType
argument_list|,
argument|PointerKind Kind
argument_list|,
argument|PointerMode Mode
argument_list|,
argument|PointerOptions Options
argument_list|,
argument|uint8_t Size
argument_list|)
operator|:
name|PointerRecord
argument_list|(
argument|ReferentType
argument_list|,
argument|Kind
argument_list|,
argument|Mode
argument_list|,
argument|Options
argument_list|,
argument|Size
argument_list|,
argument|MemberPointerInfo()
argument_list|)
block|{}
name|PointerRecord
argument_list|(
argument|TypeIndex ReferentType
argument_list|,
argument|PointerKind Kind
argument_list|,
argument|PointerMode Mode
argument_list|,
argument|PointerOptions Options
argument_list|,
argument|uint8_t Size
argument_list|,
argument|const MemberPointerInfo&Member
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Pointer
argument_list|)
block|,
name|ReferentType
argument_list|(
name|ReferentType
argument_list|)
block|,
name|PtrKind
argument_list|(
name|Kind
argument_list|)
block|,
name|Mode
argument_list|(
name|Mode
argument_list|)
block|,
name|Options
argument_list|(
name|Options
argument_list|)
block|,
name|Size
argument_list|(
name|Size
argument_list|)
block|,
name|MemberInfo
argument_list|(
argument|Member
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|PointerRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getReferentType
argument_list|()
specifier|const
block|{
return|return
name|ReferentType
return|;
block|}
name|PointerKind
name|getPointerKind
argument_list|()
specifier|const
block|{
return|return
name|PtrKind
return|;
block|}
name|PointerMode
name|getMode
argument_list|()
specifier|const
block|{
return|return
name|Mode
return|;
block|}
name|PointerOptions
name|getOptions
argument_list|()
specifier|const
block|{
return|return
name|Options
return|;
block|}
name|uint8_t
name|getSize
argument_list|()
specifier|const
block|{
return|return
name|Size
return|;
block|}
name|MemberPointerInfo
name|getMemberInfo
argument_list|()
specifier|const
block|{
return|return
name|MemberInfo
return|;
block|}
name|bool
name|isPointerToMember
argument_list|()
specifier|const
block|{
return|return
name|Mode
operator|==
name|PointerMode
operator|::
name|PointerToDataMember
operator|||
name|Mode
operator|==
name|PointerMode
operator|::
name|PointerToMemberFunction
return|;
block|}
name|bool
name|isFlat
argument_list|()
specifier|const
block|{
return|return
operator|!
operator|!
operator|(
name|uint32_t
argument_list|(
name|Options
argument_list|)
operator|&
name|uint32_t
argument_list|(
name|PointerOptions
operator|::
name|Flat32
argument_list|)
operator|)
return|;
block|}
name|bool
name|isConst
argument_list|()
specifier|const
block|{
return|return
operator|!
operator|!
operator|(
name|uint32_t
argument_list|(
name|Options
argument_list|)
operator|&
name|uint32_t
argument_list|(
name|PointerOptions
operator|::
name|Const
argument_list|)
operator|)
return|;
block|}
name|bool
name|isVolatile
argument_list|()
specifier|const
block|{
return|return
operator|!
operator|!
operator|(
name|uint32_t
argument_list|(
name|Options
argument_list|)
operator|&
name|uint32_t
argument_list|(
name|PointerOptions
operator|::
name|Volatile
argument_list|)
operator|)
return|;
block|}
name|bool
name|isUnaligned
argument_list|()
specifier|const
block|{
return|return
operator|!
operator|!
operator|(
name|uint32_t
argument_list|(
name|Options
argument_list|)
operator|&
name|uint32_t
argument_list|(
name|PointerOptions
operator|::
name|Unaligned
argument_list|)
operator|)
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|PointeeType
block|;
name|ulittle32_t
name|Attrs
block|;
comment|// pointer attributes
comment|// if pointer to member:
comment|//   PointerToMemberTail
name|PointerKind
name|getPtrKind
argument_list|()
specifier|const
block|{
return|return
name|PointerKind
argument_list|(
name|Attrs
operator|&
name|PointerKindMask
argument_list|)
return|;
block|}
name|PointerMode
name|getPtrMode
argument_list|()
specifier|const
block|{
return|return
name|PointerMode
argument_list|(
operator|(
name|Attrs
operator|>>
name|PointerModeShift
operator|)
operator|&
name|PointerModeMask
argument_list|)
return|;
block|}
name|uint8_t
name|getPtrSize
argument_list|()
specifier|const
block|{
return|return
operator|(
name|Attrs
operator|>>
name|PointerSizeShift
operator|)
operator|&
name|PointerSizeMask
return|;
block|}
name|bool
name|isFlat
argument_list|()
specifier|const
block|{
return|return
name|Attrs
operator|&
operator|(
literal|1
operator|<<
literal|8
operator|)
return|;
block|}
name|bool
name|isVolatile
argument_list|()
specifier|const
block|{
return|return
name|Attrs
operator|&
operator|(
literal|1
operator|<<
literal|9
operator|)
return|;
block|}
name|bool
name|isConst
argument_list|()
specifier|const
block|{
return|return
name|Attrs
operator|&
operator|(
literal|1
operator|<<
literal|10
operator|)
return|;
block|}
name|bool
name|isUnaligned
argument_list|()
specifier|const
block|{
return|return
name|Attrs
operator|&
operator|(
literal|1
operator|<<
literal|11
operator|)
return|;
block|}
name|bool
name|isPointerToDataMember
argument_list|()
specifier|const
block|{
return|return
name|getPtrMode
argument_list|()
operator|==
name|PointerMode
operator|::
name|PointerToDataMember
return|;
block|}
name|bool
name|isPointerToMemberFunction
argument_list|()
specifier|const
block|{
return|return
name|getPtrMode
argument_list|()
operator|==
name|PointerMode
operator|::
name|PointerToMemberFunction
return|;
block|}
name|bool
name|isPointerToMember
argument_list|()
specifier|const
block|{
return|return
name|isPointerToMemberFunction
argument_list|()
operator|||
name|isPointerToDataMember
argument_list|()
return|;
block|}
expr|}
block|;
name|TypeIndex
name|ReferentType
block|;
name|PointerKind
name|PtrKind
block|;
name|PointerMode
name|Mode
block|;
name|PointerOptions
name|Options
block|;
name|uint8_t
name|Size
block|;
name|MemberPointerInfo
name|MemberInfo
block|; }
block|;
comment|// LF_NESTTYPE
name|class
name|NestedTypeRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|NestedTypeRecord
argument_list|(
argument|TypeIndex Type
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|NestedType
argument_list|)
block|,
name|Type
argument_list|(
name|Type
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|NestedTypeRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getNestedType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|Pad0
block|;
comment|// Should be zero
name|TypeIndex
name|Type
block|;
comment|// Type index of nested type
comment|// Name: Null-terminated string
block|}
block|;
name|TypeIndex
name|Type
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_ARRAY
name|class
name|ArrayRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|ArrayRecord
argument_list|(
argument|TypeIndex ElementType
argument_list|,
argument|TypeIndex IndexType
argument_list|,
argument|uint64_t Size
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Array
argument_list|)
block|,
name|ElementType
argument_list|(
name|ElementType
argument_list|)
block|,
name|IndexType
argument_list|(
name|IndexType
argument_list|)
block|,
name|Size
argument_list|(
name|Size
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|ArrayRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getElementType
argument_list|()
specifier|const
block|{
return|return
name|ElementType
return|;
block|}
name|TypeIndex
name|getIndexType
argument_list|()
specifier|const
block|{
return|return
name|IndexType
return|;
block|}
name|uint64_t
name|getSize
argument_list|()
specifier|const
block|{
return|return
name|Size
return|;
block|}
name|llvm
operator|::
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|ElementType
block|;
name|TypeIndex
name|IndexType
block|;
comment|// SizeOf: LF_NUMERIC encoded size in bytes. Not element count!
comment|// Name: The null-terminated name follows.
block|}
block|;
name|TypeIndex
name|ElementType
block|;
name|TypeIndex
name|IndexType
block|;
name|uint64_t
name|Size
block|;
name|llvm
operator|::
name|StringRef
name|Name
block|; }
block|;
name|class
name|TagRecord
operator|:
name|public
name|TypeRecord
block|{
name|protected
operator|:
name|TagRecord
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|uint16_t MemberCount
argument_list|,
argument|ClassOptions Options
argument_list|,
argument|TypeIndex FieldList
argument_list|,
argument|StringRef Name
argument_list|,
argument|StringRef UniqueName
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|Kind
argument_list|)
block|,
name|MemberCount
argument_list|(
name|MemberCount
argument_list|)
block|,
name|Options
argument_list|(
name|Options
argument_list|)
block|,
name|FieldList
argument_list|(
name|FieldList
argument_list|)
block|,
name|Name
argument_list|(
name|Name
argument_list|)
block|,
name|UniqueName
argument_list|(
argument|UniqueName
argument_list|)
block|{}
name|public
operator|:
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
specifier|const
name|int
name|HfaKindShift
operator|=
literal|11
block|;
specifier|static
specifier|const
name|int
name|HfaKindMask
operator|=
literal|0x1800
block|;
specifier|static
specifier|const
name|int
name|WinRTKindShift
operator|=
literal|14
block|;
specifier|static
specifier|const
name|int
name|WinRTKindMask
operator|=
literal|0xC000
block|;
name|uint16_t
name|getMemberCount
argument_list|()
specifier|const
block|{
return|return
name|MemberCount
return|;
block|}
name|ClassOptions
name|getOptions
argument_list|()
specifier|const
block|{
return|return
name|Options
return|;
block|}
name|TypeIndex
name|getFieldList
argument_list|()
specifier|const
block|{
return|return
name|FieldList
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|StringRef
name|getUniqueName
argument_list|()
specifier|const
block|{
return|return
name|UniqueName
return|;
block|}
name|private
operator|:
name|uint16_t
name|MemberCount
block|;
name|ClassOptions
name|Options
block|;
name|TypeIndex
name|FieldList
block|;
name|StringRef
name|Name
block|;
name|StringRef
name|UniqueName
block|; }
block|;
comment|// LF_CLASS, LF_STRUCTURE, LF_INTERFACE
name|class
name|ClassRecord
operator|:
name|public
name|TagRecord
block|{
name|public
operator|:
name|ClassRecord
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|uint16_t MemberCount
argument_list|,
argument|ClassOptions Options
argument_list|,
argument|HfaKind Hfa
argument_list|,
argument|WindowsRTClassKind WinRTKind
argument_list|,
argument|TypeIndex FieldList
argument_list|,
argument|TypeIndex DerivationList
argument_list|,
argument|TypeIndex VTableShape
argument_list|,
argument|uint64_t Size
argument_list|,
argument|StringRef Name
argument_list|,
argument|StringRef UniqueName
argument_list|)
operator|:
name|TagRecord
argument_list|(
name|Kind
argument_list|,
name|MemberCount
argument_list|,
name|Options
argument_list|,
name|FieldList
argument_list|,
name|Name
argument_list|,
name|UniqueName
argument_list|)
block|,
name|Hfa
argument_list|(
name|Hfa
argument_list|)
block|,
name|WinRTKind
argument_list|(
name|WinRTKind
argument_list|)
block|,
name|DerivationList
argument_list|(
name|DerivationList
argument_list|)
block|,
name|VTableShape
argument_list|(
name|VTableShape
argument_list|)
block|,
name|Size
argument_list|(
argument|Size
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|ClassRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|HfaKind
name|getHfa
argument_list|()
specifier|const
block|{
return|return
name|Hfa
return|;
block|}
name|WindowsRTClassKind
name|getWinRTKind
argument_list|()
specifier|const
block|{
return|return
name|WinRTKind
return|;
block|}
name|TypeIndex
name|getDerivationList
argument_list|()
specifier|const
block|{
return|return
name|DerivationList
return|;
block|}
name|TypeIndex
name|getVTableShape
argument_list|()
specifier|const
block|{
return|return
name|VTableShape
return|;
block|}
name|uint64_t
name|getSize
argument_list|()
specifier|const
block|{
return|return
name|Size
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|MemberCount
block|;
comment|// Number of members in FieldList.
name|ulittle16_t
name|Properties
block|;
comment|// ClassOptions bitset
name|TypeIndex
name|FieldList
block|;
comment|// LF_FIELDLIST: List of all kinds of members
name|TypeIndex
name|DerivedFrom
block|;
comment|// LF_DERIVED: List of known derived classes
name|TypeIndex
name|VShape
block|;
comment|// LF_VTSHAPE: Shape of the vftable
comment|// SizeOf: The 'sizeof' the UDT in bytes is encoded as an LF_NUMERIC
comment|// integer.
comment|// Name: The null-terminated name follows.
name|bool
name|hasUniqueName
argument_list|()
specifier|const
block|{
return|return
name|Properties
operator|&
name|uint16_t
argument_list|(
name|ClassOptions
operator|::
name|HasUniqueName
argument_list|)
return|;
block|}
expr|}
block|;
name|HfaKind
name|Hfa
block|;
name|WindowsRTClassKind
name|WinRTKind
block|;
name|TypeIndex
name|DerivationList
block|;
name|TypeIndex
name|VTableShape
block|;
name|uint64_t
name|Size
block|; }
block|;
comment|// LF_UNION
block|struct
name|UnionRecord
operator|:
name|public
name|TagRecord
block|{
name|UnionRecord
argument_list|(
argument|uint16_t MemberCount
argument_list|,
argument|ClassOptions Options
argument_list|,
argument|HfaKind Hfa
argument_list|,
argument|TypeIndex FieldList
argument_list|,
argument|uint64_t Size
argument_list|,
argument|StringRef Name
argument_list|,
argument|StringRef UniqueName
argument_list|)
operator|:
name|TagRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Union
argument_list|,
name|MemberCount
argument_list|,
name|Options
argument_list|,
name|FieldList
argument_list|,
name|Name
argument_list|,
name|UniqueName
argument_list|)
block|,
name|Hfa
argument_list|(
name|Hfa
argument_list|)
block|,
name|Size
argument_list|(
argument|Size
argument_list|)
block|{}
specifier|static
name|ErrorOr
operator|<
name|UnionRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|HfaKind
name|getHfa
argument_list|()
specifier|const
block|{
return|return
name|Hfa
return|;
block|}
name|uint64_t
name|getSize
argument_list|()
specifier|const
block|{
return|return
name|Size
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|MemberCount
block|;
comment|// Number of members in FieldList.
name|ulittle16_t
name|Properties
block|;
comment|// ClassOptions bitset
name|TypeIndex
name|FieldList
block|;
comment|// LF_FIELDLIST: List of all kinds of members
comment|// SizeOf: The 'sizeof' the UDT in bytes is encoded as an LF_NUMERIC
comment|// integer.
comment|// Name: The null-terminated name follows.
name|bool
name|hasUniqueName
argument_list|()
specifier|const
block|{
return|return
name|Properties
operator|&
name|uint16_t
argument_list|(
name|ClassOptions
operator|::
name|HasUniqueName
argument_list|)
return|;
block|}
expr|}
block|;
name|HfaKind
name|Hfa
block|;
name|uint64_t
name|Size
block|; }
block|;
comment|// LF_ENUM
name|class
name|EnumRecord
operator|:
name|public
name|TagRecord
block|{
name|public
operator|:
name|EnumRecord
argument_list|(
argument|uint16_t MemberCount
argument_list|,
argument|ClassOptions Options
argument_list|,
argument|TypeIndex FieldList
argument_list|,
argument|StringRef Name
argument_list|,
argument|StringRef UniqueName
argument_list|,
argument|TypeIndex UnderlyingType
argument_list|)
operator|:
name|TagRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Enum
argument_list|,
name|MemberCount
argument_list|,
name|Options
argument_list|,
name|FieldList
argument_list|,
name|Name
argument_list|,
name|UniqueName
argument_list|)
block|,
name|UnderlyingType
argument_list|(
argument|UnderlyingType
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|EnumRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getUnderlyingType
argument_list|()
specifier|const
block|{
return|return
name|UnderlyingType
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|NumEnumerators
block|;
comment|// Number of enumerators
name|ulittle16_t
name|Properties
block|;
name|TypeIndex
name|UnderlyingType
block|;
name|TypeIndex
name|FieldListType
block|;
comment|// Name: The null-terminated name follows.
name|bool
name|hasUniqueName
argument_list|()
specifier|const
block|{
return|return
name|Properties
operator|&
name|uint16_t
argument_list|(
name|ClassOptions
operator|::
name|HasUniqueName
argument_list|)
return|;
block|}
expr|}
block|;
name|TypeIndex
name|UnderlyingType
block|; }
block|;
comment|// LF_BITFIELD
name|class
name|BitFieldRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|BitFieldRecord
argument_list|(
argument|TypeIndex Type
argument_list|,
argument|uint8_t BitSize
argument_list|,
argument|uint8_t BitOffset
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|BitField
argument_list|)
block|,
name|Type
argument_list|(
name|Type
argument_list|)
block|,
name|BitSize
argument_list|(
name|BitSize
argument_list|)
block|,
name|BitOffset
argument_list|(
argument|BitOffset
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|BitFieldRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|uint8_t
name|getBitOffset
argument_list|()
specifier|const
block|{
return|return
name|BitOffset
return|;
block|}
name|uint8_t
name|getBitSize
argument_list|()
specifier|const
block|{
return|return
name|BitSize
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|Type
block|;
name|uint8_t
name|BitSize
block|;
name|uint8_t
name|BitOffset
block|;   }
block|;
name|TypeIndex
name|Type
block|;
name|uint8_t
name|BitSize
block|;
name|uint8_t
name|BitOffset
block|; }
block|;
comment|// LF_VTSHAPE
name|class
name|VFTableShapeRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|explicit
name|VFTableShapeRecord
argument_list|(
name|ArrayRef
operator|<
name|VFTableSlotKind
operator|>
name|Slots
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|VFTableShape
argument_list|)
block|,
name|SlotsRef
argument_list|(
argument|Slots
argument_list|)
block|{}
name|explicit
name|VFTableShapeRecord
argument_list|(
name|std
operator|::
name|vector
operator|<
name|VFTableSlotKind
operator|>
name|Slots
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|VFTableShape
argument_list|)
block|,
name|Slots
argument_list|(
argument|std::move(Slots)
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|VFTableShapeRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|ArrayRef
operator|<
name|VFTableSlotKind
operator|>
name|getSlots
argument_list|()
specifier|const
block|{
if|if
condition|(
operator|!
name|SlotsRef
operator|.
name|empty
argument_list|()
condition|)
return|return
name|SlotsRef
return|;
return|return
name|Slots
return|;
block|}
name|uint32_t
name|getEntryCount
argument_list|()
specifier|const
block|{
return|return
name|getSlots
argument_list|()
operator|.
name|size
argument_list|()
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
comment|// Number of vftable entries. Each method may have more than one entry due
comment|// to
comment|// things like covariant return types.
name|ulittle16_t
name|VFEntryCount
block|;
comment|// Descriptors[]: 4-bit virtual method descriptors of type CV_VTS_desc_e.
block|}
block|;
name|private
operator|:
name|ArrayRef
operator|<
name|VFTableSlotKind
operator|>
name|SlotsRef
block|;
name|std
operator|::
name|vector
operator|<
name|VFTableSlotKind
operator|>
name|Slots
block|; }
block|;
comment|// LF_TYPESERVER2
name|class
name|TypeServer2Record
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|TypeServer2Record
argument_list|(
argument|StringRef Guid
argument_list|,
argument|uint32_t Age
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|TypeServer2
argument_list|)
block|,
name|Guid
argument_list|(
name|Guid
argument_list|)
block|,
name|Age
argument_list|(
name|Age
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|TypeServer2Record
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|StringRef
name|getGuid
argument_list|()
specifier|const
block|{
return|return
name|Guid
return|;
block|}
name|uint32_t
name|getAge
argument_list|()
specifier|const
block|{
return|return
name|Age
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|char
name|Guid
index|[
literal|16
index|]
block|;
comment|// GUID
name|ulittle32_t
name|Age
block|;
comment|// Name: Name of the PDB as a null-terminated string
block|}
block|;
name|StringRef
name|Guid
block|;
name|uint32_t
name|Age
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_STRING_ID
name|class
name|StringIdRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|StringIdRecord
argument_list|(
argument|TypeIndex Id
argument_list|,
argument|StringRef String
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|StringId
argument_list|)
block|,
name|Id
argument_list|(
name|Id
argument_list|)
block|,
name|String
argument_list|(
argument|String
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|StringIdRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getId
argument_list|()
specifier|const
block|{
return|return
name|Id
return|;
block|}
name|StringRef
name|getString
argument_list|()
specifier|const
block|{
return|return
name|String
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|id
block|;
comment|// Name: Name of the PDB as a null-terminated string
block|}
block|;
name|TypeIndex
name|Id
block|;
name|StringRef
name|String
block|; }
block|;
comment|// LF_FUNC_ID
name|class
name|FuncIdRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|FuncIdRecord
argument_list|(
argument|TypeIndex ParentScope
argument_list|,
argument|TypeIndex FunctionType
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|FuncId
argument_list|)
block|,
name|ParentScope
argument_list|(
name|ParentScope
argument_list|)
block|,
name|FunctionType
argument_list|(
name|FunctionType
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|FuncIdRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getParentScope
argument_list|()
specifier|const
block|{
return|return
name|ParentScope
return|;
block|}
name|TypeIndex
name|getFunctionType
argument_list|()
specifier|const
block|{
return|return
name|FunctionType
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|ParentScope
block|;
name|TypeIndex
name|FunctionType
block|;
comment|// Name: The null-terminated name follows.
block|}
block|;
name|TypeIndex
name|ParentScope
block|;
name|TypeIndex
name|FunctionType
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_UDT_SRC_LINE
name|class
name|UdtSourceLineRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|UdtSourceLineRecord
argument_list|(
argument|TypeIndex UDT
argument_list|,
argument|TypeIndex SourceFile
argument_list|,
argument|uint32_t LineNumber
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|UdtSourceLine
argument_list|)
block|,
name|UDT
argument_list|(
name|UDT
argument_list|)
block|,
name|SourceFile
argument_list|(
name|SourceFile
argument_list|)
block|,
name|LineNumber
argument_list|(
argument|LineNumber
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|UdtSourceLineRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getUDT
argument_list|()
specifier|const
block|{
return|return
name|UDT
return|;
block|}
name|TypeIndex
name|getSourceFile
argument_list|()
specifier|const
block|{
return|return
name|SourceFile
return|;
block|}
name|uint32_t
name|getLineNumber
argument_list|()
specifier|const
block|{
return|return
name|LineNumber
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|UDT
block|;
comment|// The user-defined type
name|TypeIndex
name|SourceFile
block|;
comment|// StringID containing the source filename
name|ulittle32_t
name|LineNumber
block|;   }
block|;
name|TypeIndex
name|UDT
block|;
name|TypeIndex
name|SourceFile
block|;
name|uint32_t
name|LineNumber
block|; }
block|;
comment|// LF_UDT_MOD_SRC_LINE
name|class
name|UdtModSourceLineRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|UdtModSourceLineRecord
argument_list|(
argument|TypeIndex UDT
argument_list|,
argument|TypeIndex SourceFile
argument_list|,
argument|uint32_t LineNumber
argument_list|,
argument|uint16_t Module
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|UdtSourceLine
argument_list|)
block|,
name|UDT
argument_list|(
name|UDT
argument_list|)
block|,
name|SourceFile
argument_list|(
name|SourceFile
argument_list|)
block|,
name|LineNumber
argument_list|(
name|LineNumber
argument_list|)
block|,
name|Module
argument_list|(
argument|Module
argument_list|)
block|{}
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|UdtModSourceLineRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|{
specifier|const
name|Layout
operator|*
name|L
operator|=
name|nullptr
block|;
name|CV_DESERIALIZE
argument_list|(
name|Data
argument_list|,
name|L
argument_list|)
block|;
return|return
name|UdtModSourceLineRecord
argument_list|(
name|L
operator|->
name|UDT
argument_list|,
name|L
operator|->
name|SourceFile
argument_list|,
name|L
operator|->
name|LineNumber
argument_list|,
name|L
operator|->
name|Module
argument_list|)
return|;
block|}
name|TypeIndex
name|getUDT
argument_list|()
specifier|const
block|{
return|return
name|UDT
return|;
block|}
name|TypeIndex
name|getSourceFile
argument_list|()
specifier|const
block|{
return|return
name|SourceFile
return|;
block|}
name|uint32_t
name|getLineNumber
argument_list|()
specifier|const
block|{
return|return
name|LineNumber
return|;
block|}
name|uint16_t
name|getModule
argument_list|()
specifier|const
block|{
return|return
name|Module
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|UDT
block|;
comment|// The user-defined type
name|TypeIndex
name|SourceFile
block|;
comment|// StringID containing the source filename
name|ulittle32_t
name|LineNumber
block|;
name|ulittle16_t
name|Module
block|;
comment|// Module that contributes this UDT definition
block|}
block|;
name|TypeIndex
name|UDT
block|;
name|TypeIndex
name|SourceFile
block|;
name|uint32_t
name|LineNumber
block|;
name|uint16_t
name|Module
block|; }
block|;
comment|// LF_BUILDINFO
name|class
name|BuildInfoRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|BuildInfoRecord
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|ArgIndices
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|BuildInfo
argument_list|)
block|,
name|ArgIndices
argument_list|(
argument|ArgIndices.begin()
argument_list|,
argument|ArgIndices.end()
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|BuildInfoRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|getArgs
argument_list|()
specifier|const
block|{
return|return
name|ArgIndices
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|NumArgs
block|;
comment|// Number of arguments
comment|// ArgTypes[]: Type indicies of arguments
block|}
block|;
name|SmallVector
operator|<
name|TypeIndex
block|,
literal|4
operator|>
name|ArgIndices
block|; }
block|;
comment|// LF_VFTABLE
name|class
name|VFTableRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|VFTableRecord
argument_list|(
argument|TypeIndex CompleteClass
argument_list|,
argument|TypeIndex OverriddenVFTable
argument_list|,
argument|uint32_t VFPtrOffset
argument_list|,
argument|StringRef Name
argument_list|,
argument|ArrayRef<StringRef> Methods
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|VFTable
argument_list|)
block|,
name|CompleteClass
argument_list|(
name|CompleteClass
argument_list|)
block|,
name|OverriddenVFTable
argument_list|(
name|OverriddenVFTable
argument_list|)
block|,
name|VFPtrOffset
argument_list|(
name|VFPtrOffset
argument_list|)
block|,
name|Name
argument_list|(
name|Name
argument_list|)
block|,
name|MethodNamesRef
argument_list|(
argument|Methods
argument_list|)
block|{}
name|VFTableRecord
argument_list|(
argument|TypeIndex CompleteClass
argument_list|,
argument|TypeIndex OverriddenVFTable
argument_list|,
argument|uint32_t VFPtrOffset
argument_list|,
argument|StringRef Name
argument_list|,
argument|const std::vector<StringRef>&Methods
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|VFTable
argument_list|)
block|,
name|CompleteClass
argument_list|(
name|CompleteClass
argument_list|)
block|,
name|OverriddenVFTable
argument_list|(
name|OverriddenVFTable
argument_list|)
block|,
name|VFPtrOffset
argument_list|(
name|VFPtrOffset
argument_list|)
block|,
name|Name
argument_list|(
name|Name
argument_list|)
block|,
name|MethodNames
argument_list|(
argument|Methods
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|VFTableRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getCompleteClass
argument_list|()
specifier|const
block|{
return|return
name|CompleteClass
return|;
block|}
name|TypeIndex
name|getOverriddenVTable
argument_list|()
specifier|const
block|{
return|return
name|OverriddenVFTable
return|;
block|}
name|uint32_t
name|getVFPtrOffset
argument_list|()
specifier|const
block|{
return|return
name|VFPtrOffset
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|ArrayRef
operator|<
name|StringRef
operator|>
name|getMethodNames
argument_list|()
specifier|const
block|{
if|if
condition|(
operator|!
name|MethodNamesRef
operator|.
name|empty
argument_list|()
condition|)
return|return
name|MethodNamesRef
return|;
return|return
name|MethodNames
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|TypeIndex
name|CompleteClass
block|;
comment|// Class that owns this vftable.
name|TypeIndex
name|OverriddenVFTable
block|;
comment|// VFTable that this overrides.
name|ulittle32_t
name|VFPtrOffset
block|;
comment|// VFPtr offset in CompleteClass
name|ulittle32_t
name|NamesLen
block|;
comment|// Length of subsequent names array in bytes.
comment|// Names: A sequence of null-terminated strings. First string is vftable
comment|// names.
block|}
block|;
name|TypeIndex
name|CompleteClass
block|;
name|TypeIndex
name|OverriddenVFTable
block|;
name|ulittle32_t
name|VFPtrOffset
block|;
name|StringRef
name|Name
block|;
name|ArrayRef
operator|<
name|StringRef
operator|>
name|MethodNamesRef
block|;
name|std
operator|::
name|vector
operator|<
name|StringRef
operator|>
name|MethodNames
block|; }
block|;
comment|// LF_ONEMETHOD
name|class
name|OneMethodRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|OneMethodRecord
argument_list|(
argument|TypeIndex Type
argument_list|,
argument|MethodKind Kind
argument_list|,
argument|MethodOptions Options
argument_list|,
argument|MemberAccess Access
argument_list|,
argument|int32_t VFTableOffset
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|OneMethod
argument_list|)
block|,
name|Type
argument_list|(
name|Type
argument_list|)
block|,
name|Kind
argument_list|(
name|Kind
argument_list|)
block|,
name|Options
argument_list|(
name|Options
argument_list|)
block|,
name|Access
argument_list|(
name|Access
argument_list|)
block|,
name|VFTableOffset
argument_list|(
name|VFTableOffset
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|OneMethodRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|MethodKind
name|getKind
argument_list|()
specifier|const
block|{
return|return
name|Kind
return|;
block|}
name|MethodOptions
name|getOptions
argument_list|()
specifier|const
block|{
return|return
name|Options
return|;
block|}
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|Access
return|;
block|}
name|int32_t
name|getVFTableOffset
argument_list|()
specifier|const
block|{
return|return
name|VFTableOffset
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|bool
name|isIntroducingVirtual
argument_list|()
specifier|const
block|{
return|return
name|Kind
operator|==
name|MethodKind
operator|::
name|IntroducingVirtual
operator|||
name|Kind
operator|==
name|MethodKind
operator|::
name|PureIntroducingVirtual
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
name|TypeIndex
name|Type
block|;
comment|// If is introduced virtual method:
comment|//   VFTableOffset: int32_t offset in vftable
comment|// Name: Null-terminated string
block|}
block|;
name|TypeIndex
name|Type
block|;
name|MethodKind
name|Kind
block|;
name|MethodOptions
name|Options
block|;
name|MemberAccess
name|Access
block|;
name|int32_t
name|VFTableOffset
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_METHODLIST
name|class
name|MethodOverloadListRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|MethodOverloadListRecord
argument_list|(
name|ArrayRef
operator|<
name|OneMethodRecord
operator|>
name|Methods
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|MethodOverloadList
argument_list|)
block|,
name|Methods
argument_list|(
argument|Methods
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|MethodOverloadListRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|ArrayRef
operator|<
name|OneMethodRecord
operator|>
name|getMethods
argument_list|()
specifier|const
block|{
return|return
name|Methods
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
name|ulittle16_t
name|Padding
block|;
name|TypeIndex
name|Type
block|;
comment|// If is introduced virtual method:
comment|//   VFTableOffset: int32_t offset in vftable
block|}
block|;
name|std
operator|::
name|vector
operator|<
name|OneMethodRecord
operator|>
name|Methods
block|; }
block|;
comment|/// For method overload sets.  LF_METHOD
name|class
name|OverloadedMethodRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|OverloadedMethodRecord
argument_list|(
argument|uint16_t NumOverloads
argument_list|,
argument|TypeIndex MethodList
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|OverloadedMethod
argument_list|)
block|,
name|NumOverloads
argument_list|(
name|NumOverloads
argument_list|)
block|,
name|MethodList
argument_list|(
name|MethodList
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|OverloadedMethodRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|uint16_t
name|getNumOverloads
argument_list|()
specifier|const
block|{
return|return
name|NumOverloads
return|;
block|}
name|TypeIndex
name|getMethodList
argument_list|()
specifier|const
block|{
return|return
name|MethodList
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|MethodCount
block|;
comment|// Size of overload set
name|TypeIndex
name|MethList
block|;
comment|// Type index of methods in overload set
comment|// Name: Null-terminated string
block|}
block|;
name|uint16_t
name|NumOverloads
block|;
name|TypeIndex
name|MethodList
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_MEMBER
name|class
name|DataMemberRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|DataMemberRecord
argument_list|(
argument|MemberAccess Access
argument_list|,
argument|TypeIndex Type
argument_list|,
argument|uint64_t Offset
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|DataMember
argument_list|)
block|,
name|Access
argument_list|(
name|Access
argument_list|)
block|,
name|Type
argument_list|(
name|Type
argument_list|)
block|,
name|FieldOffset
argument_list|(
name|Offset
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|DataMemberRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|Access
return|;
block|}
name|TypeIndex
name|getType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|uint64_t
name|getFieldOffset
argument_list|()
specifier|const
block|{
return|return
name|FieldOffset
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
comment|// Access control attributes, etc
name|TypeIndex
name|Type
block|;
comment|// FieldOffset: LF_NUMERIC encoded byte offset
comment|// Name: Null-terminated string
block|}
block|;
name|MemberAccess
name|Access
block|;
name|TypeIndex
name|Type
block|;
name|uint64_t
name|FieldOffset
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_STMEMBER
name|class
name|StaticDataMemberRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|StaticDataMemberRecord
argument_list|(
argument|MemberAccess Access
argument_list|,
argument|TypeIndex Type
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|StaticDataMember
argument_list|)
block|,
name|Access
argument_list|(
name|Access
argument_list|)
block|,
name|Type
argument_list|(
name|Type
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|StaticDataMemberRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|Access
return|;
block|}
name|TypeIndex
name|getType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
comment|// Access control attributes, etc
name|TypeIndex
name|Type
block|;
comment|// Name: Null-terminated string
block|}
block|;
name|MemberAccess
name|Access
block|;
name|TypeIndex
name|Type
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_ENUMERATE
name|class
name|EnumeratorRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|EnumeratorRecord
argument_list|(
argument|MemberAccess Access
argument_list|,
argument|APSInt Value
argument_list|,
argument|StringRef Name
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|Enumerator
argument_list|)
block|,
name|Access
argument_list|(
name|Access
argument_list|)
block|,
name|Value
argument_list|(
name|std
operator|::
name|move
argument_list|(
name|Value
argument_list|)
argument_list|)
block|,
name|Name
argument_list|(
argument|Name
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|EnumeratorRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|Access
return|;
block|}
name|APSInt
name|getValue
argument_list|()
specifier|const
block|{
return|return
name|Value
return|;
block|}
name|StringRef
name|getName
argument_list|()
specifier|const
block|{
return|return
name|Name
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
comment|// Access control attributes, etc
comment|// EnumValue: LF_NUMERIC encoded enumerator value
comment|// Name: Null-terminated string
block|}
block|;
name|MemberAccess
name|Access
block|;
name|APSInt
name|Value
block|;
name|StringRef
name|Name
block|; }
block|;
comment|// LF_VFUNCTAB
name|class
name|VFPtrRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|VFPtrRecord
argument_list|(
argument|TypeIndex Type
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|VFPtr
argument_list|)
block|,
name|Type
argument_list|(
argument|Type
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|VFPtrRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|TypeIndex
name|getType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|Pad0
block|;
name|TypeIndex
name|Type
block|;
comment|// Type of vfptr
block|}
block|;
name|TypeIndex
name|Type
block|; }
block|;
comment|// LF_BCLASS, LF_BINTERFACE
name|class
name|BaseClassRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|BaseClassRecord
argument_list|(
argument|MemberAccess Access
argument_list|,
argument|TypeIndex Type
argument_list|,
argument|uint64_t Offset
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|BaseClass
argument_list|)
block|,
name|Access
argument_list|(
name|Access
argument_list|)
block|,
name|Type
argument_list|(
name|Type
argument_list|)
block|,
name|Offset
argument_list|(
argument|Offset
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|BaseClassRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|Access
return|;
block|}
name|TypeIndex
name|getBaseType
argument_list|()
specifier|const
block|{
return|return
name|Type
return|;
block|}
name|uint64_t
name|getBaseOffset
argument_list|()
specifier|const
block|{
return|return
name|Offset
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
comment|// Access control attributes, etc
name|TypeIndex
name|BaseType
block|;
comment|// Base class type
comment|// BaseOffset: LF_NUMERIC encoded byte offset of base from derived.
block|}
block|;
name|MemberAccess
name|Access
block|;
name|TypeIndex
name|Type
block|;
name|uint64_t
name|Offset
block|; }
block|;
comment|// LF_VBCLASS, LF_IVBCLASS
name|class
name|VirtualBaseClassRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|VirtualBaseClassRecord
argument_list|(
argument|MemberAccess Access
argument_list|,
argument|TypeIndex BaseType
argument_list|,
argument|TypeIndex VBPtrType
argument_list|,
argument|uint64_t Offset
argument_list|,
argument|uint64_t Index
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|VirtualBaseClass
argument_list|)
block|,
name|Access
argument_list|(
name|Access
argument_list|)
block|,
name|BaseType
argument_list|(
name|BaseType
argument_list|)
block|,
name|VBPtrType
argument_list|(
name|VBPtrType
argument_list|)
block|,
name|VBPtrOffset
argument_list|(
name|Offset
argument_list|)
block|,
name|VTableIndex
argument_list|(
argument|Index
argument_list|)
block|{}
comment|/// Rewrite member type indices with IndexMap. Returns false if a type index
comment|/// is not in the map.
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|VirtualBaseClassRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|MemberAccess
name|getAccess
argument_list|()
specifier|const
block|{
return|return
name|Access
return|;
block|}
name|TypeIndex
name|getBaseType
argument_list|()
specifier|const
block|{
return|return
name|BaseType
return|;
block|}
name|TypeIndex
name|getVBPtrType
argument_list|()
specifier|const
block|{
return|return
name|VBPtrType
return|;
block|}
name|uint64_t
name|getVBPtrOffset
argument_list|()
specifier|const
block|{
return|return
name|VBPtrOffset
return|;
block|}
name|uint64_t
name|getVTableIndex
argument_list|()
specifier|const
block|{
return|return
name|VTableIndex
return|;
block|}
name|private
operator|:
expr|struct
name|Layout
block|{
name|MemberAttributes
name|Attrs
block|;
comment|// Access control attributes, etc.
name|TypeIndex
name|BaseType
block|;
comment|// Base class type
name|TypeIndex
name|VBPtrType
block|;
comment|// Virtual base pointer type
comment|// VBPtrOffset: Offset of vbptr from vfptr encoded as LF_NUMERIC.
comment|// VBTableIndex: Index of vbase within vbtable encoded as LF_NUMERIC.
block|}
block|;
name|MemberAccess
name|Access
block|;
name|TypeIndex
name|BaseType
block|;
name|TypeIndex
name|VBPtrType
block|;
name|uint64_t
name|VBPtrOffset
block|;
name|uint64_t
name|VTableIndex
block|; }
block|;
comment|/// LF_INDEX - Used to chain two large LF_FIELDLIST or LF_METHODLIST records
comment|/// together. The first will end in an LF_INDEX record that points to the next.
name|class
name|ListContinuationRecord
operator|:
name|public
name|TypeRecord
block|{
name|public
operator|:
name|ListContinuationRecord
argument_list|(
argument|TypeIndex ContinuationIndex
argument_list|)
operator|:
name|TypeRecord
argument_list|(
name|TypeRecordKind
operator|::
name|ListContinuation
argument_list|)
block|,
name|ContinuationIndex
argument_list|(
argument|ContinuationIndex
argument_list|)
block|{}
name|TypeIndex
name|getContinuationIndex
argument_list|()
specifier|const
block|{
return|return
name|ContinuationIndex
return|;
block|}
name|bool
name|remapTypeIndices
argument_list|(
name|ArrayRef
operator|<
name|TypeIndex
operator|>
name|IndexMap
argument_list|)
block|;
specifier|static
name|ErrorOr
operator|<
name|ListContinuationRecord
operator|>
name|deserialize
argument_list|(
argument|TypeRecordKind Kind
argument_list|,
argument|ArrayRef<uint8_t>&Data
argument_list|)
block|;
name|private
operator|:
expr|struct
name|Layout
block|{
name|ulittle16_t
name|Pad0
block|;
name|TypeIndex
name|ContinuationIndex
block|;   }
block|;
name|TypeIndex
name|ContinuationIndex
block|; }
block|;
typedef|typedef
name|CVRecord
operator|<
name|TypeLeafKind
operator|>
name|CVType
expr_stmt|;
typedef|typedef
name|VarStreamArray
operator|<
name|CVType
operator|>
name|CVTypeArray
expr_stmt|;
block|}
block|}
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

end_unit

