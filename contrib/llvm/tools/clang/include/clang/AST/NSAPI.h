begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|//===--- NSAPI.h - NSFoundation APIs ----------------------------*- C++ -*-===//
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|//                     The LLVM Compiler Infrastructure
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|// This file is distributed under the University of Illinois Open Source
end_comment

begin_comment
comment|// License. See LICENSE.TXT for details.
end_comment

begin_comment
comment|//
end_comment

begin_comment
comment|//===----------------------------------------------------------------------===//
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LLVM_CLANG_AST_NSAPI_H
end_ifndef

begin_define
define|#
directive|define
name|LLVM_CLANG_AST_NSAPI_H
end_define

begin_include
include|#
directive|include
file|"clang/Basic/IdentifierTable.h"
end_include

begin_include
include|#
directive|include
file|"llvm/ADT/ArrayRef.h"
end_include

begin_include
include|#
directive|include
file|"llvm/ADT/Optional.h"
end_include

begin_decl_stmt
name|namespace
name|clang
block|{
name|class
name|ASTContext
decl_stmt|;
name|class
name|ObjCInterfaceDecl
decl_stmt|;
name|class
name|QualType
decl_stmt|;
name|class
name|Expr
decl_stmt|;
comment|// \brief Provides info and caches identifiers/selectors for NSFoundation API.
name|class
name|NSAPI
block|{
name|public
label|:
name|explicit
name|NSAPI
parameter_list|(
name|ASTContext
modifier|&
name|Ctx
parameter_list|)
function_decl|;
name|ASTContext
operator|&
name|getASTContext
argument_list|()
specifier|const
block|{
return|return
name|Ctx
return|;
block|}
enum|enum
name|NSClassIdKindKind
block|{
name|ClassId_NSObject
block|,
name|ClassId_NSString
block|,
name|ClassId_NSArray
block|,
name|ClassId_NSMutableArray
block|,
name|ClassId_NSDictionary
block|,
name|ClassId_NSMutableDictionary
block|,
name|ClassId_NSNumber
block|,
name|ClassId_NSMutableSet
block|,
name|ClassId_NSMutableOrderedSet
block|,
name|ClassId_NSValue
block|}
enum|;
specifier|static
specifier|const
name|unsigned
name|NumClassIds
init|=
literal|10
decl_stmt|;
enum|enum
name|NSStringMethodKind
block|{
name|NSStr_stringWithString
block|,
name|NSStr_stringWithUTF8String
block|,
name|NSStr_stringWithCStringEncoding
block|,
name|NSStr_stringWithCString
block|,
name|NSStr_initWithString
block|,
name|NSStr_initWithUTF8String
block|}
enum|;
specifier|static
specifier|const
name|unsigned
name|NumNSStringMethods
init|=
literal|6
decl_stmt|;
name|IdentifierInfo
modifier|*
name|getNSClassId
argument_list|(
name|NSClassIdKindKind
name|K
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief The Objective-C NSString selectors.
name|Selector
name|getNSStringSelector
argument_list|(
name|NSStringMethodKind
name|MK
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Return NSStringMethodKind if \param Sel is such a selector.
name|Optional
operator|<
name|NSStringMethodKind
operator|>
name|getNSStringMethodKind
argument_list|(
argument|Selector Sel
argument_list|)
specifier|const
expr_stmt|;
comment|/// \brief Returns true if the expression \param E is a reference of
comment|/// "NSUTF8StringEncoding" enum constant.
name|bool
name|isNSUTF8StringEncodingConstant
argument_list|(
specifier|const
name|Expr
operator|*
name|E
argument_list|)
decl|const
block|{
return|return
name|isObjCEnumerator
argument_list|(
name|E
argument_list|,
literal|"NSUTF8StringEncoding"
argument_list|,
name|NSUTF8StringEncodingId
argument_list|)
return|;
block|}
comment|/// \brief Returns true if the expression \param E is a reference of
comment|/// "NSASCIIStringEncoding" enum constant.
name|bool
name|isNSASCIIStringEncodingConstant
argument_list|(
specifier|const
name|Expr
operator|*
name|E
argument_list|)
decl|const
block|{
return|return
name|isObjCEnumerator
argument_list|(
name|E
argument_list|,
literal|"NSASCIIStringEncoding"
argument_list|,
name|NSASCIIStringEncodingId
argument_list|)
return|;
block|}
comment|/// \brief Enumerates the NSArray/NSMutableArray methods used to generate
comment|/// literals and to apply some checks.
enum|enum
name|NSArrayMethodKind
block|{
name|NSArr_array
block|,
name|NSArr_arrayWithArray
block|,
name|NSArr_arrayWithObject
block|,
name|NSArr_arrayWithObjects
block|,
name|NSArr_arrayWithObjectsCount
block|,
name|NSArr_initWithArray
block|,
name|NSArr_initWithObjects
block|,
name|NSArr_objectAtIndex
block|,
name|NSMutableArr_replaceObjectAtIndex
block|,
name|NSMutableArr_addObject
block|,
name|NSMutableArr_insertObjectAtIndex
block|,
name|NSMutableArr_setObjectAtIndexedSubscript
block|}
enum|;
specifier|static
specifier|const
name|unsigned
name|NumNSArrayMethods
init|=
literal|12
decl_stmt|;
comment|/// \brief The Objective-C NSArray selectors.
name|Selector
name|getNSArraySelector
argument_list|(
name|NSArrayMethodKind
name|MK
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Return NSArrayMethodKind if \p Sel is such a selector.
name|Optional
operator|<
name|NSArrayMethodKind
operator|>
name|getNSArrayMethodKind
argument_list|(
argument|Selector Sel
argument_list|)
expr_stmt|;
comment|/// \brief Enumerates the NSDictionary/NSMutableDictionary methods used
comment|/// to generate literals and to apply some checks.
enum|enum
name|NSDictionaryMethodKind
block|{
name|NSDict_dictionary
block|,
name|NSDict_dictionaryWithDictionary
block|,
name|NSDict_dictionaryWithObjectForKey
block|,
name|NSDict_dictionaryWithObjectsForKeys
block|,
name|NSDict_dictionaryWithObjectsForKeysCount
block|,
name|NSDict_dictionaryWithObjectsAndKeys
block|,
name|NSDict_initWithDictionary
block|,
name|NSDict_initWithObjectsAndKeys
block|,
name|NSDict_initWithObjectsForKeys
block|,
name|NSDict_objectForKey
block|,
name|NSMutableDict_setObjectForKey
block|,
name|NSMutableDict_setObjectForKeyedSubscript
block|,
name|NSMutableDict_setValueForKey
block|}
enum|;
specifier|static
specifier|const
name|unsigned
name|NumNSDictionaryMethods
init|=
literal|13
decl_stmt|;
comment|/// \brief The Objective-C NSDictionary selectors.
name|Selector
name|getNSDictionarySelector
argument_list|(
name|NSDictionaryMethodKind
name|MK
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Return NSDictionaryMethodKind if \p Sel is such a selector.
name|Optional
operator|<
name|NSDictionaryMethodKind
operator|>
name|getNSDictionaryMethodKind
argument_list|(
argument|Selector Sel
argument_list|)
expr_stmt|;
comment|/// \brief Enumerates the NSMutableSet/NSOrderedSet methods used
comment|/// to apply some checks.
enum|enum
name|NSSetMethodKind
block|{
name|NSMutableSet_addObject
block|,
name|NSOrderedSet_insertObjectAtIndex
block|,
name|NSOrderedSet_setObjectAtIndex
block|,
name|NSOrderedSet_setObjectAtIndexedSubscript
block|,
name|NSOrderedSet_replaceObjectAtIndexWithObject
block|}
enum|;
specifier|static
specifier|const
name|unsigned
name|NumNSSetMethods
init|=
literal|5
decl_stmt|;
comment|/// \brief The Objective-C NSSet selectors.
name|Selector
name|getNSSetSelector
argument_list|(
name|NSSetMethodKind
name|MK
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Return NSSetMethodKind if \p Sel is such a selector.
name|Optional
operator|<
name|NSSetMethodKind
operator|>
name|getNSSetMethodKind
argument_list|(
argument|Selector Sel
argument_list|)
expr_stmt|;
comment|/// \brief Returns selector for "objectForKeyedSubscript:".
name|Selector
name|getObjectForKeyedSubscriptSelector
argument_list|()
specifier|const
block|{
return|return
name|getOrInitSelector
argument_list|(
name|StringRef
argument_list|(
literal|"objectForKeyedSubscript"
argument_list|)
argument_list|,
name|objectForKeyedSubscriptSel
argument_list|)
return|;
block|}
comment|/// \brief Returns selector for "objectAtIndexedSubscript:".
name|Selector
name|getObjectAtIndexedSubscriptSelector
argument_list|()
specifier|const
block|{
return|return
name|getOrInitSelector
argument_list|(
name|StringRef
argument_list|(
literal|"objectAtIndexedSubscript"
argument_list|)
argument_list|,
name|objectAtIndexedSubscriptSel
argument_list|)
return|;
block|}
comment|/// \brief Returns selector for "setObject:forKeyedSubscript".
name|Selector
name|getSetObjectForKeyedSubscriptSelector
argument_list|()
specifier|const
block|{
name|StringRef
name|Ids
index|[]
operator|=
block|{
literal|"setObject"
block|,
literal|"forKeyedSubscript"
block|}
block|;
return|return
name|getOrInitSelector
argument_list|(
name|Ids
argument_list|,
name|setObjectForKeyedSubscriptSel
argument_list|)
return|;
block|}
comment|/// \brief Returns selector for "setObject:atIndexedSubscript".
name|Selector
name|getSetObjectAtIndexedSubscriptSelector
argument_list|()
specifier|const
block|{
name|StringRef
name|Ids
index|[]
operator|=
block|{
literal|"setObject"
block|,
literal|"atIndexedSubscript"
block|}
block|;
return|return
name|getOrInitSelector
argument_list|(
name|Ids
argument_list|,
name|setObjectAtIndexedSubscriptSel
argument_list|)
return|;
block|}
comment|/// \brief Returns selector for "isEqual:".
name|Selector
name|getIsEqualSelector
argument_list|()
specifier|const
block|{
return|return
name|getOrInitSelector
argument_list|(
name|StringRef
argument_list|(
literal|"isEqual"
argument_list|)
argument_list|,
name|isEqualSel
argument_list|)
return|;
block|}
comment|/// \brief Enumerates the NSNumber methods used to generate literals.
enum|enum
name|NSNumberLiteralMethodKind
block|{
name|NSNumberWithChar
block|,
name|NSNumberWithUnsignedChar
block|,
name|NSNumberWithShort
block|,
name|NSNumberWithUnsignedShort
block|,
name|NSNumberWithInt
block|,
name|NSNumberWithUnsignedInt
block|,
name|NSNumberWithLong
block|,
name|NSNumberWithUnsignedLong
block|,
name|NSNumberWithLongLong
block|,
name|NSNumberWithUnsignedLongLong
block|,
name|NSNumberWithFloat
block|,
name|NSNumberWithDouble
block|,
name|NSNumberWithBool
block|,
name|NSNumberWithInteger
block|,
name|NSNumberWithUnsignedInteger
block|}
enum|;
specifier|static
specifier|const
name|unsigned
name|NumNSNumberLiteralMethods
init|=
literal|15
decl_stmt|;
comment|/// \brief The Objective-C NSNumber selectors used to create NSNumber literals.
comment|/// \param Instance if true it will return the selector for the init* method
comment|/// otherwise it will return the selector for the number* method.
name|Selector
name|getNSNumberLiteralSelector
argument_list|(
name|NSNumberLiteralMethodKind
name|MK
argument_list|,
name|bool
name|Instance
argument_list|)
decl|const
decl_stmt|;
name|bool
name|isNSNumberLiteralSelector
argument_list|(
name|NSNumberLiteralMethodKind
name|MK
argument_list|,
name|Selector
name|Sel
argument_list|)
decl|const
block|{
return|return
name|Sel
operator|==
name|getNSNumberLiteralSelector
argument_list|(
name|MK
argument_list|,
name|false
argument_list|)
operator|||
name|Sel
operator|==
name|getNSNumberLiteralSelector
argument_list|(
name|MK
argument_list|,
name|true
argument_list|)
return|;
block|}
comment|/// \brief Return NSNumberLiteralMethodKind if \p Sel is such a selector.
name|Optional
operator|<
name|NSNumberLiteralMethodKind
operator|>
name|getNSNumberLiteralMethodKind
argument_list|(
argument|Selector Sel
argument_list|)
specifier|const
expr_stmt|;
comment|/// \brief Determine the appropriate NSNumber factory method kind for a
comment|/// literal of the given type.
name|Optional
operator|<
name|NSNumberLiteralMethodKind
operator|>
name|getNSNumberFactoryMethodKind
argument_list|(
argument|QualType T
argument_list|)
specifier|const
expr_stmt|;
comment|/// \brief Returns true if \param T is a typedef of "BOOL" in objective-c.
name|bool
name|isObjCBOOLType
argument_list|(
name|QualType
name|T
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Returns true if \param T is a typedef of "NSInteger" in objective-c.
name|bool
name|isObjCNSIntegerType
argument_list|(
name|QualType
name|T
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Returns true if \param T is a typedef of "NSUInteger" in objective-c.
name|bool
name|isObjCNSUIntegerType
argument_list|(
name|QualType
name|T
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Returns one of NSIntegral typedef names if \param T is a typedef
comment|/// of that name in objective-c.
name|StringRef
name|GetNSIntegralKind
argument_list|(
name|QualType
name|T
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Returns \c true if \p Id is currently defined as a macro.
name|bool
name|isMacroDefined
argument_list|(
name|StringRef
name|Id
argument_list|)
decl|const
decl_stmt|;
comment|/// \brief Returns \c true if \p InterfaceDecl is subclass of \p NSClassKind
name|bool
name|isSubclassOfNSClass
argument_list|(
name|ObjCInterfaceDecl
operator|*
name|InterfaceDecl
argument_list|,
name|NSClassIdKindKind
name|NSClassKind
argument_list|)
decl|const
decl_stmt|;
name|private
label|:
name|bool
name|isObjCTypedef
argument_list|(
name|QualType
name|T
argument_list|,
name|StringRef
name|name
argument_list|,
name|IdentifierInfo
operator|*
operator|&
name|II
argument_list|)
decl|const
decl_stmt|;
name|bool
name|isObjCEnumerator
argument_list|(
specifier|const
name|Expr
operator|*
name|E
argument_list|,
name|StringRef
name|name
argument_list|,
name|IdentifierInfo
operator|*
operator|&
name|II
argument_list|)
decl|const
decl_stmt|;
name|Selector
name|getOrInitSelector
argument_list|(
name|ArrayRef
operator|<
name|StringRef
operator|>
name|Ids
argument_list|,
name|Selector
operator|&
name|Sel
argument_list|)
decl|const
decl_stmt|;
name|ASTContext
modifier|&
name|Ctx
decl_stmt|;
name|mutable
name|IdentifierInfo
modifier|*
name|ClassIds
index|[
name|NumClassIds
index|]
decl_stmt|;
name|mutable
name|Selector
name|NSStringSelectors
index|[
name|NumNSStringMethods
index|]
decl_stmt|;
comment|/// \brief The selectors for Objective-C NSArray methods.
name|mutable
name|Selector
name|NSArraySelectors
index|[
name|NumNSArrayMethods
index|]
decl_stmt|;
comment|/// \brief The selectors for Objective-C NSDictionary methods.
name|mutable
name|Selector
name|NSDictionarySelectors
index|[
name|NumNSDictionaryMethods
index|]
decl_stmt|;
comment|/// \brief The selectors for Objective-C NSSet methods.
name|mutable
name|Selector
name|NSSetSelectors
index|[
name|NumNSSetMethods
index|]
decl_stmt|;
comment|/// \brief The Objective-C NSNumber selectors used to create NSNumber literals.
name|mutable
name|Selector
name|NSNumberClassSelectors
index|[
name|NumNSNumberLiteralMethods
index|]
decl_stmt|;
name|mutable
name|Selector
name|NSNumberInstanceSelectors
index|[
name|NumNSNumberLiteralMethods
index|]
decl_stmt|;
name|mutable
name|Selector
name|objectForKeyedSubscriptSel
decl_stmt|,
name|objectAtIndexedSubscriptSel
decl_stmt|,
name|setObjectForKeyedSubscriptSel
decl_stmt|,
name|setObjectAtIndexedSubscriptSel
decl_stmt|,
name|isEqualSel
decl_stmt|;
name|mutable
name|IdentifierInfo
modifier|*
name|BOOLId
decl_stmt|,
modifier|*
name|NSIntegerId
decl_stmt|,
modifier|*
name|NSUIntegerId
decl_stmt|;
name|mutable
name|IdentifierInfo
modifier|*
name|NSASCIIStringEncodingId
decl_stmt|,
modifier|*
name|NSUTF8StringEncodingId
decl_stmt|;
block|}
empty_stmt|;
block|}
end_decl_stmt

begin_comment
comment|// end namespace clang
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|// LLVM_CLANG_AST_NSAPI_H
end_comment

end_unit

