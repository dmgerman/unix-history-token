begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Output generating routines for GDB CLI.     Copyright 1999, 2000, 2002, 2003 Free Software Foundation, Inc.     Contributed by Cygnus Solutions.    Written by Fernando Nasser for Cygnus.     This file is part of GDB.     This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2 of the License, or    (at your option) any later version.     This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software    Foundation, Inc., 59 Temple Place - Suite 330,    Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_include
include|#
directive|include
file|"ui-out.h"
end_include

begin_include
include|#
directive|include
file|"cli-out.h"
end_include

begin_include
include|#
directive|include
file|"gdb_string.h"
end_include

begin_include
include|#
directive|include
file|"gdb_assert.h"
end_include

begin_struct
struct|struct
name|ui_out_data
block|{
name|struct
name|ui_file
modifier|*
name|stream
decl_stmt|;
name|struct
name|ui_file
modifier|*
name|original_stream
decl_stmt|;
name|int
name|suppress_output
decl_stmt|;
block|}
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|ui_out_data
name|cli_out_data
typedef|;
end_typedef

begin_comment
comment|/* These are the CLI output functions */
end_comment

begin_function_decl
specifier|static
name|void
name|cli_table_begin
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|nbrofcols
parameter_list|,
name|int
name|nr_rows
parameter_list|,
specifier|const
name|char
modifier|*
name|tblid
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_table_body
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_table_end
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_table_header
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alig
parameter_list|,
specifier|const
name|char
modifier|*
name|col_name
parameter_list|,
specifier|const
name|char
modifier|*
name|colhdr
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_begin
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|enum
name|ui_out_type
name|type
parameter_list|,
name|int
name|level
parameter_list|,
specifier|const
name|char
modifier|*
name|lstid
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_end
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|enum
name|ui_out_type
name|type
parameter_list|,
name|int
name|level
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_field_int
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alig
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
name|int
name|value
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_field_skip
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alig
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_field_string
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alig
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
specifier|const
name|char
modifier|*
name|string
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_field_fmt
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|align
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
specifier|const
name|char
modifier|*
name|format
parameter_list|,
name|va_list
name|args
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_spaces
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|numspaces
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_text
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
specifier|const
name|char
modifier|*
name|string
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_message
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|verbosity
parameter_list|,
specifier|const
name|char
modifier|*
name|format
parameter_list|,
name|va_list
name|args
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_wrap_hint
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|char
modifier|*
name|identstring
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|cli_flush
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|cli_redirect
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|struct
name|ui_file
modifier|*
name|outstream
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* This is the CLI ui-out implementation functions vector */
end_comment

begin_comment
comment|/* FIXME: This can be initialized dynamically after default is set to    handle initial output in main.c */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|ui_out_impl
name|cli_ui_out_impl
init|=
block|{
name|cli_table_begin
block|,
name|cli_table_body
block|,
name|cli_table_end
block|,
name|cli_table_header
block|,
name|cli_begin
block|,
name|cli_end
block|,
name|cli_field_int
block|,
name|cli_field_skip
block|,
name|cli_field_string
block|,
name|cli_field_fmt
block|,
name|cli_spaces
block|,
name|cli_text
block|,
name|cli_message
block|,
name|cli_wrap_hint
block|,
name|cli_flush
block|,
name|cli_redirect
block|,
literal|0
block|,
comment|/* Does not need MI hacks (i.e. needs CLI hacks).  */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Prototypes for local functions */
end_comment

begin_function_decl
specifier|extern
name|void
name|_initialize_cli_out
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|field_separator
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|out_field_fmt
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
specifier|const
name|char
modifier|*
name|format
parameter_list|,
modifier|...
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* local variables */
end_comment

begin_comment
comment|/* (none yet) */
end_comment

begin_comment
comment|/* Mark beginning of a table */
end_comment

begin_function
name|void
name|cli_table_begin
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|nbrofcols
parameter_list|,
name|int
name|nr_rows
parameter_list|,
specifier|const
name|char
modifier|*
name|tblid
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|nr_rows
operator|==
literal|0
condition|)
name|data
operator|->
name|suppress_output
operator|=
literal|1
expr_stmt|;
else|else
comment|/* Only the table suppresses the output and, fortunately, a table        is not a recursive data structure. */
name|gdb_assert
argument_list|(
name|data
operator|->
name|suppress_output
operator|==
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Mark beginning of a table body */
end_comment

begin_function
name|void
name|cli_table_body
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
comment|/* first, close the table header line */
name|cli_text
argument_list|(
name|uiout
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Mark end of a table */
end_comment

begin_function
name|void
name|cli_table_end
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
name|data
operator|->
name|suppress_output
operator|=
literal|0
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Specify table header */
end_comment

begin_function
name|void
name|cli_table_header
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alignment
parameter_list|,
specifier|const
name|char
modifier|*
name|col_name
parameter_list|,
specifier|const
name|char
modifier|*
name|colhdr
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|cli_field_string
argument_list|(
name|uiout
argument_list|,
literal|0
argument_list|,
name|width
argument_list|,
name|alignment
argument_list|,
literal|0
argument_list|,
name|colhdr
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* Mark beginning of a list */
end_comment

begin_function
name|void
name|cli_begin
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|enum
name|ui_out_type
name|type
parameter_list|,
name|int
name|level
parameter_list|,
specifier|const
name|char
modifier|*
name|id
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
block|}
end_function

begin_comment
comment|/* Mark end of a list */
end_comment

begin_function
name|void
name|cli_end
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|enum
name|ui_out_type
name|type
parameter_list|,
name|int
name|level
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
block|}
end_function

begin_comment
comment|/* output an int field */
end_comment

begin_function
name|void
name|cli_field_int
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alignment
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
name|int
name|value
parameter_list|)
block|{
name|char
name|buffer
index|[
literal|20
index|]
decl_stmt|;
comment|/* FIXME: how many chars long a %d can become? */
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|sprintf
argument_list|(
name|buffer
argument_list|,
literal|"%d"
argument_list|,
name|value
argument_list|)
expr_stmt|;
name|cli_field_string
argument_list|(
name|uiout
argument_list|,
name|fldno
argument_list|,
name|width
argument_list|,
name|alignment
argument_list|,
name|fldname
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* used to ommit a field */
end_comment

begin_function
name|void
name|cli_field_skip
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|alignment
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|cli_field_string
argument_list|(
name|uiout
argument_list|,
name|fldno
argument_list|,
name|width
argument_list|,
name|alignment
argument_list|,
name|fldname
argument_list|,
literal|""
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* other specific cli_field_* end up here so alignment and field    separators are both handled by cli_field_string */
end_comment

begin_function
name|void
name|cli_field_string
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|align
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
specifier|const
name|char
modifier|*
name|string
parameter_list|)
block|{
name|int
name|before
init|=
literal|0
decl_stmt|;
name|int
name|after
init|=
literal|0
decl_stmt|;
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
if|if
condition|(
operator|(
name|align
operator|!=
name|ui_noalign
operator|)
operator|&&
name|string
condition|)
block|{
name|before
operator|=
name|width
operator|-
name|strlen
argument_list|(
name|string
argument_list|)
expr_stmt|;
if|if
condition|(
name|before
operator|<=
literal|0
condition|)
name|before
operator|=
literal|0
expr_stmt|;
else|else
block|{
if|if
condition|(
name|align
operator|==
name|ui_right
condition|)
name|after
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
name|align
operator|==
name|ui_left
condition|)
block|{
name|after
operator|=
name|before
expr_stmt|;
name|before
operator|=
literal|0
expr_stmt|;
block|}
else|else
comment|/* ui_center */
block|{
name|after
operator|=
name|before
operator|/
literal|2
expr_stmt|;
name|before
operator|-=
name|after
expr_stmt|;
block|}
block|}
block|}
if|if
condition|(
name|before
condition|)
name|ui_out_spaces
argument_list|(
name|uiout
argument_list|,
name|before
argument_list|)
expr_stmt|;
if|if
condition|(
name|string
condition|)
name|out_field_fmt
argument_list|(
name|uiout
argument_list|,
name|fldno
argument_list|,
name|fldname
argument_list|,
literal|"%s"
argument_list|,
name|string
argument_list|)
expr_stmt|;
if|if
condition|(
name|after
condition|)
name|ui_out_spaces
argument_list|(
name|uiout
argument_list|,
name|after
argument_list|)
expr_stmt|;
if|if
condition|(
name|align
operator|!=
name|ui_noalign
condition|)
name|field_separator
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/* This is the only field function that does not align */
end_comment

begin_function
name|void
name|cli_field_fmt
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
name|int
name|width
parameter_list|,
name|enum
name|ui_align
name|align
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
specifier|const
name|char
modifier|*
name|format
parameter_list|,
name|va_list
name|args
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|vfprintf_filtered
argument_list|(
name|data
operator|->
name|stream
argument_list|,
name|format
argument_list|,
name|args
argument_list|)
expr_stmt|;
if|if
condition|(
name|align
operator|!=
name|ui_noalign
condition|)
name|field_separator
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cli_spaces
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|numspaces
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|print_spaces_filtered
argument_list|(
name|numspaces
argument_list|,
name|data
operator|->
name|stream
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cli_text
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
specifier|const
name|char
modifier|*
name|string
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|fputs_filtered
argument_list|(
name|string
argument_list|,
name|data
operator|->
name|stream
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cli_message
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|verbosity
parameter_list|,
specifier|const
name|char
modifier|*
name|format
parameter_list|,
name|va_list
name|args
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
if|if
condition|(
name|ui_out_get_verblvl
argument_list|(
name|uiout
argument_list|)
operator|>=
name|verbosity
condition|)
name|vfprintf_unfiltered
argument_list|(
name|data
operator|->
name|stream
argument_list|,
name|format
argument_list|,
name|args
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cli_wrap_hint
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|char
modifier|*
name|identstring
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|data
operator|->
name|suppress_output
condition|)
return|return;
name|wrap_here
argument_list|(
name|identstring
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|cli_flush
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
name|gdb_flush
argument_list|(
name|data
operator|->
name|stream
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|int
name|cli_redirect
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|struct
name|ui_file
modifier|*
name|outstream
parameter_list|)
block|{
name|struct
name|ui_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
if|if
condition|(
name|outstream
operator|!=
name|NULL
condition|)
block|{
name|data
operator|->
name|original_stream
operator|=
name|data
operator|->
name|stream
expr_stmt|;
name|data
operator|->
name|stream
operator|=
name|outstream
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|data
operator|->
name|original_stream
operator|!=
name|NULL
condition|)
block|{
name|data
operator|->
name|stream
operator|=
name|data
operator|->
name|original_stream
expr_stmt|;
name|data
operator|->
name|original_stream
operator|=
name|NULL
expr_stmt|;
block|}
return|return
literal|0
return|;
block|}
end_function

begin_comment
comment|/* local functions */
end_comment

begin_comment
comment|/* Like cli_field_fmt, but takes a variable number of args    and makes a va_list and does not insert a separator */
end_comment

begin_comment
comment|/* VARARGS */
end_comment

begin_function
specifier|static
name|void
name|out_field_fmt
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|int
name|fldno
parameter_list|,
specifier|const
name|char
modifier|*
name|fldname
parameter_list|,
specifier|const
name|char
modifier|*
name|format
parameter_list|,
modifier|...
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
name|va_list
name|args
decl_stmt|;
name|va_start
argument_list|(
name|args
argument_list|,
name|format
argument_list|)
expr_stmt|;
name|vfprintf_filtered
argument_list|(
name|data
operator|->
name|stream
argument_list|,
name|format
argument_list|,
name|args
argument_list|)
expr_stmt|;
name|va_end
argument_list|(
name|args
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* access to ui_out format private members */
end_comment

begin_function
specifier|static
name|void
name|field_separator
parameter_list|(
name|void
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
name|fputc_filtered
argument_list|(
literal|' '
argument_list|,
name|data
operator|->
name|stream
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/* initalize private members at startup */
end_comment

begin_function
name|struct
name|ui_out
modifier|*
name|cli_out_new
parameter_list|(
name|struct
name|ui_file
modifier|*
name|stream
parameter_list|)
block|{
name|int
name|flags
init|=
name|ui_source_list
decl_stmt|;
name|cli_out_data
modifier|*
name|data
init|=
name|XMALLOC
argument_list|(
name|cli_out_data
argument_list|)
decl_stmt|;
name|data
operator|->
name|stream
operator|=
name|stream
expr_stmt|;
name|data
operator|->
name|original_stream
operator|=
name|NULL
expr_stmt|;
name|data
operator|->
name|suppress_output
operator|=
literal|0
expr_stmt|;
return|return
name|ui_out_new
argument_list|(
operator|&
name|cli_ui_out_impl
argument_list|,
name|data
argument_list|,
name|flags
argument_list|)
return|;
block|}
end_function

begin_function
name|struct
name|ui_file
modifier|*
name|cli_out_set_stream
parameter_list|(
name|struct
name|ui_out
modifier|*
name|uiout
parameter_list|,
name|struct
name|ui_file
modifier|*
name|stream
parameter_list|)
block|{
name|cli_out_data
modifier|*
name|data
init|=
name|ui_out_data
argument_list|(
name|uiout
argument_list|)
decl_stmt|;
name|struct
name|ui_file
modifier|*
name|old
init|=
name|data
operator|->
name|stream
decl_stmt|;
name|data
operator|->
name|stream
operator|=
name|stream
expr_stmt|;
return|return
name|old
return|;
block|}
end_function

begin_comment
comment|/* standard gdb initialization hook */
end_comment

begin_function
name|void
name|_initialize_cli_out
parameter_list|(
name|void
parameter_list|)
block|{
comment|/* nothing needs to be done */
block|}
end_function

end_unit

