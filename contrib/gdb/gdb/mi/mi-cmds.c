begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* MI Command Set for GDB, the GNU debugger.     Copyright 2000, 2001, 2003 Free Software Foundation, Inc.     Contributed by Cygnus Solutions (a Red Hat company).     This file is part of GDB.     This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2 of the License, or    (at your option) any later version.     This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software    Foundation, Inc., 59 Temple Place - Suite 330,    Boston, MA 02111-1307, USA.  */
end_comment

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_include
include|#
directive|include
file|"top.h"
end_include

begin_include
include|#
directive|include
file|"mi-cmds.h"
end_include

begin_include
include|#
directive|include
file|"gdb_string.h"
end_include

begin_function_decl
specifier|extern
name|void
name|_initialize_mi_cmds
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_struct_decl
struct_decl|struct
name|mi_cmd
struct_decl|;
end_struct_decl

begin_function_decl
specifier|static
name|struct
name|mi_cmd
modifier|*
modifier|*
name|lookup_table
parameter_list|(
specifier|const
name|char
modifier|*
name|command
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|void
name|build_table
parameter_list|(
name|struct
name|mi_cmd
modifier|*
name|commands
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
name|struct
name|mi_cmd
name|mi_cmds
index|[]
init|=
block|{
block|{
literal|"break-after"
block|,
block|{
literal|"ignore"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-catch"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-commands"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-condition"
block|,
block|{
literal|"cond"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-delete"
block|,
block|{
literal|"delete breakpoint"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-disable"
block|,
block|{
literal|"disable breakpoint"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-enable"
block|,
block|{
literal|"enable breakpoint"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-info"
block|,
block|{
literal|"info break"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-insert"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_break_insert
block|}
block|,
block|{
literal|"break-list"
block|,
block|{
literal|"info break"
block|, }
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"break-watch"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_break_watch
block|}
block|,
block|{
literal|"data-disassemble"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_disassemble
block|}
block|,
block|{
literal|"data-evaluate-expression"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_evaluate_expression
block|}
block|,
block|{
literal|"data-list-changed-registers"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_list_changed_registers
block|}
block|,
block|{
literal|"data-list-register-names"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_list_register_names
block|}
block|,
block|{
literal|"data-list-register-values"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_list_register_values
block|}
block|,
block|{
literal|"data-read-memory"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_read_memory
block|}
block|,
block|{
literal|"data-write-memory"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_write_memory
block|}
block|,
block|{
literal|"data-write-register-values"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_data_write_register_values
block|}
block|,
block|{
literal|"display-delete"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"display-disable"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"display-enable"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"display-insert"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"display-list"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"environment-cd"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_env_cd
block|}
block|,
block|{
literal|"environment-directory"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_env_dir
block|}
block|,
block|{
literal|"environment-path"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_env_path
block|}
block|,
block|{
literal|"environment-pwd"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_env_pwd
block|}
block|,
block|{
literal|"exec-abort"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"exec-arguments"
block|,
block|{
literal|"set args"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"exec-continue"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_continue
block|}
block|,
block|{
literal|"exec-finish"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_finish
block|}
block|,
block|{
literal|"exec-interrupt"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_interrupt
block|}
block|,
block|{
literal|"exec-next"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_next
block|}
block|,
block|{
literal|"exec-next-instruction"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_next_instruction
block|}
block|,
block|{
literal|"exec-return"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_return
block|}
block|,
block|{
literal|"exec-run"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_run
block|}
block|,
block|{
literal|"exec-show-arguments"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"exec-signal"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"exec-step"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_step
block|}
block|,
block|{
literal|"exec-step-instruction"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_step_instruction
block|}
block|,
block|{
literal|"exec-until"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_exec_until
block|}
block|,
block|{
literal|"file-clear"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-exec-and-symbols"
block|,
block|{
literal|"file"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-exec-file"
block|,
block|{
literal|"exec-file"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-list-exec-sections"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-list-exec-source-file"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_file_list_exec_source_file
block|}
block|,
block|{
literal|"file-list-exec-source-files"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-list-shared-libraries"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-list-symbol-files"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"file-symbol-file"
block|,
block|{
literal|"symbol-file"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"gdb-complete"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"gdb-exit"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_gdb_exit
block|}
block|,
block|{
literal|"gdb-set"
block|,
block|{
literal|"set"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"gdb-show"
block|,
block|{
literal|"show"
block|,
literal|1
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"gdb-source"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"gdb-version"
block|,
block|{
literal|"show version"
block|,
literal|0
block|}
block|,
literal|0
block|}
block|,
block|{
literal|"interpreter-exec"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_interpreter_exec
block|}
block|,
block|{
literal|"kod-info"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"kod-list"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"kod-list-object-types"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"kod-show"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-auto"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-list-mapping-state"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-list-overlays"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-map"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-off"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-on"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"overlay-unmap"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"signal-handle"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"signal-list-handle-actions"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"signal-list-signal-types"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"stack-info-depth"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_stack_info_depth
block|}
block|,
block|{
literal|"stack-info-frame"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"stack-list-arguments"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_stack_list_args
block|}
block|,
block|{
literal|"stack-list-exception-handlers"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"stack-list-frames"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_stack_list_frames
block|}
block|,
block|{
literal|"stack-list-locals"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_stack_list_locals
block|}
block|,
block|{
literal|"stack-select-frame"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_stack_select_frame
block|}
block|,
block|{
literal|"symbol-info-address"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-info-file"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-info-function"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-info-line"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-info-symbol"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-list-functions"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-list-lines"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_symbol_list_lines
block|}
block|,
block|{
literal|"symbol-list-types"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-list-variables"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-locate"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"symbol-type"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-attach"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-compare-sections"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-detach"
block|,
block|{
literal|"detach"
block|,
literal|0
block|}
block|,
literal|0
block|}
block|,
block|{
literal|"target-disconnect"
block|,
block|{
literal|"disconnect"
block|,
literal|0
block|}
block|,
literal|0
block|}
block|,
block|{
literal|"target-download"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_target_download
block|}
block|,
block|{
literal|"target-exec-status"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-list-available-targets"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-list-current-targets"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-list-parameters"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"target-select"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|mi_cmd_target_select
block|}
block|,
block|{
literal|"thread-info"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"thread-list-all-threads"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"thread-list-ids"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_thread_list_ids
block|}
block|,
block|{
literal|"thread-select"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_thread_select
block|}
block|,
block|{
literal|"trace-actions"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-delete"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-disable"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-dump"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-enable"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-exists"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-find"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-frame-number"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-info"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-insert"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-list"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-pass-count"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-save"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-start"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"trace-stop"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
name|NULL
block|,
name|NULL
block|}
block|,
block|{
literal|"var-assign"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_assign
block|}
block|,
block|{
literal|"var-create"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_create
block|}
block|,
block|{
literal|"var-delete"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_delete
block|}
block|,
block|{
literal|"var-evaluate-expression"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_evaluate_expression
block|}
block|,
block|{
literal|"var-info-expression"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_info_expression
block|}
block|,
block|{
literal|"var-info-num-children"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_info_num_children
block|}
block|,
block|{
literal|"var-info-type"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_info_type
block|}
block|,
block|{
literal|"var-list-children"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_list_children
block|}
block|,
block|{
literal|"var-set-format"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_set_format
block|}
block|,
block|{
literal|"var-show-attributes"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_show_attributes
block|}
block|,
block|{
literal|"var-show-format"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_show_format
block|}
block|,
block|{
literal|"var-update"
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|,
literal|0
block|,
name|mi_cmd_var_update
block|}
block|,
block|{
name|NULL
block|, }
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Pointer to the mi command table (built at run time) */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|mi_cmd
modifier|*
modifier|*
name|mi_table
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* A prime large enough to accomodate the entire command table */
end_comment

begin_enum
enum|enum
block|{
name|MI_TABLE_SIZE
init|=
literal|227
block|}
enum|;
end_enum

begin_comment
comment|/* Exported function used to obtain info from the table */
end_comment

begin_function
name|struct
name|mi_cmd
modifier|*
name|mi_lookup
parameter_list|(
specifier|const
name|char
modifier|*
name|command
parameter_list|)
block|{
return|return
operator|*
name|lookup_table
argument_list|(
name|command
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* stat collecting */
end_comment

begin_struct
struct|struct
name|mi_cmd_stats
block|{
name|int
name|hit
decl_stmt|;
name|int
name|miss
decl_stmt|;
name|int
name|rehash
decl_stmt|;
block|}
struct|;
end_struct

begin_decl_stmt
name|struct
name|mi_cmd_stats
name|stats
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* our lookup function */
end_comment

begin_function
specifier|static
name|struct
name|mi_cmd
modifier|*
modifier|*
name|lookup_table
parameter_list|(
specifier|const
name|char
modifier|*
name|command
parameter_list|)
block|{
specifier|const
name|char
modifier|*
name|chp
decl_stmt|;
name|unsigned
name|int
name|index
init|=
literal|0
decl_stmt|;
comment|/* compute our hash */
for|for
control|(
name|chp
operator|=
name|command
init|;
operator|*
name|chp
condition|;
name|chp
operator|++
control|)
block|{
comment|/* some what arbitrary */
name|index
operator|=
operator|(
operator|(
name|index
operator|<<
literal|6
operator|)
operator|+
operator|(
name|unsigned
name|int
operator|)
operator|*
name|chp
operator|)
operator|%
name|MI_TABLE_SIZE
expr_stmt|;
block|}
comment|/* look it up */
while|while
condition|(
literal|1
condition|)
block|{
name|struct
name|mi_cmd
modifier|*
modifier|*
name|entry
init|=
operator|&
name|mi_table
index|[
name|index
index|]
decl_stmt|;
if|if
condition|(
operator|(
operator|*
name|entry
operator|)
operator|==
literal|0
condition|)
block|{
comment|/* not found, return pointer to next free. */
name|stats
operator|.
name|miss
operator|++
expr_stmt|;
return|return
name|entry
return|;
block|}
if|if
condition|(
name|strcmp
argument_list|(
name|command
argument_list|,
operator|(
operator|*
name|entry
operator|)
operator|->
name|name
argument_list|)
operator|==
literal|0
condition|)
block|{
name|stats
operator|.
name|hit
operator|++
expr_stmt|;
return|return
name|entry
return|;
comment|/* found */
block|}
name|index
operator|=
operator|(
name|index
operator|+
literal|1
operator|)
operator|%
name|MI_TABLE_SIZE
expr_stmt|;
name|stats
operator|.
name|rehash
operator|++
expr_stmt|;
block|}
block|}
end_function

begin_function
specifier|static
name|void
name|build_table
parameter_list|(
name|struct
name|mi_cmd
modifier|*
name|commands
parameter_list|)
block|{
name|int
name|nr_rehash
init|=
literal|0
decl_stmt|;
name|int
name|nr_entries
init|=
literal|0
decl_stmt|;
name|struct
name|mi_cmd
modifier|*
name|command
decl_stmt|;
name|int
name|sizeof_table
init|=
sizeof|sizeof
argument_list|(
expr|struct
name|mi_cmd
operator|*
operator|*
argument_list|)
operator|*
name|MI_TABLE_SIZE
decl_stmt|;
name|mi_table
operator|=
name|xmalloc
argument_list|(
name|sizeof_table
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|mi_table
argument_list|,
literal|0
argument_list|,
name|sizeof_table
argument_list|)
expr_stmt|;
for|for
control|(
name|command
operator|=
name|commands
init|;
name|command
operator|->
name|name
operator|!=
literal|0
condition|;
name|command
operator|++
control|)
block|{
name|struct
name|mi_cmd
modifier|*
modifier|*
name|entry
init|=
name|lookup_table
argument_list|(
name|command
operator|->
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
operator|*
name|entry
condition|)
name|internal_error
argument_list|(
name|__FILE__
argument_list|,
name|__LINE__
argument_list|,
literal|"command `%s' appears to be duplicated"
argument_list|,
name|command
operator|->
name|name
argument_list|)
expr_stmt|;
operator|*
name|entry
operator|=
name|command
expr_stmt|;
if|if
condition|(
literal|0
condition|)
block|{
name|fprintf_unfiltered
argument_list|(
name|gdb_stdlog
argument_list|,
literal|"%-30s %2d\n"
argument_list|,
name|command
operator|->
name|name
argument_list|,
name|stats
operator|.
name|rehash
operator|-
name|nr_rehash
argument_list|)
expr_stmt|;
block|}
name|nr_entries
operator|++
expr_stmt|;
name|nr_rehash
operator|=
name|stats
operator|.
name|rehash
expr_stmt|;
block|}
if|if
condition|(
literal|0
condition|)
block|{
name|fprintf_filtered
argument_list|(
name|gdb_stdlog
argument_list|,
literal|"Average %3.1f\n"
argument_list|,
operator|(
name|double
operator|)
name|nr_rehash
operator|/
operator|(
name|double
operator|)
name|nr_entries
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|_initialize_mi_cmds
parameter_list|(
name|void
parameter_list|)
block|{
name|build_table
argument_list|(
name|mi_cmds
argument_list|)
expr_stmt|;
name|memset
argument_list|(
operator|&
name|stats
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|stats
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

