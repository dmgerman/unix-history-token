begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Oasys object format header file for BFD.    Contributed by Cygnus Support.  */
end_comment

begin_define
define|#
directive|define
name|OASYS_MAX_SEC_COUNT
value|16
end_define

begin_comment
comment|/* **** */
end_comment

begin_typedef
typedef|typedef
struct|struct
name|oasys_archive_header
block|{
name|unsigned
name|int
name|version
decl_stmt|;
name|char
name|create_date
index|[
literal|12
index|]
decl_stmt|;
name|char
name|revision_date
index|[
literal|12
index|]
decl_stmt|;
name|unsigned
name|int
name|mod_count
decl_stmt|;
name|file_ptr
name|mod_tbl_offset
decl_stmt|;
name|unsigned
name|int
name|sym_tbl_size
decl_stmt|;
name|unsigned
name|int
name|sym_count
decl_stmt|;
name|file_ptr
name|sym_tbl_offset
decl_stmt|;
name|unsigned
name|int
name|xref_count
decl_stmt|;
name|file_ptr
name|xref_lst_offset
decl_stmt|;
block|}
name|oasys_archive_header_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_extarchive_header
block|{
name|bfd_byte
name|version
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|create_date
index|[
literal|12
index|]
decl_stmt|;
name|bfd_byte
name|revision_date
index|[
literal|12
index|]
decl_stmt|;
name|bfd_byte
name|mod_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|mod_tbl_offset
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|sym_tbl_size
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|sym_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|sym_tbl_offset
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|xref_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|xref_lst_offset
index|[
literal|4
index|]
decl_stmt|;
block|}
name|oasys_extarchive_header_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_module_table
block|{
name|int
name|mod_number
decl_stmt|;
name|char
name|mod_date
index|[
literal|12
index|]
decl_stmt|;
name|unsigned
name|int
name|mod_size
decl_stmt|;
name|unsigned
name|int
name|dep_count
decl_stmt|;
name|unsigned
name|int
name|depee_count
decl_stmt|;
name|file_ptr
name|file_offset
decl_stmt|;
name|unsigned
name|int
name|sect_count
decl_stmt|;
name|char
modifier|*
name|module_name
decl_stmt|;
name|unsigned
name|int
name|module_name_size
decl_stmt|;
block|}
name|oasys_module_table_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_extmodule_table_a
block|{
name|bfd_byte
name|mod_number
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|mod_date
index|[
literal|12
index|]
decl_stmt|;
name|bfd_byte
name|mod_size
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|dep_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|depee_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|sect_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|file_offset
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|mod_name
index|[
literal|32
index|]
decl_stmt|;
block|}
name|oasys_extmodule_table_type_a_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_extmodule_table_b
block|{
name|bfd_byte
name|mod_number
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|mod_date
index|[
literal|12
index|]
decl_stmt|;
name|bfd_byte
name|mod_size
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|dep_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|depee_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|sect_count
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|file_offset
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|mod_name_length
index|[
literal|4
index|]
decl_stmt|;
block|}
name|oasys_extmodule_table_type_b_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
enum|enum
name|oasys_record
block|{
name|oasys_record_is_end_enum
init|=
literal|0
block|,
name|oasys_record_is_data_enum
init|=
literal|1
block|,
name|oasys_record_is_symbol_enum
init|=
literal|2
block|,
name|oasys_record_is_header_enum
init|=
literal|3
block|,
name|oasys_record_is_named_section_enum
init|=
literal|4
block|,
name|oasys_record_is_com_enum
init|=
literal|5
block|,
name|oasys_record_is_debug_enum
init|=
literal|6
block|,
name|oasys_record_is_section_enum
init|=
literal|7
block|,
name|oasys_record_is_debug_file_enum
init|=
literal|8
block|,
name|oasys_record_is_module_enum
init|=
literal|9
block|,
name|oasys_record_is_local_enum
init|=
literal|10
block|}
name|oasys_record_enum_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_record_header
block|{
name|unsigned
name|char
name|length
decl_stmt|;
name|unsigned
name|char
name|check_sum
decl_stmt|;
name|unsigned
name|char
name|type
decl_stmt|;
name|unsigned
name|char
name|fill
decl_stmt|;
block|}
name|oasys_record_header_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_data_record
block|{
name|oasys_record_header_type
name|header
decl_stmt|;
name|unsigned
name|char
name|relb
decl_stmt|;
name|bfd_byte
name|addr
index|[
literal|4
index|]
decl_stmt|;
comment|/* maximum total size of data record is 255 bytes */
name|bfd_byte
name|data
index|[
literal|246
index|]
decl_stmt|;
block|}
name|oasys_data_record_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_header_record
block|{
name|oasys_record_header_type
name|header
decl_stmt|;
name|unsigned
name|char
name|version_number
decl_stmt|;
name|unsigned
name|char
name|rev_number
decl_stmt|;
name|char
name|module_name
index|[
literal|26
operator|-
literal|6
index|]
decl_stmt|;
name|char
name|description
index|[
literal|64
operator|-
literal|26
index|]
decl_stmt|;
block|}
name|oasys_header_record_type
typedef|;
end_typedef

begin_define
define|#
directive|define
name|OASYS_VERSION_NUMBER
value|0
end_define

begin_define
define|#
directive|define
name|OASYS_REV_NUMBER
value|0
end_define

begin_typedef
typedef|typedef
struct|struct
name|oasys_symbol_record
block|{
name|oasys_record_header_type
name|header
decl_stmt|;
name|unsigned
name|char
name|relb
decl_stmt|;
name|bfd_byte
name|value
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|refno
index|[
literal|2
index|]
decl_stmt|;
name|char
name|name
index|[
literal|64
index|]
decl_stmt|;
block|}
name|oasys_symbol_record_type
typedef|;
end_typedef

begin_define
define|#
directive|define
name|RELOCATION_PCREL_BIT
value|0x80
end_define

begin_define
define|#
directive|define
name|RELOCATION_32BIT_BIT
value|0x40
end_define

begin_define
define|#
directive|define
name|RELOCATION_TYPE_BITS
value|0x30
end_define

begin_define
define|#
directive|define
name|RELOCATION_TYPE_ABS
value|0x00
end_define

begin_define
define|#
directive|define
name|RELOCATION_TYPE_REL
value|0x10
end_define

begin_define
define|#
directive|define
name|RELOCATION_TYPE_UND
value|0x20
end_define

begin_define
define|#
directive|define
name|RELOCATION_TYPE_COM
value|0x30
end_define

begin_define
define|#
directive|define
name|RELOCATION_SECT_BITS
value|0x0f
end_define

begin_typedef
typedef|typedef
struct|struct
name|oasys_section_record
block|{
name|oasys_record_header_type
name|header
decl_stmt|;
name|unsigned
name|char
name|relb
decl_stmt|;
name|bfd_byte
name|value
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|vma
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|fill
index|[
literal|3
index|]
decl_stmt|;
block|}
name|oasys_section_record_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|oasys_end_record
block|{
name|oasys_record_header_type
name|header
decl_stmt|;
name|unsigned
name|char
name|relb
decl_stmt|;
name|bfd_byte
name|entry
index|[
literal|4
index|]
decl_stmt|;
name|bfd_byte
name|fill
index|[
literal|2
index|]
decl_stmt|;
name|bfd_byte
name|zero
decl_stmt|;
block|}
name|oasys_end_record_type
typedef|;
end_typedef

begin_typedef
typedef|typedef
union|union
name|oasys_record_union
block|{
name|oasys_record_header_type
name|header
decl_stmt|;
name|oasys_data_record_type
name|data
decl_stmt|;
name|oasys_section_record_type
name|section
decl_stmt|;
name|oasys_symbol_record_type
name|symbol
decl_stmt|;
name|oasys_header_record_type
name|first
decl_stmt|;
name|oasys_end_record_type
name|end
decl_stmt|;
name|bfd_byte
name|pad
index|[
literal|256
index|]
decl_stmt|;
block|}
name|oasys_record_union_type
typedef|;
end_typedef

end_unit

