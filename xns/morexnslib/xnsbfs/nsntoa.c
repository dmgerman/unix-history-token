begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* $Header: nsntoa.c,v 1.1 86/06/27 13:14:36 jqj Exp $ */
end_comment

begin_comment
comment|/* $Log:	nsntoa.c,v $  * Revision 1.1  86/06/27  13:14:36  jqj  * Initial revision  *   */
end_comment

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<netns/ns.h>
end_include

begin_comment
comment|/*  * Convert network-format ns address to ascii.  * This routine should be part of library, but just incase it isn't we  * have it here.  */
end_comment

begin_function
name|char
modifier|*
name|ns_ntoa
parameter_list|(
name|addr
parameter_list|)
name|struct
name|ns_addr
name|addr
decl_stmt|;
block|{
specifier|static
name|char
name|b
index|[
literal|25
index|]
decl_stmt|;
name|char
name|temp
index|[
literal|15
index|]
decl_stmt|;
name|char
modifier|*
name|t
decl_stmt|;
name|union
name|ns_net_u
name|net_u
decl_stmt|;
comment|/* net */
name|net_u
operator|.
name|net_e
operator|=
name|addr
operator|.
name|x_net
expr_stmt|;
comment|/* build a host number */
name|sprintf
argument_list|(
name|temp
argument_list|,
literal|"%02X%02X%02X%02X%02X%02X"
argument_list|,
name|addr
operator|.
name|x_host
operator|.
name|c_host
index|[
literal|0
index|]
argument_list|,
name|addr
operator|.
name|x_host
operator|.
name|c_host
index|[
literal|1
index|]
argument_list|,
name|addr
operator|.
name|x_host
operator|.
name|c_host
index|[
literal|2
index|]
argument_list|,
name|addr
operator|.
name|x_host
operator|.
name|c_host
index|[
literal|3
index|]
argument_list|,
name|addr
operator|.
name|x_host
operator|.
name|c_host
index|[
literal|4
index|]
argument_list|,
name|addr
operator|.
name|x_host
operator|.
name|c_host
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
comment|/* strip leading zeros */
for|for
control|(
name|t
operator|=
name|temp
init|;
operator|*
name|t
operator|==
literal|'0'
condition|;
name|t
operator|++
control|)
empty_stmt|;
name|sprintf
argument_list|(
name|b
argument_list|,
literal|"%lXH.%sH"
argument_list|,
name|ntohl
argument_list|(
name|net_u
operator|.
name|long_e
argument_list|)
argument_list|,
name|t
argument_list|)
expr_stmt|;
return|return
operator|(
name|b
operator|)
return|;
block|}
end_function

end_unit

