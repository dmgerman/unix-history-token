begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* This work is copyrighted. See COPYRIGHT.OLD& COPYRIGHT.NEW for   * *  details. If they are missing then this copy is in violation of    * *  the copyright conditions.                                        */
end_comment

begin_comment
comment|/* **	lib_box.c ** **	line drawing routines: **	wborder() **	whline() **	wvline() ** */
end_comment

begin_include
include|#
directive|include
file|"curses.priv.h"
end_include

begin_function
name|int
name|wborder
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|,
name|chtype
name|ls
parameter_list|,
name|chtype
name|rs
parameter_list|,
name|chtype
name|ts
parameter_list|,
name|chtype
name|bs
parameter_list|,
name|chtype
name|tl
parameter_list|,
name|chtype
name|tr
parameter_list|,
name|chtype
name|bl
parameter_list|,
name|chtype
name|br
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|int
name|endx
decl_stmt|,
name|endy
decl_stmt|;
name|T
argument_list|(
operator|(
literal|"wborder() called"
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|ls
operator|==
literal|0
condition|)
name|ls
operator|=
name|ACS_VLINE
expr_stmt|;
if|if
condition|(
name|rs
operator|==
literal|0
condition|)
name|rs
operator|=
name|ACS_VLINE
expr_stmt|;
if|if
condition|(
name|ts
operator|==
literal|0
condition|)
name|ts
operator|=
name|ACS_HLINE
expr_stmt|;
if|if
condition|(
name|bs
operator|==
literal|0
condition|)
name|bs
operator|=
name|ACS_HLINE
expr_stmt|;
if|if
condition|(
name|tl
operator|==
literal|0
condition|)
name|tl
operator|=
name|ACS_ULCORNER
expr_stmt|;
if|if
condition|(
name|tr
operator|==
literal|0
condition|)
name|tr
operator|=
name|ACS_URCORNER
expr_stmt|;
if|if
condition|(
name|bl
operator|==
literal|0
condition|)
name|bl
operator|=
name|ACS_LLCORNER
expr_stmt|;
if|if
condition|(
name|br
operator|==
literal|0
condition|)
name|br
operator|=
name|ACS_LRCORNER
expr_stmt|;
name|ls
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|rs
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|ts
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|bs
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|tl
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|tr
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|bl
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|br
operator||=
name|win
operator|->
name|_attrs
expr_stmt|;
name|T
argument_list|(
operator|(
literal|"using %x, %x, %x, %x, %x, %x, %x, %x"
operator|,
name|ls
operator|,
name|rs
operator|,
name|ts
operator|,
name|bs
operator|,
name|tl
operator|,
name|tr
operator|,
name|bl
operator|,
name|br
operator|)
argument_list|)
expr_stmt|;
name|endx
operator|=
name|win
operator|->
name|_maxx
expr_stmt|;
name|endy
operator|=
name|win
operator|->
name|_maxy
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<=
name|endx
condition|;
name|i
operator|++
control|)
block|{
name|win
operator|->
name|_line
index|[
literal|0
index|]
index|[
name|i
index|]
operator|=
name|ts
expr_stmt|;
name|win
operator|->
name|_line
index|[
name|endy
index|]
index|[
name|i
index|]
operator|=
name|bs
expr_stmt|;
block|}
name|win
operator|->
name|_firstchar
index|[
name|endy
index|]
operator|=
name|win
operator|->
name|_firstchar
index|[
literal|0
index|]
operator|=
literal|0
expr_stmt|;
name|win
operator|->
name|_lastchar
index|[
name|endy
index|]
operator|=
name|win
operator|->
name|_lastchar
index|[
literal|0
index|]
operator|=
name|endx
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<=
name|endy
condition|;
name|i
operator|++
control|)
block|{
name|win
operator|->
name|_line
index|[
name|i
index|]
index|[
literal|0
index|]
operator|=
name|ls
expr_stmt|;
name|win
operator|->
name|_line
index|[
name|i
index|]
index|[
name|endx
index|]
operator|=
name|rs
expr_stmt|;
name|win
operator|->
name|_firstchar
index|[
name|i
index|]
operator|=
literal|0
expr_stmt|;
name|win
operator|->
name|_lastchar
index|[
name|i
index|]
operator|=
name|endx
expr_stmt|;
block|}
name|win
operator|->
name|_line
index|[
literal|0
index|]
index|[
literal|0
index|]
operator|=
name|tl
expr_stmt|;
name|win
operator|->
name|_line
index|[
literal|0
index|]
index|[
name|endx
index|]
operator|=
name|tr
expr_stmt|;
name|win
operator|->
name|_line
index|[
name|endy
index|]
index|[
literal|0
index|]
operator|=
name|bl
expr_stmt|;
name|win
operator|->
name|_line
index|[
name|endy
index|]
index|[
name|endx
index|]
operator|=
name|br
expr_stmt|;
if|#
directive|if
literal|0
block|if (! win->_scroll&&  (win->_flags& _SCROLLWIN)) 	    fp[0] = fp[endx] = lp[0] = lp[endx] = ' ';
endif|#
directive|endif
return|return
name|OK
return|;
block|}
end_function

begin_function
name|int
name|whline
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|,
name|chtype
name|ch
parameter_list|,
name|int
name|n
parameter_list|)
block|{
name|int
name|line
decl_stmt|;
name|int
name|start
decl_stmt|;
name|int
name|end
decl_stmt|;
name|T
argument_list|(
operator|(
literal|"whline(%x,%x,%d) called"
operator|,
name|win
operator|,
name|ch
operator|,
name|n
operator|)
argument_list|)
expr_stmt|;
name|line
operator|=
name|win
operator|->
name|_cury
expr_stmt|;
name|start
operator|=
name|win
operator|->
name|_curx
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|n
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|end
operator|>
name|win
operator|->
name|_maxx
condition|)
name|end
operator|=
name|win
operator|->
name|_maxx
expr_stmt|;
if|if
condition|(
name|win
operator|->
name|_firstchar
index|[
name|line
index|]
operator|==
name|_NOCHANGE
operator|||
name|win
operator|->
name|_firstchar
index|[
name|line
index|]
operator|>
name|start
condition|)
name|win
operator|->
name|_firstchar
index|[
name|line
index|]
operator|=
name|start
expr_stmt|;
if|if
condition|(
name|win
operator|->
name|_lastchar
index|[
name|line
index|]
operator|==
name|_NOCHANGE
operator|||
name|win
operator|->
name|_lastchar
index|[
name|line
index|]
operator|<
name|start
condition|)
name|win
operator|->
name|_lastchar
index|[
name|line
index|]
operator|=
name|end
expr_stmt|;
if|if
condition|(
name|ch
operator|==
literal|0
condition|)
name|ch
operator|=
name|ACS_HLINE
expr_stmt|;
while|while
condition|(
name|end
operator|>=
name|start
condition|)
block|{
name|win
operator|->
name|_line
index|[
name|line
index|]
index|[
name|end
index|]
operator|=
name|ch
operator||
name|win
operator|->
name|_attrs
expr_stmt|;
name|end
operator|--
expr_stmt|;
block|}
return|return
name|OK
return|;
block|}
end_function

begin_function
name|int
name|wvline
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|,
name|chtype
name|ch
parameter_list|,
name|int
name|n
parameter_list|)
block|{
name|int
name|row
decl_stmt|,
name|col
decl_stmt|;
name|int
name|end
decl_stmt|;
name|T
argument_list|(
operator|(
literal|"wvline(%x,%x,%d) called"
operator|,
name|win
operator|,
name|ch
operator|,
name|n
operator|)
argument_list|)
expr_stmt|;
name|row
operator|=
name|win
operator|->
name|_cury
expr_stmt|;
name|col
operator|=
name|win
operator|->
name|_curx
expr_stmt|;
name|end
operator|=
name|row
operator|+
name|n
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|end
operator|>
name|win
operator|->
name|_maxy
condition|)
name|end
operator|=
name|win
operator|->
name|_maxy
expr_stmt|;
if|if
condition|(
name|ch
operator|==
literal|0
condition|)
name|ch
operator|=
name|ACS_VLINE
expr_stmt|;
while|while
condition|(
name|end
operator|>=
name|row
condition|)
block|{
name|win
operator|->
name|_line
index|[
name|end
index|]
index|[
name|col
index|]
operator|=
name|ch
operator||
name|win
operator|->
name|_attrs
expr_stmt|;
if|if
condition|(
name|win
operator|->
name|_firstchar
index|[
name|end
index|]
operator|==
name|_NOCHANGE
operator|||
name|win
operator|->
name|_firstchar
index|[
name|end
index|]
operator|>
name|col
condition|)
name|win
operator|->
name|_firstchar
index|[
name|end
index|]
operator|=
name|col
expr_stmt|;
if|if
condition|(
name|win
operator|->
name|_lastchar
index|[
name|end
index|]
operator|==
name|_NOCHANGE
operator|||
name|win
operator|->
name|_lastchar
index|[
name|end
index|]
operator|<
name|col
condition|)
name|win
operator|->
name|_lastchar
index|[
name|end
index|]
operator|=
name|col
expr_stmt|;
name|end
operator|--
expr_stmt|;
block|}
return|return
name|OK
return|;
block|}
end_function

end_unit

