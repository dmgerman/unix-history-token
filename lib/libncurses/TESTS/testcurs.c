begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  *  * This is a test program for the PDCurses screen package for IBM PC type  * machines.  * This program was written by John Burnell (johnb@kea.am.dsir.govt.nz)  *  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<ncurses.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function_decl
name|void
name|inputTest
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|scrollTest
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|introTest
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|initTest
parameter_list|(
name|WINDOW
modifier|*
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|outputTest
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|padTest
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|resizeTest
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|display_menu
parameter_list|(
name|int
parameter_list|,
name|int
parameter_list|)
function_decl|;
end_function_decl

begin_else
else|#
directive|else
end_else

begin_function_decl
name|void
name|inputTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|scrollTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|introTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|int
name|initTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|outputTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|padTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|resizeTest
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|display_menu
parameter_list|()
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_struct
struct|struct
name|commands
block|{
name|char
modifier|*
name|text
decl_stmt|;
ifdef|#
directive|ifdef
name|__STDC__
name|void
function_decl|(
modifier|*
name|function
function_decl|)
parameter_list|(
name|WINDOW
modifier|*
parameter_list|)
function_decl|;
else|#
directive|else
name|void
function_decl|(
modifier|*
name|function
function_decl|)
parameter_list|()
function_decl|;
endif|#
directive|endif
block|}
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|commands
name|COMMAND
typedef|;
end_typedef

begin_define
define|#
directive|define
name|MAX_OPTIONS
value|6
end_define

begin_decl_stmt
name|COMMAND
name|command
index|[
name|MAX_OPTIONS
index|]
init|=
block|{
block|{
literal|"Intro Test"
block|,
name|introTest
block|}
block|,
block|{
literal|"Pad Test"
block|,
name|padTest
block|}
block|,
block|{
literal|"Resize Test"
block|,
name|resizeTest
block|}
block|,
block|{
literal|"Scroll Test"
block|,
name|scrollTest
block|}
block|,
block|{
literal|"Input Test"
block|,
name|inputTest
block|}
block|,
block|{
literal|"Output Test"
block|,
name|outputTest
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|width
decl_stmt|,
name|height
decl_stmt|;
end_decl_stmt

begin_function
name|main
parameter_list|()
block|{
name|WINDOW
modifier|*
name|win
decl_stmt|;
name|int
name|key
decl_stmt|,
name|old_option
init|=
operator|(
operator|-
literal|1
operator|)
decl_stmt|,
name|new_option
init|=
literal|0
decl_stmt|;
name|bool
name|quit
init|=
name|FALSE
decl_stmt|;
ifdef|#
directive|ifdef
name|PDCDEBUG
name|PDC_debug
argument_list|(
literal|"testcurs started\n"
argument_list|)
expr_stmt|;
endif|#
directive|endif
if|if
condition|(
operator|!
name|initTest
argument_list|(
operator|&
name|win
argument_list|)
condition|)
block|{
return|return
literal|1
return|;
block|}
ifdef|#
directive|ifdef
name|A_COLOR
if|if
condition|(
name|has_colors
argument_list|()
condition|)
block|{
name|init_pair
argument_list|(
literal|1
argument_list|,
name|COLOR_WHITE
argument_list|,
name|COLOR_BLUE
argument_list|)
expr_stmt|;
name|wattrset
argument_list|(
name|win
argument_list|,
name|COLOR_PAIR
argument_list|(
literal|1
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|wattrset
argument_list|(
name|win
argument_list|,
name|A_REVERSE
argument_list|)
expr_stmt|;
else|#
directive|else
name|wattrset
argument_list|(
name|win
argument_list|,
name|A_REVERSE
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|erase
argument_list|()
expr_stmt|;
name|display_menu
argument_list|(
name|old_option
argument_list|,
name|new_option
argument_list|)
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
name|noecho
argument_list|()
expr_stmt|;
name|keypad
argument_list|(
name|stdscr
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|raw
argument_list|()
expr_stmt|;
name|key
operator|=
name|getch
argument_list|()
expr_stmt|;
switch|switch
condition|(
name|key
condition|)
block|{
case|case
literal|10
case|:
case|case
literal|13
case|:
case|case
name|KEY_ENTER
case|:
name|erase
argument_list|()
expr_stmt|;
name|refresh
argument_list|()
expr_stmt|;
operator|(
operator|*
name|command
index|[
name|new_option
index|]
operator|.
name|function
operator|)
operator|(
name|win
operator|)
expr_stmt|;
name|erase
argument_list|()
expr_stmt|;
name|display_menu
argument_list|(
name|old_option
argument_list|,
name|new_option
argument_list|)
expr_stmt|;
break|break;
case|case
name|KEY_UP
case|:
name|new_option
operator|=
operator|(
name|new_option
operator|==
literal|0
operator|)
condition|?
name|new_option
else|:
name|new_option
operator|-
literal|1
expr_stmt|;
name|display_menu
argument_list|(
name|old_option
argument_list|,
name|new_option
argument_list|)
expr_stmt|;
break|break;
case|case
name|KEY_DOWN
case|:
name|new_option
operator|=
operator|(
name|new_option
operator|==
name|MAX_OPTIONS
operator|-
literal|1
operator|)
condition|?
name|new_option
else|:
name|new_option
operator|+
literal|1
expr_stmt|;
name|display_menu
argument_list|(
name|old_option
argument_list|,
name|new_option
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'Q'
case|:
case|case
literal|'q'
case|:
name|quit
operator|=
name|TRUE
expr_stmt|;
break|break;
default|default:
break|break;
block|}
if|if
condition|(
name|quit
operator|==
name|TRUE
condition|)
break|break;
block|}
name|delwin
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|endwin
argument_list|()
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|Continue
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|)
else|#
directive|else
function|void Continue
parameter_list|(
name|win
parameter_list|)
name|WINDOW
modifier|*
name|win
decl_stmt|;
endif|#
directive|endif
block|{
name|wmove
argument_list|(
name|win
argument_list|,
literal|10
argument_list|,
literal|1
argument_list|)
expr_stmt|;
comment|/*    wclrtoeol(win); */
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|10
argument_list|,
literal|1
argument_list|,
literal|" Press any key to continue"
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|raw
argument_list|()
expr_stmt|;
name|wgetch
argument_list|(
name|win
argument_list|)
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC_
end_ifdef

begin_function
name|int
name|initTest
parameter_list|(
name|WINDOW
modifier|*
modifier|*
name|win
parameter_list|)
else|#
directive|else
function|int initTest
parameter_list|(
name|win
parameter_list|)
name|WINDOW
modifier|*
modifier|*
name|win
decl_stmt|;
endif|#
directive|endif
block|{
ifdef|#
directive|ifdef
name|PDCDEBUG
name|PDC_debug
argument_list|(
literal|"initTest called\n"
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|initscr
argument_list|()
expr_stmt|;
ifdef|#
directive|ifdef
name|PDCDEBUG
name|PDC_debug
argument_list|(
literal|"after initscr()\n"
argument_list|)
expr_stmt|;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|A_COLOR
if|if
condition|(
name|has_colors
argument_list|()
condition|)
name|start_color
argument_list|()
expr_stmt|;
endif|#
directive|endif
name|width
operator|=
literal|60
expr_stmt|;
name|height
operator|=
literal|13
expr_stmt|;
comment|/* Create a drawing window */
operator|*
name|win
operator|=
name|newwin
argument_list|(
name|height
argument_list|,
name|width
argument_list|,
operator|(
name|LINES
operator|-
name|height
operator|)
operator|/
literal|2
argument_list|,
operator|(
name|COLS
operator|-
name|width
operator|)
operator|/
literal|2
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|win
operator|==
name|NULL
condition|)
block|{
name|endwin
argument_list|()
expr_stmt|;
return|return
literal|1
return|;
block|}
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|introTest
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|)
else|#
directive|else
function|void introTest
parameter_list|(
name|win
parameter_list|)
name|WINDOW
modifier|*
name|win
decl_stmt|;
endif|#
directive|endif
block|{
name|beep
argument_list|()
expr_stmt|;
name|werase
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|box
argument_list|(
name|win
argument_list|,
name|ACS_VLINE
argument_list|,
name|ACS_HLINE
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|cbreak
argument_list|()
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"You should have rectangle in the middle of the screen"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|"You should have heard a beep"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
return|return;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|scrollTest
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|)
else|#
directive|else
function|void scrollTest
parameter_list|(
name|win
parameter_list|)
name|WINDOW
modifier|*
name|win
decl_stmt|;
endif|#
directive|endif
block|{
name|int
name|i
decl_stmt|;
name|int
name|OldX
decl_stmt|,
name|OldY
decl_stmt|;
name|char
modifier|*
name|Message
init|=
literal|"The window will now scroll slowly"
decl_stmt|;
name|mvwprintw
argument_list|(
name|win
argument_list|,
name|height
operator|-
literal|2
argument_list|,
literal|1
argument_list|,
name|Message
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|scrollok
argument_list|(
name|win
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
name|height
condition|;
name|i
operator|++
control|)
block|{
name|usleep
argument_list|(
literal|250
argument_list|)
expr_stmt|;
name|scroll
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
block|}
empty_stmt|;
name|getmaxyx
argument_list|(
name|win
argument_list|,
name|OldY
argument_list|,
name|OldX
argument_list|)
expr_stmt|;
name|mvwprintw
argument_list|(
name|win
argument_list|,
literal|6
argument_list|,
literal|1
argument_list|,
literal|"The top of the window will scroll"
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|wsetscrreg
argument_list|(
name|win
argument_list|,
literal|0
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|box
argument_list|(
name|win
argument_list|,
name|ACS_VLINE
argument_list|,
name|ACS_HLINE
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
literal|5
condition|;
name|i
operator|++
control|)
block|{
name|usleep
argument_list|(
literal|500
argument_list|)
expr_stmt|;
name|scroll
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
block|}
empty_stmt|;
name|wsetscrreg
argument_list|(
name|win
argument_list|,
literal|0
argument_list|,
operator|--
name|OldY
argument_list|)
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|inputTest
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|)
else|#
directive|else
function|void inputTest
parameter_list|(
name|win
parameter_list|)
name|WINDOW
modifier|*
name|win
decl_stmt|;
endif|#
directive|endif
block|{
name|int
name|w
decl_stmt|,
name|h
decl_stmt|,
name|bx
decl_stmt|,
name|by
decl_stmt|,
name|sw
decl_stmt|,
name|sh
decl_stmt|,
name|i
decl_stmt|,
name|c
decl_stmt|,
name|num
decl_stmt|;
name|char
name|buffer
index|[
literal|80
index|]
decl_stmt|;
name|WINDOW
modifier|*
name|subWin
decl_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|w
operator|=
name|win
operator|->
name|_maxx
expr_stmt|;
name|h
operator|=
name|win
operator|->
name|_maxy
expr_stmt|;
name|bx
operator|=
name|win
operator|->
name|_begx
expr_stmt|;
name|by
operator|=
name|win
operator|->
name|_begy
expr_stmt|;
name|sw
operator|=
name|w
operator|/
literal|3
expr_stmt|;
name|sh
operator|=
name|h
operator|/
literal|3
expr_stmt|;
if|if
condition|(
operator|(
name|subWin
operator|=
name|subwin
argument_list|(
name|win
argument_list|,
name|sh
argument_list|,
name|sw
argument_list|,
name|by
operator|+
name|h
operator|-
name|sh
operator|-
literal|2
argument_list|,
name|bx
operator|+
name|w
operator|-
name|sw
operator|-
literal|2
argument_list|)
operator|)
operator|==
name|NULL
condition|)
return|return;
ifdef|#
directive|ifdef
name|A_COLOR
if|if
condition|(
name|has_colors
argument_list|()
condition|)
block|{
name|init_pair
argument_list|(
literal|2
argument_list|,
name|COLOR_CYAN
argument_list|,
name|COLOR_BLUE
argument_list|)
expr_stmt|;
name|wattrset
argument_list|(
name|subWin
argument_list|,
name|COLOR_PAIR
argument_list|(
literal|2
argument_list|)
operator||
name|A_BOLD
argument_list|)
expr_stmt|;
block|}
else|else
name|wattrset
argument_list|(
name|subWin
argument_list|,
name|A_BOLD
argument_list|)
expr_stmt|;
else|#
directive|else
name|wattrset
argument_list|(
name|subWin
argument_list|,
name|A_BOLD
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|box
argument_list|(
name|subWin
argument_list|,
name|ACS_VLINE
argument_list|,
name|ACS_HLINE
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|nocbreak
argument_list|()
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|"Press some keys for 5 seconds"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"Pressing ^C should do nothing"
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|5
condition|;
name|i
operator|++
control|)
block|{
name|werase
argument_list|(
name|subWin
argument_list|)
expr_stmt|;
name|box
argument_list|(
name|subWin
argument_list|,
name|ACS_VLINE
argument_list|,
name|ACS_HLINE
argument_list|)
expr_stmt|;
name|mvwprintw
argument_list|(
name|subWin
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"Time = %d"
argument_list|,
name|i
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|subWin
argument_list|)
expr_stmt|;
name|usleep
argument_list|(
literal|1000
argument_list|)
expr_stmt|;
name|flushinp
argument_list|()
expr_stmt|;
block|}
name|delwin
argument_list|(
name|subWin
argument_list|)
expr_stmt|;
name|werase
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|flash
argument_list|()
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|usleep
argument_list|(
literal|500
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|"Press a key, followed by ENTER"
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|9
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|echo
argument_list|()
expr_stmt|;
name|noraw
argument_list|()
expr_stmt|;
name|wgetch
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|flushinp
argument_list|()
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|9
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|wdelch
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|"The character should now have been deleted"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|"Press a function key or an arrow key"
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|keypad
argument_list|(
name|win
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|raw
argument_list|()
expr_stmt|;
name|c
operator|=
name|wgetch
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|nodelay
argument_list|(
name|win
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|wgetch
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|nodelay
argument_list|(
name|win
argument_list|,
name|FALSE
argument_list|)
expr_stmt|;
name|refresh
argument_list|()
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|3
argument_list|,
literal|2
argument_list|,
literal|"The window should have moved"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|4
argument_list|,
literal|2
argument_list|,
literal|"This text should have appeared without you pressing a key"
argument_list|)
expr_stmt|;
name|mvwprintw
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
literal|"Keycode = %d"
argument_list|,
name|c
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|6
argument_list|,
literal|2
argument_list|,
literal|"Enter a number then a string seperated by space"
argument_list|)
expr_stmt|;
name|echo
argument_list|()
expr_stmt|;
name|noraw
argument_list|()
expr_stmt|;
name|mvwscanw
argument_list|(
name|win
argument_list|,
literal|7
argument_list|,
literal|6
argument_list|,
literal|"%d %s"
argument_list|,
operator|&
name|num
argument_list|,
name|buffer
argument_list|)
expr_stmt|;
name|mvwprintw
argument_list|(
name|win
argument_list|,
literal|8
argument_list|,
literal|6
argument_list|,
literal|"String: %s Number: %d"
argument_list|,
name|buffer
argument_list|,
name|num
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|outputTest
parameter_list|(
name|WINDOW
modifier|*
name|win
parameter_list|)
else|#
directive|else
function|void outputTest
parameter_list|(
name|win
parameter_list|)
name|WINDOW
modifier|*
name|win
decl_stmt|;
endif|#
directive|endif
block|{
name|WINDOW
modifier|*
name|win1
decl_stmt|;
name|char
name|Buffer
index|[
literal|80
index|]
decl_stmt|;
name|chtype
name|ch
decl_stmt|;
comment|/* traceon(); */
name|nl
argument_list|()
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"You should now have a screen in the upper left corner, and this text should have wrapped"
argument_list|)
expr_stmt|;
name|mvwin
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"A new window will appear with this text in it"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|8
argument_list|,
literal|1
argument_list|,
literal|"Press any key to continue"
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wgetch
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|win1
operator|=
name|newwin
argument_list|(
literal|10
argument_list|,
literal|50
argument_list|,
literal|15
argument_list|,
literal|25
argument_list|)
expr_stmt|;
if|if
condition|(
name|win1
operator|==
name|NULL
condition|)
block|{
name|endwin
argument_list|()
expr_stmt|;
return|return;
block|}
ifdef|#
directive|ifdef
name|A_COLOR
if|if
condition|(
name|has_colors
argument_list|()
condition|)
block|{
name|init_pair
argument_list|(
literal|3
argument_list|,
name|COLOR_BLUE
argument_list|,
name|COLOR_WHITE
argument_list|)
expr_stmt|;
name|wattrset
argument_list|(
name|win1
argument_list|,
name|COLOR_PAIR
argument_list|(
literal|3
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|wattrset
argument_list|(
name|win1
argument_list|,
name|A_NORMAL
argument_list|)
expr_stmt|;
else|#
directive|else
name|wattrset
argument_list|(
name|win1
argument_list|,
name|A_NORMAL
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|wclear
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win1
argument_list|,
literal|5
argument_list|,
literal|1
argument_list|,
literal|"This text should appear; using overlay option"
argument_list|)
expr_stmt|;
name|copywin
argument_list|(
name|win
argument_list|,
name|win1
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|10
argument_list|,
literal|50
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|UNIX
name|box
argument_list|(
name|win1
argument_list|,
name|ACS_VLINE
argument_list|,
name|ACS_HLINE
argument_list|)
expr_stmt|;
else|#
directive|else
name|box
argument_list|(
name|win1
argument_list|,
literal|0xb3
argument_list|,
literal|0xc4
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|wmove
argument_list|(
name|win1
argument_list|,
literal|8
argument_list|,
literal|26
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|wgetch
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|wattron
argument_list|(
name|win1
argument_list|,
name|A_BLINK
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win1
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|"This blinking text should appear in only the second window"
argument_list|)
expr_stmt|;
name|wattroff
argument_list|(
name|win1
argument_list|,
name|A_BLINK
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|wgetch
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|delwin
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|6
argument_list|,
literal|2
argument_list|,
literal|"This line shouldn't appear"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|4
argument_list|,
literal|2
argument_list|,
literal|"Only half of the next line is visible"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|5
argument_list|,
literal|2
argument_list|,
literal|"Only half of the next line is visible"
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|6
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|wclrtobot
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|5
argument_list|,
literal|20
argument_list|)
expr_stmt|;
name|wclrtoeol
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|8
argument_list|,
literal|2
argument_list|,
literal|"This line also shouldn't appear"
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|8
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|wdeleteln
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
comment|/* traceoff(); */
name|wmove
argument_list|(
name|win
argument_list|,
literal|5
argument_list|,
literal|9
argument_list|)
expr_stmt|;
name|ch
operator|=
name|winch
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|6
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|waddstr
argument_list|(
name|win
argument_list|,
literal|"The next char should be l:  "
argument_list|)
expr_stmt|;
name|winsch
argument_list|(
name|win
argument_list|,
name|ch
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|5
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|winsertln
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|5
argument_list|,
literal|2
argument_list|,
literal|"The lines below should have moved down"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|win
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|wprintw
argument_list|(
name|win
argument_list|,
literal|"This is a formatted string in a window: %d %s\n"
argument_list|,
literal|42
argument_list|,
literal|"is it"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|10
argument_list|,
literal|1
argument_list|,
literal|"Enter a string: "
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|noraw
argument_list|()
expr_stmt|;
name|echo
argument_list|()
expr_stmt|;
name|wscanw
argument_list|(
name|win
argument_list|,
literal|"%s"
argument_list|,
name|Buffer
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|10
argument_list|,
literal|1
argument_list|,
literal|"Enter a string"
argument_list|)
expr_stmt|;
name|wrefresh
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|clear
argument_list|()
expr_stmt|;
name|move
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|printw
argument_list|(
literal|"This is a formatted string in stdscr: %d %s\n"
argument_list|,
literal|42
argument_list|,
literal|"is it"
argument_list|)
expr_stmt|;
name|mvaddstr
argument_list|(
literal|10
argument_list|,
literal|1
argument_list|,
literal|"Enter a string: "
argument_list|)
expr_stmt|;
name|refresh
argument_list|()
expr_stmt|;
name|noraw
argument_list|()
expr_stmt|;
name|echo
argument_list|()
expr_stmt|;
name|scanw
argument_list|(
literal|"%s"
argument_list|,
name|Buffer
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|curs_set
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"The cursor should appear as a block"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|curs_set
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"The cursor should have disappeared"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|wclear
argument_list|(
name|win
argument_list|)
expr_stmt|;
name|curs_set
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"The cursor should be an underline"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win
argument_list|)
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|resizeTest
parameter_list|(
name|WINDOW
modifier|*
name|dummy
parameter_list|)
else|#
directive|else
function|void resizeTest
parameter_list|(
name|dummy
parameter_list|)
name|WINDOW
modifier|*
name|dummy
decl_stmt|;
endif|#
directive|endif
block|{
name|WINDOW
modifier|*
name|win1
decl_stmt|;
name|char
name|Buffer
index|[
literal|80
index|]
decl_stmt|;
name|chtype
name|ch
decl_stmt|;
name|savetty
argument_list|()
expr_stmt|;
name|clear
argument_list|()
expr_stmt|;
name|refresh
argument_list|()
expr_stmt|;
ifdef|#
directive|ifdef
name|__PDCURSES__
name|resize
argument_list|(
literal|50
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|win1
operator|=
name|newwin
argument_list|(
literal|11
argument_list|,
literal|50
argument_list|,
literal|14
argument_list|,
literal|25
argument_list|)
expr_stmt|;
if|if
condition|(
name|win1
operator|==
name|NULL
condition|)
block|{
name|endwin
argument_list|()
expr_stmt|;
return|return;
block|}
ifdef|#
directive|ifdef
name|A_COLOR
if|if
condition|(
name|has_colors
argument_list|()
condition|)
block|{
name|init_pair
argument_list|(
literal|3
argument_list|,
name|COLOR_BLUE
argument_list|,
name|COLOR_WHITE
argument_list|)
expr_stmt|;
name|wattrset
argument_list|(
name|win1
argument_list|,
name|COLOR_PAIR
argument_list|(
literal|3
argument_list|)
argument_list|)
expr_stmt|;
block|}
endif|#
directive|endif
name|wclear
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win1
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"The screen may now have 50 lines"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|resetty
argument_list|()
expr_stmt|;
name|wclear
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|win1
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
literal|"The screen should now be reset"
argument_list|)
expr_stmt|;
name|Continue
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|delwin
argument_list|(
name|win1
argument_list|)
expr_stmt|;
name|clear
argument_list|()
expr_stmt|;
name|refresh
argument_list|()
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|padTest
parameter_list|(
name|WINDOW
modifier|*
name|dummy
parameter_list|)
else|#
directive|else
function|void padTest
parameter_list|(
name|dummy
parameter_list|)
name|WINDOW
modifier|*
name|dummy
decl_stmt|;
endif|#
directive|endif
block|{
name|WINDOW
modifier|*
name|pad
decl_stmt|;
name|pad
operator|=
name|newpad
argument_list|(
literal|50
argument_list|,
literal|100
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|pad
argument_list|,
literal|5
argument_list|,
literal|2
argument_list|,
literal|"This is a new pad"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|pad
argument_list|,
literal|8
argument_list|,
literal|0
argument_list|,
literal|"The end of this line should be truncated here:abcd"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|pad
argument_list|,
literal|11
argument_list|,
literal|1
argument_list|,
literal|"This line should not appear."
argument_list|)
expr_stmt|;
name|wmove
argument_list|(
name|pad
argument_list|,
literal|10
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|wclrtoeol
argument_list|(
name|pad
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|pad
argument_list|,
literal|10
argument_list|,
literal|1
argument_list|,
literal|" Press any key to continue"
argument_list|)
expr_stmt|;
name|prefresh
argument_list|(
name|pad
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|10
argument_list|,
literal|45
argument_list|)
expr_stmt|;
name|keypad
argument_list|(
name|pad
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|raw
argument_list|()
expr_stmt|;
name|wgetch
argument_list|(
name|pad
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|pad
argument_list|,
literal|35
argument_list|,
literal|2
argument_list|,
literal|"This is displayed at line 35 in the pad"
argument_list|)
expr_stmt|;
name|mvwaddstr
argument_list|(
name|pad
argument_list|,
literal|40
argument_list|,
literal|1
argument_list|,
literal|" Press any key to continue"
argument_list|)
expr_stmt|;
name|prefresh
argument_list|(
name|pad
argument_list|,
literal|30
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|10
argument_list|,
literal|45
argument_list|)
expr_stmt|;
name|keypad
argument_list|(
name|pad
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|raw
argument_list|()
expr_stmt|;
name|wgetch
argument_list|(
name|pad
argument_list|)
expr_stmt|;
name|delwin
argument_list|(
name|pad
argument_list|)
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_function
name|void
name|display_menu
parameter_list|(
name|int
name|old_option
parameter_list|,
name|int
name|new_option
parameter_list|)
else|#
directive|else
function|void display_menu
parameter_list|(
name|old_option
parameter_list|,
name|new_option
parameter_list|)
name|int
name|old_option
decl_stmt|,
name|new_option
decl_stmt|;
endif|#
directive|endif
block|{
specifier|register
name|int
name|i
decl_stmt|;
name|attrset
argument_list|(
name|A_NORMAL
argument_list|)
expr_stmt|;
name|mvaddstr
argument_list|(
literal|3
argument_list|,
literal|20
argument_list|,
literal|"PDCurses Test Program"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|MAX_OPTIONS
condition|;
name|i
operator|++
control|)
name|mvaddstr
argument_list|(
literal|5
operator|+
name|i
argument_list|,
literal|25
argument_list|,
name|command
index|[
name|i
index|]
operator|.
name|text
argument_list|)
expr_stmt|;
if|if
condition|(
name|old_option
operator|!=
operator|(
operator|-
literal|1
operator|)
condition|)
name|mvaddstr
argument_list|(
literal|5
operator|+
name|old_option
argument_list|,
literal|25
argument_list|,
name|command
index|[
name|old_option
index|]
operator|.
name|text
argument_list|)
expr_stmt|;
name|attrset
argument_list|(
name|A_REVERSE
argument_list|)
expr_stmt|;
name|mvaddstr
argument_list|(
literal|5
operator|+
name|new_option
argument_list|,
literal|25
argument_list|,
name|command
index|[
name|new_option
index|]
operator|.
name|text
argument_list|)
expr_stmt|;
name|attrset
argument_list|(
name|A_NORMAL
argument_list|)
expr_stmt|;
name|mvaddstr
argument_list|(
literal|13
argument_list|,
literal|3
argument_list|,
literal|"Use Up and Down Arrows to select - Enter to run - Q to quit"
argument_list|)
expr_stmt|;
name|refresh
argument_list|()
expr_stmt|;
block|}
end_function

end_unit

