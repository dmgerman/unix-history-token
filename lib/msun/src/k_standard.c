begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* @(#)k_standard.c 5.1 93/09/24 */
end_comment

begin_comment
comment|/*  * ====================================================  * Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.  *  * Developed at SunPro, a Sun Microsystems, Inc. business.  * Permission to use, copy, modify, and distribute this  * software is freely granted, provided that this notice  * is preserved.  * ====================================================  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|rcsid
index|[]
init|=
literal|"$FreeBSD$"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|"math.h"
end_include

begin_include
include|#
directive|include
file|"math_private.h"
end_include

begin_include
include|#
directive|include
file|<errno.h>
end_include

begin_ifndef
ifndef|#
directive|ifndef
name|_USE_WRITE
end_ifndef

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_comment
comment|/* fputs(), stderr */
end_comment

begin_define
define|#
directive|define
name|WRITE2
parameter_list|(
name|u
parameter_list|,
name|v
parameter_list|)
value|fputs(u, stderr)
end_define

begin_else
else|#
directive|else
end_else

begin_comment
comment|/* !defined(_USE_WRITE) */
end_comment

begin_include
include|#
directive|include
file|<unistd.h>
end_include

begin_comment
comment|/* write */
end_comment

begin_define
define|#
directive|define
name|WRITE2
parameter_list|(
name|u
parameter_list|,
name|v
parameter_list|)
value|write(2, u, v)
end_define

begin_undef
undef|#
directive|undef
name|fflush
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* !defined(_USE_WRITE) */
end_comment

begin_decl_stmt
specifier|static
specifier|const
name|double
name|zero
init|=
literal|0.0
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* used as const */
end_comment

begin_comment
comment|/*  * Standard conformance (non-IEEE) on exception cases.  * Mapping:  *	1 -- acos(|x|>1)  *	2 -- asin(|x|>1)  *	3 -- atan2(+-0,+-0)  *	4 -- hypot overflow  *	5 -- cosh overflow  *	6 -- exp overflow  *	7 -- exp underflow  *	8 -- y0(0)  *	9 -- y0(-ve)  *	10-- y1(0)  *	11-- y1(-ve)  *	12-- yn(0)  *	13-- yn(-ve)  *	14-- lgamma(finite) overflow  *	15-- lgamma(-integer)  *	16-- log(0)  *	17-- log(x<0)  *	18-- log10(0)  *	19-- log10(x<0)  *	20-- pow(0.0,0.0)  *	21-- pow(x,y) overflow  *	22-- pow(x,y) underflow  *	23-- pow(0,negative)  *	24-- pow(neg,non-integral)  *	25-- sinh(finite) overflow  *	26-- sqrt(negative)  *      27-- fmod(x,0)  *      28-- remainder(x,0)  *	29-- acosh(x<1)  *	30-- atanh(|x|>1)  *	31-- atanh(|x|=1)  *	32-- scalb overflow  *	33-- scalb underflow  *	34-- j0(|x|>X_TLOSS)  *	35-- y0(x>X_TLOSS)  *	36-- j1(|x|>X_TLOSS)  *	37-- y1(x>X_TLOSS)  *	38-- jn(|x|>X_TLOSS, n)  *	39-- yn(x>X_TLOSS, n)  *	40-- gamma(finite) overflow  *	41-- gamma(-integer)  *	42-- pow(NaN,0.0)  */
end_comment

begin_function
name|double
name|__kernel_standard
parameter_list|(
name|double
name|x
parameter_list|,
name|double
name|y
parameter_list|,
name|int
name|type
parameter_list|)
block|{
name|struct
name|exception
name|exc
decl_stmt|;
ifndef|#
directive|ifndef
name|HUGE_VAL
comment|/* this is the only routine that uses HUGE_VAL */
define|#
directive|define
name|HUGE_VAL
value|inf
name|double
name|inf
init|=
literal|0.0
decl_stmt|;
name|SET_HIGH_WORD
argument_list|(
name|inf
argument_list|,
literal|0x7ff00000
argument_list|)
expr_stmt|;
comment|/* set inf to infinite */
endif|#
directive|endif
ifdef|#
directive|ifdef
name|_USE_WRITE
operator|(
name|void
operator|)
name|fflush
argument_list|(
name|stdout
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|exc
operator|.
name|arg1
operator|=
name|x
expr_stmt|;
name|exc
operator|.
name|arg2
operator|=
name|y
expr_stmt|;
switch|switch
condition|(
name|type
condition|)
block|{
case|case
literal|1
case|:
case|case
literal|101
case|:
comment|/* acos(|x|>1) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"acos"
else|:
literal|"acosf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"acos: DOMAIN error\n"
argument_list|,
literal|19
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|2
case|:
case|case
literal|102
case|:
comment|/* asin(|x|>1) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"asin"
else|:
literal|"asinf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"asin: DOMAIN error\n"
argument_list|,
literal|19
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|3
case|:
case|case
literal|103
case|:
comment|/* atan2(+-0,+-0) */
name|exc
operator|.
name|arg1
operator|=
name|y
expr_stmt|;
name|exc
operator|.
name|arg2
operator|=
name|x
expr_stmt|;
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"atan2"
else|:
literal|"atan2f"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"atan2: DOMAIN error\n"
argument_list|,
literal|20
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|4
case|:
case|case
literal|104
case|:
comment|/* hypot(finite,finite) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"hypot"
else|:
literal|"hypotf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|5
case|:
case|case
literal|105
case|:
comment|/* cosh(finite) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"cosh"
else|:
literal|"coshf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|6
case|:
case|case
literal|106
case|:
comment|/* exp(finite) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"exp"
else|:
literal|"expf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|7
case|:
case|case
literal|107
case|:
comment|/* exp(finite) underflow */
name|exc
operator|.
name|type
operator|=
name|UNDERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"exp"
else|:
literal|"expf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|8
case|:
case|case
literal|108
case|:
comment|/* y0(0) = -inf */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
comment|/* should be SING for IEEE */
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"y0"
else|:
literal|"y0f"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"y0: DOMAIN error\n"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|9
case|:
case|case
literal|109
case|:
comment|/* y0(x<0) = NaN */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"y0"
else|:
literal|"y0f"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"y0: DOMAIN error\n"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|10
case|:
case|case
literal|110
case|:
comment|/* y1(0) = -inf */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
comment|/* should be SING for IEEE */
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"y1"
else|:
literal|"y1f"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"y1: DOMAIN error\n"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|11
case|:
case|case
literal|111
case|:
comment|/* y1(x<0) = NaN */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"y1"
else|:
literal|"y1f"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"y1: DOMAIN error\n"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|12
case|:
case|case
literal|112
case|:
comment|/* yn(n,0) = -inf */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
comment|/* should be SING for IEEE */
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"yn"
else|:
literal|"ynf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"yn: DOMAIN error\n"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|13
case|:
case|case
literal|113
case|:
comment|/* yn(x<0) = NaN */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"yn"
else|:
literal|"ynf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"yn: DOMAIN error\n"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|14
case|:
case|case
literal|114
case|:
comment|/* lgamma(finite) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"lgamma"
else|:
literal|"lgammaf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|15
case|:
case|case
literal|115
case|:
comment|/* lgamma(-integer) or lgamma(0) */
name|exc
operator|.
name|type
operator|=
name|SING
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"lgamma"
else|:
literal|"lgammaf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"lgamma: SING error\n"
argument_list|,
literal|19
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|16
case|:
case|case
literal|116
case|:
comment|/* log(0) */
name|exc
operator|.
name|type
operator|=
name|SING
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"log"
else|:
literal|"logf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"log: SING error\n"
argument_list|,
literal|16
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|17
case|:
case|case
literal|117
case|:
comment|/* log(x<0) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"log"
else|:
literal|"logf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"log: DOMAIN error\n"
argument_list|,
literal|18
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|18
case|:
case|case
literal|118
case|:
comment|/* log10(0) */
name|exc
operator|.
name|type
operator|=
name|SING
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"log10"
else|:
literal|"log10f"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"log10: SING error\n"
argument_list|,
literal|18
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|19
case|:
case|case
literal|119
case|:
comment|/* log10(x<0) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"log10"
else|:
literal|"log10f"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"log10: DOMAIN error\n"
argument_list|,
literal|20
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|20
case|:
case|case
literal|120
case|:
comment|/* pow(0.0,0.0) */
comment|/* error only if _LIB_VERSION == _SVID_ */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"pow"
else|:
literal|"powf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|!=
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
literal|1.0
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"pow(0,0): DOMAIN error\n"
argument_list|,
literal|23
argument_list|)
expr_stmt|;
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|21
case|:
case|case
literal|121
case|:
comment|/* pow(x,y) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"pow"
else|:
literal|"powf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
name|y
operator|*=
literal|0.5
expr_stmt|;
if|if
condition|(
name|x
operator|<
name|zero
operator|&&
name|rint
argument_list|(
name|y
argument_list|)
operator|!=
name|y
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE
expr_stmt|;
block|}
else|else
block|{
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
name|y
operator|*=
literal|0.5
expr_stmt|;
if|if
condition|(
name|x
operator|<
name|zero
operator|&&
name|rint
argument_list|(
name|y
argument_list|)
operator|!=
name|y
condition|)
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
block|}
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|22
case|:
case|case
literal|122
case|:
comment|/* pow(x,y) underflow */
name|exc
operator|.
name|type
operator|=
name|UNDERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"pow"
else|:
literal|"powf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|23
case|:
case|case
literal|123
case|:
comment|/* 0**neg */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"pow"
else|:
literal|"powf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"pow(0,neg): DOMAIN error\n"
argument_list|,
literal|25
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|24
case|:
case|case
literal|124
case|:
comment|/* neg**non-integral */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"pow"
else|:
literal|"powf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|zero
operator|/
name|zero
expr_stmt|;
comment|/* X/Open allow NaN */
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"neg**non-integral: DOMAIN error\n"
argument_list|,
literal|32
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|25
case|:
case|case
literal|125
case|:
comment|/* sinh(finite) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"sinh"
else|:
literal|"sinhf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
operator|(
operator|(
name|x
operator|>
name|zero
operator|)
condition|?
name|HUGE
else|:
operator|-
name|HUGE
operator|)
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
operator|(
operator|(
name|x
operator|>
name|zero
operator|)
condition|?
name|HUGE_VAL
else|:
operator|-
name|HUGE_VAL
operator|)
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|26
case|:
case|case
literal|126
case|:
comment|/* sqrt(x<0) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"sqrt"
else|:
literal|"sqrtf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|zero
operator|/
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"sqrt: DOMAIN error\n"
argument_list|,
literal|19
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|27
case|:
case|case
literal|127
case|:
comment|/* fmod(x,0) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"fmod"
else|:
literal|"fmodf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|x
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|zero
operator|/
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"fmod:  DOMAIN error\n"
argument_list|,
literal|20
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|28
case|:
case|case
literal|128
case|:
comment|/* remainder(x,0) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"remainder"
else|:
literal|"remainderf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
operator|/
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"remainder: DOMAIN error\n"
argument_list|,
literal|24
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|29
case|:
case|case
literal|129
case|:
comment|/* acosh(x<1) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"acosh"
else|:
literal|"acoshf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
operator|/
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"acosh: DOMAIN error\n"
argument_list|,
literal|20
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|30
case|:
case|case
literal|130
case|:
comment|/* atanh(|x|>1) */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"atanh"
else|:
literal|"atanhf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
operator|/
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"atanh: DOMAIN error\n"
argument_list|,
literal|20
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|31
case|:
case|case
literal|131
case|:
comment|/* atanh(|x|=1) */
name|exc
operator|.
name|type
operator|=
name|SING
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"atanh"
else|:
literal|"atanhf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|x
operator|/
name|zero
expr_stmt|;
comment|/* sign(x)*inf */
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"atanh: SING error\n"
argument_list|,
literal|18
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|32
case|:
case|case
literal|132
case|:
comment|/* scalb overflow; SVID also returns +-HUGE_VAL */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"scalb"
else|:
literal|"scalbf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|x
operator|>
name|zero
condition|?
name|HUGE_VAL
else|:
operator|-
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|33
case|:
case|case
literal|133
case|:
comment|/* scalb underflow */
name|exc
operator|.
name|type
operator|=
name|UNDERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"scalb"
else|:
literal|"scalbf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|copysign
argument_list|(
name|zero
argument_list|,
name|x
argument_list|)
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|34
case|:
case|case
literal|134
case|:
comment|/* j0(|x|>X_TLOSS) */
name|exc
operator|.
name|type
operator|=
name|TLOSS
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"j0"
else|:
literal|"j0f"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
name|exc
operator|.
name|name
argument_list|,
literal|2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|": TLOSS error\n"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|35
case|:
case|case
literal|135
case|:
comment|/* y0(x>X_TLOSS) */
name|exc
operator|.
name|type
operator|=
name|TLOSS
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"y0"
else|:
literal|"y0f"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
name|exc
operator|.
name|name
argument_list|,
literal|2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|": TLOSS error\n"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|36
case|:
case|case
literal|136
case|:
comment|/* j1(|x|>X_TLOSS) */
name|exc
operator|.
name|type
operator|=
name|TLOSS
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"j1"
else|:
literal|"j1f"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
name|exc
operator|.
name|name
argument_list|,
literal|2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|": TLOSS error\n"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|37
case|:
case|case
literal|137
case|:
comment|/* y1(x>X_TLOSS) */
name|exc
operator|.
name|type
operator|=
name|TLOSS
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"y1"
else|:
literal|"y1f"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
name|exc
operator|.
name|name
argument_list|,
literal|2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|": TLOSS error\n"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|38
case|:
case|case
literal|138
case|:
comment|/* jn(|x|>X_TLOSS) */
name|exc
operator|.
name|type
operator|=
name|TLOSS
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"jn"
else|:
literal|"jnf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
name|exc
operator|.
name|name
argument_list|,
literal|2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|": TLOSS error\n"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|39
case|:
case|case
literal|139
case|:
comment|/* yn(x>X_TLOSS) */
name|exc
operator|.
name|type
operator|=
name|TLOSS
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"yn"
else|:
literal|"ynf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|zero
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
name|exc
operator|.
name|name
argument_list|,
literal|2
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|": TLOSS error\n"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|40
case|:
case|case
literal|140
case|:
comment|/* gamma(finite) overflow */
name|exc
operator|.
name|type
operator|=
name|OVERFLOW
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"gamma"
else|:
literal|"gammaf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|ERANGE
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|ERANGE
expr_stmt|;
block|}
break|break;
case|case
literal|41
case|:
case|case
literal|141
case|:
comment|/* gamma(-integer) or gamma(0) */
name|exc
operator|.
name|type
operator|=
name|SING
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"gamma"
else|:
literal|"gammaf"
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
name|exc
operator|.
name|retval
operator|=
name|HUGE
expr_stmt|;
else|else
name|exc
operator|.
name|retval
operator|=
name|HUGE_VAL
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|errno
operator|=
name|EDOM
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_SVID_
condition|)
block|{
operator|(
name|void
operator|)
name|WRITE2
argument_list|(
literal|"gamma: SING error\n"
argument_list|,
literal|18
argument_list|)
expr_stmt|;
block|}
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
case|case
literal|42
case|:
case|case
literal|142
case|:
comment|/* pow(NaN,0.0) */
comment|/* error only if _LIB_VERSION == _SVID_& _XOPEN_ */
name|exc
operator|.
name|type
operator|=
name|DOMAIN
expr_stmt|;
name|exc
operator|.
name|name
operator|=
name|type
operator|<
literal|100
condition|?
literal|"pow"
else|:
literal|"powf"
expr_stmt|;
name|exc
operator|.
name|retval
operator|=
name|x
expr_stmt|;
if|if
condition|(
name|_LIB_VERSION
operator|==
name|_IEEE_
operator|||
name|_LIB_VERSION
operator|==
name|_POSIX_
condition|)
name|exc
operator|.
name|retval
operator|=
literal|1.0
expr_stmt|;
elseif|else
if|if
condition|(
operator|!
name|matherr
argument_list|(
operator|&
name|exc
argument_list|)
condition|)
block|{
name|errno
operator|=
name|EDOM
expr_stmt|;
block|}
break|break;
block|}
return|return
name|exc
operator|.
name|retval
return|;
block|}
end_function

end_unit

