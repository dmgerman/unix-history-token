begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* From: @(#)k_tan.c 1.5 04/04/22 SMI */
end_comment

begin_comment
comment|/*  * ====================================================  * Copyright 2004 Sun Microsystems, Inc.  All Rights Reserved.  * Copyright (c) 2008 Steven G. Kargl, David Schultz, Bruce D. Evans.  *  * Permission to use, copy, modify, and distribute this  * software is freely granted, provided that this notice  * is preserved.  * ====================================================  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/*  * ld128 version of k_tan.c.  See ../src/k_tan.c for most comments.  */
end_comment

begin_include
include|#
directive|include
file|"math.h"
end_include

begin_include
include|#
directive|include
file|"math_private.h"
end_include

begin_comment
comment|/*  * Domain [-0.67434, 0.67434], range ~[-3.37e-36, 1.982e-37]  * |tan(x)/x - t(x)|< 2**-117.8 (XXX should be ~1e-37)  *  * See ../ld80/k_cosl.c for more details about the polynomial.  */
end_comment

begin_decl_stmt
specifier|static
specifier|const
name|long
name|double
name|T3
init|=
literal|0x1
literal|.5555555555555555555555555553p
operator|-
literal|2L
decl_stmt|,
name|T5
init|=
literal|0x1
literal|.1111111111111111111111111eb5p
operator|-
literal|3L
decl_stmt|,
name|T7
init|=
literal|0x1
operator|.
name|ba1ba1ba1ba1ba1ba1ba1b694cd6p
operator|-
literal|5L
decl_stmt|,
name|T9
init|=
literal|0x1
literal|.664f4882c10f9f32d6bbe09d8bcdp
operator|-
literal|6L
decl_stmt|,
name|T11
init|=
literal|0x1
literal|.226e355e6c23c8f5b4f5762322eep
operator|-
literal|7L
decl_stmt|,
name|T13
init|=
literal|0x1
operator|.
name|d6d3d0e157ddfb5fed8e84e27b37p
operator|-
literal|9L
decl_stmt|,
name|T15
init|=
literal|0x1
literal|.7da36452b75e2b5fce9ee7c2c92ep
operator|-
literal|10L
decl_stmt|,
name|T17
init|=
literal|0x1
literal|.355824803674477dfcf726649efep
operator|-
literal|11L
decl_stmt|,
name|T19
init|=
literal|0x1
operator|.
name|f57d7734d1656e0aceb716f614c2p
operator|-
literal|13L
decl_stmt|,
name|T21
init|=
literal|0x1
literal|.967e18afcb180ed942dfdc518d6cp
operator|-
literal|14L
decl_stmt|,
name|T23
init|=
literal|0x1
literal|.497d8eea21e95bc7e2aa79b9f2cdp
operator|-
literal|15L
decl_stmt|,
name|T25
init|=
literal|0x1
literal|.0b132d39f055c81be49eff7afd50p
operator|-
literal|16L
decl_stmt|,
name|T27
init|=
literal|0x1
operator|.
name|b0f72d33eff7bfa2fbc1059d90b6p
operator|-
literal|18L
decl_stmt|,
name|T29
init|=
literal|0x1
literal|.5ef2daf21d1113df38d0fbc00267p
operator|-
literal|19L
decl_stmt|,
name|T31
init|=
literal|0x1
literal|.1c77d6eac0234988cdaa04c96626p
operator|-
literal|20L
decl_stmt|,
name|T33
init|=
literal|0x1
operator|.
name|cd2a5a292b180e0bdd701057dfe3p
operator|-
literal|22L
decl_stmt|,
name|T35
init|=
literal|0x1
literal|.75c7357d0298c01a31d0a6f7d518p
operator|-
literal|23L
decl_stmt|,
name|T37
init|=
literal|0x1
literal|.2f3190f4718a9a520f98f50081fcp
operator|-
literal|24L
decl_stmt|,
name|pio4
init|=
literal|0x1
literal|.921fb54442d18469898cc51701b8p
operator|-
literal|1L
decl_stmt|,
name|pio4lo
init|=
literal|0x1
operator|.
name|cd129024e088a67cc74020bbea60p
operator|-
literal|116L
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|double
name|T39
init|=
literal|0.000000028443389121318352
decl_stmt|,
comment|/*  0x1e8a7592977938.0p-78 */
name|T41
init|=
literal|0.000000011981013102001973
decl_stmt|,
comment|/*  0x19baa1b1223219.0p-79 */
name|T43
init|=
literal|0.0000000038303578044958070
decl_stmt|,
comment|/*  0x107385dfb24529.0p-80 */
name|T45
init|=
literal|0.0000000034664378216909893
decl_stmt|,
comment|/*  0x1dc6c702a05262.0p-81 */
name|T47
init|=
operator|-
literal|0.0000000015090641701997785
decl_stmt|,
comment|/* -0x19ecef3569ebb6.0p-82 */
name|T49
init|=
literal|0.0000000029449552300483952
decl_stmt|,
comment|/*  0x194c0668da786a.0p-81 */
name|T51
init|=
operator|-
literal|0.0000000022006995706097711
decl_stmt|,
comment|/* -0x12e763b8845268.0p-81 */
name|T53
init|=
literal|0.0000000015468200913196612
decl_stmt|,
comment|/*  0x1a92fc98c29554.0p-82 */
name|T55
init|=
operator|-
literal|0.00000000061311613386849674
decl_stmt|,
comment|/* -0x151106cbc779a9.0p-83 */
name|T57
init|=
literal|1.4912469681508012e-10
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  0x147edbdba6f43a.0p-85 */
end_comment

begin_function
name|long
name|double
name|__kernel_tanl
parameter_list|(
name|long
name|double
name|x
parameter_list|,
name|long
name|double
name|y
parameter_list|,
name|int
name|iy
parameter_list|)
block|{
name|long
name|double
name|z
decl_stmt|,
name|r
decl_stmt|,
name|v
decl_stmt|,
name|w
decl_stmt|,
name|s
decl_stmt|;
name|long
name|double
name|osign
decl_stmt|;
name|int
name|i
decl_stmt|;
name|iy
operator|=
operator|(
name|iy
operator|==
literal|1
condition|?
operator|-
literal|1
else|:
literal|1
operator|)
expr_stmt|;
comment|/* XXX recover original interface */
name|osign
operator|=
operator|(
name|x
operator|>=
literal|0
condition|?
literal|1.0
else|:
operator|-
literal|1.0
operator|)
expr_stmt|;
comment|/* XXX slow, probably wrong for -0 */
if|if
condition|(
name|fabsl
argument_list|(
name|x
argument_list|)
operator|>=
literal|0.67434
condition|)
block|{
if|if
condition|(
name|x
operator|<
literal|0
condition|)
block|{
name|x
operator|=
operator|-
name|x
expr_stmt|;
name|y
operator|=
operator|-
name|y
expr_stmt|;
block|}
name|z
operator|=
name|pio4
operator|-
name|x
expr_stmt|;
name|w
operator|=
name|pio4lo
operator|-
name|y
expr_stmt|;
name|x
operator|=
name|z
operator|+
name|w
expr_stmt|;
name|y
operator|=
literal|0.0
expr_stmt|;
name|i
operator|=
literal|1
expr_stmt|;
block|}
else|else
name|i
operator|=
literal|0
expr_stmt|;
name|z
operator|=
name|x
operator|*
name|x
expr_stmt|;
name|w
operator|=
name|z
operator|*
name|z
expr_stmt|;
name|r
operator|=
name|T5
operator|+
name|w
operator|*
operator|(
name|T9
operator|+
name|w
operator|*
operator|(
name|T13
operator|+
name|w
operator|*
operator|(
name|T17
operator|+
name|w
operator|*
operator|(
name|T21
operator|+
name|w
operator|*
operator|(
name|T25
operator|+
name|w
operator|*
operator|(
name|T29
operator|+
name|w
operator|*
operator|(
name|T33
operator|+
name|w
operator|*
operator|(
name|T37
operator|+
name|w
operator|*
operator|(
name|T41
operator|+
name|w
operator|*
operator|(
name|T45
operator|+
name|w
operator|*
operator|(
name|T49
operator|+
name|w
operator|*
operator|(
name|T53
operator|+
name|w
operator|*
name|T57
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
expr_stmt|;
name|v
operator|=
name|z
operator|*
operator|(
name|T7
operator|+
name|w
operator|*
operator|(
name|T11
operator|+
name|w
operator|*
operator|(
name|T15
operator|+
name|w
operator|*
operator|(
name|T19
operator|+
name|w
operator|*
operator|(
name|T23
operator|+
name|w
operator|*
operator|(
name|T27
operator|+
name|w
operator|*
operator|(
name|T31
operator|+
name|w
operator|*
operator|(
name|T35
operator|+
name|w
operator|*
operator|(
name|T39
operator|+
name|w
operator|*
operator|(
name|T43
operator|+
name|w
operator|*
operator|(
name|T47
operator|+
name|w
operator|*
operator|(
name|T51
operator|+
name|w
operator|*
name|T55
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
expr_stmt|;
name|s
operator|=
name|z
operator|*
name|x
expr_stmt|;
name|r
operator|=
name|y
operator|+
name|z
operator|*
operator|(
name|s
operator|*
operator|(
name|r
operator|+
name|v
operator|)
operator|+
name|y
operator|)
expr_stmt|;
name|r
operator|+=
name|T3
operator|*
name|s
expr_stmt|;
name|w
operator|=
name|x
operator|+
name|r
expr_stmt|;
if|if
condition|(
name|i
operator|==
literal|1
condition|)
block|{
name|v
operator|=
operator|(
name|long
name|double
operator|)
name|iy
expr_stmt|;
return|return
name|osign
operator|*
operator|(
name|v
operator|-
literal|2.0
operator|*
operator|(
name|x
operator|-
operator|(
name|w
operator|*
name|w
operator|/
operator|(
name|w
operator|+
name|v
operator|)
operator|-
name|r
operator|)
operator|)
operator|)
return|;
block|}
if|if
condition|(
name|iy
operator|==
literal|1
condition|)
return|return
name|w
return|;
else|else
block|{
comment|/* 		 * if allow error up to 2 ulp, simply return 		 * -1.0 / (x+r) here 		 */
comment|/* compute -1.0 / (x+r) accurately */
name|long
name|double
name|a
decl_stmt|,
name|t
decl_stmt|;
name|z
operator|=
name|w
expr_stmt|;
name|z
operator|=
name|z
operator|+
literal|0x1p32
operator|-
literal|0x1p32
expr_stmt|;
name|v
operator|=
name|r
operator|-
operator|(
name|z
operator|-
name|x
operator|)
expr_stmt|;
comment|/* z+v = r+x */
name|t
operator|=
name|a
operator|=
operator|-
literal|1.0
operator|/
name|w
expr_stmt|;
comment|/* a = -1.0/w */
name|t
operator|=
name|t
operator|+
literal|0x1p32
operator|-
literal|0x1p32
expr_stmt|;
name|s
operator|=
literal|1.0
operator|+
name|t
operator|*
name|z
expr_stmt|;
return|return
name|t
operator|+
name|a
operator|*
operator|(
name|s
operator|+
name|t
operator|*
name|v
operator|)
return|;
block|}
block|}
end_function

end_unit

