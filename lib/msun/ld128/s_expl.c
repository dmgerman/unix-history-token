begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2009-2013 Steven G. Kargl  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice unmodified, this list of conditions, and the following  *    disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES  * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,  * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT  * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *  * Optimized by Bruce D. Evans.  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/*  * ld128 version of s_expl.c.  See ../ld80/s_expl.c for most comments.  */
end_comment

begin_include
include|#
directive|include
file|<float.h>
end_include

begin_include
include|#
directive|include
file|"fpmath.h"
end_include

begin_include
include|#
directive|include
file|"math.h"
end_include

begin_include
include|#
directive|include
file|"math_private.h"
end_include

begin_define
define|#
directive|define
name|INTERVALS
value|128
end_define

begin_define
define|#
directive|define
name|LOG2_INTERVALS
value|7
end_define

begin_define
define|#
directive|define
name|BIAS
value|(LDBL_MAX_EXP - 1)
end_define

begin_decl_stmt
specifier|static
specifier|const
name|long
name|double
name|huge
init|=
literal|0x1p10000L
decl_stmt|,
name|twom10000
init|=
literal|0x1p
operator|-
literal|10000L
decl_stmt|,
comment|/* XXX Prevent gcc from erroneously constant folding this: */
decl_stmt|static volatile const
name|long
name|double
name|tiny
init|=
literal|0x1p
operator|-
literal|10000L
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|long
name|double
comment|/* log(2**16384 - 0.5) rounded towards zero: */
comment|/* log(2**16384 - 0.5 + 1) rounded towards zero for expm1l() is the same: */
name|o_threshold
init|=
literal|11356.523406294143949491931077970763428L
decl_stmt|,
comment|/* log(2**(-16381-64-1)) rounded towards zero: */
name|u_threshold
init|=
operator|-
literal|11433.462743336297878837243843452621503L
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|double
comment|/*  * ln2/INTERVALS = L1+L2 (hi+lo decomposition for multiplication).  L1 must  * have at least 22 (= log2(|LDBL_MIN_EXP-extras|) + log2(INTERVALS)) lowest  * bits zero so that multiplication of it by n is exact.  */
name|INV_L
init|=
literal|1.8466496523378731e+2
decl_stmt|,
comment|/*  0x171547652b82fe.0p-45 */
name|L2
init|=
operator|-
literal|1.0253670638894731e-29
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -0x1.9ff0342542fc3p-97 */
end_comment

begin_decl_stmt
specifier|static
specifier|const
name|long
name|double
comment|/* 0x1.62e42fefa39ef35793c768000000p-8 */
name|L1
init|=
literal|5.41521234812457272982212595914567508e-3L
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|long
name|double
comment|/*  * Domain [-0.002708, 0.002708], range ~[-2.4011e-38, 2.4244e-38]:  * |exp(x) - p(x)|< 2**-124.9  * (0.002708 is ln2/(2*INTERVALS) rounded up a little).  */
name|A2
init|=
literal|0.5
decl_stmt|,
name|A3
init|=
literal|1.66666666666666666666666666651085500e-1L
decl_stmt|,
name|A4
init|=
literal|4.16666666666666666666666666425885320e-2L
decl_stmt|,
name|A5
init|=
literal|8.33333333333333333334522877160175842e-3L
decl_stmt|,
name|A6
init|=
literal|1.38888888888888888889971139751596836e-3L
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|double
name|A7
init|=
literal|1.9841269841269471e-4
decl_stmt|,
name|A8
init|=
literal|2.4801587301585284e-5
decl_stmt|,
name|A9
init|=
literal|2.7557324277411234e-6
decl_stmt|,
name|A10
init|=
literal|2.7557333722375072e-7
decl_stmt|;
end_decl_stmt

begin_struct
specifier|static
specifier|const
struct|struct
block|{
name|long
name|double
name|hi
decl_stmt|;
name|long
name|double
name|lo
decl_stmt|;
block|}
name|tbl
index|[
name|INTERVALS
index|]
init|=
block|{
literal|0x1p0L
block|,
literal|0x0p0L
block|,
literal|0x1
literal|.0163da9fb33356d84a66aep0L
block|,
literal|0x3
literal|.36dcdfa4003ec04c360be2404078p
operator|-
literal|92L
block|,
literal|0x1
literal|.02c9a3e778060ee6f7cacap0L
block|,
literal|0x4
operator|.
name|f7a29bde93d70a2cabc5cb89ba10p
operator|-
literal|92L
block|,
literal|0x1
literal|.04315e86e7f84bd738f9a2p0L
block|,
literal|0xd
operator|.
name|a47e6ed040bb4bfc05af6455e9b8p
operator|-
literal|96L
block|,
literal|0x1
literal|.059b0d31585743ae7c548ep0L
block|,
literal|0xb
literal|.68ca417fe53e3495f7df4baf84a0p
operator|-
literal|92L
block|,
literal|0x1
literal|.0706b29ddf6ddc6dc403a8p0L
block|,
literal|0x1
operator|.
name|d87b27ed07cb8b092ac75e311753p
operator|-
literal|88L
block|,
literal|0x1
literal|.0874518759bc808c35f25cp0L
block|,
literal|0x1
literal|.9427fa2b041b2d6829d8993a0d01p
operator|-
literal|88L
block|,
literal|0x1
literal|.09e3ecac6f3834521e060cp0L
block|,
literal|0x5
literal|.84d6b74ba2e023da730e7fccb758p
operator|-
literal|92L
block|,
literal|0x1
literal|.0b5586cf9890f6298b92b6p0L
block|,
literal|0x1
literal|.1842a98364291408b3ceb0a2a2bbp
operator|-
literal|88L
block|,
literal|0x1
literal|.0cc922b7247f7407b705b8p0L
block|,
literal|0x9
literal|.3dc5e8aac564e6fe2ef1d431fd98p
operator|-
literal|92L
block|,
literal|0x1
literal|.0e3ec32d3d1a2020742e4ep0L
block|,
literal|0x1
literal|.8af6a552ac4b358b1129e9f966a4p
operator|-
literal|88L
block|,
literal|0x1
literal|.0fb66affed31af232091dcp0L
block|,
literal|0x1
literal|.8a1426514e0b627bda694a400a27p
operator|-
literal|88L
block|,
literal|0x1
literal|.11301d0125b50a4ebbf1aep0L
block|,
literal|0xd
literal|.9318ceac5cc47ab166ee57427178p
operator|-
literal|92L
block|,
literal|0x1
literal|.12abdc06c31cbfb92bad32p0L
block|,
literal|0x4
operator|.
name|d68e2f7270bdf7cedf94eb1cb818p
operator|-
literal|92L
block|,
literal|0x1
literal|.1429aaea92ddfb34101942p0L
block|,
literal|0x1
operator|.
name|b2586d01844b389bea7aedd221d4p
operator|-
literal|88L
block|,
literal|0x1
literal|.15a98c8a58e512480d573cp0L
block|,
literal|0x1
operator|.
name|d5613bf92a2b618ee31b376c2689p
operator|-
literal|88L
block|,
literal|0x1
literal|.172b83c7d517adcdf7c8c4p0L
block|,
literal|0x1
literal|.0eb14a792035509ff7d758693f24p
operator|-
literal|88L
block|,
literal|0x1
literal|.18af9388c8de9bbbf70b9ap0L
block|,
literal|0x3
operator|.
name|c2505c97c0102e5f1211941d2840p
operator|-
literal|92L
block|,
literal|0x1
literal|.1a35beb6fcb753cb698f68p0L
block|,
literal|0x1
literal|.2d1c835a6c30724d5cfae31b84e5p
operator|-
literal|88L
block|,
literal|0x1
literal|.1bbe084045cd39ab1e72b4p0L
block|,
literal|0x4
literal|.27e35f9acb57e473915519a1b448p
operator|-
literal|92L
block|,
literal|0x1
literal|.1d4873168b9aa7805b8028p0L
block|,
literal|0x9
literal|.90f07a98b42206e46166cf051d70p
operator|-
literal|92L
block|,
literal|0x1
literal|.1ed5022fcd91cb8819ff60p0L
block|,
literal|0x1
literal|.121d1e504d36c47474c9b7de6067p
operator|-
literal|88L
block|,
literal|0x1
literal|.2063b88628cd63b8eeb028p0L
block|,
literal|0x1
literal|.50929d0fc487d21c2b84004264dep
operator|-
literal|88L
block|,
literal|0x1
literal|.21f49917ddc962552fd292p0L
block|,
literal|0x9
literal|.4bdb4b61ea62477caa1dce823ba0p
operator|-
literal|92L
block|,
literal|0x1
literal|.2387a6e75623866c1fadb0p0L
block|,
literal|0x1
operator|.
name|c15cb593b0328566902df69e4de2p
operator|-
literal|88L
block|,
literal|0x1
literal|.251ce4fb2a63f3582ab7dep0L
block|,
literal|0x9
operator|.
name|e94811a9c8afdcf796934bc652d0p
operator|-
literal|92L
block|,
literal|0x1
literal|.26b4565e27cdd257a67328p0L
block|,
literal|0x1
operator|.
name|d3b249dce4e9186ddd5ff44e6b08p
operator|-
literal|92L
block|,
literal|0x1
literal|.284dfe1f5638096cf15cf0p0L
block|,
literal|0x3
operator|.
name|ca0967fdaa2e52d7c8106f2e262cp
operator|-
literal|92L
block|,
literal|0x1
literal|.29e9df51fdee12c25d15f4p0L
block|,
literal|0x1
operator|.
name|a24aa3bca890ac08d203fed80a07p
operator|-
literal|88L
block|,
literal|0x1
literal|.2b87fd0dad98ffddea4652p0L
block|,
literal|0x1
literal|.8fcab88442fdc3cb6de4519165edp
operator|-
literal|88L
block|,
literal|0x1
literal|.2d285a6e4030b40091d536p0L
block|,
literal|0xd
literal|.075384589c1cd1b3e4018a6b1348p
operator|-
literal|92L
block|,
literal|0x1
literal|.2ecafa93e2f5611ca0f45cp0L
block|,
literal|0x1
literal|.523833af611bdcda253c554cf278p
operator|-
literal|88L
block|,
literal|0x1
literal|.306fe0a31b7152de8d5a46p0L
block|,
literal|0x3
literal|.05c85edecbc27343629f502f1af2p
operator|-
literal|92L
block|,
literal|0x1
literal|.32170fc4cd8313539cf1c2p0L
block|,
literal|0x1
literal|.008f86dde3220ae17a005b6412bep
operator|-
literal|88L
block|,
literal|0x1
literal|.33c08b26416ff4c9c8610cp0L
block|,
literal|0x1
literal|.96696bf95d1593039539d94d662bp
operator|-
literal|88L
block|,
literal|0x1
literal|.356c55f929ff0c94623476p0L
block|,
literal|0x3
literal|.73af38d6d8d6f9506c9bbc93cbc0p
operator|-
literal|92L
block|,
literal|0x1
literal|.371a7373aa9caa7145502ep0L
block|,
literal|0x1
literal|.4547987e3e12516bf9c699be432fp
operator|-
literal|88L
block|,
literal|0x1
literal|.38cae6d05d86585a9cb0d8p0L
block|,
literal|0x1
operator|.
name|bed0c853bd30a02790931eb2e8f0p
operator|-
literal|88L
block|,
literal|0x1
literal|.3a7db34e59ff6ea1bc9298p0L
block|,
literal|0x1
operator|.
name|e0a1d336163fe2f852ceeb134067p
operator|-
literal|88L
block|,
literal|0x1
literal|.3c32dc313a8e484001f228p0L
block|,
literal|0xb
literal|.58f3775e06ab66353001fae9fca0p
operator|-
literal|92L
block|,
literal|0x1
literal|.3dea64c12342235b41223ep0L
block|,
literal|0x1
literal|.3d773fba2cb82b8244267c54443fp
operator|-
literal|92L
block|,
literal|0x1
literal|.3fa4504ac801ba0bf701aap0L
block|,
literal|0x4
literal|.1832fb8c1c8dbdff2c49909e6c60p
operator|-
literal|92L
block|,
literal|0x1
literal|.4160a21f72e29f84325b8ep0L
block|,
literal|0x1
literal|.3db61fb352f0540e6ba05634413ep
operator|-
literal|88L
block|,
literal|0x1
literal|.431f5d950a896dc7044394p0L
block|,
literal|0x1
literal|.0ccec81e24b0caff7581ef4127f7p
operator|-
literal|92L
block|,
literal|0x1
literal|.44e086061892d03136f408p0L
block|,
literal|0x1
operator|.
name|df019fbd4f3b48709b78591d5cb5p
operator|-
literal|88L
block|,
literal|0x1
literal|.46a41ed1d005772512f458p0L
block|,
literal|0x1
literal|.229d97df404ff21f39c1b594d3a8p
operator|-
literal|88L
block|,
literal|0x1
literal|.486a2b5c13cd013c1a3b68p0L
block|,
literal|0x1
literal|.062f03c3dd75ce8757f780e6ec99p
operator|-
literal|88L
block|,
literal|0x1
literal|.4a32af0d7d3de672d8bcf4p0L
block|,
literal|0x6
operator|.
name|f9586461db1d878b1d148bd3ccb8p
operator|-
literal|92L
block|,
literal|0x1
literal|.4bfdad5362a271d4397afep0L
block|,
literal|0xc
literal|.42e20e0363ba2e159c579f82e4b0p
operator|-
literal|92L
block|,
literal|0x1
literal|.4dcb299fddd0d63b36ef1ap0L
block|,
literal|0x9
operator|.
name|e0cc484b25a5566d0bd5f58ad238p
operator|-
literal|92L
block|,
literal|0x1
literal|.4f9b2769d2ca6ad33d8b68p0L
block|,
literal|0x1
operator|.
name|aa073ee55e028497a329a7333dbap
operator|-
literal|88L
block|,
literal|0x1
literal|.516daa2cf6641c112f52c8p0L
block|,
literal|0x4
operator|.
name|d822190e718226177d7608d20038p
operator|-
literal|92L
block|,
literal|0x1
literal|.5342b569d4f81df0a83c48p0L
block|,
literal|0x1
operator|.
name|d86a63f4e672a3e429805b049465p
operator|-
literal|88L
block|,
literal|0x1
literal|.551a4ca5d920ec52ec6202p0L
block|,
literal|0x4
literal|.34ca672645dc6c124d6619a87574p
operator|-
literal|92L
block|,
literal|0x1
literal|.56f4736b527da66ecb0046p0L
block|,
literal|0x1
literal|.64eb3c00f2f5ab3d801d7cc7272dp
operator|-
literal|88L
block|,
literal|0x1
literal|.58d12d497c7fd252bc2b72p0L
block|,
literal|0x1
literal|.43bcf2ec936a970d9cc266f0072fp
operator|-
literal|88L
block|,
literal|0x1
literal|.5ab07dd48542958c930150p0L
block|,
literal|0x1
literal|.91eb345d88d7c81280e069fbdb63p
operator|-
literal|88L
block|,
literal|0x1
literal|.5c9268a5946b701c4b1b80p0L
block|,
literal|0x1
literal|.6986a203d84e6a4a92f179e71889p
operator|-
literal|88L
block|,
literal|0x1
literal|.5e76f15ad21486e9be4c20p0L
block|,
literal|0x3
literal|.99766a06548a05829e853bdb2b52p
operator|-
literal|92L
block|,
literal|0x1
literal|.605e1b976dc08b076f592ap0L
block|,
literal|0x4
literal|.86e3b34ead1b4769df867b9c89ccp
operator|-
literal|92L
block|,
literal|0x1
literal|.6247eb03a5584b1f0fa06ep0L
block|,
literal|0x1
operator|.
name|d2da42bb1ceaf9f732275b8aef30p
operator|-
literal|88L
block|,
literal|0x1
literal|.6434634ccc31fc76f8714cp0L
block|,
literal|0x4
operator|.
name|ed9a4e41000307103a18cf7a6e08p
operator|-
literal|92L
block|,
literal|0x1
literal|.66238825522249127d9e28p0L
block|,
literal|0x1
operator|.
name|b8f314a337f4dc0a3adf1787ff74p
operator|-
literal|88L
block|,
literal|0x1
literal|.68155d44ca973081c57226p0L
block|,
literal|0x1
operator|.
name|b9f32706bfe4e627d809a85dcc66p
operator|-
literal|88L
block|,
literal|0x1
literal|.6a09e667f3bcc908b2fb12p0L
block|,
literal|0x1
literal|.66ea957d3e3adec17512775099dap
operator|-
literal|88L
block|,
literal|0x1
literal|.6c012750bdabeed76a9980p0L
block|,
literal|0xf
literal|.4f33fdeb8b0ecd831106f57b3d00p
operator|-
literal|96L
block|,
literal|0x1
literal|.6dfb23c651a2ef220e2cbep0L
block|,
literal|0x1
operator|.
name|bbaa834b3f11577ceefbe6c1c411p
operator|-
literal|92L
block|,
literal|0x1
literal|.6ff7df9519483cf87e1b4ep0L
block|,
literal|0x1
literal|.3e213bff9b702d5aa477c12523cep
operator|-
literal|88L
block|,
literal|0x1
literal|.71f75e8ec5f73dd2370f2ep0L
block|,
literal|0xf
literal|.0acd6cb434b562d9e8a20adda648p
operator|-
literal|92L
block|,
literal|0x1
literal|.73f9a48a58173bd5c9a4e6p0L
block|,
literal|0x8
operator|.
name|ab1182ae217f3a7681759553e840p
operator|-
literal|92L
block|,
literal|0x1
literal|.75feb564267c8bf6e9aa32p0L
block|,
literal|0x1
operator|.
name|a48b27071805e61a17b954a2dad8p
operator|-
literal|88L
block|,
literal|0x1
literal|.780694fde5d3f619ae0280p0L
block|,
literal|0x8
literal|.58b2bb2bdcf86cd08e35fb04c0f0p
operator|-
literal|92L
block|,
literal|0x1
literal|.7a11473eb0186d7d51023ep0L
block|,
literal|0x1
literal|.6cda1f5ef42b66977960531e821bp
operator|-
literal|88L
block|,
literal|0x1
literal|.7c1ed0130c1327c4933444p0L
block|,
literal|0x1
literal|.937562b2dc933d44fc828efd4c9cp
operator|-
literal|88L
block|,
literal|0x1
literal|.7e2f336cf4e62105d02ba0p0L
block|,
literal|0x1
literal|.5797e170a1427f8fcdf5f3906108p
operator|-
literal|88L
block|,
literal|0x1
literal|.80427543e1a11b60de6764p0L
block|,
literal|0x9
operator|.
name|a354ea706b8e4d8b718a672bf7c8p
operator|-
literal|92L
block|,
literal|0x1
literal|.82589994cce128acf88afap0L
block|,
literal|0xb
literal|.34a010f6ad65cbbac0f532d39be0p
operator|-
literal|92L
block|,
literal|0x1
literal|.8471a4623c7acce52f6b96p0L
block|,
literal|0x1
operator|.
name|c64095370f51f48817914dd78665p
operator|-
literal|88L
block|,
literal|0x1
literal|.868d99b4492ec80e41d90ap0L
block|,
literal|0xc
literal|.251707484d73f136fb5779656b70p
operator|-
literal|92L
block|,
literal|0x1
literal|.88ac7d98a669966530bcdep0L
block|,
literal|0x1
literal|.2d4e9d61283ef385de170ab20f96p
operator|-
literal|88L
block|,
literal|0x1
literal|.8ace5422aa0db5ba7c55a0p0L
block|,
literal|0x1
literal|.92c9bb3e6ed61f2733304a346d8fp
operator|-
literal|88L
block|,
literal|0x1
literal|.8cf3216b5448bef2aa1cd0p0L
block|,
literal|0x1
literal|.61c55d84a9848f8c453b3ca8c946p
operator|-
literal|88L
block|,
literal|0x1
literal|.8f1ae991577362b982745cp0L
block|,
literal|0x7
literal|.2ed804efc9b4ae1458ae946099d4p
operator|-
literal|92L
block|,
literal|0x1
literal|.9145b0b91ffc588a61b468p0L
block|,
literal|0x1
operator|.
name|f6b70e01c2a90229a4c4309ea719p
operator|-
literal|88L
block|,
literal|0x1
literal|.93737b0cdc5e4f4501c3f2p0L
block|,
literal|0x5
literal|.40a22d2fc4af581b63e8326efe9cp
operator|-
literal|92L
block|,
literal|0x1
literal|.95a44cbc8520ee9b483694p0L
block|,
literal|0x1
operator|.
name|a0fc6f7c7d61b2b3a22a0eab2cadp
operator|-
literal|88L
block|,
literal|0x1
literal|.97d829fde4e4f8b9e920f8p0L
block|,
literal|0x1
literal|.1e8bd7edb9d7144b6f6818084cc7p
operator|-
literal|88L
block|,
literal|0x1
literal|.9a0f170ca07b9ba3109b8cp0L
block|,
literal|0x4
literal|.6737beb19e1eada6825d3c557428p
operator|-
literal|92L
block|,
literal|0x1
literal|.9c49182a3f0901c7c46b06p0L
block|,
literal|0x1
literal|.1f2be58ddade50c217186c90b457p
operator|-
literal|88L
block|,
literal|0x1
literal|.9e86319e323231824ca78ep0L
block|,
literal|0x6
literal|.4c6e010f92c082bbadfaf605cfd4p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|a0c667b5de564b29ada8b8p0L
block|,
literal|0xc
operator|.
name|ab349aa0422a8da7d4512edac548p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|a309bec4a2d3358c171f76p0L
block|,
literal|0x1
literal|.0daad547fa22c26d168ea762d854p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|a5503b23e255c8b424491cp0L
block|,
literal|0xa
operator|.
name|f87bc8050a405381703ef7caff50p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|a799e1330b3586f2dfb2b0p0L
block|,
literal|0x1
literal|.58f1a98796ce8908ae852236ca94p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|a9e6b5579fdbf43eb243bcp0L
block|,
literal|0x1
operator|.
name|ff4c4c58b571cf465caf07b4b9f5p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|ac36bbfd3f379c0db966a2p0L
block|,
literal|0x1
literal|.1265fc73e480712d20f8597a8e7bp
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|ae89f995ad3ad5e8734d16p0L
block|,
literal|0x1
literal|.73205a7fbc3ae675ea440b162d6cp
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|b0e07298db66590842acdep0L
block|,
literal|0x1
operator|.
name|c6f6ca0e5dcae2aafffa7a0554cbp
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|b33a2b84f15faf6bfd0e7ap0L
block|,
literal|0x1
operator|.
name|d947c2575781dbb49b1237c87b6ep
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|b59728de559398e3881110p0L
block|,
literal|0x1
literal|.64873c7171fefc410416be0a6525p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|b7f76f2fb5e46eaa7b081ap0L
block|,
literal|0xb
literal|.53c5354c8903c356e4b625aacc28p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|ba5b030a10649840cb3c6ap0L
block|,
literal|0xf
literal|.5b47f297203757e1cc6eadc8bad0p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|bcc1e904bc1d2247ba0f44p0L
block|,
literal|0x1
operator|.
name|b3d08cd0b20287092bd59be4ad98p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|bf2c25bd71e088408d7024p0L
block|,
literal|0x1
literal|.18e3449fa073b356766dfb568ff4p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|c199bdd85529c2220cb12ap0L
block|,
literal|0x9
literal|.1ba6679444964a36661240043970p
operator|-
literal|96L
block|,
literal|0x1
operator|.
name|c40ab5fffd07a6d14df820p0L
block|,
literal|0xf
literal|.1828a5366fd387a7bdd54cdf7300p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|c67f12e57d14b4a2137fd2p0L
block|,
literal|0xf
literal|.2b301dd9e6b151a6d1f9d5d5f520p
operator|-
literal|96L
block|,
literal|0x1
operator|.
name|c8f6d9406e7b511acbc488p0L
block|,
literal|0x5
operator|.
name|c442ddb55820171f319d9e5076a8p
operator|-
literal|96L
block|,
literal|0x1
operator|.
name|cb720dcef90691503cbd1ep0L
block|,
literal|0x9
literal|.49db761d9559ac0cb6dd3ed599e0p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|cdf0b555dc3f9c44f8958ep0L
block|,
literal|0x1
operator|.
name|ac51be515f8c58bdfb6f5740a3a4p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|d072d4a07897b8d0f22f20p0L
block|,
literal|0x1
operator|.
name|a158e18fbbfc625f09f4cca40874p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|d2f87080d89f18ade12398p0L
block|,
literal|0x9
operator|.
name|ea2025b4c56553f5cdee4c924728p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|d5818dcfba48725da05aeap0L
block|,
literal|0x1
literal|.66e0dca9f589f559c0876ff23830p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|d80e316c98397bb84f9d04p0L
block|,
literal|0x8
literal|.805f84bec614de269900ddf98d28p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|da9e603db3285708c01a5ap0L
block|,
literal|0x1
literal|.6d4c97f6246f0ec614ec95c99392p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|dd321f301b4604b695de3cp0L
block|,
literal|0x6
literal|.30a393215299e30d4fb73503c348p
operator|-
literal|96L
block|,
literal|0x1
operator|.
name|dfc97337b9b5eb968cac38p0L
block|,
literal|0x1
operator|.
name|ed291b7225a944efd5bb5524b927p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|e264614f5a128a12761fa0p0L
block|,
literal|0x1
literal|.7ada6467e77f73bf65e04c95e29dp
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|e502ee78b3ff6273d13014p0L
block|,
literal|0x1
literal|.3991e8f49659e1693be17ae1d2f9p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|e7a51fbc74c834b548b282p0L
block|,
literal|0x1
literal|.23786758a84f4956354634a416cep
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|ea4afa2a490d9858f73a18p0L
block|,
literal|0xf
literal|.5db301f86dea20610ceee13eb7b8p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|ecf482d8e67f08db0312fap0L
block|,
literal|0x1
literal|.949cef462010bb4bc4ce72a900dfp
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|efa1bee615a27771fd21a8p0L
block|,
literal|0x1
literal|.2dac1f6dd5d229ff68e46f27e3dfp
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|f252b376bba974e8696fc2p0L
block|,
literal|0x1
literal|.6390d4c6ad5476b5162f40e1d9a9p
operator|-
literal|88L
block|,
literal|0x1
operator|.
name|f50765b6e4540674f84b76p0L
block|,
literal|0x2
literal|.862baff99000dfc4352ba29b8908p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|f7bfdad9cbe138913b4bfep0L
block|,
literal|0x7
literal|.2bd95c5ce7280fa4d2344a3f5618p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|fa7c1819e90d82e90a7e74p0L
block|,
literal|0xb
literal|.263c1dc060c36f7650b4c0f233a8p
operator|-
literal|92L
block|,
literal|0x1
operator|.
name|fd3c22b8f71f10975ba4b2p0L
block|,
literal|0x1
literal|.2bcf3a5e12d269d8ad7c1a4a8875p
operator|-
literal|88L
block|}
struct|;
end_struct

begin_function
name|long
name|double
name|expl
parameter_list|(
name|long
name|double
name|x
parameter_list|)
block|{
name|union
name|IEEEl2bits
name|u
decl_stmt|,
name|v
decl_stmt|;
name|long
name|double
name|q
decl_stmt|,
name|r
decl_stmt|,
name|r1
decl_stmt|,
name|t
decl_stmt|,
name|twopk
decl_stmt|,
name|twopkp10000
decl_stmt|;
name|double
name|dr
decl_stmt|,
name|fn
decl_stmt|,
name|r2
decl_stmt|;
name|int
name|k
decl_stmt|,
name|n
decl_stmt|,
name|n2
decl_stmt|;
name|uint32_t
name|hx
decl_stmt|,
name|ix
decl_stmt|;
comment|/* Filter out exceptional cases. */
name|u
operator|.
name|e
operator|=
name|x
expr_stmt|;
name|hx
operator|=
name|u
operator|.
name|xbits
operator|.
name|expsign
expr_stmt|;
name|ix
operator|=
name|hx
operator|&
literal|0x7fff
expr_stmt|;
if|if
condition|(
name|ix
operator|>=
name|BIAS
operator|+
literal|13
condition|)
block|{
comment|/* |x|>= 8192 or x is NaN */
if|if
condition|(
name|ix
operator|==
name|BIAS
operator|+
name|LDBL_MAX_EXP
condition|)
block|{
if|if
condition|(
name|hx
operator|&
literal|0x8000
condition|)
comment|/* x is -Inf or -NaN */
return|return
operator|(
operator|-
literal|1
operator|/
name|x
operator|)
return|;
return|return
operator|(
name|x
operator|+
name|x
operator|)
return|;
comment|/* x is +Inf or NaN */
block|}
if|if
condition|(
name|x
operator|>
name|o_threshold
condition|)
return|return
operator|(
name|huge
operator|*
name|huge
operator|)
return|;
if|if
condition|(
name|x
operator|<
name|u_threshold
condition|)
return|return
operator|(
name|tiny
operator|*
name|tiny
operator|)
return|;
block|}
elseif|else
if|if
condition|(
name|ix
operator|<
name|BIAS
operator|-
literal|114
condition|)
block|{
comment|/* |x|< 0x1p-114 */
return|return
operator|(
literal|1
operator|+
name|x
operator|)
return|;
comment|/* 1 with inexact iff x != 0 */
block|}
comment|/* Reduce x to (k*ln2 + endpoint[n2] + r1 + r2). */
comment|/* Use a specialized rint() to get fn.  Assume round-to-nearest. */
comment|/* XXX assume no extra precision for the additions, as for trig fns. */
comment|/* XXX this set of comments is now quadruplicated. */
name|fn
operator|=
operator|(
name|double
operator|)
name|x
operator|*
name|INV_L
operator|+
literal|0x1
literal|.8p52
operator|-
literal|0x1
literal|.8p52
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|HAVE_EFFICIENT_IRINT
argument_list|)
name|n
operator|=
name|irint
argument_list|(
name|fn
argument_list|)
expr_stmt|;
else|#
directive|else
name|n
operator|=
operator|(
name|int
operator|)
name|fn
expr_stmt|;
endif|#
directive|endif
name|n2
operator|=
operator|(
name|unsigned
operator|)
name|n
operator|%
name|INTERVALS
expr_stmt|;
name|k
operator|=
name|n
operator|>>
name|LOG2_INTERVALS
expr_stmt|;
name|r1
operator|=
name|x
operator|-
name|fn
operator|*
name|L1
expr_stmt|;
name|r2
operator|=
name|fn
operator|*
operator|-
name|L2
expr_stmt|;
comment|/* Prepare scale factors. */
name|v
operator|.
name|xbits
operator|.
name|manh
operator|=
literal|0
expr_stmt|;
name|v
operator|.
name|xbits
operator|.
name|manl
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|k
operator|>=
name|LDBL_MIN_EXP
condition|)
block|{
name|v
operator|.
name|xbits
operator|.
name|expsign
operator|=
name|BIAS
operator|+
name|k
expr_stmt|;
name|twopk
operator|=
name|v
operator|.
name|e
expr_stmt|;
block|}
else|else
block|{
name|v
operator|.
name|xbits
operator|.
name|expsign
operator|=
name|BIAS
operator|+
name|k
operator|+
literal|10000
expr_stmt|;
name|twopkp10000
operator|=
name|v
operator|.
name|e
expr_stmt|;
block|}
comment|/* Evaluate expl(endpoint[n2] + r1 + r2) = tbl[n2] * expl(r1 + r2). */
name|dr
operator|=
name|r
expr_stmt|;
name|q
operator|=
name|r2
operator|+
name|r
operator|*
name|r
operator|*
operator|(
name|A2
operator|+
name|r
operator|*
operator|(
name|A3
operator|+
name|r
operator|*
operator|(
name|A4
operator|+
name|r
operator|*
operator|(
name|A5
operator|+
name|r
operator|*
operator|(
name|A6
operator|+
name|dr
operator|*
operator|(
name|A7
operator|+
name|dr
operator|*
operator|(
name|A8
operator|+
name|dr
operator|*
operator|(
name|A9
operator|+
name|dr
operator|*
name|A10
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
operator|)
expr_stmt|;
name|t
operator|=
name|tbl
index|[
name|n2
index|]
operator|.
name|lo
operator|+
name|tbl
index|[
name|n2
index|]
operator|.
name|hi
expr_stmt|;
name|t
operator|=
name|tbl
index|[
name|n2
index|]
operator|.
name|lo
operator|+
name|t
operator|*
operator|(
name|q
operator|+
name|r1
operator|)
operator|+
name|tbl
index|[
name|n2
index|]
operator|.
name|hi
expr_stmt|;
comment|/* Scale by 2**k. */
if|if
condition|(
name|k
operator|>=
name|LDBL_MIN_EXP
condition|)
block|{
if|if
condition|(
name|k
operator|==
name|LDBL_MAX_EXP
condition|)
return|return
operator|(
name|t
operator|*
literal|2.0L
operator|*
literal|0x1p16383L
operator|)
return|;
return|return
operator|(
name|t
operator|*
name|twopk
operator|)
return|;
block|}
else|else
block|{
return|return
operator|(
name|t
operator|*
name|twopkp10000
operator|*
name|twom10000
operator|)
return|;
block|}
block|}
end_function

end_unit

