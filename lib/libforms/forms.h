begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_define
define|#
directive|define
name|FORM_NO_KEYS
value|12
end_define

begin_define
define|#
directive|define
name|FORM_LEFT
value|0
end_define

begin_define
define|#
directive|define
name|FORM_RIGHT
value|1
end_define

begin_define
define|#
directive|define
name|FORM_UP
value|2
end_define

begin_define
define|#
directive|define
name|FORM_DOWN
value|3
end_define

begin_define
define|#
directive|define
name|FORM_NEXT
value|4
end_define

begin_define
define|#
directive|define
name|FORM_EXIT
value|5
end_define

begin_define
define|#
directive|define
name|FORM_FIELD_HOME
value|6
end_define

begin_define
define|#
directive|define
name|FORM_FIELD_END
value|7
end_define

begin_define
define|#
directive|define
name|FORM_FIELD_LEFT
value|8
end_define

begin_define
define|#
directive|define
name|FORM_FIELD_RIGHT
value|9
end_define

begin_define
define|#
directive|define
name|FORM_FIELD_BACKSPACE
value|10
end_define

begin_define
define|#
directive|define
name|FORM_FIELD_DELETE
value|11
end_define

begin_comment
comment|/* Attribute values */
end_comment

begin_define
define|#
directive|define
name|FORM_DEFAULT_ATTR
value|0
end_define

begin_define
define|#
directive|define
name|FORM_SELECTED_ATTR
value|0
end_define

begin_comment
comment|/* Field types */
end_comment

begin_define
define|#
directive|define
name|FORM_FTYPE_INPUT
value|0
end_define

begin_define
define|#
directive|define
name|FORM_FTYPE_MENU
value|1
end_define

begin_define
define|#
directive|define
name|FORM_FTYPE_BUTTON
value|2
end_define

begin_define
define|#
directive|define
name|FORM_FTYPE_TEXT
value|3
end_define

begin_define
define|#
directive|define
name|MAX_FIELD_SIZE
value|80
end_define

begin_struct
struct|struct
name|form
block|{
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|height
decl_stmt|;
name|int
name|width
decl_stmt|;
name|struct
name|field
modifier|*
name|fields
decl_stmt|;
block|}
struct|;
end_struct

begin_decl_stmt
specifier|extern
name|struct
name|form
modifier|*
name|form
decl_stmt|;
end_decl_stmt

begin_struct
struct|struct
name|input_field
block|{
name|int
name|y_prompt
decl_stmt|;
name|int
name|x_prompt
decl_stmt|;
name|int
name|prompt_width
decl_stmt|;
name|int
name|prompt_attr
decl_stmt|;
name|char
modifier|*
name|prompt
decl_stmt|;
name|int
name|y_field
decl_stmt|;
name|int
name|x_field
decl_stmt|;
name|int
name|field_width
decl_stmt|;
name|int
name|max_field_width
decl_stmt|;
name|int
name|field_attr
decl_stmt|;
name|char
modifier|*
name|field
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|text_field
block|{
name|int
name|y
decl_stmt|;
name|int
name|x
decl_stmt|;
name|int
name|attr
decl_stmt|;
name|char
modifier|*
name|text
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|field
block|{
name|int
name|field_id
decl_stmt|;
name|int
name|type
decl_stmt|;
union|union
block|{
name|struct
name|input_field
name|input
decl_stmt|;
name|struct
name|text_field
name|text
decl_stmt|;
ifdef|#
directive|ifdef
name|notyet
block|struct
name|menu_field
name|menu
expr|struct
name|button_field
name|button
expr_stmt|;
endif|#
directive|endif
block|}
name|entry
union|;
name|struct
name|field
modifier|*
name|link
decl_stmt|;
name|struct
name|field
modifier|*
name|next
decl_stmt|;
name|struct
name|field
modifier|*
name|up
decl_stmt|;
name|struct
name|field
modifier|*
name|down
decl_stmt|;
name|struct
name|field
modifier|*
name|left
decl_stmt|;
name|struct
name|field
modifier|*
name|right
decl_stmt|;
block|}
struct|;
end_struct

begin_decl_stmt
specifier|extern
name|unsigned
name|int
name|keymap
index|[
name|FORM_NO_KEYS
index|]
decl_stmt|;
end_decl_stmt

begin_function_decl
name|int
name|init_forms
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|int
name|edit_line
parameter_list|(
name|WINDOW
modifier|*
name|window
parameter_list|,
name|struct
name|field
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|edit_form
parameter_list|(
name|struct
name|form
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|refresh_form
parameter_list|(
name|WINDOW
modifier|*
parameter_list|,
name|struct
name|form
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|field
modifier|*
name|find_link
parameter_list|(
name|int
parameter_list|)
function_decl|;
end_function_decl

end_unit

