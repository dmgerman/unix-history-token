begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* 		      Library for ftpd clients.(libftp) 			Copyright by Oleg Orel 			 All rights reserved.  This  library is desined  for  free,  non-commercial  software  creation. It is changeable and can be improved. The author would greatly appreciate any  advises, new  components  and  patches  of  the  existing  programs. Commercial  usage is  also  possible  with  participation of it's author.    */
end_comment

begin_include
include|#
directive|include
file|"FtpLibrary.h"
end_include

begin_function
name|STATUS
name|FtpLogin
parameter_list|(
name|FTP
modifier|*
modifier|*
name|con
parameter_list|,
name|char
modifier|*
name|host
parameter_list|,
name|char
modifier|*
name|user
parameter_list|,
name|char
modifier|*
name|password
parameter_list|,
name|char
modifier|*
name|account
parameter_list|)
block|{
name|FtpAssert
argument_list|(
operator|(
operator|*
name|con
operator|)
argument_list|,
name|FtpConnect
argument_list|(
name|con
argument_list|,
name|host
argument_list|)
argument_list|)
expr_stmt|;
name|FtpAssert
argument_list|(
operator|(
operator|*
name|con
operator|)
argument_list|,
name|FtpUser
argument_list|(
operator|(
operator|*
name|con
operator|)
argument_list|,
name|user
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
operator|*
name|con
operator|)
operator|->
name|errno
operator|)
operator|==
literal|230
condition|)
return|return
operator|(
operator|(
operator|*
name|con
operator|)
operator|->
name|errno
operator|)
return|;
if|if
condition|(
operator|(
operator|(
operator|*
name|con
operator|)
operator|->
name|errno
operator|)
operator|==
literal|332
condition|)
block|{
if|if
condition|(
name|account
operator|==
name|NULL
condition|)
return|return
name|EXIT
argument_list|(
operator|(
operator|(
operator|*
name|con
operator|)
operator|)
argument_list|,
operator|(
operator|*
name|con
operator|)
operator|->
name|errno
argument_list|)
return|;
name|FtpAssert
argument_list|(
operator|(
operator|*
name|con
operator|)
argument_list|,
name|FtpAccount
argument_list|(
operator|(
operator|*
name|con
operator|)
argument_list|,
name|account
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
operator|*
name|con
operator|)
operator|->
name|errno
operator|)
operator|==
literal|230
condition|)
return|return
operator|(
operator|*
name|con
operator|)
operator|->
name|errno
return|;
block|}
return|return
name|FtpPassword
argument_list|(
operator|(
operator|*
name|con
operator|)
argument_list|,
name|password
argument_list|)
return|;
block|}
end_function

end_unit

