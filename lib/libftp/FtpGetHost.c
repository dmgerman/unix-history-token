begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* 		      Library for ftpd clients.(libftp) 			Copyright by Oleg Orel 			 All rights reserved.  This  library is desined  for  free,  non-commercial  software  creation. It is changeable and can be improved. The author would greatly appreciate any  advises, new  components  and  patches  of  the  existing  programs. Commercial  usage is  also  possible  with  participation of it's author.    */
end_comment

begin_include
include|#
directive|include
file|"FtpLibrary.h"
end_include

begin_include
include|#
directive|include
file|<arpa/inet.h>
end_include

begin_function
name|struct
name|hostent
modifier|*
name|FtpGetHost
parameter_list|(
name|char
modifier|*
name|host
parameter_list|)
block|{
specifier|static
name|struct
name|in_addr
name|addr
decl_stmt|;
specifier|static
name|struct
name|hostent
name|_host
decl_stmt|;
specifier|static
name|char
modifier|*
name|point
index|[
literal|2
index|]
decl_stmt|;
specifier|static
name|char
modifier|*
name|alias
index|[
literal|1
index|]
decl_stmt|;
name|bzero
argument_list|(
operator|&
name|_host
argument_list|,
sizeof|sizeof
name|_host
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|addr
operator|.
name|s_addr
operator|=
name|inet_addr
argument_list|(
name|host
argument_list|)
operator|)
operator|!=
operator|-
literal|1
condition|)
block|{
name|_host
operator|.
name|h_addr_list
operator|=
name|point
expr_stmt|;
name|_host
operator|.
name|h_addr_list
index|[
literal|0
index|]
operator|=
operator|(
name|char
operator|*
operator|)
operator|&
name|addr
expr_stmt|;
name|_host
operator|.
name|h_addr_list
index|[
literal|1
index|]
operator|=
operator|(
name|char
operator|*
operator|)
literal|0
expr_stmt|;
name|alias
index|[
literal|0
index|]
operator|=
name|NULL
expr_stmt|;
name|_host
operator|.
name|h_aliases
operator|=
name|alias
expr_stmt|;
name|_host
operator|.
name|h_name
operator|=
name|host
expr_stmt|;
name|_host
operator|.
name|h_length
operator|=
expr|sizeof
operator|(
name|unsigned
name|long
operator|)
expr_stmt|;
name|_host
operator|.
name|h_addrtype
operator|=
name|AF_INET
expr_stmt|;
return|return
operator|&
name|_host
return|;
block|}
return|return
name|gethostbyname
argument_list|(
name|host
argument_list|)
return|;
block|}
end_function

end_unit

