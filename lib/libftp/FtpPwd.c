begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* 		      Library for ftpd clients.(libftp) 			Copyright by Oleg Orel 			 All rights reserved.  This  library is desined  for  free,  non-commercial  software  creation. It is changeable and can be improved. The author would greatly appreciate any  advises, new  components  and  patches  of  the  existing  programs. Commercial  usage is  also  possible  with  participation of it's author.    */
end_comment

begin_include
include|#
directive|include
file|"FtpLibrary.h"
end_include

begin_function
name|char
modifier|*
name|FtpPwd
parameter_list|(
name|FTP
modifier|*
name|con
parameter_list|)
block|{
name|String
name|tmp
decl_stmt|;
specifier|static
name|String
name|tmp1
decl_stmt|;
name|int
name|i
decl_stmt|;
if|if
condition|(
name|FtpSendMessage
argument_list|(
name|con
argument_list|,
literal|"PWD"
argument_list|)
operator|==
name|QUIT
condition|)
return|return
operator|(
name|char
operator|*
operator|)
name|EXIT
argument_list|(
name|con
argument_list|,
name|QUIT
argument_list|)
return|;
if|if
condition|(
operator|(
name|i
operator|=
name|FtpGetMessage
argument_list|(
name|con
argument_list|,
name|tmp
argument_list|)
operator|)
operator|==
name|QUIT
condition|)
return|return
operator|(
name|char
operator|*
operator|)
name|EXIT
argument_list|(
name|con
argument_list|,
name|QUIT
argument_list|)
return|;
if|if
condition|(
name|i
operator|!=
literal|257
condition|)
return|return
operator|(
name|char
operator|*
operator|)
name|EXIT
argument_list|(
name|con
argument_list|,
operator|-
name|i
argument_list|)
return|;
name|sscanf
argument_list|(
name|tmp
argument_list|,
literal|"%*[^\"]%*c%[^\"]%*s"
argument_list|,
name|tmp1
argument_list|)
expr_stmt|;
name|con
operator|->
name|errno
operator|=
name|i
expr_stmt|;
return|return
name|tmp1
return|;
block|}
end_function

end_unit

