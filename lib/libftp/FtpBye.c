begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* 		      Library for ftpd clients.(libftp) 			Copyright by Oleg Orel 			 All rights reserved.  This  library is desined  for  free,  non-commercial  software  creation. It is changeable and can be improved. The author would greatly appreciate any  advises, new  components  and  patches  of  the  existing  programs. Commercial  usage is  also  possible  with  participation of it's author.    */
end_comment

begin_include
include|#
directive|include
file|"FtpLibrary.h"
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_function
name|STATUS
name|FtpBye
parameter_list|(
name|FTP
modifier|*
name|ftp
parameter_list|)
block|{
name|FtpAssert
argument_list|(
name|ftp
argument_list|,
name|FtpCommand
argument_list|(
name|ftp
argument_list|,
literal|"QUIT"
argument_list|,
literal|221
argument_list|,
name|EOF
argument_list|)
argument_list|)
expr_stmt|;
name|fclose
argument_list|(
name|FTPCMD
argument_list|(
name|ftp
argument_list|)
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|ftp
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
name|STATUS
name|FtpQuickBye
parameter_list|(
name|FTP
modifier|*
name|ftp
parameter_list|)
block|{
if|if
condition|(
name|ftp
operator|==
name|NULL
condition|)
return|return
literal|0
return|;
if|if
condition|(
name|FTPDATA
argument_list|(
name|ftp
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|shutdown
argument_list|(
name|fileno
argument_list|(
name|FTPDATA
argument_list|(
name|ftp
argument_list|)
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|fclose
argument_list|(
name|FTPDATA
argument_list|(
name|ftp
argument_list|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|FTPCMD
argument_list|(
name|ftp
argument_list|)
operator|!=
name|NULL
condition|)
block|{
name|shutdown
argument_list|(
name|fileno
argument_list|(
name|FTPCMD
argument_list|(
name|ftp
argument_list|)
argument_list|)
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|fclose
argument_list|(
name|FTPCMD
argument_list|(
name|ftp
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|free
argument_list|(
name|ftp
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

end_unit

