begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"iodec.h"
end_include

begin_comment
comment|/* **	formatted read routine ** **		based on scanf() in the portable C library */
end_comment

begin_decl_stmt
name|int
argument_list|(
operator|*
name|__getc
argument_list|)
argument_list|()
decl_stmt|,
argument_list|(
operator|*
name|__ungc
argument_list|)
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|__input
decl_stmt|;
end_decl_stmt

begin_macro
name|scanf
argument_list|(
argument|paramlist
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|paramlist
decl_stmt|;
end_decl_stmt

begin_block
block|{
extern|extern		cgetc(
block|)
end_block

begin_operator
operator|,
end_operator

begin_expr_stmt
name|ungetc
argument_list|()
expr_stmt|;
end_expr_stmt

begin_extern
extern|extern		__gets(
end_extern

begin_operator
unit|)
operator|,
end_operator

begin_expr_stmt
name|__ungs
argument_list|()
expr_stmt|;
end_expr_stmt

begin_decl_stmt
specifier|register
name|char
modifier|*
modifier|*
name|p
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|cin
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|int
name|nmatch
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|format
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|char
name|ch
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|match_ch
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|p
operator|=
operator|&
name|paramlist
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|__getc
operator|=
name|cgetc
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|__ungc
operator|=
name|ungetc
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|__input
operator|=
name|cin
expr_stmt|;
end_expr_stmt

begin_if
if|if
condition|(
name|paramlist
operator|==
operator|-
literal|1
condition|)
block|{
name|p
operator|++
expr_stmt|;
name|__getc
operator|=
name|__gets
expr_stmt|;
name|__ungc
operator|=
name|__ungs
expr_stmt|;
name|__input
operator|=
name|p
operator|++
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|paramlist
operator|>=
literal|0
operator|&&
name|paramlist
operator|<
name|MAXFILES
condition|)
block|{
name|__input
operator|=
operator|*
name|p
operator|++
expr_stmt|;
block|}
end_if

begin_expr_stmt
name|nmatch
operator|=
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|format
operator|=
operator|*
name|p
operator|++
expr_stmt|;
end_expr_stmt

begin_while
while|while
condition|(
literal|1
condition|)
block|{
switch|switch
condition|(
name|ch
operator|=
operator|*
name|format
operator|++
condition|)
block|{
case|case
literal|'\0'
case|:
return|return
operator|(
name|nmatch
operator|)
return|;
case|case
literal|'%'
case|:
if|if
condition|(
operator|*
name|format
operator|!=
literal|'%'
condition|)
block|{
switch|switch
condition|(
name|__scan
argument_list|(
operator|&
name|format
argument_list|,
operator|*
name|p
argument_list|)
condition|)
block|{
case|case
literal|1
case|:
comment|/* good return */
name|p
operator|++
expr_stmt|;
name|nmatch
operator|++
expr_stmt|;
case|case
literal|0
case|:
comment|/* no return */
break|break;
case|case
operator|-
literal|1
case|:
comment|/* no match */
return|return
operator|(
name|nmatch
operator|)
return|;
case|case
operator|-
literal|2
case|:
comment|/* end of file */
return|return
operator|(
name|nmatch
condition|?
name|nmatch
else|:
operator|-
literal|1
operator|)
return|;
default|default:
comment|/* syntax error */
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
break|break;
block|}
name|format
operator|++
expr_stmt|;
default|default:
name|match_ch
operator|=
name|__next
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|ch
operator|!=
name|match_ch
condition|)
block|{
call|(
modifier|*
name|__ungc
call|)
argument_list|(
name|match_ch
argument_list|,
name|__input
argument_list|)
expr_stmt|;
return|return
operator|(
name|nmatch
condition|?
name|nmatch
else|:
operator|-
literal|2
operator|)
return|;
block|}
break|break;
block|}
block|}
end_while

begin_expr_stmt
unit|}   __scan
operator|(
name|spec
operator|,
name|result
operator|)
name|char
operator|*
operator|*
name|spec
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|char
modifier|*
name|result
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|int
name|longf
decl_stmt|,
name|length
decl_stmt|;
specifier|register
name|char
name|ch
decl_stmt|;
specifier|extern
name|int
name|__strend
argument_list|()
decl_stmt|,
name|__splend
argument_list|()
decl_stmt|;
name|longf
operator|=
name|length
operator|=
literal|0
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
switch|switch
condition|(
name|ch
operator|=
operator|*
operator|(
operator|*
name|spec
operator|)
operator|++
condition|)
block|{
case|case
literal|'*'
case|:
name|result
operator|=
literal|0
expr_stmt|;
break|break;
case|case
literal|'0'
case|:
case|case
literal|'1'
case|:
case|case
literal|'2'
case|:
case|case
literal|'3'
case|:
case|case
literal|'4'
case|:
case|case
literal|'5'
case|:
case|case
literal|'6'
case|:
case|case
literal|'7'
case|:
case|case
literal|'8'
case|:
case|case
literal|'9'
case|:
name|length
operator|=
name|length
operator|*
literal|10
operator|+
name|ch
operator|-
literal|'0'
expr_stmt|;
break|break;
case|case
literal|'l'
case|:
if|if
condition|(
name|longf
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
name|longf
operator|=
literal|1
expr_stmt|;
break|break;
case|case
literal|'h'
case|:
comment|/* short */
if|if
condition|(
name|longf
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
name|longf
operator|=
operator|-
literal|1
expr_stmt|;
break|break;
case|case
literal|'o'
case|:
case|case
literal|'O'
case|:
return|return
operator|(
name|__dec
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|100
argument_list|,
literal|8
argument_list|,
name|longf
argument_list|)
operator|)
return|;
case|case
literal|'d'
case|:
case|case
literal|'D'
case|:
return|return
operator|(
name|__dec
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|100
argument_list|,
literal|10
argument_list|,
name|longf
argument_list|)
operator|)
return|;
case|case
literal|'x'
case|:
case|case
literal|'X'
case|:
return|return
operator|(
name|__dec
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|100
argument_list|,
literal|16
argument_list|,
name|longf
argument_list|)
operator|)
return|;
case|case
literal|'c'
case|:
case|case
literal|'C'
case|:
if|if
condition|(
name|longf
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
return|return
operator|(
name|__char
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|1
argument_list|)
operator|)
return|;
case|case
literal|'s'
case|:
case|case
literal|'S'
case|:
if|if
condition|(
name|longf
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
return|return
operator|(
name|__str
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|100
argument_list|,
name|__strend
argument_list|)
operator|)
return|;
case|case
literal|'e'
case|:
case|case
literal|'E'
case|:
case|case
literal|'f'
case|:
case|case
literal|'F'
case|:
if|if
condition|(
name|longf
operator|<
literal|0
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
return|return
operator|(
name|__float
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|100
argument_list|,
name|longf
argument_list|)
operator|)
return|;
case|case
literal|'['
case|:
if|if
condition|(
name|longf
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
if|if
condition|(
name|__inits
argument_list|(
name|spec
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|3
operator|)
return|;
return|return
operator|(
name|__str
argument_list|(
name|result
argument_list|,
name|length
condition|?
name|length
else|:
literal|100
argument_list|,
name|__splend
argument_list|)
operator|)
return|;
default|default:
return|return
operator|(
operator|-
literal|3
operator|)
return|;
block|}
block|}
block|}
end_block

begin_macro
name|__dec
argument_list|(
argument|result
argument_list|,
argument|length
argument_list|,
argument|base
argument_list|,
argument|longf
argument_list|)
end_macro

begin_decl_stmt
name|int
modifier|*
name|result
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|length
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|base
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|longf
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
name|ch
decl_stmt|;
name|long
name|n
decl_stmt|,
modifier|*
name|lresult
decl_stmt|;
specifier|register
name|int
name|val
decl_stmt|;
name|long
name|lres
decl_stmt|;
name|int
name|ires
decl_stmt|;
name|int
name|minus
decl_stmt|,
name|ok
decl_stmt|;
specifier|register
name|int
name|ndigit
decl_stmt|;
name|ires
operator|=
literal|0
expr_stmt|;
name|lres
operator|=
literal|0
expr_stmt|;
name|ndigit
operator|=
name|minus
operator|=
literal|0
expr_stmt|;
switch|switch
condition|(
name|ch
operator|=
name|__next
argument_list|(
literal|1
argument_list|)
condition|)
block|{
case|case
literal|'\0'
case|:
return|return
operator|(
operator|-
literal|2
operator|)
return|;
case|case
literal|'-'
case|:
name|minus
operator|=
literal|1
expr_stmt|;
case|case
literal|'+'
case|:
name|ndigit
operator|++
expr_stmt|;
name|ch
operator|=
name|__next
argument_list|(
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
name|ok
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|(
name|val
operator|=
name|__digit
argument_list|(
name|ch
argument_list|,
name|base
argument_list|)
operator|)
operator|>=
literal|0
operator|&&
name|ndigit
operator|++
operator|<
name|length
condition|)
block|{
name|ok
operator|++
expr_stmt|;
if|if
condition|(
name|longf
condition|)
name|lres
operator|=
name|lres
operator|*
name|base
operator|+
name|val
expr_stmt|;
else|else
name|ires
operator|=
name|ires
operator|*
name|base
operator|+
name|val
expr_stmt|;
name|ch
operator|=
name|__next
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
call|(
modifier|*
name|__ungc
call|)
argument_list|(
name|ch
argument_list|,
name|__input
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|ok
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
if|if
condition|(
operator|!
name|result
condition|)
return|return
operator|(
literal|0
operator|)
return|;
if|if
condition|(
name|minus
condition|)
if|if
condition|(
name|longf
condition|)
name|lres
operator|=
operator|-
name|lres
expr_stmt|;
else|else
name|ires
operator|=
operator|-
name|ires
expr_stmt|;
if|if
condition|(
name|longf
condition|)
block|{
name|lresult
operator|=
name|result
expr_stmt|;
operator|*
name|lresult
operator|=
name|lres
expr_stmt|;
block|}
else|else
operator|*
name|result
operator|=
name|ires
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_block

begin_macro
name|__next
argument_list|(
argument|mode
argument_list|)
end_macro

begin_decl_stmt
name|int
name|mode
decl_stmt|;
end_decl_stmt

begin_block
block|{
comment|/*  *	mode -1:  get next non-space or non-tab  *	mode 0:   get next character  *	mode 1:   get next non-space, non-tab, or non-newline  */
specifier|register
name|int
name|ch
decl_stmt|;
name|ch
operator|=
call|(
modifier|*
name|__getc
call|)
argument_list|(
name|__input
argument_list|)
expr_stmt|;
if|if
condition|(
name|mode
operator|==
literal|0
condition|)
return|return
operator|(
name|ch
operator|)
return|;
while|while
condition|(
name|ch
operator|==
literal|' '
operator|||
name|ch
operator|==
literal|'\t'
operator|||
name|ch
operator|==
literal|'\n'
condition|)
block|{
if|if
condition|(
name|ch
operator|==
literal|'\n'
operator|&&
name|mode
operator|<
literal|0
condition|)
break|break;
name|ch
operator|=
call|(
modifier|*
name|__getc
call|)
argument_list|(
name|__input
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
name|ch
operator|)
return|;
block|}
end_block

begin_macro
name|__digit
argument_list|(
argument|ch
argument_list|,
argument|base
argument_list|)
end_macro

begin_decl_stmt
name|char
name|ch
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|base
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|int
name|n
decl_stmt|;
if|if
condition|(
name|ch
operator|<
literal|'0'
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
if|if
condition|(
name|ch
operator|<=
literal|'7'
condition|)
return|return
operator|(
name|ch
operator|-
literal|'0'
operator|)
return|;
if|if
condition|(
name|base
operator|==
literal|8
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
if|if
condition|(
name|ch
operator|<=
literal|'9'
condition|)
return|return
operator|(
name|ch
operator|-
literal|'0'
operator|)
return|;
if|if
condition|(
name|base
operator|==
literal|10
operator|||
name|ch
operator|<
literal|'A'
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
if|if
condition|(
name|ch
operator|<=
literal|'F'
condition|)
return|return
operator|(
name|ch
operator|-
literal|'A'
operator|+
literal|10
operator|)
return|;
if|if
condition|(
name|ch
operator|<
literal|'a'
operator|||
name|ch
operator|>
literal|'f'
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
return|return
operator|(
name|ch
operator|-
literal|'a'
operator|+
literal|10
operator|)
return|;
block|}
end_block

begin_macro
name|__fltend
argument_list|(
argument|cha
argument_list|)
end_macro

begin_decl_stmt
name|char
name|cha
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
name|ch
decl_stmt|;
specifier|static
name|char
name|gote
decl_stmt|,
name|gotpt
decl_stmt|,
name|gotsn
decl_stmt|;
name|ch
operator|=
name|cha
expr_stmt|;
if|if
condition|(
name|ch
operator|<
literal|0
condition|)
return|return
operator|(
name|gote
operator|=
name|gotpt
operator|=
name|gotsn
operator|=
literal|0
operator|)
return|;
if|if
condition|(
name|ch
operator|>=
literal|'0'
operator|&&
name|ch
operator|<=
literal|'9'
condition|)
block|{
name|gotsn
operator|=
operator|-
literal|1
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|ch
operator|==
literal|'+'
operator|||
name|ch
operator|==
literal|'-'
condition|)
block|{
if|if
condition|(
name|gotsn
operator|||
name|gotpt
condition|)
return|return
operator|(
literal|1
operator|)
return|;
name|gotsn
operator|=
literal|1
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|ch
operator|==
literal|'.'
condition|)
block|{
if|if
condition|(
name|gote
operator|||
name|gotpt
condition|)
return|return
operator|(
literal|1
operator|)
return|;
name|gotpt
operator|++
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|ch
operator|!=
literal|'e'
operator|&&
name|ch
operator|!=
literal|'E'
condition|)
return|return
operator|(
literal|1
operator|)
return|;
if|if
condition|(
name|gote
condition|)
return|return
operator|(
literal|1
operator|)
return|;
name|gote
operator|++
expr_stmt|;
name|gotsn
operator|=
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_block

begin_macro
name|__strend
argument_list|(
argument|cha
argument_list|)
end_macro

begin_decl_stmt
name|char
name|cha
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
name|ch
decl_stmt|;
name|ch
operator|=
name|cha
expr_stmt|;
if|if
condition|(
name|ch
operator|==
literal|' '
operator|||
name|ch
operator|==
literal|'\t'
operator|||
name|ch
operator|==
literal|'\n'
operator|||
name|ch
operator|==
literal|'\0'
condition|)
return|return
operator|(
literal|1
operator|)
return|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_block

begin_decl_stmt
name|char
name|__splset
index|[
literal|128
index|]
decl_stmt|;
end_decl_stmt

begin_macro
name|__splend
argument_list|(
argument|ch
argument_list|)
end_macro

begin_decl_stmt
name|char
name|ch
decl_stmt|;
end_decl_stmt

begin_block
block|{
return|return
operator|(
name|__splset
index|[
name|ch
index|]
operator|)
return|;
block|}
end_block

begin_macro
name|__inits
argument_list|(
argument|spec
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
modifier|*
name|spec
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
name|ch
decl_stmt|;
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|int
name|val
decl_stmt|;
name|ch
operator|=
operator|*
operator|(
operator|*
name|spec
operator|)
operator|++
expr_stmt|;
if|if
condition|(
name|ch
operator|==
literal|'^'
condition|)
block|{
name|val
operator|=
literal|0
expr_stmt|;
name|ch
operator|=
operator|*
operator|(
operator|*
name|spec
operator|)
operator|++
expr_stmt|;
block|}
else|else
name|val
operator|=
literal|1
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
literal|128
condition|;
name|i
operator|++
control|)
name|__splset
index|[
name|i
index|]
operator|=
name|val
expr_stmt|;
name|val
operator|=
literal|1
operator|-
name|val
expr_stmt|;
while|while
condition|(
name|ch
operator|!=
literal|']'
condition|)
block|{
if|if
condition|(
name|ch
operator|==
literal|0
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
name|__splset
index|[
name|ch
operator|&
literal|0177
index|]
operator|=
name|val
expr_stmt|;
name|ch
operator|=
operator|*
operator|(
operator|*
name|spec
operator|)
operator|++
expr_stmt|;
block|}
name|__splset
index|[
literal|0
index|]
operator|=
literal|1
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_block

begin_macro
name|__float
argument_list|(
argument|result
argument_list|,
argument|length
argument_list|,
argument|longf
argument_list|)
end_macro

begin_decl_stmt
name|double
modifier|*
name|result
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|length
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|longf
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|extern
name|int
name|__fltend
parameter_list|()
function_decl|;
name|char
name|temp
index|[
literal|101
index|]
decl_stmt|;
name|float
modifier|*
name|fres
decl_stmt|;
specifier|register
name|int
name|r
decl_stmt|;
name|double
name|x
decl_stmt|;
specifier|extern
name|double
name|atof
parameter_list|()
function_decl|;
name|__fltend
argument_list|(
operator|-
literal|1
argument_list|)
expr_stmt|;
name|r
operator|=
name|__str
argument_list|(
name|temp
argument_list|,
name|length
argument_list|,
name|__fltend
argument_list|)
expr_stmt|;
if|if
condition|(
name|r
operator|<
literal|0
condition|)
return|return
operator|(
name|r
operator|)
return|;
if|if
condition|(
operator|!
name|result
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|x
operator|=
name|atof
argument_list|(
name|temp
argument_list|)
expr_stmt|;
if|if
condition|(
name|longf
condition|)
block|{
operator|*
name|result
operator|=
name|x
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
name|fres
operator|=
name|result
expr_stmt|;
operator|*
name|fres
operator|=
name|x
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_block

begin_macro
name|__str
argument_list|(
argument|result
argument_list|,
argument|length
argument_list|,
argument|endfn
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|result
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|length
decl_stmt|;
end_decl_stmt

begin_function_decl
name|int
function_decl|(
modifier|*
name|endfn
function_decl|)
parameter_list|()
function_decl|;
end_function_decl

begin_block
block|{
specifier|register
name|char
name|ch
decl_stmt|;
specifier|extern
name|int
name|__splend
parameter_list|()
function_decl|;
specifier|register
name|int
name|imode
decl_stmt|,
name|notok
decl_stmt|;
name|notok
operator|=
literal|1
expr_stmt|;
name|imode
operator|=
operator|(
name|endfn
operator|!=
name|__splend
operator|)
expr_stmt|;
while|while
condition|(
operator|!
call|(
modifier|*
name|endfn
call|)
argument_list|(
name|ch
operator|=
name|__next
argument_list|(
name|imode
argument_list|)
argument_list|)
operator|&&
name|length
operator|--
operator|>
literal|0
condition|)
block|{
if|if
condition|(
name|result
condition|)
operator|*
name|result
operator|++
operator|=
name|ch
expr_stmt|;
name|imode
operator|=
name|notok
operator|=
literal|0
expr_stmt|;
block|}
call|(
modifier|*
name|__ungc
call|)
argument_list|(
name|ch
argument_list|,
name|__input
argument_list|)
expr_stmt|;
if|if
condition|(
name|notok
condition|)
return|return
operator|(
name|ch
condition|?
operator|-
literal|1
else|:
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|!
name|result
condition|)
return|return
operator|(
literal|0
operator|)
return|;
operator|*
name|result
operator|=
literal|0
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_block

begin_macro
name|__char
argument_list|(
argument|result
argument_list|,
argument|length
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|result
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|length
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
modifier|*
name|r
decl_stmt|,
name|ch
decl_stmt|;
specifier|register
name|int
name|l
decl_stmt|;
name|r
operator|=
name|result
expr_stmt|;
name|l
operator|=
name|length
expr_stmt|;
while|while
condition|(
name|l
operator|--
condition|)
block|{
if|if
condition|(
operator|(
name|ch
operator|=
name|__next
argument_list|(
literal|0
argument_list|)
operator|)
operator|<=
literal|0
condition|)
if|if
condition|(
name|l
operator|+
literal|1
operator|==
name|length
condition|)
return|return
operator|(
name|ch
condition|?
operator|-
literal|1
else|:
operator|-
literal|2
operator|)
return|;
else|else
return|return
operator|(
name|result
operator|!=
literal|0
operator|)
return|;
if|if
condition|(
name|result
condition|)
operator|*
name|result
operator|++
operator|=
name|ch
expr_stmt|;
block|}
return|return
operator|(
name|result
operator|!=
literal|0
operator|)
return|;
block|}
end_block

begin_macro
name|__gets
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
name|c
decl_stmt|;
name|c
operator|=
operator|*
operator|*
name|s
expr_stmt|;
if|if
condition|(
name|c
condition|)
operator|(
operator|*
name|s
operator|)
operator|++
expr_stmt|;
return|return
operator|(
name|c
operator|)
return|;
block|}
end_block

begin_macro
name|__ungs
argument_list|(
argument|c
argument_list|,
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
name|c
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
name|c
condition|)
operator|(
operator|*
name|s
operator|)
operator|--
expr_stmt|;
block|}
end_block

end_unit

