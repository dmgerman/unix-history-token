begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Copyright (c) 1979 Regents of the University of California */
end_comment

begin_comment
comment|/*  * Print out the time to a human desirable  * accuracy.  *  * Author: Kurt Shoens (UCB) July 11, 1978  */
end_comment

begin_decl_stmt
name|char
modifier|*
name|hourNames
index|[]
block|{
literal|"midnight"
operator|,
literal|"one"
operator|,
literal|"two"
operator|,
literal|"three"
operator|,
literal|"four"
operator|,
literal|"five"
operator|,
literal|"six"
operator|,
literal|"seven"
operator|,
literal|"eight"
operator|,
literal|"nine"
operator|,
literal|"ten"
operator|,
literal|"eleven"
operator|,
literal|"noon"
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|char
modifier|*
name|quadrants
index|[]
block|{
literal|"o' clock"
operator|,
literal|"quarter past"
operator|,
literal|"half past"
operator|,
literal|"quarter 'til"
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
name|int
name|hour
decl_stmt|,
modifier|*
name|t
decl_stmt|,
name|min
decl_stmt|,
name|q
decl_stmt|,
name|tv
index|[
literal|2
index|]
decl_stmt|;
name|char
modifier|*
name|hs
decl_stmt|,
modifier|*
name|qs
decl_stmt|;
name|time
argument_list|(
name|tv
argument_list|)
expr_stmt|;
name|t
operator|=
name|localtime
argument_list|(
name|tv
argument_list|)
expr_stmt|;
name|hour
operator|=
name|t
index|[
literal|2
index|]
expr_stmt|;
name|min
operator|=
name|t
index|[
literal|1
index|]
expr_stmt|;
if|if
condition|(
name|argc
operator|>=
literal|3
condition|)
block|{
name|hour
operator|=
name|atoi
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|min
operator|=
name|atoi
argument_list|(
name|argv
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
block|}
name|q
operator|=
operator|(
name|min
operator|+
literal|8
operator|)
operator|/
literal|15
expr_stmt|;
if|if
condition|(
name|q
operator|>=
literal|4
condition|)
block|{
name|q
operator|=
literal|0
expr_stmt|;
name|hour
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|q
operator|>
literal|2
condition|)
name|hour
operator|++
expr_stmt|;
if|if
condition|(
name|hour
operator|>=
literal|24
condition|)
name|hour
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|hour
operator|>
literal|12
condition|)
name|hour
operator|=
operator|-
literal|12
expr_stmt|;
name|hs
operator|=
name|hourNames
index|[
name|hour
index|]
expr_stmt|;
name|qs
operator|=
name|quadrants
index|[
name|q
index|]
expr_stmt|;
if|if
condition|(
operator|(
name|hour
operator|==
literal|12
operator|||
name|hour
operator|==
literal|0
operator|)
operator|&&
name|q
operator|==
literal|0
condition|)
block|{
operator|*
name|hs
operator|=
name|raise
argument_list|(
operator|*
name|hs
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s\n"
argument_list|,
name|hs
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|q
operator|==
literal|0
condition|)
block|{
operator|*
name|hs
operator|=
name|raise
argument_list|(
operator|*
name|hs
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s %s\n"
argument_list|,
name|hs
argument_list|,
name|qs
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
operator|*
name|qs
operator|=
name|raise
argument_list|(
operator|*
name|qs
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s %s\n"
argument_list|,
name|qs
argument_list|,
name|hs
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * Return the upper case version of the possibly  * lower case letter.  */
end_comment

begin_macro
name|raise
argument_list|(
argument|c
argument_list|)
end_macro

begin_block
block|{
if|if
condition|(
name|c
operator|>=
literal|'a'
operator|&&
name|c
operator|<=
literal|'z'
condition|)
name|c
operator|=
operator|+
literal|'A'
operator|-
literal|'a'
expr_stmt|;
return|return
operator|(
name|c
operator|)
return|;
block|}
end_block

end_unit

