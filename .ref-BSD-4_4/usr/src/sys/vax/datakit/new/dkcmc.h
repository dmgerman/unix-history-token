begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  *	datakit common-control interface definitions  *		@(#)dkcmc.h	1.3 Garage 84/03/27  */
end_comment

begin_comment
comment|/*  *  protocol codes generated by driver  */
end_comment

begin_define
define|#
directive|define
name|T_SRV
value|1
end_define

begin_comment
comment|/* service request */
end_comment

begin_define
define|#
directive|define
name|D_REINIT
value|7
end_define

begin_comment
comment|/* re-init after splice */
end_comment

begin_define
define|#
directive|define
name|T_CHG
value|3
end_define

begin_comment
comment|/* status change to/from cmc */
end_comment

begin_define
define|#
directive|define
name|D_CLOSE
value|1
end_define

begin_comment
comment|/* close a channel */
end_comment

begin_define
define|#
directive|define
name|D_ISCLOSED
value|2
end_define

begin_comment
comment|/* channel is closed */
end_comment

begin_define
define|#
directive|define
name|D_CLOSEALL
value|3
end_define

begin_comment
comment|/* close all channels */
end_comment

begin_define
define|#
directive|define
name|D_SPLICE
value|4
end_define

begin_comment
comment|/* splice two calls together */
end_comment

begin_define
define|#
directive|define
name|T_LSTNR
value|4
end_define

begin_comment
comment|/* keep-alive message */
end_comment

begin_define
define|#
directive|define
name|T_REPLY
value|2
end_define

begin_comment
comment|/* reply to channel setup */
end_comment

begin_define
define|#
directive|define
name|D_OK
value|1
end_define

begin_comment
comment|/* setup OK */
end_comment

begin_define
define|#
directive|define
name|D_OPEN
value|2
end_define

begin_comment
comment|/* channel now open */
end_comment

begin_define
define|#
directive|define
name|D_FAIL
value|3
end_define

begin_comment
comment|/* setup failed */
end_comment

begin_define
define|#
directive|define
name|T_RESTART
value|8
end_define

begin_comment
comment|/* cmc crashed, we should init circuit */
end_comment

begin_struct
struct|struct
name|lmsg
block|{
name|char
name|type
decl_stmt|;
comment|/* message type T_??? */
name|char
name|srv
decl_stmt|;
comment|/* message code D_??? */
name|short
name|param0
decl_stmt|;
comment|/* various aditional info */
name|short
name|param1
decl_stmt|;
name|short
name|param2
decl_stmt|;
name|short
name|param3
decl_stmt|;
name|short
name|param4
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|CMCFMT
value|"bbsssss"
end_define

begin_define
define|#
directive|define
name|CMCSIZ
value|12
end_define

begin_comment
comment|/*  *	active setup requests  *	(used in dkctl.c)  */
end_comment

begin_struct
struct|struct
name|dksetupreq
block|{
name|int
function_decl|(
modifier|*
name|rq_endfcn
function_decl|)
parameter_list|()
function_decl|;
name|caddr_t
name|rq_endparm
decl_stmt|;
name|struct
name|lmsg
name|rq_msg
decl_stmt|;
block|}
struct|;
end_struct

end_unit

