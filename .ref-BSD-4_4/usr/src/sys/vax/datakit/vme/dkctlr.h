begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|__DKCTLR_H
end_ifndef

begin_comment
comment|/* TUB */
end_comment

begin_define
define|#
directive|define
name|__DKCTLR_H
end_define

begin_define
define|#
directive|define
name|MAXCHNO
value|256
end_define

begin_struct
struct|struct
name|dkctlr
block|{
name|struct
name|device
modifier|*
name|addr
decl_stmt|;
name|struct
name|ptr
modifier|*
name|ptr
decl_stmt|;
comment|/* controller dependent */
name|unsigned
name|maxchno
decl_stmt|;
name|struct
name|dkmodule
modifier|*
name|module
decl_stmt|;
name|struct
name|chan
modifier|*
name|txq
decl_stmt|,
modifier|*
name|txqe
decl_stmt|;
name|struct
name|chan
modifier|*
name|curchan
decl_stmt|;
name|mblk_t
modifier|*
name|rxbp
decl_stmt|;
name|unsigned
name|char
name|state
index|[
name|MAXCHNO
index|]
decl_stmt|;
struct|struct
name|chan
block|{
name|unsigned
name|char
name|exclusive
decl_stmt|;
name|unsigned
name|char
name|txbusy
decl_stmt|;
name|unsigned
name|char
name|buffer
decl_stmt|;
name|unsigned
name|chno
decl_stmt|;
name|queue_t
modifier|*
name|q
decl_stmt|;
name|struct
name|dkctlr
modifier|*
name|ctlr
decl_stmt|;
name|struct
name|chan
modifier|*
name|txql
decl_stmt|;
name|mblk_t
modifier|*
name|curmp
decl_stmt|;
block|}
name|chan
index|[
name|MAXCHNO
index|]
struct|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|dkctlrstat
block|{
comment|/* should be in dkctlr */
name|unsigned
name|rintr
decl_stmt|;
name|unsigned
name|extrab
decl_stmt|;
name|unsigned
name|blocked
decl_stmt|;
name|unsigned
name|noallocb
decl_stmt|;
name|unsigned
name|noqueue
decl_stmt|;
name|unsigned
name|xintr
decl_stmt|;
name|unsigned
name|spin
index|[
literal|8
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_endif
endif|#
directive|endif
endif|__DKCTLR_H
end_endif

end_unit

