begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* MIPS `ECOFF' symbol table external format.    Copyright 1992 Free Software Foundation.    Contributed by Cygnus Support.  Written by John Gilmore.  This file is part of GDB.  This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  */
end_comment

begin_comment
comment|/* ECOFF uses COFF-like section structures, but its own symbol format.    This file defines the symbol format in fields whose size and alignment    will not vary on different host systems.  The bfd module coff-msym.c    converts between external and internal forms of this information,    deals with byte order issues, etc.  */
end_comment

begin_comment
comment|/* File header as a set of bytes */
end_comment

begin_struct
struct|struct
name|hdr_ext
block|{
name|unsigned
name|char
name|h_magic
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|h_vstamp
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|h_ilineMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbLine
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbLineOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_idnMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbDnOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_ipdMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbPdOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_isymMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbSymOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_ioptMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbOptOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_iauxMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbAuxOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_issMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbSsOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_issExtMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbSsExtOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_ifdMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbFdOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_crfd
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbRfdOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_iextMax
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|h_cbExtOffset
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* File descriptor external record */
end_comment

begin_struct
struct|struct
name|fdr_ext
block|{
name|unsigned
name|char
name|f_adr
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_rss
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_issBase
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_cbSs
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_isymBase
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_csym
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_ilineBase
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_cline
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_ioptBase
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_copt
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_ipdFirst
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|f_cpd
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|f_iauxBase
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_caux
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_rfdBase
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_crfd
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_bits1
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|f_bits2
index|[
literal|3
index|]
decl_stmt|;
name|unsigned
name|char
name|f_cbLineOffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|f_cbLine
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|FDR_BITS1_LANG_BIG
value|0xF8
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_LANG_SH_BIG
value|3
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_LANG_LITTLE
value|0x1F
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_LANG_SH_LITTLE
value|0
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_FMERGE_BIG
value|0x04
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_FMERGE_LITTLE
value|0x20
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_FREADIN_BIG
value|0x02
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_FREADIN_LITTLE
value|0x40
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_FBIGENDIAN_BIG
value|0x01
end_define

begin_define
define|#
directive|define
name|FDR_BITS1_FBIGENDIAN_LITTLE
value|0x80
end_define

begin_define
define|#
directive|define
name|FDR_BITS2_GLEVEL_BIG
value|0xC0
end_define

begin_define
define|#
directive|define
name|FDR_BITS2_GLEVEL_SH_BIG
value|6
end_define

begin_define
define|#
directive|define
name|FDR_BITS2_GLEVEL_LITTLE
value|0x03
end_define

begin_define
define|#
directive|define
name|FDR_BITS2_GLEVEL_SH_LITTLE
value|0
end_define

begin_comment
comment|/* We ignore the `reserved' field in bits2. */
end_comment

begin_comment
comment|/* Procedure descriptor external record */
end_comment

begin_struct
struct|struct
name|pdr_ext
block|{
name|unsigned
name|char
name|p_adr
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_isym
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_iline
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_regmask
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_regoffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_iopt
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_fregmask
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_fregoffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_frameoffset
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_framereg
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|p_pcreg
index|[
literal|2
index|]
decl_stmt|;
name|unsigned
name|char
name|p_lnLow
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_lnHigh
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|p_cbLineOffset
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* Line numbers */
end_comment

begin_struct
struct|struct
name|line_ext
block|{
name|unsigned
name|char
name|l_line
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* Symbol external record */
end_comment

begin_struct
struct|struct
name|sym_ext
block|{
name|unsigned
name|char
name|s_iss
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|s_value
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|s_bits1
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|s_bits2
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|s_bits3
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|s_bits4
index|[
literal|1
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|SYM_BITS1_ST_BIG
value|0xFC
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_ST_SH_BIG
value|2
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_ST_LITTLE
value|0x3F
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_ST_SH_LITTLE
value|0
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_SC_BIG
value|0x03
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_SC_SH_LEFT_BIG
value|3
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_SC_LITTLE
value|0xC0
end_define

begin_define
define|#
directive|define
name|SYM_BITS1_SC_SH_LITTLE
value|6
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_SC_BIG
value|0xE0
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_SC_SH_BIG
value|5
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_SC_LITTLE
value|0x07
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_SC_SH_LEFT_LITTLE
value|2
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_RESERVED_BIG
value|0x10
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_RESERVED_LITTLE
value|0x08
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_INDEX_BIG
value|0x0F
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_INDEX_SH_LEFT_BIG
value|16
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_INDEX_LITTLE
value|0xF0
end_define

begin_define
define|#
directive|define
name|SYM_BITS2_INDEX_SH_LITTLE
value|4
end_define

begin_define
define|#
directive|define
name|SYM_BITS3_INDEX_SH_LEFT_BIG
value|8
end_define

begin_define
define|#
directive|define
name|SYM_BITS3_INDEX_SH_LEFT_LITTLE
value|4
end_define

begin_define
define|#
directive|define
name|SYM_BITS4_INDEX_SH_LEFT_BIG
value|0
end_define

begin_define
define|#
directive|define
name|SYM_BITS4_INDEX_SH_LEFT_LITTLE
value|12
end_define

begin_comment
comment|/* External symbol external record */
end_comment

begin_struct
struct|struct
name|ext_ext
block|{
name|unsigned
name|char
name|es_bits1
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|es_bits2
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|es_ifd
index|[
literal|2
index|]
decl_stmt|;
name|struct
name|sym_ext
name|es_asym
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|EXT_BITS1_JMPTBL_BIG
value|0x80
end_define

begin_define
define|#
directive|define
name|EXT_BITS1_JMPTBL_LITTLE
value|0x01
end_define

begin_define
define|#
directive|define
name|EXT_BITS1_COBOL_MAIN_BIG
value|0x40
end_define

begin_define
define|#
directive|define
name|EXT_BITS1_COBOL_MAIN_LITTLE
value|0x02
end_define

begin_define
define|#
directive|define
name|EXT_BITS1_WEAKEXT_BIG
value|0x20
end_define

begin_define
define|#
directive|define
name|EXT_BITS1_WEAKEXT_LITTLE
value|0x04
end_define

begin_comment
comment|/* Type information external record */
end_comment

begin_struct
struct|struct
name|tir_ext
block|{
name|unsigned
name|char
name|t_bits1
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|t_tq45
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|t_tq01
index|[
literal|1
index|]
decl_stmt|;
name|unsigned
name|char
name|t_tq23
index|[
literal|1
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|TIR_BITS1_FBITFIELD_BIG
value|0x80
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_FBITFIELD_LITTLE
value|0x01
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_CONTINUED_BIG
value|0x40
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_CONTINUED_LITTLE
value|0x02
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_BT_BIG
value|0x3F
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_BT_SH_BIG
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_BT_LITTLE
value|0xFC
end_define

begin_define
define|#
directive|define
name|TIR_BITS1_BT_SH_LITTLE
value|2
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ4_BIG
value|0xF0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ4_SH_BIG
value|4
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ5_BIG
value|0x0F
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ5_SH_BIG
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ4_LITTLE
value|0x0F
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ4_SH_LITTLE
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ5_LITTLE
value|0xF0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ5_SH_LITTLE
value|4
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ0_BIG
value|0xF0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ0_SH_BIG
value|4
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ1_BIG
value|0x0F
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ1_SH_BIG
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ0_LITTLE
value|0x0F
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ0_SH_LITTLE
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ1_LITTLE
value|0xF0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ1_SH_LITTLE
value|4
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ2_BIG
value|0xF0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ2_SH_BIG
value|4
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ3_BIG
value|0x0F
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ3_SH_BIG
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ2_LITTLE
value|0x0F
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ2_SH_LITTLE
value|0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ3_LITTLE
value|0xF0
end_define

begin_define
define|#
directive|define
name|TIR_BITS_TQ3_SH_LITTLE
value|4
end_define

begin_comment
comment|/* Relative symbol external record */
end_comment

begin_struct
struct|struct
name|rndx_ext
block|{
name|unsigned
name|char
name|r_bits
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|RNDX_BITS0_RFD_SH_LEFT_BIG
value|4
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_RFD_BIG
value|0xF0
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_RFD_SH_BIG
value|4
end_define

begin_define
define|#
directive|define
name|RNDX_BITS0_RFD_SH_LEFT_LITTLE
value|0
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_RFD_LITTLE
value|0x0F
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_RFD_SH_LEFT_LITTLE
value|8
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_INDEX_BIG
value|0x0F
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_INDEX_SH_LEFT_BIG
value|16
end_define

begin_define
define|#
directive|define
name|RNDX_BITS2_INDEX_SH_LEFT_BIG
value|8
end_define

begin_define
define|#
directive|define
name|RNDX_BITS3_INDEX_SH_LEFT_BIG
value|0
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_INDEX_LITTLE
value|0xF0
end_define

begin_define
define|#
directive|define
name|RNDX_BITS1_INDEX_SH_LITTLE
value|4
end_define

begin_define
define|#
directive|define
name|RNDX_BITS2_INDEX_SH_LEFT_LITTLE
value|4
end_define

begin_define
define|#
directive|define
name|RNDX_BITS3_INDEX_SH_LEFT_LITTLE
value|12
end_define

begin_comment
comment|/* Dense numbers external record */
end_comment

begin_struct
struct|struct
name|dnr_ext
block|{
name|unsigned
name|char
name|d_rfd
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|d_index
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* Auxliliary symbol information external record */
end_comment

begin_union
union|union
name|aux_ext
block|{
name|struct
name|tir_ext
name|a_ti
decl_stmt|;
name|struct
name|rndx_ext
name|a_rndx
decl_stmt|;
name|unsigned
name|char
name|a_dnLow
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|a_dnHigh
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|a_isym
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|a_iss
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|a_width
index|[
literal|4
index|]
decl_stmt|;
name|unsigned
name|char
name|a_count
index|[
literal|4
index|]
decl_stmt|;
block|}
union|;
end_union

begin_comment
comment|/* FIXME!  These are copied from ../bfd/libbfd.h */
end_comment

begin_expr_stmt
name|PROTO
argument_list|(
name|bfd_vma
argument_list|,
name|_do_getb32
argument_list|,
operator|(
name|unsigned
name|char
operator|*
name|addr
operator|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|PROTO
argument_list|(
name|bfd_vma
argument_list|,
name|_do_getl32
argument_list|,
operator|(
name|unsigned
name|char
operator|*
name|addr
operator|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_define
define|#
directive|define
name|AUX_GET_DNLOW
parameter_list|(
name|bigend
parameter_list|,
name|ax
parameter_list|)
value|(bigend? _do_getb32 ((ax)->a_dnLow): \ 						 _do_getl32 ((ax)->a_dnLow))
end_define

begin_define
define|#
directive|define
name|AUX_GET_DNHIGH
parameter_list|(
name|bigend
parameter_list|,
name|ax
parameter_list|)
value|(bigend? _do_getb32 ((ax)->a_dnHigh): \ 						 _do_getl32 ((ax)->a_dnHigh))
end_define

begin_define
define|#
directive|define
name|AUX_GET_ISYM
parameter_list|(
name|bigend
parameter_list|,
name|ax
parameter_list|)
value|(bigend? _do_getb32 ((ax)->a_isym): \ 						 _do_getl32 ((ax)->a_isym))
end_define

begin_define
define|#
directive|define
name|AUX_GET_ISS
parameter_list|(
name|bigend
parameter_list|,
name|ax
parameter_list|)
value|(bigend? _do_getb32 ((ax)->a_iss): \ 						 _do_getl32 ((ax)->a_iss))
end_define

begin_define
define|#
directive|define
name|AUX_GET_WIDTH
parameter_list|(
name|bigend
parameter_list|,
name|ax
parameter_list|)
value|(bigend? _do_getb32 ((ax)->a_width): \ 						 _do_getl32 ((ax)->a_width))
end_define

begin_define
define|#
directive|define
name|AUX_GET_COUNT
parameter_list|(
name|bigend
parameter_list|,
name|ax
parameter_list|)
value|(bigend? _do_getb32 ((ax)->a_count): \ 						 _do_getl32 ((ax)->a_count))
end_define

begin_comment
comment|/* Relative file descriptor */
end_comment

begin_struct
struct|struct
name|rfd_ext
block|{
name|unsigned
name|char
name|rfd
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

end_unit

