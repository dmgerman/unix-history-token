begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* $Id: common.h,v 3.0 1992/02/23 21:25:39 davison Trn $  */
end_comment

begin_comment
comment|/* This software is Copyright 1991 by Stan Barber.   *  * Permission is hereby granted to copy, reproduce, redistribute or otherwise  * use this software as long as: there is no monetary profit gained  * specifically from the use or reproduction of this software, it is not  * sold, rented, traded or otherwise marketed, and this copyright notice is  * included prominently in any copy made.   *  * The author make no claims as to the fitness or correctness of this software  * for any use whatsoever, and it is provided as is. Any use of this software  * is at the user's own risk.   */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<sys/stat.h>
end_include

begin_include
include|#
directive|include
file|<ctype.h>
end_include

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_comment
comment|/* generated by installation script */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|isalnum
end_ifndef

begin_define
define|#
directive|define
name|isalnum
parameter_list|(
name|c
parameter_list|)
value|(isalpha(c) || isdigit(c))
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<errno.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|I_SYS_IOCTL
end_ifdef

begin_include
include|#
directive|include
file|<sys/ioctl.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|I_VFORK
end_ifdef

begin_include
include|#
directive|include
file|<vfork.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<fcntl.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|I_TERMIO
end_ifdef

begin_include
include|#
directive|include
file|<termio.h>
end_include

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|I_TERMIOS
end_ifdef

begin_include
include|#
directive|include
file|<termios.h>
end_include

begin_else
else|#
directive|else
end_else

begin_include
include|#
directive|include
file|<sgtty.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|HAS_GETPWENT
end_ifdef

begin_include
include|#
directive|include
file|<pwd.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|I_PTEM
end_ifdef

begin_include
include|#
directive|include
file|<sys/stream.h>
end_include

begin_include
include|#
directive|include
file|<sys/ptem.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<time.h>
end_include

begin_define
define|#
directive|define
name|BITSPERBYTE
value|8
end_define

begin_define
define|#
directive|define
name|LBUFLEN
value|1024
end_define

begin_comment
comment|/* line buffer length */
end_comment

begin_comment
comment|/* (don't worry, .newsrc lines can exceed this) */
end_comment

begin_define
define|#
directive|define
name|CBUFLEN
value|512
end_define

begin_comment
comment|/* command buffer length */
end_comment

begin_define
define|#
directive|define
name|PUSHSIZE
value|256
end_define

begin_define
define|#
directive|define
name|MAXFILENAME
value|512
end_define

begin_define
define|#
directive|define
name|LONGKEY
value|15
end_define

begin_comment
comment|/* longest keyword: currently "posting-version" */
end_comment

begin_define
define|#
directive|define
name|FINISHCMD
value|0177
end_define

begin_comment
comment|/* some handy defs */
end_comment

begin_define
define|#
directive|define
name|bool
value|char
end_define

begin_define
define|#
directive|define
name|bool_int
value|int
end_define

begin_define
define|#
directive|define
name|char_int
value|int
end_define

begin_ifndef
ifndef|#
directive|ifndef
name|TRUE
end_ifndef

begin_define
define|#
directive|define
name|TRUE
value|(1)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|FALSE
end_ifndef

begin_define
define|#
directive|define
name|FALSE
value|(0)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|Null
parameter_list|(
name|t
parameter_list|)
value|((t)0)
end_define

begin_define
define|#
directive|define
name|Nullch
value|Null(char*)
end_define

begin_define
define|#
directive|define
name|Nullfp
value|Null(FILE*)
end_define

begin_define
define|#
directive|define
name|Ctl
parameter_list|(
name|ch
parameter_list|)
value|(ch& 037)
end_define

begin_define
define|#
directive|define
name|strNE
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|)
value|(strcmp(s1,s2))
end_define

begin_define
define|#
directive|define
name|strEQ
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|)
value|(!strcmp(s1,s2))
end_define

begin_define
define|#
directive|define
name|strnNE
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|,
name|l
parameter_list|)
value|(strncmp(s1,s2,l))
end_define

begin_define
define|#
directive|define
name|strnEQ
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|,
name|l
parameter_list|)
value|(!strncmp(s1,s2,l))
end_define

begin_comment
comment|/* Things we can figure out ourselves */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|SIGTSTP
end_ifdef

begin_define
define|#
directive|define
name|BERKELEY
end_define

begin_comment
comment|/* include job control signals? */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|defined
argument_list|(
name|FIONREAD
argument_list|)
operator|||
name|defined
argument_list|(
name|HAS_RDCHK
argument_list|)
operator|||
name|defined
argument_list|(
name|O_NDELAY
argument_list|)
end_if

begin_define
define|#
directive|define
name|PENDING
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|EUNICE
end_ifdef

begin_define
define|#
directive|define
name|LINKART
end_define

begin_comment
comment|/* add 1 level of possible indirection */
end_comment

begin_define
define|#
directive|define
name|UNLINK
parameter_list|(
name|victim
parameter_list|)
value|while (!unlink(victim))
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|UNLINK
parameter_list|(
name|victim
parameter_list|)
value|unlink(victim)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* Valid substitutions for strings marked with % comment are:  *	%a	Current article number  *	%A	Full name of current article (%P/%c/%a)  *		(if LINKART defined, is the name of the real article)  *	%b	Destination of a save command, a mailbox or command  *	%B	The byte offset to the beginning of the article for saves  *		with or without the header  *	%c	Current newsgroup, directory form  *	%C	Current newsgroup, dot form  *	%d	%P/%c  *	%D	Old Distribution: line  *	%e	Extract program  *	%E	Extract destination directory  *	%f	Old From: line or Reply-To: line  *	%F	Newsgroups to followup to from Newsgroups: and Followup-To:  *	%h	Name of header file to pass to mail or news poster  *	%H	Host name (yours)  *	%i	Old Message-I.D.: line, with<>  *	%I	Inclusion indicator  *	%l	News administrator login name  *	%L	Login name (yours)  *	%m	The current mode of trn.  *	%M	Number of articles marked with M  *	%n	Newsgroups from source article  *	%N	Full name (yours)  *	%o	Organization (yours)  *	%O	Original working directory (where you ran trn from)  *	%p	Your private news directory (-d switch)  *	%P	Public news spool directory (NEWSSPOOL)  *	%r	Last reference (parent article id)  *	%R	New references list  *	%s	Subject, with all Re's and (nf)'s stripped off  *	%S	Subject, with one Re stripped off  *	%t	New To: line derived from From: and Reply-To (Internet always)  *	%T	New To: line derived from Path:  *	%u	Number of unread articles  *	%U	Number of unread articles disregarding current article  *	%v	Number of unselected articles disregarding current article  *	%W	The thread directory root  *	%x	News library directory, usually /usr/lib/news  *	%X	Rn library directory, usually %x/rn  *	%z	Size of current article in bytes.  *	%Z	Number of selected threads.  *	%~	Home directory  *	%.	Directory containing . files  *	%#	count of articles saved in current command (from 1 to n)  *	%$	current process number  *	%{name} Environment variable "name".  %{name-default} form allowed.  *	%[name]	Header line beginning with "Name: ", without "Name: "   *	%"prompt"  *		Print prompt and insert what is typed.  *	%`command`  *		Insert output of command.  *	%(test_text=pattern?if_text:else_text)  *		Substitute if_text if test_text matches pattern, otherwise  *		substitute else_text.  Use != for negated match.  *		% substitutions are done on test_text, if_text, and else_text.  *		(Note: %() only works if CONDSUB defined.)  *	%digit	Substitute the text matched by the nth bracket in the last  *		pattern that had brackets.  %0 matches the last bracket  *		matched, in case you had alternatives.  *  *	Put ^ in the middle to capitalize the first letter: %^C = Rec.humor  *	Put _ in the middle to capitalize last component: %_c = net/Jokes  *	Put \ in the middle to quote regexp and % characters in the result  *	Put :FMT in the middle to format the result: %:-30.30t  *  *	~ interpretation in filename expansion happens after % expansion, so  *	you could put ~%{NEWSLOGNAME-news} and it will expand correctly.  */
end_comment

begin_comment
comment|/* *** System Dependent Stuff *** */
end_comment

begin_comment
comment|/* NOTE: many of these are defined in the config.h file */
end_comment

begin_comment
comment|/* name of organization */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ORGNAME
end_ifndef

begin_define
define|#
directive|define
name|ORGNAME
value|"ACME Widget Company, Widget Falls, Southern North Dakota"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|MBOXCHAR
end_ifndef

begin_define
define|#
directive|define
name|MBOXCHAR
value|'F'
end_define

begin_comment
comment|/* how to recognize a mailbox by 1st char */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|ROOTID
end_ifndef

begin_define
define|#
directive|define
name|ROOTID
value|0
end_define

begin_comment
comment|/* uid of superuser */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|NORMSIG
end_ifdef

begin_define
define|#
directive|define
name|sigset
value|signal
end_define

begin_define
define|#
directive|define
name|sigignore
parameter_list|(
name|sig
parameter_list|)
value|signal(sig,SIG_IGN)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|LOGDIRFIELD
end_ifndef

begin_define
define|#
directive|define
name|LOGDIRFIELD
value|6
end_define

begin_comment
comment|/* Which field (origin 1) is the */
end_comment

begin_comment
comment|/* login directory in /etc/passwd? */
end_comment

begin_comment
comment|/* (If it is not kept in passwd, */
end_comment

begin_comment
comment|/* but getpwnam() returns it, */
end_comment

begin_comment
comment|/* define the symbol HAS_GETPWENT) */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|GCOSFIELD
end_ifndef

begin_define
define|#
directive|define
name|GCOSFIELD
value|5
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|NEGCHAR
end_ifndef

begin_define
define|#
directive|define
name|NEGCHAR
value|'!'
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* Space conservation section */
end_comment

begin_comment
comment|/* To save D space, cut down size of NGMAX and  VARYSIZE. */
end_comment

begin_define
define|#
directive|define
name|NGMAX
value|100
end_define

begin_comment
comment|/* number of newsgroups allowed on command line */
end_comment

begin_comment
comment|/* undefine ONLY symbol to disable "only" feature */
end_comment

begin_define
define|#
directive|define
name|VARYSIZE
value|256
end_define

begin_comment
comment|/* this makes a block 1024 bytes long in DECville */
end_comment

begin_comment
comment|/* (used by virtual array routines) */
end_comment

begin_comment
comment|/* Undefine any of the following features to save both I and D space */
end_comment

begin_comment
comment|/* In general, earlier ones are easier to get along without */
end_comment

begin_define
define|#
directive|define
name|CUSTOMLINES
end_define

begin_comment
comment|/* include code for HIDELINE and PAGESTOP */
end_comment

begin_define
define|#
directive|define
name|WORDERASE
end_define

begin_comment
comment|/* enable ^W to erase a word */
end_comment

begin_define
define|#
directive|define
name|MAILCALL
end_define

begin_comment
comment|/* check periodically for mail */
end_comment

begin_define
define|#
directive|define
name|CLEAREOL
end_define

begin_comment
comment|/* use clear to end-of-line instead of clear screen */
end_comment

begin_define
define|#
directive|define
name|NOFIREWORKS
end_define

begin_comment
comment|/* keep whole screen from flashing on certain */
end_comment

begin_comment
comment|/* terminals such as older Televideos */
end_comment

begin_define
define|#
directive|define
name|VERIFY
end_define

begin_comment
comment|/* echo the command they just typed */
end_comment

begin_define
define|#
directive|define
name|HASHNG
end_define

begin_comment
comment|/* hash newsgroup lines for fast lookup-- */
end_comment

begin_comment
comment|/* linear search used if not defined */
end_comment

begin_define
define|#
directive|define
name|CONDSUB
end_define

begin_comment
comment|/* allow %(cond?text:text) */
end_comment

begin_define
define|#
directive|define
name|BACKTICK
end_define

begin_comment
comment|/* allow %`command` */
end_comment

begin_define
define|#
directive|define
name|PROMPTTTY
end_define

begin_comment
comment|/* allow %"prompt" */
end_comment

begin_define
define|#
directive|define
name|ULSMARTS
end_define

begin_comment
comment|/* catch _^H in text and do underlining */
end_comment

begin_define
define|#
directive|define
name|TERMMOD
end_define

begin_comment
comment|/* allow terminal type modifier on switches */
end_comment

begin_define
define|#
directive|define
name|BAUDMOD
end_define

begin_comment
comment|/* allow baudrate modifier on switches */
end_comment

begin_define
define|#
directive|define
name|GETLOGIN
end_define

begin_comment
comment|/* use getlogin() routine as backup to environment */
end_comment

begin_comment
comment|/* variables USER or LOGNAME */
end_comment

begin_define
define|#
directive|define
name|ORGFILE
end_define

begin_comment
comment|/* if organization begins with /, look up in file */
end_comment

begin_define
define|#
directive|define
name|TILDENAME
end_define

begin_comment
comment|/* allow ~logname expansion */
end_comment

begin_define
define|#
directive|define
name|SETENV
end_define

begin_comment
comment|/* allow command line environment variable setting */
end_comment

begin_define
define|#
directive|define
name|MAKEDIR
end_define

begin_comment
comment|/* use our makedir() instead of shell script */
end_comment

begin_define
define|#
directive|define
name|MEMHELP
end_define

begin_comment
comment|/* keep help messages in memory */
end_comment

begin_define
define|#
directive|define
name|VERBOSE
end_define

begin_comment
comment|/* compile in more informative messages */
end_comment

begin_define
define|#
directive|define
name|TERSE
end_define

begin_comment
comment|/* compile in shorter messages */
end_comment

begin_comment
comment|/* (Note: both VERBOSE and TERSE can be defined; -t 			 * sets terse mode.  One or the other MUST be defined. 			 */
end_comment

begin_define
define|#
directive|define
name|ROTATION
end_define

begin_comment
comment|/* enable x, X and ^X commands to work */
end_comment

begin_define
define|#
directive|define
name|DELBOGUS
end_define

begin_comment
comment|/* ask if bogus newsgroups should be deleted */
end_comment

begin_define
define|#
directive|define
name|RELOCATE
end_define

begin_comment
comment|/* allow newsgroup rearranging */
end_comment

begin_define
define|#
directive|define
name|ESCSUBS
end_define

begin_comment
comment|/* escape substitutions in multi-character commands */
end_comment

begin_undef
undef|#
directive|undef
name|MCHASE
end_undef

begin_comment
comment|/* unmark xrefed articles on m or M */
end_comment

begin_define
define|#
directive|define
name|MUNGHEADER
end_define

begin_comment
comment|/* allow alternate header formatting via */
end_comment

begin_comment
comment|/* environment variable ALTHEADER (not impl) */
end_comment

begin_define
define|#
directive|define
name|ASYNC_PARSE
end_define

begin_comment
comment|/* allow parsing headers asyncronously to reading */
end_comment

begin_comment
comment|/* used by MCHASE and MUNGHEADER */
end_comment

begin_define
define|#
directive|define
name|FINDNEWNG
end_define

begin_comment
comment|/* check for new newsgroups on startup */
end_comment

begin_define
define|#
directive|define
name|FASTNEW
end_define

begin_comment
comment|/* do optimizations on FINDNEWNG for faster startup */
end_comment

begin_comment
comment|/* (this optimization can make occasional mistakes */
end_comment

begin_comment
comment|/* if a group is removed and another group of the */
end_comment

begin_comment
comment|/* same length is added, and if no softpointers are */
end_comment

begin_comment
comment|/* affected by said change.) */
end_comment

begin_define
define|#
directive|define
name|INNERSEARCH
end_define

begin_comment
comment|/* search command 'g' with article */
end_comment

begin_define
define|#
directive|define
name|CATCHUP
end_define

begin_comment
comment|/* catchup command at newsgroup level */
end_comment

begin_define
define|#
directive|define
name|NGSEARCH
end_define

begin_comment
comment|/* newsgroup pattern matching */
end_comment

begin_define
define|#
directive|define
name|ONLY
end_define

begin_comment
comment|/* newsgroup restrictions by pattern */
end_comment

begin_define
define|#
directive|define
name|KILLFILES
end_define

begin_comment
comment|/* automatic article killer files */
end_comment

begin_define
define|#
directive|define
name|ARTSEARCH
end_define

begin_comment
comment|/* pattern searches among articles */
end_comment

begin_comment
comment|/* /, ?, ^N, ^P, k, K */
end_comment

begin_define
define|#
directive|define
name|EDIT_DISTANCE
end_define

begin_comment
comment|/* Allow -G to specify a fuzzy 'go' command */
end_comment

begin_undef
undef|#
directive|undef
name|METAMAIL
end_undef

begin_comment
comment|/* use metamail to process mime articles */
end_comment

begin_comment
comment|/* some dependencies among options */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ARTSEARCH
end_ifndef

begin_undef
undef|#
directive|undef
name|KILLFILES
end_undef

begin_undef
undef|#
directive|undef
name|INNERSEARCH
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SETUIDGID
end_ifndef

begin_define
define|#
directive|define
name|eaccess
value|access
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|ONLY
end_ifdef

begin_comment
comment|/* idiot lint doesn't grok #if */
end_comment

begin_define
define|#
directive|define
name|NGSORONLY
end_define

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|NGSEARCH
end_ifdef

begin_define
define|#
directive|define
name|NGSORONLY
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|VERBOSE
end_ifdef

begin_ifdef
ifdef|#
directive|ifdef
name|TERSE
end_ifdef

begin_define
define|#
directive|define
name|IF
parameter_list|(
name|c
parameter_list|)
value|if (c)
end_define

begin_define
define|#
directive|define
name|ELSE
value|else
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|IF
parameter_list|(
name|c
parameter_list|)
end_define

begin_define
define|#
directive|define
name|ELSE
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_comment
comment|/* !VERBOSE */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|TERSE
end_ifndef

begin_define
define|#
directive|define
name|TERSE
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|IF
parameter_list|(
name|c
parameter_list|)
value|"IF" outside of VERBOSE???
end_define

begin_define
define|#
directive|define
name|ELSE
value|"ELSE" outside of VERBOSE???
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|DEBUG
end_ifdef

begin_define
define|#
directive|define
name|assert
parameter_list|(
name|ex
parameter_list|)
value|{if (!(ex)){fprintf(stderr,"Assertion failed: file %s, line %d\n", __FILE__, __LINE__);sig_catcher(0);}}
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|assert
parameter_list|(
name|ex
parameter_list|)
value|;
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* If you're strapped for space use the help messages in shell scripts */
end_comment

begin_comment
comment|/* if {NG,ART,PAGER,SUBS}HELP is undefined, help messages are in memory */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|MEMHELP
end_ifdef

begin_comment
comment|/* undef MEMHELP above to get them all as sh scripts */
end_comment

begin_undef
undef|#
directive|undef
name|NGHELP
end_undef

begin_undef
undef|#
directive|undef
name|ARTHELP
end_undef

begin_undef
undef|#
directive|undef
name|PAGERHELP
end_undef

begin_undef
undef|#
directive|undef
name|SUBSHELP
end_undef

begin_else
else|#
directive|else
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|NGHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NGHELP
value|"%X/ng.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|ARTHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|ARTHELP
value|"%X/art.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|PAGERHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|PAGERHELP
value|"%X/pager.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SUBSHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SUBSHELP
value|"%X/subs.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|TCSIZE
value|512
end_define

begin_comment
comment|/* capacity for termcap strings */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|EDIT_DISTANCE
end_ifdef

begin_define
define|#
directive|define
name|MIN_DIST
value|7
end_define

begin_comment
comment|/* Maximum error count for acceptable match */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* Additional ideas:  *	Make the do_newsgroup() routine a separate process.  *	Keep .newsrc on disk instead of in memory.  *	Overlays, if you have them.  *	Get a bigger machine.  */
end_comment

begin_comment
comment|/* End of Space Conservation Section */
end_comment

begin_comment
comment|/* More System Dependencies */
end_comment

begin_comment
comment|/* news library */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSLIB
end_ifndef

begin_comment
comment|/* ~ and %l only ("~%l" is permissable) */
end_comment

begin_define
define|#
directive|define
name|NEWSLIB
value|"/usr/lib/news"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* path to private executables */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|PRIVLIB
end_ifndef

begin_comment
comment|/* ~, %x and %l only */
end_comment

begin_define
define|#
directive|define
name|PRIVLIB
value|"%x/trn"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* system-wide RNINIT switches */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|GLOBINIT
end_ifndef

begin_define
define|#
directive|define
name|GLOBINIT
value|"%X/INIT"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* where to find news files */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSSPOOL
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSSPOOL
value|"/usr/spool/news"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|THREAD_DIR
end_ifndef

begin_undef
undef|#
directive|undef
name|LONG_THREAD_NAMES
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* default characters to use in the selection menu */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SELECTCHARS
end_ifndef

begin_define
define|#
directive|define
name|SELECTCHARS
value|"abdefgijlorstuvwxyz1234567890BCFGHIKVW"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* file containing list of active newsgroups and max article numbers */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ACTIVE
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|ACTIVE
value|"%x/active"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|DBINIT
end_ifndef

begin_define
define|#
directive|define
name|DBINIT
value|"%W/db.init"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|USE_NNTP
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|ACTIVE_TIMES
end_ifndef

begin_define
define|#
directive|define
name|APPEND_UNSUB
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|USE_XTHREAD
end_ifdef

begin_undef
undef|#
directive|undef
name|USE_XTHREAD
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|USE_XOVER
end_ifdef

begin_undef
undef|#
directive|undef
name|USE_XOVER
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of history file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ARTFILE
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|ARTFILE
value|"%x/history"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to setup a new .newsrc */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSETUP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSETUP
value|"newsetup"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to display a list of un-subscribed-to newsgroups */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSGROUPS
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSGROUPS
value|"newsgroups"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* preferred shell for use in doshell routine */
end_comment

begin_comment
comment|/*  ksh or sh would be okay here */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|PREFSHELL
end_ifndef

begin_define
define|#
directive|define
name|PREFSHELL
value|"/bin/csh"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* path to fastest starting shell */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SH
end_ifndef

begin_define
define|#
directive|define
name|SH
value|"/bin/sh"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* default unshar'ing program */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|UNSHAR
end_ifndef

begin_define
define|#
directive|define
name|UNSHAR
value|"/bin/sh"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|METAMAIL
end_ifdef

begin_comment
comment|/* default MIME extraction program */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MIMESTORE
end_ifndef

begin_define
define|#
directive|define
name|MIMESTORE
value|"/usr/local/bin/mh/mhn -store -auto -file "
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* default MIME show program */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MIMESHOW
end_ifndef

begin_define
define|#
directive|define
name|MIMESHOW
value|"metamail -e -p -m \"trn %s\" %A"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* path to default editor */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|DEFEDITOR
end_ifndef

begin_define
define|#
directive|define
name|DEFEDITOR
value|"/usr/ucb/vi"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of macro file for trn and rn modes */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|TRNMACRO
end_ifndef

begin_define
define|#
directive|define
name|TRNMACRO
value|"%./.trnmac"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|RNMACRO
end_ifndef

begin_define
define|#
directive|define
name|RNMACRO
value|"%./.rnmac"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of full name */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|FULLNAMEFILE
end_ifndef

begin_ifndef
ifndef|#
directive|ifndef
name|PASSNAMES
end_ifndef

begin_define
define|#
directive|define
name|FULLNAMEFILE
value|"%./.fullname"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* virtual array file name template */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|VARYNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|VARYNAME
value|"/tmp/rnvary.%$"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* where to compile a new newsgroup list */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RNEWNAME
end_ifndef

begin_define
define|#
directive|define
name|RNEWNAME
value|"/tmp/rnew.%$"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* file to pass header to followup article poster */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|HEADNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|HEADNAME
value|"%./.rnhead"
end_define

begin_comment
comment|/* or alternately #define HEADNAME "/tmp/rnhead.%$" */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|MAKEDIR
end_ifndef

begin_comment
comment|/* shell script to make n-deep subdirectories */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|DIRMAKER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|DIRMAKER
value|"%X/makedir"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of newsrc file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RCNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RCNAME
value|"%./.newsrc"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* temporary newsrc file in case we crash while writing out */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RCTNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RCTNAME
value|"%./.newnewsrc"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* newsrc file at the beginning of this session */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RCBNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RCBNAME
value|"%./.oldnewsrc"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* if existent, contains process number of current or crashed trn */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LOCKNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|LOCKNAME
value|"%./.rnlock"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* information from last invocation of trn */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LASTNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|LASTNAME
value|"%./.rnlast"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* file with soft pointers into the active file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SOFTNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SOFTNAME
value|"%./.rnsoft"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* list of article numbers to mark as unread later (see M and Y cmmands) */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RNDELNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RNDELNAME
value|"%./.rndelay"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* a motd-like file for trn */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSNEWSNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSNEWSNAME
value|"%X/newsnews"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to send a reply */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MAILPOSTER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|MAILPOSTER
value|"QUOTECHARS=%I Rnmail -h %h"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|INTERNET
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|MAILHEADER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %t\nSubject: Re: %S\n%(%{REPLYTO}=^$?:Reply-To: %{REPLYTO}\n)Newsgroups: %n\nIn-Reply-To: %i\n%(%[references]!=^$?References\\: %[references]\n)Organization: %o\nCc: \nBcc: \n\n"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %t\nSubject: Re: %S\nNewsgroups: %n\nIn-Reply-To: %i\nReferences: %[references]\nCc: \nBcc: \n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|MAILHEADER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %T\nSubject: %(%i=^$?:Re: %S\nNewsgroups: %n\nIn-Reply-To: %i)\n%(%[references]!=^$?References\\: %[references]\n)Organization: %o\nCc: \nBcc: \n\n"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %T\nSubject: Re: %S\nNewsgroups: %n\nIn-Reply-To: %i\nReferences: %[references]\nCc: \nBcc: \n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|YOUSAID
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|YOUSAID
value|"In article %i you write:"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to submit a followup article */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSPOSTER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSPOSTER
value|"QUOTECHARS=%I Pnews -h %h"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSHEADER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|NEWSHEADER
value|"%(%[followup-to]=^$?:X-ORIGINAL-NEWSGROUPS: %n\n)Newsgroups: %(%F=^$?%C:%F)\nSubject: %(%S=^$?%\"\n\nSubject: \":Re: %S)\nSummary: \nExpires: \n%(%R=^$?:References: %R\n)Sender: \nFollowup-To: \n%(%{REPLYTO}=^$?:Reply-To: %{REPLYTO}\n)Distribution: %(%i=^$?%\"Distribution: \":%D)\nOrganization: %o\nKeywords: %[keywords]\nCc: \n\n"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|NEWSHEADER
value|"Newsgroups: %F\nSubject: Re: %S\nSummary: \nExpires: \nReferences: %R\nSender: \nFollowup-To: \nDistribution: %D\nOrganization: %o\nKeywords: %[keywords]\nCc: \n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|ATTRIBUTION
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|ATTRIBUTION
value|"In article %i %f writes:"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|PIPESAVER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|PIPESAVER
value|"%(%B=^0$?<%A:tail +%Bc %A |) %b"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|PIPESAVER
value|"tail +%Bc %A | %b"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|EXSAVER
end_ifndef

begin_define
define|#
directive|define
name|EXSAVER
value|"tail +%Bc %A | %e"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|METAMAIL
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|EXMIMESAVER
end_ifndef

begin_define
define|#
directive|define
name|EXMIMESAVER
value|"%e %A"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|NORMSAVER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NORMSAVER
value|"%X/norm.saver %A %P %c %a %B %C \"%b\""
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|MBOXSAVER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ANCIENT_NEWS
end_ifndef

begin_define
define|#
directive|define
name|MBOXSAVER
value|"%X/mbox.saver %A %P %c %a %B %C \"%b\" \"From %t %`LANG= date`\""
end_define

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|MBOXSAVER
value|"%X/mbox.saver %A %P %c %a %B %C \"%b\" \"From %t %(%[date]=^\\(\\w*\\), \\(\\w*\\)-\\(\\w*\\)-\\(\\w*\\) \\([^ ]*\\)?%1 %3 %(%2=..?%2: %2) %5 19%4)\""
end_define

begin_comment
comment|/* header munging with a vengeance */
end_comment

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MBOXSAVER
value|"%X/mbox.saver %A %P %c %a %B %C \"%b\" \"From %t %[posted]\""
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|MKDIRS
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|SAVEDIR
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SAVEDIR
value|"%p/%c"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SAVENAME
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|SAVENAME
value|"%a"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|SAVEDIR
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SAVEDIR
value|"%p"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SAVENAME
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|SAVENAME
value|"%^C"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|KILLGLOBAL
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|KILLGLOBAL
value|"%p/KILL"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|KILLLOCAL
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|KILLLOCAL
value|"%p/%c/KILL"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how to cancel an article */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|CANCEL
end_ifndef

begin_ifdef
ifdef|#
directive|ifdef
name|BNEWS
end_ifdef

begin_define
define|#
directive|define
name|CANCEL
value|"%x/inews -h< %h"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|CANCEL
value|"inews -h< %h"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how to cancel an article, continued */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|CANCELHEADER
end_ifndef

begin_define
define|#
directive|define
name|CANCELHEADER
value|"Newsgroups: %n\nSubject: cancel\nControl: cancel %i\nDistribution: %D\n\n%i was cancelled from within trn.\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how to supersede an article */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SUPERSEDEHEADER
end_ifndef

begin_define
define|#
directive|define
name|SUPERSEDEHEADER
value|"Newsgroups: %n\nSubject: %S\nSummary: %[summary]\nExpires: %[expires]\nReferences: %[references]\nSupersedes: %i\nSender: %[sender]\nFollowup-To: %[followup-to]\nDistribution: %D\nOrganization: %o\nKeywords: %[keywords]\n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|LOCALTIMEFMT
end_ifndef

begin_define
define|#
directive|define
name|LOCALTIMEFMT
value|"%a %b %d %X %Z %Y"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* where to find the mail file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MAILFILE
end_ifndef

begin_define
define|#
directive|define
name|MAILFILE
value|"/usr/spool/mail/%L"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how to open binary format files */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|FOPEN_RB
end_ifndef

begin_define
define|#
directive|define
name|FOPEN_RB
value|"r"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|FOPEN_WB
end_ifndef

begin_define
define|#
directive|define
name|FOPEN_WB
value|"w"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* what to do with ansi prototypes -- '()' == ignore, 'x' == use */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|_
end_ifndef

begin_ifdef
ifdef|#
directive|ifdef
name|__STDC__
end_ifdef

begin_define
define|#
directive|define
name|_
parameter_list|(
name|x
parameter_list|)
value|x
end_define

begin_ifndef
ifndef|#
directive|ifndef
name|CONST
end_ifndef

begin_define
define|#
directive|define
name|CONST
value|const
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|_
parameter_list|(
name|x
parameter_list|)
value|()
end_define

begin_ifndef
ifndef|#
directive|ifndef
name|CONST
end_ifndef

begin_define
define|#
directive|define
name|CONST
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how many characters is a newline in a text file? */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NL_SIZE
end_ifndef

begin_define
define|#
directive|define
name|NL_SIZE
value|1
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* some important types */
end_comment

begin_typedef
typedef|typedef
name|int
name|NG_NUM
typedef|;
end_typedef

begin_comment
comment|/* newsgroup number */
end_comment

begin_typedef
typedef|typedef
name|long
name|ART_NUM
typedef|;
end_typedef

begin_comment
comment|/* article number */
end_comment

begin_typedef
typedef|typedef
name|long
name|ART_UNREAD
typedef|;
end_typedef

begin_comment
comment|/* could be short to save space */
end_comment

begin_typedef
typedef|typedef
name|long
name|ART_POS
typedef|;
end_typedef

begin_comment
comment|/* char position in article file */
end_comment

begin_typedef
typedef|typedef
name|int
name|ART_LINE
typedef|;
end_typedef

begin_comment
comment|/* line position in article file */
end_comment

begin_typedef
typedef|typedef
name|long
name|ACT_POS
typedef|;
end_typedef

begin_comment
comment|/* char position in active file */
end_comment

begin_typedef
typedef|typedef
name|unsigned
name|int
name|MEM_SIZE
typedef|;
end_typedef

begin_comment
comment|/* for passing to malloc */
end_comment

begin_comment
comment|/* *** end of the machine dependent stuff *** */
end_comment

begin_comment
comment|/* GLOBAL THINGS */
end_comment

begin_comment
comment|/* file statistics area */
end_comment

begin_decl_stmt
name|EXT
name|struct
name|stat
name|filestat
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* various things of type char */
end_comment

begin_function_decl
name|char
modifier|*
name|index
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|rindex
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|getenv
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|strcat
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|strcpy
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|malloc
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|realloc
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|EXT
name|char
name|buf
index|[
name|LBUFLEN
operator|+
literal|1
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* general purpose line buffer */
end_comment

begin_decl_stmt
name|EXT
name|char
name|cmd_buf
index|[
name|CBUFLEN
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* buffer for formatting system commands */
end_comment

begin_decl_stmt
name|EXT
name|char
modifier|*
name|indstr
name|INIT
argument_list|(
literal|">"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* indent for old article embedded in followup */
end_comment

begin_function_decl
name|EXT
name|char
modifier|*
name|cwd
name|INIT
parameter_list|(
name|Nullch
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* current working directory */
end_comment

begin_function_decl
name|EXT
name|char
modifier|*
name|dfltcmd
name|INIT
parameter_list|(
name|Nullch
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* 1st char is default command */
end_comment

begin_comment
comment|/* switches */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|DEBUG
end_ifdef

begin_decl_stmt
name|EXT
name|int
name|debug
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -D */
end_comment

begin_define
define|#
directive|define
name|DEB_COREDUMPSOK
value|2
end_define

begin_define
define|#
directive|define
name|DEB_HEADER
value|4
end_define

begin_define
define|#
directive|define
name|DEB_INTRP
value|8
end_define

begin_define
define|#
directive|define
name|DEB_NNTP
value|16
end_define

begin_define
define|#
directive|define
name|DEB_INNERSRCH
value|32
end_define

begin_define
define|#
directive|define
name|DEB_FILEXP
value|64
end_define

begin_define
define|#
directive|define
name|DEB_HASH
value|128
end_define

begin_define
define|#
directive|define
name|DEB_XREF_MARKER
value|256
end_define

begin_define
define|#
directive|define
name|DEB_CTLAREA_BITMAP
value|512
end_define

begin_define
define|#
directive|define
name|DEB_SOFT_POINTERS
value|1024
end_define

begin_define
define|#
directive|define
name|DEB_NEWSRC_LINE
value|2048
end_define

begin_define
define|#
directive|define
name|DEB_SEARCH_AHEAD
value|4096
end_define

begin_define
define|#
directive|define
name|DEB_CHECKPOINTING
value|8192
end_define

begin_define
define|#
directive|define
name|DEB_FEED_XREF
value|16384
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|ARTSEARCH
end_ifdef

begin_decl_stmt
name|EXT
name|int
name|scanon
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -S */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
name|EXT
name|bool
name|use_threads
name|INIT
parameter_list|(
name|THREAD_INIT
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -x */
end_comment

begin_decl_stmt
name|EXT
name|int
name|max_tree_lines
name|INIT
argument_list|(
literal|6
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|select_order
index|[
literal|4
index|]
name|INIT
argument_list|(
literal|"lms"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_function_decl
name|EXT
name|int
name|select_on
name|INIT
parameter_list|(
name|SELECT_INIT
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -X */
end_comment

begin_decl_stmt
name|EXT
name|char
name|end_select
name|INIT
argument_list|(
literal|'Z'
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|page_select
name|INIT
argument_list|(
literal|'>'
argument_list|)
decl_stmt|;
end_decl_stmt

begin_function_decl
name|EXT
name|bool
name|dont_filter_control
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -j */
end_comment

begin_function_decl
name|EXT
name|bool
name|mbox_always
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -M */
end_comment

begin_function_decl
name|EXT
name|bool
name|norm_always
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -N */
end_comment

begin_function_decl
name|EXT
name|bool
name|thread_always
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -a */
end_comment

begin_function_decl
name|EXT
name|bool
name|auto_arrow_macros
name|INIT
parameter_list|(
name|TRUE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -B */
end_comment

begin_function_decl
name|EXT
name|bool
name|breadth_first
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -b */
end_comment

begin_function_decl
name|EXT
name|bool
name|bkgnd_spinner
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -B */
end_comment

begin_function_decl
name|EXT
name|bool
name|novice_delays
name|INIT
parameter_list|(
name|TRUE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* +f */
end_comment

begin_function_decl
name|EXT
name|int
name|olden_days
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -o */
end_comment

begin_function_decl
name|EXT
name|bool
name|auto_select_postings
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -p */
end_comment

begin_function_decl
name|EXT
name|bool
name|checkflag
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -c */
end_comment

begin_function_decl
name|EXT
name|bool
name|suppress_cn
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -s */
end_comment

begin_decl_stmt
name|EXT
name|int
name|countdown
name|INIT
argument_list|(
literal|5
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* how many lines to list before invoking -s */
end_comment

begin_function_decl
name|EXT
name|bool
name|muck_up_clear
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -loco */
end_comment

begin_function_decl
name|EXT
name|bool
name|erase_screen
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -e */
end_comment

begin_function_decl
name|EXT
name|bool
name|can_home
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_ifdef
ifdef|#
directive|ifdef
name|CLEAREOL
end_ifdef

begin_function_decl
name|EXT
name|bool
name|can_home_clear
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* fancy -e */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
name|EXT
name|bool
name|findlast
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -r */
end_comment

begin_function_decl
name|EXT
name|bool
name|typeahead
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -T */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|EDIT_DISTANCE
end_ifdef

begin_function_decl
name|EXT
name|bool
name|fuzzyGet
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -G */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|VERBOSE
end_ifdef

begin_ifdef
ifdef|#
directive|ifdef
name|TERSE
end_ifdef

begin_function_decl
name|EXT
name|bool
name|verbose
name|INIT
parameter_list|(
name|TRUE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* +t */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
name|EXT
name|bool
name|unbroken_subjects
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -u */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|VERIFY
end_ifdef

begin_function_decl
name|EXT
name|bool
name|verify
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -v */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
name|EXT
name|bool
name|quickstart
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -q */
end_comment

begin_define
define|#
directive|define
name|NOMARKING
value|0
end_define

begin_define
define|#
directive|define
name|STANDOUT
value|1
end_define

begin_define
define|#
directive|define
name|UNDERLINE
value|2
end_define

begin_function_decl
name|EXT
name|int
name|marking
name|INIT
parameter_list|(
name|NOMARKING
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -m */
end_comment

begin_decl_stmt
name|EXT
name|ART_LINE
name|initlines
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -i */
end_comment

begin_function_decl
name|EXT
name|bool
name|initlines_specified
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_ifdef
ifdef|#
directive|ifdef
name|APPEND_UNSUB
end_ifdef

begin_decl_stmt
name|EXT
name|bool
name|append_unsub
name|INIT
argument_list|(
literal|1
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -I */
end_comment

begin_else
else|#
directive|else
end_else

begin_decl_stmt
name|EXT
name|bool
name|append_unsub
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* miscellania */
end_comment

begin_function_decl
name|int
name|fseek
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|long
name|atol
argument_list|()
decl_stmt|,
name|ftell
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
name|EXT
name|bool
name|in_ng
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* current state of trn */
end_comment

begin_decl_stmt
name|EXT
name|char
name|mode
name|INIT
argument_list|(
literal|'i'
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* current state of trn */
end_comment

begin_function_decl
name|EXT
name|FILE
modifier|*
name|tmpfp
name|INIT
parameter_list|(
name|Nullfp
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* scratch fp used for .rnlock, .rnlast, etc. */
end_comment

begin_decl_stmt
name|EXT
name|NG_NUM
name|nextrcline
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* 1st unused slot in rcline array */
end_comment

begin_comment
comment|/* startup to avoid checking twice in a row */
end_comment

begin_extern
extern|extern errno;
end_extern

begin_comment
comment|/* Factored strings */
end_comment

begin_decl_stmt
name|EXT
name|char
name|nullstr
index|[
literal|1
index|]
name|INIT
argument_list|(
literal|""
argument_list|)
decl_stmt|;
end_decl_stmt

begin_function_decl
name|EXT
name|char
name|sh
index|[]
name|INIT
parameter_list|(
name|SH
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|EXT
name|char
name|defeditor
index|[]
name|INIT
parameter_list|(
name|DEFEDITOR
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
name|EXT
name|char
name|hforhelp
index|[]
name|INIT
argument_list|(
literal|"Type h for help.\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|STRICTCR
end_ifdef

begin_decl_stmt
name|EXT
name|char
name|badcr
index|[]
name|INIT
argument_list|(
literal|"\nUnnecessary CR ignored.\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_decl_stmt
name|EXT
name|char
name|readerr
index|[]
name|INIT
argument_list|(
literal|"rn read error"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|unsubto
index|[]
name|INIT
argument_list|(
literal|"\n\nUnsubscribed to newsgroup %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|cantopen
index|[]
name|INIT
argument_list|(
literal|"Can't open %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|cantcreate
index|[]
name|INIT
argument_list|(
literal|"Can't create %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|cantrecreate
index|[]
name|INIT
argument_list|(
literal|"Can't recreate %s -- restoring older version.\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|VERBOSE
end_ifdef

begin_decl_stmt
name|EXT
name|char
name|nocd
index|[]
name|INIT
argument_list|(
literal|"Can't chdir to directory %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_else
else|#
directive|else
end_else

begin_decl_stmt
name|EXT
name|char
name|nocd
index|[]
name|INIT
argument_list|(
literal|"Can't find %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|METAMAIL
end_ifdef

begin_function_decl
name|EXT
name|bool
name|mime_article
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|NOLINEBUF
end_ifdef

begin_define
define|#
directive|define
name|FLUSH
value|,fflush(stdout)
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|FLUSH
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|lint
end_ifdef

begin_undef
undef|#
directive|undef
name|FLUSH
end_undef

begin_define
define|#
directive|define
name|FLUSH
end_define

begin_undef
undef|#
directive|undef
name|putchar
end_undef

begin_define
define|#
directive|define
name|putchar
parameter_list|(
name|c
parameter_list|)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|advise
parameter_list|(
name|str
parameter_list|)
value|fputs(str,stdout)
end_define

begin_define
define|#
directive|define
name|fatal_error
parameter_list|(
name|str
parameter_list|)
value|fputs(str,stderr), finalize(1)
end_define

end_unit

