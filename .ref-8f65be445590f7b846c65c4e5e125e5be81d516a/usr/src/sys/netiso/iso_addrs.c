begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*********************************************************** 		Copyright IBM Corporation 1987                        All Rights Reserved  Permission to use, copy, modify, and distribute this software and its  documentation for any purpose and without fee is hereby granted,  provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in  supporting documentation, and that the name of IBM not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.    IBM DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT SHALL IBM BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.  ******************************************************************/
end_comment

begin_comment
comment|/*  * ARGO Project, Computer Sciences Dept., University of Wisconsin - Madison  */
end_comment

begin_macro
name|iso_maskmatch
argument_list|(
argument|sisoa
argument_list|,
argument|sisob
argument_list|,
argument|smask
argument_list|)
end_macro

begin_decl_stmt
name|struct
name|sockaddr_iso
modifier|*
name|sisoa
decl_stmt|,
modifier|*
name|sisob
decl_stmt|,
name|smask
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|caddr_t
name|a
decl_stmt|,
name|b
decl_stmt|,
name|c
decl_stmt|;
name|int
name|compare_len
decl_stmt|;
if|if
condition|(
name|smask
condition|)
block|{
name|compare_len
operator|=
name|smask
operator|->
name|isoa_len
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|compare_len
operator|=
name|isoaa
operator|->
name|isoa_len
operator|)
operator|!=
name|isoab
operator|->
name|isoa_len
condition|)
return|return
literal|0
return|;
return|return
name|masked_cmp
argument_list|(
operator|&
name|sisoa
operator|->
name|siso_addr
argument_list|,
operator|&
name|sisob
operator|->
name|siso_addr
argument_list|,
operator|&
name|smask
operator|->
name|siso_addr
argument_list|,
name|compare_len
argument_list|)
return|;
block|}
end_block

begin_function
name|int
name|masked_cmp
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|,
name|c
parameter_list|,
name|len
parameter_list|)
specifier|register
name|caddr_t
name|a
decl_stmt|,
name|b
decl_stmt|,
name|c
decl_stmt|;
name|int
name|len
decl_stmt|;
block|{
name|caddr_t
name|ax
init|=
name|a
decl_stmt|,
name|bx
init|=
name|b
decl_stmt|,
name|cx
init|=
name|c
decl_stmt|;
specifier|register
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|len
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|(
operator|*
name|a
operator|)
operator|&
operator|(
operator|*
name|c
operator|)
operator|!=
operator|(
operator|*
name|b
operator|)
operator|&
operator|(
operator|*
name|c
operator|)
condition|)
break|break;
name|a
operator|++
expr_stmt|;
name|b
operator|++
expr_stmt|;
name|c
operator|++
expr_stmt|;
block|}
return|return
operator|(
name|int
operator|)
name|i
return|;
block|}
end_function

end_unit

