begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"../h/rt.h"
end_include

begin_comment
comment|/*  * cvreal - convert to real and put the result into *r.  */
end_comment

begin_expr_stmt
name|cvreal
argument_list|(
name|d
argument_list|,
name|r
argument_list|)
specifier|register
expr|struct
name|descrip
operator|*
name|d
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|double
modifier|*
name|r
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|union
name|numeric
name|result
decl_stmt|;
comment|/*     * Use cvnum to classify the value.  Cast integers into reals and     *  fail if the value is non-numeric.     */
switch|switch
condition|(
name|cvnum
argument_list|(
name|d
argument_list|,
operator|&
name|result
argument_list|)
condition|)
block|{
case|case
name|T_LONGINT
case|:
operator|*
name|r
operator|=
name|result
operator|.
name|integer
expr_stmt|;
return|return
operator|(
name|T_REAL
operator|)
return|;
case|case
name|T_REAL
case|:
operator|*
name|r
operator|=
name|result
operator|.
name|real
expr_stmt|;
return|return
operator|(
name|T_REAL
operator|)
return|;
default|default:
return|return
operator|(
name|NULL
operator|)
return|;
block|}
block|}
end_block

end_unit

