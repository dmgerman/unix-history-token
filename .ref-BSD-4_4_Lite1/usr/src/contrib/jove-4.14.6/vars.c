begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/***************************************************************************  * This program is Copyright (C) 1986, 1987, 1988 by Jonathan Payne.  JOVE *  * is provided to you without charge, and with no warranty.  You may give  *  * away copies of JOVE, including sources, provided that this notice is    *  * included in all the files.                                              *  ***************************************************************************/
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|TXT_TO_C
end_ifndef

begin_comment
comment|/* so that jove.h isn't included twice in setmaps */
end_comment

begin_include
include|#
directive|include
file|"jove.h"
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|IBMPC
end_ifndef

begin_decl_stmt
specifier|const
endif|#
directive|endif
name|struct
name|variable
name|variables
index|[]
init|=
block|{
name|VARIABLE
block|,
literal|"abort-char"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|AbortChar
block|,
name|V_CHAR
block|,
ifdef|#
directive|ifdef
name|UNIX
name|VARIABLE
block|,
literal|"allow-^S-and-^Q"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|OKXonXoff
block|,
name|V_BOOL
operator||
name|V_TTY_RESET
block|,
endif|#
directive|endif
comment|/* UNIX */
name|VARIABLE
block|,
literal|"allow-bad-filenames"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|OkayBadChars
block|,
name|V_BOOL
block|,
ifdef|#
directive|ifdef
name|ABBREV
name|VARIABLE
block|,
literal|"auto-case-abbrev"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|AutoCaseAbbrev
block|,
name|V_BOOL
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|IBMPC
name|VARIABLE
block|,
literal|"background-color"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|Bgcolor
block|,
name|V_BASE10
operator||
name|V_CLRSCREEN
block|,
endif|#
directive|endif
comment|/* IBMPC */
ifdef|#
directive|ifdef
name|F_COMPLETION
name|VARIABLE
block|,
literal|"bad-filename-extensions"
block|,
operator|(
name|UnivPtr
operator|)
name|BadExtensions
block|,
name|V_STRING
block|,
endif|#
directive|endif
name|VARIABLE
block|,
literal|"c-argument-indentation"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|CArgIndent
block|,
name|V_BASE10
block|,
name|VARIABLE
block|,
literal|"c-indentation-increment"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|CIndIncrmt
block|,
name|V_BASE10
block|,
name|VARIABLE
block|,
literal|"case-ignore-search"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|CaseIgnore
block|,
name|V_BOOL
block|,
ifdef|#
directive|ifdef
name|CMT_FMT
name|VARIABLE
block|,
literal|"comment-format"
block|,
operator|(
name|UnivPtr
operator|)
name|CmtFmt
block|,
name|V_STRING
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|IPROCS
name|VARIABLE
block|,
literal|"dbx-format-string"
block|,
operator|(
name|UnivPtr
operator|)
name|dbx_parse_fmt
block|,
name|V_STRING
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|BIFF
name|VARIABLE
block|,
literal|"disable-biff"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|BiffChk
block|,
name|V_BOOL
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|F_COMPLETION
name|VARIABLE
block|,
literal|"display-bad-filenames"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|DispBadFs
block|,
name|V_BOOL
block|,
endif|#
directive|endif
ifndef|#
directive|ifndef
name|MAC
name|VARIABLE
block|,
literal|"error-format-string"
block|,
operator|(
name|UnivPtr
operator|)
name|ErrFmtStr
block|,
name|V_STRING
block|,
name|VARIABLE
block|,
literal|"error-window-size"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|EWSize
block|,
name|V_BASE10
block|,
endif|#
directive|endif
name|VARIABLE
block|,
literal|"expand-environment-variables"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|DoEVexpand
block|,
name|V_BOOL
block|,
name|VARIABLE
block|,
literal|"file-creation-mode"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|CreatMode
block|,
name|V_BASE8
block|,
name|VARIABLE
block|,
literal|"files-should-end-with-newline"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|EndWNewline
block|,
name|V_BOOL
block|,
ifdef|#
directive|ifdef
name|IBMPC
name|VARIABLE
block|,
literal|"foreground-color"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|Fgcolor
block|,
name|V_BASE10
operator||
name|V_CLRSCREEN
block|,
endif|#
directive|endif
comment|/* IBMPC */
name|VARIABLE
block|,
literal|"internal-tabstop"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|tabstop
block|,
name|V_BASE10
operator||
name|V_CLRSCREEN
block|,
name|VARIABLE
block|,
literal|"interrupt-character"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|IntChar
block|,
name|V_CHAR
operator||
name|V_TTY_RESET
block|,
name|VARIABLE
block|,
literal|"left-margin"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|LMargin
block|,
name|V_BASE10
block|,
ifdef|#
directive|ifdef
name|MAC
name|VARIABLE
block|,
literal|"macify"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|Macmode
block|,
name|V_BOOL
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|UNIX
name|VARIABLE
block|,
literal|"mail-check-frequency"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|MailInt
block|,
name|V_BASE10
block|,
name|VARIABLE
block|,
literal|"mailbox"
block|,
operator|(
name|UnivPtr
operator|)
name|Mailbox
block|,
name|V_FILENAME
block|,
endif|#
directive|endif
comment|/* UNIX */
ifdef|#
directive|ifdef
name|BACKUPFILES
name|VARIABLE
block|,
literal|"make-backup-files"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|BkupOnWrite
block|,
name|V_BOOL
block|,
endif|#
directive|endif
name|VARIABLE
block|,
literal|"mark-threshold"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|MarkThresh
block|,
name|V_BASE10
block|,
name|VARIABLE
block|,
literal|"marks-should-float"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|MarksShouldFloat
block|,
name|V_BOOL
block|,
name|VARIABLE
block|,
literal|"match-regular-expressions"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|UseRE
block|,
name|V_BOOL
block|,
name|VARIABLE
block|,
literal|"meta-key"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|MetaKey
block|,
name|V_BOOL
operator||
name|V_TTY_RESET
block|,
name|VARIABLE
block|,
literal|"mode-line"
block|,
operator|(
name|UnivPtr
operator|)
name|ModeFmt
block|,
name|V_STRING
operator||
name|V_MODELINE
block|,
ifdef|#
directive|ifdef
name|IBMPC
name|VARIABLE
block|,
literal|"mode-line-color"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|Mdcolor
block|,
name|V_BASE10
operator||
name|V_MODELINE
block|,
endif|#
directive|endif
name|VARIABLE
block|,
literal|"mode-line-should-standout"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|BriteMode
block|,
name|V_BOOL
operator||
name|V_MODELINE
block|,
name|VARIABLE
block|,
literal|"paren-flash-delay"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|PDelay
block|,
name|V_BASE10
block|,
ifndef|#
directive|ifndef
name|MAC
name|VARIABLE
block|,
literal|"physical-tabstop"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|phystab
block|,
name|V_BASE10
operator||
name|V_CLRSCREEN
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|IPROCS
name|VARIABLE
block|,
literal|"process-prompt"
block|,
operator|(
name|UnivPtr
operator|)
name|proc_prompt
block|,
name|V_STRING
block|,
endif|#
directive|endif
name|VARIABLE
block|,
literal|"right-margin"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|RMargin
block|,
name|V_BASE10
block|,
name|VARIABLE
block|,
literal|"scroll-all-lines"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|ScrollAll
block|,
name|V_BOOL
block|,
name|VARIABLE
block|,
literal|"scroll-step"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|ScrollStep
block|,
name|V_BASE10
block|,
name|VARIABLE
block|,
literal|"search-exit-char"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|SExitChar
block|,
name|V_CHAR
block|,
name|VARIABLE
block|,
literal|"send-typeout-to-buffer"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|UseBuffers
block|,
name|V_BOOL
block|,
ifndef|#
directive|ifndef
name|MAC
name|VARIABLE
block|,
literal|"shell"
block|,
operator|(
name|UnivPtr
operator|)
name|Shell
block|,
name|V_FILENAME
block|,
name|VARIABLE
block|,
literal|"shell-flags"
block|,
operator|(
name|UnivPtr
operator|)
name|ShFlags
block|,
name|V_STRING
block|,
endif|#
directive|endif
ifndef|#
directive|ifndef
name|MSDOS
name|VARIABLE
block|,
literal|"sync-frequency"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|SyncFreq
block|,
name|V_BASE10
block|,
endif|#
directive|endif
comment|/* MSDOS */
name|VARIABLE
block|,
literal|"tag-file"
block|,
operator|(
name|UnivPtr
operator|)
name|TagFile
block|,
name|V_FILENAME
block|,
ifndef|#
directive|ifndef
name|MAC
name|VARIABLE
block|,
literal|"tmp-file-pathname"
block|,
operator|(
name|UnivPtr
operator|)
name|TmpFilePath
block|,
name|V_FILENAME
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|UNIX
name|VARIABLE
block|,
literal|"update-time-frequency"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|UpdFreq
block|,
name|V_BASE10
block|,
endif|#
directive|endif
comment|/* UNIX */
ifdef|#
directive|ifdef
name|ID_CHAR
name|VARIABLE
block|,
literal|"use-i/d-char"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|UseIC
block|,
name|V_BOOL
block|,
endif|#
directive|endif
name|VARIABLE
block|,
literal|"visible-bell"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|VisBell
block|,
name|V_BOOL
block|,
name|VARIABLE
block|,
literal|"wrap-search"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|WrapScan
block|,
name|V_BOOL
block|,
ifndef|#
directive|ifndef
name|MAC
name|VARIABLE
block|,
literal|"write-files-on-make"
block|,
operator|(
name|UnivPtr
operator|)
operator|&
name|WtOnMk
block|,
name|V_BOOL
block|,
endif|#
directive|endif
name|VARIABLE
block|,
name|NULL
block|,
name|NULL
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_ifndef
ifndef|#
directive|ifndef
name|TXT_TO_C
end_ifndef

begin_function
name|data_obj
modifier|*
name|findvar
parameter_list|(
name|prompt
parameter_list|)
specifier|const
name|char
modifier|*
name|prompt
decl_stmt|;
block|{
specifier|static
name|char
modifier|*
name|strings
index|[
operator|(
sizeof|sizeof
name|variables
operator|)
operator|/
sizeof|sizeof
argument_list|(
expr|struct
name|variable
argument_list|)
index|]
decl_stmt|;
specifier|static
name|bool
name|beenhere
init|=
name|FALSE
decl_stmt|;
specifier|register
name|int
name|com
decl_stmt|;
if|if
condition|(
operator|!
name|beenhere
condition|)
block|{
specifier|register
name|char
modifier|*
modifier|*
name|strs
init|=
name|strings
decl_stmt|;
specifier|register
specifier|const
name|struct
name|variable
modifier|*
name|v
init|=
name|variables
decl_stmt|;
name|beenhere
operator|=
name|TRUE
expr_stmt|;
for|for
control|(
init|;
name|v
operator|->
name|Name
condition|;
name|v
operator|++
control|)
operator|*
name|strs
operator|++
operator|=
name|v
operator|->
name|Name
expr_stmt|;
operator|*
name|strs
operator|=
name|NULL
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|com
operator|=
name|complete
argument_list|(
name|strings
argument_list|,
name|prompt
argument_list|,
name|NOTHING
argument_list|)
operator|)
operator|<
literal|0
condition|)
return|return
name|NULL
return|;
return|return
operator|(
name|data_obj
operator|*
operator|)
operator|&
name|variables
index|[
name|com
index|]
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

end_unit

