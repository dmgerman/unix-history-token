begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* parsetime.c - parse a date/time and display the results  ver  date   who remarks --- ------- --- ------------------------------------------------------------- 01A 15nov86 JP  Written.  Copyright (C) 1986 by Jef Poskanzer.  Permission to use, copy, modify, and distribute this software and its documentation for any purpose and without fee is hereby granted, provided that this copyright notice appear in all copies and in all supporting documentation.  No representation is made about the suitability of this software for any purpose.  It is provided "as is" without express or implied warranty.  */
end_comment

begin_decl_stmt
specifier|static
name|char
name|copyright
index|[]
init|=
literal|"\nCopyright (C) 1986 by Jef Poskanzer.\n"
decl_stmt|;
end_decl_stmt

begin_include
include|#
directive|include
file|"tws.h"
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
name|argv
index|[]
decl_stmt|;
block|{
name|char
name|buf
index|[
literal|200
index|]
decl_stmt|;
name|int
name|i
decl_stmt|;
name|struct
name|tws
modifier|*
name|twp
decl_stmt|;
name|strcpy
argument_list|(
name|buf
argument_list|,
literal|""
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
name|argc
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|i
operator|>
literal|1
condition|)
name|strcat
argument_list|(
name|buf
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|strcat
argument_list|(
name|buf
argument_list|,
name|argv
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|twp
operator|=
name|dparsetime
argument_list|(
name|buf
argument_list|)
expr_stmt|;
if|if
condition|(
name|twp
operator|==
name|NULL
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"illegal date/time: %s\n"
argument_list|,
name|buf
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|"dparsetime( \"%s\" ):\n"
argument_list|,
name|buf
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_sec = %d\n"
argument_list|,
name|twp
operator|->
name|tw_sec
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_min = %d\n"
argument_list|,
name|twp
operator|->
name|tw_min
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_hour = %d\n"
argument_list|,
name|twp
operator|->
name|tw_hour
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_mday = %d\n"
argument_list|,
name|twp
operator|->
name|tw_mday
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_mon = %d\n"
argument_list|,
name|twp
operator|->
name|tw_mon
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_year = %d\n"
argument_list|,
name|twp
operator|->
name|tw_year
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_wday = %d\n"
argument_list|,
name|twp
operator|->
name|tw_wday
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_yday = %d\n"
argument_list|,
name|twp
operator|->
name|tw_yday
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_zone = %d\n"
argument_list|,
name|twp
operator|->
name|tw_zone
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_clock = %ld\n"
argument_list|,
name|twp
operator|->
name|tw_clock
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"  tw_flags = %d (0x%04x)\n"
argument_list|,
name|twp
operator|->
name|tw_flags
argument_list|,
name|twp
operator|->
name|tw_flags
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"dasctime: %s\n"
argument_list|,
name|dasctime
argument_list|(
name|twp
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

