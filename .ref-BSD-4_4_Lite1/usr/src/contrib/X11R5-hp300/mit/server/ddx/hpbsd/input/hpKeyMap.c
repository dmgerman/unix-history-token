begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  Copyright (c) 1986, 1987 by Hewlett-Packard Company Copyright (c) 1986, 1987 by the Massachusetts Institute of Technology  Permission to use, copy, modify, and distribute this software and its documentation for any purpose and without fee is hereby granted, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation, and that the name of M.I.T. not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  HEWLETT-PACKARD MAKES NO WARRANTY OF ANY KIND WITH REGARD TO THIS SOFWARE, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR  PURPOSE.  Hewlett-Packard shall not be liable for errors  contained herein or direct, indirect, special, incidental or  consequential damages in connection with the furnishing,  performance, or use of this material.  This software is not subject to any license of the American Telephone and Telegraph Company or of the Regents of the University of California.  */
end_comment

begin_include
include|#
directive|include
file|"Xmd.h"
end_include

begin_define
define|#
directive|define
name|XK_KATAKANA
end_define

begin_include
include|#
directive|include
file|"keysym.h"
end_include

begin_comment
comment|/*  The following two lines wer added to let this compile  *  in the pure MIT tree  */
end_comment

begin_include
include|#
directive|include
file|"HPkeysym.h"
end_include

begin_include
include|#
directive|include
file|"ap_keysym.h"
end_include

begin_include
include|#
directive|include
file|"X.h"
end_include

begin_comment
comment|/* MUST come after above includes */
end_comment

begin_include
include|#
directive|include
file|"input.h"
end_include

begin_include
include|#
directive|include
file|<XHPlib.h>
end_include

begin_comment
comment|/* for keymap ids */
end_comment

begin_define
define|#
directive|define
name|MIN_KEYCODE
value|8
end_define

begin_comment
comment|/* This file was composed from the X10 hil_keymap.h by  * Jack Palevich, HP-Labs  */
end_comment

begin_comment
comment|/* A keymap filled with NoSymbol is all 2 columns.      * This will be used when the keyboard is unknown and is not in a      *   reconized family.      * Notes:      *   I know NoSymbol is 0 and won't ever change so I can sleeze and let      *     the compiler initialize the table.      */
end_comment

begin_decl_stmt
specifier|static
name|KeySym
name|null_keymap
index|[
literal|2
operator|*
literal|0x80
index|]
decl_stmt|;
end_decl_stmt

begin_if
if|#
directive|if
name|defined
argument_list|(
name|__hpux
argument_list|)
operator|||
name|defined
argument_list|(
name|__hp_osf
argument_list|)
operator|||
name|defined
argument_list|(
name|hp9000
argument_list|)
end_if

begin_decl_stmt
specifier|static
name|KeySym
name|USASCIIMap
index|[
literal|4
operator|*
literal|0x82
index|]
init|=
block|{
comment|/* code values in comments at line end are actual value reported on HIL.     REMEMBER, there is an offset of MIN_KEYCODE+2 applied to this table!     The PS2 keyboard table begins at offset 0, the 46021A table begins with     the third row. *./ 	/* Extend Char Right -- a.k.a. Kanji? */
name|XK_Control_R
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x00 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x01 */
name|XK_Meta_R
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x02 */
name|XK_Meta_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x03 */
name|XK_Shift_R
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4 */
name|XK_Shift_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5 */
name|XK_Control_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6 */
name|XK_Break
block|,
name|XK_Reset
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7 */
name|XK_KP_4
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x8 */
name|XK_KP_8
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x9 */
name|XK_KP_5
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0xa */
name|XK_KP_9
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0xb */
name|XK_KP_6
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0xc */
name|XK_KP_7
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0xd */
name|XK_KP_Separator
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0xe */
name|XK_KP_Enter
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0xf */
name|XK_KP_1
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x10 */
name|XK_KP_Divide
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x11 */
name|XK_KP_2
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x12 */
name|XK_KP_Add
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x13 */
name|XK_KP_3
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x14 */
name|XK_KP_Multiply
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x15 */
name|XK_KP_0
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x16 */
name|XK_KP_Subtract
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x17 */
name|XK_B
block|,
name|NoSymbol
block|,
name|XK_block
block|,
name|NoSymbol
block|,
comment|/* 0x18 */
name|XK_V
block|,
name|NoSymbol
block|,
name|XK_section
block|,
name|NoSymbol
block|,
comment|/* 0x19 */
name|XK_C
block|,
name|NoSymbol
block|,
name|XK_ccedilla
block|,
name|XK_Ccedilla
block|,
comment|/* 0x1a */
name|XK_X
block|,
name|NoSymbol
block|,
name|XK_scaron
block|,
name|XK_Scaron
block|,
comment|/* 0x1b */
name|XK_Z
block|,
name|NoSymbol
block|,
name|XK_paragraph
block|,
name|NoSymbol
block|,
comment|/* 0x1c */
comment|/* Was Kanji Left.... */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1d */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1e */
name|XK_Escape
block|,
name|XK_Delete
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1f */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x20 */
name|XK_F10
block|,
name|XK_KP_F2
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x21 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x22 */
name|XK_F11
block|,
name|XK_KP_F3
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x23 */
name|XK_KP_Decimal
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x24 */
name|XK_F9
block|,
name|XK_KP_F1
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x25 */
name|XK_KP_Tab
block|,
name|XK_KP_BackTab
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x26 */
name|XK_F12
block|,
name|XK_KP_F4
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x27 */
name|XK_H
block|,
name|NoSymbol
block|,
name|XK_yen
block|,
name|NoSymbol
block|,
comment|/* 0x28 */
name|XK_G
block|,
name|NoSymbol
block|,
name|XK_currency
block|,
name|NoSymbol
block|,
comment|/* 0x29 */
name|XK_F
block|,
name|NoSymbol
block|,
name|XK_guilder
block|,
name|NoSymbol
block|,
comment|/* 0x2a */
name|XK_D
block|,
name|NoSymbol
block|,
name|XK_eth
block|,
name|XK_Eth
block|,
comment|/* 0x2b */
name|XK_S
block|,
name|NoSymbol
block|,
name|XK_ssharp
block|,
name|NoSymbol
block|,
comment|/* 0x2c */
name|XK_A
block|,
name|NoSymbol
block|,
name|XK_aring
block|,
name|XK_Aring
block|,
comment|/* 0x2d */
name|XK_Mode_switch
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|XK_Mode_switch
block|,
comment|/* 0x2e */
name|XK_Caps_Lock
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2f */
name|XK_U
block|,
name|NoSymbol
block|,
name|XK_mute_diaeresis
block|,
name|NoSymbol
block|,
comment|/* 0x30 */
name|XK_Y
block|,
name|NoSymbol
block|,
name|XK_mute_asciicircum
block|,
name|NoSymbol
block|,
comment|/* 0x31 */
name|XK_T
block|,
name|NoSymbol
block|,
name|XK_mute_grave
block|,
name|NoSymbol
block|,
comment|/* 0x32 */
name|XK_R
block|,
name|NoSymbol
block|,
name|XK_mute_acute
block|,
name|NoSymbol
block|,
comment|/* 0x33 */
name|XK_E
block|,
name|NoSymbol
block|,
name|XK_ae
block|,
name|XK_AE
block|,
comment|/* 0x34 */
name|XK_W
block|,
name|NoSymbol
block|,
name|XK_asciitilde
block|,
name|NoSymbol
block|,
comment|/* 0x35 */
name|XK_Q
block|,
name|NoSymbol
block|,
name|XK_periodcentered
block|,
name|NoSymbol
block|,
comment|/* 0x36 */
name|XK_Tab
block|,
name|XK_BackTab
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x37 */
name|XK_7
block|,
name|XK_ampersand
block|,
name|XK_backslash
block|,
name|NoSymbol
block|,
comment|/* 0x38 */
name|XK_6
block|,
name|XK_asciicircum
block|,
name|XK_asciicircum
block|,
name|NoSymbol
block|,
comment|/* 0x39 */
name|XK_5
block|,
name|XK_percent
block|,
name|XK_onehalf
block|,
name|NoSymbol
block|,
comment|/* 0x3a */
name|XK_4
block|,
name|XK_dollar
block|,
name|XK_onequarter
block|,
name|XK_threequarters
block|,
comment|/* 0x3b */
name|XK_3
block|,
name|XK_numbersign
block|,
name|XK_numbersign
block|,
name|NoSymbol
block|,
comment|/* 0x3c */
name|XK_2
block|,
name|XK_at
block|,
name|XK_at
block|,
name|NoSymbol
block|,
comment|/* 0x3d */
name|XK_1
block|,
name|XK_exclam
block|,
name|XK_exclamdown
block|,
name|NoSymbol
block|,
comment|/* 0x3e */
name|XK_quoteleft
block|,
name|XK_asciitilde
block|,
name|XK_guillemotleft
block|,
name|XK_guillemotright
block|,
comment|/* 0x3f */
comment|/* Was Mouse-L */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x40 */
comment|/* Was Mouse-M */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x41 */
comment|/* Was Mouse-R */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x42 */
comment|/* Was 4 button puck */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x43 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x44 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x45 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x46 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x47 */
name|XK_Menu
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x48 */
name|XK_F4
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x49 */
name|XK_F3
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4a */
name|XK_F2
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4b */
name|XK_F1
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4c */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4d */
comment|/* Was 'Stop' */
name|XK_Cancel
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4e */
comment|/* Was 'Enter' */
name|XK_Execute
block|,
name|XK_Print
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4f */
name|XK_System
block|,
name|XK_User
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x50 */
name|XK_F5
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x51 */
name|XK_F6
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x52 */
name|XK_F7
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x53 */
name|XK_F8
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x54 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x55 */
name|XK_ClearLine
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x56 */
comment|/* Was 'Clear Display' */
name|XK_Clear
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x57 */
name|XK_8
block|,
name|XK_asterisk
block|,
name|XK_bracketleft
block|,
name|XK_braceleft
block|,
comment|/* 0x58 */
name|XK_9
block|,
name|XK_parenleft
block|,
name|XK_bracketright
block|,
name|XK_braceright
block|,
comment|/* 0x59 */
name|XK_0
block|,
name|XK_parenright
block|,
name|XK_questiondown
block|,
name|NoSymbol
block|,
comment|/* 0x5a */
name|XK_minus
block|,
name|XK_underscore
block|,
name|XK_longminus
block|,
name|XK_macron
block|,
comment|/* 0x5b */
name|XK_equal
block|,
name|XK_plus
block|,
name|XK_plusminus
block|,
name|NoSymbol
block|,
comment|/* 0x5c */
name|XK_BackSpace
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5d */
name|XK_InsertLine
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5e */
name|XK_DeleteLine
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5f */
name|XK_I
block|,
name|NoSymbol
block|,
name|XK_mute_asciitilde
block|,
name|NoSymbol
block|,
comment|/* 0x60 */
name|XK_O
block|,
name|NoSymbol
block|,
name|XK_oslash
block|,
name|XK_Ooblique
block|,
comment|/* 0x61 */
name|XK_P
block|,
name|NoSymbol
block|,
name|XK_thorn
block|,
name|XK_Thorn
block|,
comment|/* 0x62 */
name|XK_bracketleft
block|,
name|XK_braceleft
block|,
name|XK_degree
block|,
name|NoSymbol
block|,
comment|/* 0x63 */
name|XK_bracketright
block|,
name|XK_braceright
block|,
name|XK_brokenbar
block|,
name|NoSymbol
block|,
comment|/* 0x64 */
name|XK_backslash
block|,
name|XK_bar
block|,
name|XK_mu
block|,
name|NoSymbol
block|,
comment|/* 0x65 */
comment|/* HP special  might also be Insert */
name|XK_InsertChar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x66 */
name|XK_DeleteChar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x67 */
name|XK_J
block|,
name|NoSymbol
block|,
name|XK_dollar
block|,
name|NoSymbol
block|,
comment|/* 0x68 */
name|XK_K
block|,
name|NoSymbol
block|,
name|XK_cent
block|,
name|NoSymbol
block|,
comment|/* 0x69 */
name|XK_L
block|,
name|NoSymbol
block|,
name|XK_sterling
block|,
name|NoSymbol
block|,
comment|/* 0x6a */
name|XK_semicolon
block|,
name|XK_colon
block|,
name|XK_lira
block|,
name|NoSymbol
block|,
comment|/* 0x6b */
name|XK_quoteright
block|,
name|XK_quotedbl
block|,
name|XK_quoteleft
block|,
name|XK_quoteright
block|,
comment|/* 0x6c */
name|XK_Return
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6d */
name|XK_Home
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6e */
comment|/* Prev */
name|XK_Prior
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6f */
name|XK_M
block|,
name|NoSymbol
block|,
name|XK_masculine
block|,
name|NoSymbol
block|,
comment|/* 0x70 */
name|XK_comma
block|,
name|XK_less
block|,
name|XK_less
block|,
name|NoSymbol
block|,
comment|/* 0x71 */
name|XK_period
block|,
name|XK_greater
block|,
name|XK_greater
block|,
name|NoSymbol
block|,
comment|/* 0x72 */
name|XK_slash
block|,
name|XK_question
block|,
name|XK_underscore
block|,
name|NoSymbol
block|,
comment|/* 0x73 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x74 */
name|XK_Select
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x75 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x76 */
name|XK_Next
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x77 */
name|XK_N
block|,
name|NoSymbol
block|,
name|XK_ordfeminine
block|,
name|NoSymbol
block|,
comment|/* 0x78 */
comment|/* "Space  the final frontier..." */
name|XK_space
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x79 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7a */
comment|/* Kanji Right */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7b */
name|XK_Left
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7c */
name|XK_Down
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7d */
name|XK_Up
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7e */
name|XK_Right
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
comment|/* 0x7f */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* This routine converts a hil keyboard id to the X keyboard id used to      *   look up the keyboard in the /usr/lib/X11/XHPKeymaps file.      * Notes:      *   Modified from libXhp XHPGetHILandCvt().      *   We used to just do some math to get the extended keyboard id but we      *     got some signals crossed with the NLIO guys and some of the      *     keyboards got misplaced in XHPKeymaps so we now have a look up      *     table.  For the PS2 keyboards, we still use math.      *   See the manual on using hp-hil devices with HP-UX for the keyboard      *     nationality codes; they are the low order 6 bits of the device      *     id; 0x1f is United States, so we'll subtract from 0x1f to give      *     the U.S.  a keyId of zero; The PS2 keyboards have hil ids E0-FF.      *   6 bits == a max of 64 different keyboards.  32 extended and 32 PS2.      *   George says to use 7 bits:  HIL ids in the range A0-FF.      *     A0-BF  Compressed keyboard.  Not used (yet).      *     C0-DF  Extended (ITF) keyboard      *     E0-FF  Standard keyboard.  We change to be the PS2.      *   Map extended keyboards to key ids 0-31.  The unsupported keyboards      *     are the ones with hard coded numbers.      *   The apollo keyboards are 33-40 (I don't want to talk about it and      *     hind sight is 20/20).      *   Map PS2 keyboards to key ids 60-91.      * WARNING      *   ONLY call this for HIL keyed devices.  For other stuff (such as      *     serial keyboards), use the named lookups.      * Input:      *   hil_id:      * Returns:      *   X keyboard id.      *   If the hil_id is not a supported keyboard, return unsupported id.      *   If the hil_id is not a keyboard, return KB_NULL.      */
end_comment

begin_function
name|int
name|hil_to_kbd_id
parameter_list|(
name|hil_id
parameter_list|)
name|int
name|hil_id
decl_stmt|;
block|{
name|int
name|kbd_id
decl_stmt|;
specifier|static
name|short
name|int
name|key_tab
index|[]
init|=
block|{
literal|31
block|,
comment|/* HIL=00h Undefined keyboard */
literal|30
block|,
comment|/* HIL=01h Undefined keyboard */
name|KB_Japanese
block|,
comment|/* HIL=02h */
name|KB_Swiss_French
block|,
comment|/* HIL=03h */
literal|29
block|,
comment|/* HIL=04h No keysym support for Portugues */
literal|28
block|,
comment|/* HIL=05h No keysym support for Arabic    */
literal|27
block|,
comment|/* HIL=06h No keysym support for Hebrew    */
name|KB_Canada_English
block|,
comment|/* HIL=07h */
literal|26
block|,
comment|/* HIL=08h No keysym support for Turkish   */
literal|25
block|,
comment|/* HIL=09h No keysym support for Greek     */
literal|24
block|,
comment|/* HIL=0Ah No keysym support for Thai      */
name|KB_Italian
block|,
comment|/* HIL=0Bh */
name|KB_Korean
block|,
comment|/* HIL=0Ch */
name|KB_Dutch
block|,
comment|/* HIL=0Dh */
name|KB_Swedish
block|,
comment|/* HIL=0Eh */
name|KB_German
block|,
comment|/* HIL=0Fh */
name|KB_S_Chinese
block|,
comment|/* HIL=10h */
name|KB_T_Chinese
block|,
comment|/* HIL=11h */
name|KB_Swiss_French2
block|,
comment|/* HIL=12h */
name|KB_Euro_Spanish
block|,
comment|/* HIL=13h */
name|KB_Swiss_German2
block|,
comment|/* HIL=14h */
name|KB_Belgian
block|,
comment|/* HIL=15h */
name|KB_Finnish
block|,
comment|/* HIL=16h */
name|KB_UK_English
block|,
comment|/* HIL=17h */
name|KB_Canada_French
block|,
comment|/* HIL=18h */
name|KB_Swiss_German
block|,
comment|/* HIL=19h */
name|KB_Norwegian
block|,
comment|/* HIL=1Ah */
name|KB_French
block|,
comment|/* HIL=1Bh */
name|KB_Danish
block|,
comment|/* HIL=1Ch */
name|KB_Katakana
block|,
comment|/* HIL=1Dh */
name|KB_Latin_Spanish
block|,
comment|/* HIL=1Eh */
name|KB_US_English
block|,
comment|/* HIL=1Fh */
block|}
decl_stmt|;
if|if
condition|(
name|hil_id
operator|==
literal|0x30
condition|)
return|return
name|KB_BUTTON_BOX
return|;
if|if
condition|(
name|hil_id
operator|==
literal|0x5c
condition|)
return|return
name|KB_US_English
return|;
comment|/* Barcode reader */
if|if
condition|(
literal|0xE0
operator|<=
name|hil_id
operator|&&
name|hil_id
operator|<=
literal|0xFF
condition|)
comment|/* PS2 keyboard: 0xE0 - 0xFF */
return|return
operator|(
literal|91
operator|-
operator|(
name|hil_id
operator|-
literal|0xE0
operator|)
operator|)
return|;
comment|/* 60 - 91 */
if|if
condition|(
literal|0xC0
operator|<=
name|hil_id
operator|&&
name|hil_id
operator|<=
literal|0xDF
condition|)
comment|/* ITF keyboard: 0xC0 - 0xDF */
return|return
name|key_tab
index|[
name|hil_id
operator|&
literal|0x1f
index|]
return|;
comment|/* 0 - 31 */
comment|/* Something unknown or not yet supported (such as a nonkbd device (like      *   the ID module)).      */
return|return
name|KB_NULL
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* __hpux */
end_comment

begin_if
if|#
directive|if
name|__apollo
end_if

begin_include
include|#
directive|include
file|"ap_keysym.h"
end_include

begin_comment
comment|/* for the apXK_ keysyms */
end_comment

begin_decl_stmt
specifier|static
name|KeySym
name|Apollo_NorthAmericanMap
index|[]
init|=
block|{
comment|/* code values in comments at line end are actual value reported on HIL.     REMEMBER, there is an offset of MIN_KEYCODE applied to this table! */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x00 */
name|XK_Select
block|,
name|XK_Insert
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x01 */
name|apXK_LineDel
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x02 */
name|apXK_CharDel
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x03 */
name|XK_F10
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x04 */
name|XK_F1
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x05 */
name|XK_F2
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x06 */
name|XK_F3
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x07 */
name|XK_F4
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x08 */
name|XK_F5
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x09 */
name|XK_F6
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x0a */
name|XK_F7
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x0b */
name|XK_F8
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x0c */
name|XK_F9
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x0d */
name|XK_Redo
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x0e */
name|apXK_Read
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x0f */
name|apXK_Edit
block|,
name|apXK_Save
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x10 */
name|apXK_Exit
block|,
name|XK_Cancel
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x11 */
name|XK_Pause
block|,
name|XK_Help
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x12 */
name|apXK_Copy
block|,
name|apXK_Cut
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x13 */
name|apXK_Paste
block|,
name|XK_Undo
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x14 */
name|apXK_Grow
block|,
name|apXK_Move
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x15 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x16 */
name|XK_Escape
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x17 */
name|XK_1
block|,
name|XK_exclam
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x18 */
name|XK_2
block|,
name|XK_at
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x19 */
name|XK_3
block|,
name|XK_numbersign
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1a */
name|XK_4
block|,
name|XK_dollar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1b */
name|XK_5
block|,
name|XK_percent
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1c */
name|XK_6
block|,
name|XK_asciicircum
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1d */
name|XK_7
block|,
name|XK_ampersand
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1e */
name|XK_8
block|,
name|XK_asterisk
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x1f */
name|XK_9
block|,
name|XK_parenleft
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x20 */
name|XK_0
block|,
name|XK_parenright
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x21 */
name|XK_minus
block|,
name|XK_underscore
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x22 */
name|XK_equal
block|,
name|XK_plus
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x23 */
name|XK_quoteleft
block|,
name|XK_asciitilde
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x24 */
name|XK_BackSpace
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x25 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x26 */
name|apXK_LeftBar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x27 */
name|apXK_Cmd
block|,
name|apXK_Shell
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x28 */
name|apXK_RightBar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x29 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2a */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2b */
name|XK_Tab
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2c */
name|XK_Q
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2d */
name|XK_W
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2e */
name|XK_E
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2f */
name|XK_R
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x30 */
name|XK_T
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x31 */
name|XK_Y
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x32 */
name|XK_U
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x33 */
name|XK_I
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x34 */
name|XK_O
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x35 */
name|XK_P
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x36 */
name|XK_bracketleft
block|,
name|XK_braceleft
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x37 */
name|XK_bracketright
block|,
name|XK_braceright
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x38 */
name|XK_Mode_switch
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x39 */
name|XK_Delete
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3a */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3b */
name|XK_KP_7
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3c */
name|XK_KP_8
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3d */
name|XK_KP_9
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3e */
name|XK_KP_Add
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3f */
name|apXK_LeftBox
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x40 */
name|XK_Up
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x41 */
name|apXK_RightBox
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x42 */
name|XK_Control_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x43 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x44 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x45 */
name|XK_A
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x46 */
name|XK_S
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x47 */
name|XK_D
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x48 */
name|XK_F
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x49 */
name|XK_G
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4a */
name|XK_H
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4b */
name|XK_J
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4c */
name|XK_K
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4d */
name|XK_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4e */
name|XK_semicolon
block|,
name|XK_colon
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x4f */
name|XK_quoteright
block|,
name|XK_quotedbl
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x50 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x51 */
name|XK_Return
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x52 */
name|XK_backslash
block|,
name|XK_bar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x53 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x54 */
name|XK_KP_4
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x55 */
name|XK_KP_5
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x56 */
name|XK_KP_6
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x57 */
name|XK_KP_Subtract
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x58 */
name|XK_Left
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x59 */
name|XK_Next
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5a */
name|XK_Right
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5b */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5c */
name|apXK_Repeat
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5d */
name|XK_Shift_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5e */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x5f */
name|XK_Z
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x60 */
name|XK_X
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x61 */
name|XK_C
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x62 */
name|XK_V
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x63 */
name|XK_B
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x64 */
name|XK_N
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x65 */
name|XK_M
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x66 */
name|XK_comma
block|,
name|XK_less
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x67 */
name|XK_period
block|,
name|XK_greater
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x68 */
name|XK_slash
block|,
name|XK_question
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x69 */
name|XK_Shift_R
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6a */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6b */
name|apXK_Pop
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6c */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6d */
name|XK_KP_1
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6e */
name|XK_KP_2
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x6f */
name|XK_KP_3
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x70 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x71 */
name|apXK_UpBox
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x72 */
name|XK_Down
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x73 */
name|apXK_DownBox
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x74 */
name|XK_Alt_L
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x75 */
name|XK_space
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x76 */
name|XK_Alt_R
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x77 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x78 */
name|XK_KP_0
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x79 */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7a */
name|XK_KP_Decimal
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7b */
name|XK_KP_Enter
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7c */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7d */
name|XK_Caps_Lock
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7e */
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x7f */
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* __apollo */
end_comment

begin_decl_stmt
specifier|static
name|KeySym
name|LPFKMap
index|[]
init|=
block|{
name|XK_exclam
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x21 */
name|XK_quotedbl
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x22 */
name|XK_numbersign
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x23 */
name|XK_dollar
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x24 */
name|XK_percent
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x25 */
name|XK_ampersand
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x26 */
name|XK_quoteright
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x27 */
name|XK_parenleft
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x28 */
name|XK_parenright
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x29 */
name|XK_asterisk
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2a */
name|XK_plus
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2b */
name|XK_comma
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2c */
name|XK_minus
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2d */
name|XK_period
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2e */
name|XK_slash
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x2f */
name|XK_0
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x30 */
name|XK_1
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x31 */
name|XK_2
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x32 */
name|XK_3
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x33 */
name|XK_4
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x34 */
name|XK_5
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x35 */
name|XK_6
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x36 */
name|XK_7
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x37 */
name|XK_8
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x38 */
name|XK_9
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x39 */
name|XK_colon
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3a */
name|XK_semicolon
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3b */
name|XK_less
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3c */
name|XK_equal
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3d */
name|XK_greater
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3e */
name|XK_question
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x3f */
name|XK_at
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
name|NoSymbol
block|,
comment|/* 0x40 */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|KeySymsRec
name|LPFKKeySyms
init|=
block|{
name|LPFKMap
block|,
literal|0x21
block|,
literal|0x40
block|,
literal|4
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* This structure has ONE default KeySymsRec per keyboard family per OS     *   that is used in case we can't look up the correct one.     * Notes:     *    All key maps SHOULD start at MIN_KEYCODE (aka 0) except HP-UX,     *      where the exteneded keyboard keymaps start at 2 (because the     *      extended keyboards didn't generate keycodes 0 and 1).  The PS2     *      keyboards generate keycodes starting at 0 so they need a     *      different MIN_KEYCODE.     *    These default keymaps are overwritten so they should contain at     *      least enough entries so that the largest keytable will fit.  In     *      most cases this means that last entry is 0x7f and the keymap size     *      is max-entries x width == 0x80 x 4.     */
end_comment

begin_decl_stmt
specifier|static
name|KeySymsRec
name|DefaultKeySyms
index|[]
init|=
block|{
comment|/*	map name 	minKeyCode		maxKC		      width */
if|#
directive|if
name|defined
argument_list|(
name|__hpux
argument_list|)
operator|||
name|defined
argument_list|(
name|__hp_osf
argument_list|)
operator|||
name|defined
argument_list|(
name|hp9000
argument_list|)
operator|&
name|USASCIIMap
index|[
literal|8
index|]
block|,
operator|(
name|MIN_KEYCODE
operator|+
literal|0x02
operator|)
block|,
operator|(
name|MIN_KEYCODE
operator|+
literal|0x7F
operator|)
block|,
literal|4
block|,
name|USASCIIMap
block|,
operator|(
name|MIN_KEYCODE
operator|)
block|,
operator|(
name|MIN_KEYCODE
operator|+
literal|0x7F
operator|)
block|,
literal|4
block|,
name|null_keymap
block|,
operator|(
name|MIN_KEYCODE
operator|)
block|,
operator|(
name|MIN_KEYCODE
operator|+
literal|0x7F
operator|)
block|,
literal|2
block|,
endif|#
directive|endif
if|#
directive|if
name|__apollo
name|Apollo_NorthAmericanMap
block|,
operator|(
name|MIN_KEYCODE
operator|)
block|,
operator|(
name|MIN_KEYCODE
operator|+
literal|0x7F
operator|)
block|,
literal|4
block|,
endif|#
directive|endif
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Convert a X keyboard ID into a family.      * Input: X keyboard ID      * Returns:      *   0 (ITF)      *   1 (PS2)      *   2 (null or unknown device)      *   0 Apollo      */
end_comment

begin_function
specifier|static
name|int
name|kbd_family
parameter_list|(
name|key_id
parameter_list|)
block|{
name|int
name|n
decl_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|__hpux
argument_list|)
operator|||
name|defined
argument_list|(
name|__hp_osf
argument_list|)
operator|||
name|defined
argument_list|(
name|hp9000
argument_list|)
if|if
condition|(
literal|0
operator|<=
name|key_id
operator|&&
name|key_id
operator|<=
literal|31
condition|)
name|n
operator|=
literal|0
expr_stmt|;
comment|/* ITF keyboard */
elseif|else
if|if
condition|(
literal|60
operator|<=
name|key_id
operator|&&
name|key_id
operator|<=
literal|91
condition|)
name|n
operator|=
literal|1
expr_stmt|;
comment|/* PS2 keyboard */
else|else
name|n
operator|=
literal|2
expr_stmt|;
comment|/* KB_NULL */
endif|#
directive|endif
if|#
directive|if
name|__apollo
name|n
operator|=
literal|0
expr_stmt|;
endif|#
directive|endif
return|return
name|n
return|;
block|}
end_function

begin_comment
comment|/* This routine is called to get a pointer to a KeySymRec so you can      * overwrite the key table with the correct one for the keyboard      * connected to the system.      */
end_comment

begin_function
name|KeySymsRec
modifier|*
name|hpKeySyms
parameter_list|(
name|key_id
parameter_list|)
block|{
return|return
operator|&
name|DefaultKeySyms
index|[
name|kbd_family
argument_list|(
name|key_id
argument_list|)
index|]
return|;
block|}
end_function

begin_comment
comment|/* This routine is called if the load-keytable-from-file routine fails      * and you need a default KeySymRec.  I need this for HP-UX 'cause the      * extended and PS2 keyboards have different min keycodes and I want to      * use the US Ascii keymap as the default.      */
end_comment

begin_function
name|KeySymsRec
modifier|*
name|hpDefaultKeySyms
parameter_list|(
name|key_id
parameter_list|)
block|{
return|return
name|hpKeySyms
argument_list|(
name|key_id
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* ******************************************************************** */
end_comment

begin_comment
comment|/* ************************* Modifier Tables ************************** */
end_comment

begin_comment
comment|/* ******************************************************************** */
end_comment

begin_define
define|#
directive|define
name|cT
value|(ControlMask)
end_define

begin_define
define|#
directive|define
name|sH
value|(ShiftMask)
end_define

begin_define
define|#
directive|define
name|lK
value|(LockMask)
end_define

begin_define
define|#
directive|define
name|mT
value|(Mod1Mask)
end_define

begin_comment
comment|/* A modmap with no modifiers.  To be used with null_keymap */
end_comment

begin_decl_stmt
specifier|static
name|CARD8
name|null_modmap
index|[
name|MAP_LENGTH
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Shift table values up by 8.  This offset is necessary to reserve      *   codes for mouse buttons.  Note last 8 entries of table are      *   commented out to preserve length of table.      * Note:  '#define MIN_KEYCODE 8' is above      */
end_comment

begin_if
if|#
directive|if
name|defined
argument_list|(
name|__hpux
argument_list|)
operator|||
name|defined
argument_list|(
name|__hp_osf
argument_list|)
operator|||
name|defined
argument_list|(
name|hp9000
argument_list|)
end_if

begin_comment
comment|/* This table is for the HP hil extended keyboards.      * For the PS2 keyboards, the only difference is keycode 0.  I used to      *   use the same table for both keyboard types (since keycode 0 can't      *   be generated by the extended keyboard) but that caused problems      *   with xmodmap.      */
end_comment

begin_decl_stmt
specifier|static
name|CARD8
name|hil_modmap
index|[
name|MAP_LENGTH
index|]
init|=
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|mT
block|,
name|mT
block|,
name|sH
block|,
name|sH
block|,
name|cT
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 00-0f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 10-1f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|mT
block|,
name|lK
block|,
comment|/* 20-2f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 30-3f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 40-4f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 50-5f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 60-6f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 70-7f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 80-8f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 90-9f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* a0-af */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* b0-bf */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* c0-cf */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* d0-df */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* e0-ef */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/*0,  0,  0,  0,  0,  0,  0,  0, /* f0-ff */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Same table as the hil_modmap but for PS2 keyboards.  Only      *   difference is keycode 0 is a control key.      */
end_comment

begin_decl_stmt
specifier|static
name|CARD8
name|PS2_modmap
index|[
name|MAP_LENGTH
index|]
init|=
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|cT
block|,
literal|0
block|,
name|mT
block|,
name|mT
block|,
name|sH
block|,
name|sH
block|,
name|cT
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 00-0f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 10-1f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|mT
block|,
name|lK
block|,
comment|/* 20-2f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 30-3f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 40-4f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 50-5f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 60-6f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 70-7f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 80-8f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 90-9f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* a0-af */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* b0-bf */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* c0-cf */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* d0-df */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* e0-ef */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/*0,  0,  0,  0,  0,  0,  0,  0, /* f0-ff */
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|__apollo
end_ifdef

begin_comment
comment|/* This table is for the Apollo NA and MN keyboards. */
end_comment

begin_decl_stmt
specifier|static
name|CARD8
name|apollo_modmap
index|[
name|MAP_LENGTH
index|]
init|=
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 00-0f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 10-1f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 20-2f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|mT
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 30-3f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|cT
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 40-4f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|sH
block|,
literal|0
block|,
comment|/* 50-5f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|sH
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 60-6f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|mT
block|,
literal|0
block|,
name|mT
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
name|lK
block|,
literal|0
block|,
comment|/* 70-7f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 80-8f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* 90-9f */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* a0-af */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* b0-bf */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* c0-cf */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* d0-df */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* e0-ef */
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/*0,  0,  0,  0,  0,  0,  0,  0, /* f0-ff */
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* This routine returns the modifier map to be used with the keymap that      *   has keyboard/(X id) kbd_id.      * Note:  This is easy because each OS we support now only has one or      *   two mod maps for all keyboards it supports.      */
end_comment

begin_function
name|CARD8
modifier|*
name|hpModMap
parameter_list|(
name|kbd_id
parameter_list|)
block|{
if|#
directive|if
name|defined
argument_list|(
name|__hpux
argument_list|)
operator|||
name|defined
argument_list|(
name|__hp_osf
argument_list|)
operator|||
name|defined
argument_list|(
name|hp9000
argument_list|)
switch|switch
condition|(
name|kbd_family
argument_list|(
name|kbd_id
argument_list|)
condition|)
block|{
case|case
literal|0
case|:
return|return
name|hil_modmap
return|;
comment|/* Extended keyboard */
case|case
literal|1
case|:
return|return
name|PS2_modmap
return|;
comment|/* PS2 keyboard */
case|case
literal|2
case|:
return|return
name|null_modmap
return|;
comment|/* button box */
block|}
endif|#
directive|endif
ifdef|#
directive|ifdef
name|__apollo
return|return
name|apollo_modmap
return|;
endif|#
directive|endif
block|}
end_function

begin_comment
comment|/* ******************************************************************** */
end_comment

begin_comment
comment|/* *********************************  ********************************* */
end_comment

begin_comment
comment|/* ******************************************************************** */
end_comment

begin_comment
comment|/* Routines in getkeysym.c */
end_comment

begin_decl_stmt
specifier|extern
name|HPKKeyDeviceInfo
modifier|*
name|HPKlookup_kd_by_id
argument_list|()
decl_stmt|,
modifier|*
name|HPKlookup_kd_by_name
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|extern
name|HPKModMap
modifier|*
name|HPKlookup_modmap
parameter_list|()
function_decl|;
end_function_decl

begin_comment
comment|/* Empty space that can be filled in when I read keyboard info from a      *   file.  I don't think I can just overwrite (eg) the null_maps      *   because if they change keyboards, recycle and the I can't find a      *   map, the default won't work anymore.      */
end_comment

begin_decl_stmt
specifier|static
name|KeySym
name|tmp_keymap
index|[
literal|8
operator|*
literal|256
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* biggest keymap */
end_comment

begin_decl_stmt
specifier|static
name|CARD8
name|tmp_modmap
index|[
name|MAP_LENGTH
index|]
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|maparoo
parameter_list|(
name|kptr
parameter_list|,
name|keysyms_rec
parameter_list|,
name|complain
parameter_list|,
name|modmap
parameter_list|,
name|default_modmap
parameter_list|)
name|KeySymsRec
modifier|*
name|keysyms_rec
decl_stmt|;
name|HPKKeyDeviceInfo
modifier|*
name|kptr
decl_stmt|;
name|CARD8
modifier|*
modifier|*
name|modmap
decl_stmt|,
decl|*
name|default_modmap
decl_stmt|;
end_function

begin_block
block|{
name|CARD8
modifier|*
name|the_modmap
decl_stmt|;
name|HPKModMap
modifier|*
name|mptr
decl_stmt|;
name|keysyms_rec
operator|->
name|map
operator|=
name|tmp_keymap
expr_stmt|;
name|keysyms_rec
operator|->
name|minKeyCode
operator|=
name|kptr
operator|->
name|min_keycode
expr_stmt|;
name|keysyms_rec
operator|->
name|maxKeyCode
operator|=
name|kptr
operator|->
name|max_keycode
expr_stmt|;
name|keysyms_rec
operator|->
name|mapWidth
operator|=
name|kptr
operator|->
name|columns
expr_stmt|;
if|if
condition|(
name|mptr
operator|=
name|HPKlookup_modmap
argument_list|(
name|kptr
operator|->
name|modmap_name
argument_list|)
condition|)
block|{
name|memcpy
argument_list|(
name|tmp_modmap
argument_list|,
name|mptr
operator|->
name|modmap
argument_list|,
name|MAP_LENGTH
argument_list|)
expr_stmt|;
name|the_modmap
operator|=
name|tmp_modmap
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|complain
condition|)
name|ErrorF
argument_list|(
literal|"Could not find modmap \"%s\"- using default (NULL map).\n"
argument_list|,
name|kptr
operator|->
name|modmap_name
argument_list|)
expr_stmt|;
name|the_modmap
operator|=
name|default_modmap
expr_stmt|;
block|}
operator|*
name|modmap
operator|=
name|the_modmap
expr_stmt|;
block|}
end_block

begin_comment
comment|/*       * Input:      *   keydevice_id:  The keydevice ID.  On HP-UX, this is the output of      *     hil_to_kbd_id().      *   keysyms_rec:  Pointer to a KeySymsRec to fill in.      *   modmap:       Pointer to a pointer to a modmap.      * Output:      *   keysyms_rec:  FIlled in.      *   modmap:  points to a modmap to use with the keysyms_rec.      * Returns:      *   TRUE : everything went as expected      *   FALSE: Something went screwie, using default maps.      * Notes:      *   Don't complain if can't load maps for the button box.      */
end_comment

begin_function
name|int
name|HPKget_maps_by_id
parameter_list|(
name|keydevice_id
parameter_list|,
name|keysyms_rec
parameter_list|,
name|modmap
parameter_list|)
name|KeySymsRec
modifier|*
name|keysyms_rec
decl_stmt|;
name|CARD8
modifier|*
modifier|*
name|modmap
decl_stmt|;
block|{
name|CARD8
modifier|*
name|the_modmap
decl_stmt|;
name|HPKKeyDeviceInfo
modifier|*
name|kptr
decl_stmt|;
name|HPKModMap
modifier|*
name|mptr
decl_stmt|;
operator|*
name|keysyms_rec
operator|=
operator|*
name|hpDefaultKeySyms
argument_list|(
name|keydevice_id
argument_list|)
expr_stmt|;
operator|*
name|modmap
operator|=
name|hpModMap
argument_list|(
name|keydevice_id
argument_list|)
expr_stmt|;
if|if
condition|(
name|keydevice_id
operator|==
name|KB_NULL
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
operator|!
name|HPKsetup
argument_list|()
condition|)
block|{
name|opps
label|:
if|if
condition|(
name|keydevice_id
operator|!=
name|KB_BUTTON_BOX
condition|)
name|ErrorF
argument_list|(
literal|"Unable to load keytable - using defaults.\n"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
operator|!
name|HPKread_keymap
argument_list|(
name|keydevice_id
argument_list|,
name|tmp_keymap
argument_list|)
condition|)
goto|goto
name|opps
goto|;
if|if
condition|(
name|kptr
operator|=
name|HPKlookup_kd_by_id
argument_list|(
name|keydevice_id
argument_list|)
condition|)
name|maparoo
argument_list|(
name|kptr
argument_list|,
name|keysyms_rec
argument_list|,
name|False
argument_list|,
name|modmap
argument_list|,
name|hpModMap
argument_list|(
name|keydevice_id
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|HPKclean_up
argument_list|()
expr_stmt|;
return|return
name|TRUE
return|;
block|}
end_function

begin_comment
comment|/*       * Input:      *   keydevice_name:        *   keysyms_rec:  Pointer to a KeySymsRec to fill in.      *   modmap:       Pointer to a pointer to a modmap.      * Output:      *   keysyms_rec:  FIlled in.      *   modmap:  points to a modmap to use with the keysyms_rec.      * Returns:      *   TRUE : everything went as expected      *   FALSE: Something went screwie, using null maps.      */
end_comment

begin_function
name|int
name|HPKget_kb_info_by_name
parameter_list|(
name|keydevice_name
parameter_list|,
name|keysyms_rec
parameter_list|,
name|modmap
parameter_list|)
name|char
modifier|*
name|keydevice_name
decl_stmt|;
name|KeySymsRec
modifier|*
name|keysyms_rec
decl_stmt|;
name|CARD8
modifier|*
modifier|*
name|modmap
decl_stmt|;
block|{
name|int
name|all_OK
init|=
name|TRUE
decl_stmt|;
if|if
condition|(
operator|!
name|HPKsetup
argument_list|()
condition|)
block|{
name|opps
label|:
name|ErrorF
argument_list|(
literal|"Unable to load keytable \"%s\" - using defaults (NULL maps).\n"
argument_list|,
name|keydevice_name
argument_list|)
expr_stmt|;
operator|*
name|keysyms_rec
operator|=
operator|*
name|hpDefaultKeySyms
argument_list|(
name|KB_NULL
argument_list|)
expr_stmt|;
operator|*
name|modmap
operator|=
name|hpModMap
argument_list|(
name|KB_NULL
argument_list|)
expr_stmt|;
name|all_OK
operator|=
name|FALSE
expr_stmt|;
block|}
else|else
block|{
name|HPKKeyDeviceInfo
modifier|*
name|kptr
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|kptr
operator|=
name|HPKlookup_kd_by_name
argument_list|(
name|keydevice_name
argument_list|)
operator|)
operator|||
operator|!
name|HPKread_keymap
argument_list|(
name|kptr
operator|->
name|keydevice_id
argument_list|,
name|tmp_keymap
argument_list|)
condition|)
goto|goto
name|opps
goto|;
name|maparoo
argument_list|(
name|kptr
argument_list|,
name|keysyms_rec
argument_list|,
name|True
argument_list|,
name|modmap
argument_list|,
name|null_keymap
argument_list|)
expr_stmt|;
block|}
name|HPKclean_up
argument_list|()
expr_stmt|;
return|return
name|all_OK
return|;
block|}
end_function

end_unit

