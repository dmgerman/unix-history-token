begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"X.h"
end_include

begin_include
include|#
directive|include
file|"Xmd.h"
end_include

begin_include
include|#
directive|include
file|"servermd.h"
end_include

begin_include
include|#
directive|include
file|"gcstruct.h"
end_include

begin_include
include|#
directive|include
file|"window.h"
end_include

begin_include
include|#
directive|include
file|"pixmapstr.h"
end_include

begin_include
include|#
directive|include
file|"scrnintstr.h"
end_include

begin_include
include|#
directive|include
file|"../cfb/cfb.h"
end_include

begin_include
include|#
directive|include
file|"topcat.h"
end_include

begin_define
define|#
directive|define
name|PIXER
parameter_list|(
name|Drawable
parameter_list|)
value|((hpPrivPixmapPtr)((PixmapPtr)Drawable)->devPrivate.ptr)
end_define

begin_function
name|void
name|tcFillBoxTile
parameter_list|(
name|pDrawable
parameter_list|,
name|nBox
parameter_list|,
name|pBox
parameter_list|,
name|tile
parameter_list|,
name|xrot
parameter_list|,
name|yrot
parameter_list|,
name|rop
parameter_list|,
name|planemask
parameter_list|)
name|DrawablePtr
name|pDrawable
decl_stmt|;
name|int
name|nBox
decl_stmt|;
comment|/* number of boxes to fill */
specifier|register
name|BoxPtr
name|pBox
decl_stmt|;
comment|/* pointer to list of boxes to fill */
name|PixmapPtr
name|tile
decl_stmt|;
comment|/* tile */
name|int
name|xrot
decl_stmt|,
name|yrot
decl_stmt|;
name|int
name|rop
decl_stmt|;
name|int
name|planemask
decl_stmt|;
block|{
name|int
name|xoff
decl_stmt|,
name|yoff
decl_stmt|;
specifier|register
name|hpChunk
modifier|*
name|pTileChunk
decl_stmt|;
comment|/* descriptive info for tiles bits */
name|void
function_decl|(
modifier|*
name|bitMover
function_decl|)
parameter_list|()
function_decl|;
name|ScreenPtr
name|pScreen
init|=
name|pDrawable
operator|->
name|pScreen
decl_stmt|;
name|int
name|tileWidth
decl_stmt|;
comment|/* width of tile in pixels */
name|int
name|tileHeight
decl_stmt|;
comment|/* height of tile */
name|int
name|yT
decl_stmt|,
name|yB
decl_stmt|,
name|xL
decl_stmt|,
name|xR
decl_stmt|,
name|xLWidth
decl_stmt|,
name|yTHeight
decl_stmt|,
name|fullX
decl_stmt|,
name|fullXLimit
decl_stmt|,
name|fullY
decl_stmt|,
name|fullYLimit
decl_stmt|,
name|xCoord
decl_stmt|,
name|yCoord
decl_stmt|;
name|int
name|destx
decl_stmt|,
name|desty
decl_stmt|;
name|int
name|w
decl_stmt|;
comment|/* width of current box */
name|int
name|h
decl_stmt|;
comment|/* height of current box */
name|pTileChunk
operator|=
operator|(
call|(
name|hpPrivPixmapPtr
call|)
argument_list|(
name|tile
operator|->
name|devPrivate
operator|.
name|ptr
argument_list|)
operator|)
operator|->
name|pChunk
expr_stmt|;
comment|/* rop = GXcopy /*pGC->alu*/
empty_stmt|;
name|bitMover
operator|=
name|getPrivScreenPtr
argument_list|(
name|pScreen
argument_list|)
operator|->
name|MoveBits
expr_stmt|;
name|tileHeight
operator|=
name|tile
operator|->
name|drawable
operator|.
name|height
expr_stmt|;
name|tileWidth
operator|=
name|tile
operator|->
name|drawable
operator|.
name|width
expr_stmt|;
if|if
condition|(
name|pDrawable
operator|->
name|type
operator|==
name|DRAWABLE_PIXMAP
condition|)
comment|/* offscreen pixmap */
block|{
name|xoff
operator|=
name|PIXER
argument_list|(
name|pDrawable
argument_list|)
operator|->
name|pChunk
operator|->
name|x
expr_stmt|;
name|yoff
operator|=
name|PIXER
argument_list|(
name|pDrawable
argument_list|)
operator|->
name|pChunk
operator|->
name|y
expr_stmt|;
block|}
else|else
block|{
name|xoff
operator|=
literal|0
expr_stmt|;
name|yoff
operator|=
literal|0
expr_stmt|;
block|}
for|for
control|(
init|;
name|nBox
operator|--
condition|;
name|pBox
operator|++
control|)
block|{
name|w
operator|=
name|pBox
operator|->
name|x2
operator|-
name|pBox
operator|->
name|x1
expr_stmt|;
name|h
operator|=
name|pBox
operator|->
name|y2
operator|-
name|pBox
operator|->
name|y1
expr_stmt|;
comment|/* offset into tile on left edge */
name|xL
operator|=
operator|(
name|pBox
operator|->
name|x1
operator|-
name|xrot
operator|)
operator|%
name|tileWidth
expr_stmt|;
if|if
condition|(
name|xL
operator|<
literal|0
condition|)
name|xL
operator|+=
name|tileWidth
expr_stmt|;
comment|/* number of pixels used on left */
name|xLWidth
operator|=
operator|(
name|xL
operator|)
condition|?
operator|(
name|tileWidth
operator|-
name|xL
operator|)
else|:
literal|0
expr_stmt|;
if|if
condition|(
name|xLWidth
operator|>=
name|w
condition|)
block|{
comment|/* one tile covers full x range */
name|xLWidth
operator|=
name|w
expr_stmt|;
name|xR
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
comment|/* see if there's a part tile on right edge */
name|xR
operator|=
operator|(
name|pBox
operator|->
name|x2
operator|-
name|xrot
operator|)
operator|%
name|tileWidth
expr_stmt|;
if|if
condition|(
name|xR
operator|<
literal|0
condition|)
name|xR
operator|+=
name|tileWidth
expr_stmt|;
block|}
comment|/* y offset in tile at top */
name|yT
operator|=
operator|(
name|pBox
operator|->
name|y1
operator|-
name|yrot
operator|)
operator|%
name|tileHeight
expr_stmt|;
if|if
condition|(
name|yT
operator|<
literal|0
condition|)
name|yT
operator|+=
name|tileHeight
expr_stmt|;
comment|/* number of pixels used on top */
name|yTHeight
operator|=
operator|(
name|yT
operator|)
condition|?
operator|(
name|tileHeight
operator|-
name|yT
operator|)
else|:
literal|0
expr_stmt|;
if|if
condition|(
name|yTHeight
operator|>=
name|h
condition|)
block|{
comment|/* tile covers full y range */
name|yTHeight
operator|=
name|h
expr_stmt|;
name|yB
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
comment|/* portion of tile used on bottom */
name|yB
operator|=
operator|(
name|pBox
operator|->
name|y2
operator|-
name|yrot
operator|)
operator|%
name|tileHeight
expr_stmt|;
if|if
condition|(
name|yB
operator|<
literal|0
condition|)
name|yB
operator|+=
name|tileHeight
expr_stmt|;
block|}
name|destx
operator|=
name|pBox
operator|->
name|x1
operator|+
name|xoff
expr_stmt|;
name|desty
operator|=
name|pBox
operator|->
name|y1
operator|+
name|yoff
expr_stmt|;
name|fullX
operator|=
operator|(
name|w
operator|-
name|xLWidth
operator|)
operator|/
name|tileWidth
expr_stmt|;
comment|/* full tiles across */
name|fullY
operator|=
operator|(
name|h
operator|-
name|yTHeight
operator|)
operator|/
name|tileHeight
expr_stmt|;
comment|/* full vertical tiles */
name|fullXLimit
operator|=
name|destx
operator|+
name|xLWidth
operator|+
name|fullX
operator|*
name|tileWidth
expr_stmt|;
name|fullYLimit
operator|=
name|desty
operator|+
name|yTHeight
operator|+
name|fullY
operator|*
name|tileHeight
expr_stmt|;
if|if
condition|(
name|rop
operator|!=
name|GXcopy
condition|)
block|{
comment|/* Now the actual work... 	       First, fill partial horizontal band across top of rectangle */
if|if
condition|(
name|yT
condition|)
block|{
if|if
condition|(
name|xL
condition|)
block|{
comment|/* fill the top left corner if it's a partial tile */
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
operator|+
name|xL
argument_list|,
name|pTileChunk
operator|->
name|y
operator|+
name|yT
argument_list|,
name|destx
argument_list|,
name|desty
argument_list|,
name|xLWidth
argument_list|,
name|yTHeight
argument_list|)
expr_stmt|;
block|}
comment|/* fill full width words in middle */
for|for
control|(
name|xCoord
operator|=
name|destx
operator|+
name|xLWidth
init|;
name|xCoord
operator|<
name|fullXLimit
condition|;
name|xCoord
operator|+=
name|tileWidth
control|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
operator|+
name|yT
argument_list|,
name|xCoord
argument_list|,
name|desty
argument_list|,
name|tileWidth
argument_list|,
name|yTHeight
argument_list|)
expr_stmt|;
comment|/* finally, partial tile on right edge. */
if|if
condition|(
name|xR
condition|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
operator|+
name|yT
argument_list|,
name|xCoord
argument_list|,
name|desty
argument_list|,
name|xR
argument_list|,
name|yTHeight
argument_list|)
expr_stmt|;
block|}
comment|/* fill full tile height bands in middle */
for|for
control|(
name|yCoord
operator|=
name|desty
operator|+
name|yTHeight
init|;
name|yCoord
operator|<
name|fullYLimit
condition|;
name|yCoord
operator|+=
name|tileHeight
control|)
block|{
comment|/* partial vertical band on left edge of rectangle */
if|if
condition|(
name|xL
condition|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
operator|+
name|xL
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
argument_list|,
name|yCoord
argument_list|,
name|xLWidth
argument_list|,
name|tileHeight
argument_list|)
expr_stmt|;
comment|/* now fill full width words in middle */
for|for
control|(
name|xCoord
operator|=
name|destx
operator|+
name|xLWidth
init|;
name|xCoord
operator|<
name|fullXLimit
condition|;
name|xCoord
operator|+=
name|tileWidth
control|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|xCoord
argument_list|,
name|yCoord
argument_list|,
name|tileWidth
argument_list|,
name|tileHeight
argument_list|)
expr_stmt|;
comment|/* finally, partial tile on right edge. */
if|if
condition|(
name|xR
condition|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|xCoord
argument_list|,
name|yCoord
argument_list|,
name|xR
argument_list|,
name|tileHeight
argument_list|)
expr_stmt|;
block|}
comment|/* finally, partial height band across the bottom */
if|if
condition|(
name|yB
condition|)
block|{
comment|/* partial vertical band on left edge of rectangle */
if|if
condition|(
name|xL
condition|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
operator|+
name|xL
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
argument_list|,
name|yCoord
argument_list|,
name|xLWidth
argument_list|,
name|yB
argument_list|)
expr_stmt|;
comment|/* now fill full width words in middle */
for|for
control|(
name|xCoord
operator|=
name|destx
operator|+
name|xLWidth
init|;
name|xCoord
operator|<
name|fullXLimit
condition|;
name|xCoord
operator|+=
name|tileWidth
control|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|xCoord
argument_list|,
name|yCoord
argument_list|,
name|tileWidth
argument_list|,
name|yB
argument_list|)
expr_stmt|;
comment|/* finally, partial tile on right edge. */
if|if
condition|(
name|xR
condition|)
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|xCoord
argument_list|,
name|yCoord
argument_list|,
name|xR
argument_list|,
name|yB
argument_list|)
expr_stmt|;
block|}
block|}
else|else
comment|/* gxcopy so we can use on-screen bits as the source */
block|{
comment|/* 	     * We know that we have at least one whole tile to put out 	     * in either the X or Y direction. 	     * 	     * x,y of repeat cell. Start with the cell for horiz. repeat. 	     * These same vars will be used for the vertical repeat also 	     */
name|int
name|cellx
init|=
name|destx
operator|+
name|xLWidth
decl_stmt|;
comment|/* x of horiz. repeat tile */
name|int
name|celly
init|=
name|desty
operator|+
name|yTHeight
decl_stmt|;
comment|/* y of vert. repeat tile */
name|int
name|cellWidth
init|=
name|tileWidth
decl_stmt|;
name|int
name|cellHeight
init|=
name|tileHeight
decl_stmt|;
name|int
name|xRemaining
init|=
name|w
decl_stmt|;
name|int
name|yRemaining
init|=
name|h
decl_stmt|;
name|xCoord
operator|=
name|cellx
expr_stmt|;
name|yCoord
operator|=
name|celly
expr_stmt|;
if|if
condition|(
name|xL
operator|&&
name|yT
condition|)
block|{
comment|/* 		 * fill the whole corner with pieces of the tile 		 */
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
operator|+
name|xL
argument_list|,
name|pTileChunk
operator|->
name|y
operator|+
name|yT
argument_list|,
name|destx
argument_list|,
name|desty
argument_list|,
name|xLWidth
argument_list|,
name|yTHeight
argument_list|)
expr_stmt|;
name|xRemaining
operator|-=
name|xLWidth
expr_stmt|;
name|yRemaining
operator|-=
name|yTHeight
expr_stmt|;
if|if
condition|(
operator|!
name|xRemaining
operator|&&
operator|!
name|yRemaining
condition|)
continue|continue;
comment|/* if one piece was enough */
if|if
condition|(
name|xRemaining
operator|<
name|cellWidth
condition|)
name|cellWidth
operator|=
name|xRemaining
expr_stmt|;
if|if
condition|(
name|yRemaining
operator|<
name|cellHeight
condition|)
name|cellHeight
operator|=
name|yRemaining
expr_stmt|;
comment|/* fill left edge */
if|if
condition|(
name|yRemaining
condition|)
block|{
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
operator|+
name|xL
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
argument_list|,
name|desty
operator|+
name|yTHeight
argument_list|,
name|xLWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
block|}
comment|/* fill top edge */
if|if
condition|(
name|xRemaining
condition|)
block|{
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
operator|+
name|yT
argument_list|,
name|destx
operator|+
name|xLWidth
argument_list|,
name|desty
argument_list|,
name|cellWidth
argument_list|,
name|yTHeight
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|xRemaining
operator|&&
name|yRemaining
condition|)
block|{
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
operator|+
name|xLWidth
argument_list|,
name|desty
operator|+
name|yTHeight
argument_list|,
name|cellWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
block|}
name|xRemaining
operator|-=
name|cellWidth
expr_stmt|;
name|yRemaining
operator|-=
name|cellHeight
expr_stmt|;
if|if
condition|(
operator|!
name|xRemaining
operator|&&
operator|!
name|yRemaining
condition|)
continue|continue;
name|cellHeight
operator|+=
name|yTHeight
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|xL
condition|)
block|{
comment|/* fill left edge */
if|if
condition|(
name|yRemaining
operator|<
name|cellHeight
condition|)
name|cellHeight
operator|=
name|yRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
operator|+
name|xL
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
argument_list|,
name|desty
argument_list|,
name|xLWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
name|xRemaining
operator|-=
name|xLWidth
expr_stmt|;
name|yRemaining
operator|-=
name|cellHeight
expr_stmt|;
if|if
condition|(
name|xRemaining
condition|)
block|{
if|if
condition|(
name|xRemaining
operator|<
name|cellWidth
condition|)
name|cellWidth
operator|=
name|xRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
operator|+
name|xLWidth
argument_list|,
name|desty
argument_list|,
name|cellWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
name|xRemaining
operator|-=
name|cellWidth
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|yT
condition|)
block|{
comment|/* fill top edge */
if|if
condition|(
name|xRemaining
operator|<
name|cellWidth
condition|)
name|cellWidth
operator|=
name|xRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
operator|+
name|yT
argument_list|,
name|destx
argument_list|,
name|desty
argument_list|,
name|cellWidth
argument_list|,
name|yTHeight
argument_list|)
expr_stmt|;
name|yRemaining
operator|-=
name|yTHeight
expr_stmt|;
name|xRemaining
operator|-=
name|cellWidth
expr_stmt|;
if|if
condition|(
name|yRemaining
condition|)
block|{
if|if
condition|(
name|yRemaining
operator|<
name|cellHeight
condition|)
name|cellHeight
operator|=
name|yRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
argument_list|,
name|desty
operator|+
name|yTHeight
argument_list|,
name|cellWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
name|yRemaining
operator|-=
name|cellHeight
expr_stmt|;
name|cellHeight
operator|+=
name|yTHeight
expr_stmt|;
block|}
else|else
name|cellHeight
operator|=
name|yTHeight
expr_stmt|;
block|}
else|else
comment|/* tile is aligned w/ upper left corner */
block|{
if|if
condition|(
name|xRemaining
operator|<
name|cellWidth
condition|)
name|cellWidth
operator|=
name|xRemaining
expr_stmt|;
if|if
condition|(
name|yRemaining
operator|<
name|cellHeight
condition|)
name|cellHeight
operator|=
name|yRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|pTileChunk
operator|->
name|x
argument_list|,
name|pTileChunk
operator|->
name|y
argument_list|,
name|destx
argument_list|,
name|desty
argument_list|,
name|cellWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
name|xRemaining
operator|-=
name|cellWidth
expr_stmt|;
name|yRemaining
operator|-=
name|cellHeight
expr_stmt|;
block|}
comment|/* 	     * Now all the funky corner stuff is filled in.  We can go on to 	     * replicate the horizontal repeat cell across the screen 	     */
comment|/* fill the rest of the first row */
name|xCoord
operator|=
name|destx
operator|+
name|xLWidth
operator|+
name|cellWidth
expr_stmt|;
name|cellx
operator|=
name|destx
operator|+
name|xLWidth
expr_stmt|;
while|while
condition|(
name|xRemaining
condition|)
block|{
if|if
condition|(
name|cellWidth
operator|>
name|xRemaining
condition|)
name|cellWidth
operator|=
name|xRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|cellx
argument_list|,
name|desty
argument_list|,
name|xCoord
argument_list|,
name|desty
argument_list|,
name|cellWidth
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
name|xRemaining
operator|-=
name|cellWidth
expr_stmt|;
name|xCoord
operator|+=
name|cellWidth
expr_stmt|;
name|cellWidth
operator|+=
name|cellWidth
expr_stmt|;
block|}
comment|/* fill the rest of the vertical space */
name|cellx
operator|=
name|destx
expr_stmt|;
name|celly
operator|=
name|desty
operator|+
name|yTHeight
expr_stmt|;
name|yCoord
operator|=
name|desty
operator|+
name|cellHeight
expr_stmt|;
name|cellHeight
operator|-=
name|yTHeight
expr_stmt|;
while|while
condition|(
name|yRemaining
condition|)
block|{
if|if
condition|(
name|cellHeight
operator|>
name|yRemaining
condition|)
name|cellHeight
operator|=
name|yRemaining
expr_stmt|;
call|(
modifier|*
name|bitMover
call|)
argument_list|(
name|pScreen
argument_list|,
name|planemask
argument_list|,
name|rop
argument_list|,
name|cellx
argument_list|,
name|celly
argument_list|,
name|destx
argument_list|,
name|yCoord
argument_list|,
name|w
argument_list|,
name|cellHeight
argument_list|)
expr_stmt|;
name|yRemaining
operator|-=
name|cellHeight
expr_stmt|;
name|yCoord
operator|+=
name|cellHeight
expr_stmt|;
name|cellHeight
operator|+=
name|cellHeight
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

end_unit

