begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* $XConsortium: XScrResStr.c,v 1.2 91/02/04 09:30:59 rws Exp $ */
end_comment

begin_comment
comment|/* Copyright    Massachusetts Institute of Technology    1991	*/
end_comment

begin_comment
comment|/* Permission to use, copy, modify, distribute, and sell this software and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation, and that the name of M.I.T. not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  M.I.T. makes no representations about the suitability of this software for any purpose.  It is provided "as is" without express or implied warranty. */
end_comment

begin_include
include|#
directive|include
file|"Xlibint.h"
end_include

begin_include
include|#
directive|include
file|<X11/Xatom.h>
end_include

begin_function
name|char
modifier|*
name|XScreenResourceString
parameter_list|(
name|screen
parameter_list|)
name|Screen
modifier|*
name|screen
decl_stmt|;
block|{
name|Atom
name|prop_name
decl_stmt|;
name|Atom
name|actual_type
decl_stmt|;
name|int
name|actual_format
decl_stmt|;
name|unsigned
name|long
name|nitems
decl_stmt|;
name|unsigned
name|long
name|leftover
decl_stmt|;
name|char
modifier|*
name|val
init|=
name|NULL
decl_stmt|;
name|prop_name
operator|=
name|XInternAtom
argument_list|(
name|screen
operator|->
name|display
argument_list|,
literal|"SCREEN_RESOURCES"
argument_list|,
name|True
argument_list|)
expr_stmt|;
if|if
condition|(
name|prop_name
operator|&&
name|XGetWindowProperty
argument_list|(
name|screen
operator|->
name|display
argument_list|,
name|screen
operator|->
name|root
argument_list|,
name|prop_name
argument_list|,
literal|0L
argument_list|,
literal|100000000L
argument_list|,
name|False
argument_list|,
name|XA_STRING
argument_list|,
operator|&
name|actual_type
argument_list|,
operator|&
name|actual_format
argument_list|,
operator|&
name|nitems
argument_list|,
operator|&
name|leftover
argument_list|,
operator|(
name|unsigned
name|char
operator|*
operator|*
operator|)
operator|&
name|val
argument_list|)
operator|==
name|Success
condition|)
block|{
if|if
condition|(
operator|(
name|actual_type
operator|==
name|XA_STRING
operator|)
operator|&&
operator|(
name|actual_format
operator|==
literal|8
operator|)
condition|)
return|return
name|val
return|;
if|if
condition|(
name|val
condition|)
name|Xfree
argument_list|(
name|val
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
name|char
operator|*
operator|)
name|NULL
return|;
block|}
end_function

end_unit

