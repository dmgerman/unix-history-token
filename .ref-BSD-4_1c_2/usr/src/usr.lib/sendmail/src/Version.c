begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|SccsId
index|[]
init|=
literal|"@(#)SendMail version 3.327 of 3/12/83"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
endif|lint
end_endif

begin_decl_stmt
name|char
name|Version
index|[]
init|=
literal|"3.327"
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|COMMENT
end_ifdef

begin_expr_stmt
name|SCCS
operator|/
name|s
operator|.
name|version
operator|.
name|c
operator|:
name|D
literal|3.327
literal|83
operator|/
literal|03
operator|/
literal|12
literal|15
operator|:
literal|40
operator|:
literal|05
name|eric
literal|346
literal|345
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|207
name|Don
literal|'t artifically add a "from: $q" when running the queue -- this seems to cause the from line in the qf file to be ignored.  D 3.326	83/03/10 00:48:02	eric	345	344	00000/00000/00005 MRs:	206 Delete colon on front of aliases  D 3.325	83/03/08 19:22:48	eric	344	343	00000/00000/00005 MRs:	205 Pass the delimiter character to parseaddr so that we can correctly decide between comma and space  D 3.324	83/03/07 09:55:13	eric	343	342	00000/00000/00005 MRs:	203 Don'
name|t
name|pass
name|EX_TEMPFAIL
name|code
name|out
argument_list|(
argument|since we have already taken responsibility for delivering the message anyway
argument_list|)
operator|.
name|D
literal|3.323
literal|83
operator|/
literal|03
operator|/
literal|07
literal|09
operator|:
literal|25
operator|:
literal|01
name|eric
literal|342
literal|341
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|202
name|Handle
name|OLDSTYLE
name|addresses
name|properly
name|with
name|the
operator|-
name|t
name|flag
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|notice
name|that
name|tabs
name|also
name|delimit
name|addresses
argument_list|(
name|as
name|well
name|as
name|spaces
argument_list|)
name|D
decl|3.322	83/03/06 16
range|:
literal|30
operator|:
literal|29
name|eric
literal|341
literal|340
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|201
name|Handle
name|messages
name|with
literal|"Resent-xxx:"
name|header
name|lines
name|properly
argument_list|(
argument|basically mark the message as being resent
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|ignore
name|incoming
name|From
range|:
name|lines
end_decl_stmt

begin_if
if|if their text exactly matches our machine-readable address exactly -- this causes the full name to be added when called from
condition|(
name|e
operator|.
name|g
operator|.
expr|)
name|MH
operator|.
name|Both
name|of
name|these
name|mode
name|are
name|to
name|improve
name|interaction
name|with
name|MH
operator|.
name|D
literal|3.321
literal|83
operator|/
literal|03
operator|/
literal|05
literal|17
operator|:
literal|39
operator|:
literal|11
name|eric
literal|340
literal|339
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|200
name|Ignore
name|delimiters
argument_list|(
argument|e.g.
argument_list|,
argument|commas
argument_list|)
name|inside
name|quotes
name|D
literal|3.320
literal|83
operator|/
literal|02
operator|/
literal|26
literal|15
operator|:
literal|32
operator|:
literal|31
name|eric
literal|339
literal|338
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|193
name|Don
literal|'t log message-id mapping and from person in a queue run  D 3.319	83/02/26 15:06:05	eric	338	337	00000/00000/00005 MRs:	162 map host name for $w macro to upper case -- this is more conventional  D 3.318	83/02/26 11:51:43	eric	337	336	00000/00000/00005 MRs:	193 log queueid<=> message-id correspondence  D 3.317	83/02/25 21:20:20	eric	336	335	00000/00000/00005 MRs:	181 More attempts at insuring that everything goes through ruleset 4  D 3.316	83/02/24 20:03:04	eric	335	334	00000/00000/00005 MRs:	181 arrange to cleanup addresses using ruleset 4 before storing in ADDR struct  D 3.315	83/02/24 18:55:32	eric	334	333	00000/00000/00005 MRs:	162 MRs:	192 Fix bug in $w and $=w setup; truncate output to seven bits if the "limits" flag is set to insure that nothing can be sent that looks like TELNET protocol  D 3.314	83/02/20 12:29:15	eric	333	332	00000/00000/00005 MRs:	190 Avoid loops in the auto-closedown code  D 3.313	83/02/19 14:42:12	eric	332	331	00000/00000/00005 MRs:	188 Avoid core dumps on very long addresses in headers.  D 3.312	83/02/18 13:11:57	eric	331	330	00000/00000/00005 MRs:	183 Improve host verification -- put something in even if no HELO command given  D 3.311	83/02/18 12:44:13	eric	330	329	00000/00000/00005 MRs:	183 MRs:	185 MRs:	187 Add HELO hostname verification; give an error if a message terminates with EOF rather than dot in SMTP mode; put in a catch for "Not owner" error on connect -- see if we can find anything funny.  D 3.310	83/02/13 16:23:03	eric	329	328	00000/00000/00005 MRs:	182 fix clrbitmap to really clear the entire bitmap  D 3.309	83/02/10 10:00:49	eric	328	327	00000/00000/00005 MRs:	176 avoid core dump on return receipt processing; clean up return receipt message.  D 3.308	83/02/08 10:50:24	eric	327	326	00000/00000/00005 MRs:	167 MRs:	172 MRs:	173 MRs:	174 clean up problems when QUEUE compile flag not defined; clean up hostname code to run on non-4.1c systems; fix use of -oeq (quiet on errors) flag.  D 3.307	83/02/03 10:46:02	eric	326	325	00001/00001/00004 MRs:	160 Change version stamp to have no date (so that it looks nice as $v/$V)  D 3.306	83/02/03 10:29:15	eric	325	324	00000/00000/00005 MRs:	160 $e macro is now SMTP entry message (so that configuration version can be included).  D 3.305	83/02/03 07:54:10	eric	324	323	00000/00000/00005 MRs:	168 Make mailer size limits a per-mailer parameter (M field in the mailer descriptor)  D 3.304	83/02/02 12:53:10	eric	323	322	00000/00000/00005 MRs:	165 implement classes and mailer flags as a bit map; define new class '
name|w
literal|' as the set of all hosts we are known by  D 3.303	83/02/01 20:47:34	eric	322	321	00000/00000/00005 MRs:	166 don'
name|t
name|call
name|printqueue
argument_list|()
end_if

begin_if
if|if queueing is turned off  D 3.302	83/01/18 20:38:09	eric	321	320	00000/00000/00005 MRs:	 pause
condition|()
name|after
name|reply
name|error
end_if

begin_if
if|if 18.100 set -- so that Sam can try to track down the state of the connection in the CMU-CS-A problem.  D 3.301	83/01/17 21:41:42	eric	320	319	00000/00000/00005 MRs:	158 Set the $w macro to the hostname if at all possible to allow generic configuration tables.  D 3.300	83/01/17 12:31:10	eric	319	318	00000/00000/00005 MRs:	155 fix bug that caused "\r\n" string in TCP mailer definition to turn into something else -- causing all TCP connections to hang.  D 3.299	83/01/17 09:32:18	eric	318	317	00000/00000/00005 MRs:	154 define a newline in "nullmailer" so that queue files get written with newlines between the "H" lines.  D 3.298	83/01/16 22:08:47	eric	317	316	00000/00000/00005 MRs:	 put in socket debugging on a debug flag to help Sam find the CMU-CS-A problem -- this probably won't work with early 4.1c systems.  D 3.297	83/01/16 17:24:29	eric	316	315	00000/00000/00005 MRs:	153 make the maximum number of simultaneous SMTP connections an option  D 3.296	83/01/16 13:14:04	eric	315	314	00000/00000/00005 MRs:	152 Change mailer spec to have labelled fields for future expansion. **** This delta invalidates previous configuration files ****  D 3.295	83/01/15 17:40:49	eric	314	313	00000/00000/00005 MRs:	149 be sure everything gets appropriately externalized; canonname goes away, since everything is now done by remotename  D 3.294	83/01/12 08:56:51	eric	313	312	00000/00000/00005 MRs:	144 fix date format to be truly RFC822  D 3.293	83/01/09 15:43:11	eric	312	311	00000/00000/00005 MRs:	139 fix CRLF problem when sending SMTP commands; make newstr() and crlf() into macros  D 3.292	83/01/08 19:54:37	eric	311	310	00000/00000/00005 MRs:	143 release daemon resources when running the queue  D 3.291	83/01/08 13:49:08	eric	310	309	00000/00000/00005 MRs:	142 be sure to open a new transcript on every queue run; when returning an SMTP transcript, only send the last half (i.e., that part which describes the sending half).  D 3.290	83/01/06 18:21:54	eric	309	308	00000/00000/00005 MRs:	141 allow user-setable error codes in "error" mailer  D 3.289	83/01/06 18:09:01	eric	308	307	00000/00000/00005 MRs:	140 fix a botch in argument processing such that it used the last flag as a recipient if there were no other recipients (e.g., with "-t")  D 3.288	83/01/06 12:05:54	eric	307	306	00000/00000/00005 MRs:	132 fix (one more time!) long line wrapping.....  D 3.287	83/01/06 10:46:17	eric	306	305	00000/00000/00005 MRs:	139 split up FULLSMTP flag -- now have "X" (M_XDOT, use hidden dot algorithm), "p" (M_FROMPATH, use reverse-path in MAIL FROM:<> command), and "L" (M_LIMITS, enforce SMTP line limits).  I would like to change the format of the mail defn one more time to make named fields so that it would be more extensible.  D 3.286	83/01/05 20:30:10	eric	305	304	00000/00000/00005 MRs:	132 fix folded line output  D 3.285	83/01/05 17:57:11	eric	304	303	00000/00000/00005 MRs:	138 curiouser and curiouser.....  a read error on the reply from a QUIT will cause another QUIT command, and thus an fclose(NULL).  Some sites seem to be sending a 421 Shutting down and then closing without waiting for the QUIT, so this happens....  D 3.284	83/01/05 10:19:04	eric	303	302	00000/00000/00005 MRs:	138 improve error recovery for bizarre SMTP cases; unfortunately CMU has decided to start working again, so the strangest parts are untested.  D 3.283	83/01/04 19:53:55	eric	302	301	00000/00000/00005 MRs:	137 externalize $g macro using ruleset 4 also  D 3.282	83/01/04 18:52:08	eric	301	300	00000/00000/00005 MRs:	136 Don't try to drop our controlling TTY except when we are starting up a daemon
empty_stmt|;
end_if

begin_expr_stmt
name|this
name|can
name|cause
name|UUCP
name|jobs
name|to
name|hang
name|waiting
end_expr_stmt

begin_for
for|for carrier on a dialin line
control|(
name|completely
name|contrary
name|to
name|the
name|intent
control|)
operator|.
name|Many
name|thanks
name|to
name|Keith
name|Sklower
end_for

begin_for
for|for pointing this one out.  However
operator|,
name|that
name|damned
name|parameter
name|to
name|disconnect
argument_list|()
name|has
name|reappeared
operator|!
name|D
literal|3.281
literal|83
operator|/
literal|01
operator|/
literal|04
literal|17
operator|:
literal|45
operator|:
literal|25
name|eric
literal|300
literal|299
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|135
name|Ignore
name|SIGPIPE
name|early
argument_list|(
argument|in main rather than in deliver
argument_list|)
name|so
name|that
name|rude
name|hosts
name|that
name|close
name|the
name|connection
name|early
name|don
literal|'t cause us to die -- in particular, CMU-CS-A (nee CMU-10A) was doing this after the DATA command; the problem went away quite mysteriously, so I have no idea why it happened  D 3.280	83/01/04 13:10:35	eric	299	298	00000/00000/00005 MRs:	129 MRs:	134 take EHOSTDOWN as a temporary failure; change the format of "deferred" message to be consistent with other messages.  D 3.279	83/01/04 10:58:55	eric	298	297	00000/00000/00005 MRs:	133 fix botch that causes sendmail to core dump when there are large numbers of requests  D 3.278	83/01/04 10:04:41	eric	297	296	00000/00000/00005 MRs:	132 Detect an internal error that seems to be occuring  D 3.277	83/01/03 18:01:33	eric	296	295	00000/00000/00005 MRs:	129 give more useful error messages (including the errno that caused a temporary failure); reflect these messages out to mailq  D 3.276	83/01/03 14:02:28	eric	295	294	00000/00000/00005 MRs:	137 have canonname pass the address through ruleset four also  D 3.275	83/01/03 13:44:39	eric	294	293	00000/00000/00005 MRs:	131 take ENETUNREACH (Network unreachable) as a transient error -- this probably isn'
name|t
name|usually
name|right
operator|,
name|but
name|it
name|seem
name|safer
name|in
name|the
name|long
name|run
operator|...
operator|.
name|D
literal|3.274
literal|83
operator|/
literal|01
operator|/
literal|03
literal|13
operator|:
literal|19
operator|:
literal|37
name|eric
literal|293
literal|292
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|129
name|print
literal|"request"
name|instead
name|of
literal|"requests"
end_for

begin_if
if|if there is only one request  D 3.273	83/01/03 13:03:01	eric	292	291	00000/00000/00005 MRs:	130 fix bug in commaize so that it won't core dump on every message (sigh); process timeouts like normal errors so that they will get delivered to the correct address (i.e., the Errors-To: address).  D 3.272	83/01/03 11:28:04	eric	291	290	00000/00000/00005 MRs:	129 fix botch in reading the queue that caused it to throw away the last entry it read -- this was particulary obvious with only one entry in the queue.  D 3.271	83/01/02 15:33:36	eric	290	289	00000/00000/00005 MRs:	124 Take errno 65, "Host is unreachable", to be a recoverable error  D 3.270	83/01/02 14:27:32	eric	289	288	00000/00000/00005 MRs:	129 clean up output of mailq mode  D 3.269	83/01/01 21:25:35	eric	288	287	00000/00000/00005 MRs:	123 Put CRLF on all lines in user SMTP.  Pass this info down to innumerable routines.  D 3.268	83/01/01 18:14:56	eric	287	286	00000/00000/00005 MRs:	122 Use a more resilient algorithm to handle the special case of an SMTP connection that is going down spontaneously (with a 421 reply code)  D 3.267	83/01/01 16:02:43	eric	286	285	00000/00000/00005 MRs:	128 tag syserr's specially in the log so they can be grep'ed out easily  D 3.266	82/12/30 17:30:57	eric	285	284	00000/00000/00005 MRs:	114 don't bother timing out on *.cf and qf* file reads -- they are really very vanilla  D 3.265	82/12/30 16:57:13	eric	284	283	00000/00000/00005 MRs:	113 close files 3 through 20 before startup to insure sufficient resources  D 3.264	82/12/29 17:39:27	eric	283	282	00000/00000/00005 MRs:	112 don't htons(sp->s_port) in makeconnection  D 3.263	82/12/24 08:14:55	eric	282	281	00000/00000/00005 MRs:	108 Change parse to parseaddr for BB&N TCP/IP implementation; clean up comments in daemon.c to simplify the poor alternate protocol type.  D 3.262	82/12/14 19:23:23	eric	281	280	00000/00000/00005 MRs:	106 fix freeze mode to do something more interesting that refreezing (over and over and over and .......)  D 3.261	82/12/14 16:57:16	eric	280	279	00000/00000/00005 MRs:	105 Add "print mail queue" mode (-bp flag or call as "mailq")  D 3.260	82/12/13 18:25:22	eric	279	278	00000/00000/00005 MRs:	085 The routine "sendto" is now a system call (yeuch!); change our sendto to "sendtolist"  D 3.259	82/12/13 17:47:27	eric	278	277	00000/00000/00005 MRs:	085 NEW-IPC: convert to 4.1c  D 3.258	82/12/09 19:18:32	eric	277	276	00000/00000/00005 MRs:	036 MRs:	053 MRs:	064 Fix a bug triggered when we add the sender's "@domain" to an address in the message body that is missing a domain -- we forgot to null terminate the list.  D 3.257	82/12/09 11:19:09	eric	276	275	00000/00000/00005 MRs:	081 MRs:	095 MRs:	103 log read timeouts as syserrs
empty_stmt|;
end_if

begin_expr_stmt
name|be
name|able
name|to
name|match
name|the
name|inverse
name|of
name|a
name|class
name|using
name|the
name|$
operator|~
name|x
name|syntax
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|don
literal|'t add a full name during network forward operations  D 3.256	82/12/05 13:46:29	eric	275	274	00000/00000/00005 MRs:	092 Clear the envelope in the child in server SMTP to insure that our oh so helpful parent doesn'
name|t
name|delete
name|our
name|transcript
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|move
name|the
name|transcript
name|and
name|temporary
name|file
name|pointers
name|into
name|the
name|envelope
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|pass
name|the
name|envelope
name|to
name|other
name|routines
name|in
name|the
name|holy
name|war
name|against
name|global
name|variables
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|split
name|off
name|envelope
name|routines
name|from
expr|main
operator|.
name|c
name|to
name|envelope
operator|.
name|c
name|D
literal|3.255
literal|82
operator|/
literal|11
operator|/
literal|28
literal|16
operator|:
literal|00
operator|:
literal|50
name|eric
literal|274
literal|273
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|implement
name|SMTP
name|auto
operator|-
name|shutdown
name|on
literal|421
name|codes
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|clean
name|up
name|some
name|error
name|processing
name|items
decl_stmt|,
name|particularly
name|in
name|SMTP
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|don
literal|'t reinstantiate error message bodies after queueing; other minor changes.  This is all cleanup from 3.253.  D 3.254	82/11/28 10:22:20	eric	273	272	00000/00000/00005 MRs:	 fix a number of problems left over from yesterday'
name|s
name|delta
operator|.
name|The
name|big
name|triumph
name|is
name|being
name|able
name|to
name|delete
name|the
name|parameter
name|from
name|disconnect
argument_list|()
operator|.
name|D
literal|3.253
literal|82
operator|/
literal|11
operator|/
literal|28
literal|00
operator|:
literal|22
operator|:
literal|21
name|eric
literal|272
literal|271
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|Many
name|changes
name|resulting
name|from
name|a
name|complete
name|code
name|readthrough
operator|.
name|Most
name|of
name|these
name|fix
name|minor
name|bugs
name|or
name|change
name|the
name|internal
name|structure
end_expr_stmt

begin_for
for|for clarity
operator|,
name|etc
operator|.
name|There
name|should
name|be
name|almost
name|no
name|externally
name|visible
name|changes
argument_list|(
name|other
name|than
name|some
name|cleaner
name|error
name|message
name|printouts
name|and
name|the
name|like
argument_list|)
decl|.
name|D
decl|3.252	82/11/24 18
range|:
literal|44
operator|:
literal|28
name|eric
literal|271
literal|270
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|lint
name|it
name|D
literal|3.251
literal|82
operator|/
literal|11
operator|/
literal|24
literal|17
operator|:
literal|15
operator|:
literal|30
name|eric
literal|270
literal|269
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|026
name|run
name|SMTP
name|jobs
name|in
name|a
name|subprocess
name|so
name|that
name|multiple
name|jobs
name|will
name|work
operator|.
name|This
name|delta
name|also
name|changes
name|the
name|envelope
name|data
name|structure
name|so
name|that
name|flags
name|are
name|in
name|a
name|bit
name|map
decl_stmt|,
name|and
name|adjusts
name|some
name|of
name|the
name|semantics
operator|.
name|The
name|transcript
name|is
name|now
name|local
name|to
name|an
name|envelope
operator|.
name|A
name|bunch
name|of
name|old
name|code
name|is
name|deleted
operator|.
name|A
name|serious
name|bug
name|was
name|fixed
name|in
name|the
decl|"run in background"
name|code
operator|.
name|Etc
operator|.
decl|,
name|etc
operator|.
name|D
decl|3.250	82/11/21 17
range|:
literal|19
operator|:
literal|05
name|eric
literal|269
literal|268
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|026
name|preliminary
name|hacks
end_for

begin_for
for|for multiple SMTP transactions per connection: make assignment of multiple queue id's more efficient, make prefixes two characters (e.g., qfAA99999), pass the file name to freeze and thaw, add a mailer flag saying we are talking to one of our own kind.  D 3.249	82/11/20 12:43:29	eric	268	267	00000/00000/00005 MRs:	083 Accept user@[net.host.logical.imp] syntax  D 3.248	82/11/18 21:33:38	eric	267	266	00000/00000/00005 MRs:	080 Correctly run "sendmail -q" (had a reversed condition on QueueIntvl)  D 3.247	82/11/18 17:54:23	eric	266	265	00000/00000/00005 MRs:	079 Fix bug causing loops in sendto if there are scanner errors in addresses  D 3.246	82/11/18 08:56:27	eric	265	264	00000/00000/00005 MRs:	060 MRs:	073 disconnect input, output, signals, etc. when running in background  D 3.245	82/11/17 09:36:47	eric	264	263	00000/00000/00005 MRs:	060 split operation mode ("-bx" flag) and delivery mode ("d" option) so that operation mode can apply to SMTP/daemon connections also.  D 3.244	82/11/14 15:34:59	eric	263	262	00000/00000/00005 MRs:	075 Explicitly inherit e_oldstyle from BlankEnvelope to MainEnvelope  D 3.243	82/11/14 15:14:00	eric	262	261	00000/00000/00005 MRs:	074 fix quote processing on program mailers  D 3.242	82/11/14 12:26:17	eric	261	260	00000/00000/00005 MRs:	072 Don't give an error message on unknown options  D 3.241	82/11/13 18:07:59	eric	260	259	00000/00000/00005 MRs:	021 MRs:	066 MRs:	069 MRs:	069 MRs:	070 MRs:	071 Clean up argument structure
control|(
operator|-
name|I
operator|=
operator|>
operator|-
name|bi
operator|,
operator|-
name|Z
operator|=
operator|>
operator|-
name|bz
control|)
operator|.
name|Add
operator|-
name|bp
name|stub
name|to
name|someday
name|print
name|queue
operator|.
name|Move
name|compile
name|conf
name|into
name|conf
operator|.
name|h
argument_list|(
argument|still some stuff in the Makefile
argument_list|)
operator|.
name|Assume
operator|-
name|bp
end_for

begin_if
if|if called as "mailq" and -bi if called as "newaliases".  Drop old directory hack -- send out compat code instead. Don't rebuild the alias file automatically unless the D option is set. Clean up compilation flags.  D 3.240	82/11/07 16:14:44	eric	259	258	00000/00000/00005 MRs:	041 make all mailer output go to the transcript if running server smtp; this has the effect of making some significant changes in the output structure to handle such things as -em and -as together  D 3.239	82/11/07 15:31:50	eric	258	257	00000/00000/00005 MRs:	063 don't flag errors in setting dangerous options when -C is used  D 3.238	82/11/05 13:12:52	eric	257	256	00000/00000/00005 MRs:	062 arrange to freeze the configuration file for quick startup -- this technique requires reprocessing the argv so that flag settings don't get lost, and is really rather of a hack.  D 3.237	82/11/04 15:22:16	eric	256	255	00000/00000/00005 MRs:	019 don't unlink qf& df files on ^C  D 3.236	82/11/04 13:27:28	eric	255	254	00000/00000/00005 MRs:	037 put header conditionals into the .cf file  D 3.235	82/11/03 11:18:06	eric	254	253	00000/00000/00005 MRs:	059 don't strip quotes off of addresses during prescan  D 3.234	82/11/03 10:34:13	eric	253	252	00000/00000/00005 MRs:	058 Put the temporary file mode on the F option  D 3.233	82/11/03 09:49:15	eric	252	251	00000/00000/00005 MRs:	049 Arrange to strip quote bits in message header; move SPACESUB into conf.c; change SpaceSub to unquoted dot  D 3.232	82/11/03 09:00:33	eric	251	250	00000/00000/00005 MRs:	056 Arrange for queue.c to aapt to systems w/o new directory code  D 3.231	82/10/31 13:47:06	eric	250	249	00000/00000/00005 MRs:	032 MRs:	051 Call ruleset 4 after doing per-mailer translation to convert from internal to external form.  D 3.230	82/10/28 17:41:15	eric	249	248	00000/00000/00005 MRs:	039 MRs:	027 Put the "@:@" trick on the "a" option.  Also, move TrustedUsers into sendmail.h (it should have gone here in the first place!)  D 3.229	82/10/27 20:43:35	eric	248	247	00000/00000/00005 MRs:	044 strip out bcc: and resent-bcc: always  D 3.228	82/10/25 08:30:12	eric	247	246	00000/00000/00005 MRs:	040 Don't send closing protocol to SMTP if you haven't opened the connection; this happens if checkcompat fails on the only recipient.  D 3.227	82/10/22 09:02:44	eric	246	245	00000/00000/00005 MRs:	023 part of a heuristic hill climbing algorithm to minimize the number of IPC bugs that come crawling over me.  D 3.226	82/10/16 15:24:52	eric	245	244	00000/00000/00005 MRs:	027 Put list of login names able to use -f in the .cf file.  D 3.225	82/10/16 14:43:47	eric	244	243	00000/00000/00005 MRs:	007 Arrange for a wizards password (the W option).  The SMTP KILL command may only be issued if this option is set.  This delta adds the "WIZ" command, and changes _KILL => KILL, _DEBUG => DEBUG, _VERBOSE => VERB, and _SHOWQ => SHOWQ.  D 3.224	82/10/16 13:43:28	eric	243	242	00000/00000/00005 MRs:	024 Fix debug statement in sendall  D 3.223	82/10/16 13:22:22	eric	242	241	00000/00000/00005 MRs:	010 Arrange for MD_FORK to work well with -v so that we can use it as the default.  This was really a separate bug, but I have just lumped it in here -- the problem came up with stty tostop.  D 3.222	82/10/13 21:55:07	eric	241	240	00000/00000/00005 MRs:	023 Don't interrupt the process doing accepts
condition|(
name|have
name|a
name|separate
name|process
name|running
name|the
name|queue
condition|)
name|to
name|avoid
name|a
name|large
name|pile
name|of
literal|4.1
index|[
name|abc
index|]
name|bugs
operator|.
name|When
name|something
name|more
name|stable
name|comes
name|out
operator|,
name|I
name|will
name|change
name|this
operator|.
name|D
literal|3.221
literal|82
operator|/
literal|10
operator|/
literal|13
literal|18
operator|:
literal|43
operator|:
literal|28
name|eric
literal|240
literal|239
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|022
name|Don
literal|'t interpret<,>, (, or ) while in QST (quote state) during prescan  D 3.220	82/10/11 09:51:43	eric	239	238	00000/00000/00005 MRs:	016 have auto-queueups print a polite message in the log (rather than an obnoxious "Temporary Failure").  Adds a new routine "logdelivery".  D 3.219	82/10/09 21:02:27	eric	238	237	00000/00000/00005 MRs:	005 force a queuename in returntosender to insure that everyone has a queue name.  D 3.218	82/10/09 20:27:42	eric	237	236	00000/00000/00005 MRs:	003 Lock out interrupts during alias rebuild; add an alias "@:@" after rebuild that we can check for to insure that the alias file is up to date.  Times out after five minutes (is this reasonable on ucbvax?) and forces a rebuild.  It shouldn'
name|t
name|matter
name|in
name|the
name|long
name|run
end_if

begin_if
if|if two people rebuild
operator|,
name|so
name|I
name|think
name|this
name|is
name|the
name|right
name|thing
name|to
end_if

begin_do
do|do
operator|.
name|D
literal|3.217
literal|82
operator|/
literal|10
operator|/
literal|09
literal|19
operator|:
literal|06
operator|:
literal|31
name|eric
literal|236
literal|235
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|002
name|Handle
name|Reverse
operator|-
name|Path
name|in
name|some
name|reasonable
name|way
operator|.
name|You
name|must
name|put
name|the
literal|'X'
name|flag
argument_list|(
argument|M_FULLSMTP
argument_list|)
name|in
name|the
name|local
name|mailer
literal|'s flags to get this line.  D 3.216	82/10/09 18:11:21	eric	235	234	00000/00000/00005 MRs:	013 print a status indication when a message is autoqueued, either from a -bq flag or a NoConnect  D 3.215	82/10/09 17:22:35	eric	234	233	00000/00000/00005 MRs:	008 Force -v override of deferred connect  D 3.214	82/10/09 17:10:37	eric	233	232	00000/00000/00005 MRs:	004 Only put the "from" person on the error queue if an error actually occured -- prevents many "duplicate supressed" messages, etc.  D 3.213	82/10/09 09:05:35	eric	232	231	00000/00000/00005 MRs:	001 implement an experimental forward-path algorithm by stripping off a leading "@..." component and dropping it on the end.  D 3.212	82/10/07 08:52:47	eric	231	230	00000/00000/00005 try to come up with a workaround on some of the IPC problems relating to interrupted accepts -- all this can go when everyone at Berkeley runs unflakey IPC.  Also, never use ruleset three alone -- involves changing canonname again.  Probably shouldn'
name|t
do|do
name|an
name|auto
operator|-
name|call
name|of
name|ruleset
name|three
name|now
operator|.
name|D
literal|3.211
literal|82
operator|/
literal|10
operator|/
literal|07
literal|01
operator|:
literal|40
operator|:
literal|19
name|eric
literal|230
literal|229
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|bother
operator|...
operator|.
name|it
name|takes
name|time
name|to
name|close
name|a
name|socket
name|D
literal|3.210
literal|82
operator|/
literal|10
operator|/
literal|07
literal|00
operator|:
literal|09
operator|:
literal|14
name|eric
literal|229
literal|228
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|allow
name|passing
name|through
name|multiple
name|rewriting
name|sets
name|in
name|test
name|mode
expr_stmt|;
do|<ndir.h> =><dir.h> for maximum portability  D 3.209	82/10/06 11:45:40	eric	228	227	00000/00000/00005 add test mode (MD_TEST
operator|,
do|-bt
end_do

begin_expr_stmt
unit|)
name|D
literal|3.208
literal|82
operator|/
literal|09
operator|/
literal|30
literal|22
operator|:
literal|29
operator|:
literal|46
name|eric
literal|227
literal|226
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|workaround
name|in
name|daemon
name|accept
name|code
end_expr_stmt

begin_for
for|for 4.1a kernel bug: if an accept gets an EINTR and then a valid accept before the interrupt returns
operator|,
name|the
name|connection
name|will
name|be
name|lost
name|forever
argument_list|(
name|at
name|least
argument_list|,
name|as
name|I
name|understand
name|it
argument_list|)
decl|.
name|D
decl|3.207	82/09/26 17
range|:
literal|04
operator|:
literal|24
name|eric
literal|226
literal|225
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|Put
name|more
name|configuration
name|into
name|setoption
decl_stmt|;
end_for

begin_decl_stmt
name|merge
name|some
name|of
name|the
name|argv
name|processing
name|with
name|this
decl_stmt|;
end_decl_stmt

begin_macro
name|move
end_macro

begin_macro
name|configuration
end_macro

begin_macro
name|information
end_macro

begin_macro
name|out
end_macro

begin_macro
name|of
end_macro

begin_macro
name|conf
end_macro

begin_expr_stmt
operator|.
name|c
name|into
name|the
operator|.
name|cf
name|file
operator|.
name|Since
name|a
name|lot
name|of
name|stuff
name|will
expr|default
name|to
name|zero
operator|,
name|a
name|new
operator|.
name|cf
name|file
name|is
name|required
operator|.
name|D
literal|3.206
literal|82
operator|/
literal|09
operator|/
literal|26
literal|14
operator|:
literal|45
operator|:
literal|52
name|eric
literal|225
literal|224
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|completely
name|instantiate
name|queue
name|files
end_expr_stmt

begin_for
for|for all mail
operator|,
name|even
if|if not needed
empty_stmt|;
end_for

begin_expr_stmt
name|fix
name|a
name|bug
name|that
name|would
name|probably
name|come
name|up
name|once
name|every
name|ten
name|years
name|in
name|creating
name|the
name|queue
name|id
operator|.
name|should
name|merge
name|argv
name|flag
name|processing
name|with
name|option
name|processing
operator|.
name|D
literal|3.205
literal|82
operator|/
literal|09
operator|/
literal|24
literal|19
operator|:
literal|39
operator|:
literal|25
name|eric
literal|224
literal|223
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|change
name|option
name|implementation
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|define
name|a
name|bunch
name|of
name|interesting
name|options
operator|.
name|D
literal|3.204
literal|82
operator|/
literal|09
operator|/
literal|24
literal|09
operator|:
literal|38
operator|:
literal|36
name|eric
literal|223
literal|222
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|arrange
name|to
name|be
name|able
name|to
name|define
name|options
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|put
name|precedences
name|in
operator|.
name|cf
name|file
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|send
name|errors
name|to
name|an
name|Errors
operator|-
name|To
operator|:
name|field
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|fix
name|a
name|serious
name|bug
name|causing
name|mail
name|to
name|not
name|be
name|delivered
name|to
name|anyone
end_expr_stmt

begin_if
if|if there were any errors.  D 3.203	82/09/22 10:50:47	eric	222	221	00000/00000/00005 don't put commas in non-address fields; have -bq clean up its temp files  D 3.202	82/09/21 10:15:00	eric	221	220	00000/00000/00005 get rid of double error returns; improve verbose mode output to be standard format (even though verbose mode isn't standard
end_if

begin_empty_stmt
unit|)
empty_stmt|;
end_empty_stmt

begin_expr_stmt
name|output
name|queue
name|files
name|with
name|commas
name|in
name|headers
name|to
name|insure
name|that
name|the
name|oldstyle
name|stuff
name|doesn
literal|'t get confused.  D 3.201	82/09/18 20:37:46	eric	220	219	00000/00000/00005 fix botch where it believes that a list is !oldstyle just because it has an alias expansion in it.  D 3.200	82/09/16 20:25:01	eric	219	218	00000/00000/00005 drop ":...;" stuff -- it screws it up aliases; pass parameters to subroutines (this also adds $@ and $: features to subr calls); check overflow of "tobuf" on smtp deliveries, which caused core dumps on large mailing lists  D 3.199	82/09/12 22:17:30	eric	218	217	00000/00000/00005 accept ": ... ;" syntax for groups if !oldstyle  D 3.198	82/09/12 16:44:03	eric	217	216	00000/00000/00005 change inheritance for macros in envelopes; be able to canonicalize non-domained names by appending domain from sender; call ruleset 3 explicitly before doing other rulesets; some general cleanup.  D 3.197	82/09/11 17:18:16	eric	216	215	00000/00000/00005 don'
name|t
name|assign
name|$s
name|to
name|be
name|the
name|sending
name|host
argument_list|(
argument|this mucks up Received: lines
argument_list|)
operator|--
name|instead
name|just
name|use
name|HELO
name|messages
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|chdir
name|into
name|queue
name|directory
name|and
name|make
name|all
name|pathnames
name|relative
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|be
name|more
name|conservative
name|in
name|creating
name|queue
name|id
literal|'s -- in the event you get file table overflows, etc.  D 3.196	82/09/08 23:55:46	eric	215	214	00000/00000/00005 fix stupid bug in wait code to dispose of "Interrupted system call" message  D 3.195	82/09/08 22:13:20	eric	214	213	00000/00000/00005 fix a nasty botch in 3.194 that killed SMTP in daemon mode.   sigh......  D 3.194	82/09/08 21:20:05	eric	213	212	00000/00000/00005 try to avoid "Interrupted system call" on wait in deliver and on writes; fix returned message to have proper sender; handle extra mailer output more cleverly.  D 3.193	82/09/06 19:55:17	eric	212	211	00000/00000/00005 more hacking on oldstyle -- always assume sender fields are in new style so that locally generated fields are edited correctly.  D 3.192	82/09/06 18:47:26	eric	211	210	00000/00000/00005 fix botch in "at"s in headers  D 3.191	82/09/06 18:24:40	eric	210	209	00000/00000/00005 fix botch in computing e_oldstyle  D 3.190	82/09/06 17:58:40	eric	209	208	00000/00000/00005 fix bug in scanner state machine that never let you out of quote state.  D 3.189	82/09/06 17:14:03	eric	208	207	00000/00000/00005 increase log level needed to print "entered" message.  D 3.188	82/09/06 17:00:23	eric	207	206	00000/00000/00005 user SMTP fixes to talk to ISI  D 3.187	82/09/06 16:24:51	eric	206	205	00000/00000/00005 install new state-driven scanner; make everyone use it, thus fixing problems of quoted commas, etc.  D 3.186	82/09/05 18:08:58	eric	205	204	00000/00000/00005 change $g processing from a macro substitution per mailer to two sets of rewriting rules per mailer -- one each for sender and recipient fields; convert to NBS standard on Return-Receipt-To: and Precedence: fields; clean up From: processing code and generalize it to all sender fields; tune debugging code; clean up canonname. **** This delta invalidates previous configuration files ****  D 3.185	82/09/05 11:48:27	eric	204	203	00000/00000/00005 add $* to match zero or more and $> to make a "subroutine" call; stick in initial hooks for per-mailer rewriting; improve diagnostics in readcf, including number lines; increase the number of rewriting sets.  D 3.184	82/09/01 10:24:00	eric	203	202	00000/00000/00005 log entering uid& pid; allow CANONUSER ($:) to abort a rewriting set.  D 3.183	82/08/31 17:46:56	eric	202	201	00000/00000/00005 increase MAXMAILERS to 25  D 3.182	82/08/31 10:05:56	eric	201	200	00000/00000/00005 clean up reply code processing some more; in particular, give more detail in many messages.  process connection failures correctly.  D 3.181	82/08/29 23:31:35	eric	200	199	00000/00000/00005 handle comments and quotes in headers; still doesn'
name|t
name|deal
name|with
name|backslashes
name|however
operator|--
name|prescan
name|should
name|be
name|cleaned
name|up
name|to
name|deal
name|with
name|this
end_expr_stmt

begin_case
case|case
operator|.
name|it
name|turns
name|out
name|there
name|are
name|many
name|bugs
name|in
name|prescan
empty_stmt|;
name|it
name|should
name|be
name|extensively
name|rewritten
operator|.
name|D
literal|3.180
literal|82
operator|/
literal|08
operator|/
literal|29
literal|17
case|:
end_case

begin_expr_stmt
literal|32
operator|:
literal|49
name|eric
literal|199
literal|198
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|serious
name|botch
name|in
name|SMTP
name|reply
name|code
name|delta
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|change
name|a
name|bunch
name|of
literal|"Internal error"
name|codes
name|to
name|a
name|new
literal|"Remote protocol error"
operator|--
name|so
name|that
name|I
name|don
literal|'t get blamed for things that other systems do.  D 3.179	82/08/29 16:52:31	eric	198	197	00000/00000/00005 do a better job at interpreting SMTP reply codes  D 3.178	82/08/29 15:52:20	eric	197	196	00000/00000/00005 give 554 message on syserr (instead of 451) if errno == 0; as it was some permanent errors appeared transient  D 3.177	82/08/27 18:01:25	eric	196	195	00000/00000/00005 hack crackaddr to strip blanks off the end of a cracked address; this happens because "u at h" becomes "$g  " (with two spaces at the end). this doesn'
name|t
name|solve
name|the
name|general
end_expr_stmt

begin_case
case|case
operator|(
name|e
operator|.
name|g
operator|.
expr|,
literal|"u at h (me)"
name|comes
name|out
name|as
literal|"$g   (me)"
operator|,
name|with
name|three
name|spaces
operator|)
operator|,
name|but
name|does
name|handle
name|the
name|ugliest
case|case
operator|.
name|besides
operator|,
name|the
literal|"at"
name|syntax
name|is
name|supposed
name|to
name|go
name|away
operator|.
name|D
literal|3.176
literal|82
operator|/
literal|08
operator|/
literal|27
literal|16
case|:
literal|01
case|:
end_case

begin_expr_stmt
literal|58
name|eric
literal|195
literal|194
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|simplify
name|timeout
name|code
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|allow
name|multiple
name|simultaneous
name|queue
name|runs
name|so
name|that
name|large
name|messages
name|don
literal|'t freeze things up; fix EINTR problem in sfgets; clean up canonname to be really correct; lots of misc. cleanup  D 3.175	82/08/27 11:11:40	eric	194	193	00000/00000/00005 release e_id after fork in daemon code; ignore events scheduled by another process  D 3.174	82/08/25 23:18:24	eric	193	192	00000/00000/00005 assign a new queue id to all jobs coming in via TCP  D 3.173	82/08/25 21:22:10	eric	192	191	00000/00000/00005 sigh....  more fun and games in the daemon code to try to guess right.  D 3.172	82/08/25 19:44:33	eric	191	190	00000/00000/00005 recreate a socket after every failed accept()  D 3.171	82/08/25 16:19:23	eric	190	189	00000/00000/00005 apply ruleset 4 to rewrite addresses in the body of the message; fix a clock.c bug that caused it to lose events; more time cleanup.  D 3.170	82/08/25 11:21:21	eric	189	188	00000/00000/00005 clean up time manipulation to always be current; assign job id'
name|s
name|earlier
name|to
name|make
name|sure
name|there
name|is
name|always
name|one
name|with
name|a
name|message
operator|.
name|D
literal|3.169
literal|82
operator|/
literal|08
operator|/
literal|25
literal|10
operator|:
literal|46
operator|:
literal|27
name|eric
literal|188
literal|187
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|log
name|locked
name|files
name|in
name|queuer
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|don
literal|'t mistakenly start up two runqueue'
name|s
name|D
literal|3.168
literal|82
operator|/
literal|08
operator|/
literal|24
literal|19
operator|:
literal|55
operator|:
literal|39
name|eric
literal|187
literal|186
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|put
name|queueup
name|log
name|messages
name|on
name|a
name|higher
name|logging
name|level
name|D
literal|3.167
literal|82
operator|/
literal|08
operator|/
literal|24
literal|19
operator|:
literal|41
operator|:
literal|32
name|eric
literal|186
literal|185
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|log
name|more
name|info
argument_list|(
argument|on log level
literal|11
argument_list|)
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|try
name|to
name|detect
name|wild
name|accept
name|loops
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|some
name|minor
name|cleanup
name|and
name|debugging
name|checks
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|fix
name|NoConnect
name|option
name|to
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|only
name|apply
name|to
name|expensive
name|mailers
argument_list|(
name|regardless
name|of
name|sendqueue
name|order
argument_list|)
name|D
decl|3.166	82/08/24 10
range|:
literal|27
operator|:
literal|46
name|eric
literal|185
literal|184
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|clean
name|up
name|event
name|handling
name|so
name|that
name|events
name|that
end_decl_stmt

begin_do
do|do
name|longjmp
literal|'s don'
name|t
name|turn
name|off
name|all
name|future
name|events
expr_stmt|;
do|diagnose reentry of main(
end_do

begin_expr_stmt
unit|)
operator|.
name|D
literal|3.165
literal|82
operator|/
literal|08
operator|/
literal|23
literal|11
operator|:
literal|59
operator|:
literal|50
name|eric
literal|184
literal|183
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|clean
name|up
name|queueing
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|log
name|time
name|in
name|queue
operator|.
modifier|*
modifier|*
modifier|*
modifier|*
name|This
name|delta
name|invalidates
name|mqueue
name|files
operator|*
operator|*
operator|*
operator|*
name|D
literal|3.164
literal|82
operator|/
literal|08
operator|/
literal|23
literal|09
operator|:
literal|23
operator|:
literal|54
name|eric
literal|183
literal|182
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|allow
name|continuation
name|lines
name|in
operator|.
name|cf
name|file
argument_list|(
argument|particularly in headers
argument_list|)
name|D
literal|3.163
literal|82
operator|/
literal|08
operator|/
literal|22
literal|23
operator|:
literal|07
operator|:
literal|11
name|eric
literal|182
literal|181
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|change
name|$i
name|to
name|$j
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|$i
name|is
name|now
name|queue
name|id
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|put
literal|"Received:"
name|format
name|in
operator|.
name|cf
name|file
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|minor
name|cleanup
name|D
literal|3.162
literal|82
operator|/
literal|08
operator|/
literal|22
literal|19
operator|:
literal|03
operator|:
literal|19
name|eric
literal|181
literal|180
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|assign
name|a
name|unique
name|id
name|to
name|each
name|transaction
name|that
name|can
name|be
name|determined
name|from
name|the
name|queue
name|file
name|name
operator|.
name|D
literal|3.161
literal|82
operator|/
literal|08
operator|/
literal|21
literal|17
operator|:
literal|54
operator|:
literal|37
name|eric
literal|180
literal|179
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|move
operator|<
operator|>
name|and
name|forward
name|path
name|processing
name|to
operator|.
name|cf
name|file
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|increase
name|MAXATOMS
name|since
name|some
literal|"comment"
name|information
name|may
name|now
name|be
name|part
name|of
name|the
name|address
operator|.
modifier|*
modifier|*
modifier|*
modifier|*
name|this
name|installation
name|requires
name|a
name|new
name|sendmail
operator|.
name|cf
name|file
operator|*
operator|*
operator|*
operator|*
name|D
literal|3.160
literal|82
operator|/
literal|08
operator|/
literal|20
literal|20
operator|:
literal|35
operator|:
literal|15
name|eric
literal|179
literal|178
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|time
name|stamp
name|the
name|SMTP
name|greeting
name|message
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|increase
name|the
name|buffer
name|size
name|in
name|syslog
name|to
name|prevent
name|core
name|dumps
operator|.
name|D
literal|3.159
literal|82
operator|/
literal|08
operator|/
literal|17
literal|20
operator|:
literal|45
operator|:
literal|43
name|eric
literal|178
literal|177
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|change
name|Mail
operator|-
name|From
operator|:
name|to
name|Received
operator|:
end_expr_stmt

begin_for
for|for new SMTP spec
control|(
name|RFC821
control|)
empty_stmt|;
end_for

begin_expr_stmt
name|handle
name|folded
name|lines
name|in
name|queue
name|files
name|correctly
operator|.
name|D
literal|3.158
literal|82
operator|/
literal|08
operator|/
literal|17
literal|16
operator|:
literal|19
operator|:
literal|10
name|eric
literal|177
literal|176
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|rework
name|header
name|processing
operator|:
end_expr_stmt

begin_do
do|do
name|special
name|purpose
name|header
name|munging
name|in
name|a
name|separate
name|routine
name|so
name|that
name|the
name|queue
name|run
name|can
do|do
name|it
name|also
decl_stmt|;
do|parse From lines in a fancy way
operator|,
do|extracting the address part and turning it into a $g macro; avoid reading and processing core files that end up in the queue directory; check the queue directory name for legality; fix the verify (-bv
end_do

begin_expr_stmt
unit|)
name|option
operator|.
name|D
literal|3.157
literal|82
operator|/
literal|08
operator|/
literal|15
literal|17
operator|:
literal|35
operator|:
literal|39
name|eric
literal|176
literal|175
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|mark
name|From
operator|:
name|lines
name|with
name|the
name|H_FROM
name|bit
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|make
name|VRFY
name|work
name|by
name|adding
name|the
name|QuickAbort
name|flag
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|handle
name|headers
name|more
name|cleverly
name|in
name|queue
name|files
operator|--
name|this
name|seems
name|to
name|work
operator|,
name|but
name|I
name|am
name|frankly
name|nervous
operator|.
name|Note
operator|:
name|this
name|version
name|represents
name|a
name|flag
name|day
operator|!
operator|--
name|old
name|queues
name|will
name|not
name|process
name|properly
operator|.
name|D
literal|3.156
literal|82
operator|/
literal|08
operator|/
literal|15
literal|11
operator|:
literal|58
operator|:
literal|25
name|eric
literal|175
literal|174
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|output
name|class
name|rather
name|than
name|priority
name|in
name|log
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|accept
name|zero
name|intervals
name|in
name|event
name|scheduling
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|allow
name|continuation
name|lines
name|in
name|queue
name|files
argument_list|(
name|particularly
for|for headers
argument_list|)
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|don
literal|'t diagnose inappropriate errors when accepting a connection; fix bug when reprocessing addresses that put garbage in the header; some misc. debugging info (-d14 => commaize)  D 3.155	82/08/08 21:15:44	eric	174	173	00000/00000/00005 make "sleep" work correctly even in the face of other events; clean up the queue processing: child queue runs now go away when done.  more debugging logging is needed to verify that this works right though.  D 3.154	82/08/08 17:05:19	eric	173	172	00000/00000/00005 move remotename() from deliver.c to parse.c; change default log level to 9; put error versus success delivery on different log levels; diagnose overlength lines in headers; more general event mechanism; initial implementation of canonname; don'
name|t
name|diagnose
name|link
name|errors
name|in
name|queue
operator|,
name|since
name|another
name|daemon
name|could
name|have
name|grabbed
name|it
name|legitimately
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|fix
name|a
name|problem
name|in
name|VRFY
name|on
name|bad
name|addresses
name|D
literal|3.153
literal|82
operator|/
literal|08
operator|/
literal|08
literal|01
operator|:
literal|00
operator|:
literal|25
name|eric
literal|172
literal|171
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|change
name|debug
name|level
name|to
name|a
name|debug
name|vector
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|add
name|levels
name|on
name|logging
argument_list|(
name|and
name|the
operator|-
name|L
name|flag
argument_list|)
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|change
name|logging
name|to
name|be
name|by
name|message
operator|-
name|id
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|elevate
name|message
operator|-
name|id
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|some
name|lint
operator|-
name|type
name|cleanup
name|D
literal|3.152
literal|82
operator|/
literal|08
operator|/
literal|07
literal|11
operator|:
literal|13
operator|:
literal|15
name|eric
literal|171
literal|170
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|Fix
name|address
name|rewriting
name|so
name|that
name|multiple
name|spaces
name|and
name|tabs
name|work
name|properly
name|D
literal|3.151
literal|82
operator|/
literal|07
operator|/
literal|31
literal|16
operator|:
literal|57
operator|:
literal|49
name|eric
literal|170
literal|169
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|don
literal|'t give error on ETIMEDOUT on accept call; print errno properly in syserr()  D 3.150	82/07/31 12:56:56	eric	169	168	00000/00000/00005 By default, just queue up the mail for most mailers and deliver from the queue.  This avoids the wild process problem in netnews (or so we hope).  D 3.149	82/07/27 23:09:04	eric	168	167	00000/00000/00005 clean up semantics of daemon mode to facilitate use of other IPC; move some code to main.c because it is not part of creating a connection; if you can'
name|t
name|create
name|a
name|socket
name|assume
name|there
name|is
name|another
name|sendmail
name|running
name|and
name|exit
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|improve
name|the
name|verbose
name|information
name|in
name|an
name|SMTP
name|connection
name|to
name|make
name|it
name|more
name|obvious
name|which
name|messages
name|went
name|which
name|way
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|don
literal|'t attempt delivery if you get an error reading the queue file.  D 3.148	82/07/25 13:11:20	eric	167	166	00000/00000/00005 clean up error handling  D 3.147	82/07/22 01:23:15	eric	166	165	00000/00000/00005 new version of syslog that uses 4.2 IPC  D 3.146	82/07/20 19:39:15	eric	165	164	00000/00000/00005 be smarter about when to rerun the queue when you are in repeated queue mode.  D 3.145	82/07/14 11:19:27	eric	164	163	00000/00000/00005 disconnect sendmail from the controlling tty in daemon mode.  D 3.144	82/07/14 11:00:33	eric	163	162	00000/00000/00005 arrange for MotherPid to be correct in daemon mode  D 3.143	82/07/14 10:46:00	eric	162	161	00000/00000/00005 fork automatically in daemon mode (but only if no debugging)  D 3.142	82/07/14 09:25:11	eric	161	160	00000/00000/00005 don'
name|t
name|accidently
name|unlink
name|a
name|null
name|pointer
name|in
name|finis
argument_list|()
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|change
name|the
name|way
name|it
name|decides
name|whether
name|to
name|remove
name|the
name|temp
name|file
argument_list|(
name|you
name|don
literal|'t want to if you are queueing it up); fix a bug in Apparently-To: that caused it to output both pre- and post-expanded names (only output pre-expanded)  D 3.141	82/07/05 20:56:24	eric	160	159	00000/00000/00005 flush fatal error flag before returning error messages to avoid error message loop; improve debugging: flush transcript before doing things that might take a long time, add some info to debug messages; extend configuration on timeouts so that text of error message is in conf.c  D 3.140	82/07/05 18:49:49	eric	159	158	00000/00000/00005 add "Apparently-To:" field if no recipients are in the header.  D 3.139	82/07/05 13:21:21	eric	158	157	00000/00000/00005 count Mail-From: lines to get a hop count, giving error as appropriate after collection; don'
name|t
name|attempt
name|delivery
name|of
name|message
if|if errors occur before or during collection
empty_stmt|;
end_decl_stmt

begin_expr_stmt
name|fix
name|a
name|bug
name|in
operator|-
name|as
name|mode
argument_list|(
argument|non-daemon SMTP
argument_list|)
operator|.
name|D
literal|3.138
literal|82
operator|/
literal|07
operator|/
literal|05
literal|12
operator|:
literal|37
operator|:
literal|23
name|eric
literal|157
literal|156
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|check
end_expr_stmt

begin_for
for|for errors before opening a daemon connection  D 3.137	82/07/05 12:22:02	eric	156	155	00000/00000/00005 split off clock stuff from util.c so that vacation will compile  D 3.136	82/07/05 12:02:53	eric	155	154	00000/00000/00005 put timeouts on net reads  D 3.135	82/07/02 20:52:46	eric	154	153	00000/00000/00005 arrange to not lose temporary queue control files
control|(
name|tf
name|files
control|)
if|if you interrupt a queue run process.  D 3.134	82/07/02 10:00:16	eric	153	152	00000/00000/00005 be paranoid about resetting the "FatalErrors" flag -- always reset after forking for daemon or queue mode.  This will prevent false error return delivery.  D 3.133	82/07/02 09:43:39	eric	152	151	00000/00000/00005 take special care in outputing error messages to the transcript
empty_stmt|;
end_for

begin_expr_stmt
name|a
name|little
name|bit
name|of
name|paranoia
name|never
name|hurt
name|a
name|mail
name|system
operator|.
name|D
literal|3.132
literal|82
operator|/
literal|06
operator|/
literal|30
literal|22
operator|:
literal|39
operator|:
literal|22
name|eric
literal|151
literal|150
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|open
name|a
name|separate
name|transcript
name|in
name|the
name|child
name|of
name|a
name|daemon
operator|.
name|D
literal|3.131
literal|82
operator|/
literal|06
operator|/
literal|26
literal|14
operator|:
literal|53
operator|:
literal|40
name|eric
literal|150
literal|149
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|clean
name|up
name|error
name|messages
name|on
name|SMTP
name|temporary
name|failures
name|resulting
name|from
name|failure
name|to
name|connect
name|properly
operator|.
name|D
literal|3.130
literal|82
operator|/
literal|06
operator|/
literal|26
literal|13
operator|:
literal|53
operator|:
literal|35
name|eric
literal|149
literal|148
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|more
name|debug
name|information
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|fix
name|dependencies
name|in
name|makefile
name|D
literal|3.129
literal|82
operator|/
literal|06
operator|/
literal|26
literal|13
operator|:
literal|10
operator|:
literal|41
name|eric
literal|148
literal|147
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|lint
name|D
literal|3.128
literal|82
operator|/
literal|06
operator|/
literal|26
literal|12
operator|:
literal|33
operator|:
literal|39
name|eric
literal|147
literal|146
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|take
name|environment
name|variable
literal|"NAME"
name|to
name|determine
name|what
name|your
name|full
name|name
name|is
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|this
name|is
name|overridden
name|by
operator|-
name|F
operator|.
name|D
literal|3.127
literal|82
operator|/
literal|06
operator|/
literal|26
literal|11
operator|:
literal|56
operator|:
literal|51
name|eric
literal|146
literal|145
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|_kill
name|command
name|to
name|SMTP
operator|.
name|this
name|is
name|probably
name|dangerous
name|in
name|the
name|outside
name|world
operator|.
name|D
literal|3.126
literal|82
operator|/
literal|06
operator|/
literal|25
literal|19
operator|:
literal|38
operator|:
literal|24
name|eric
literal|145
literal|144
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|debugging
name|information
name|to
name|server
name|smtp
name|code
operator|:
name|_debug
name|to
name|set
name|Debug
operator|,
name|_verbose
name|to
name|set
name|verbose
operator|,
name|and
name|_showq
name|to
name|show
name|the
name|send
name|queue
argument_list|(
argument|already existant
argument_list|,
argument|just a name change
argument_list|)
name|D
literal|3.125
literal|82
operator|/
literal|06
operator|/
literal|23
literal|12
operator|:
literal|12
operator|:
literal|19
name|eric
literal|144
literal|143
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|check
name|prescan
end_expr_stmt

begin_return
return|return
name|values
name|in
name|remotename
name|D
literal|3.124
literal|82
operator|/
literal|06
operator|/
literal|19
literal|21
operator|:
literal|14
operator|:
literal|18
name|eric
literal|143
literal|142
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|remember
name|to
name|put
name|a
name|newline
name|at
name|the
name|end
name|of
name|the
name|UGLYUUCP
name|line
name|D
literal|3.123
literal|82
operator|/
literal|06
operator|/
literal|19
literal|21
operator|:
literal|09
operator|:
literal|10
name|eric
literal|142
literal|141
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|get
name|rid
name|of
name|comment
name|lines
name|when
name|storing
name|rewriting
name|rules
name|D
literal|3.122
literal|82
operator|/
literal|06
operator|/
literal|19
literal|20
operator|:
literal|47
operator|:
literal|23
name|eric
literal|141
literal|140
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|improve
name|SMTP
name|error
name|reporting
name|D
literal|3.121
literal|82
operator|/
literal|06
operator|/
literal|18
literal|11
operator|:
literal|58
operator|:
literal|31
name|eric
literal|140
literal|139
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|believe
name|host
name|name
name|on
name|SMTP
literal|"HELO"
name|line
name|D
literal|3.120
literal|82
operator|/
literal|06
operator|/
literal|17
literal|10
operator|:
literal|44
operator|:
literal|38
name|eric
literal|139
literal|138
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|botch
name|in
operator|-
name|Q
name|flag
argument_list|(
argument|sets AliasFile rather than QueueDir
argument_list|)
name|D
literal|3.119
literal|82
operator|/
literal|06
operator|/
literal|16
literal|14
operator|:
literal|51
operator|:
literal|16
name|eric
literal|138
literal|137
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|allow
name|connection
name|refused
name|as
name|a
name|temporary
name|error
return|;
end_return

begin_expr_stmt
name|make
name|sure
name|there
name|is
name|always
name|someone
name|to
end_expr_stmt

begin_return
return|return
name|the
name|mail
name|to
name|on
name|error
name|D
literal|3.118
literal|82
operator|/
literal|06
operator|/
literal|16
literal|14
operator|:
literal|29
operator|:
literal|20
name|eric
literal|137
literal|136
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|botch
name|in
name|outputing
literal|"recipient"
name|type
name|lines
argument_list|(
argument|e.g.
argument_list|,
argument|To:
argument_list|)
name|D
literal|3.117
literal|82
operator|/
literal|06
operator|/
literal|07
literal|23
operator|:
literal|53
operator|:
literal|26
name|eric
literal|136
literal|135
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|allow
name|multiple
name|connections
return|;
end_return

begin_decl_stmt
name|call
name|putline
name|to
name|output
name|FULL_SMTP
name|lines
argument_list|(
name|to
name|limit
name|line
name|lengths
argument_list|,
name|etc
operator|.
expr|)
argument_list|;
name|involves
name|adding
name|an
name|asm
operator|.
name|sed
name|script
name|to
name|the
name|makefile
name|D
literal|3.116
literal|82
operator|/
literal|06
operator|/
literal|07
literal|07
operator|:
literal|54
operator|:
literal|55
name|eric
literal|135
literal|134
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|make
name|transcripts
name|verbose
name|always
argument_list|;
name|misc
operator|.
name|message
name|cleanup
argument_list|,
name|etc
operator|.
name|D
literal|3.115
literal|82
operator|/
literal|06
operator|/
literal|07
literal|07
operator|:
literal|06
operator|:
literal|13
name|eric
literal|134
literal|133
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|strip
name|out
name|xlate
name|stuff
operator|--
name|this
name|belongs
name|at
name|a
name|different
name|level
name|D
literal|3.114
literal|82
operator|/
literal|06
operator|/
literal|06
literal|23
operator|:
literal|13
operator|:
literal|08
name|eric
literal|133
literal|132
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|avoid
name|loops
name|by
name|not
name|sending
name|to
name|owner
operator|-
name|owner
operator|-
operator|*
operator|--
name|just
name|send
name|to
name|owner
operator|-
name|owner
name|instead
name|D
literal|3.113
literal|82
operator|/
literal|06
operator|/
literal|06
literal|23
operator|:
literal|05
operator|:
literal|17
name|eric
literal|132
literal|131
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|implement
name|alias
name|owner
name|feature
operator|.
name|this
name|actually
name|works
for|for any user. basically
operator|,
if|if the alias owner-xxx exists
operator|,
name|errors
name|sending
name|to
name|xxx
name|will
name|be
name|sent
name|to
name|that
name|alias
name|rather
name|than
name|to
name|the
name|sender
operator|.
name|D
literal|3.112
literal|82
operator|/
literal|05
operator|/
literal|31
literal|19
operator|:
literal|03
operator|:
literal|47
name|eric
literal|131
literal|130
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|make
name|temp
name|files
name|the
name|correct
name|modes
name|in
name|all
name|cases
name|D
literal|3.111
literal|82
operator|/
literal|05
operator|/
literal|31
literal|18
operator|:
literal|49
operator|:
literal|50
name|eric
literal|130
literal|129
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|pass
name|lint
operator|.
name|notice
name|that
name|definitions
name|in
name|llib
operator|-
name|lc
name|have
name|changed
end_decl_stmt

begin_for
for|for alarm
control|(
control|)
name|and
name|sleep
parameter_list|()
function|calls
block|{
name|arg
name|was
name|unsigned
decl_stmt|,
name|is
name|now
name|int
block|}
end_for

begin_expr_stmt
operator|.
name|D
literal|3.110
literal|82
operator|/
literal|05
operator|/
literal|31
literal|17
operator|:
literal|10
operator|:
literal|51
name|eric
literal|129
literal|128
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|eliminate
operator|-
name|V
operator|,
operator|-
name|D
operator|,
operator|-
name|p
name|flags
name|in
name|favor
name|of
name|a
name|single
name|flag
literal|"-bx"
operator|(
name|be
name|in
name|mode
name|x
operator|)
operator|.
name|D
literal|3.109
literal|82
operator|/
literal|05
operator|/
literal|31
literal|15
operator|:
literal|35
operator|:
literal|57
name|eric
literal|128
literal|127
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|don
literal|'t output SMTP/FTP error codes in transcript file  D 3.108	82/05/31 15:32:18	eric	127	126	00000/00000/00005 finish implementing envelopes.  it'
name|s
name|not
name|completely
name|clear
name|to
name|me
name|that
name|this
name|is
name|really
name|the
name|way
name|to
name|go
operator|,
name|but
name|it
name|seems
name|clearly
name|better
name|than
name|what
name|i
name|had
name|before
operator|.
name|this
name|delta
name|includes
name|many
name|other
name|minor
name|changes
operator|,
name|so
name|it
name|should
name|probably
name|not
name|be
name|blithely
name|removed
operator|.
name|D
literal|3.107
literal|82
operator|/
literal|05
operator|/
literal|30
literal|10
operator|:
literal|25
operator|:
literal|35
name|eric
literal|126
literal|125
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|M_FULLSMTP
argument_list|(
argument|``X
literal|''
argument|flag in .cf file
argument_list|)
end_expr_stmt

begin_for
for|for eventual implementation of full SMTP.  This version must support such garbage as line limits
operator|,
name|address
name|length
name|limits
decl_stmt|, return-
name|path
decl_stmt|,
name|etc
operator|.
name|D
decl|3.106	82/05/29 20
range|:
literal|00
operator|:
literal|30
name|eric
literal|125
literal|124
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|allow
name|the
name|user
name|with
name|name
literal|"daemon"
name|to
name|send
name|mail
name|as
name|anyone
name|s
operator|/
name|he
name|wants
operator|.
name|D
literal|3.105
literal|82
operator|/
literal|05
operator|/
literal|22
literal|02
operator|:
literal|05
operator|:
literal|48
name|eric
literal|124
literal|123
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
literal|"junk mail"
operator|--
name|error
name|responses
name|are
name|never
name|returned
operator|.
name|D
literal|3.104
literal|82
operator|/
literal|05
operator|/
literal|22
literal|01
operator|:
literal|38
operator|:
literal|07
name|eric
literal|123
literal|122
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
literal|"envelopes"
name|to
name|contain
name|the
name|basic
name|information
name|needed
name|as
name|control
name|info
end_for

begin_for
for|for each message.  currently there is only one envelope -- this being the obvious stupid conversion.  later there will be separate envelopes for error messages
operator|,
return|return
name|receipts
operator|,
name|etc
operator|.
name|D
literal|3.103
literal|82
operator|/
literal|05
operator|/
literal|20
literal|17
operator|:
literal|46
operator|:
literal|07
name|eric
literal|122
literal|121
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|dfopen
name|as
name|a
literal|"determined fopen"
operator|--
name|it
name|retries
end_for

begin_if
if|if it gets recoverable errors.  we use it for returning mail
condition|(
name|to
name|dead
operator|.
name|letter
condition|)
name|and
name|creating
name|the
name|temp
name|file
operator|.
name|the
name|whole
name|idea
name|is
name|to
name|avoid
name|dropping
name|things
name|on
name|the
name|floor
name|on
name|heavily
name|loaded
name|systems
operator|.
name|this
name|is
name|untested
decl_stmt|,
name|since
name|it
name|seems
name|impossible
name|to
name|fill
name|up
name|the
name|inode
name|or
name|file
name|tables
name|on
name|this
name|VAX
argument_list|(
name|but
name|it
name|works
end_if

begin_if
if|if the open succeeds
end_if

begin_expr_stmt
unit|)
operator|.
name|D
literal|3.102
literal|82
operator|/
literal|05
operator|/
literal|15
literal|12
operator|:
literal|29
operator|:
literal|36
name|eric
literal|121
literal|120
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|the
literal|'R'
name|flag
name|to
name|mailers
operator|,
name|saying
name|to
name|rewrite
name|the
name|recipient
name|addresses
name|to
name|be
name|relative
name|to
name|the
name|recipient
operator|.
name|This
name|makes
name|reply
name|code
name|easy
operator|,
name|but
name|confuses
name|user
name|mail
name|programs
name|that
name|are
name|expecting
name|to
name|have
name|to
name|rewrite
name|recipient
name|addresses
operator|.
name|In
name|general
operator|,
name|the
name|receiving
name|host
name|must
name|be
literal|"smart"
end_expr_stmt

begin_for
for|for this to work.  D 3.101	82/05/06 20:21:14	eric	120	119	00000/00000/00005 allow socket number on [IPC] connections -- eventually this could be used to handle other low-level protocols.  D 3.100	82/03/27 20:15:12	eric	119	118	00000/00000/00005 delete neat remotename feature
operator|,
name|because
name|it
name|doesn
literal|'t work right in UUCPland -- and breaks stupid hosts.  '
name|Twill
name|be
name|fixed
operator|,
name|I
name|promise
operator|.
name|Time
name|must
name|be
name|spent
name|figuring
name|out
name|how
name|to
name|define
name|the
name|civilized
name|versus
name|the
name|uncivilized
name|world
operator|.
name|D
literal|3.99
literal|82
operator|/
literal|03
operator|/
literal|27
literal|19
operator|:
literal|57
operator|:
literal|44
name|eric
literal|118
literal|117
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|compensate
end_for

begin_for
for|for bug in getlogin: can return the empty string
control|(
literal|""
control|)
for|for certain error conditions rather than the NULL pointer.  D 3.98	82/03/22 22:37:54	eric	117	116	00000/00000/00005 continue the impossible task of tracking Bill Joy  D 3.97	82/03/22 22:10:44	eric	116	115	00000/00000/00005 more cleanup for new 4.2 system configuration and some more fixes for vanilla V7  D 3.96	82/03/20 18:13:01	eric	115	114	00000/00000/00005 take % as an acceptable name terminator in GECOS field
control|(
literal|"in-care-of"
control|)
operator|--
end_for

begin_for
for|for TEF%UCSFCGL  D 3.95	82/03/20 16:12:27	eric	114	113	00000/00000/00005 16 bit changes -- should have no effect on VAX binaries to speak of.  D 3.94	82/03/06 16:11:49	eric	113	112	00000/00000/00005 get queue scanning working correctly in conjunction with daemon mode  D 3.93	82/03/06 15:35:49	eric	112	111	00000/00000/00005 have daemon mode assume SMTP mode  D 3.92	82/03/06 15:08:24	eric	111	110	00000/00000/00005 give correct error message in SMTP if some of the addresses are not ok  D 3.91	82/03/06 14:52:22	eric	110	109	00000/00000/00005 arrange to be able to accept a connection from any host.  D 3.90	82/03/06 14:15:55	eric	109	108	00000/00000/00005 collapse special character processing into macro processing for simplicity of code.  D 3.89	82/03/06 12:09:18	eric	108	107	00000/00000/00005 clean up error handling in IPC case
empty_stmt|;
end_for

begin_decl_stmt
name|fix
name|a
name|minor
name|bug
name|in
name|headers
name|in
name|queueing
name|code
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|make
name|SMTP
name|mail
name|multi
name|user
name|per
name|connect
operator|.
name|D
literal|3.88
literal|82
operator|/
literal|03
operator|/
literal|05
literal|10
operator|:
literal|45
operator|:
literal|48
name|eric
literal|107
literal|106
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|remove
name|silly
name|$U
name|dependency
name|in
name|UGLYUUCP
name|code
name|D
literal|3.87
literal|82
operator|/
literal|03
operator|/
literal|05
literal|10
operator|:
literal|13
operator|:
literal|06
name|eric
literal|106
literal|105
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|include
name|direct
name|connect
name|on
name|outgoing
name|mail
end_expr_stmt

begin_if
if|if the pathname is "[IPC]" -- this gives minimal number of processes for ethernet mail.  D 3.86	82/02/27 12:29:31	eric	105	104	00000/00000/00005 more work on after $g translate rewriting  D 3.85	82/02/27 11:37:42	eric	104	103	00000/00000/00005 implement "return receipt requested".  D 3.84	82/02/27 09:51:36	eric	103	102	00000/00000/00005 improve rewriting of "after $g translate" to correspond to the real world.....  D 3.83	82/02/26 21:56:10	eric	102	101	00000/00000/00005 implement daemon mode  D 3.82	82/02/26 19:02:33	eric	101	100	00000/00000/00005 default to OldStyle headers -- this turns out to be needed so that it will work right when running as a server.  D 3.81	82/02/22 19:59:16	eric	100	99	00000/00000/00005 some hacks to make the ethernet community happier -- .cf changes only  D 3.80	82/02/22 19:32:12	eric	99	98	00000/00000/00005 be much more clever about splitting up addresses when doing header rewriting.  become NewStyle automatically based on heuristics
empty_stmt|;
end_if

begin_decl_stmt
name|this
name|makes
name|some
name|other
name|addresses
name|work
decl_stmt|,
name|although
name|there
name|are
name|conceivably
name|sites
name|that
name|this
name|could
decl|break.
name|Perhaps
name|we
name|should
decl|default
name|to
name|OldStyle
decl|?
name|I
name|don
decl|'t think this would break anything.  D 3.79	82/02/20 16:56:02	eric	98	97	00000/00000/00005 output names in a nice comma-separated fashion in messages -- this opens up other possibilities  D 3.78	82/02/20 12:59:46	eric	97	96	00000/00000/00005 expand macros in rewriting rules early to allow multi-word macros to be processed correctly.  D 3.77	82/02/20 12:12:09	eric	96	95	00000/00000/00005 add the -c flag, to cause sendmail to just queue messages that are for mailers that are expensive; a later instantiation can come around and send them in a batch.  Also, pass macro definitions through the queueing code so that macros can be expanded later rather than sooner; this is important for destination dependent macros such as $g.  D 3.76	82/02/04 20:31:21	eric	95	94	00000/00000/00005 add host aliasing; add -p flag.  this version doesn'
name|t
name|yet
name|know
name|about
name|replacing
name|the
name|text
name|of
name|the
name|host
name|alias
name|into
name|the
name|message
name|however
operator|.
name|syntax
name|is
name|grotty
range|:
literal|"/hostmatch:%s@newhost"
name|or
name|whatever
operator|.
name|D
literal|3.75
literal|82
operator|/
literal|01
operator|/
literal|23
literal|14
operator|:
literal|21
operator|:
literal|06
name|eric
literal|94
literal|93
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|M_UGLYUUCP
name|flag
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|only
name|catch
name|names
name|with
name|leading
name|slash
name|as
name|filenames
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|let
name|the
name|user
name|redefine
name|their
name|full
name|name
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|don
literal|'t pass -r or -f to uux.  D 3.74	82/01/10 21:57:33	eric	93	92	00000/00000/00005 cleanup from cbosgd (Mark Horton) testing; some internals, mostly configuration.  This tries to make the configuration file (cf.m4) be much more general, but I fear it is doomed to failure -- it may be better to just tell people to roll their own.  D 3.73	82/01/05 09:59:19	eric	92	91	00000/00000/00005 fix botch in UGLYUUCP code -- gave "remote from<dest>" instead of "remote from<source>"  D 3.72	82/01/01 18:39:43	eric	91	90	00000/00000/00005 know about all known Berknet host names so that we can handle the "." notation happily in the full name representation.  D 3.71	82/01/01 18:27:15	eric	90	89	00000/00000/00005 send to dead.letter using sendto/recipient/deliver mechanism rather than mailfile; this fixes a bug with the "from" name and seems like a better abstraction.  D 3.70	81/12/06 12:39:10	eric	89	88	00002/00000/00003 cleanup so it will go through lint without any fancy grep -v'
name|s
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|change
name|the
name|way
name|SCCS
name|Id
literal|'s are handled.  D 3.69	81/12/05 14:14:06	eric	88	87	00000/00000/00003 insert SMTP "Mail-From:" line.  D 3.68	81/12/05 11:53:41	eric	87	86	00000/00000/00003 put the SMTP and queueing code on compilation flags so that sendmail will fit on non-ID PDP-11'
name|s
argument_list|(
name|ugh
argument_list|)
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|put
name|the
name|ugly
name|UUCP
name|hack
name|on
name|a
name|compilation
name|flag
name|also
name|to
name|emphasize
name|that
name|it
name|sucks
name|eggs
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|makefile
name|cleanup
operator|.
name|D
literal|3.67
literal|81
operator|/
literal|11
operator|/
literal|27
literal|21
operator|:
literal|37
operator|:
literal|05
name|eric
literal|86
literal|85
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|this
name|is
name|a
name|stupid
name|hack
name|to
name|put
literal|"remote from<host>"
name|lines
name|on
name|the
name|From
name|lines
name|going
name|to
name|UUCP
name|mail
operator|.
name|someday
name|i
name|hope
name|to
name|rip
name|out
name|this
name|stupidity
operator|.
name|it
name|is
name|triggered
name|by
name|any
name|mailer
name|named
literal|"uucp"
operator|--
name|it
name|ought
name|to
name|be
name|a
name|special
name|flag
operator|,
name|but
name|i
name|refuse
name|to
name|legitimize
name|antique
name|hacky
name|mistakes
operator|.
name|D
literal|3.66
literal|81
operator|/
literal|11
operator|/
literal|22
literal|19
operator|:
literal|17
operator|:
literal|45
name|eric
literal|85
literal|84
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|Edit
name|queue
name|control
name|files
name|when
name|running
name|queue
argument_list|(
argument|assuming there are still recipients left
argument_list|)
operator|.
name|Also
operator|,
name|modify
name|the
name|MsgPriority
name|to
name|be
name|the
name|absolute
name|number
argument_list|(
argument|not the Priority: value
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|this
name|allows
name|us
name|to
name|include
name|aging
name|into
name|the
name|priority
name|algorithm
operator|.
name|D
literal|3.65
literal|81
operator|/
literal|11
operator|/
literal|21
literal|18
operator|:
literal|42
operator|:
literal|47
name|eric
literal|84
literal|83
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|change
name|the
name|send
name|queue
name|to
name|be
name|only
name|one
name|queue
name|instead
name|of
name|one
name|per
name|mailer
operator|.
name|this
name|is
name|slightly
name|inefficient
name|but
name|simpler
operator|.
name|also
operator|,
name|pass
name|this
name|queue
name|around
name|so
name|we
name|can
name|have
name|multiple
name|send
name|queues
operator|.
name|this
name|makes
name|VRFY
name|work
operator|.
name|D
literal|3.64
literal|81
operator|/
literal|11
operator|/
literal|21
literal|16
operator|:
literal|38
operator|:
literal|29
name|eric
literal|83
literal|82
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|convert
name|to
name|SMTP
name|draft
literal|3
operator|--
name|finishing
name|touches
operator|.
name|Punt
name|on
name|the
name|VRFY
operator|/
name|EXPN
name|commands
end_expr_stmt

begin_for
for|for now
empty_stmt|;
end_for

begin_expr_stmt
name|they
name|aren
literal|'t required anyhow.  Move the fullname into the address structure so it can be inherited.  D 3.63	81/11/11 20:24:07	eric	82	81	00000/00000/00003 integrate user SMTP into sendmail itself.  If there is no $u arg in the mailer argument list, SMTP is run.  This can be used directly over the Ethernet or to any clever mailer.  We still need to edit spooled control files to remove recipients that have been successfully sent during queue processing.  D 3.62	81/11/08 13:00:21	eric	81	80	00000/00000/00003 know about SMTP over TCP.  The current SMTP user is not clever enough to deal with multiple users at one host.  To fix this we will have to speak some smart protocol between sendmail and the mailer -- maybe SMTP??  D 3.61	81/11/07 15:41:39	eric	80	79	00000/00000/00003 clean up to compile& work on ARPAVAX; move stat file to /usr/lib/sendmail.st; fix bug in syserr with error codes  D 3.60	81/10/31 22:12:47	eric	79	78	00000/00000/00003 drop old NCP stuff for ARPANET handling; fix some bugs in error messages with multiple recipients in SMTP; clean up error handling  D 3.59	81/10/27 12:24:51	eric	78	77	00000/00000/00003 experimental version combining queueing with daemon operation. I'
name|m
name|sure
name|this
name|doesn
literal|'t work -- if only because the wait()s are funny.  D 3.58	81/10/27 10:50:52	eric	77	76	00000/00000/00003 More queueing cleanup: implement timeouts (still one-stage), properly implement priorities (didn'
name|t
name|work
name|before
end_expr_stmt

begin_operator
unit|)
operator|,
end_operator

begin_expr_stmt
name|and
name|miscellaneous
name|cleanup
operator|.
name|D
literal|3.57
literal|81
operator|/
literal|10
operator|/
literal|26
literal|14
operator|:
literal|22
operator|:
literal|34
name|eric
literal|76
literal|75
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|Install
name|new
name|experimental
name|queueing
name|facility
operator|--
name|one
name|stage
name|timeout
operator|,
name|etc
operator|.
name|This
name|version
name|is
name|still
name|quite
name|incomplete
operator|.
name|It
name|needs
name|to
name|reorder
name|the
name|queue
name|after
name|some
name|interval
operator|,
end_expr_stmt

begin_do
do|do
name|two
operator|-
name|stage
name|timeout
operator|,
name|take
name|option
name|info
name|from
name|the
name|queue
name|file
name|instead
name|of
name|the
name|command
name|line
operator|,
name|read
name|the
name|sender
literal|'s .mailcf file, etc.  Some of this is useful for SMTP also.  D 3.56	81/10/23 19:38:09	eric	75	74	00000/00000/00003 Eliminate magic MN_LOCAL and MN_PROG; change q_mailer item in ADDRESS to be pointer to mailer rather than index.  D 3.55	81/10/22 10:25:29	eric	74	73	00000/00000/00003 move stats file to /usr/lib; put location of sendmail.hf in conf.c  D 3.54	81/10/22 09:43:48	eric	73	72	00000/00000/00003 take fullname from /etc/passwd if Smtp mode and sender name is indeed local.  Also accepts names more often; this is probably a disaster for sender verification.  D 3.53	81/10/22 09:14:30	eric	72	71	00000/00000/00003 implement HELP and MRSQ -- MRSQ is a partial implementation of old MTP -- in particular, To: fields in MAIL commands are not yet implemented.  The "message" routine now takes first args of the form "999-" to specify continuation.  D 3.52	81/10/20 11:36:24	eric	71	70	00000/00000/00003 clean up the SMTP stuff some more  D 3.51	81/10/19 22:27:17	eric	70	69	00000/00000/00003 implement SMTP mode -- doesn'
name|t
name|support
name|source
name|routing
name|or
name|the
name|HELP
name|command
operator|,
name|and
name|doesn
literal|'t give the correct code on VRFY or forwarding. Maybe someday....  D 3.50	81/10/17 16:58:04	eric	69	68	00000/00000/00003 initial prep to put in Daemon mode  D 3.49	81/10/12 10:04:19	eric	68	67	00000/00000/00003 throw in some "errno = 0;"'
name|s
name|to
name|make
name|syserr
literal|'s more accurate; take any -f flag if debug mode and uid==euid.  D 3.48	81/10/08 22:55:37	eric	67	66	00000/00000/00003 ignore interrupts and hangups while calling mailer.  D 3.47	81/10/08 09:13:30	eric	66	65	00000/00000/00003 fix botch in backup code during rewriting  D 3.46	81/10/06 19:12:57	eric	65	64	00000/00000/00003 change rewriting rules to use $N on RHS to match LHS, and include $=X (class match) in the matching; this will allow us to match the proposed "user.host@domain" syntax as well as the old syntax, by putting the known domains into a class to disambiguate.  D 3.45	81/10/02 11:05:21	eric	64	63	00000/00000/00003 arrange to give the correct "from" person on error messages.  D 3.44	81/10/02 10:07:38	eric	63	62	00000/00000/00003 use ruleset 2 to rewrite names after the $g translate (to fix some forwarding problems; do a read check in putmessage (just in case the temp file disappeared); some general cleanup.  D 3.43	81/09/30 10:00:20	eric	62	61	00000/00000/00003 fix the<> syntax, convert "at" to "@" in from addresses also, plus some minorness to get the multi-machine case going nicely.  D 3.42	81/09/29 18:22:25	eric	61	60	00000/00000/00003 change processing of From: person; basically, this mod deletes the Original-From: line if redundant with the generated From: line, uses the Original-From: line for the From: line if possible, and a host of other such trivialities.  D 3.41	81/09/29 14:59:00	eric	60	59	00000/00000/00003 fix hash function computation for symbol table on 16-bit machines  D 3.40	81/09/28 19:17:29	eric	59	58	00000/00000/00003 enable aliases to self-reference themselves correctly.  D 3.39	81/09/24 10:30:44	eric	58	56	00000/00000/00003 changes to work under a V6 system -- mostly compilation flags  D 3.38.1.1	81/09/23 18:23:19	eric	57	56	00000/00000/00003 break some configuration into conf.h -- simplifies makefile changes on different machines.  But there are still conditional libraries, so this may not be a good idea.....  D 3.38	81/09/23 09:52:23	eric	56	55	00000/00000/00003 fix bug in file modes when mailing to files that didn'
name|t
name|exist
name|before
expr_stmt|;
do|add an 'F' line to the .cf file that will read class entries from another file
operator|,
do|given a scanf string to do the parsing.  D 3.37	81/09/22 13:24:25	eric	55	54	00000/00000/00003 fix problem with using macros in rules; change configuration to send different flags when destined for arpanet vs. berknet hosts
operator|,
do|etc.  D 3.36	81/09/22 11:33:29	eric	54	53	00000/00000/00003 finally make suppression of sender in mailing lists work -- this version also works correctly on simple aliases.  D 3.35	81/09/21 18:49:53	eric	53	52	00000/00000/00003 fix suppression of from address in mailing lists.  D 3.34	81/09/20 10:46:32	eric	52	51	00000/00000/00003 don't let a mailer ever execute as root (that should solve the security problems!) -- essentially just map root into someone else. Adds yet another configuration variable (should this be in the .cf file?  D 3.33	81/09/16 20:04:26	eric	51	50	00000/00000/00003 take underscore as well as space to separate parts of a person's full name.  Dot notation should be made to work someday also.  D 3.32	81/09/16 17:16:19	eric	50	49	00000/00000/00003 have .forward ownership stick harder than :include: ownership: this prevents cretins from using writable root files for nastiness. all this is pointless if /usr/lib/aliases is writable though....  D 3.31	81/09/16 16:39:44	eric	49	48	00000/00000/00003 be REALLY clever and inherit uid/gid from owner of :include: files also...   solves problem of alias to non-secure file  D 3.30	81/09/16 16:24:19	eric	48	47	00000/00000/00003 last delta was too paranoid -- this increases the number of cases that work (but is still safe -- I hope
end_do

begin_expr_stmt
unit|)
name|D
literal|3.29
literal|81
operator|/
literal|09
operator|/
literal|16
literal|16
operator|:
literal|08
operator|:
literal|08
name|eric
literal|47
literal|46
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|run
name|as
name|the
name|user
name|forwarding
name|mail
name|after
name|a
operator|.
name|forward
name|operation
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|fix
name|a
name|bug
name|in
operator|.
name|forwarding
name|that
name|caused
name|recursive
name|expansion
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|restrict
name|mail
name|to
name|programs
decl_stmt|,
name|files
decl_stmt|,
name|and
name|with
range|:
name|include
operator|:
end_decl_stmt

begin_for
for|for security reasons.  D 3.28	81/09/14 12:41:28	eric	46	45	00000/00000/00003 check MAXATOM overflow
empty_stmt|;
end_for

begin_expr_stmt
name|increase
name|MAXATOM
name|value
name|D
literal|3.27
literal|81
operator|/
literal|09
operator|/
literal|14
literal|12
operator|:
literal|19
operator|:
literal|23
name|eric
literal|45
literal|44
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|fix
name|but
name|in
name|mailers
name|that
name|only
name|take
name|one
name|address
name|at
name|a
name|time
name|D
literal|3.26
literal|81
operator|/
literal|09
operator|/
literal|12
literal|17
operator|:
literal|34
operator|:
literal|05
name|eric
literal|44
literal|43
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|match
name|on
name|full
name|name
end_expr_stmt

begin_for
for|for local users  D 3.25	81/09/12 15:48:57	eric	43	42	00000/00000/00003 change From: processing to reduce the number of Original-From: lines
empty_stmt|;
end_for

begin_expr_stmt
name|change
name|allocation
name|of
name|global
name|variables
operator|.
name|D
literal|3.24
literal|81
operator|/
literal|09
operator|/
literal|07
literal|14
operator|:
literal|12
operator|:
literal|48
name|eric
literal|42
literal|41
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|fix
name|up
name|umask
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|allow
name|setuid
name|on
name|files
name|to
name|take
name|recipient
name|owner
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|factor
name|some
name|configuration
name|info
name|into
name|conf
operator|.
name|c
name|D
literal|3.23
literal|81
operator|/
literal|09
operator|/
literal|07
literal|12
operator|:
literal|33
operator|:
literal|38
name|eric
literal|41
literal|40
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|add
name|auto
operator|-
name|rebuild
name|on
name|alias
name|database
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|fix
name|some
name|aliasing
name|bugs
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|add
name|statistics
name|to
name|rebuild
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|slight
name|code
name|restructuring
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|change
name|version
name|handling
name|one
name|last
argument_list|(
operator|?
argument_list|)
name|time
name|D
decl|3.22	81/09/07 10
range|:
literal|23
operator|:
literal|04
name|eric
literal|40
literal|39
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|add
name|NOTUNIX
name|compile
name|flag
name|to
name|turn
name|off
name|UNIX
literal|"From "
name|line
name|processing
name|D
literal|3.21
literal|81
operator|/
literal|09
operator|/
literal|06
literal|19
operator|:
literal|50
operator|:
literal|23
name|eric
literal|39
literal|38
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|cleanup
decl_stmt|,
name|commenting
decl_stmt|,
name|linting
decl_stmt|,
name|etc
operator|.
name|D
decl|3.20	81/09/06 14
range|:
literal|23
operator|:
literal|20
name|eric
literal|38
literal|37
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|improve
literal|"version:"
name|entry
name|in
name|makefile
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|fix
operator|-
name|em
argument_list|(
argument|mail back errors
argument_list|)
name|option
name|D
literal|3.19
literal|81
operator|/
literal|09
operator|/
literal|06
literal|10
operator|:
literal|29
operator|:
literal|49
name|eric
literal|37
literal|36
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|fix
name|$u
name|argument
name|processing
name|bug
argument_list|(
argument|happened in uucp
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
operator|.
name|cf
name|file
name|cleanup
name|D
literal|3.18
literal|81
operator|/
literal|08
operator|/
literal|31
literal|21
operator|:
literal|22
operator|:
literal|39
name|eric
literal|36
literal|35
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|collect
name|mail
name|statistics
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|minor
name|configuration
name|changes
name|D
literal|3.17
literal|81
operator|/
literal|08
operator|/
literal|31
literal|12
operator|:
literal|11
operator|:
literal|57
name|eric
literal|35
literal|34
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|allow
literal|"error"
name|as
name|a
name|net
name|name
name|to
name|print
name|error
name|messages
name|D
literal|3.16
literal|81
operator|/
literal|08
operator|/
literal|29
literal|19
operator|:
literal|16
operator|:
literal|24
name|eric
literal|34
literal|33
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|drop
name|unnecessary
name|H_FORCE
name|bits
name|in
name|conf
operator|.
name|c
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|delete
name|H_DELETE
argument_list|(
name|since
name|H_ACHECK
name|can
name|be
name|used
name|with
name|a
name|zero
name|mask
name|field
argument_list|)
name|D
decl|3.15	81/08/27 11
range|:
literal|42
operator|:
literal|58
name|eric
literal|33
literal|32
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|on
operator|-
name|t
decl_stmt|,
name|use
name|argument
name|list
name|as
name|a
name|supress
name|list
name|D
decl|3.14	81/08/25 16
range|:
literal|06
operator|:
literal|37
name|eric
literal|32
literal|31
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|change
name|handling
name|of
operator|<
name|LWSP
operator|>
name|characters
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|remove
name|special
literal|"at"
name|processing
argument_list|(
argument|put it in .cf file
argument_list|)
name|D
literal|3.13
literal|81
operator|/
literal|08
operator|/
literal|24
literal|14
operator|:
literal|05
operator|:
literal|39
name|eric
literal|31
literal|30
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|Add
literal|"-t"
name|option
name|to
name|read
name|To
operator|:
operator|,
name|Cc
operator|:
operator|,
name|and
name|Bcc
operator|:
name|lines
name|to
name|get
name|recipients
name|D
literal|3.12
literal|81
operator|/
literal|08
operator|/
literal|23
literal|12
operator|:
literal|08
operator|:
literal|53
name|eric
literal|30
literal|29
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|plug
name|assorted
name|security
name|holes
name|D
literal|3.11
literal|81
operator|/
literal|08
operator|/
literal|22
literal|17
operator|:
literal|52
operator|:
literal|06
name|eric
literal|29
literal|28
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|Arrange
name|to
name|pull
name|full
name|name
name|out
name|of
name|From
name|line
end_expr_stmt

begin_if
if|if found
empty_stmt|;
end_if

begin_expr_stmt
name|includes
name|Original
operator|-
name|From
operator|:
name|hacking
argument_list|(
argument|oh so ugly
argument_list|)
operator|.
name|There
literal|'
end_expr_stmt

unit|s got to be a better way to do this...  D 3.10	81/08/22 14:45:27	eric	28	27	00000/00000/00003 fix UNIX From line parsing problem; add $b macro to get correct dates; fix mail-to-file problem; define basic macros before cracking arguments so that -D is more useful  D 3.9	81/08/21 18:51:33	eric	27	26	00000/00000/00003 return transcript even if no message was collected  D 3.8	81/08/21 18:23:53	eric	26	25	00000/00000/00003 drop M_FINAL, add $y=ttyname, rename some constants  D 3.7	81/08/20 15:19:50	eric	25	24	00000/00000/00003 internal cleanup& minor improvements  D 3.6	81/08/18 11:40:37	eric	24	23	00000/00000/00003 allow :include: specs  D 3.5	81/08/17 11:02:12	eric	23	22	00000/00000/00003 implement hashing in symbol table and add more headers, from BB&N Report No. ICST/CBOS - 80/2, "Specification of a Draft Message Format Standard (Draft Report)", prepared for NBS.  D 3.4	81/08/09 19:08:25	eric	22	21	00000/00000/00003 put mailer definitions into configuration file  D 3.3	81/03/28 11:52:37	eric	21	20	00003/00001/00000 change format of Version to be suitable for internal use  D 3.2	81/03/20 09:45:43	eric	20	19	00001/00001/00000 change name (again); from postbox to sendmail  D 3.1	81/03/07 14:27:18	eric	19	18	00001/00001/00000 ----- delivermail ==> postbox -----  D 2.8	81/02/28 11:54:11	eric	18	17	00000/00000/00001 install VAX mpx file logging  D 2.7	81/02/05 08:01:25	eric	17	16	00000/00000/00001 always issued a delivermail error message regardless of M_QUIET  D 2.6	81/01/10 14:28:41	eric	16	15	00000/00000/00001 include ArpaLocal; flush output on errors; allow "user" "at" "host" as separate parameters; etc.  D 2.5	81/01/08 23:57:31	eric	15	14	00000/00000/00001 fixed botch in at => @ translation  D 2.4	81/01/08 19:37:22	eric	14	13	00000/00000/00001 fixed several bugs in parser; translate<lwsp> into quoted .  D 2.3	80/12/06 17:33:32	eric	13	12	00000/00000/00001 fix ^D botch in maketemp; allow "eric:eric,i.eric"  D 2.2	80/11/20 19:57:57	eric	12	11	00000/00000/00001 make dates be taken as date sent rather than date delivered  D 2.1	80/11/05 11:00:06	eric	11	10	00000/00000/00001 release 2  D 1.10	80/10/28 23:52:38	eric	10	9	00000/00000/00001 fixed ANOTHER bug in aliasing (this is getting dull....)  D 1.9	80/10/27 19:28:30	eric	9	8	00000/00000/00001 fix alias bug; count message sizes; map stderr->stdout; misc.  D 1.8	80/10/21 12:58:43	eric	8	7	00000/00000/00001 install dbm stuff + fix quoting bugs  D 1.7	80/10/18 16:48:51	eric	7	6	00000/00000/00001 cleanup for dbm stuff: Error => Errors; move local host detection into parse; misc cleanup  D 1.6	80/10/15 10:24:24	eric	6	5	00000/00000/00001 deal with disk overflows  D 1.5	80/10/11 20:10:44	eric	5	4	00000/00000/00001 fixed problem with sizeof MsgId == 0  D 1.4	80/10/11 18:55:35	eric	4	3	00000/00000/00001 cleanup to simplify distribution  D 1.3	80/10/11 13:49:55	eric	3	2	00000/00000/00001 accept multi-line fields in headers  D 1.2	80/10/11 13:37:53	eric	2	1	00000/00000/00001 test  D 1.1	80/10/11 13:34:43	eric	1	0	00001/00000/00000  code versions:  conf.o: 	conf.c	3.70		3/6/83 main.o: 	sendmail.h	3.117		3/7/83 	main.c	3.157		3/7/83 collect.o: 	collect.c	3.58		2/26/83 parseaddr.o: 	parseaddr.c	3.80		3/8/83 alias.o: 	alias.c	3.46		3/10/83	(with DBM) deliver.o: 	deliver.c	3.149		2/20/83 savemail.o: 	savemail.c	3.60		3/8/83 err.o: 	err.c	3.40		1/5/83 readcf.o: 	readcf.c	3.56		2/8/83 stab.o: 	stab.c	3.14		2/2/83 headers.o: 	headers.c	3.54		3/12/83 recipient.o: 	recipient.c	3.52		3/8/83 stats.o: 	stats.c	3.5		11/28/82 daemon.o: 	daemon.c	3.51		2/26/83	(with daemon mode) usersmtp.o: 	usersmtp.c	3.42		2/20/83 srvrsmtp.o: 	srvrsmtp.c	3.47		2/18/83 queue.o: 	queue.c	3.72		3/12/83 macro.o: 	macro.c	3.20		2/3/83 util.o: 	util.c	3.43		2/24/83 clock.o: 	clock.c	3.13		11/28/82 trace.o: 	trace.c	3.1		8/8/82 envelope.o: 	envelope.c	3.12		3/8/83 sysexits.o: 	sysexits.c	3.6		1/4/83 bmove.o: 	bmove.c	3.4		5/31/82 arpadate.o: 	arpadate.c	3.11		1/12/83 convtime.o: 	convtime.c	3.3		11/28/82  # endif COMMENT
end_unit

