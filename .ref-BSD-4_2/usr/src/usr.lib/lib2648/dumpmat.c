begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*	dumpmat.c	4.2	83/06/10	*/
end_comment

begin_include
include|#
directive|include
file|"bit.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|TRACE
end_ifdef

begin_comment
comment|/*  * dumpmat: debugging dumpmat of a window or other bit matrix.  * msg is a handy label, m is the matrix, rows, cols is the size of the matrix.  */
end_comment

begin_macro
name|dumpmat
argument_list|(
argument|msg
argument_list|,
argument|m
argument_list|,
argument|rows
argument_list|,
argument|cols
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|msg
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|bitmat
name|m
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|rows
decl_stmt|,
name|cols
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|int
name|r
decl_stmt|,
name|c
decl_stmt|;
name|int
name|r1
decl_stmt|,
name|r2
decl_stmt|,
name|c1
decl_stmt|,
name|c2
decl_stmt|;
if|if
condition|(
name|trace
operator|==
name|NULL
condition|)
return|return;
name|fprintf
argument_list|(
name|trace
argument_list|,
literal|"\ndumpmat %s, m=%x, rows=%d, cols=%d\n"
argument_list|,
name|msg
argument_list|,
name|m
argument_list|,
name|rows
argument_list|,
name|cols
argument_list|)
expr_stmt|;
name|minmax
argument_list|(
name|m
argument_list|,
name|rows
argument_list|,
name|cols
argument_list|,
operator|&
name|r1
argument_list|,
operator|&
name|c1
argument_list|,
operator|&
name|r2
argument_list|,
operator|&
name|c2
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|trace
argument_list|,
literal|"r1=%d, r2=%d, c1=%d, c2=%d\n"
argument_list|,
name|r1
argument_list|,
name|r2
argument_list|,
name|c1
argument_list|,
name|c2
argument_list|)
expr_stmt|;
for|for
control|(
name|r
operator|=
name|r1
init|;
name|r
operator|<=
name|r2
condition|;
name|r
operator|++
control|)
block|{
name|fprintf
argument_list|(
name|trace
argument_list|,
literal|"%2d "
argument_list|,
name|r
argument_list|)
expr_stmt|;
for|for
control|(
name|c
operator|=
name|c1
init|;
name|c
operator|<=
name|c2
condition|;
name|c
operator|++
control|)
name|fprintf
argument_list|(
name|trace
argument_list|,
literal|"%c"
argument_list|,
name|mat
argument_list|(
name|m
argument_list|,
name|rows
argument_list|,
name|cols
argument_list|,
name|r
argument_list|,
name|c
argument_list|,
literal|5
argument_list|)
condition|?
literal|'X'
else|:
literal|'.'
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|trace
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
name|fprintf
argument_list|(
name|trace
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
end_block

begin_endif
endif|#
directive|endif
end_endif

end_unit

