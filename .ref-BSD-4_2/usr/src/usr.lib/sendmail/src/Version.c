begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|SccsId
index|[]
init|=
literal|"@(#)SendMail version 4.12 of 9/7/83"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
endif|lint
end_endif

begin_decl_stmt
name|char
name|Version
index|[]
init|=
literal|"4.12"
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|COMMENT
end_ifdef

begin_expr_stmt
name|SCCS
operator|/
name|s
operator|.
name|version
operator|.
name|c
operator|:
name|D
literal|4.12
literal|83
operator|/
literal|09
operator|/
literal|07
literal|09
operator|:
literal|45
operator|:
literal|41
name|eric
literal|378
literal|377
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|Increase
name|timeout
end_expr_stmt

begin_for
for|for greeting message to five minutes
empty_stmt|;
end_for

begin_expr_stmt
name|remember
name|to
name|close
name|the
name|connection
name|properly
end_expr_stmt

begin_if
if|if we get a failure during connection establishment.  D 4.11	83/09/05 15:02:48	eric	377	376	00000/00000/00005 MRs:	 Fix security hole caused by being able to freeze the configuration without owning the .fc file.  D 4.10	83/09/05 14:33:54	eric	376	375	00000/00000/00005 MRs:	 Cut down the amount of bulk that is sent in SMTP error messages
operator|,
name|by
name|trying
name|to
name|log
name|only
name|real
name|errors
name|in
name|the
name|transcript
operator|.
expr|-
name|v
name|mode
name|is
name|unchanged
operator|.
name|D
literal|4.9
literal|83
operator|/
literal|08
operator|/
literal|31
literal|17
operator|:
literal|42
operator|:
literal|50
name|eric
literal|375
literal|374
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|fix
name|problem
name|with
name|timeouts
name|caused
name|by
name|change
name|in
name|EINTR
name|semantics
name|in
literal|4.2bsd
expr_stmt|;
end_if

begin_expr_stmt
name|add
name|a
name|two
name|minute
name|timeout
name|on
name|the
name|greeting
name|message
name|in
name|user
name|smtp
name|to
name|detect
name|hung
name|connections
name|D
literal|4.8
literal|83
operator|/
literal|08
operator|/
literal|28
literal|15
operator|:
literal|38
operator|:
literal|15
name|eric
literal|374
literal|373
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|set
name|FIOCLEX
name|on
operator|/
name|dev
operator|/
name|kmem
name|file
name|when
name|getting
name|load
name|average
name|D
literal|4.7
literal|83
operator|/
literal|08
operator|/
literal|28
literal|14
operator|:
literal|45
operator|:
literal|35
name|eric
literal|373
literal|372
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|Refuse
name|to
name|talk
name|to
name|yourself
argument_list|(
argument|i.e.
argument_list|,
argument|reject HELO packets with your own name
argument_list|)
operator|.
name|Add
name|two
name|thresholds
operator|--
name|option
literal|'x'
name|is
name|the
name|load
name|average
name|at
name|which
name|messages
name|are
name|queued
name|rather
name|than
name|delivered
argument_list|(
expr|default
literal|12
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|option
literal|'X'
name|is
name|the
name|load
name|average
name|at
name|which
name|incoming
name|TCP
name|connections
name|are
name|refused
argument_list|(
expr|default
literal|25
argument_list|)
operator|.
name|D
literal|4.6
literal|83
operator|/
literal|08
operator|/
literal|21
literal|15
operator|:
literal|40
operator|:
literal|13
name|eric
literal|372
literal|371
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|Drop
literal|"Sender:"
name|hack
operator|,
name|since
name|it
name|doesn
literal|'t work properly when relaying messages.  D 4.5	83/08/21 15:15:09	eric	371	370	00000/00000/00005 MRs:	 Insert a Sender: line if a From: line is specified and is different than what we would insert; don'
name|t
name|send
name|back
name|a
name|separate
name|error
name|message
end_expr_stmt

begin_if
if|if we have diagnosed an error in a RCPT command
empty_stmt|;
end_if

begin_expr_stmt
name|fix
name|a
operator|*
literal|0
name|problem
name|in
name|some
name|debug
name|code
operator|.
name|D
literal|4.4
literal|83
operator|/
literal|08
operator|/
literal|06
literal|10
operator|:
literal|37
operator|:
literal|57
name|eric
literal|370
literal|369
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|Clear
name|errno
name|before
name|trying
name|connect
name|in
name|an
name|attempt
name|to
name|track
name|down
name|EPERM
name|problems
operator|.
name|D
literal|4.3
literal|83
operator|/
literal|07
operator|/
literal|31
literal|10
operator|:
literal|46
operator|:
literal|22
name|eric
literal|369
literal|368
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
name|Add
name|EX_NOPERM
name|to
name|sysexits
operator|.
name|h
end_expr_stmt

begin_for
for|for kre  D 4.2	83/07/27 22:56:44	eric	368	367	00000/00000/00005 MRs:	 Don't uppercase hostname in myhostname so that it can be used as a UUCP name.  D 4.1	83/07/25 19:46:27	eric	367	366	00000/00000/00005 MRs:	 4.2 release version  D 3.347	83/07/13 10:38:17	eric	366	365	00000/00000/00005 MRs:	 Delete "load limiting" for SMTP connections (a bad ethernet board can hang up all incoming mail); use sfgets in collect (same reason); check for I/O error in collect (from Bill Nowicki); switch date format to RFC822 style.  D 3.346	83/06/14 11:05:18	eric	365	364	00000/00000/00005 MRs:	 log the message-id only if non-null  D 3.345	83/06/11 20:59:30	eric	364	363	00000/00000/00005 MRs:	 %d => %ld in mailq for PDP-11's  D 3.344	83/06/11 19:28:58	eric	363	362	00000/00000/00005 MRs:	045 MRs:	240 don't rearrange input header lines; force Received: lines to be at the beginning by always adding new header fields at the end of the header.  D 3.343	83/05/21 11:01:51	eric	362	361	00000/00000/00005 MRs:	 Miscellaneous changes for PDP-11's. Always send to a login name before a full name.  D 3.342	83/05/20 11:50:16	eric	361	360	00000/00000/00005 MRs:	238 MRs:	239 Don't stack processes when VRFY fails. Give an error message on multiple RCPT commands with a bad address.  D 3.341	83/05/18 11:57:09	eric	360	359	00000/00000/00005 MRs:	 Change WKTIMEFACT to be negative to force failing jobs to the end of the queue rather than to the beginning, giving better overall performance -- as noted by Jay Lepreau.  Also, clean up the format of the mailq output.  D 3.340	83/05/07 11:28:37	eric	359	358	00000/00000/00005 MRs:	237 Pass the size of the buffer to myhostname.  D 3.339	83/05/04 11:29:53	eric	358	357	00000/00000/00005 MRs:	235 fix botch in 3.338 -- arguments reversed  D 3.338	83/05/04 11:16:29	eric	357	356	00000/00000/00005 MRs:	235 Don't send domain-based UUCP addresses to UGLYUUCP hosts  D 3.337	83/05/01 14:27:55	eric	356	355	00000/00000/00005 MRs:	234 avoid core dumps on messages with very long header fields  D 3.336	83/04/30 15:14:51	eric	355	354	00000/00000/00005 MRs:	 lint  D 3.335	83/04/23 12:54:57	eric	354	353	00000/00000/00005 MRs:	230 Don't put Resent-*: lines in queue file to prevent outputing them inappropriately in the sent message.  D 3.334	83/04/19 19:20:44	eric	353	352	00000/00000/00005 MRs:	228 Fix bug causing convtime to loop forever on "w" (week) specification.  D 3.333	83/04/17 17:19:04	eric	352	351	00000/00000/00005 MRs:	199 MRs:	218 MRs:	221 MRs:	224 put true current time on SMTP greeting message; drop>From hack (this belongs in the mailer if needed); fix bogus errno problems (clear errno in many places); fix *(0) problems  D 3.332	83/03/26 14:26:43	eric	351	350	00000/00000/00005 MRs:	213 MRs:	214 MRs:	215 increase buffer size in smtpmessage to avoid overflows; rewrite again with ruleset three after appending from domain so that we can add the bracket punctuation; changes from MRH for USG UNIX 5.0  D 3.331	83/03/19 14:25:33	eric	350	349	00000/00000/00005 MRs:	211 Don't have mail from su'ed people come from "daemon"  D 3.330	83/03/19 13:14:27	eric	349	348	00000/00000/00005 MRs:	147 Fix botch of putting incorrect full names on some addresses (usually UNIX-to-UNIX Copy)  D 3.329	83/03/12 18:05:51	eric	348	347	00000/00000/00005 MRs:	196 take ECONNRESET (Connection reset by peer) as a temporary error during connection initiation.  D 3.328	83/03/12 17:41:55	eric	347	346	00000/00000/00005 MRs:	208 Check for I/O error on close of temp file -- i.e., last buffer flush  D 3.327	83/03/12 15:40:05	eric	346	345	00000/00000/00005 MRs:	207 Don't artifically add a "from: $q" when running the queue -- this seems to cause the from line in the qf file to be ignored.  D 3.326	83/03/10 00:48:02	eric	345	344	00000/00000/00005 MRs:	206 Delete colon on front of aliases  D 3.325	83/03/08 19:22:48	eric	344	343	00000/00000/00005 MRs:	205 Pass the delimiter character to parseaddr so that we can correctly decide between comma and space  D 3.324	83/03/07 09:55:13	eric	343	342	00000/00000/00005 MRs:	203 Don't pass EX_TEMPFAIL code out (since we have already taken responsibility for delivering the message anyway).  D 3.323	83/03/07 09:25:01	eric	342	341	00000/00000/00005 MRs:	202 Handle OLDSTYLE addresses properly with the -t flag; notice that tabs also delimit addresses (as well as spaces)  D 3.322	83/03/06 16:30:29	eric	341	340	00000/00000/00005 MRs:	201 Handle messages with "Resent-xxx:" header lines properly (basically mark the message as being resent); ignore incoming From: lines if their text exactly matches our machine-readable address exactly -- this causes the full name to be added when called from (e.g.) MH.  Both of these mode are to improve interaction with MH.  D 3.321	83/03/05 17:39:11	eric	340	339	00000/00000/00005 MRs:	200 Ignore delimiters (e.g., commas) inside quotes  D 3.320	83/02/26 15:32:31	eric	339	338	00000/00000/00005 MRs:	193 Don't log message-id mapping and from person in a queue run  D 3.319	83/02/26 15:06:05	eric	338	337	00000/00000/00005 MRs:	162 map host name for $w macro to upper case -- this is more conventional  D 3.318	83/02/26 11:51:43	eric	337	336	00000/00000/00005 MRs:	193 log queueid<=> message-id correspondence  D 3.317	83/02/25 21:20:20	eric	336	335	00000/00000/00005 MRs:	181 More attempts at insuring that everything goes through ruleset 4  D 3.316	83/02/24 20:03:04	eric	335	334	00000/00000/00005 MRs:	181 arrange to cleanup addresses using ruleset 4 before storing in ADDR struct  D 3.315	83/02/24 18:55:32	eric	334	333	00000/00000/00005 MRs:	162 MRs:	192 Fix bug in $w and $=w setup
empty_stmt|;
end_for

begin_expr_stmt
name|truncate
name|output
name|to
name|seven
name|bits
end_expr_stmt

begin_if
if|if the "limits" flag is set to insure that nothing can be sent that looks like TELNET protocol  D 3.314	83/02/20 12:29:15	eric	333	332	00000/00000/00005 MRs:	190 Avoid loops in the auto-closedown code  D 3.313	83/02/19 14:42:12	eric	332	331	00000/00000/00005 MRs:	188 Avoid core dumps on very long addresses in headers.  D 3.312	83/02/18 13:11:57	eric	331	330	00000/00000/00005 MRs:	183 Improve host verification -- put something in even if no HELO command given  D 3.311	83/02/18 12:44:13	eric	330	329	00000/00000/00005 MRs:	183 MRs:	185 MRs:	187 Add HELO hostname verification
empty_stmt|;
end_if

begin_expr_stmt
name|give
name|an
name|error
end_expr_stmt

begin_if
if|if a message terminates with EOF rather than dot in SMTP mode
empty_stmt|;
end_if

begin_expr_stmt
name|put
name|in
name|a
name|catch
end_expr_stmt

begin_for
for|for "Not owner" error on connect -- see if we can find anything funny.  D 3.310	83/02/13 16:23:03	eric	329	328	00000/00000/00005 MRs:	182 fix clrbitmap to really clear the entire bitmap  D 3.309	83/02/10 10:00:49	eric	328	327	00000/00000/00005 MRs:	176 avoid core dump on return receipt processing
empty_stmt|;
end_for

begin_expr_stmt
name|clean
name|up
end_expr_stmt

begin_return
return|return
name|receipt
name|message
operator|.
name|D
literal|3.308
literal|83
operator|/
literal|02
operator|/
literal|08
literal|10
operator|:
literal|50
operator|:
literal|24
name|eric
literal|327
literal|326
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|167
name|MRs
operator|:
literal|172
name|MRs
operator|:
literal|173
name|MRs
operator|:
literal|174
name|clean
name|up
name|problems
name|when
name|QUEUE
name|compile
name|flag
name|not
name|defined
return|;
end_return

begin_expr_stmt
name|clean
name|up
name|hostname
name|code
name|to
name|run
name|on
name|non
operator|-
literal|4.1c
name|systems
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|fix
name|use
name|of
operator|-
name|oeq
argument_list|(
argument|quiet on errors
argument_list|)
name|flag
operator|.
name|D
literal|3.307
literal|83
operator|/
literal|02
operator|/
literal|03
literal|10
operator|:
literal|46
operator|:
literal|02
name|eric
literal|326
literal|325
literal|00001
operator|/
literal|00001
operator|/
literal|00004
name|MRs
operator|:
literal|160
name|Change
name|version
name|stamp
name|to
name|have
name|no
name|date
argument_list|(
argument|so that it looks nice as $v/$V
argument_list|)
name|D
literal|3.306
literal|83
operator|/
literal|02
operator|/
literal|03
literal|10
operator|:
literal|29
operator|:
literal|15
name|eric
literal|325
literal|324
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|160
name|$e
name|macro
name|is
name|now
name|SMTP
name|entry
name|message
argument_list|(
argument|so that configuration version can be included
argument_list|)
operator|.
name|D
literal|3.305
literal|83
operator|/
literal|02
operator|/
literal|03
literal|07
operator|:
literal|54
operator|:
literal|10
name|eric
literal|324
literal|323
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|168
name|Make
name|mailer
name|size
name|limits
name|a
name|per
operator|-
name|mailer
name|parameter
argument_list|(
argument|M field in the mailer descriptor
argument_list|)
name|D
literal|3.304
literal|83
operator|/
literal|02
operator|/
literal|02
literal|12
operator|:
literal|53
operator|:
literal|10
name|eric
literal|323
literal|322
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|165
name|implement
name|classes
name|and
name|mailer
name|flags
name|as
name|a
name|bit
name|map
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|define
name|new
name|class
literal|'w'
name|as
name|the
name|set
name|of
name|all
name|hosts
name|we
name|are
name|known
name|by
name|D
literal|3.303
literal|83
operator|/
literal|02
operator|/
literal|01
literal|20
operator|:
literal|47
operator|:
literal|34
name|eric
literal|322
literal|321
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|166
name|don
literal|'t call printqueue() if queueing is turned off  D 3.302	83/01/18 20:38:09	eric	321	320	00000/00000/00005 MRs:	 pause() after reply error if 18.100 set -- so that Sam can try to track down the state of the connection in the CMU-CS-A problem.  D 3.301	83/01/17 21:41:42	eric	320	319	00000/00000/00005 MRs:	158 Set the $w macro to the hostname if at all possible to allow generic configuration tables.  D 3.300	83/01/17 12:31:10	eric	319	318	00000/00000/00005 MRs:	155 fix bug that caused "\r\n" string in TCP mailer definition to turn into something else -- causing all TCP connections to hang.  D 3.299	83/01/17 09:32:18	eric	318	317	00000/00000/00005 MRs:	154 define a newline in "nullmailer" so that queue files get written with newlines between the "H" lines.  D 3.298	83/01/16 22:08:47	eric	317	316	00000/00000/00005 MRs:	 put in socket debugging on a debug flag to help Sam find the CMU-CS-A problem -- this probably won'
name|t
name|work
name|with
name|early
literal|4.1c
name|systems
operator|.
name|D
literal|3.297
literal|83
operator|/
literal|01
operator|/
literal|16
literal|17
operator|:
literal|24
operator|:
literal|29
name|eric
literal|316
literal|315
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|153
name|make
name|the
name|maximum
name|number
name|of
name|simultaneous
name|SMTP
name|connections
name|an
name|option
name|D
literal|3.296
literal|83
operator|/
literal|01
operator|/
literal|16
literal|13
operator|:
literal|14
operator|:
literal|04
name|eric
literal|315
literal|314
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|152
name|Change
name|mailer
name|spec
name|to
name|have
name|labelled
name|fields
end_expr_stmt

begin_for
for|for future expansion. **** This delta invalidates previous configuration files ****  D 3.295	83/01/15 17:40:49	eric	314	313	00000/00000/00005 MRs:	149 be sure everything gets appropriately externalized
empty_stmt|;
end_for

begin_decl_stmt
name|canonname
name|goes
name|away
decl_stmt|,
name|since
name|everything
name|is
name|now
name|done
name|by
name|remotename
name|D
decl|3.294	83/01/12 08
range|:
literal|56
operator|:
literal|51
name|eric
literal|313
literal|312
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|144
name|fix
name|date
name|format
name|to
name|be
name|truly
name|RFC822
name|D
literal|3.293
literal|83
operator|/
literal|01
operator|/
literal|09
literal|15
operator|:
literal|43
operator|:
literal|11
name|eric
literal|312
literal|311
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|139
name|fix
name|CRLF
name|problem
name|when
name|sending
name|SMTP
name|commands
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|make
name|newstr
argument_list|()
name|and
name|crlf
argument_list|()
name|into
name|macros
name|D
literal|3.292
literal|83
operator|/
literal|01
operator|/
literal|08
literal|19
operator|:
literal|54
operator|:
literal|37
name|eric
literal|311
literal|310
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|143
name|release
name|daemon
name|resources
name|when
name|running
name|the
name|queue
name|D
literal|3.291
literal|83
operator|/
literal|01
operator|/
literal|08
literal|13
operator|:
literal|49
operator|:
literal|08
name|eric
literal|310
literal|309
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|142
name|be
name|sure
name|to
name|open
name|a
name|new
name|transcript
name|on
name|every
name|queue
name|run
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|when
name|returning
name|an
name|SMTP
name|transcript
decl_stmt|,
name|only
name|send
name|the
name|last
name|half
argument_list|(
name|i
operator|.
name|e
operator|.
expr|,
name|that
name|part
name|which
name|describes
name|the
name|sending
name|half
argument_list|)
decl|.
name|D
decl|3.290	83/01/06 18
range|:
literal|21
operator|:
literal|54
name|eric
literal|309
literal|308
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|141
name|allow
name|user
operator|-
name|setable
name|error
name|codes
name|in
literal|"error"
name|mailer
name|D
literal|3.289
literal|83
operator|/
literal|01
operator|/
literal|06
literal|18
operator|:
literal|09
operator|:
literal|01
name|eric
literal|308
literal|307
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|140
name|fix
name|a
name|botch
name|in
name|argument
name|processing
name|such
name|that
name|it
name|used
name|the
name|last
name|flag
name|as
name|a
name|recipient
end_decl_stmt

begin_if
if|if there were no other recipients
condition|(
name|e
operator|.
name|g
operator|.
expr|,
name|with
literal|"-t"
condition|)
name|D
literal|3.288
literal|83
operator|/
literal|01
operator|/
literal|06
literal|12
operator|:
literal|05
operator|:
literal|54
name|eric
literal|307
literal|306
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|132
name|fix
argument_list|(
argument|one more time!
argument_list|)
name|long
name|line
name|wrapping
operator|...
operator|..
name|D
literal|3.287
literal|83
operator|/
literal|01
operator|/
literal|06
literal|10
operator|:
literal|46
operator|:
literal|17
name|eric
literal|306
literal|305
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|139
name|split
name|up
name|FULLSMTP
name|flag
operator|--
name|now
name|have
literal|"X"
operator|(
name|M_XDOT
operator|,
name|use
name|hidden
name|dot
name|algorithm
operator|)
operator|,
literal|"p"
operator|(
name|M_FROMPATH
operator|,
name|use
name|reverse
operator|-
name|path
name|in
name|MAIL
name|FROM
operator|:
operator|<
operator|>
name|command
operator|)
operator|,
name|and
literal|"L"
operator|(
name|M_LIMITS
operator|,
name|enforce
name|SMTP
name|line
name|limits
operator|)
operator|.
name|I
name|would
name|like
name|to
name|change
name|the
name|format
name|of
name|the
name|mail
name|defn
name|one
name|more
name|time
name|to
name|make
name|named
name|fields
name|so
name|that
name|it
name|would
name|be
name|more
name|extensible
operator|.
name|D
literal|3.286
literal|83
operator|/
literal|01
operator|/
literal|05
literal|20
operator|:
literal|30
operator|:
literal|10
name|eric
literal|305
literal|304
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|132
name|fix
name|folded
name|line
name|output
name|D
literal|3.285
literal|83
operator|/
literal|01
operator|/
literal|05
literal|17
operator|:
literal|57
operator|:
literal|11
name|eric
literal|304
literal|303
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|138
name|curiouser
name|and
name|curiouser
operator|...
operator|..
name|a
name|read
name|error
name|on
name|the
name|reply
name|from
name|a
name|QUIT
name|will
name|cause
name|another
name|QUIT
name|command
operator|,
name|and
name|thus
name|an
name|fclose
argument_list|(
name|NULL
argument_list|)
operator|.
name|Some
name|sites
name|seem
name|to
name|be
name|sending
name|a
literal|421
name|Shutting
name|down
name|and
name|then
name|closing
name|without
name|waiting
end_if

begin_for
for|for the QUIT
operator|,
name|so
name|this
name|happens
operator|...
operator|.
name|D
literal|3.284
literal|83
operator|/
literal|01
operator|/
literal|05
literal|10
operator|:
literal|19
operator|:
literal|04
name|eric
literal|303
literal|302
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|138
name|improve
name|error
name|recovery
end_for

begin_for
for|for bizarre SMTP cases
empty_stmt|;
end_for

begin_decl_stmt
name|unfortunately
name|CMU
name|has
name|decided
name|to
name|start
name|working
name|again
decl_stmt|,
name|so
name|the
name|strangest
name|parts
name|are
name|untested
operator|.
name|D
decl|3.283	83/01/04 19
range|:
literal|53
operator|:
literal|55
name|eric
literal|302
literal|301
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|137
name|externalize
name|$g
name|macro
name|using
name|ruleset
literal|4
name|also
name|D
literal|3.282
literal|83
operator|/
literal|01
operator|/
literal|04
literal|18
operator|:
literal|52
operator|:
literal|08
name|eric
literal|301
literal|300
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|136
name|Don
literal|'t try to drop our controlling TTY except when we are starting up a daemon; this can cause UUCP jobs to hang waiting for carrier on a dialin line (completely contrary to the intent).  Many thanks to Keith Sklower for pointing this one out.  However, that damned parameter to disconnect() has reappeared!  D 3.281	83/01/04 17:45:25	eric	300	299	00000/00000/00005 MRs:	135 Ignore SIGPIPE early (in main rather than in deliver) so that rude hosts that close the connection early don'
name|t
name|cause
name|us
name|to
name|die
operator|--
name|in
name|particular
decl_stmt|,
name|CMU
decl|-
name|CS
decl|-
name|A
argument_list|(
name|nee
name|CMU
operator|-
literal|10A
argument_list|)
name|was
name|doing
name|this
name|after
name|the
name|DATA
name|command
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|the
name|problem
name|went
name|away
name|quite
name|mysteriously
decl_stmt|,
name|so
name|I
name|have
name|no
name|idea
name|why
name|it
name|happened
name|D
decl|3.280	83/01/04 13
range|:
literal|10
operator|:
literal|35
name|eric
literal|299
literal|298
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|129
name|MRs
operator|:
literal|134
name|take
name|EHOSTDOWN
name|as
name|a
name|temporary
name|failure
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|change
name|the
name|format
name|of
literal|"deferred"
name|message
name|to
name|be
name|consistent
name|with
name|other
name|messages
operator|.
name|D
literal|3.279
literal|83
operator|/
literal|01
operator|/
literal|04
literal|10
operator|:
literal|58
operator|:
literal|55
name|eric
literal|298
literal|297
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|133
name|fix
name|botch
name|that
name|causes
name|sendmail
name|to
name|core
name|dump
name|when
name|there
name|are
name|large
name|numbers
name|of
name|requests
name|D
literal|3.278
literal|83
operator|/
literal|01
operator|/
literal|04
literal|10
operator|:
literal|04
operator|:
literal|41
name|eric
literal|297
literal|296
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|132
name|Detect
name|an
name|internal
name|error
name|that
name|seems
name|to
name|be
name|occuring
name|D
literal|3.277
literal|83
operator|/
literal|01
operator|/
literal|03
literal|18
operator|:
literal|01
operator|:
literal|33
name|eric
literal|296
literal|295
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|129
name|give
name|more
name|useful
name|error
name|messages
argument_list|(
argument|including the errno that caused a temporary failure
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|reflect
name|these
name|messages
name|out
name|to
name|mailq
name|D
literal|3.276
literal|83
operator|/
literal|01
operator|/
literal|03
literal|14
operator|:
literal|02
operator|:
literal|28
name|eric
literal|295
literal|294
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|137
name|have
name|canonname
name|pass
name|the
name|address
name|through
name|ruleset
name|four
name|also
name|D
literal|3.275
literal|83
operator|/
literal|01
operator|/
literal|03
literal|13
operator|:
literal|44
operator|:
literal|39
name|eric
literal|294
literal|293
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|131
name|take
name|ENETUNREACH
argument_list|(
argument|Network unreachable
argument_list|)
name|as
name|a
name|transient
name|error
operator|--
name|this
name|probably
name|isn
literal|'t usually right, but it seem safer in the long run....  D 3.274	83/01/03 13:19:37	eric	293	292	00000/00000/00005 MRs:	129 print "request" instead of "requests" if there is only one request  D 3.273	83/01/03 13:03:01	eric	292	291	00000/00000/00005 MRs:	130 fix bug in commaize so that it won'
name|t
name|core
name|dump
name|on
name|every
name|message
argument_list|(
name|sigh
argument_list|)
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|process
name|timeouts
name|like
name|normal
name|errors
name|so
name|that
name|they
name|will
name|get
name|delivered
name|to
name|the
name|correct
name|address
argument_list|(
name|i
operator|.
name|e
operator|.
expr|,
name|the
name|Errors
operator|-
name|To
operator|:
name|address
argument_list|)
decl|.
name|D
decl|3.272	83/01/03 11
range|:
literal|28
operator|:
literal|04
name|eric
literal|291
literal|290
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|129
name|fix
name|botch
name|in
name|reading
name|the
name|queue
name|that
name|caused
name|it
name|to
name|throw
name|away
name|the
name|last
name|entry
name|it
name|read
operator|--
name|this
name|was
name|particulary
name|obvious
name|with
name|only
name|one
name|entry
name|in
name|the
name|queue
operator|.
name|D
literal|3.271
literal|83
operator|/
literal|01
operator|/
literal|02
literal|15
operator|:
literal|33
operator|:
literal|36
name|eric
literal|290
literal|289
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|124
name|Take
name|errno
literal|65
decl_stmt|, "Host is unreachable",
name|to
name|be
name|a
name|recoverable
name|error
name|D
decl|3.270	83/01/02 14
range|:
literal|27
operator|:
literal|32
name|eric
literal|289
literal|288
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|129
name|clean
name|up
name|output
name|of
name|mailq
name|mode
name|D
literal|3.269
literal|83
operator|/
literal|01
operator|/
literal|01
literal|21
operator|:
literal|25
operator|:
literal|35
name|eric
literal|288
literal|287
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|123
name|Put
name|CRLF
name|on
name|all
name|lines
name|in
name|user
name|SMTP
operator|.
name|Pass
name|this
name|info
name|down
name|to
name|innumerable
name|routines
operator|.
name|D
literal|3.268
literal|83
operator|/
literal|01
operator|/
literal|01
literal|18
operator|:
literal|14
operator|:
literal|56
name|eric
literal|287
literal|286
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|122
name|Use
name|a
name|more
name|resilient
name|algorithm
name|to
name|handle
name|the
name|special
end_decl_stmt

begin_case
case|case
name|of
name|an
name|SMTP
name|connection
name|that
name|is
name|going
name|down
name|spontaneously
argument_list|(
argument|with a
literal|421
argument|reply code
argument_list|)
name|D
literal|3.267
literal|83
operator|/
literal|01
operator|/
literal|01
literal|16
case|:
end_case

begin_expr_stmt
literal|02
operator|:
literal|43
name|eric
literal|286
literal|285
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|128
name|tag
name|syserr
literal|'s specially in the log so they can be grep'
name|ed
name|out
name|easily
name|D
literal|3.266
literal|82
operator|/
literal|12
operator|/
literal|30
literal|17
operator|:
literal|30
operator|:
literal|57
name|eric
literal|285
literal|284
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|114
name|don
literal|'t bother timing out on *.cf and qf* file reads -- they are really very vanilla  D 3.265	82/12/30 16:57:13	eric	284	283	00000/00000/00005 MRs:	113 close files 3 through 20 before startup to insure sufficient resources  D 3.264	82/12/29 17:39:27	eric	283	282	00000/00000/00005 MRs:	112 don'
name|t
name|htons
argument_list|(
argument|sp->s_port
argument_list|)
name|in
name|makeconnection
name|D
literal|3.263
literal|82
operator|/
literal|12
operator|/
literal|24
literal|08
operator|:
literal|14
operator|:
literal|55
name|eric
literal|282
literal|281
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|108
name|Change
name|parse
name|to
name|parseaddr
end_expr_stmt

begin_for
for|for BB&N TCP/IP implementation
empty_stmt|;
end_for

begin_expr_stmt
name|clean
name|up
name|comments
name|in
name|daemon
operator|.
name|c
name|to
name|simplify
name|the
name|poor
name|alternate
name|protocol
name|type
operator|.
name|D
literal|3.262
literal|82
operator|/
literal|12
operator|/
literal|14
literal|19
operator|:
literal|23
operator|:
literal|23
name|eric
literal|281
literal|280
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|106
name|fix
name|freeze
name|mode
name|to
end_expr_stmt

begin_do
do|do
name|something
name|more
name|interesting
name|that
name|refreezing
argument_list|(
name|over
name|and
name|over
name|and
name|over
name|and
operator|...
operator|...
operator|.
argument_list|)
name|D
decl|3.261	82/12/14 16
range|:
literal|57
operator|:
literal|16
name|eric
literal|280
literal|279
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|105
name|Add
literal|"print mail queue"
name|mode
argument_list|(
argument|-bp flag or call as
literal|"mailq"
argument_list|)
name|D
literal|3.260
literal|82
operator|/
literal|12
operator|/
literal|13
literal|18
operator|:
literal|25
operator|:
literal|22
name|eric
literal|279
literal|278
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|085
name|The
name|routine
literal|"sendto"
name|is
name|now
name|a
name|system
name|call
argument_list|(
name|yeuch
operator|!
argument_list|)
decl_stmt|;
do|change our sendto to "sendtolist"  D 3.259	82/12/13 17:47:27	eric	278	277	00000/00000/00005 MRs:	085 NEW-IPC: convert to 4.1c  D 3.258	82/12/09 19:18:32	eric	277	276	00000/00000/00005 MRs:	036 MRs:	053 MRs:	064 Fix a bug triggered when we add the sender's "@domain" to an address in the message body that is missing a domain -- we forgot to null terminate the list.  D 3.257	82/12/09 11:19:09	eric	276	275	00000/00000/00005 MRs:	081 MRs:	095 MRs:	103 log read timeouts as syserrs; be able to match the inverse of a class using the $~x syntax; don't add a full name during network forward operations  D 3.256	82/12/05 13:46:29	eric	275	274	00000/00000/00005 MRs:	092 Clear the envelope in the child in server SMTP to insure that our oh so helpful parent doesn't delete our transcript; move the transcript and temporary file pointers into the envelope; pass the envelope to other routines in the holy war against global variables; split off envelope routines from main.c to envelope.c  D 3.255	82/11/28 16:00:50	eric	274	273	00000/00000/00005 MRs:	 implement SMTP auto-shutdown on 421 codes; clean up some error processing items, particularly in SMTP; don't reinstantiate error message bodies after queueing; other minor changes.  This is all cleanup from 3.253.  D 3.254	82/11/28 10:22:20	eric	273	272	00000/00000/00005 MRs:	 fix a number of problems left over from yesterday's delta.  The big triumph is being able to delete the parameter from disconnect().  D 3.253	82/11/28 00:22:21	eric	272	271	00000/00000/00005 MRs:	 Many changes resulting from a complete code readthrough.  Most of these fix minor bugs or change the internal structure for clarity, etc.  There should be almost no externally visible changes (other than some cleaner error message printouts and the like).  D 3.252	82/11/24 18:44:28	eric	271	270	00000/00000/00005 MRs:	 lint it  D 3.251	82/11/24 17:15:30	eric	270	269	00000/00000/00005 MRs:	026 run SMTP jobs in a subprocess so that multiple jobs will work.  This delta also changes the envelope data structure so that flags are in a bit map, and adjusts some of the semantics.  The transcript is now local to an envelope.  A bunch of old code is deleted.  A serious bug was fixed in the "run in background" code.  Etc., etc.  D 3.250	82/11/21 17:19:05	eric	269	268	00000/00000/00005 MRs:	026 preliminary hacks for multiple SMTP transactions per connection: make assignment of multiple queue id's more efficient
operator|,
do|make prefixes two characters (e.g.
operator|,
do|qfAA99999
end_do

begin_operator
unit|)
operator|,
end_operator

begin_decl_stmt
name|pass
name|the
name|file
name|name
name|to
name|freeze
name|and
name|thaw
decl_stmt|,
name|add
name|a
name|mailer
name|flag
name|saying
name|we
name|are
name|talking
name|to
name|one
name|of
name|our
name|own
name|kind
operator|.
name|D
decl|3.249	82/11/20 12
range|:
literal|43
operator|:
literal|29
name|eric
literal|268
literal|267
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|083
name|Accept
name|user
expr|@
index|[
name|net
operator|.
name|host
operator|.
name|logical
operator|.
name|imp
index|]
name|syntax
name|D
literal|3.248
literal|82
operator|/
literal|11
operator|/
literal|18
literal|21
operator|:
literal|33
operator|:
literal|38
name|eric
literal|267
literal|266
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|080
name|Correctly
name|run
literal|"sendmail -q"
operator|(
name|had
name|a
name|reversed
name|condition
name|on
name|QueueIntvl
operator|)
name|D
literal|3.247
literal|82
operator|/
literal|11
operator|/
literal|18
literal|17
operator|:
literal|54
operator|:
literal|23
name|eric
literal|266
literal|265
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|079
name|Fix
name|bug
name|causing
name|loops
name|in
name|sendto
end_decl_stmt

begin_if
if|if there are scanner errors in addresses  D 3.246	82/11/18 08:56:27	eric	265	264	00000/00000/00005 MRs:	060 MRs:	073 disconnect input
operator|,
name|output
operator|,
name|signals
operator|,
name|etc
operator|.
name|when
name|running
name|in
name|background
name|D
literal|3.245
literal|82
operator|/
literal|11
operator|/
literal|17
literal|09
operator|:
literal|36
operator|:
literal|47
name|eric
literal|264
literal|263
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|060
name|split
name|operation
name|mode
argument_list|(
literal|"-bx"
argument|flag
argument_list|)
name|and
name|delivery
name|mode
argument_list|(
literal|"d"
argument|option
argument_list|)
name|so
name|that
name|operation
name|mode
name|can
name|apply
name|to
name|SMTP
operator|/
name|daemon
name|connections
name|also
operator|.
name|D
literal|3.244
literal|82
operator|/
literal|11
operator|/
literal|14
literal|15
operator|:
literal|34
operator|:
literal|59
name|eric
literal|263
literal|262
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|075
name|Explicitly
name|inherit
name|e_oldstyle
name|from
name|BlankEnvelope
name|to
name|MainEnvelope
name|D
literal|3.243
literal|82
operator|/
literal|11
operator|/
literal|14
literal|15
operator|:
literal|14
operator|:
literal|00
name|eric
literal|262
literal|261
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|074
name|fix
name|quote
name|processing
name|on
name|program
name|mailers
name|D
literal|3.242
literal|82
operator|/
literal|11
operator|/
literal|14
literal|12
operator|:
literal|26
operator|:
literal|17
name|eric
literal|261
literal|260
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|072
name|Don
literal|'t give an error message on unknown options  D 3.241	82/11/13 18:07:59	eric	260	259	00000/00000/00005 MRs:	021 MRs:	066 MRs:	069 MRs:	069 MRs:	070 MRs:	071 Clean up argument structure (-I=>-bi, -Z=>-bz).  Add -bp stub to someday print queue.  Move compile conf into conf.h (still some stuff in the Makefile).  Assume -bp if called as "mailq" and -bi if called as "newaliases".  Drop old directory hack -- send out compat code instead. Don'
name|t
name|rebuild
name|the
name|alias
name|file
name|automatically
name|unless
name|the
name|D
name|option
name|is
name|set
operator|.
name|Clean
name|up
name|compilation
name|flags
operator|.
name|D
literal|3.240
literal|82
operator|/
literal|11
operator|/
literal|07
literal|16
operator|:
literal|14
operator|:
literal|44
name|eric
literal|259
literal|258
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|041
name|make
name|all
name|mailer
name|output
name|go
name|to
name|the
name|transcript
end_if

begin_if
if|if running server smtp
empty_stmt|;
end_if

begin_expr_stmt
name|this
name|has
name|the
name|effect
name|of
name|making
name|some
name|significant
name|changes
name|in
name|the
name|output
name|structure
name|to
name|handle
name|such
name|things
name|as
operator|-
name|em
name|and
operator|-
name|as
name|together
name|D
literal|3.239
literal|82
operator|/
literal|11
operator|/
literal|07
literal|15
operator|:
literal|31
operator|:
literal|50
name|eric
literal|258
literal|257
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|063
name|don
literal|'t flag errors in setting dangerous options when -C is used  D 3.238	82/11/05 13:12:52	eric	257	256	00000/00000/00005 MRs:	062 arrange to freeze the configuration file for quick startup -- this technique requires reprocessing the argv so that flag settings don'
name|t
name|get
name|lost
operator|,
name|and
name|is
name|really
name|rather
name|of
name|a
name|hack
operator|.
name|D
literal|3.237
literal|82
operator|/
literal|11
operator|/
literal|04
literal|15
operator|:
literal|22
operator|:
literal|16
name|eric
literal|256
literal|255
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|019
name|don
literal|'t unlink qf& df files on ^C  D 3.236	82/11/04 13:27:28	eric	255	254	00000/00000/00005 MRs:	037 put header conditionals into the .cf file  D 3.235	82/11/03 11:18:06	eric	254	253	00000/00000/00005 MRs:	059 don'
name|t
name|strip
name|quotes
name|off
name|of
name|addresses
name|during
name|prescan
name|D
literal|3.234
literal|82
operator|/
literal|11
operator|/
literal|03
literal|10
operator|:
literal|34
operator|:
literal|13
name|eric
literal|253
literal|252
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|058
name|Put
name|the
name|temporary
name|file
name|mode
name|on
name|the
name|F
name|option
name|D
literal|3.233
literal|82
operator|/
literal|11
operator|/
literal|03
literal|09
operator|:
literal|49
operator|:
literal|15
name|eric
literal|252
literal|251
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|049
name|Arrange
name|to
name|strip
name|quote
name|bits
name|in
name|message
name|header
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|move
name|SPACESUB
name|into
name|conf
operator|.
name|c
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|change
name|SpaceSub
name|to
name|unquoted
name|dot
name|D
literal|3.232
literal|82
operator|/
literal|11
operator|/
literal|03
literal|09
operator|:
literal|00
operator|:
literal|33
name|eric
literal|251
literal|250
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|056
name|Arrange
end_expr_stmt

begin_for
for|for queue.c to aapt to systems w/o new directory code  D 3.231	82/10/31 13:47:06	eric	250	249	00000/00000/00005 MRs:	032 MRs:	051 Call ruleset 4 after doing per-mailer translation to convert from internal to external form.  D 3.230	82/10/28 17:41:15	eric	249	248	00000/00000/00005 MRs:	039 MRs:	027 Put the "@:@" trick on the "a" option.  Also
operator|,
name|move
name|TrustedUsers
name|into
name|sendmail
operator|.
name|h
argument_list|(
name|it
name|should
name|have
name|gone
name|here
name|in
name|the
name|first
name|place
operator|!
argument_list|)
name|D
decl|3.229	82/10/27 20
range|:
literal|43
operator|:
literal|35
name|eric
literal|248
literal|247
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|044
name|strip
name|out
name|bcc
operator|:
name|and
name|resent
operator|-
name|bcc
operator|:
name|always
name|D
literal|3.228
literal|82
operator|/
literal|10
operator|/
literal|25
literal|08
operator|:
literal|30
operator|:
literal|12
name|eric
literal|247
literal|246
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|040
name|Don
literal|'t send closing protocol to SMTP if you haven'
name|t
name|opened
name|the
name|connection
decl_stmt|;
end_for

begin_expr_stmt
name|this
name|happens
end_expr_stmt

begin_if
if|if checkcompat fails on the only recipient.  D 3.227	82/10/22 09:02:44	eric	246	245	00000/00000/00005 MRs:	023 part of a heuristic hill climbing algorithm to minimize the number of IPC bugs that come crawling over me.  D 3.226	82/10/16 15:24:52	eric	245	244	00000/00000/00005 MRs:	027 Put list of login names able to use -f in the .cf file.  D 3.225	82/10/16 14:43:47	eric	244	243	00000/00000/00005 MRs:	007 Arrange for a wizards password
condition|(
name|the
name|W
name|option
condition|)
operator|.
name|The
name|SMTP
name|KILL
name|command
name|may
name|only
name|be
name|issued
end_if

begin_if
if|if this option is set.  This delta adds the "WIZ" command
operator|,
name|and
name|changes
name|_KILL
init|=
operator|>
name|KILL
decl_stmt|,
name|_DEBUG
init|=
operator|>
name|DEBUG
decl_stmt|,
name|_VERBOSE
init|=
operator|>
name|VERB
decl_stmt|,
name|and
name|_SHOWQ
init|=
operator|>
name|SHOWQ
operator|.
name|D
literal|3.224
literal|82
operator|/
literal|10
operator|/
literal|16
literal|13
operator|:
literal|43
operator|:
literal|28
name|eric
literal|243
literal|242
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|024
name|Fix
name|debug
name|statement
name|in
name|sendall
name|D
literal|3.223
literal|82
operator|/
literal|10
operator|/
literal|16
literal|13
operator|:
literal|22
operator|:
literal|22
name|eric
literal|242
literal|241
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|010
name|Arrange
end_if

begin_for
for|for MD_FORK to work well with -v so that we can use it as the default.  This was really a separate bug
operator|,
name|but
name|I
name|have
name|just
name|lumped
name|it
name|in
name|here
operator|--
name|the
name|problem
name|came
name|up
name|with
name|stty
name|tostop
operator|.
name|D
literal|3.222
literal|82
operator|/
literal|10
operator|/
literal|13
literal|21
operator|:
literal|55
operator|:
literal|07
name|eric
literal|241
literal|240
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|023
name|Don
literal|'t interrupt the process doing accepts (have a separate process running the queue) to avoid a large pile of 4.1[abc] bugs.  When something more stable comes out, I will change this.  D 3.221	82/10/13 18:43:28	eric	240	239	00000/00000/00005 MRs:	022 Don'
name|t
name|interpret
operator|<
operator|,
operator|>
operator|,
operator|(
operator|,
name|or
operator|)
end_for

begin_while
while|while in QST
condition|(
name|quote
name|state
condition|)
name|during
name|prescan
name|D
literal|3.220
literal|82
operator|/
literal|10
operator|/
literal|11
literal|09
operator|:
literal|51
operator|:
literal|43
name|eric
literal|239
literal|238
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|016
name|have
name|auto
operator|-
name|queueups
name|print
name|a
name|polite
name|message
name|in
name|the
name|log
argument_list|(
argument|rather than an obnoxious
literal|"Temporary Failure"
argument_list|)
operator|.
name|Adds
name|a
name|new
name|routine
literal|"logdelivery"
operator|.
name|D
literal|3.219
literal|82
operator|/
literal|10
operator|/
literal|09
literal|21
operator|:
literal|02
operator|:
literal|27
name|eric
literal|238
literal|237
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|005
name|force
name|a
name|queuename
name|in
name|returntosender
name|to
name|insure
name|that
name|everyone
name|has
name|a
name|queue
name|name
operator|.
name|D
literal|3.218
literal|82
operator|/
literal|10
operator|/
literal|09
literal|20
operator|:
literal|27
operator|:
literal|42
name|eric
literal|237
literal|236
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|003
name|Lock
name|out
name|interrupts
name|during
name|alias
name|rebuild
expr_stmt|;
end_while

begin_expr_stmt
name|add
name|an
name|alias
literal|"@:@"
name|after
name|rebuild
name|that
name|we
name|can
name|check
end_expr_stmt

begin_for
for|for to insure that the alias file is up to date.  Times out after five minutes
control|(
name|is
name|this
name|reasonable
name|on
name|ucbvax
condition|?
control|)
name|and
name|forces
name|a
name|rebuild
operator|.
name|It
name|shouldn
literal|'t matter in the long run if two people rebuild, so I think this is the right thing to do.  D 3.217	82/10/09 19:06:31	eric	236	235	00000/00000/00005 MRs:	002 Handle Reverse-Path in some reasonable way.  You must put the '
name|X
literal|' flag (M_FULLSMTP) in the local mailer'
name|s
name|flags
name|to
name|get
name|this
name|line
operator|.
name|D
literal|3.216
literal|82
operator|/
literal|10
operator|/
literal|09
literal|18
operator|:
literal|11
operator|:
literal|21
name|eric
literal|235
literal|234
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|013
name|print
name|a
name|status
name|indication
name|when
name|a
name|message
name|is
name|autoqueued
operator|,
name|either
name|from
name|a
operator|-
name|bq
name|flag
name|or
name|a
name|NoConnect
name|D
literal|3.215
literal|82
operator|/
literal|10
operator|/
literal|09
literal|17
operator|:
literal|22
operator|:
literal|35
name|eric
literal|234
literal|233
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|008
name|Force
operator|-
name|v
name|override
name|of
name|deferred
name|connect
name|D
literal|3.214
literal|82
operator|/
literal|10
operator|/
literal|09
literal|17
operator|:
literal|10
operator|:
literal|37
name|eric
literal|233
literal|232
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|004
name|Only
name|put
name|the
literal|"from"
name|person
name|on
name|the
name|error
name|queue
end_for

begin_if
if|if an error actually occured -- prevents many "duplicate supressed" messages
operator|,
name|etc
operator|.
name|D
literal|3.213
literal|82
operator|/
literal|10
operator|/
literal|09
literal|09
operator|:
literal|05
operator|:
literal|35
name|eric
literal|232
literal|231
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|MRs
operator|:
literal|001
name|implement
name|an
name|experimental
name|forward
operator|-
name|path
name|algorithm
name|by
name|stripping
name|off
name|a
name|leading
literal|"@..."
name|component
name|and
name|dropping
name|it
name|on
name|the
name|end
operator|.
name|D
literal|3.212
literal|82
operator|/
literal|10
operator|/
literal|07
literal|08
operator|:
literal|52
operator|:
literal|47
name|eric
literal|231
literal|230
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|try
name|to
name|come
name|up
name|with
name|a
name|workaround
name|on
name|some
name|of
name|the
name|IPC
name|problems
name|relating
name|to
name|interrupted
name|accepts
operator|--
name|all
name|this
name|can
name|go
name|when
name|everyone
name|at
name|Berkeley
name|runs
name|unflakey
name|IPC
operator|.
name|Also
operator|,
name|never
name|use
name|ruleset
name|three
name|alone
operator|--
name|involves
name|changing
name|canonname
name|again
operator|.
name|Probably
name|shouldn
literal|'t do an auto-call of ruleset three now.  D 3.211	82/10/07 01:40:19	eric	230	229	00000/00000/00005 bother.... it takes time to close a socket  D 3.210	82/10/07 00:09:14	eric	229	228	00000/00000/00005 allow passing through multiple rewriting sets in test mode;<ndir.h> =><dir.h> for maximum portability  D 3.209	82/10/06 11:45:40	eric	228	227	00000/00000/00005 add test mode (MD_TEST, -bt)  D 3.208	82/09/30 22:29:46	eric	227	226	00000/00000/00005 workaround in daemon accept code for 4.1a kernel bug: if an accept gets an EINTR and then a valid accept before the interrupt returns, the connection will be lost forever (at least, as I understand it).  D 3.207	82/09/26 17:04:24	eric	226	225	00000/00000/00005 Put more configuration into setoption; merge some of the argv processing with this; move configuration information out of conf.c into the .cf file.  Since a lot of stuff will default to zero, a new .cf file is required.  D 3.206	82/09/26 14:45:52	eric	225	224	00000/00000/00005 completely instantiate queue files for all mail, even if not needed; fix a bug that would probably come up once every ten years in creating the queue id.  should merge argv flag processing with option processing.  D 3.205	82/09/24 19:39:25	eric	224	223	00000/00000/00005 change option implementation; define a bunch of interesting options.  D 3.204	82/09/24 09:38:36	eric	223	222	00000/00000/00005 arrange to be able to define options; put precedences in .cf file; send errors to an Errors-To: field; fix a serious bug causing mail to not be delivered to anyone if there were any errors.  D 3.203	82/09/22 10:50:47	eric	222	221	00000/00000/00005 don'
name|t
name|put
name|commas
name|in
name|non
operator|-
name|address
name|fields
expr_stmt|;
end_if

begin_expr_stmt
name|have
operator|-
name|bq
name|clean
name|up
name|its
name|temp
name|files
name|D
literal|3.202
literal|82
operator|/
literal|09
operator|/
literal|21
literal|10
operator|:
literal|15
operator|:
literal|00
name|eric
literal|221
literal|220
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|get
name|rid
name|of
name|double
name|error
name|returns
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|improve
name|verbose
name|mode
name|output
name|to
name|be
name|standard
name|format
argument_list|(
name|even
name|though
name|verbose
name|mode
name|isn
literal|'t standard); output queue files with commas in headers to insure that the oldstyle stuff doesn'
name|t
name|get
name|confused
operator|.
name|D
literal|3.201
literal|82
operator|/
literal|09
operator|/
literal|18
literal|20
operator|:
literal|37
operator|:
literal|46
name|eric
literal|220
literal|219
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|botch
name|where
name|it
name|believes
name|that
name|a
name|list
name|is
operator|!
name|oldstyle
name|just
name|because
name|it
name|has
name|an
name|alias
name|expansion
name|in
name|it
operator|.
name|D
literal|3.200
literal|82
operator|/
literal|09
operator|/
literal|16
literal|20
operator|:
literal|25
operator|:
literal|01
name|eric
literal|219
literal|218
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|drop
literal|":...;"
name|stuff
operator|--
name|it
name|screws
name|it
name|up
name|aliases
argument_list|;
name|pass
name|parameters
name|to
name|subroutines
argument_list|(
argument|this also adds $@ and $: features to subr calls
argument_list|)
argument_list|;
name|check
name|overflow
name|of
literal|"tobuf"
name|on
name|smtp
name|deliveries
argument_list|,
name|which
name|caused
name|core
name|dumps
name|on
name|large
name|mailing
name|lists
name|D
literal|3.199
literal|82
operator|/
literal|09
operator|/
literal|12
literal|22
operator|:
literal|17
operator|:
literal|30
name|eric
literal|218
literal|217
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|accept
literal|": ... ;"
name|syntax
for|for groups if !oldstyle  D 3.198	82/09/12 16:44:03	eric	217	216	00000/00000/00005 change inheritance for macros in envelopes
empty_stmt|;
end_decl_stmt

begin_expr_stmt
name|be
name|able
name|to
name|canonicalize
name|non
operator|-
name|domained
name|names
name|by
name|appending
name|domain
name|from
name|sender
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|call
name|ruleset
literal|3
name|explicitly
name|before
name|doing
name|other
name|rulesets
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|some
name|general
name|cleanup
operator|.
name|D
literal|3.197
literal|82
operator|/
literal|09
operator|/
literal|11
literal|17
operator|:
literal|18
operator|:
literal|16
name|eric
literal|216
literal|215
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|don
literal|'t assign $s to be the sending host (this mucks up Received: lines) -- instead just use HELO messages; chdir into queue directory and make all pathnames relative; be more conservative in creating queue id'
name|s
operator|--
name|in
name|the
name|event
name|you
name|get
name|file
name|table
name|overflows
operator|,
name|etc
operator|.
name|D
literal|3.196
literal|82
operator|/
literal|09
operator|/
literal|08
literal|23
operator|:
literal|55
operator|:
literal|46
name|eric
literal|215
literal|214
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|stupid
name|bug
name|in
name|wait
name|code
name|to
name|dispose
name|of
literal|"Interrupted system call"
name|message
name|D
literal|3.195
literal|82
operator|/
literal|09
operator|/
literal|08
literal|22
operator|:
literal|13
operator|:
literal|20
name|eric
literal|214
literal|213
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|a
name|nasty
name|botch
name|in
literal|3.194
name|that
name|killed
name|SMTP
name|in
name|daemon
name|mode
operator|.
name|sigh
operator|...
operator|...
name|D
literal|3.194
literal|82
operator|/
literal|09
operator|/
literal|08
literal|21
operator|:
literal|20
operator|:
literal|05
name|eric
literal|213
literal|212
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|try
name|to
name|avoid
literal|"Interrupted system call"
name|on
name|wait
name|in
name|deliver
name|and
name|on
name|writes
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|fix
name|returned
name|message
name|to
name|have
name|proper
name|sender
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|handle
name|extra
name|mailer
name|output
name|more
name|cleverly
operator|.
name|D
literal|3.193
literal|82
operator|/
literal|09
operator|/
literal|06
literal|19
operator|:
literal|55
operator|:
literal|17
name|eric
literal|212
literal|211
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|more
name|hacking
name|on
name|oldstyle
operator|--
name|always
name|assume
name|sender
name|fields
name|are
name|in
name|new
name|style
name|so
name|that
name|locally
name|generated
name|fields
name|are
name|edited
name|correctly
operator|.
name|D
literal|3.192
literal|82
operator|/
literal|09
operator|/
literal|06
literal|18
operator|:
literal|47
operator|:
literal|26
name|eric
literal|211
literal|210
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|botch
name|in
literal|"at"
name|s
name|in
name|headers
name|D
literal|3.191
literal|82
operator|/
literal|09
operator|/
literal|06
literal|18
operator|:
literal|24
operator|:
literal|40
name|eric
literal|210
literal|209
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|botch
name|in
name|computing
name|e_oldstyle
name|D
literal|3.190
literal|82
operator|/
literal|09
operator|/
literal|06
literal|17
operator|:
literal|58
operator|:
literal|40
name|eric
literal|209
literal|208
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|bug
name|in
name|scanner
name|state
name|machine
name|that
name|never
name|let
name|you
name|out
name|of
name|quote
name|state
operator|.
name|D
literal|3.189
literal|82
operator|/
literal|09
operator|/
literal|06
literal|17
operator|:
literal|14
operator|:
literal|03
name|eric
literal|208
literal|207
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|increase
name|log
name|level
name|needed
name|to
name|print
literal|"entered"
name|message
operator|.
name|D
literal|3.188
literal|82
operator|/
literal|09
operator|/
literal|06
literal|17
operator|:
literal|00
operator|:
literal|23
name|eric
literal|207
literal|206
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|user
name|SMTP
name|fixes
name|to
name|talk
name|to
name|ISI
name|D
literal|3.187
literal|82
operator|/
literal|09
operator|/
literal|06
literal|16
operator|:
literal|24
operator|:
literal|51
name|eric
literal|206
literal|205
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|install
name|new
name|state
operator|-
name|driven
name|scanner
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|make
name|everyone
name|use
name|it
decl_stmt|,
name|thus
name|fixing
name|problems
name|of
name|quoted
name|commas
decl_stmt|,
name|etc
operator|.
name|D
decl|3.186	82/09/05 18
range|:
literal|08
operator|:
literal|58
name|eric
literal|205
literal|204
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|change
name|$g
name|processing
name|from
name|a
name|macro
name|substitution
name|per
name|mailer
name|to
name|two
name|sets
name|of
name|rewriting
name|rules
name|per
name|mailer
operator|--
name|one
name|each
end_decl_stmt

begin_for
for|for sender and recipient fields
empty_stmt|;
end_for

begin_expr_stmt
name|convert
name|to
name|NBS
name|standard
name|on
name|Return
operator|-
name|Receipt
operator|-
name|To
operator|:
name|and
name|Precedence
operator|:
name|fields
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|clean
name|up
name|From
range|:
name|processing
name|code
name|and
name|generalize
name|it
name|to
name|all
name|sender
name|fields
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|tune
name|debugging
name|code
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|clean
name|up
name|canonname
operator|.
modifier|*
modifier|*
modifier|*
modifier|*
name|This
name|delta
name|invalidates
name|previous
name|configuration
name|files
operator|*
operator|*
operator|*
operator|*
name|D
literal|3.185
literal|82
operator|/
literal|09
operator|/
literal|05
literal|11
operator|:
literal|48
operator|:
literal|27
name|eric
literal|204
literal|203
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
name|$
operator|*
name|to
name|match
name|zero
name|or
name|more
name|and
name|$
operator|>
name|to
name|make
name|a
literal|"subroutine"
name|call
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|stick
name|in
name|initial
name|hooks
end_expr_stmt

begin_for
for|for per-mailer rewriting
empty_stmt|;
end_for

begin_decl_stmt
name|improve
name|diagnostics
name|in
name|readcf
decl_stmt|,
name|including
name|number
name|lines
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|increase
name|the
name|number
name|of
name|rewriting
name|sets
operator|.
name|D
literal|3.184
literal|82
operator|/
literal|09
operator|/
literal|01
literal|10
operator|:
literal|24
operator|:
literal|00
name|eric
literal|203
literal|202
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|log
name|entering
name|uid
operator|&
name|pid
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|allow
name|CANONUSER
argument_list|(
name|$
operator|:
argument_list|)
name|to
name|abort
name|a
name|rewriting
name|set
operator|.
name|D
decl|3.183	82/08/31 17
range|:
literal|46
operator|:
literal|56
name|eric
literal|202
literal|201
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|increase
name|MAXMAILERS
name|to
literal|25
name|D
literal|3.182
literal|82
operator|/
literal|08
operator|/
literal|31
literal|10
operator|:
literal|05
operator|:
literal|56
name|eric
literal|201
literal|200
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|clean
name|up
name|reply
name|code
name|processing
name|some
name|more
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|in
name|particular
decl_stmt|,
name|give
name|more
name|detail
name|in
name|many
name|messages
operator|.
name|process
name|connection
name|failures
name|correctly
operator|.
name|D
decl|3.181	82/08/29 23
range|:
literal|31
operator|:
literal|35
name|eric
literal|200
literal|199
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|handle
name|comments
name|and
name|quotes
name|in
name|headers
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|still
name|doesn
literal|'t deal with backslashes however -- prescan should be cleaned up to deal with this case.  it turns out there are many bugs in prescan; it should be extensively rewritten.  D 3.180	82/08/29 17:32:49	eric	199	198	00000/00000/00005 fix serious botch in SMTP reply code delta; change a bunch of "Internal error" codes to a new "Remote protocol error" -- so that I don'
name|t
name|get
name|blamed
end_expr_stmt

begin_for
for|for things that other systems do.  D 3.179	82/08/29 16:52:31	eric	198	197	00000/00000/00005 do a better job at interpreting SMTP reply codes  D 3.178	82/08/29 15:52:20	eric	197	196	00000/00000/00005 give 554 message on syserr
control|(
name|instead
name|of
literal|451
control|)
if|if errno == 0
empty_stmt|;
end_for

begin_expr_stmt
name|as
name|it
name|was
name|some
name|permanent
name|errors
name|appeared
name|transient
name|D
literal|3.177
literal|82
operator|/
literal|08
operator|/
literal|27
literal|18
operator|:
literal|01
operator|:
literal|25
name|eric
literal|196
literal|195
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|hack
name|crackaddr
name|to
name|strip
name|blanks
name|off
name|the
name|end
name|of
name|a
name|cracked
name|address
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|this
name|happens
name|because
literal|"u at h"
name|becomes
literal|"$g  "
operator|(
name|with
name|two
name|spaces
name|at
name|the
name|end
operator|)
operator|.
name|this
name|doesn
literal|'t solve the general case (e.g., "u at h (me)" comes out as "$g   (me)", with three spaces), but does handle the ugliest case. besides, the "at" syntax is supposed to go away.  D 3.176	82/08/27 16:01:58	eric	195	194	00000/00000/00005 simplify timeout code; allow multiple simultaneous queue runs so that large messages don'
name|t
name|freeze
name|things
name|up
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|fix
name|EINTR
name|problem
name|in
name|sfgets
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|clean
name|up
name|canonname
name|to
name|be
name|really
name|correct
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|lots
name|of
name|misc
operator|.
name|cleanup
name|D
literal|3.175
literal|82
operator|/
literal|08
operator|/
literal|27
literal|11
operator|:
literal|11
operator|:
literal|40
name|eric
literal|194
literal|193
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|release
name|e_id
name|after
name|fork
name|in
name|daemon
name|code
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|ignore
name|events
name|scheduled
name|by
name|another
name|process
name|D
literal|3.174
literal|82
operator|/
literal|08
operator|/
literal|25
literal|23
operator|:
literal|18
operator|:
literal|24
name|eric
literal|193
literal|192
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|assign
name|a
name|new
name|queue
name|id
name|to
name|all
name|jobs
name|coming
name|in
name|via
name|TCP
name|D
literal|3.173
literal|82
operator|/
literal|08
operator|/
literal|25
literal|21
operator|:
literal|22
operator|:
literal|10
name|eric
literal|192
literal|191
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|sigh
operator|...
operator|.
name|more
name|fun
name|and
name|games
name|in
name|the
name|daemon
name|code
name|to
name|try
name|to
name|guess
name|right
operator|.
name|D
literal|3.172
literal|82
operator|/
literal|08
operator|/
literal|25
literal|19
operator|:
literal|44
operator|:
literal|33
name|eric
literal|191
literal|190
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|recreate
name|a
name|socket
name|after
name|every
name|failed
name|accept
argument_list|()
name|D
literal|3.171
literal|82
operator|/
literal|08
operator|/
literal|25
literal|16
operator|:
literal|19
operator|:
literal|23
name|eric
literal|190
literal|189
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|apply
name|ruleset
literal|4
name|to
name|rewrite
name|addresses
name|in
name|the
name|body
name|of
name|the
name|message
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|fix
name|a
name|clock
operator|.
name|c
name|bug
name|that
name|caused
name|it
name|to
name|lose
name|events
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|more
name|time
name|cleanup
operator|.
name|D
literal|3.170
literal|82
operator|/
literal|08
operator|/
literal|25
literal|11
operator|:
literal|21
operator|:
literal|21
name|eric
literal|189
literal|188
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|clean
name|up
name|time
name|manipulation
name|to
name|always
name|be
name|current
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|assign
name|job
name|id
literal|'s earlier to make sure there is always one with a message.  D 3.169	82/08/25 10:46:27	eric	188	187	00000/00000/00005 log locked files in queuer; don'
name|t
name|mistakenly
name|start
name|up
name|two
name|runqueue
literal|'s  D 3.168	82/08/24 19:55:39	eric	187	186	00000/00000/00005 put queueup log messages on a higher logging level  D 3.167	82/08/24 19:41:32	eric	186	185	00000/00000/00005 log more info (on log level 11); try to detect wild accept loops; some minor cleanup and debugging checks; fix NoConnect option to; only apply to expensive mailers (regardless of sendqueue order)  D 3.166	82/08/24 10:27:46	eric	185	184	00000/00000/00005 clean up event handling so that events that do longjmp'
name|s
name|don
literal|'t turn off all future events; diagnose reentry of main().  D 3.165	82/08/23 11:59:50	eric	184	183	00000/00000/00005 clean up queueing; log time in queue. **** This delta invalidates mqueue files ****  D 3.164	82/08/23 09:23:54	eric	183	182	00000/00000/00005 allow continuation lines in .cf file (particularly in headers)  D 3.163	82/08/22 23:07:11	eric	182	181	00000/00000/00005 change $i to $j; $i is now queue id; put "Received:" format in .cf file; minor cleanup  D 3.162	82/08/22 19:03:19	eric	181	180	00000/00000/00005 assign a unique id to each transaction that can be determined from the queue file name.  D 3.161	82/08/21 17:54:37	eric	180	179	00000/00000/00005 move<> and forward path processing to .cf file; increase MAXATOMS since some "comment" information may now be part of the address. **** this installation requires a new sendmail.cf file ****  D 3.160	82/08/20 20:35:15	eric	179	178	00000/00000/00005 time stamp the SMTP greeting message; increase the buffer size in syslog to prevent core dumps.  D 3.159	82/08/17 20:45:43	eric	178	177	00000/00000/00005 change Mail-From: to Received: for new SMTP spec (RFC821); handle folded lines in queue files correctly.  D 3.158	82/08/17 16:19:10	eric	177	176	00000/00000/00005 rework header processing: do special purpose header munging in a separate routine so that the queue run can do it also; parse From lines in a fancy way, extracting the address part and turning it into a $g macro; avoid reading and processing core files that end up in the queue directory; check the queue directory name for legality; fix the verify (-bv) option.  D 3.157	82/08/15 17:35:39	eric	176	175	00000/00000/00005 mark From: lines with the H_FROM bit; make VRFY work by adding the QuickAbort flag; handle headers more cleverly in queue files -- this seems to work, but I am frankly nervous.  Note: this version represents a flag day!-- old queues will not process properly.  D 3.156	82/08/15 11:58:25	eric	175	174	00000/00000/00005 output class rather than priority in log; accept zero intervals in event scheduling; allow continuation lines in queue files (particularly for headers); don'
name|t
name|diagnose
name|inappropriate
name|errors
name|when
name|accepting
name|a
name|connection
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|fix
name|bug
name|when
name|reprocessing
name|addresses
name|that
name|put
name|garbage
name|in
name|the
name|header
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|some
name|misc
operator|.
name|debugging
name|info
argument_list|(
operator|-
name|d14
operator|=
operator|>
name|commaize
argument_list|)
name|D
decl|3.155	82/08/08 21
range|:
literal|15
operator|:
literal|44
name|eric
literal|174
literal|173
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|make
literal|"sleep"
name|work
name|correctly
name|even
name|in
name|the
name|face
name|of
name|other
name|events
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|clean
name|up
name|the
name|queue
name|processing
range|:
name|child
name|queue
name|runs
name|now
name|go
name|away
name|when
name|done
operator|.
name|more
name|debugging
name|logging
name|is
name|needed
name|to
name|verify
name|that
name|this
name|works
name|right
name|though
operator|.
name|D
literal|3.154
literal|82
operator|/
literal|08
operator|/
literal|08
literal|17
operator|:
literal|05
operator|:
literal|19
name|eric
literal|173
literal|172
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|move
name|remotename
argument_list|()
name|from
name|deliver
operator|.
name|c
name|to
name|parse
operator|.
name|c
decl_stmt|;
end_decl_stmt

begin_macro
name|change
end_macro

begin_expr_stmt
expr|default
name|log
name|level
name|to
literal|9
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|put
name|error
name|versus
name|success
name|delivery
name|on
name|different
name|log
name|levels
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|diagnose
name|overlength
name|lines
name|in
name|headers
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|more
name|general
name|event
name|mechanism
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|initial
name|implementation
name|of
name|canonname
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|don
literal|'t diagnose link errors in queue, since another daemon could have grabbed it legitimately; fix a problem in VRFY on bad addresses  D 3.153	82/08/08 01:00:25	eric	172	171	00000/00000/00005 change debug level to a debug vector; add levels on logging (and the -L flag); change logging to be by message-id; elevate message-id; some lint-type cleanup  D 3.152	82/08/07 11:13:15	eric	171	170	00000/00000/00005 Fix address rewriting so that multiple spaces and tabs work properly  D 3.151	82/07/31 16:57:49	eric	170	169	00000/00000/00005 don'
name|t
name|give
name|error
name|on
name|ETIMEDOUT
name|on
name|accept
name|call
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|print
name|errno
name|properly
name|in
name|syserr
argument_list|()
name|D
literal|3.150
literal|82
operator|/
literal|07
operator|/
literal|31
literal|12
operator|:
literal|56
operator|:
literal|56
name|eric
literal|169
literal|168
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|By
expr|default
operator|,
name|just
name|queue
name|up
name|the
name|mail
end_expr_stmt

begin_for
for|for most mailers and deliver from the queue.  This avoids the wild process problem in netnews
control|(
name|or
name|so
name|we
name|hope
control|)
operator|.
name|D
literal|3.149
literal|82
operator|/
literal|07
operator|/
literal|27
literal|23
operator|:
literal|09
operator|:
literal|04
name|eric
literal|168
literal|167
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|clean
name|up
name|semantics
name|of
name|daemon
name|mode
name|to
name|facilitate
name|use
name|of
name|other
name|IPC
expr_stmt|;
end_for

begin_expr_stmt
name|move
name|some
name|code
name|to
expr|main
operator|.
name|c
name|because
name|it
name|is
name|not
name|part
name|of
name|creating
name|a
name|connection
expr_stmt|;
end_expr_stmt

begin_if
if|if you can't create a socket assume there is another sendmail running and exit; improve the verbose information in an SMTP connection to make it more obvious which messages went which way; don't attempt delivery if you get an error reading the queue file.  D 3.148	82/07/25 13:11:20	eric	167	166	00000/00000/00005 clean up error handling  D 3.147	82/07/22 01:23:15	eric	166	165	00000/00000/00005 new version of syslog that uses 4.2 IPC  D 3.146	82/07/20 19:39:15	eric	165	164	00000/00000/00005 be smarter about when to rerun the queue when you are in repeated queue mode.  D 3.145	82/07/14 11:19:27	eric	164	163	00000/00000/00005 disconnect sendmail from the controlling tty in daemon mode.  D 3.144	82/07/14 11:00:33	eric	163	162	00000/00000/00005 arrange for MotherPid to be correct in daemon mode  D 3.143	82/07/14 10:46:00	eric	162	161	00000/00000/00005 fork automatically in daemon mode
condition|(
name|but
name|only
end_if

begin_if
if|if no debugging
end_if

begin_expr_stmt
unit|)
name|D
literal|3.142
literal|82
operator|/
literal|07
operator|/
literal|14
literal|09
operator|:
literal|25
operator|:
literal|11
name|eric
literal|161
literal|160
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|don
literal|'t accidently unlink a null pointer in finis(); change the way it decides whether to remove the temp file (you don'
name|t
name|want
name|to
end_expr_stmt

begin_if
if|if you are queueing it up
end_if

begin_empty_stmt
unit|)
empty_stmt|;
end_empty_stmt

begin_expr_stmt
name|fix
name|a
name|bug
name|in
name|Apparently
operator|-
name|To
operator|:
name|that
name|caused
name|it
name|to
name|output
name|both
name|pre
operator|-
name|and
name|post
operator|-
name|expanded
name|names
argument_list|(
argument|only output pre-expanded
argument_list|)
name|D
literal|3.141
literal|82
operator|/
literal|07
operator|/
literal|05
literal|20
operator|:
literal|56
operator|:
literal|24
name|eric
literal|160
literal|159
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|flush
name|fatal
name|error
name|flag
name|before
name|returning
name|error
name|messages
name|to
name|avoid
name|error
name|message
name|loop
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|improve
name|debugging
range|:
name|flush
name|transcript
name|before
name|doing
name|things
name|that
name|might
name|take
name|a
name|long
name|time
decl_stmt|,
name|add
name|some
name|info
name|to
name|debug
name|messages
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|extend
name|configuration
name|on
name|timeouts
name|so
name|that
name|text
name|of
name|error
name|message
name|is
name|in
name|conf
operator|.
name|c
name|D
literal|3.140
literal|82
operator|/
literal|07
operator|/
literal|05
literal|18
operator|:
literal|49
operator|:
literal|49
name|eric
literal|159
literal|158
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|add
literal|"Apparently-To:"
name|field
end_expr_stmt

begin_if
if|if no recipients are in the header.  D 3.139	82/07/05 13:21:21	eric	158	157	00000/00000/00005 count Mail-From: lines to get a hop count
operator|,
name|giving
name|error
name|as
name|appropriate
name|after
name|collection
decl_stmt|;
end_if

begin_expr_stmt
name|don
literal|'t attempt delivery of message if errors occur before or during collection; fix a bug in -as mode (non-daemon SMTP).  D 3.138	82/07/05 12:37:23	eric	157	156	00000/00000/00005 check for errors before opening a daemon connection  D 3.137	82/07/05 12:22:02	eric	156	155	00000/00000/00005 split off clock stuff from util.c so that vacation will compile  D 3.136	82/07/05 12:02:53	eric	155	154	00000/00000/00005 put timeouts on net reads  D 3.135	82/07/02 20:52:46	eric	154	153	00000/00000/00005 arrange to not lose temporary queue control files (tf files) if you interrupt a queue run process.  D 3.134	82/07/02 10:00:16	eric	153	152	00000/00000/00005 be paranoid about resetting the "FatalErrors" flag -- always reset after forking for daemon or queue mode.  This will prevent false error return delivery.  D 3.133	82/07/02 09:43:39	eric	152	151	00000/00000/00005 take special care in outputing error messages to the transcript; a little bit of paranoia never hurt a mail system.  D 3.132	82/06/30 22:39:22	eric	151	150	00000/00000/00005 open a separate transcript in the child of a daemon.  D 3.131	82/06/26 14:53:40	eric	150	149	00000/00000/00005 clean up error messages on SMTP temporary failures resulting from failure to connect properly.  D 3.130	82/06/26 13:53:35	eric	149	148	00000/00000/00005 more debug information; fix dependencies in makefile  D 3.129	82/06/26 13:10:41	eric	148	147	00000/00000/00005 lint  D 3.128	82/06/26 12:33:39	eric	147	146	00000/00000/00005 take environment variable "NAME" to determine what your full name is; this is overridden by -F.  D 3.127	82/06/26 11:56:51	eric	146	145	00000/00000/00005 add _kill command to SMTP.  this is probably dangerous in the outside world.  D 3.126	82/06/25 19:38:24	eric	145	144	00000/00000/00005 add debugging information to server smtp code: _debug to set Debug, _verbose to set verbose, and _showq to show the send queue (already existant, just a name change)  D 3.125	82/06/23 12:12:19	eric	144	143	00000/00000/00005 check prescan return values in remotename  D 3.124	82/06/19 21:14:18	eric	143	142	00000/00000/00005 remember to put a newline at the end of the UGLYUUCP line  D 3.123	82/06/19 21:09:10	eric	142	141	00000/00000/00005 get rid of comment lines when storing rewriting rules  D 3.122	82/06/19 20:47:23	eric	141	140	00000/00000/00005 improve SMTP error reporting  D 3.121	82/06/18 11:58:31	eric	140	139	00000/00000/00005 believe host name on SMTP "HELO" line  D 3.120	82/06/17 10:44:38	eric	139	138	00000/00000/00005 fix botch in -Q flag (sets AliasFile rather than QueueDir)  D 3.119	82/06/16 14:51:16	eric	138	137	00000/00000/00005 allow connection refused as a temporary error; make sure there is always someone to return the mail to on error  D 3.118	82/06/16 14:29:20	eric	137	136	00000/00000/00005 fix botch in outputing "recipient" type lines (e.g., To:)  D 3.117	82/06/07 23:53:26	eric	136	135	00000/00000/00005 allow multiple connections; call putline to output FULL_SMTP lines (to limit line lengths, etc.); involves adding an asm.sed script to the makefile  D 3.116	82/06/07 07:54:55	eric	135	134	00000/00000/00005 make transcripts verbose always; misc. message cleanup, etc.  D 3.115	82/06/07 07:06:13	eric	134	133	00000/00000/00005 strip out xlate stuff -- this belongs at a different level  D 3.114	82/06/06 23:13:08	eric	133	132	00000/00000/00005 avoid loops by not sending to owner-owner-* -- just send to owner-owner instead  D 3.113	82/06/06 23:05:17	eric	132	131	00000/00000/00005 implement alias owner feature.  this actually works for any user. basically, if the alias owner-xxx exists, errors sending to xxx will be sent to that alias rather than to the sender.  D 3.112	82/05/31 19:03:47	eric	131	130	00000/00000/00005 make temp files the correct modes in all cases  D 3.111	82/05/31 18:49:50	eric	130	129	00000/00000/00005 pass lint.  notice that definitions in llib-lc have changed for alarm() and sleep() calls {arg was unsigned, is now int}.  D 3.110	82/05/31 17:10:51	eric	129	128	00000/00000/00005 eliminate -V, -D, -p flags in favor of a single flag "-bx" (be in mode x).  D 3.109	82/05/31 15:35:57	eric	128	127	00000/00000/00005 don'
name|t
name|output
name|SMTP
operator|/
name|FTP
name|error
name|codes
name|in
name|transcript
name|file
name|D
literal|3.108
literal|82
operator|/
literal|05
operator|/
literal|31
literal|15
operator|:
literal|32
operator|:
literal|18
name|eric
literal|127
literal|126
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|finish
name|implementing
name|envelopes
operator|.
name|it
literal|'s not completely clear to me that this is really the way to go, but it seems clearly better than what i had before.  this delta includes many other minor changes, so it should probably not be blithely removed.  D 3.107	82/05/30 10:25:35	eric	126	125	00000/00000/00005 add M_FULLSMTP (``X'
literal|' flag in .cf file) for eventual implementation of full SMTP.  This version must support such garbage as line limits, address length limits, return-path, etc.  D 3.106	82/05/29 20:00:30	eric	125	124	00000/00000/00005 allow the user with name "daemon" to send mail as anyone s/he wants.  D 3.105	82/05/22 02:05:48	eric	124	123	00000/00000/00005 add "junk mail" -- error responses are never returned.  D 3.104	82/05/22 01:38:07	eric	123	122	00000/00000/00005 add "envelopes" to contain the basic information needed as control info for each message.  currently there is only one envelope -- this being the obvious stupid conversion.  later there will be separate envelopes for error messages, return receipts, etc.  D 3.103	82/05/20 17:46:07	eric	122	121	00000/00000/00005 add dfopen as a "determined fopen" -- it retries if it gets recoverable errors.  we use it for returning mail (to dead.letter) and creating the temp file.  the whole idea is to avoid dropping things on the floor on heavily loaded systems.  this is untested, since it seems impossible to fill up the inode or file tables on this VAX (but it works if the open succeeds).  D 3.102	82/05/15 12:29:36	eric	121	120	00000/00000/00005 add the '
name|R
literal|' flag to mailers, saying to rewrite the recipient addresses to be relative to the recipient.  This makes reply code easy, but confuses user mail programs that are expecting to have to rewrite recipient addresses.  In general, the receiving host must be "smart" for this to work.  D 3.101	82/05/06 20:21:14	eric	120	119	00000/00000/00005 allow socket number on [IPC] connections -- eventually this could be used to handle other low-level protocols.  D 3.100	82/03/27 20:15:12	eric	119	118	00000/00000/00005 delete neat remotename feature, because it doesn'
name|t
name|work
name|right
name|in
name|UUCPland
operator|--
name|and
name|breaks
name|stupid
name|hosts
operator|.
expr|'Twill be fixed, I promise.  Time must be spent figuring out how to define the civilized versus the uncivilized world.  D 3.99	82/03/27 19:57:44	eric	118	117	00000/00000/00005 compensate for bug in getlogin: can return the empty string ("") for certain error conditions rather than the NULL pointer.  D 3.98	82/03/22 22:37:54	eric	117	116	00000/00000/00005 continue the impossible task of tracking Bill Joy  D 3.97	82/03/22 22:10:44	eric	116	115	00000/00000/00005 more cleanup for new 4.2 system configuration and some more fixes for vanilla V7  D 3.96	82/03/20 18:13:01	eric	115	114	00000/00000/00005 take % as an acceptable name terminator in GECOS field ("in-care-of") -- for TEF%UCSFCGL  D 3.95	82/03/20 16:12:27	eric	114	113	00000/00000/00005 16 bit changes -- should have no effect on VAX binaries to speak of.  D 3.94	82/03/06 16:11:49	eric	113	112	00000/00000/00005 get queue scanning working correctly in conjunction with daemon mode  D 3.93	82/03/06 15:35:49	eric	112	111	00000/00000/00005 have daemon mode assume SMTP mode  D 3.92	82/03/06 15:08:24	eric	111	110	00000/00000/00005 give correct error message in SMTP if some of the addresses are not ok  D 3.91	82/03/06 14:52:22	eric	110	109	00000/00000/00005 arrange to be able to accept a connection from any host.  D 3.90	82/03/06 14:15:55	eric	109	108	00000/00000/00005 collapse special character processing into macro processing for simplicity of code.  D 3.89	82/03/06 12:09:18	eric	108	107	00000/00000/00005 clean up error handling in IPC case; fix a minor bug in headers in queueing code; make SMTP mail multi user per connect.  D 3.88	82/03/05 10:45:48	eric	107	106	00000/00000/00005 remove silly $U dependency in UGLYUUCP code  D 3.87	82/03/05 10:13:06	eric	106	105	00000/00000/00005 include direct connect on outgoing mail if the pathname is "[IPC]" -- this gives minimal number of processes for ethernet mail.  D 3.86	82/02/27 12:29:31	eric	105	104	00000/00000/00005 more work on after $g translate rewriting  D 3.85	82/02/27 11:37:42	eric	104	103	00000/00000/00005 implement "return receipt requested".  D 3.84	82/02/27 09:51:36	eric	103	102	00000/00000/00005 improve rewriting of "after $g translate" to correspond to the real world.....  D 3.83	82/02/26 21:56:10	eric	102	101	00000/00000/00005 implement daemon mode  D 3.82	82/02/26 19:02:33	eric	101	100	00000/00000/00005 default to OldStyle headers -- this turns out to be needed so that it will work right when running as a server.  D 3.81	82/02/22 19:59:16	eric	100	99	00000/00000/00005 some hacks to make the ethernet community happier -- .cf changes only  D 3.80	82/02/22 19:32:12	eric	99	98	00000/00000/00005 be much more clever about splitting up addresses when doing header rewriting.  become NewStyle automatically based on heuristics; this makes some other addresses work, although there are conceivably sites that this could break.  Perhaps we should default to OldStyle? I don'
name|t
name|think
name|this
name|would
end_expr_stmt

begin_break
break|break
name|anything
operator|.
name|D
break|3.79	82/02/20 16:56:02
name|eric
break|98	97	00000/00000/00005
name|output
name|names
name|in
name|a
name|nice
name|comma
break|-
name|separated
name|fashion
name|in
name|messages
break|--
name|this
name|opens
name|up
name|other
name|possibilities
name|D
break|3.78	82/02/20 12:59:46
name|eric
break|97	96	00000/00000/00005
name|expand
name|macros
name|in
name|rewriting
name|rules
name|early
name|to
name|allow
name|multi
break|-
name|word
name|macros
name|to
name|be
name|processed
name|correctly
operator|.
name|D
break|3.77	82/02/20 12:12:09
name|eric
break|96	95	00000/00000/00005
name|add
name|the
break|-
name|c
name|flag
operator|,
name|to
name|cause
name|sendmail
name|to
name|just
name|queue
name|messages
name|that
name|are
break|for
name|mailers
name|that
name|are
name|expensive
break|;
end_break

begin_decl_stmt
name|a
name|later
name|instantiation
name|can
name|come
name|around
name|and
name|send
name|them
name|in
name|a
name|batch
operator|.
name|Also
decl_stmt|,
name|pass
name|macro
name|definitions
name|through
name|the
name|queueing
name|code
name|so
name|that
name|macros
name|can
name|be
name|expanded
name|later
name|rather
name|than
name|sooner
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|this
name|is
name|important
end_expr_stmt

begin_for
for|for destination dependent macros such as $g.  D 3.76	82/02/04 20:31:21	eric	95	94	00000/00000/00005 add host aliasing
empty_stmt|;
end_for

begin_expr_stmt
name|add
operator|-
name|p
name|flag
operator|.
name|this
name|version
name|doesn
literal|'t yet know about replacing the text of the host alias into the message however.  syntax is grotty: "/hostmatch:%s@newhost" or whatever.  D 3.75	82/01/23 14:21:06	eric	94	93	00000/00000/00005 add M_UGLYUUCP flag; only catch names with leading slash as filenames; let the user redefine their full name; don'
name|t
name|pass
operator|-
name|r
name|or
operator|-
name|f
name|to
name|uux
operator|.
name|D
literal|3.74
literal|82
operator|/
literal|01
operator|/
literal|10
literal|21
operator|:
literal|57
operator|:
literal|33
name|eric
literal|93
literal|92
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|cleanup
name|from
name|cbosgd
argument_list|(
argument|Mark Horton
argument_list|)
name|testing
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|some
name|internals
decl_stmt|,
name|mostly
name|configuration
operator|.
name|This
name|tries
name|to
name|make
name|the
name|configuration
name|file
argument_list|(
name|cf
operator|.
name|m4
argument_list|)
name|be
name|much
name|more
name|general
decl_stmt|,
name|but
name|I
name|fear
name|it
name|is
name|doomed
name|to
name|failure
decl|--
name|it
name|may
name|be
name|better
name|to
name|just
name|tell
name|people
name|to
name|roll
name|their
name|own
operator|.
name|D
decl|3.73	82/01/05 09
range|:
literal|59
operator|:
literal|19
name|eric
literal|92
literal|91
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|fix
name|botch
name|in
name|UGLYUUCP
name|code
operator|--
name|gave
literal|"remote from<dest>"
name|instead
name|of
literal|"remote from<source>"
name|D
literal|3.72
literal|82
operator|/
literal|01
operator|/
literal|01
literal|18
operator|:
literal|39
operator|:
literal|43
name|eric
literal|91
literal|90
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|know
name|about
name|all
name|known
name|Berknet
name|host
name|names
name|so
name|that
name|we
name|can
name|handle
name|the
literal|"."
name|notation
name|happily
name|in
name|the
name|full
name|name
name|representation
operator|.
name|D
literal|3.71
literal|82
operator|/
literal|01
operator|/
literal|01
literal|18
operator|:
literal|27
operator|:
literal|15
name|eric
literal|90
literal|89
literal|00000
operator|/
literal|00000
operator|/
literal|00005
name|send
name|to
name|dead
operator|.
name|letter
name|using
name|sendto
operator|/
name|recipient
operator|/
name|deliver
name|mechanism
name|rather
name|than
name|mailfile
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|this
name|fixes
name|a
name|bug
name|with
name|the
literal|"from"
name|name
name|and
name|seems
name|like
name|a
name|better
name|abstraction
operator|.
name|D
literal|3.70
literal|81
operator|/
literal|12
operator|/
literal|06
literal|12
operator|:
literal|39
operator|:
literal|10
name|eric
literal|89
literal|88
literal|00002
operator|/
literal|00000
operator|/
literal|00003
name|cleanup
name|so
name|it
name|will
name|go
name|through
name|lint
name|without
name|any
name|fancy
name|grep
operator|-
name|v
literal|'s; change the way SCCS Id'
name|s
name|are
name|handled
operator|.
name|D
literal|3.69
literal|81
operator|/
literal|12
operator|/
literal|05
literal|14
operator|:
literal|14
operator|:
literal|06
name|eric
literal|88
literal|87
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|insert
name|SMTP
literal|"Mail-From:"
name|line
operator|.
name|D
literal|3.68
literal|81
operator|/
literal|12
operator|/
literal|05
literal|11
operator|:
literal|53
operator|:
literal|41
name|eric
literal|87
literal|86
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|put
name|the
name|SMTP
name|and
name|queueing
name|code
name|on
name|compilation
name|flags
name|so
name|that
name|sendmail
name|will
name|fit
name|on
name|non
operator|-
name|ID
name|PDP
operator|-
literal|11
literal|'s (ugh); put the ugly UUCP hack on a compilation flag also to emphasize that it sucks eggs; makefile cleanup.  D 3.67	81/11/27 21:37:05	eric	86	85	00000/00000/00003 this is a stupid hack to put "remote from<host>" lines on the From lines going to UUCP mail.  someday i hope to rip out this stupidity. it is triggered by any mailer named "uucp" -- it ought to be a special flag, but i refuse to legitimize antique hacky mistakes.  D 3.66	81/11/22 19:17:45	eric	85	84	00000/00000/00003 Edit queue control files when running queue (assuming there are still recipients left).  Also, modify the MsgPriority to be the absolute number (not the Priority: value); this allows us to include aging into the priority algorithm.  D 3.65	81/11/21 18:42:47	eric	84	83	00000/00000/00003 change the send queue to be only one queue instead of one per mailer. this is slightly inefficient but simpler.  also, pass this queue around so we can have multiple send queues.  this makes VRFY work.  D 3.64	81/11/21 16:38:29	eric	83	82	00000/00000/00003 convert to SMTP draft 3 -- finishing touches.  Punt on the VRFY/ EXPN commands for now; they aren'
name|t
name|required
name|anyhow
operator|.
name|Move
name|the
name|fullname
name|into
name|the
name|address
name|structure
name|so
name|it
name|can
name|be
name|inherited
operator|.
name|D
literal|3.63
literal|81
operator|/
literal|11
operator|/
literal|11
literal|20
operator|:
literal|24
operator|:
literal|07
name|eric
literal|82
literal|81
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|integrate
name|user
name|SMTP
name|into
name|sendmail
name|itself
operator|.
name|If
name|there
name|is
name|no
name|$u
name|arg
name|in
name|the
name|mailer
name|argument
name|list
operator|,
name|SMTP
name|is
name|run
operator|.
name|This
name|can
name|be
name|used
name|directly
name|over
name|the
name|Ethernet
name|or
name|to
name|any
name|clever
name|mailer
operator|.
name|We
name|still
name|need
name|to
name|edit
name|spooled
name|control
name|files
name|to
name|remove
name|recipients
name|that
name|have
name|been
name|successfully
name|sent
name|during
name|queue
name|processing
operator|.
name|D
literal|3.62
literal|81
operator|/
literal|11
operator|/
literal|08
literal|13
operator|:
literal|00
operator|:
literal|21
name|eric
literal|81
literal|80
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|know
name|about
name|SMTP
name|over
name|TCP
operator|.
name|The
name|current
name|SMTP
name|user
name|is
name|not
name|clever
name|enough
name|to
name|deal
name|with
name|multiple
name|users
name|at
name|one
name|host
operator|.
name|To
name|fix
name|this
name|we
name|will
name|have
name|to
name|speak
name|some
name|smart
name|protocol
name|between
name|sendmail
name|and
name|the
name|mailer
operator|--
name|maybe
name|SMTP
operator|??
name|D
literal|3.61
literal|81
operator|/
literal|11
operator|/
literal|07
literal|15
operator|:
literal|41
operator|:
literal|39
name|eric
literal|80
literal|79
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|clean
name|up
name|to
name|compile
operator|&
name|work
name|on
name|ARPAVAX
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|move
name|stat
name|file
name|to
operator|/
name|usr
operator|/
name|lib
operator|/
name|sendmail
operator|.
name|st
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|fix
name|bug
name|in
name|syserr
name|with
name|error
name|codes
name|D
literal|3.60
literal|81
operator|/
literal|10
operator|/
literal|31
literal|22
operator|:
literal|12
operator|:
literal|47
name|eric
literal|79
literal|78
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|drop
name|old
name|NCP
name|stuff
end_expr_stmt

begin_for
for|for ARPANET handling
empty_stmt|;
end_for

begin_decl_stmt
name|fix
name|some
name|bugs
name|in
name|error
name|messages
name|with
name|multiple
name|recipients
name|in
name|SMTP
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|clean
name|up
name|error
name|handling
name|D
literal|3.59
literal|81
operator|/
literal|10
operator|/
literal|27
literal|12
operator|:
literal|24
operator|:
literal|51
name|eric
literal|78
literal|77
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|experimental
name|version
name|combining
name|queueing
name|with
name|daemon
name|operation
operator|.
name|I
literal|'m sure this doesn'
name|t
name|work
operator|--
end_expr_stmt

begin_if
if|if only because the wait
condition|()
name|s
name|are
name|funny
operator|.
name|D
literal|3.58
literal|81
operator|/
literal|10
operator|/
literal|27
literal|10
operator|:
literal|50
operator|:
literal|52
name|eric
literal|77
literal|76
literal|00000
operator|/
literal|00000
operator|/
literal|00003
name|More
name|queueing
name|cleanup
operator|:
name|implement
name|timeouts
argument_list|(
argument|still one-stage
argument_list|)
operator|,
name|properly
name|implement
name|priorities
argument_list|(
argument|didn
literal|'t work before), and miscellaneous cleanup.  D 3.57	81/10/26 14:22:34	eric	76	75	00000/00000/00003 Install new experimental queueing facility -- one stage timeout, etc.  This version is still quite incomplete.  It needs to reorder the queue after some interval, do two-stage timeout, take option info from the queue file instead of the command line, read the sender'
argument|s .mailcf file
argument_list|,
argument|etc.  Some of this is useful for SMTP also.  D
literal|3.56
literal|81
argument|/
literal|10
argument|/
literal|23
literal|19
argument|:
literal|38
argument|:
literal|09
argument|eric
literal|75
literal|74
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|Eliminate magic MN_LOCAL and MN_PROG; change q_mailer item in ADDRESS to be pointer to mailer rather than index.  D
literal|3.55
literal|81
argument|/
literal|10
argument|/
literal|22
literal|10
argument|:
literal|25
argument|:
literal|29
argument|eric
literal|74
literal|73
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|move stats file to /usr/lib; put location of sendmail.hf in conf.c  D
literal|3.54
literal|81
argument|/
literal|10
argument|/
literal|22
literal|09
argument|:
literal|43
argument|:
literal|48
argument|eric
literal|73
literal|72
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|take fullname from /etc/passwd if Smtp mode and sender name is indeed local.  Also accepts names more often; this is probably a disaster for sender verification.  D
literal|3.53
literal|81
argument|/
literal|10
argument|/
literal|22
literal|09
argument|:
literal|14
argument|:
literal|30
argument|eric
literal|72
literal|71
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|implement HELP and MRSQ -- MRSQ is a partial implementation of old MTP -- in particular
argument_list|,
argument|To: fields in MAIL commands are not yet implemented.  The
literal|"message"
argument|routine now takes first args of the form
literal|"999-"
argument|to specify continuation.  D
literal|3.52
literal|81
argument|/
literal|10
argument|/
literal|20
literal|11
argument|:
literal|36
argument|:
literal|24
argument|eric
literal|71
literal|70
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|clean up the SMTP stuff some more  D
literal|3.51
literal|81
argument|/
literal|10
argument|/
literal|19
literal|22
argument|:
literal|27
argument|:
literal|17
argument|eric
literal|70
literal|69
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|implement SMTP mode -- doesn
literal|'t support source routing or the HELP command, and doesn'
argument|t give the correct code on VRFY or forwarding. Maybe someday....  D
literal|3.50
literal|81
argument|/
literal|10
argument|/
literal|17
literal|16
argument|:
literal|58
argument|:
literal|04
argument|eric
literal|69
literal|68
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|initial prep to put in Daemon mode  D
literal|3.49
literal|81
argument|/
literal|10
argument|/
literal|12
literal|10
argument|:
literal|04
argument|:
literal|19
argument|eric
literal|68
literal|67
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|throw in some
literal|"errno = 0;"
literal|'s to make syserr'
argument|s more accurate; take any -f flag if debug mode and uid==euid.  D
literal|3.48
literal|81
argument|/
literal|10
argument|/
literal|08
literal|22
argument|:
literal|55
argument|:
literal|37
argument|eric
literal|67
literal|66
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|ignore interrupts and hangups while calling mailer.  D
literal|3.47
literal|81
argument|/
literal|10
argument|/
literal|08
literal|09
argument|:
literal|13
argument|:
literal|30
argument|eric
literal|66
literal|65
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|fix botch in backup code during rewriting  D
literal|3.46
literal|81
argument|/
literal|10
argument|/
literal|06
literal|19
argument|:
literal|12
argument|:
literal|57
argument|eric
literal|65
literal|64
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|change rewriting rules to use $N on RHS to match LHS
argument_list|,
argument|and include $=X (class match) in the matching; this will allow us to match the proposed
literal|"user.host@domain"
argument|syntax as well as the old syntax
argument_list|,
argument|by putting the known domains into a class to disambiguate.  D
literal|3.45
literal|81
argument|/
literal|10
argument|/
literal|02
literal|11
argument|:
literal|05
argument|:
literal|21
argument|eric
literal|64
literal|63
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|arrange to give the correct
literal|"from"
argument|person on error messages.  D
literal|3.44
literal|81
argument|/
literal|10
argument|/
literal|02
literal|10
argument|:
literal|07
argument|:
literal|38
argument|eric
literal|63
literal|62
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|use ruleset
literal|2
argument|to rewrite names after the $g translate (to fix some forwarding problems; do a read check in putmessage (just in case the temp file disappeared); some general cleanup.  D
literal|3.43
literal|81
argument|/
literal|09
argument|/
literal|30
literal|10
argument|:
literal|00
argument|:
literal|20
argument|eric
literal|62
literal|61
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|fix the<> syntax, convert
literal|"at"
argument|to
literal|"@"
argument|in from addresses also, plus some minorness to get the multi-machine case going nicely.  D
literal|3.42
literal|81
argument|/
literal|09
argument|/
literal|29
literal|18
argument|:
literal|22
argument|:
literal|25
argument|eric
literal|61
literal|60
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|change processing of From: person; basically, this mod deletes the Original-From: line if redundant with the generated From: line, uses the Original-From: line for the From: line if possible, and a host of other such trivialities.  D
literal|3.41
literal|81
argument|/
literal|09
argument|/
literal|29
literal|14
argument|:
literal|59
argument|:
literal|00
argument|eric
literal|60
literal|59
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|fix hash function computation for symbol table on
literal|16
argument|-bit machines  D
literal|3.40
literal|81
argument|/
literal|09
argument|/
literal|28
literal|19
argument|:
literal|17
argument|:
literal|29
argument|eric
literal|59
literal|58
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|enable aliases to self-reference themselves correctly.  D
literal|3.39
literal|81
argument|/
literal|09
argument|/
literal|24
literal|10
argument|:
literal|30
argument|:
literal|44
argument|eric
literal|58
literal|56
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|changes to work under a V6 system -- mostly compilation flags  D
literal|3.38.1.1
literal|81
argument|/
literal|09
argument|/
literal|23
literal|18
argument|:
literal|23
argument|:
literal|19
argument|eric
literal|57
literal|56
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|break some configuration into conf.h -- simplifies makefile changes on different machines.  But there are still conditional libraries, so this may not be a good idea.....  D
literal|3.38
literal|81
argument|/
literal|09
argument|/
literal|23
literal|09
argument|:
literal|52
argument|:
literal|23
argument|eric
literal|56
literal|55
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|fix bug in file modes when mailing to files that didn
literal|'t exist before; add an '
argument|F
literal|' line to the .cf file that will read class entries from another file, given a scanf string to do the parsing.  D 3.37	81/09/22 13:24:25	eric	55	54	00000/00000/00003 fix problem with using macros in rules; change configuration to send different flags when destined for arpanet vs. berknet hosts, etc.  D 3.36	81/09/22 11:33:29	eric	54	53	00000/00000/00003 finally make suppression of sender in mailing lists work -- this version also works correctly on simple aliases.  D 3.35	81/09/21 18:49:53	eric	53	52	00000/00000/00003 fix suppression of from address in mailing lists.  D 3.34	81/09/20 10:46:32	eric	52	51	00000/00000/00003 don'
argument|t let a mailer ever execute as root (that should solve the security problems!) -- essentially just map root into someone else. Adds yet another configuration variable (should this be in the .cf file?  D
literal|3.33
literal|81
argument|/
literal|09
argument|/
literal|16
literal|20
argument|:
literal|04
argument|:
literal|26
argument|eric
literal|51
literal|50
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|take underscore as well as space to separate parts of a person
literal|'s full name.  Dot notation should be made to work someday also.  D 3.32	81/09/16 17:16:19	eric	50	49	00000/00000/00003 have .forward ownership stick harder than :include: ownership: this prevents cretins from using writable root files for nastiness. all this is pointless if /usr/lib/aliases is writable though....  D 3.31	81/09/16 16:39:44	eric	49	48	00000/00000/00003 be REALLY clever and inherit uid/gid from owner of :include: files also...   solves problem of alias to non-secure file  D 3.30	81/09/16 16:24:19	eric	48	47	00000/00000/00003 last delta was too paranoid -- this increases the number of cases that work (but is still safe -- I hope)  D 3.29	81/09/16 16:08:08	eric	47	46	00000/00000/00003 run as the user forwarding mail after a .forward operation; fix a bug in .forwarding that caused recursive expansion; restrict mail to programs, files, and with :include: for security reasons.  D 3.28	81/09/14 12:41:28	eric	46	45	00000/00000/00003 check MAXATOM overflow; increase MAXATOM value  D 3.27	81/09/14 12:19:23	eric	45	44	00000/00000/00003 fix but in mailers that only take one address at a time  D 3.26	81/09/12 17:34:05	eric	44	43	00000/00000/00003 match on full name for local users  D 3.25	81/09/12 15:48:57	eric	43	42	00000/00000/00003 change From: processing to reduce the number of Original-From: lines; change allocation of global variables.  D 3.24	81/09/07 14:12:48	eric	42	41	00000/00000/00003 fix up umask; allow setuid on files to take recipient owner; factor some configuration info into conf.c  D 3.23	81/09/07 12:33:38	eric	41	40	00000/00000/00003 add auto-rebuild on alias database; fix some aliasing bugs; add statistics to rebuild; slight code restructuring; change version handling one last (?) time  D 3.22	81/09/07 10:23:04	eric	40	39	00000/00000/00003 add NOTUNIX compile flag to turn off UNIX "From " line processing  D 3.21	81/09/06 19:50:23	eric	39	38	00000/00000/00003 cleanup, commenting, linting, etc.  D 3.20	81/09/06 14:23:20	eric	38	37	00000/00000/00003 improve "version:" entry in makefile; fix -em (mail back errors) option  D 3.19	81/09/06 10:29:49	eric	37	36	00000/00000/00003 fix $u argument processing bug (happened in uucp); .cf file cleanup  D 3.18	81/08/31 21:22:39	eric	36	35	00000/00000/00003 collect mail statistics; minor configuration changes  D 3.17	81/08/31 12:11:57	eric	35	34	00000/00000/00003 allow "error" as a net name to print error messages  D 3.16	81/08/29 19:16:24	eric	34	33	00000/00000/00003 drop unnecessary H_FORCE bits in conf.c; delete H_DELETE (since H_ACHECK can be used with a zero mask field)  D 3.15	81/08/27 11:42:58	eric	33	32	00000/00000/00003 on -t, use argument list as a supress list  D 3.14	81/08/25 16:06:37	eric	32	31	00000/00000/00003 change handling of<LWSP> characters; remove special "at" processing (put it in .cf file)  D 3.13	81/08/24 14:05:39	eric	31	30	00000/00000/00003 Add "-t" option to read To:, Cc:, and Bcc: lines to get recipients  D 3.12	81/08/23 12:08:53	eric	30	29	00000/00000/00003 plug assorted security holes  D 3.11	81/08/22 17:52:06	eric	29	28	00000/00000/00003 Arrange to pull full name out of From line if found; includes Original-From: hacking (oh so ugly).  There'
argument|s got to be a better way to do this...  D
literal|3.10
literal|81
argument|/
literal|08
argument|/
literal|22
literal|14
argument|:
literal|45
argument|:
literal|27
argument|eric
literal|28
literal|27
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|fix UNIX From line parsing problem; add $b macro to get correct dates; fix mail-to-file problem; define basic macros before cracking arguments so that -D is more useful  D
literal|3.9
literal|81
argument|/
literal|08
argument|/
literal|21
literal|18
argument|:
literal|51
argument|:
literal|33
argument|eric
literal|27
literal|26
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|return transcript even if no message was collected  D
literal|3.8
literal|81
argument|/
literal|08
argument|/
literal|21
literal|18
argument|:
literal|23
argument|:
literal|53
argument|eric
literal|26
literal|25
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|drop M_FINAL, add $y=ttyname, rename some constants  D
literal|3.7
literal|81
argument|/
literal|08
argument|/
literal|20
literal|15
argument|:
literal|19
argument|:
literal|50
argument|eric
literal|25
literal|24
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|internal cleanup& minor improvements  D
literal|3.6
literal|81
argument|/
literal|08
argument|/
literal|18
literal|11
argument|:
literal|40
argument|:
literal|37
argument|eric
literal|24
literal|23
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|allow :include: specs  D
literal|3.5
literal|81
argument|/
literal|08
argument|/
literal|17
literal|11
argument|:
literal|02
argument|:
literal|12
argument|eric
literal|23
literal|22
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|implement hashing in symbol table and add more headers, from BB&N Report No. ICST/CBOS -
literal|80
argument|/
literal|2
argument|,
literal|"Specification of a Draft Message Format Standard (Draft Report)"
argument|, prepared for NBS.  D
literal|3.4
literal|81
argument|/
literal|08
argument|/
literal|09
literal|19
argument|:
literal|08
argument|:
literal|25
argument|eric
literal|22
literal|21
literal|00000
argument|/
literal|00000
argument|/
literal|00003
argument|put mailer definitions into configuration file  D
literal|3.3
literal|81
argument|/
literal|03
argument|/
literal|28
literal|11
argument|:
literal|52
argument|:
literal|37
argument|eric
literal|21
literal|20
literal|00003
argument|/
literal|00001
argument|/
literal|00000
argument|change format of Version to be suitable for internal use  D
literal|3.2
literal|81
argument|/
literal|03
argument|/
literal|20
literal|09
argument|:
literal|45
argument|:
literal|43
argument|eric
literal|20
literal|19
literal|00001
argument|/
literal|00001
argument|/
literal|00000
argument|change name (again); from postbox to sendmail  D
literal|3.1
literal|81
argument|/
literal|03
argument|/
literal|07
literal|14
argument|:
literal|27
argument|:
literal|18
argument|eric
literal|19
literal|18
literal|00001
argument|/
literal|00001
argument|/
literal|00000
argument|----- delivermail ==> postbox -----  D
literal|2.8
literal|81
argument|/
literal|02
argument|/
literal|28
literal|11
argument|:
literal|54
argument|:
literal|11
argument|eric
literal|18
literal|17
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|install VAX mpx file logging  D
literal|2.7
literal|81
argument|/
literal|02
argument|/
literal|05
literal|08
argument|:
literal|01
argument|:
literal|25
argument|eric
literal|17
literal|16
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|always issued a delivermail error message regardless of M_QUIET  D
literal|2.6
literal|81
argument|/
literal|01
argument|/
literal|10
literal|14
argument|:
literal|28
argument|:
literal|41
argument|eric
literal|16
literal|15
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|include ArpaLocal; flush output on errors; allow
literal|"user"
literal|"at"
literal|"host"
argument|as separate parameters; etc.  D
literal|2.5
literal|81
argument|/
literal|01
argument|/
literal|08
literal|23
argument|:
literal|57
argument|:
literal|31
argument|eric
literal|15
literal|14
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|fixed botch in at => @ translation  D
literal|2.4
literal|81
argument|/
literal|01
argument|/
literal|08
literal|19
argument|:
literal|37
argument|:
literal|22
argument|eric
literal|14
literal|13
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|fixed several bugs in parser; translate<lwsp> into quoted .  D
literal|2.3
literal|80
argument|/
literal|12
argument|/
literal|06
literal|17
argument|:
literal|33
argument|:
literal|32
argument|eric
literal|13
literal|12
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|fix ^D botch in maketemp; allow
literal|"eric:eric,i.eric"
argument|D
literal|2.2
literal|80
argument|/
literal|11
argument|/
literal|20
literal|19
argument|:
literal|57
argument|:
literal|57
argument|eric
literal|12
literal|11
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|make dates be taken as date sent rather than date delivered  D
literal|2.1
literal|80
argument|/
literal|11
argument|/
literal|05
literal|11
argument|:
literal|00
argument|:
literal|06
argument|eric
literal|11
literal|10
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|release
literal|2
argument|D
literal|1.10
literal|80
argument|/
literal|10
argument|/
literal|28
literal|23
argument|:
literal|52
argument|:
literal|38
argument|eric
literal|10
literal|9
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|fixed ANOTHER bug in aliasing (this is getting dull....)  D
literal|1.9
literal|80
argument|/
literal|10
argument|/
literal|27
literal|19
argument|:
literal|28
argument|:
literal|30
argument|eric
literal|9
literal|8
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|fix alias bug; count message sizes; map stderr->stdout; misc.  D
literal|1.8
literal|80
argument|/
literal|10
argument|/
literal|21
literal|12
argument|:
literal|58
argument|:
literal|43
argument|eric
literal|8
literal|7
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|install dbm stuff + fix quoting bugs  D
literal|1.7
literal|80
argument|/
literal|10
argument|/
literal|18
literal|16
argument|:
literal|48
argument|:
literal|51
argument|eric
literal|7
literal|6
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|cleanup for dbm stuff: Error => Errors; move local host detection into parse; misc cleanup  D
literal|1.6
literal|80
argument|/
literal|10
argument|/
literal|15
literal|10
argument|:
literal|24
argument|:
literal|24
argument|eric
literal|6
literal|5
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|deal with disk overflows  D
literal|1.5
literal|80
argument|/
literal|10
argument|/
literal|11
literal|20
argument|:
literal|10
argument|:
literal|44
argument|eric
literal|5
literal|4
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|fixed problem with sizeof MsgId ==
literal|0
argument|D
literal|1.4
literal|80
argument|/
literal|10
argument|/
literal|11
literal|18
argument|:
literal|55
argument|:
literal|35
argument|eric
literal|4
literal|3
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|cleanup to simplify distribution  D
literal|1.3
literal|80
argument|/
literal|10
argument|/
literal|11
literal|13
argument|:
literal|49
argument|:
literal|55
argument|eric
literal|3
literal|2
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|accept multi-line fields in headers  D
literal|1.2
literal|80
argument|/
literal|10
argument|/
literal|11
literal|13
argument|:
literal|37
argument|:
literal|53
argument|eric
literal|2
literal|1
literal|00000
argument|/
literal|00000
argument|/
literal|00001
argument|test  D
literal|1.1
literal|80
argument|/
literal|10
argument|/
literal|11
literal|13
argument|:
literal|34
argument|:
literal|43
argument|eric
literal|1
literal|0
literal|00001
argument|/
literal|00000
argument|/
literal|00000
argument|code versions:  conf.o: 	conf.c
literal|4.4
literal|8
argument|/
literal|28
argument|/
literal|83
argument|main.o: 	sendmail.h
literal|4.2
literal|8
argument|/
literal|28
argument|/
literal|83
argument|main.c
literal|4.3
literal|9
argument|/
literal|5
argument|/
literal|83
argument|collect.o: 	collect.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|parseaddr.o: 	parseaddr.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|alias.o: 	alias.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|(with DBM) deliver.o: 	deliver.c
literal|4.2
literal|8
argument|/
literal|28
argument|/
literal|83
argument|savemail.o: 	savemail.c
literal|4.2
literal|8
argument|/
literal|28
argument|/
literal|83
argument|err.o: 	err.c
literal|4.2
literal|9
argument|/
literal|5
argument|/
literal|83
argument|readcf.o: 	readcf.c
literal|4.2
literal|8
argument|/
literal|28
argument|/
literal|83
argument|stab.o: 	stab.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|headers.o: 	headers.c
literal|4.3
literal|8
argument|/
literal|21
argument|/
literal|83
argument|recipient.o: 	recipient.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|stats.o: 	stats.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|daemon.o: 	daemon.c
literal|4.4
literal|8
argument|/
literal|28
argument|/
literal|83
argument|(with daemon mode) usersmtp.o: 	usersmtp.c
literal|4.4
literal|9
argument|/
literal|7
argument|/
literal|83
argument|srvrsmtp.o: 	srvrsmtp.c
literal|4.3
literal|8
argument|/
literal|28
argument|/
literal|83
argument|queue.o: 	queue.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|macro.o: 	macro.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|util.o: 	util.c
literal|4.2
literal|8
argument|/
literal|31
argument|/
literal|83
argument|clock.o: 	clock.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|trace.o: 	trace.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|envelope.o: 	envelope.c
literal|4.2
literal|8
argument|/
literal|21
argument|/
literal|83
argument|sysexits.o: 	sysexits.c
literal|4.2
literal|7
argument|/
literal|31
argument|/
literal|83
argument|bmove.o: 	bmove.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|arpadate.o: 	arpadate.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
argument|convtime.o: 	convtime.c
literal|4.1
literal|7
argument|/
literal|25
argument|/
literal|83
end_if

begin_endif
endif|#
directive|endif
endif|COMMENT
end_endif

end_unit

