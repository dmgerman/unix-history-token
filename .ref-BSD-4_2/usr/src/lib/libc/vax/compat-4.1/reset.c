begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * @(#)reset.s	4.2 (Berkeley) 7/5/83  * C library -- reset, setexit  *  *	reset(x)  * will generate a "return" from  * the last call to  *	setexit()  * by restoring r6 - r12, ap, fp  * and doing a return.  * The returned value is x; on the original  * call the returned value is 0.  *  * useful for going back to the main loop  * after a horrible error in a lowlevel  * routine.  */
end_comment

begin_include
include|#
directive|include
file|"DEFS.h"
end_include

begin_macro
name|ENTRY
argument_list|(
argument|setexit
argument_list|)
end_macro

begin_decl_stmt
name|movab
name|setsav
decl_stmt|,
name|r0
name|movq
name|r6
decl_stmt|,
argument_list|(
name|r0
argument_list|)
decl_stmt|+
name|movq
name|r8
decl_stmt|,
argument_list|(
name|r0
argument_list|)
decl_stmt|+
name|movq
name|r10
decl_stmt|,
argument_list|(
name|r0
argument_list|)
decl_stmt|+
name|movq
decl|8
argument_list|(
name|fp
argument_list|)
decl_stmt|,
argument_list|(
name|r0
argument_list|)
decl_stmt|+		#
name|ap
decl_stmt|,
name|fp
name|movab
decl|4
argument_list|(
name|ap
argument_list|)
decl_stmt|,
argument_list|(
name|r0
argument_list|)
decl_stmt|+		#
name|sp
name|movl
decl|16
argument_list|(
name|fp
argument_list|)
decl_stmt|,
argument_list|(
name|r0
argument_list|)
decl_stmt|#
name|pc
name|clrl
name|r0
name|ret
name|ENTRY
argument_list|(
name|reset
argument_list|)
name|movl
decl|4
argument_list|(
name|ap
argument_list|)
decl_stmt|,
name|r0
decl|#
name|returned
name|value
name|movab
name|setsav
decl_stmt|,
name|r1
name|movq
argument_list|(
name|r1
argument_list|)
decl|+
decl_stmt|,
name|r6
name|movq
argument_list|(
name|r1
argument_list|)
decl|+
decl_stmt|,
name|r8
name|movq
argument_list|(
name|r1
argument_list|)
decl|+
decl_stmt|,
name|r10
name|movq
argument_list|(
name|r1
argument_list|)
decl|+
decl_stmt|,
name|r12
name|movl
argument_list|(
name|r1
argument_list|)
decl|+
decl_stmt|,
name|sp
name|jmp
modifier|*
argument_list|(
name|r1
argument_list|)
decl|.
name|data
name|setsav
range|:
operator|.
name|space
literal|10
operator|*
literal|4
end_decl_stmt

end_unit

