begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  *	$Id: isofs_util.c,v 1.3 1993/11/25 01:32:28 wollman Exp $  */
end_comment

begin_include
include|#
directive|include
file|"param.h"
end_include

begin_include
include|#
directive|include
file|"systm.h"
end_include

begin_function
name|int
name|isonum_711
parameter_list|(
name|p
parameter_list|)
name|char
modifier|*
name|p
decl_stmt|;
block|{
return|return
operator|(
operator|*
name|p
operator|&
literal|0xff
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_712
parameter_list|(
name|p
parameter_list|)
name|char
modifier|*
name|p
decl_stmt|;
block|{
name|int
name|val
decl_stmt|;
name|val
operator|=
operator|*
name|p
expr_stmt|;
if|if
condition|(
name|val
operator|&
literal|0x80
condition|)
name|val
operator||=
operator|~
literal|0xff
expr_stmt|;
return|return
operator|(
name|val
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_721
parameter_list|(
name|p
parameter_list|)
name|char
modifier|*
name|p
decl_stmt|;
block|{
return|return
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0xff
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|8
operator|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_722
parameter_list|(
name|p
parameter_list|)
name|char
modifier|*
name|p
decl_stmt|;
block|{
return|return
operator|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|8
operator|)
operator||
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0xff
operator|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_723
parameter_list|(
name|p
parameter_list|)
name|char
modifier|*
name|p
decl_stmt|;
block|{
if|#
directive|if
literal|0
block|if (p[0] != p[3] || p[1] != p[2]) { 		fprintf (stderr, "invalid format 7.2.3 number\n"); 		exit (1); 	}
endif|#
directive|endif
return|return
operator|(
name|isonum_721
argument_list|(
name|p
argument_list|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_731
parameter_list|(
name|p
parameter_list|)
name|unsigned
name|char
modifier|*
name|p
decl_stmt|;
block|{
return|return
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0xff
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|8
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|16
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|3
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|24
operator|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_732
parameter_list|(
name|p
parameter_list|)
name|unsigned
name|char
modifier|*
name|p
decl_stmt|;
block|{
return|return
operator|(
operator|(
operator|(
name|p
index|[
literal|0
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|24
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|1
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|16
operator|)
operator||
operator|(
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0xff
operator|)
operator|<<
literal|8
operator|)
operator||
operator|(
name|p
index|[
literal|3
index|]
operator|&
literal|0xff
operator|)
operator|)
return|;
block|}
end_function

begin_function
name|int
name|isonum_733
parameter_list|(
name|p
parameter_list|)
name|unsigned
name|char
modifier|*
name|p
decl_stmt|;
block|{
name|int
name|i
decl_stmt|;
if|#
directive|if
literal|0
block|for (i = 0; i< 4; i++) { 		if (p[i] != p[7-i]) { 			fprintf (stderr, "bad format 7.3.3 number\n"); 			exit (1); 		} 	}
endif|#
directive|endif
return|return
operator|(
name|isonum_731
argument_list|(
name|p
argument_list|)
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * translate and compare a filename  */
end_comment

begin_function
name|int
name|isofncmp
parameter_list|(
name|char
modifier|*
name|fn
parameter_list|,
name|int
name|fnlen
parameter_list|,
name|char
modifier|*
name|isofn
parameter_list|,
name|int
name|isolen
parameter_list|)
block|{
name|int
name|fnidx
decl_stmt|;
name|fnidx
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|fnidx
operator|=
literal|0
init|;
name|fnidx
operator|<
name|isolen
condition|;
name|fnidx
operator|++
operator|,
name|fn
operator|++
control|)
block|{
name|char
name|c
init|=
operator|*
name|isofn
operator|++
decl_stmt|;
if|if
condition|(
name|fnidx
operator|>
name|fnlen
condition|)
return|return
operator|(
literal|0
operator|)
return|;
if|if
condition|(
name|c
operator|>=
literal|'A'
operator|&&
name|c
operator|<=
literal|'Z'
condition|)
block|{
if|if
condition|(
name|c
operator|+
operator|(
literal|'a'
operator|-
literal|'A'
operator|)
operator|!=
operator|*
name|fn
condition|)
return|return
operator|(
literal|0
operator|)
return|;
else|else
continue|continue;
block|}
if|if
condition|(
name|c
operator|==
literal|';'
condition|)
return|return
operator|(
operator|(
name|fnidx
operator|==
name|fnlen
operator|)
operator|)
return|;
if|if
condition|(
name|c
operator|!=
operator|*
name|fn
condition|)
return|return
operator|(
literal|0
operator|)
return|;
block|}
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * translate a filename  */
end_comment

begin_function
name|void
name|isofntrans
parameter_list|(
name|char
modifier|*
name|infn
parameter_list|,
name|int
name|infnlen
parameter_list|,
name|char
modifier|*
name|outfn
parameter_list|,
name|short
modifier|*
name|outfnlen
parameter_list|)
block|{
name|int
name|fnidx
decl_stmt|;
name|fnidx
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|fnidx
operator|=
literal|0
init|;
name|fnidx
operator|<
name|infnlen
condition|;
name|fnidx
operator|++
control|)
block|{
name|char
name|c
init|=
operator|*
name|infn
operator|++
decl_stmt|;
if|if
condition|(
name|c
operator|>=
literal|'A'
operator|&&
name|c
operator|<=
literal|'Z'
condition|)
operator|*
name|outfn
operator|++
operator|=
name|c
operator|+
operator|(
literal|'a'
operator|-
literal|'A'
operator|)
expr_stmt|;
elseif|else
if|if
condition|(
name|c
operator|==
literal|';'
condition|)
block|{
operator|*
name|outfnlen
operator|=
name|fnidx
expr_stmt|;
return|return;
block|}
else|else
operator|*
name|outfn
operator|++
operator|=
name|c
expr_stmt|;
block|}
operator|*
name|outfnlen
operator|=
name|infnlen
expr_stmt|;
block|}
end_function

end_unit

