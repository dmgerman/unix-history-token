begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* crypto/ebcdic.c */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CHARSET_EBCDIC
end_ifdef

begin_include
include|#
directive|include
file|"ebcdic.h"
end_include

begin_comment
comment|/*      Initial Port for  Apache-1.3     by<Martin.Kraemer@Mch.SNI.De>  *      Adapted for       OpenSSL-0.9.4  by<Martin.Kraemer@Mch.SNI.De>  */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|_OSD_POSIX
end_ifdef

begin_comment
comment|/*     "BS2000 OSD" is a POSIX subsystem on a main frame.     It is made by Siemens AG, Germany, for their BS2000 mainframe machines.     Within the POSIX subsystem, the same character set was chosen as in     "native BS2000", namely EBCDIC. (EDF04)      The name "ASCII" in these routines is misleading: actually, conversion     is not between EBCDIC and ASCII, but EBCDIC(EDF04) and ISO-8859.1;     that means that (western european) national characters are preserved.      This table is identical to the one used by rsh/rcp/ftp and other POSIX tools. */
end_comment

begin_comment
comment|/* Here's the bijective ebcdic-to-ascii table: */
end_comment

begin_decl_stmt
specifier|const
name|unsigned
name|char
name|os_toascii
index|[
literal|256
index|]
init|=
block|{
comment|/*00*/
literal|0x00
block|,
literal|0x01
block|,
literal|0x02
block|,
literal|0x03
block|,
literal|0x85
block|,
literal|0x09
block|,
literal|0x86
block|,
literal|0x7f
block|,
literal|0x87
block|,
literal|0x8d
block|,
literal|0x8e
block|,
literal|0x0b
block|,
literal|0x0c
block|,
literal|0x0d
block|,
literal|0x0e
block|,
literal|0x0f
block|,
comment|/*................*/
comment|/*10*/
literal|0x10
block|,
literal|0x11
block|,
literal|0x12
block|,
literal|0x13
block|,
literal|0x8f
block|,
literal|0x0a
block|,
literal|0x08
block|,
literal|0x97
block|,
literal|0x18
block|,
literal|0x19
block|,
literal|0x9c
block|,
literal|0x9d
block|,
literal|0x1c
block|,
literal|0x1d
block|,
literal|0x1e
block|,
literal|0x1f
block|,
comment|/*................*/
comment|/*20*/
literal|0x80
block|,
literal|0x81
block|,
literal|0x82
block|,
literal|0x83
block|,
literal|0x84
block|,
literal|0x92
block|,
literal|0x17
block|,
literal|0x1b
block|,
literal|0x88
block|,
literal|0x89
block|,
literal|0x8a
block|,
literal|0x8b
block|,
literal|0x8c
block|,
literal|0x05
block|,
literal|0x06
block|,
literal|0x07
block|,
comment|/*................*/
comment|/*30*/
literal|0x90
block|,
literal|0x91
block|,
literal|0x16
block|,
literal|0x93
block|,
literal|0x94
block|,
literal|0x95
block|,
literal|0x96
block|,
literal|0x04
block|,
literal|0x98
block|,
literal|0x99
block|,
literal|0x9a
block|,
literal|0x9b
block|,
literal|0x14
block|,
literal|0x15
block|,
literal|0x9e
block|,
literal|0x1a
block|,
comment|/*................*/
comment|/*40*/
literal|0x20
block|,
literal|0xa0
block|,
literal|0xe2
block|,
literal|0xe4
block|,
literal|0xe0
block|,
literal|0xe1
block|,
literal|0xe3
block|,
literal|0xe5
block|,
literal|0xe7
block|,
literal|0xf1
block|,
literal|0x60
block|,
literal|0x2e
block|,
literal|0x3c
block|,
literal|0x28
block|,
literal|0x2b
block|,
literal|0x7c
block|,
comment|/* .........`.<(+|*/
comment|/*50*/
literal|0x26
block|,
literal|0xe9
block|,
literal|0xea
block|,
literal|0xeb
block|,
literal|0xe8
block|,
literal|0xed
block|,
literal|0xee
block|,
literal|0xef
block|,
literal|0xec
block|,
literal|0xdf
block|,
literal|0x21
block|,
literal|0x24
block|,
literal|0x2a
block|,
literal|0x29
block|,
literal|0x3b
block|,
literal|0x9f
block|,
comment|/*&.........!$*);.*/
comment|/*60*/
literal|0x2d
block|,
literal|0x2f
block|,
literal|0xc2
block|,
literal|0xc4
block|,
literal|0xc0
block|,
literal|0xc1
block|,
literal|0xc3
block|,
literal|0xc5
block|,
literal|0xc7
block|,
literal|0xd1
block|,
literal|0x5e
block|,
literal|0x2c
block|,
literal|0x25
block|,
literal|0x5f
block|,
literal|0x3e
block|,
literal|0x3f
block|,
comment|/*-/........^,%_>?*/
comment|/*70*/
literal|0xf8
block|,
literal|0xc9
block|,
literal|0xca
block|,
literal|0xcb
block|,
literal|0xc8
block|,
literal|0xcd
block|,
literal|0xce
block|,
literal|0xcf
block|,
literal|0xcc
block|,
literal|0xa8
block|,
literal|0x3a
block|,
literal|0x23
block|,
literal|0x40
block|,
literal|0x27
block|,
literal|0x3d
block|,
literal|0x22
block|,
comment|/*..........:#@'="*/
comment|/*80*/
literal|0xd8
block|,
literal|0x61
block|,
literal|0x62
block|,
literal|0x63
block|,
literal|0x64
block|,
literal|0x65
block|,
literal|0x66
block|,
literal|0x67
block|,
literal|0x68
block|,
literal|0x69
block|,
literal|0xab
block|,
literal|0xbb
block|,
literal|0xf0
block|,
literal|0xfd
block|,
literal|0xfe
block|,
literal|0xb1
block|,
comment|/*.abcdefghi......*/
comment|/*90*/
literal|0xb0
block|,
literal|0x6a
block|,
literal|0x6b
block|,
literal|0x6c
block|,
literal|0x6d
block|,
literal|0x6e
block|,
literal|0x6f
block|,
literal|0x70
block|,
literal|0x71
block|,
literal|0x72
block|,
literal|0xaa
block|,
literal|0xba
block|,
literal|0xe6
block|,
literal|0xb8
block|,
literal|0xc6
block|,
literal|0xa4
block|,
comment|/*.jklmnopqr......*/
comment|/*a0*/
literal|0xb5
block|,
literal|0xaf
block|,
literal|0x73
block|,
literal|0x74
block|,
literal|0x75
block|,
literal|0x76
block|,
literal|0x77
block|,
literal|0x78
block|,
literal|0x79
block|,
literal|0x7a
block|,
literal|0xa1
block|,
literal|0xbf
block|,
literal|0xd0
block|,
literal|0xdd
block|,
literal|0xde
block|,
literal|0xae
block|,
comment|/*..stuvwxyz......*/
comment|/*b0*/
literal|0xa2
block|,
literal|0xa3
block|,
literal|0xa5
block|,
literal|0xb7
block|,
literal|0xa9
block|,
literal|0xa7
block|,
literal|0xb6
block|,
literal|0xbc
block|,
literal|0xbd
block|,
literal|0xbe
block|,
literal|0xac
block|,
literal|0x5b
block|,
literal|0x5c
block|,
literal|0x5d
block|,
literal|0xb4
block|,
literal|0xd7
block|,
comment|/*...........[\]..*/
comment|/*c0*/
literal|0xf9
block|,
literal|0x41
block|,
literal|0x42
block|,
literal|0x43
block|,
literal|0x44
block|,
literal|0x45
block|,
literal|0x46
block|,
literal|0x47
block|,
literal|0x48
block|,
literal|0x49
block|,
literal|0xad
block|,
literal|0xf4
block|,
literal|0xf6
block|,
literal|0xf2
block|,
literal|0xf3
block|,
literal|0xf5
block|,
comment|/*.ABCDEFGHI......*/
comment|/*d0*/
literal|0xa6
block|,
literal|0x4a
block|,
literal|0x4b
block|,
literal|0x4c
block|,
literal|0x4d
block|,
literal|0x4e
block|,
literal|0x4f
block|,
literal|0x50
block|,
literal|0x51
block|,
literal|0x52
block|,
literal|0xb9
block|,
literal|0xfb
block|,
literal|0xfc
block|,
literal|0xdb
block|,
literal|0xfa
block|,
literal|0xff
block|,
comment|/*.JKLMNOPQR......*/
comment|/*e0*/
literal|0xd9
block|,
literal|0xf7
block|,
literal|0x53
block|,
literal|0x54
block|,
literal|0x55
block|,
literal|0x56
block|,
literal|0x57
block|,
literal|0x58
block|,
literal|0x59
block|,
literal|0x5a
block|,
literal|0xb2
block|,
literal|0xd4
block|,
literal|0xd6
block|,
literal|0xd2
block|,
literal|0xd3
block|,
literal|0xd5
block|,
comment|/*..STUVWXYZ......*/
comment|/*f0*/
literal|0x30
block|,
literal|0x31
block|,
literal|0x32
block|,
literal|0x33
block|,
literal|0x34
block|,
literal|0x35
block|,
literal|0x36
block|,
literal|0x37
block|,
literal|0x38
block|,
literal|0x39
block|,
literal|0xb3
block|,
literal|0x7b
block|,
literal|0xdc
block|,
literal|0x7d
block|,
literal|0xda
block|,
literal|0x7e
comment|/*0123456789.{.}.~*/
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* The ascii-to-ebcdic table: */
end_comment

begin_decl_stmt
specifier|const
name|unsigned
name|char
name|os_toebcdic
index|[
literal|256
index|]
init|=
block|{
comment|/*00*/
literal|0x00
block|,
literal|0x01
block|,
literal|0x02
block|,
literal|0x03
block|,
literal|0x37
block|,
literal|0x2d
block|,
literal|0x2e
block|,
literal|0x2f
block|,
literal|0x16
block|,
literal|0x05
block|,
literal|0x15
block|,
literal|0x0b
block|,
literal|0x0c
block|,
literal|0x0d
block|,
literal|0x0e
block|,
literal|0x0f
block|,
comment|/*................*/
comment|/*10*/
literal|0x10
block|,
literal|0x11
block|,
literal|0x12
block|,
literal|0x13
block|,
literal|0x3c
block|,
literal|0x3d
block|,
literal|0x32
block|,
literal|0x26
block|,
literal|0x18
block|,
literal|0x19
block|,
literal|0x3f
block|,
literal|0x27
block|,
literal|0x1c
block|,
literal|0x1d
block|,
literal|0x1e
block|,
literal|0x1f
block|,
comment|/*................*/
comment|/*20*/
literal|0x40
block|,
literal|0x5a
block|,
literal|0x7f
block|,
literal|0x7b
block|,
literal|0x5b
block|,
literal|0x6c
block|,
literal|0x50
block|,
literal|0x7d
block|,
literal|0x4d
block|,
literal|0x5d
block|,
literal|0x5c
block|,
literal|0x4e
block|,
literal|0x6b
block|,
literal|0x60
block|,
literal|0x4b
block|,
literal|0x61
block|,
comment|/* !"#$%&'()*+,-./ */
comment|/*30*/
literal|0xf0
block|,
literal|0xf1
block|,
literal|0xf2
block|,
literal|0xf3
block|,
literal|0xf4
block|,
literal|0xf5
block|,
literal|0xf6
block|,
literal|0xf7
block|,
literal|0xf8
block|,
literal|0xf9
block|,
literal|0x7a
block|,
literal|0x5e
block|,
literal|0x4c
block|,
literal|0x7e
block|,
literal|0x6e
block|,
literal|0x6f
block|,
comment|/*0123456789:;<=>?*/
comment|/*40*/
literal|0x7c
block|,
literal|0xc1
block|,
literal|0xc2
block|,
literal|0xc3
block|,
literal|0xc4
block|,
literal|0xc5
block|,
literal|0xc6
block|,
literal|0xc7
block|,
literal|0xc8
block|,
literal|0xc9
block|,
literal|0xd1
block|,
literal|0xd2
block|,
literal|0xd3
block|,
literal|0xd4
block|,
literal|0xd5
block|,
literal|0xd6
block|,
comment|/*@ABCDEFGHIJKLMNO*/
comment|/*50*/
literal|0xd7
block|,
literal|0xd8
block|,
literal|0xd9
block|,
literal|0xe2
block|,
literal|0xe3
block|,
literal|0xe4
block|,
literal|0xe5
block|,
literal|0xe6
block|,
literal|0xe7
block|,
literal|0xe8
block|,
literal|0xe9
block|,
literal|0xbb
block|,
literal|0xbc
block|,
literal|0xbd
block|,
literal|0x6a
block|,
literal|0x6d
block|,
comment|/*PQRSTUVWXYZ[\]^_*/
comment|/*60*/
literal|0x4a
block|,
literal|0x81
block|,
literal|0x82
block|,
literal|0x83
block|,
literal|0x84
block|,
literal|0x85
block|,
literal|0x86
block|,
literal|0x87
block|,
literal|0x88
block|,
literal|0x89
block|,
literal|0x91
block|,
literal|0x92
block|,
literal|0x93
block|,
literal|0x94
block|,
literal|0x95
block|,
literal|0x96
block|,
comment|/*`abcdefghijklmno*/
comment|/*70*/
literal|0x97
block|,
literal|0x98
block|,
literal|0x99
block|,
literal|0xa2
block|,
literal|0xa3
block|,
literal|0xa4
block|,
literal|0xa5
block|,
literal|0xa6
block|,
literal|0xa7
block|,
literal|0xa8
block|,
literal|0xa9
block|,
literal|0xfb
block|,
literal|0x4f
block|,
literal|0xfd
block|,
literal|0xff
block|,
literal|0x07
block|,
comment|/*pqrstuvwxyz{|}~.*/
comment|/*80*/
literal|0x20
block|,
literal|0x21
block|,
literal|0x22
block|,
literal|0x23
block|,
literal|0x24
block|,
literal|0x04
block|,
literal|0x06
block|,
literal|0x08
block|,
literal|0x28
block|,
literal|0x29
block|,
literal|0x2a
block|,
literal|0x2b
block|,
literal|0x2c
block|,
literal|0x09
block|,
literal|0x0a
block|,
literal|0x14
block|,
comment|/*................*/
comment|/*90*/
literal|0x30
block|,
literal|0x31
block|,
literal|0x25
block|,
literal|0x33
block|,
literal|0x34
block|,
literal|0x35
block|,
literal|0x36
block|,
literal|0x17
block|,
literal|0x38
block|,
literal|0x39
block|,
literal|0x3a
block|,
literal|0x3b
block|,
literal|0x1a
block|,
literal|0x1b
block|,
literal|0x3e
block|,
literal|0x5f
block|,
comment|/*................*/
comment|/*a0*/
literal|0x41
block|,
literal|0xaa
block|,
literal|0xb0
block|,
literal|0xb1
block|,
literal|0x9f
block|,
literal|0xb2
block|,
literal|0xd0
block|,
literal|0xb5
block|,
literal|0x79
block|,
literal|0xb4
block|,
literal|0x9a
block|,
literal|0x8a
block|,
literal|0xba
block|,
literal|0xca
block|,
literal|0xaf
block|,
literal|0xa1
block|,
comment|/*................*/
comment|/*b0*/
literal|0x90
block|,
literal|0x8f
block|,
literal|0xea
block|,
literal|0xfa
block|,
literal|0xbe
block|,
literal|0xa0
block|,
literal|0xb6
block|,
literal|0xb3
block|,
literal|0x9d
block|,
literal|0xda
block|,
literal|0x9b
block|,
literal|0x8b
block|,
literal|0xb7
block|,
literal|0xb8
block|,
literal|0xb9
block|,
literal|0xab
block|,
comment|/*................*/
comment|/*c0*/
literal|0x64
block|,
literal|0x65
block|,
literal|0x62
block|,
literal|0x66
block|,
literal|0x63
block|,
literal|0x67
block|,
literal|0x9e
block|,
literal|0x68
block|,
literal|0x74
block|,
literal|0x71
block|,
literal|0x72
block|,
literal|0x73
block|,
literal|0x78
block|,
literal|0x75
block|,
literal|0x76
block|,
literal|0x77
block|,
comment|/*................*/
comment|/*d0*/
literal|0xac
block|,
literal|0x69
block|,
literal|0xed
block|,
literal|0xee
block|,
literal|0xeb
block|,
literal|0xef
block|,
literal|0xec
block|,
literal|0xbf
block|,
literal|0x80
block|,
literal|0xe0
block|,
literal|0xfe
block|,
literal|0xdd
block|,
literal|0xfc
block|,
literal|0xad
block|,
literal|0xae
block|,
literal|0x59
block|,
comment|/*................*/
comment|/*e0*/
literal|0x44
block|,
literal|0x45
block|,
literal|0x42
block|,
literal|0x46
block|,
literal|0x43
block|,
literal|0x47
block|,
literal|0x9c
block|,
literal|0x48
block|,
literal|0x54
block|,
literal|0x51
block|,
literal|0x52
block|,
literal|0x53
block|,
literal|0x58
block|,
literal|0x55
block|,
literal|0x56
block|,
literal|0x57
block|,
comment|/*................*/
comment|/*f0*/
literal|0x8c
block|,
literal|0x49
block|,
literal|0xcd
block|,
literal|0xce
block|,
literal|0xcb
block|,
literal|0xcf
block|,
literal|0xcc
block|,
literal|0xe1
block|,
literal|0x70
block|,
literal|0xc0
block|,
literal|0xde
block|,
literal|0xdb
block|,
literal|0xdc
block|,
literal|0x8d
block|,
literal|0x8e
block|,
literal|0xdf
comment|/*................*/
block|}
decl_stmt|;
end_decl_stmt

begin_else
else|#
directive|else
end_else

begin_comment
comment|/*_OSD_POSIX*/
end_comment

begin_comment
comment|/* This code does basic character mapping for IBM's TPF and OS/390 operating systems. It is a modified version of the BS2000 table.  Bijective EBCDIC (character set IBM-1047) to US-ASCII table: This table is bijective - there are no ambigous or duplicate characters. */
end_comment

begin_decl_stmt
specifier|const
name|unsigned
name|char
name|os_toascii
index|[
literal|256
index|]
init|=
block|{
literal|0x00
block|,
literal|0x01
block|,
literal|0x02
block|,
literal|0x03
block|,
literal|0x85
block|,
literal|0x09
block|,
literal|0x86
block|,
literal|0x7f
block|,
comment|/* 00-0f:           */
literal|0x87
block|,
literal|0x8d
block|,
literal|0x8e
block|,
literal|0x0b
block|,
literal|0x0c
block|,
literal|0x0d
block|,
literal|0x0e
block|,
literal|0x0f
block|,
comment|/* ................ */
literal|0x10
block|,
literal|0x11
block|,
literal|0x12
block|,
literal|0x13
block|,
literal|0x8f
block|,
literal|0x0a
block|,
literal|0x08
block|,
literal|0x97
block|,
comment|/* 10-1f:           */
literal|0x18
block|,
literal|0x19
block|,
literal|0x9c
block|,
literal|0x9d
block|,
literal|0x1c
block|,
literal|0x1d
block|,
literal|0x1e
block|,
literal|0x1f
block|,
comment|/* ................ */
literal|0x80
block|,
literal|0x81
block|,
literal|0x82
block|,
literal|0x83
block|,
literal|0x84
block|,
literal|0x92
block|,
literal|0x17
block|,
literal|0x1b
block|,
comment|/* 20-2f:           */
literal|0x88
block|,
literal|0x89
block|,
literal|0x8a
block|,
literal|0x8b
block|,
literal|0x8c
block|,
literal|0x05
block|,
literal|0x06
block|,
literal|0x07
block|,
comment|/* ................ */
literal|0x90
block|,
literal|0x91
block|,
literal|0x16
block|,
literal|0x93
block|,
literal|0x94
block|,
literal|0x95
block|,
literal|0x96
block|,
literal|0x04
block|,
comment|/* 30-3f:           */
literal|0x98
block|,
literal|0x99
block|,
literal|0x9a
block|,
literal|0x9b
block|,
literal|0x14
block|,
literal|0x15
block|,
literal|0x9e
block|,
literal|0x1a
block|,
comment|/* ................ */
literal|0x20
block|,
literal|0xa0
block|,
literal|0xe2
block|,
literal|0xe4
block|,
literal|0xe0
block|,
literal|0xe1
block|,
literal|0xe3
block|,
literal|0xe5
block|,
comment|/* 40-4f:           */
literal|0xe7
block|,
literal|0xf1
block|,
literal|0xa2
block|,
literal|0x2e
block|,
literal|0x3c
block|,
literal|0x28
block|,
literal|0x2b
block|,
literal|0x7c
block|,
comment|/*  ...........<(+| */
literal|0x26
block|,
literal|0xe9
block|,
literal|0xea
block|,
literal|0xeb
block|,
literal|0xe8
block|,
literal|0xed
block|,
literal|0xee
block|,
literal|0xef
block|,
comment|/* 50-5f:           */
literal|0xec
block|,
literal|0xdf
block|,
literal|0x21
block|,
literal|0x24
block|,
literal|0x2a
block|,
literal|0x29
block|,
literal|0x3b
block|,
literal|0x5e
block|,
comment|/*&.........!$*);^ */
literal|0x2d
block|,
literal|0x2f
block|,
literal|0xc2
block|,
literal|0xc4
block|,
literal|0xc0
block|,
literal|0xc1
block|,
literal|0xc3
block|,
literal|0xc5
block|,
comment|/* 60-6f:           */
literal|0xc7
block|,
literal|0xd1
block|,
literal|0xa6
block|,
literal|0x2c
block|,
literal|0x25
block|,
literal|0x5f
block|,
literal|0x3e
block|,
literal|0x3f
block|,
comment|/* -/.........,%_>? */
literal|0xf8
block|,
literal|0xc9
block|,
literal|0xca
block|,
literal|0xcb
block|,
literal|0xc8
block|,
literal|0xcd
block|,
literal|0xce
block|,
literal|0xcf
block|,
comment|/* 70-7f:           */
literal|0xcc
block|,
literal|0x60
block|,
literal|0x3a
block|,
literal|0x23
block|,
literal|0x40
block|,
literal|0x27
block|,
literal|0x3d
block|,
literal|0x22
block|,
comment|/* .........`:#@'=" */
literal|0xd8
block|,
literal|0x61
block|,
literal|0x62
block|,
literal|0x63
block|,
literal|0x64
block|,
literal|0x65
block|,
literal|0x66
block|,
literal|0x67
block|,
comment|/* 80-8f:           */
literal|0x68
block|,
literal|0x69
block|,
literal|0xab
block|,
literal|0xbb
block|,
literal|0xf0
block|,
literal|0xfd
block|,
literal|0xfe
block|,
literal|0xb1
block|,
comment|/* .abcdefghi...... */
literal|0xb0
block|,
literal|0x6a
block|,
literal|0x6b
block|,
literal|0x6c
block|,
literal|0x6d
block|,
literal|0x6e
block|,
literal|0x6f
block|,
literal|0x70
block|,
comment|/* 90-9f:           */
literal|0x71
block|,
literal|0x72
block|,
literal|0xaa
block|,
literal|0xba
block|,
literal|0xe6
block|,
literal|0xb8
block|,
literal|0xc6
block|,
literal|0xa4
block|,
comment|/* .jklmnopqr...... */
literal|0xb5
block|,
literal|0x7e
block|,
literal|0x73
block|,
literal|0x74
block|,
literal|0x75
block|,
literal|0x76
block|,
literal|0x77
block|,
literal|0x78
block|,
comment|/* a0-af:           */
literal|0x79
block|,
literal|0x7a
block|,
literal|0xa1
block|,
literal|0xbf
block|,
literal|0xd0
block|,
literal|0x5b
block|,
literal|0xde
block|,
literal|0xae
block|,
comment|/* .~stuvwxyz...[.. */
literal|0xac
block|,
literal|0xa3
block|,
literal|0xa5
block|,
literal|0xb7
block|,
literal|0xa9
block|,
literal|0xa7
block|,
literal|0xb6
block|,
literal|0xbc
block|,
comment|/* b0-bf:           */
literal|0xbd
block|,
literal|0xbe
block|,
literal|0xdd
block|,
literal|0xa8
block|,
literal|0xaf
block|,
literal|0x5d
block|,
literal|0xb4
block|,
literal|0xd7
block|,
comment|/* .............].. */
literal|0x7b
block|,
literal|0x41
block|,
literal|0x42
block|,
literal|0x43
block|,
literal|0x44
block|,
literal|0x45
block|,
literal|0x46
block|,
literal|0x47
block|,
comment|/* c0-cf:           */
literal|0x48
block|,
literal|0x49
block|,
literal|0xad
block|,
literal|0xf4
block|,
literal|0xf6
block|,
literal|0xf2
block|,
literal|0xf3
block|,
literal|0xf5
block|,
comment|/* {ABCDEFGHI...... */
literal|0x7d
block|,
literal|0x4a
block|,
literal|0x4b
block|,
literal|0x4c
block|,
literal|0x4d
block|,
literal|0x4e
block|,
literal|0x4f
block|,
literal|0x50
block|,
comment|/* d0-df:           */
literal|0x51
block|,
literal|0x52
block|,
literal|0xb9
block|,
literal|0xfb
block|,
literal|0xfc
block|,
literal|0xf9
block|,
literal|0xfa
block|,
literal|0xff
block|,
comment|/* }JKLMNOPQR...... */
literal|0x5c
block|,
literal|0xf7
block|,
literal|0x53
block|,
literal|0x54
block|,
literal|0x55
block|,
literal|0x56
block|,
literal|0x57
block|,
literal|0x58
block|,
comment|/* e0-ef:           */
literal|0x59
block|,
literal|0x5a
block|,
literal|0xb2
block|,
literal|0xd4
block|,
literal|0xd6
block|,
literal|0xd2
block|,
literal|0xd3
block|,
literal|0xd5
block|,
comment|/* \.STUVWXYZ...... */
literal|0x30
block|,
literal|0x31
block|,
literal|0x32
block|,
literal|0x33
block|,
literal|0x34
block|,
literal|0x35
block|,
literal|0x36
block|,
literal|0x37
block|,
comment|/* f0-ff:           */
literal|0x38
block|,
literal|0x39
block|,
literal|0xb3
block|,
literal|0xdb
block|,
literal|0xdc
block|,
literal|0xd9
block|,
literal|0xda
block|,
literal|0x9f
comment|/* 0123456789...... */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* The US-ASCII to EBCDIC (character set IBM-1047) table: This table is bijective (no ambiguous or duplicate characters) */
end_comment

begin_decl_stmt
specifier|const
name|unsigned
name|char
name|os_toebcdic
index|[
literal|256
index|]
init|=
block|{
literal|0x00
block|,
literal|0x01
block|,
literal|0x02
block|,
literal|0x03
block|,
literal|0x37
block|,
literal|0x2d
block|,
literal|0x2e
block|,
literal|0x2f
block|,
comment|/* 00-0f:           */
literal|0x16
block|,
literal|0x05
block|,
literal|0x15
block|,
literal|0x0b
block|,
literal|0x0c
block|,
literal|0x0d
block|,
literal|0x0e
block|,
literal|0x0f
block|,
comment|/* ................ */
literal|0x10
block|,
literal|0x11
block|,
literal|0x12
block|,
literal|0x13
block|,
literal|0x3c
block|,
literal|0x3d
block|,
literal|0x32
block|,
literal|0x26
block|,
comment|/* 10-1f:           */
literal|0x18
block|,
literal|0x19
block|,
literal|0x3f
block|,
literal|0x27
block|,
literal|0x1c
block|,
literal|0x1d
block|,
literal|0x1e
block|,
literal|0x1f
block|,
comment|/* ................ */
literal|0x40
block|,
literal|0x5a
block|,
literal|0x7f
block|,
literal|0x7b
block|,
literal|0x5b
block|,
literal|0x6c
block|,
literal|0x50
block|,
literal|0x7d
block|,
comment|/* 20-2f:           */
literal|0x4d
block|,
literal|0x5d
block|,
literal|0x5c
block|,
literal|0x4e
block|,
literal|0x6b
block|,
literal|0x60
block|,
literal|0x4b
block|,
literal|0x61
block|,
comment|/*  !"#$%&'()*+,-./ */
literal|0xf0
block|,
literal|0xf1
block|,
literal|0xf2
block|,
literal|0xf3
block|,
literal|0xf4
block|,
literal|0xf5
block|,
literal|0xf6
block|,
literal|0xf7
block|,
comment|/* 30-3f:           */
literal|0xf8
block|,
literal|0xf9
block|,
literal|0x7a
block|,
literal|0x5e
block|,
literal|0x4c
block|,
literal|0x7e
block|,
literal|0x6e
block|,
literal|0x6f
block|,
comment|/* 0123456789:;<=>? */
literal|0x7c
block|,
literal|0xc1
block|,
literal|0xc2
block|,
literal|0xc3
block|,
literal|0xc4
block|,
literal|0xc5
block|,
literal|0xc6
block|,
literal|0xc7
block|,
comment|/* 40-4f:           */
literal|0xc8
block|,
literal|0xc9
block|,
literal|0xd1
block|,
literal|0xd2
block|,
literal|0xd3
block|,
literal|0xd4
block|,
literal|0xd5
block|,
literal|0xd6
block|,
comment|/* @ABCDEFGHIJKLMNO */
literal|0xd7
block|,
literal|0xd8
block|,
literal|0xd9
block|,
literal|0xe2
block|,
literal|0xe3
block|,
literal|0xe4
block|,
literal|0xe5
block|,
literal|0xe6
block|,
comment|/* 50-5f:           */
literal|0xe7
block|,
literal|0xe8
block|,
literal|0xe9
block|,
literal|0xad
block|,
literal|0xe0
block|,
literal|0xbd
block|,
literal|0x5f
block|,
literal|0x6d
block|,
comment|/* PQRSTUVWXYZ[\]^_ */
literal|0x79
block|,
literal|0x81
block|,
literal|0x82
block|,
literal|0x83
block|,
literal|0x84
block|,
literal|0x85
block|,
literal|0x86
block|,
literal|0x87
block|,
comment|/* 60-6f:           */
literal|0x88
block|,
literal|0x89
block|,
literal|0x91
block|,
literal|0x92
block|,
literal|0x93
block|,
literal|0x94
block|,
literal|0x95
block|,
literal|0x96
block|,
comment|/* `abcdefghijklmno */
literal|0x97
block|,
literal|0x98
block|,
literal|0x99
block|,
literal|0xa2
block|,
literal|0xa3
block|,
literal|0xa4
block|,
literal|0xa5
block|,
literal|0xa6
block|,
comment|/* 70-7f:           */
literal|0xa7
block|,
literal|0xa8
block|,
literal|0xa9
block|,
literal|0xc0
block|,
literal|0x4f
block|,
literal|0xd0
block|,
literal|0xa1
block|,
literal|0x07
block|,
comment|/* pqrstuvwxyz{|}~. */
literal|0x20
block|,
literal|0x21
block|,
literal|0x22
block|,
literal|0x23
block|,
literal|0x24
block|,
literal|0x04
block|,
literal|0x06
block|,
literal|0x08
block|,
comment|/* 80-8f:           */
literal|0x28
block|,
literal|0x29
block|,
literal|0x2a
block|,
literal|0x2b
block|,
literal|0x2c
block|,
literal|0x09
block|,
literal|0x0a
block|,
literal|0x14
block|,
comment|/* ................ */
literal|0x30
block|,
literal|0x31
block|,
literal|0x25
block|,
literal|0x33
block|,
literal|0x34
block|,
literal|0x35
block|,
literal|0x36
block|,
literal|0x17
block|,
comment|/* 90-9f:           */
literal|0x38
block|,
literal|0x39
block|,
literal|0x3a
block|,
literal|0x3b
block|,
literal|0x1a
block|,
literal|0x1b
block|,
literal|0x3e
block|,
literal|0xff
block|,
comment|/* ................ */
literal|0x41
block|,
literal|0xaa
block|,
literal|0x4a
block|,
literal|0xb1
block|,
literal|0x9f
block|,
literal|0xb2
block|,
literal|0x6a
block|,
literal|0xb5
block|,
comment|/* a0-af:           */
literal|0xbb
block|,
literal|0xb4
block|,
literal|0x9a
block|,
literal|0x8a
block|,
literal|0xb0
block|,
literal|0xca
block|,
literal|0xaf
block|,
literal|0xbc
block|,
comment|/* ................ */
literal|0x90
block|,
literal|0x8f
block|,
literal|0xea
block|,
literal|0xfa
block|,
literal|0xbe
block|,
literal|0xa0
block|,
literal|0xb6
block|,
literal|0xb3
block|,
comment|/* b0-bf:           */
literal|0x9d
block|,
literal|0xda
block|,
literal|0x9b
block|,
literal|0x8b
block|,
literal|0xb7
block|,
literal|0xb8
block|,
literal|0xb9
block|,
literal|0xab
block|,
comment|/* ................ */
literal|0x64
block|,
literal|0x65
block|,
literal|0x62
block|,
literal|0x66
block|,
literal|0x63
block|,
literal|0x67
block|,
literal|0x9e
block|,
literal|0x68
block|,
comment|/* c0-cf:           */
literal|0x74
block|,
literal|0x71
block|,
literal|0x72
block|,
literal|0x73
block|,
literal|0x78
block|,
literal|0x75
block|,
literal|0x76
block|,
literal|0x77
block|,
comment|/* ................ */
literal|0xac
block|,
literal|0x69
block|,
literal|0xed
block|,
literal|0xee
block|,
literal|0xeb
block|,
literal|0xef
block|,
literal|0xec
block|,
literal|0xbf
block|,
comment|/* d0-df:           */
literal|0x80
block|,
literal|0xfd
block|,
literal|0xfe
block|,
literal|0xfb
block|,
literal|0xfc
block|,
literal|0xba
block|,
literal|0xae
block|,
literal|0x59
block|,
comment|/* ................ */
literal|0x44
block|,
literal|0x45
block|,
literal|0x42
block|,
literal|0x46
block|,
literal|0x43
block|,
literal|0x47
block|,
literal|0x9c
block|,
literal|0x48
block|,
comment|/* e0-ef:           */
literal|0x54
block|,
literal|0x51
block|,
literal|0x52
block|,
literal|0x53
block|,
literal|0x58
block|,
literal|0x55
block|,
literal|0x56
block|,
literal|0x57
block|,
comment|/* ................ */
literal|0x8c
block|,
literal|0x49
block|,
literal|0xcd
block|,
literal|0xce
block|,
literal|0xcb
block|,
literal|0xcf
block|,
literal|0xcc
block|,
literal|0xe1
block|,
comment|/* f0-ff:           */
literal|0x70
block|,
literal|0xdd
block|,
literal|0xde
block|,
literal|0xdb
block|,
literal|0xdc
block|,
literal|0x8d
block|,
literal|0x8e
block|,
literal|0xdf
comment|/* ................ */
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*_OSD_POSIX*/
end_comment

begin_comment
comment|/* Translate a memory block from EBCDIC (host charset) to ASCII (net charset)  * dest and srce may be identical, or separate memory blocks, but  * should not overlap. These functions intentionally have an interface  * compatible to memcpy(3).  */
end_comment

begin_function
name|void
modifier|*
name|ebcdic2ascii
parameter_list|(
name|void
modifier|*
name|dest
parameter_list|,
specifier|const
name|void
modifier|*
name|srce
parameter_list|,
name|size_t
name|count
parameter_list|)
block|{
name|unsigned
name|char
modifier|*
name|udest
init|=
name|dest
decl_stmt|;
specifier|const
name|unsigned
name|char
modifier|*
name|usrce
init|=
name|srce
decl_stmt|;
while|while
condition|(
name|count
operator|--
operator|!=
literal|0
condition|)
block|{
operator|*
name|udest
operator|++
operator|=
name|os_toascii
index|[
operator|*
name|usrce
operator|++
index|]
expr_stmt|;
block|}
return|return
name|dest
return|;
block|}
end_function

begin_function
name|void
modifier|*
name|ascii2ebcdic
parameter_list|(
name|void
modifier|*
name|dest
parameter_list|,
specifier|const
name|void
modifier|*
name|srce
parameter_list|,
name|size_t
name|count
parameter_list|)
block|{
name|unsigned
name|char
modifier|*
name|udest
init|=
name|dest
decl_stmt|;
specifier|const
name|unsigned
name|char
modifier|*
name|usrce
init|=
name|srce
decl_stmt|;
while|while
condition|(
name|count
operator|--
operator|!=
literal|0
condition|)
block|{
operator|*
name|udest
operator|++
operator|=
name|os_toebcdic
index|[
operator|*
name|usrce
operator|++
index|]
expr_stmt|;
block|}
return|return
name|dest
return|;
block|}
end_function

begin_else
else|#
directive|else
end_else

begin_comment
comment|/*CHARSET_EBCDIC*/
end_comment

begin_if
if|#
directive|if
name|defined
argument_list|(
name|PEDANTIC
argument_list|)
operator|||
name|defined
argument_list|(
name|VMS
argument_list|)
operator|||
name|defined
argument_list|(
name|__VMS
argument_list|)
end_if

begin_decl_stmt
specifier|static
name|void
modifier|*
name|dummy
init|=
operator|&
name|dummy
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

end_unit

