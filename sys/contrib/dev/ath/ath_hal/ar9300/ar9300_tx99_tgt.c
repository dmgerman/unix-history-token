begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2013 Qualcomm Atheros, Inc.  *  * Permission to use, copy, modify, and/or distribute this software for any  * purpose with or without fee is hereby granted, provided that the above  * copyright notice and this permission notice appear in all copies.  *  * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH  * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY  * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,  * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM  * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR  * OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR  * PERFORMANCE OF THIS SOFTWARE.  */
end_comment

begin_comment
comment|/*  *  Copyright (c) 2010 Atheros Communications Inc.  *  * Permission to use, copy, modify, and/or distribute this software for any  * purpose with or without fee is hereby granted, provided that the above  * copyright notice and this permission notice appear in all copies.  *  * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES  * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF  * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR  * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES  * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN  * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF  * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.  */
end_comment

begin_include
include|#
directive|include
file|"ah.h"
end_include

begin_include
include|#
directive|include
file|"ah_internal.h"
end_include

begin_include
include|#
directive|include
file|"ar9300phy.h"
end_include

begin_include
include|#
directive|include
file|"ar9300reg.h"
end_include

begin_include
include|#
directive|include
file|"ar9300eep.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|ATH_TX99_DIAG
end_ifdef

begin_function
name|void
name|ar9300_tx99_tgt_channel_pwr_update
parameter_list|(
name|struct
name|ath_hal
modifier|*
name|ah
parameter_list|,
name|HAL_CHANNEL
modifier|*
name|c
parameter_list|,
name|u_int32_t
name|txpower
parameter_list|)
block|{
define|#
directive|define
name|PWR_MAS
parameter_list|(
name|_r
parameter_list|,
name|_s
parameter_list|)
value|(((_r)& 0x3f)<< (_s))
specifier|static
name|int16_t
name|pPwrArray
index|[
name|ar9300_rate_size
index|]
init|=
block|{
literal|0
block|}
decl_stmt|;
name|int32_t
name|i
decl_stmt|;
comment|//u_int8_t ht40PowerIncForPdadc = 2;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|ar9300_rate_size
condition|;
name|i
operator|++
control|)
name|pPwrArray
index|[
name|i
index|]
operator|=
name|txpower
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TX_FORCED_GAIN
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Write the OFDM power per rate set */
comment|/* 6 (LSB), 9, 12, 18 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|1
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_6_24
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_6_24
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_6_24
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_6_24
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 24 (LSB), 36, 48, 54 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|2
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_54
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_48
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_36
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_6_24
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Write the CCK power per rate set */
comment|/* 1L (LSB), reserved, 2L, 2S (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|3
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_1L_5L
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_1L_5L
index|]
argument_list|,
literal|16
argument_list|)
comment|//		  | PWR_MAS(txPowerTimes2,  8) /* this is reserved for Osprey */
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_1L_5L
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 5.5L (LSB), 5.5S, 11L, 11S (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|4
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_11S
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_11L
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_5S
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_LEGACY_1L_5L
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Write the HT20 power per rate set */
comment|/* 0/8/16 (LSB), 1-3/9-11/17-19, 4, 5 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|5
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_5
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_4
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_1_3_9_11_17_19
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_0_8_16
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 6 (LSB), 7, 12, 13 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|6
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_13
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_12
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_7
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_6
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 14 (LSB), 15, 20, 21 */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|10
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_21
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_20
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_15
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_14
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Mixed HT20 and HT40 rates */
comment|/* HT20 22 (LSB), HT20 23, HT40 22, HT40 23 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|11
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_23
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_22
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_23
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT20_22
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* Write the HT40 power per rate set */
comment|// correct PAR difference between HT40 and HT20/LEGACY
comment|/* 0/8/16 (LSB), 1-3/9-11/17-19, 4, 5 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|7
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_5
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_4
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_1_3_9_11_17_19
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_0_8_16
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 6 (LSB), 7, 12, 13 (MSB) */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|8
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_13
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_12
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_7
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_6
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
comment|/* 14 (LSB), 15, 20, 21 */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_POWER_TX_RATE
argument_list|(
literal|12
argument_list|)
argument_list|,
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_21
index|]
argument_list|,
literal|24
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_20
index|]
argument_list|,
literal|16
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_15
index|]
argument_list|,
literal|8
argument_list|)
operator||
name|PWR_MAS
argument_list|(
name|pPwrArray
index|[
name|ALL_TARGET_HT40_14
index|]
argument_list|,
literal|0
argument_list|)
argument_list|)
expr_stmt|;
undef|#
directive|undef
name|PWR_MAS
block|}
end_function

begin_function
name|void
name|ar9300_tx99_tgt_chainmsk_setup
parameter_list|(
name|struct
name|ath_hal
modifier|*
name|ah
parameter_list|,
name|int
name|tx_chainmask
parameter_list|)
block|{
if|if
condition|(
name|tx_chainmask
operator|==
literal|0x5
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_ANALOG_SWAP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_ANALOG_SWAP
argument_list|)
operator||
name|AR_PHY_SWAP_ALT_CHAIN
argument_list|)
expr_stmt|;
block|}
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_RX_CHAINMASK
argument_list|,
name|tx_chainmask
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_CAL_CHAINMASK
argument_list|,
name|tx_chainmask
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_SELFGEN_MASK
argument_list|,
name|tx_chainmask
argument_list|)
expr_stmt|;
if|if
condition|(
name|tx_chainmask
operator|==
literal|0x5
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_ANALOG_SWAP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_ANALOG_SWAP
argument_list|)
operator||
name|AR_PHY_SWAP_ALT_CHAIN
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|ar9300_tx99_tgt_set_single_carrier
parameter_list|(
name|struct
name|ath_hal
modifier|*
name|ah
parameter_list|,
name|int
name|tx_chain_mask
parameter_list|,
name|int
name|chtype
parameter_list|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TST_DAC_CONST
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TST_DAC_CONST
argument_list|)
operator||
operator|(
literal|0x7ff
operator|<<
literal|11
operator|)
operator||
literal|0x7ff
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TEST_CTL_STATUS
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TEST_CTL_STATUS
argument_list|)
operator||
operator|(
literal|1
operator|<<
literal|7
operator|)
operator||
operator|(
literal|1
operator|<<
literal|1
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_ADDAC_PARA_CTL
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_ADDAC_PARA_CTL
argument_list|)
operator||
operator|(
literal|1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|1
operator|<<
literal|15
operator|)
operator|)
operator|&
operator|~
operator|(
literal|1
operator|<<
literal|13
operator|)
argument_list|)
expr_stmt|;
comment|/* 11G mode */
if|if
condition|(
operator|!
name|chtype
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
comment|/* chain zero */
if|if
condition|(
operator|(
name|tx_chain_mask
operator|&
literal|0x01
operator|)
operator|==
literal|0x01
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|0x5
operator|<<
literal|15
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|9
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|27
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|12
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|7
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|11
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|25
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|28
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|24
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|7
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|21
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|6
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|5
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|4
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
comment|/* chain one */
if|if
condition|(
operator|(
name|tx_chain_mask
operator|&
literal|0x02
operator|)
operator|==
literal|0x02
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|0x5
operator|<<
literal|15
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|9
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|27
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|12
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|7
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|11
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|25
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|28
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|24
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|7
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|21
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|6
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|5
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|4
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
condition|)
block|{
comment|/* chain two */
if|if
condition|(
operator|(
name|tx_chain_mask
operator|&
literal|0x04
operator|)
operator|==
literal|0x04
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|0x5
operator|<<
literal|15
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|9
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|27
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|12
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|7
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|11
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|25
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|28
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|24
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|7
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|21
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|6
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|5
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|4
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_SWITCH_COM_2
argument_list|,
literal|0x11111
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_SWITCH_COM
argument_list|,
literal|0x111
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/* chain zero */
if|if
condition|(
operator|(
name|tx_chain_mask
operator|&
literal|0x01
operator|)
operator|==
literal|0x01
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|27
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|15
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|9
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|12
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|7
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|11
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|25
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|28
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|24
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|7
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|21
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF2
argument_list|)
operator||
operator|(
literal|0x3
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF3
argument_list|)
operator||
operator|(
literal|0x3
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|20
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|17
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|14
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|6
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|5
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|4
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_BB2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
comment|/* chain one */
if|if
condition|(
operator|(
name|tx_chain_mask
operator|&
literal|0x02
operator|)
operator|==
literal|0x02
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|27
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|15
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|9
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|12
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|7
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|11
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|25
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|28
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|24
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|7
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|21
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF2
argument_list|)
operator||
operator|(
literal|0x3
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF3
argument_list|)
operator||
operator|(
literal|0x3
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|20
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|17
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|14
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|6
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|5
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|4
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_BB2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
condition|)
block|{
comment|/* chain two */
if|if
condition|(
operator|(
name|tx_chain_mask
operator|&
literal|0x04
operator|)
operator|==
literal|0x04
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|AR_SREV_OSPREY
argument_list|(
name|ah
argument_list|)
operator|||
name|AR_SREV_WASP
argument_list|(
name|ah
argument_list|)
condition|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP
argument_list|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|4
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_HORNET_CH0_TOP2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x7
operator|<<
literal|24
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|22
operator|)
argument_list|)
expr_stmt|;
block|}
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH1_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|27
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|15
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|9
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|12
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|7
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|1
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|11
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_RXTX3
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|25
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|19
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|28
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|24
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|22
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|7
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|23
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|21
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF2
argument_list|)
operator||
operator|(
literal|0x3
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|0
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF3
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_TXRF3
argument_list|)
operator||
operator|(
literal|0x3
operator|<<
literal|29
operator|)
operator||
operator|(
literal|0x3
operator|<<
literal|26
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|23
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|20
operator|)
operator||
operator|(
literal|0x2
operator|<<
literal|17
operator|)
operator|)
operator|&
operator|~
operator|(
literal|0x1
operator|<<
literal|14
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB1
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB1
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|12
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|10
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|9
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|8
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|6
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|5
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|4
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|3
operator|)
operator||
operator|(
literal|0x1
operator|<<
literal|2
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB2
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_65NM_CH2_BB2
argument_list|)
operator||
operator|(
literal|0x1
operator|<<
literal|31
operator|)
argument_list|)
expr_stmt|;
block|}
block|}
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_SWITCH_COM_2
argument_list|,
literal|0x22222
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_SWITCH_COM
argument_list|,
literal|0x222
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|ar9300_tx99_tgt_start
parameter_list|(
name|struct
name|ath_hal
modifier|*
name|ah
parameter_list|,
name|u_int8_t
name|data
parameter_list|)
block|{
name|a_uint32_t
name|val
decl_stmt|;
name|a_uint32_t
name|qnum
init|=
operator|(
name|a_uint32_t
operator|)
name|data
decl_stmt|;
comment|/* Disable AGC to A2 */
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TEST
argument_list|,
operator|(
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TEST
argument_list|)
operator||
name|PHY_AGC_CLR
operator|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
literal|0x9864
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
literal|0x9864
argument_list|)
operator||
literal|0x7f000
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
literal|0x9924
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
literal|0x9924
argument_list|)
operator||
literal|0x7f00fe
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_DIAG_SW
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_DIAG_SW
argument_list|)
operator|&
operator|~
name|AR_DIAG_RX_DIS
argument_list|)
expr_stmt|;
comment|//OS_REG_WRITE(ah, AR_DIAG_SW, OS_REG_READ(ah, AR_DIAG_SW) | (AR_DIAG_FORCE_RX_CLEAR+AR_DIAG_IGNORE_VIRT_CS));
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_CR
argument_list|,
name|AR_CR_RXD
argument_list|)
expr_stmt|;
comment|// set receive disable
comment|//set CW_MIN and CW_MAX both to 0, AIFS=2
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_DLCL_IFS
argument_list|(
name|qnum
argument_list|)
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_D_GBL_IFS_SIFS
argument_list|,
literal|20
argument_list|)
expr_stmt|;
comment|//50 OK
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_D_GBL_IFS_EIFS
argument_list|,
literal|20
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_TIME_OUT
argument_list|,
literal|0x00000400
argument_list|)
expr_stmt|;
comment|//200 ok for HT20, 400 ok for HT40
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_DRETRY_LIMIT
argument_list|(
name|qnum
argument_list|)
argument_list|,
literal|0xffffffff
argument_list|)
expr_stmt|;
comment|/* set QCU modes to early termination */
name|val
operator|=
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_QMISC
argument_list|(
name|qnum
argument_list|)
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_QMISC
argument_list|(
name|qnum
argument_list|)
argument_list|,
name|val
operator||
name|AR_Q_MISC_DCU_EARLY_TERM_REQ
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|ar9300_tx99_tgt_stop
parameter_list|(
name|struct
name|ath_hal
modifier|*
name|ah
parameter_list|)
block|{
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TEST
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_PHY_TEST
argument_list|)
operator|&
operator|~
name|PHY_AGC_CLR
argument_list|)
expr_stmt|;
name|OS_REG_WRITE
argument_list|(
name|ah
argument_list|,
name|AR_DIAG_SW
argument_list|,
name|OS_REG_READ
argument_list|(
name|ah
argument_list|,
name|AR_DIAG_SW
argument_list|)
operator|&
operator|~
operator|(
name|AR_DIAG_FORCE_RX_CLEAR
operator||
name|AR_DIAG_IGNORE_VIRT_CS
operator|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

end_unit

