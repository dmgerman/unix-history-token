begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*- ******************************************************************************* Copyright (C) 2015 Annapurna Labs Ltd.  This file may be licensed under the terms of the Annapurna Labs Commercial License Agreement.  Alternatively, this file can be distributed under the terms of the GNU General Public License V2 as published by the Free Software Foundation and can be found at http://www.gnu.org/licenses/gpl-2.0.html  Alternatively, redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:      *     Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.      *     Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *******************************************************************************/
end_comment

begin_comment
comment|/**  * @file   al_hal_udma_debug.c  *  * @brief  Universal DMA HAL driver for debug  *  */
end_comment

begin_define
define|#
directive|define
name|DEBUG
end_define

begin_include
include|#
directive|include
file|<al_hal_common.h>
end_include

begin_include
include|#
directive|include
file|<al_hal_udma_regs.h>
end_include

begin_include
include|#
directive|include
file|<al_hal_udma_debug.h>
end_include

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_axi_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S AXI regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|comp_wr_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|comp_wr_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|data_rd_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|data_rd_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|desc_rd_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|desc_rd_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|data_rd_cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|desc_rd_cfg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|desc_wr_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|desc_wr_cfg_1
argument_list|,
name|max_axi_beats
argument_list|,
name|UDMA_AXI_M2S_DESC_WR_CFG_1_MAX_AXI_BEATS
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|desc_wr_cfg_1
argument_list|,
name|min_axi_beats
argument_list|,
name|UDMA_AXI_M2S_DESC_WR_CFG_1_MIN_AXI_BEATS
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|axi_m2s
argument_list|,
name|ostand_cfg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_general_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S general regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|state
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|state
argument_list|,
name|comp_ctrl
argument_list|,
name|UDMA_M2S_STATE_COMP_CTRL
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|state
argument_list|,
name|stream_if
argument_list|,
name|UDMA_M2S_STATE_STREAM_IF
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|state
argument_list|,
name|rd_ctrl
argument_list|,
name|UDMA_M2S_STATE_DATA_RD_CTRL
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|state
argument_list|,
name|desc_pref
argument_list|,
name|UDMA_M2S_STATE_DESC_PREF
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|err_log_mask
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|log_0
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|log_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|log_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|log_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|data_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|header_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|unack_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|check_en
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|fifo_en
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|cfg_len
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|stream_cfg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_rd_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S read regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|desc_pref_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|desc_pref_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|desc_pref_cfg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|desc_pref_cfg_3
argument_list|,
name|min_burst_below_thr
argument_list|,
name|UDMA_M2S_RD_DESC_PREF_CFG_3_MIN_BURST_BELOW_THR
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|desc_pref_cfg_3
argument_list|,
name|min_burst_above_thr
argument_list|,
name|UDMA_M2S_RD_DESC_PREF_CFG_3_MIN_BURST_ABOVE_THR
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|desc_pref_cfg_3
argument_list|,
name|pref_thr
argument_list|,
name|UDMA_M2S_RD_DESC_PREF_CFG_3_PREF_THR
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_rd
argument_list|,
name|data_cfg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_dwrr_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S DWRR regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_dwrr
argument_list|,
name|cfg_sched
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_rate_limiter_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S rate limiter regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_rate_limiter
argument_list|,
name|gen_cfg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_stream_rate_limiter_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S stream rate limiter regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stream_rate_limiter
argument_list|,
name|rlimit
operator|.
name|cfg_1s
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stream_rate_limiter
argument_list|,
name|rlimit
operator|.
name|cfg_cycle
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stream_rate_limiter
argument_list|,
name|rlimit
operator|.
name|cfg_token_size_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stream_rate_limiter
argument_list|,
name|rlimit
operator|.
name|cfg_token_size_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stream_rate_limiter
argument_list|,
name|rlimit
operator|.
name|mask
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_comp_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S completion regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_1c
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_1c
argument_list|,
name|comp_fifo_depth
argument_list|,
name|UDMA_M2S_COMP_CFG_1C_COMP_FIFO_DEPTH
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_1c
argument_list|,
name|unack_fifo_depth
argument_list|,
name|UDMA_M2S_COMP_CFG_1C_UNACK_FIFO_DEPTH
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_BIT
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_1c
argument_list|,
name|q_promotion
argument_list|,
name|UDMA_M2S_COMP_CFG_1C_Q_PROMOTION
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_BIT
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_1c
argument_list|,
name|force_rr
argument_list|,
name|UDMA_M2S_COMP_CFG_1C_FORCE_RR
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG_FIELD
argument_list|(
name|udma
argument_list|,
literal|"  "
argument_list|,
literal|"\n"
argument_list|,
literal|"%d"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_1c
argument_list|,
name|q_free_min
argument_list|,
name|UDMA_M2S_COMP_CFG_1C_Q_FREE_MIN
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_coal
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_comp
argument_list|,
name|cfg_application_ack
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_stat_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S statistics regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|cfg_st
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|tx_pkt
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|tx_bytes_low
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|tx_bytes_high
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|prefed_desc
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|comp_pkt
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|comp_desc
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_stat
argument_list|,
name|ack_pkts
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_feature_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S feature regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_feature
argument_list|,
name|reg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_feature
argument_list|,
name|reg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_feature
argument_list|,
name|reg_4
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_feature
argument_list|,
name|reg_5
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_m2s_q_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|,
name|uint32_t
name|qid
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"M2S Q[%d] status regs:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|al_reg_write32
argument_list|(
operator|&
name|udma
operator|->
name|udma_regs
operator|->
name|m2s
operator|.
name|m2s
operator|.
name|indirect_ctrl
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|sel_pref_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|sel_comp_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|sel_rate_limit_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s
argument_list|,
name|sel_dwrr_status
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|"M2S Q[%d] regs:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tdrbp_low
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tdrbp_high
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tdrl
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tdrhp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tdrtp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tdcp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tcrbp_low
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tcrbp_high
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|tcrhp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|rlimit
operator|.
name|cfg_1s
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|rlimit
operator|.
name|cfg_cycle
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|rlimit
operator|.
name|cfg_token_size_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|rlimit
operator|.
name|cfg_token_size_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|rlimit
operator|.
name|mask
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|dwrr_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|dwrr_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|dwrr_cfg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|comp_cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|m2s
argument_list|,
name|m2s_q
index|[
name|qid
index|]
argument_list|,
name|q_tx_pkt
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_axi_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M AXI regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|data_wr_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|data_wr_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|desc_rd_cfg_4
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|desc_rd_cfg_5
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|comp_wr_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|comp_wr_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|data_wr_cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|desc_rd_cfg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|desc_wr_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|ostand_cfg_rd
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|axi_s2m
argument_list|,
name|ostand_cfg_wr
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_general_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M general regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|state
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|err_log_mask
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|log_0
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|log_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|log_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|log_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|s_data_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|s_header_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|axi_data_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|unack_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|check_en
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|fifo_en
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|stream_cfg
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_rd_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M read regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_rd
argument_list|,
name|desc_pref_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_rd
argument_list|,
name|desc_pref_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_rd
argument_list|,
name|desc_pref_cfg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_rd
argument_list|,
name|desc_pref_cfg_4
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_wr_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M write regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_wr
argument_list|,
name|data_cfg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_wr
argument_list|,
name|data_cfg_1
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_comp_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M completion regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_comp
argument_list|,
name|cfg_1c
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_comp
argument_list|,
name|cfg_2c
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_comp
argument_list|,
name|cfg_application_ack
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_stat_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M statistics regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|drop_pkt
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|rx_bytes_low
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|rx_bytes_high
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|prefed_desc
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|comp_pkt
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|comp_desc
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_stat
argument_list|,
name|ack_pkts
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_feature_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M feature regs:\n"
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_feature
argument_list|,
name|reg_1
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_feature
argument_list|,
name|reg_3
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_feature
argument_list|,
name|reg_4
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_feature
argument_list|,
name|reg_5
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_feature
argument_list|,
name|reg_6
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|al_udma_regs_s2m_q_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|,
name|uint32_t
name|qid
parameter_list|)
block|{
name|al_dbg
argument_list|(
literal|"S2M Q[%d] status regs:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|al_reg_write32
argument_list|(
operator|&
name|udma
operator|->
name|udma_regs
operator|->
name|m2s
operator|.
name|m2s
operator|.
name|indirect_ctrl
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|sel_pref_fifo_status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m
argument_list|,
name|sel_comp_fifo_status
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|"S2M Q[%d] regs:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rdrbp_low
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rdrbp_high
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rdrl
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rdrhp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rdrtp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rdcp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rcrbp_low
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rcrbp_high
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rcrhp
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|rcrhp_internal
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|comp_cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|comp_cfg_2
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|pkt_cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|qos_cfg
argument_list|)
expr_stmt|;
name|AL_UDMA_PRINT_REG
argument_list|(
name|udma
argument_list|,
literal|" "
argument_list|,
literal|"\n"
argument_list|,
name|s2m
argument_list|,
name|s2m_q
index|[
name|qid
index|]
argument_list|,
name|q_rx_pkt
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|al_udma_regs_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|,
name|unsigned
name|int
name|mask
parameter_list|)
block|{
name|uint32_t
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|udma
condition|)
return|return;
if|if
condition|(
name|udma
operator|->
name|type
operator|==
name|UDMA_TX
condition|)
block|{
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_AXI
condition|)
name|al_udma_regs_m2s_axi_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_GENERAL
condition|)
name|al_udma_regs_m2s_general_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_READ
condition|)
name|al_udma_regs_m2s_rd_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_DWRR
condition|)
name|al_udma_regs_m2s_dwrr_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_RATE_LIMITER
condition|)
name|al_udma_regs_m2s_rate_limiter_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_STREAM_RATE_LIMITER
condition|)
name|al_udma_regs_m2s_stream_rate_limiter_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_COMP
condition|)
name|al_udma_regs_m2s_comp_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_STAT
condition|)
name|al_udma_regs_m2s_stat_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_FEATURE
condition|)
name|al_udma_regs_m2s_feature_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|DMA_MAX_Q
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_QUEUE
argument_list|(
name|i
argument_list|)
condition|)
name|al_udma_regs_m2s_q_print
argument_list|(
name|udma
argument_list|,
name|i
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_AXI
condition|)
name|al_udma_regs_s2m_axi_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_GENERAL
condition|)
name|al_udma_regs_s2m_general_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_READ
condition|)
name|al_udma_regs_s2m_rd_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_WRITE
condition|)
name|al_udma_regs_s2m_wr_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_COMP
condition|)
name|al_udma_regs_s2m_comp_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_STAT
condition|)
name|al_udma_regs_s2m_stat_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_FEATURE
condition|)
name|al_udma_regs_s2m_feature_print
argument_list|(
name|udma
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|DMA_MAX_Q
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|mask
operator|&
name|AL_UDMA_DEBUG_QUEUE
argument_list|(
name|i
argument_list|)
condition|)
name|al_udma_regs_s2m_q_print
argument_list|(
name|udma
argument_list|,
name|i
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
name|al_udma_q_struct_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|,
name|uint32_t
name|qid
parameter_list|)
block|{
name|struct
name|al_udma_q
modifier|*
name|queue
decl_stmt|;
if|if
condition|(
operator|!
name|udma
condition|)
return|return;
if|if
condition|(
name|qid
operator|>=
name|DMA_MAX_Q
condition|)
return|return;
name|queue
operator|=
operator|&
name|udma
operator|->
name|udma_q
index|[
name|qid
index|]
expr_stmt|;
name|al_dbg
argument_list|(
literal|"Q[%d] struct:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" size_mask = 0x%08x\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|size_mask
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" q_regs = %p\n"
argument_list|,
name|queue
operator|->
name|q_regs
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" desc_base_ptr = %p\n"
argument_list|,
name|queue
operator|->
name|desc_base_ptr
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" next_desc_idx = %d\n"
argument_list|,
operator|(
name|uint16_t
operator|)
name|queue
operator|->
name|next_desc_idx
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" desc_ring_id = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|desc_ring_id
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" cdesc_base_ptr = %p\n"
argument_list|,
name|queue
operator|->
name|cdesc_base_ptr
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" cdesc_size = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|cdesc_size
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" next_cdesc_idx = %d\n"
argument_list|,
operator|(
name|uint16_t
operator|)
name|queue
operator|->
name|next_cdesc_idx
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" end_cdesc_ptr = %p\n"
argument_list|,
name|queue
operator|->
name|end_cdesc_ptr
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" comp_head_idx = %d\n"
argument_list|,
operator|(
name|uint16_t
operator|)
name|queue
operator|->
name|comp_head_idx
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" comp_head_ptr = %p\n"
argument_list|,
name|queue
operator|->
name|comp_head_ptr
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" pkt_crnt_descs = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|pkt_crnt_descs
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" comp_ring_id = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|comp_ring_id
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" desc_phy_base = 0x%016llx\n"
argument_list|,
operator|(
name|uint64_t
operator|)
name|queue
operator|->
name|desc_phy_base
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" cdesc_phy_base = 0x%016llx\n"
argument_list|,
operator|(
name|uint64_t
operator|)
name|queue
operator|->
name|cdesc_phy_base
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" flags = 0x%08x\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|flags
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" size = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|size
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" status = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|status
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" udma = %p\n"
argument_list|,
name|queue
operator|->
name|udma
argument_list|)
expr_stmt|;
name|al_dbg
argument_list|(
literal|" qid = %d\n"
argument_list|,
operator|(
name|uint32_t
operator|)
name|queue
operator|->
name|qid
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
name|al_udma_ring_print
parameter_list|(
name|struct
name|al_udma
modifier|*
name|udma
parameter_list|,
name|uint32_t
name|qid
parameter_list|,
name|enum
name|al_udma_ring_type
name|rtype
parameter_list|)
block|{
name|struct
name|al_udma_q
modifier|*
name|queue
decl_stmt|;
name|uint32_t
name|desc_size
decl_stmt|;
name|void
modifier|*
name|base_ptr
decl_stmt|;
name|uint32_t
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|udma
condition|)
return|return;
if|if
condition|(
name|qid
operator|>=
name|DMA_MAX_Q
condition|)
return|return;
name|queue
operator|=
operator|&
name|udma
operator|->
name|udma_q
index|[
name|qid
index|]
expr_stmt|;
if|if
condition|(
name|rtype
operator|==
name|AL_RING_SUBMISSION
condition|)
block|{
name|base_ptr
operator|=
name|queue
operator|->
name|desc_base_ptr
expr_stmt|;
name|desc_size
operator|=
sizeof|sizeof
argument_list|(
expr|union
name|al_udma_desc
argument_list|)
expr_stmt|;
if|if
condition|(
name|base_ptr
condition|)
name|al_dbg
argument_list|(
literal|"Q[%d] submission ring pointers:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
else|else
block|{
name|al_dbg
argument_list|(
literal|"Q[%d] submission ring is not allocated\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
else|else
block|{
name|base_ptr
operator|=
name|queue
operator|->
name|cdesc_base_ptr
expr_stmt|;
name|desc_size
operator|=
name|queue
operator|->
name|cdesc_size
expr_stmt|;
if|if
condition|(
name|base_ptr
condition|)
name|al_dbg
argument_list|(
literal|"Q[%d] completion ring pointers:\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
else|else
block|{
name|al_dbg
argument_list|(
literal|"Q[%d] completion ring is not allocated\n"
argument_list|,
name|qid
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|queue
operator|->
name|size
condition|;
name|i
operator|++
control|)
block|{
name|uint32_t
modifier|*
name|curr_addr
init|=
operator|(
name|void
operator|*
operator|)
operator|(
operator|(
name|uint32_t
operator|)
name|base_ptr
operator|+
name|i
operator|*
name|desc_size
operator|)
decl_stmt|;
if|if
condition|(
name|desc_size
operator|==
literal|16
condition|)
name|al_dbg
argument_list|(
literal|"[%04d](%p): %08x %08x %08x %08x\n"
argument_list|,
name|i
argument_list|,
name|curr_addr
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
name|curr_addr
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
operator|(
name|curr_addr
operator|+
literal|1
operator|)
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
operator|(
name|curr_addr
operator|+
literal|2
operator|)
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
operator|(
name|curr_addr
operator|+
literal|3
operator|)
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|desc_size
operator|==
literal|8
condition|)
name|al_dbg
argument_list|(
literal|"[%04d](%p): %08x %08x\n"
argument_list|,
name|i
argument_list|,
name|curr_addr
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
name|curr_addr
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
operator|(
name|curr_addr
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|desc_size
operator|==
literal|4
condition|)
name|al_dbg
argument_list|(
literal|"[%04d](%p): %08x\n"
argument_list|,
name|i
argument_list|,
name|curr_addr
argument_list|,
operator|(
name|uint32_t
operator|)
operator|*
name|curr_addr
argument_list|)
expr_stmt|;
else|else
break|break;
block|}
block|}
end_function

end_unit

