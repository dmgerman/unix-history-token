begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2002-2003  *	Fraunhofer Institute for Open Communication Systems (FhG Fokus).  * 	All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  *  * Author: Hartmut Brandt<harti@freebsd.org>  *         Kendy Kutzner<kutzner@fokus.fraunhofer.de>  *  * $Begemot: libunimsg/netnatm/sig/sig_print.c,v 1.6 2004/08/05 07:11:02 brandt Exp $  */
end_comment

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|_KERNEL
end_ifdef

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/systm.h>
end_include

begin_include
include|#
directive|include
file|<sys/libkern.h>
end_include

begin_include
include|#
directive|include
file|<machine/stdarg.h>
end_include

begin_else
else|#
directive|else
end_else

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<stdarg.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<netnatm/saal/sscfu.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/uni_hdr.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/unistruct.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/unimsglib.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/uniprint.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/sig/uni.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/sig/unisig.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/sig/unidef.h>
end_include

begin_function
specifier|const
name|char
modifier|*
name|uni_strerr
parameter_list|(
name|u_int
name|err
parameter_list|)
block|{
specifier|static
specifier|const
name|char
modifier|*
specifier|const
name|errstr
index|[]
init|=
block|{
define|#
directive|define
name|DEF
parameter_list|(
name|NAME
parameter_list|,
name|VAL
parameter_list|,
name|STR
parameter_list|)
value|[UNIAPI_##NAME] = STR,
name|UNIAPI_DEF_ERRORS
argument_list|(
argument|DEF
argument_list|)
undef|#
directive|undef
name|DEF
block|}
decl_stmt|;
specifier|static
name|char
name|buf
index|[
literal|100
index|]
decl_stmt|;
if|if
condition|(
name|err
operator|>=
sizeof|sizeof
argument_list|(
name|errstr
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|errstr
index|[
literal|0
index|]
argument_list|)
operator|||
name|errstr
index|[
name|err
index|]
operator|==
name|NULL
condition|)
block|{
name|sprintf
argument_list|(
name|buf
argument_list|,
literal|"Unknown error %u"
argument_list|,
name|err
argument_list|)
expr_stmt|;
return|return
operator|(
name|buf
operator|)
return|;
block|}
return|return
operator|(
name|errstr
index|[
name|err
index|]
operator|)
return|;
block|}
end_function

begin_define
define|#
directive|define
name|D
parameter_list|(
name|M
parameter_list|)
value|[M] = #M
end_define

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
specifier|const
name|msgs
index|[]
init|=
block|{
name|D
argument_list|(
name|UNIAPI_ERROR
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_CALL_CREATED
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_CALL_DESTROYED
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_PARTY_CREATED
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_PARTY_DESTROYED
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_LINK_ESTABLISH_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_LINK_ESTABLISH_confirm
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_LINK_RELEASE_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_LINK_RELEASE_confirm
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_confirm
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_ERROR_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_response
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_ERROR_response
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RESET_STATUS_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_SETUP_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_SETUP_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_SETUP_response
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_SETUP_confirm
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_SETUP_COMPLETE_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_SETUP_COMPLETE_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ALERTING_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ALERTING_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_PROCEEDING_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_PROCEEDING_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RELEASE_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RELEASE_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RELEASE_response
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_RELEASE_confirm
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_NOTIFY_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_NOTIFY_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_STATUS_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_STATUS_ENQUIRY_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ADD_PARTY_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ADD_PARTY_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_PARTY_ALERTING_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_PARTY_ALERTING_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ADD_PARTY_ACK_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ADD_PARTY_ACK_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ADD_PARTY_REJ_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ADD_PARTY_REJ_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_DROP_PARTY_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_DROP_PARTY_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_DROP_PARTY_ACK_request
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_DROP_PARTY_ACK_indication
argument_list|)
block|,
name|D
argument_list|(
name|UNIAPI_ABORT_CALL_request
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_undef
undef|#
directive|undef
name|D
end_undef

begin_function
name|void
name|uni_print_api
parameter_list|(
name|char
modifier|*
name|buf
parameter_list|,
name|size_t
name|bufsiz
parameter_list|,
name|u_int
name|type
parameter_list|,
name|u_int
name|cookie
parameter_list|,
specifier|const
name|void
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|old_dont_init
init|=
name|cx
operator|->
name|dont_init
decl_stmt|;
name|uni_print_init
argument_list|(
name|buf
argument_list|,
name|bufsiz
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|cx
operator|->
name|dont_init
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|type
operator|>=
sizeof|sizeof
argument_list|(
name|msgs
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|msgs
index|[
literal|0
index|]
argument_list|)
operator|||
name|msgs
index|[
name|type
index|]
operator|==
name|NULL
condition|)
block|{
name|uni_print_flag
argument_list|(
literal|"UNIAPI_UNKNOWN"
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"sig"
argument_list|,
literal|"%u"
argument_list|,
name|type
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"cookie"
argument_list|,
literal|"%u"
argument_list|,
name|cookie
argument_list|)
expr_stmt|;
goto|goto
name|out
goto|;
block|}
name|uni_print_flag
argument_list|(
name|msgs
index|[
name|type
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"cookie"
argument_list|,
literal|"%u"
argument_list|,
name|cookie
argument_list|)
expr_stmt|;
name|cx
operator|->
name|indent
operator|++
expr_stmt|;
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|UNIAPI_ERROR
case|:
block|{
specifier|const
name|struct
name|uniapi_error
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"reason"
argument_list|,
literal|"%s"
argument_list|,
name|uni_strerr
argument_list|(
name|api
operator|->
name|reason
argument_list|)
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"state"
argument_list|,
literal|"U%u"
argument_list|,
name|api
operator|->
name|state
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_CALL_CREATED
case|:
block|{
specifier|const
name|struct
name|uniapi_call_created
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_CALL_DESTROYED
case|:
block|{
specifier|const
name|struct
name|uniapi_call_destroyed
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_PARTY_CREATED
case|:
block|{
specifier|const
name|struct
name|uniapi_party_created
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_EPREF
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_PARTY_DESTROYED
case|:
block|{
specifier|const
name|struct
name|uniapi_party_destroyed
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_EPREF
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_LINK_ESTABLISH_request
case|:
case|case
name|UNIAPI_LINK_ESTABLISH_confirm
case|:
case|case
name|UNIAPI_LINK_RELEASE_request
case|:
case|case
name|UNIAPI_LINK_RELEASE_confirm
case|:
break|break;
case|case
name|UNIAPI_RESET_request
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_RESTART
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CONNID
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RESET_confirm
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_confirm
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_RESTART
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CONNID
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RESET_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_RESTART
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CONNID
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RESET_ERROR_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_error_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
specifier|static
specifier|const
name|struct
name|uni_print_tbl
name|reason
index|[]
init|=
block|{
define|#
directive|define
name|DEF
parameter_list|(
name|NAME
parameter_list|,
name|VALUE
parameter_list|,
name|STR
parameter_list|)
value|{ STR, VALUE },
name|UNIAPI_DEF_RESET_ERRORS
argument_list|(
argument|DEF
argument_list|)
undef|#
directive|undef
name|DEF
block|{
name|NULL
block|,
literal|0
block|}
block|}
decl_stmt|;
specifier|static
specifier|const
name|struct
name|uni_print_tbl
name|source
index|[]
init|=
block|{
block|{
literal|"start"
block|,
literal|0
block|}
block|,
block|{
literal|"respond"
block|,
literal|1
block|}
block|,
block|{
name|NULL
block|,
literal|0
block|}
block|}
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_tbl
argument_list|(
literal|"source"
argument_list|,
name|api
operator|->
name|source
argument_list|,
name|source
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_tbl
argument_list|(
literal|"reason"
argument_list|,
name|api
operator|->
name|reason
argument_list|,
name|reason
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RESET_response
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_response
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_RESTART
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CONNID
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RESET_ERROR_response
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_error_response
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CAUSE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RESET_STATUS_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_reset_status_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CALLSTATE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|callstate
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CAUSE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_SETUP_request
case|:
block|{
specifier|const
name|struct
name|uniapi_setup_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_SETUP
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|setup
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_SETUP_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_setup_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_SETUP
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|setup
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_SETUP_response
case|:
block|{
specifier|const
name|struct
name|uniapi_setup_response
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_CONNECT
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|connect
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_SETUP_confirm
case|:
block|{
specifier|const
name|struct
name|uniapi_setup_confirm
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_CONNECT
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|connect
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_SETUP_COMPLETE_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_setup_complete_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_CONNECT_ACK
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|connect_ack
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_SETUP_COMPLETE_request
case|:
block|{
specifier|const
name|struct
name|uniapi_setup_complete_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_CONNECT_ACK
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|connect_ack
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ALERTING_request
case|:
block|{
specifier|const
name|struct
name|uniapi_alerting_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ALERTING
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|alerting
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ALERTING_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_alerting_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ALERTING
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|alerting
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_PROCEEDING_request
case|:
block|{
specifier|const
name|struct
name|uniapi_proceeding_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_CALL_PROC
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|call_proc
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_PROCEEDING_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_proceeding_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_CALL_PROC
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|call_proc
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RELEASE_request
case|:
block|{
specifier|const
name|struct
name|uniapi_release_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_RELEASE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|release
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RELEASE_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_release_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_RELEASE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|release
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RELEASE_response
case|:
block|{
specifier|const
name|struct
name|uniapi_release_response
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_RELEASE_COMPL
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|release_compl
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_RELEASE_confirm
case|:
block|{
specifier|const
name|struct
name|uniapi_release_confirm
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_RELEASE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|release
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_NOTIFY_request
case|:
block|{
specifier|const
name|struct
name|uniapi_notify_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_NOTIFY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_NOTIFY_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_notify_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_NOTIFY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_STATUS_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_status_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"my_state"
argument_list|,
literal|"U%u"
argument_list|,
name|api
operator|->
name|my_state
argument_list|)
expr_stmt|;
name|uni_print_entry
argument_list|(
name|cx
argument_list|,
literal|"my_cause"
argument_list|,
literal|"%s"
argument_list|,
name|uni_ie_cause2str
argument_list|(
name|UNI_CODING_ITU
argument_list|,
name|api
operator|->
name|my_cause
argument_list|)
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CALLSTATE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|his_state
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CAUSE
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|his_cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_EPREF
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_STATUS_ENQUIRY_request
case|:
block|{
specifier|const
name|struct
name|uniapi_status_enquiry_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_EPREF
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ADD_PARTY_request
case|:
block|{
specifier|const
name|struct
name|uniapi_add_party_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ADD_PARTY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|add
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ADD_PARTY_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_add_party_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ADD_PARTY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|add
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_PARTY_ALERTING_request
case|:
block|{
specifier|const
name|struct
name|uniapi_party_alerting_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_PARTY_ALERTING
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|alert
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_PARTY_ALERTING_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_party_alerting_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_PARTY_ALERTING
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|alert
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ADD_PARTY_ACK_request
case|:
block|{
specifier|const
name|struct
name|uniapi_add_party_ack_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ADD_PARTY_ACK
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|ack
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ADD_PARTY_ACK_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_add_party_ack_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ADD_PARTY_ACK
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|ack
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ADD_PARTY_REJ_request
case|:
block|{
specifier|const
name|struct
name|uniapi_add_party_rej_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ADD_PARTY_REJ
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|rej
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ADD_PARTY_REJ_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_add_party_rej_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_ADD_PARTY_REJ
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|rej
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_DROP_PARTY_request
case|:
block|{
specifier|const
name|struct
name|uniapi_drop_party_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_DROP_PARTY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|drop
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_DROP_PARTY_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_drop_party_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_DROP_PARTY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|drop
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_DROP_PARTY_ACK_request
case|:
block|{
specifier|const
name|struct
name|uniapi_drop_party_ack_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_DROP_PARTY_ACK
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|ack
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_DROP_PARTY_ACK_indication
case|:
block|{
specifier|const
name|struct
name|uniapi_drop_party_ack_indication
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_msg
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_DROP_PARTY
argument_list|,
operator|(
specifier|const
expr|union
name|uni_msgall
operator|*
operator|)
operator|&
name|api
operator|->
name|drop
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|uni_print_eol
argument_list|(
name|cx
argument_list|)
expr_stmt|;
name|uni_print_ie
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
specifier|const
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|api
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
case|case
name|UNIAPI_ABORT_CALL_request
case|:
block|{
specifier|const
name|struct
name|uniapi_abort_call_request
modifier|*
name|api
init|=
name|msg
decl_stmt|;
name|uni_print_cref
argument_list|(
name|NULL
argument_list|,
literal|0
argument_list|,
operator|&
name|api
operator|->
name|cref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
name|out
label|:
name|cx
operator|->
name|dont_init
operator|=
name|old_dont_init
expr_stmt|;
block|}
end_function

end_unit

