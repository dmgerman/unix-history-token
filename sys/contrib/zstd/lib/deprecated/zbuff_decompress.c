begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2016-present, Yann Collet, Facebook, Inc.  * All rights reserved.  *  * This source code is licensed under both the BSD-style license (found in the  * LICENSE file in the root directory of this source tree) and the GPLv2 (found  * in the COPYING file in the root directory of this source tree).  * You may select, at your option, one of the above-listed licenses.  */
end_comment

begin_comment
comment|/* ************************************* *  Dependencies ***************************************/
end_comment

begin_define
define|#
directive|define
name|ZBUFF_STATIC_LINKING_ONLY
end_define

begin_include
include|#
directive|include
file|"zbuff.h"
end_include

begin_function
name|ZBUFF_DCtx
modifier|*
name|ZBUFF_createDCtx
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|ZSTD_createDStream
argument_list|()
return|;
block|}
end_function

begin_function
name|ZBUFF_DCtx
modifier|*
name|ZBUFF_createDCtx_advanced
parameter_list|(
name|ZSTD_customMem
name|customMem
parameter_list|)
block|{
return|return
name|ZSTD_createDStream_advanced
argument_list|(
name|customMem
argument_list|)
return|;
block|}
end_function

begin_function
name|size_t
name|ZBUFF_freeDCtx
parameter_list|(
name|ZBUFF_DCtx
modifier|*
name|zbd
parameter_list|)
block|{
return|return
name|ZSTD_freeDStream
argument_list|(
name|zbd
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* *** Initialization *** */
end_comment

begin_function
name|size_t
name|ZBUFF_decompressInitDictionary
parameter_list|(
name|ZBUFF_DCtx
modifier|*
name|zbd
parameter_list|,
specifier|const
name|void
modifier|*
name|dict
parameter_list|,
name|size_t
name|dictSize
parameter_list|)
block|{
return|return
name|ZSTD_initDStream_usingDict
argument_list|(
name|zbd
argument_list|,
name|dict
argument_list|,
name|dictSize
argument_list|)
return|;
block|}
end_function

begin_function
name|size_t
name|ZBUFF_decompressInit
parameter_list|(
name|ZBUFF_DCtx
modifier|*
name|zbd
parameter_list|)
block|{
return|return
name|ZSTD_initDStream
argument_list|(
name|zbd
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* *** Decompression *** */
end_comment

begin_function
name|size_t
name|ZBUFF_decompressContinue
parameter_list|(
name|ZBUFF_DCtx
modifier|*
name|zbd
parameter_list|,
name|void
modifier|*
name|dst
parameter_list|,
name|size_t
modifier|*
name|dstCapacityPtr
parameter_list|,
specifier|const
name|void
modifier|*
name|src
parameter_list|,
name|size_t
modifier|*
name|srcSizePtr
parameter_list|)
block|{
name|ZSTD_outBuffer
name|outBuff
decl_stmt|;
name|ZSTD_inBuffer
name|inBuff
decl_stmt|;
name|size_t
name|result
decl_stmt|;
name|outBuff
operator|.
name|dst
operator|=
name|dst
expr_stmt|;
name|outBuff
operator|.
name|pos
operator|=
literal|0
expr_stmt|;
name|outBuff
operator|.
name|size
operator|=
operator|*
name|dstCapacityPtr
expr_stmt|;
name|inBuff
operator|.
name|src
operator|=
name|src
expr_stmt|;
name|inBuff
operator|.
name|pos
operator|=
literal|0
expr_stmt|;
name|inBuff
operator|.
name|size
operator|=
operator|*
name|srcSizePtr
expr_stmt|;
name|result
operator|=
name|ZSTD_decompressStream
argument_list|(
name|zbd
argument_list|,
operator|&
name|outBuff
argument_list|,
operator|&
name|inBuff
argument_list|)
expr_stmt|;
operator|*
name|dstCapacityPtr
operator|=
name|outBuff
operator|.
name|pos
expr_stmt|;
operator|*
name|srcSizePtr
operator|=
name|inBuff
operator|.
name|pos
expr_stmt|;
return|return
name|result
return|;
block|}
end_function

begin_comment
comment|/* ************************************* *  Tool functions ***************************************/
end_comment

begin_function
name|size_t
name|ZBUFF_recommendedDInSize
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|ZSTD_DStreamInSize
argument_list|()
return|;
block|}
end_function

begin_function
name|size_t
name|ZBUFF_recommendedDOutSize
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|ZSTD_DStreamOutSize
argument_list|()
return|;
block|}
end_function

end_unit

