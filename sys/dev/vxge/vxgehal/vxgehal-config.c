begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * SPDX-License-Identifier: BSD-3-Clause  *  * Copyright(c) 2002-2011 Exar Corp.  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification are permitted provided the following conditions are met:  *  *    1. Redistributions of source code must retain the above copyright notice,  *       this list of conditions and the following disclaimer.  *  *    2. Redistributions in binary form must reproduce the above copyright  *       notice, this list of conditions and the following disclaimer in the  *       documentation and/or other materials provided with the distribution.  *  *    3. Neither the name of the Exar Corporation nor the names of its  *       contributors may be used to endorse or promote products derived from  *       this software without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE  * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE  * POSSIBILITY OF SUCH DAMAGE.  */
end_comment

begin_comment
comment|/*$FreeBSD$*/
end_comment

begin_include
include|#
directive|include
file|<dev/vxge/vxgehal/vxgehal.h>
end_include

begin_comment
comment|/*  * vxge_hal_driver_config_check - Check driver configuration.  * @config: Driver configuration information  *  * Check the driver configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_driver_config_check
parameter_list|(
name|vxge_hal_driver_config_t
modifier|*
name|config
parameter_list|)
block|{
if|if
condition|(
name|config
operator|->
name|level
operator|>
name|VXGE_TRACE
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LOG_LEVEL
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_wire_port_config_check - Check wire port configuration.  * @port_config: Port configuration information  *  * Check wire port configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_wire_port_config_check
parameter_list|(
name|vxge_hal_wire_port_config_t
modifier|*
name|port_config
parameter_list|)
block|{
if|if
condition|(
name|port_config
operator|->
name|port_id
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_PORTS
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_PORT_ID
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|media
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_MEDIA
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|media
operator|!=
name|VXGE_HAL_WIRE_PORT_MEDIA_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_MAX_MEDIA
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|port_config
operator|->
name|mtu
operator|<
name|VXGE_HAL_WIRE_PORT_MIN_INITIAL_MTU
operator|)
operator|||
operator|(
name|port_config
operator|->
name|mtu
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_INITIAL_MTU
operator|)
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|mtu
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_INITIAL_MTU
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_MAX_INITIAL_MTU
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|autoneg_mode
operator|>
name|VXGE_HAL_WIRE_PORT_AUTONEG_MODE_RESERVED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|autoneg_mode
operator|!=
name|VXGE_HAL_WIRE_PORT_AUTONEG_MODE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_AUTONEG_MODE
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|autoneg_rate
operator|>
name|VXGE_HAL_WIRE_PORT_AUTONEG_RATE_10G
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|autoneg_rate
operator|!=
name|VXGE_HAL_WIRE_PORT_AUTONEG_RATE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_AUTONEG_RATE
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|fixed_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_FIXED_USE_FSM_PROCESSOR
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|fixed_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_FIXED_USE_FSM_HW
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|fixed_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_FIXED_USE_FSM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_FIXED_USE_FSM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|antp_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANTP_USE_FSM_PROCESSOR
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|antp_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANTP_USE_FSM_HW
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|antp_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANTP_USE_FSM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_ANTP_USE_FSM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|anbe_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANBE_USE_FSM_PROCESSOR
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|anbe_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANBE_USE_FSM_HW
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|anbe_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANBE_USE_FSM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_ANBE_USE_FSM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|link_stability_period
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_LINK_STABILITY_PERIOD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|link_stability_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_LINK_STABILITY_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_LINK_STABILITY_PERIOD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|port_stability_period
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_PORT_STABILITY_PERIOD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|port_stability_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_PORT_STABILITY_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_PORT_STABILITY_PERIOD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_en
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_en
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_en
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_TMAC_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_pad
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_NO_PAD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_pad
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_64B_PAD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_pad
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_PAD_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_TMAC_PAD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_pad_byte
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_TMAC_PAD_BYTE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_pad_byte
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_TMAC_PAD_BYTE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_TMAC_PAD_BYTE
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_util_period
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_TMAC_UTIL_PERIOD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_util_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_TMAC_UTIL_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_TMAC_UTIL_PERIOD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_STRIP_FCS
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_SEND_FCS_TO_HOST
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_STRIP_FCS_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_STRIP_FCS
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_prom_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PROM_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_prom_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PROM_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_prom_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PROM_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_PROM_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_DISCARD_PFRM
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_SEND_PFRM_TO_HOST
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_DISCARD_PFRM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_DISCARD_PFRM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_util_period
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_RMAC_UTIL_PERIOD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_util_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_UTIL_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_UTIL_PERIOD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_GEN_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_GEN_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_GEN_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_PAUSE_GEN_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_RCV_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_RCV_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_RCV_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_PAUSE_RCV_EN
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|port_config
operator|->
name|rmac_pause_time
operator|<
name|VXGE_HAL_WIRE_PORT_MIN_RMAC_HIGH_PTIME
operator|)
operator|||
operator|(
name|port_config
operator|->
name|rmac_pause_time
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_RMAC_HIGH_PTIME
operator|)
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_time
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_HIGH_PTIME
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_HIGH_PTIME
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|limiter_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_LIMITER_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|limiter_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_LIMITER_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|limiter_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_LIMITER_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_PAUSE_LIMITER_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|max_limit
operator|>
name|VXGE_HAL_WIRE_PORT_MAX_RMAC_MAX_LIMIT
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|max_limit
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_MAX_LIMIT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_WIRE_PORT_RMAC_MAX_LIMIT
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_switch_port_config_check - Check switch port configuration.  * @port_config: Port configuration information  *  * Check switch port configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_switch_port_config_check
parameter_list|(
name|vxge_hal_switch_port_config_t
modifier|*
name|port_config
parameter_list|)
block|{
if|if
condition|(
operator|(
operator|(
name|port_config
operator|->
name|mtu
operator|<
name|VXGE_HAL_SWITCH_PORT_MIN_INITIAL_MTU
operator|)
operator|||
operator|(
name|port_config
operator|->
name|mtu
operator|>
name|VXGE_HAL_SWITCH_PORT_MAX_INITIAL_MTU
operator|)
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|mtu
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_INITIAL_MTU
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_MAX_INITIAL_MTU
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_TMAC_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_pad
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_NO_PAD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_pad
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_64B_PAD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_pad
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_PAD_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_TMAC_PAD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_pad_byte
operator|>
name|VXGE_HAL_SWITCH_PORT_MAX_TMAC_PAD_BYTE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_pad_byte
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_TMAC_PAD_BYTE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_TMAC_PAD_BYTE
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|tmac_util_period
operator|>
name|VXGE_HAL_SWITCH_PORT_MAX_TMAC_UTIL_PERIOD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|tmac_util_period
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_TMAC_UTIL_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_TMAC_UTIL_PERIOD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_STRIP_FCS
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_SEND_FCS_TO_HOST
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_STRIP_FCS_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_STRIP_FCS
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_prom_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PROM_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_prom_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PROM_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_prom_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PROM_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_PROM_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_DISCARD_PFRM
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_SEND_PFRM_TO_HOST
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_DISCARD_PFRM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_DISCARD_PFRM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_util_period
operator|>
name|VXGE_HAL_SWITCH_PORT_MAX_RMAC_UTIL_PERIOD
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_util_period
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_UTIL_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_UTIL_PERIOD
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_GEN_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_GEN_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_GEN_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_PAUSE_GEN_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_RCV_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_RCV_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_RCV_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_PAUSE_RCV_EN
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|port_config
operator|->
name|rmac_pause_time
operator|<
name|VXGE_HAL_SWITCH_PORT_MIN_RMAC_HIGH_PTIME
operator|)
operator|||
operator|(
name|port_config
operator|->
name|rmac_pause_time
operator|>
name|VXGE_HAL_SWITCH_PORT_MAX_RMAC_HIGH_PTIME
operator|)
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|rmac_pause_time
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_HIGH_PTIME
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_HIGH_PTIME
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|limiter_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_LIMITER_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|limiter_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_LIMITER_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|limiter_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_LIMITER_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_PAUSE_LIMITER_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|max_limit
operator|>
name|VXGE_HAL_SWITCH_PORT_MAX_RMAC_MAX_LIMIT
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|max_limit
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_MAX_LIMIT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_SWITCH_PORT_RMAC_MAX_LIMIT
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_mac_config_check - Check mac port configuration.  * @mac_config: MAC configuration information  *  * Check mac port configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_mac_config_check
parameter_list|(
name|vxge_hal_mac_config_t
modifier|*
name|mac_config
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|vxge_hal_status_e
name|status
decl_stmt|;
name|status
operator|=
name|__hal_device_wire_port_config_check
argument_list|(
operator|&
name|mac_config
operator|->
name|wire_port_config
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_wire_port_config_check
argument_list|(
operator|&
name|mac_config
operator|->
name|wire_port_config
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_switch_port_config_check
argument_list|(
operator|&
name|mac_config
operator|->
name|switch_port_config
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|network_stability_period
operator|>
name|VXGE_HAL_MAC_MAX_NETWORK_STABILITY_PERIOD
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|network_stability_period
operator|!=
name|VXGE_HAL_MAC_DEF_NETWORK_STABILITY_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_NETWORK_STABILITY_PERIOD
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|16
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|(
name|mac_config
operator|->
name|mc_pause_threshold
index|[
name|i
index|]
operator|>
name|VXGE_HAL_MAC_MAX_MC_PAUSE_THRESHOLD
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|mc_pause_threshold
index|[
name|i
index|]
operator|!=
name|VXGE_HAL_MAC_DEF_MC_PAUSE_THRESHOLD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_MC_PAUSE_THRESHOLD
operator|)
return|;
block|}
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_perma_stop_en
operator|!=
name|VXGE_HAL_MAC_TMAC_PERMA_STOP_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_perma_stop_en
operator|!=
name|VXGE_HAL_MAC_TMAC_PERMA_STOP_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_perma_stop_en
operator|!=
name|VXGE_HAL_MAC_TMAC_PERMA_STOP_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_PERMA_STOP_EN
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_tx_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_TX_SWITCH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_tx_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_TX_SWITCH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_tx_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_TX_SWITCH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TMAC_TX_SWITCH_DIS
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_lossy_switch_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_SWITCH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_lossy_switch_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_SWITCH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_lossy_switch_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_SWITCH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TMAC_LOSSY_SWITCH_EN
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_lossy_wire_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_WIRE_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_lossy_wire_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_WIRE_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_lossy_wire_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_WIRE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TMAC_LOSSY_WIRE_EN
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_WIRE_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_WIRE_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_WIRE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TMAC_BCAST_TO_WIRE_DIS
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_bcast_to_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_SWITCH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_bcast_to_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_SWITCH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_bcast_to_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_SWITCH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TMAC_BCAST_TO_SWITCH_DIS
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tmac_host_append_fcs_en
operator|!=
name|VXGE_HAL_MAC_TMAC_HOST_APPEND_FCS_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_host_append_fcs_en
operator|!=
name|VXGE_HAL_MAC_TMAC_HOST_APPEND_FCS_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tmac_host_append_fcs_en
operator|!=
name|VXGE_HAL_MAC_TMAC_HOST_APPEND_FCS_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TMAC_HOST_APPEND_FCS_EN
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_TPA_SUPPORT_SNAP_AB_N_LLC_SAP_AB
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_TPA_SUPPORT_SNAP_AB_N_LLC_SAP_AA
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_TPA_SUPPORT_SNAP_AB_N_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TPA_SUPPORT_SNAP_AB_N
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|tpa_ecc_enable_n
operator|!=
name|VXGE_HAL_MAC_TPA_ECC_ENABLE_N_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tpa_ecc_enable_n
operator|!=
name|VXGE_HAL_MAC_TPA_ECC_ENABLE_N_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|tpa_ecc_enable_n
operator|!=
name|VXGE_HAL_MAC_TPA_ECC_ENABLE_N_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_TPA_ECC_ENABLE_N
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_ignore_frame_err
operator|!=
name|VXGE_HAL_MAC_RPA_IGNORE_FRAME_ERR_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_ignore_frame_err
operator|!=
name|VXGE_HAL_MAC_RPA_IGNORE_FRAME_ERR_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_ignore_frame_err
operator|!=
name|VXGE_HAL_MAC_RPA_IGNORE_FRAME_ERR_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_IGNORE_FRAME_ERR
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_SNAP_AB_N_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_SNAP_AB_N_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_SNAP_AB_N_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_SNAP_AB_N
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_search_for_hao
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_HAO_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_search_for_hao
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_HAO_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_search_for_hao
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_HAO_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_SEARCH_FOR_HAO
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_support_ipv6_mobile_hdrs
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_IPV6_MOBILE_HDRS_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_support_ipv6_mobile_hdrs
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_IPV6_MOBILE_HDRS_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_support_ipv6_mobile_hdrs
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_IPV6_MOBILE_HDRS_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_SUPPORT_IPV6_MOBILE_HDRS
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_ipv6_stop_searching
operator|!=
name|VXGE_HAL_MAC_RPA_IPV6_STOP_SEARCHING
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_ipv6_stop_searching
operator|!=
name|VXGE_HAL_MAC_RPA_IPV6_DONT_STOP_SEARCHING
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_ipv6_stop_searching
operator|!=
name|VXGE_HAL_MAC_RPA_IPV6_STOP_SEARCHING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_IPV6_STOP_SEARCHING
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_no_ps_if_unknown
operator|!=
name|VXGE_HAL_MAC_RPA_NO_PS_IF_UNKNOWN_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_no_ps_if_unknown
operator|!=
name|VXGE_HAL_MAC_RPA_NO_PS_IF_UNKNOWN_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_no_ps_if_unknown
operator|!=
name|VXGE_HAL_MAC_RPA_NO_PS_IF_UNKNOWN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_NO_PS_IF_UNKNOWN
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_search_for_etype
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_ETYPE_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_search_for_etype
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_ETYPE_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_search_for_etype
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_ETYPE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_SEARCH_FOR_ETYPE
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_l4_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L4_COMP_CSUM_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l4_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L4_COMP_CSUM_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l4_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_l4_COMP_CSUM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_L4_COMP_CSUM
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_l3_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L3_INCL_CF_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l3_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L3_INCL_CF_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l3_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L3_INCL_CF_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_L3_INCL_CF
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_l3_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L3_COMP_CSUM_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l3_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L3_COMP_CSUM_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l3_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_l3_COMP_CSUM_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_L3_COMP_CSUM
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_TCP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_TCP_INCL_PH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_TCP_INCL_PH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_IPV4_TCP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_TCP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_TCP_INCL_PH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_TCP_INCL_PH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_IPV6_TCP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_UDP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_UDP_INCL_PH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_UDP_INCL_PH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_IPV4_UDP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_UDP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_UDP_INCL_PH_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_UDP_INCL_PH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_IPV6_UDP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_l4_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L4_INCL_CF_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l4_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L4_INCL_CF_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_l4_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L4_INCL_CF_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_L4_INCL_CF
operator|)
return|;
if|if
condition|(
operator|(
name|mac_config
operator|->
name|rpa_repl_strip_vlan_tag
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_ENABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_strip_vlan_tag
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_DISABLE
operator|)
operator|&&
operator|(
name|mac_config
operator|->
name|rpa_repl_strip_vlan_tag
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAC_RPA_REPL_STRIP_VLAN_TAG
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_port_config_check - Check LAG port configuration.  * @aggr_config: LAG port configuration information  *  * Check LAG port configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_port_config_check
parameter_list|(
name|vxge_hal_lag_port_config_t
modifier|*
name|port_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|port_config
operator|->
name|port_id
operator|!=
name|VXGE_HAL_LAG_PORT_PORT_ID_0
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|port_id
operator|!=
name|VXGE_HAL_LAG_PORT_PORT_ID_1
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PORT_ID
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|lag_en
operator|!=
name|VXGE_HAL_LAG_PORT_LAG_EN_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|lag_en
operator|!=
name|VXGE_HAL_LAG_PORT_LAG_EN_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|lag_en
operator|!=
name|VXGE_HAL_LAG_PORT_LAG_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_LAG_EN
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|discard_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_SLOW_PROTO_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|discard_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_SLOW_PROTO_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|discard_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_SLOW_PROTO_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_DISCARD_SLOW_PROTO
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|host_chosen_aggr
operator|!=
name|VXGE_HAL_LAG_PORT_HOST_CHOSEN_AGGR_0
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|host_chosen_aggr
operator|!=
name|VXGE_HAL_LAG_PORT_HOST_CHOSEN_AGGR_1
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|host_chosen_aggr
operator|!=
name|VXGE_HAL_LAG_PORT_HOST_CHOSEN_AGGR_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_HOST_CHOSEN_AGGR
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|discard_unknown_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|discard_unknown_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|discard_unknown_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_port_num
operator|>
name|VXGE_HAL_LAG_PORT_MAX_ACTOR_PORT_NUM
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_port_num
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_PORT_NUM
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_PORT_NUM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_port_priority
operator|>
name|VXGE_HAL_LAG_PORT_MAX_ACTOR_PORT_PRIORITY
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_port_priority
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_PORT_PRIORITY
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_PORT_PRIORITY
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_key_10g
operator|>
name|VXGE_HAL_LAG_PORT_MAX_ACTOR_KEY_10G
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_key_10g
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_KEY_10G
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_KEY_10G
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_key_1g
operator|>
name|VXGE_HAL_LAG_PORT_MAX_ACTOR_KEY_1G
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_key_1g
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_KEY_1G
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_KEY_1G
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_PASSIVE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_ACTIVE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_LACP_ACTIVITY
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_TIMEOUT_LONG
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_TIMEOUT_SHORT
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_TIMEOUT_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_LACP_TIMEOUT
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_AGGREGATION_INDIVIDUAL
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_AGGREGATION_AGGREGATEABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_AGGREGATION_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_AGGREGATION
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_SYNCHRONIZATION_OUT_OF_SYNC
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_SYNCHRONIZATION_IN_SYNC
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_SYNCHRONIZATION_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_SYNCHRONIZATION
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_COLLECTING_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_COLLECTING_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_COLLECTING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_COLLECTING
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_DISTRIBUTING
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_DISTRIBUTING
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DEFAULTED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_NOT_DEFAULTED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DEFAULTED_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_DEFAULTED
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|actor_expired
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_EXPIRED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_expired
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_NOT_EXPIRED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|actor_expired
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_EXPIRED_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_ACTOR_EXPIRED
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_sys_pri
operator|>
name|VXGE_HAL_LAG_PORT_MAX_PARTNER_SYS_PRI
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_sys_pri
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_SYS_PRI
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_SYS_PRI
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_key
operator|>
name|VXGE_HAL_LAG_PORT_MAX_PARTNER_KEY
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_key
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_KEY
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_KEY
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_port_num
operator|>
name|VXGE_HAL_LAG_PORT_MAX_PARTNER_PORT_NUM
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_port_num
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_PORT_NUM
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_NUM
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_port_priority
operator|>
name|VXGE_HAL_LAG_PORT_MAX_PARTNER_PORT_PRIORITY
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_port_priority
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_PORT_PRIORITY
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_PORT_PRIORITY
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_PASSIVE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_ACTIVE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_LACP_ACTIVITY
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_TIMEOUT_LONG
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_TIMEOUT_SHORT
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_TIMEOUT_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_LACP_TIMEOUT
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_AGGREGATION_INDIVIDUAL
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_AGGREGATION_AGGREGATEABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_AGGREGATION_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_AGGREGATION
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_SYNCHRONIZATION_OUT_OF_SYNC
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_SYNCHRONIZATION_IN_SYNC
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_SYNCHRONIZATION_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_SYNCHRONIZATION
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_COLLECTING_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_COLLECTING_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_COLLECTING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_COLLECTING
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_DISTRIBUTING
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_DISABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_ENABLE
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_DISTRIBUTING
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DEFAULTED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_NOT_DEFAULTED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DEFAULTED_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_DEFAULTED
operator|)
return|;
if|if
condition|(
operator|(
name|port_config
operator|->
name|partner_expired
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_EXPIRED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_expired
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_NOT_EXPIRED
operator|)
operator|&&
operator|(
name|port_config
operator|->
name|partner_expired
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_EXPIRED_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PORT_PARTNER_EXPIRED
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_aggr_config_check - Check aggregator configuration.  * @aggr_config: Aggregator configuration information  *  * Check aggregator configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_aggr_config_check
parameter_list|(
name|vxge_hal_lag_aggr_config_t
modifier|*
name|aggr_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|aggr_config
operator|->
name|aggr_id
operator|!=
name|VXGE_HAL_LAG_AGGR_AGGR_ID_1
operator|)
operator|&&
operator|(
name|aggr_config
operator|->
name|aggr_id
operator|!=
name|VXGE_HAL_LAG_AGGR_AGGR_ID_2
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_AGGR_AGGR_ID
operator|)
return|;
if|if
condition|(
operator|(
name|aggr_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_AGGR_USE_PORT_MAC_ADDR_DISBALE
operator|)
operator|&&
operator|(
name|aggr_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_AGGR_USE_PORT_MAC_ADDR_ENABLE
operator|)
operator|&&
operator|(
name|aggr_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_AGGR_USE_PORT_MAC_ADDR_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_AGGR_USE_PORT_MAC_ADDR
operator|)
return|;
if|if
condition|(
operator|(
name|aggr_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_AGGR_MAC_ADDR_SEL_PORT_0
operator|)
operator|&&
operator|(
name|aggr_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_AGGR_MAC_ADDR_SEL_PORT_1
operator|)
operator|&&
operator|(
name|aggr_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_AGGR_MAC_ADDR_SEL_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_AGGR_MAC_ADDR_SEL
operator|)
return|;
if|if
condition|(
operator|(
name|aggr_config
operator|->
name|admin_key
operator|>
name|VXGE_HAL_LAG_AGGR_MAX_ADMIN_KEY
operator|)
operator|&&
operator|(
name|aggr_config
operator|->
name|admin_key
operator|!=
name|VXGE_HAL_LAG_AGGR_DEF_ADMIN_KEY
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_AGGR_ADMIN_KEY
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_la_config_check  * Check LAG link aggregation mode configuration.  * @la_config: LAG configuration information  *  * Check LAG link aggregation mode configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_la_config_check
parameter_list|(
name|vxge_hal_lag_la_config_t
modifier|*
name|la_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|la_config
operator|->
name|tx_discard
operator|!=
name|VXGE_HAL_LAG_TX_DISCARD_DISBALE
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|tx_discard
operator|!=
name|VXGE_HAL_LAG_TX_DISCARD_ENABLE
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|tx_discard
operator|!=
name|VXGE_HAL_LAG_TX_DISCARD_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_TX_DISCARD
operator|)
return|;
if|if
condition|(
operator|(
name|la_config
operator|->
name|distrib_alg_sel
operator|!=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_SRC_VPATH
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|distrib_alg_sel
operator|!=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_DEST_MAC_ADDR
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|distrib_alg_sel
operator|!=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_SRC_MAC_ADDR
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|distrib_alg_sel
operator|!=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_BOTH_MAC_ADDR
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|distrib_alg_sel
operator|!=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_DISTRIB_ALG_SEL
operator|)
return|;
if|if
condition|(
operator|(
name|la_config
operator|->
name|distrib_remap_if_fail
operator|!=
name|VXGE_HAL_LAG_DISTRIB_REMAP_IF_FAIL_DISBALE
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|distrib_remap_if_fail
operator|!=
name|VXGE_HAL_LAG_DISTRIB_REMAP_IF_FAIL_ENABLE
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|distrib_remap_if_fail
operator|!=
name|VXGE_HAL_LAG_DISTRIB_REMAP_IF_FAIL_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_DISTRIB_REMAP_IF_FAIL
operator|)
return|;
if|if
condition|(
operator|(
name|la_config
operator|->
name|coll_max_delay
operator|>
name|VXGE_HAL_LAG_MAX_COLL_MAX_DELAY
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|coll_max_delay
operator|!=
name|VXGE_HAL_LAG_DEF_COLL_MAX_DELAY
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_COLL_MAX_DELAY
operator|)
return|;
if|if
condition|(
operator|(
name|la_config
operator|->
name|rx_discard
operator|!=
name|VXGE_HAL_LAG_RX_DISCARD_DISBALE
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|rx_discard
operator|!=
name|VXGE_HAL_LAG_RX_DISCARD_ENABLE
operator|)
operator|&&
operator|(
name|la_config
operator|->
name|rx_discard
operator|!=
name|VXGE_HAL_LAG_RX_DISCARD_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_RX_DISCARD
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_ap_config_check - Check LAG a/p mode configuration.  * @ap_config: LAG configuration information  *  * Check LAG a/p mode configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_ap_config_check
parameter_list|(
name|vxge_hal_lag_ap_config_t
modifier|*
name|ap_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|ap_config
operator|->
name|hot_standby
operator|!=
name|VXGE_HAL_LAG_HOT_STANDBY_DISBALE_PORT
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|hot_standby
operator|!=
name|VXGE_HAL_LAG_HOT_STANDBY_KEEP_UP_PORT
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|hot_standby
operator|!=
name|VXGE_HAL_LAG_HOT_STANDBY_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_HOT_STANDBY
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|lacp_decides
operator|!=
name|VXGE_HAL_LAG_LACP_DECIDES_DISBALE
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|lacp_decides
operator|!=
name|VXGE_HAL_LAG_LACP_DECIDES_ENBALE
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|lacp_decides
operator|!=
name|VXGE_HAL_LAG_LACP_DECIDES_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LACP_DECIDES
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|pref_active_port
operator|!=
name|VXGE_HAL_LAG_PREF_ACTIVE_PORT_0
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|pref_active_port
operator|!=
name|VXGE_HAL_LAG_PREF_ACTIVE_PORT_1
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|pref_active_port
operator|!=
name|VXGE_HAL_LAG_PREF_ACTIVE_PORT_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PREF_ACTIVE_PORT
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|auto_failback
operator|!=
name|VXGE_HAL_LAG_AUTO_FAILBACK_DISBALE
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|auto_failback
operator|!=
name|VXGE_HAL_LAG_AUTO_FAILBACK_ENBALE
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|auto_failback
operator|!=
name|VXGE_HAL_LAG_AUTO_FAILBACK_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_AUTO_FAILBACK
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|failback_en
operator|!=
name|VXGE_HAL_LAG_FAILBACK_EN_DISBALE
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|failback_en
operator|!=
name|VXGE_HAL_LAG_FAILBACK_EN_ENBALE
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|failback_en
operator|!=
name|VXGE_HAL_LAG_FAILBACK_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_FAILBACK_EN
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|cold_failover_timeout
operator|!=
name|VXGE_HAL_LAG_MIN_COLD_FAILOVER_TIMEOUT
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|cold_failover_timeout
operator|!=
name|VXGE_HAL_LAG_MAX_COLD_FAILOVER_TIMEOUT
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|cold_failover_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_COLD_FAILOVER_TIMEOUT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_COLD_FAILOVER_TIMEOUT
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|alt_admin_key
operator|!=
name|VXGE_HAL_LAG_MIN_ALT_ADMIN_KEY
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|alt_admin_key
operator|!=
name|VXGE_HAL_LAG_MAX_ALT_ADMIN_KEY
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|alt_admin_key
operator|!=
name|VXGE_HAL_LAG_DEF_ALT_ADMIN_KEY
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_ALT_ADMIN_KEY
operator|)
return|;
if|if
condition|(
operator|(
name|ap_config
operator|->
name|alt_aggr
operator|!=
name|VXGE_HAL_LAG_ALT_AGGR_0
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|alt_aggr
operator|!=
name|VXGE_HAL_LAG_ALT_AGGR_1
operator|)
operator|&&
operator|(
name|ap_config
operator|->
name|alt_aggr
operator|!=
name|VXGE_HAL_LAG_ALT_AGGR_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_ALT_AGGR
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_sl_config_check - Check LAG Single Link mode configuration.  * @sl_config: LAG configuration information  *  * Check LAG Single link mode configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_sl_config_check
parameter_list|(
name|vxge_hal_lag_sl_config_t
modifier|*
name|sl_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|sl_config
operator|->
name|pref_indiv_port
operator|!=
name|VXGE_HAL_LAG_PREF_INDIV_PORT_0
operator|)
operator|&&
operator|(
name|sl_config
operator|->
name|pref_indiv_port
operator|!=
name|VXGE_HAL_LAG_PREF_INDIV_PORT_1
operator|)
operator|&&
operator|(
name|sl_config
operator|->
name|pref_indiv_port
operator|!=
name|VXGE_HAL_LAG_PREF_INDIV_PORT_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_PREF_INDIV_PORT
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_lacp_config_check - Check LACP configuration.  * @lacp_config: LAG configuration information  *  * Check LACP configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_lacp_config_check
parameter_list|(
name|vxge_hal_lag_lacp_config_t
modifier|*
name|lacp_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|lacp_en
operator|!=
name|VXGE_HAL_LAG_LACP_EN_DISBALE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|lacp_en
operator|!=
name|VXGE_HAL_LAG_LACP_EN_ENABLE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|lacp_en
operator|!=
name|VXGE_HAL_LAG_LACP_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LACP_EN
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|lacp_begin
operator|!=
name|VXGE_HAL_LAG_LACP_BEGIN_NORMAL
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|lacp_begin
operator|!=
name|VXGE_HAL_LAG_LACP_BEGIN_RESET
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|lacp_begin
operator|!=
name|VXGE_HAL_LAG_LACP_BEGIN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LACP_BEGIN
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|discard_lacp
operator|!=
name|VXGE_HAL_LAG_DISCARD_LACP_DISBALE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|discard_lacp
operator|!=
name|VXGE_HAL_LAG_DISCARD_LACP_ENABLE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|discard_lacp
operator|!=
name|VXGE_HAL_LAG_DISCARD_LACP_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_DISCARD_LACP
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|liberal_len_chk
operator|!=
name|VXGE_HAL_LAG_LIBERAL_LEN_CHK_DISBALE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|liberal_len_chk
operator|!=
name|VXGE_HAL_LAG_LIBERAL_LEN_CHK_ENABLE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|liberal_len_chk
operator|!=
name|VXGE_HAL_LAG_LIBERAL_LEN_CHK_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LIBERAL_LEN_CHK
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|marker_gen_recv_en
operator|!=
name|VXGE_HAL_LAG_MARKER_GEN_RECV_EN_DISBALE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|marker_gen_recv_en
operator|!=
name|VXGE_HAL_LAG_MARKER_GEN_RECV_EN_ENABLE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|marker_gen_recv_en
operator|!=
name|VXGE_HAL_LAG_MARKER_GEN_RECV_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_MARKER_GEN_RECV_EN
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|marker_resp_en
operator|!=
name|VXGE_HAL_LAG_MARKER_RESP_EN_DISBALE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|marker_resp_en
operator|!=
name|VXGE_HAL_LAG_MARKER_RESP_EN_ENABLE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|marker_resp_en
operator|!=
name|VXGE_HAL_LAG_MARKER_RESP_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_MARKER_RESP_EN
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|marker_resp_timeout
operator|!=
name|VXGE_HAL_LAG_MIN_MARKER_RESP_TIMEOUT
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|marker_resp_timeout
operator|!=
name|VXGE_HAL_LAG_MAX_MARKER_RESP_TIMEOUT
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|marker_resp_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_MARKER_RESP_TIMEOUT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_MARKER_RESP_TIMEOUT
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|slow_proto_mrkr_min_interval
operator|!=
name|VXGE_HAL_LAG_MIN_SLOW_PROTO_MRKR_MIN_INTERVAL
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|slow_proto_mrkr_min_interval
operator|!=
name|VXGE_HAL_LAG_MAX_SLOW_PROTO_MRKR_MIN_INTERVAL
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|slow_proto_mrkr_min_interval
operator|!=
name|VXGE_HAL_LAG_DEF_SLOW_PROTO_MRKR_MIN_INTERVAL
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_SLOW_PROTO_MRKR_MIN_INTERVAL
operator|)
return|;
if|if
condition|(
operator|(
name|lacp_config
operator|->
name|throttle_mrkr_resp
operator|!=
name|VXGE_HAL_LAG_THROTTLE_MRKR_RESP_DISBALE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|throttle_mrkr_resp
operator|!=
name|VXGE_HAL_LAG_THROTTLE_MRKR_RESP_ENABLE
operator|)
operator|&&
operator|(
name|lacp_config
operator|->
name|throttle_mrkr_resp
operator|!=
name|VXGE_HAL_LAG_THROTTLE_MRKR_RESP_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_THROTTLE_MRKR_RESP
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_lag_config_check - Check link aggregation configuration.  * @lag_config: LAG configuration information  *  * Check link aggregation configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_lag_config_check
parameter_list|(
name|vxge_hal_lag_config_t
modifier|*
name|lag_config
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|vxge_hal_status_e
name|status
decl_stmt|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|lag_en
operator|!=
name|VXGE_HAL_LAG_LAG_EN_DISABLE
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|lag_en
operator|!=
name|VXGE_HAL_LAG_LAG_EN_ENABLE
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|lag_en
operator|!=
name|VXGE_HAL_LAG_LAG_EN_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LAG_EN
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|lag_mode
operator|!=
name|VXGE_HAL_LAG_LAG_MODE_LAG
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|lag_mode
operator|!=
name|VXGE_HAL_LAG_LAG_MODE_ACTIVE_PASSIVE_FAILOVER
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|lag_mode
operator|!=
name|VXGE_HAL_LAG_LAG_MODE_SINGLE_LINK
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|lag_mode
operator|!=
name|VXGE_HAL_LAG_LAG_MODE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LAG_MODE
operator|)
return|;
name|status
operator|=
name|__hal_device_lag_la_config_check
argument_list|(
operator|&
name|lag_config
operator|->
name|la_mode_config
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_lag_ap_config_check
argument_list|(
operator|&
name|lag_config
operator|->
name|ap_mode_config
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_lag_sl_config_check
argument_list|(
operator|&
name|lag_config
operator|->
name|sl_mode_config
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_lag_lacp_config_check
argument_list|(
operator|&
name|lag_config
operator|->
name|lacp_config
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|incr_tx_aggr_stats
operator|!=
name|VXGE_HAL_LAG_INCR_TX_AGGR_STATS_DISBALE
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|incr_tx_aggr_stats
operator|!=
name|VXGE_HAL_LAG_INCR_TX_AGGR_STATS_ENABLE
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|incr_tx_aggr_stats
operator|!=
name|VXGE_HAL_LAG_INCR_TX_AGGR_STATS_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_TX_AGGR_STATS
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_LAG_PORT_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_device_lag_port_config_check
argument_list|(
operator|&
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_LAG_AGGR_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_device_lag_aggr_config_check
argument_list|(
operator|&
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
block|}
if|if
condition|(
operator|(
name|lag_config
operator|->
name|sys_pri
operator|>
name|VXGE_HAL_LAG_MAX_SYS_PRI
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|sys_pri
operator|!=
name|VXGE_HAL_LAG_DEF_SYS_PRI
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_SYS_PRI
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_USE_PORT_MAC_ADDR_DISBALE
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_USE_PORT_MAC_ADDR_ENABLE
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_USE_PORT_MAC_ADDR_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_USE_PORT_MAC_ADDR
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_MAC_ADDR_SEL_PORT_0
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_MAC_ADDR_SEL_PORT_1
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_MAC_ADDR_SEL_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_MAC_ADDR_SEL
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|fast_per_time
operator|>
name|VXGE_HAL_LAG_MAX_FAST_PER_TIME
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|fast_per_time
operator|!=
name|VXGE_HAL_LAG_DEF_FAST_PER_TIME
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_FAST_PER_TIME
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|slow_per_time
operator|>
name|VXGE_HAL_LAG_MAX_SLOW_PER_TIME
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|slow_per_time
operator|!=
name|VXGE_HAL_LAG_DEF_SLOW_PER_TIME
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_SLOW_PER_TIME
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|short_timeout
operator|>
name|VXGE_HAL_LAG_MAX_SHORT_TIMEOUT
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|short_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_SHORT_TIMEOUT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_SHORT_TIMEOUT
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|long_timeout
operator|>
name|VXGE_HAL_LAG_MAX_LONG_TIMEOUT
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_LONG_TIMEOUT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LONG_TIMEOUT
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|churn_det_time
operator|>
name|VXGE_HAL_LAG_MAX_CHURN_DET_TIME
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|churn_det_time
operator|!=
name|VXGE_HAL_LAG_DEF_CHURN_DET_TIME
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_CHURN_DET_TIME
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|aggr_wait_time
operator|>
name|VXGE_HAL_LAG_MAX_AGGR_WAIT_TIME
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|aggr_wait_time
operator|!=
name|VXGE_HAL_LAG_DEF_AGGR_WAIT_TIME
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_AGGR_WAIT_TIME
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|short_timer_scale
operator|!=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_1X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|short_timer_scale
operator|!=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_10X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|short_timer_scale
operator|!=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_100X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|short_timer_scale
operator|!=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_1000X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|short_timer_scale
operator|!=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_SHORT_TIMER_SCALE
operator|)
return|;
if|if
condition|(
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_1X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_10X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_100X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_1000X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_10000X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_100000X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_1000000X
operator|)
operator|&&
operator|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_LAG_LONG_TIMER_SCALE
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_vpath_qos_config_check - Check vpath QOS configuration.  * @config: Vpath QOS configuration information  *  * Check the vpath QOS configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_vpath_qos_config_check
parameter_list|(
name|vxge_hal_vpath_qos_config_t
modifier|*
name|config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|config
operator|->
name|priority
operator|>
name|VXGE_HAL_VPATH_QOS_PRIORITY_MAX
operator|)
operator|&&
operator|(
name|config
operator|->
name|priority
operator|!=
name|VXGE_HAL_VPATH_QOS_PRIORITY_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_QOS_PRIORITY
operator|)
return|;
if|if
condition|(
operator|(
name|config
operator|->
name|min_bandwidth
operator|>
name|VXGE_HAL_VPATH_QOS_MIN_BANDWIDTH_MAX
operator|)
operator|&&
operator|(
name|config
operator|->
name|min_bandwidth
operator|!=
name|VXGE_HAL_VPATH_QOS_MIN_BANDWIDTH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_QOS_MIN_BANDWIDTH
operator|)
return|;
if|if
condition|(
operator|(
name|config
operator|->
name|max_bandwidth
operator|>
name|VXGE_HAL_VPATH_QOS_MAX_BANDWIDTH_MAX
operator|)
operator|&&
operator|(
name|config
operator|->
name|max_bandwidth
operator|!=
name|VXGE_HAL_VPATH_QOS_MAX_BANDWIDTH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_QOS_MAX_BANDWIDTH
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_config_check - Check mrpcim configuration.  * @config: mrpcim configuration information  *  * Check the mrpcim configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_config_check
parameter_list|(
name|vxge_hal_mrpcim_config_t
modifier|*
name|config
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_device_mac_config_check
argument_list|(
operator|&
name|config
operator|->
name|mac_config
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_device_lag_config_check
argument_list|(
operator|&
name|config
operator|->
name|lag_config
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_vpath_qos_config_check
argument_list|(
operator|&
name|config
operator|->
name|vp_qos
index|[
name|i
index|]
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
block|}
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_ring_config_check - Check ring configuration.  * @ring_config: Device configuration information  *  * Check the ring configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_ring_config_check
parameter_list|(
name|vxge_hal_ring_config_t
modifier|*
name|ring_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|ring_config
operator|->
name|enable
operator|!=
name|VXGE_HAL_RING_ENABLE
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|enable
operator|!=
name|VXGE_HAL_RING_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_ENABLE
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|ring_length
operator|<
name|VXGE_HAL_MIN_RING_LENGTH
operator|)
operator|||
operator|(
name|ring_config
operator|->
name|ring_length
operator|>
name|VXGE_HAL_MAX_RING_LENGTH
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_LENGTH
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|buffer_mode
operator|<
name|VXGE_HAL_RING_RXD_BUFFER_MODE_1
operator|)
operator|||
operator|(
name|ring_config
operator|->
name|buffer_mode
operator|>
name|VXGE_HAL_RING_RXD_BUFFER_MODE_5
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_RXD_BUFFER_MODE
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|scatter_mode
operator|!=
name|VXGE_HAL_RING_SCATTER_MODE_A
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|scatter_mode
operator|!=
name|VXGE_HAL_RING_SCATTER_MODE_B
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|scatter_mode
operator|!=
name|VXGE_HAL_RING_SCATTER_MODE_C
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|scatter_mode
operator|!=
name|VXGE_HAL_RING_SCATTER_MODE_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_SCATTER_MODE
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|post_mode
operator|!=
name|VXGE_HAL_RING_POST_MODE_LEGACY
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|post_mode
operator|!=
name|VXGE_HAL_RING_POST_MODE_DOORBELL
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|post_mode
operator|!=
name|VXGE_HAL_RING_POST_MODE_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_POST_MODE
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|max_frm_len
operator|>
name|VXGE_HAL_MAX_RING_MAX_FRM_LEN
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|max_frm_len
operator|!=
name|VXGE_HAL_MAX_RING_FRM_LEN_USE_MTU
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_MAX_FRM_LEN
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|no_snoop_bits
operator|>
name|VXGE_HAL_RING_NO_SNOOP_ALL
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|no_snoop_bits
operator|!=
name|VXGE_HAL_RING_NO_SNOOP_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_NO_SNOOP_ALL
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|rx_timer_val
operator|>
name|VXGE_HAL_RING_MAX_RX_TIMER_VAL
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|rx_timer_val
operator|!=
name|VXGE_HAL_RING_USE_FLASH_DEFAULT_RX_TIMER_VAL
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_TIMER_VAL
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|greedy_return
operator|!=
name|VXGE_HAL_RING_GREEDY_RETURN_ENABLE
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|greedy_return
operator|!=
name|VXGE_HAL_RING_GREEDY_RETURN_DISABLE
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|greedy_return
operator|!=
name|VXGE_HAL_RING_GREEDY_RETURN_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_GREEDY_RETURN
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|rx_timer_ci
operator|!=
name|VXGE_HAL_RING_RX_TIMER_CI_ENABLE
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|rx_timer_ci
operator|!=
name|VXGE_HAL_RING_RX_TIMER_CI_DISABLE
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|rx_timer_ci
operator|!=
name|VXGE_HAL_RING_RX_TIMER_CI_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_TIMER_CI
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|ring_config
operator|->
name|backoff_interval_us
operator|<
name|VXGE_HAL_MIN_BACKOFF_INTERVAL_US
operator|)
operator|||
operator|(
name|ring_config
operator|->
name|backoff_interval_us
operator|>
name|VXGE_HAL_MAX_BACKOFF_INTERVAL_US
operator|)
operator|)
operator|&&
operator|(
name|ring_config
operator|->
name|backoff_interval_us
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_BACKOFF_INTERVAL_US
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_BACKOFF_INTERVAL_US
operator|)
return|;
if|if
condition|(
operator|(
name|ring_config
operator|->
name|indicate_max_pkts
operator|<
name|VXGE_HAL_MIN_RING_INDICATE_MAX_PKTS
operator|)
operator|||
operator|(
name|ring_config
operator|->
name|indicate_max_pkts
operator|>
name|VXGE_HAL_MAX_RING_INDICATE_MAX_PKTS
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RING_INDICATE_MAX_PKTS
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_fifo_config_check - Check fifo configuration.  * @fifo_config: Fifo configuration information  *  * Check the fifo configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_fifo_config_check
parameter_list|(
name|vxge_hal_fifo_config_t
modifier|*
name|fifo_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|fifo_config
operator|->
name|enable
operator|!=
name|VXGE_HAL_FIFO_ENABLE
operator|)
operator|&&
operator|(
name|fifo_config
operator|->
name|enable
operator|!=
name|VXGE_HAL_FIFO_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_ENABLE
operator|)
return|;
if|if
condition|(
operator|(
name|fifo_config
operator|->
name|fifo_length
operator|<
name|VXGE_HAL_MIN_FIFO_LENGTH
operator|)
operator|||
operator|(
name|fifo_config
operator|->
name|fifo_length
operator|>
name|VXGE_HAL_MAX_FIFO_LENGTH
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_LENGTH
operator|)
return|;
if|if
condition|(
operator|(
name|fifo_config
operator|->
name|max_frags
operator|<
name|VXGE_HAL_MIN_FIFO_FRAGS
operator|)
operator|||
operator|(
name|fifo_config
operator|->
name|max_frags
operator|>
name|VXGE_HAL_MAX_FIFO_FRAGS
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_FRAGS
operator|)
return|;
if|if
condition|(
name|fifo_config
operator|->
name|alignment_size
operator|>
name|VXGE_HAL_MAX_FIFO_ALIGNMENT_SIZE
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_ALIGNMENT_SIZE
operator|)
return|;
if|if
condition|(
name|fifo_config
operator|->
name|max_aligned_frags
operator|>
name|fifo_config
operator|->
name|max_frags
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_MAX_FRAGS
operator|)
return|;
if|if
condition|(
operator|(
name|fifo_config
operator|->
name|intr
operator|!=
name|VXGE_HAL_FIFO_QUEUE_INTR_ENABLE
operator|)
operator|&&
operator|(
name|fifo_config
operator|->
name|intr
operator|!=
name|VXGE_HAL_FIFO_QUEUE_INTR_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_QUEUE_INTR
operator|)
return|;
if|if
condition|(
name|fifo_config
operator|->
name|no_snoop_bits
operator|>
name|VXGE_HAL_FIFO_NO_SNOOP_ALL
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_FIFO_NO_SNOOP_ALL
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_tim_intr_config_check - Check tim intr configuration.  * @tim_intr_config: tim intr configuration information  *  * Check the tim intr configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_tim_intr_config_check
parameter_list|(
name|vxge_hal_tim_intr_config_t
modifier|*
name|tim_intr_config
parameter_list|)
block|{
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|intr_enable
operator|!=
name|VXGE_HAL_TIM_INTR_ENABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|intr_enable
operator|!=
name|VXGE_HAL_TIM_INTR_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_INTR_ENABLE
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|btimer_val
operator|>
name|VXGE_HAL_MAX_TIM_BTIMER_VAL
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|btimer_val
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_BTIMER_VAL
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_BTIMER_VAL
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|timer_ac_en
operator|!=
name|VXGE_HAL_TIM_TIMER_AC_ENABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|timer_ac_en
operator|!=
name|VXGE_HAL_TIM_TIMER_AC_DISABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|timer_ac_en
operator|!=
name|VXGE_HAL_TIM_TIMER_AC_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_TIMER_AC_EN
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|timer_ci_en
operator|!=
name|VXGE_HAL_TIM_TIMER_CI_ENABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|timer_ci_en
operator|!=
name|VXGE_HAL_TIM_TIMER_CI_DISABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|timer_ci_en
operator|!=
name|VXGE_HAL_TIM_TIMER_CI_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_TIMER_CI_EN
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|timer_ri_en
operator|!=
name|VXGE_HAL_TIM_TIMER_RI_ENABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|timer_ri_en
operator|!=
name|VXGE_HAL_TIM_TIMER_RI_DISABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|timer_ri_en
operator|!=
name|VXGE_HAL_TIM_TIMER_RI_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_TIMER_RI_EN
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|rtimer_event_sf
operator|>
name|VXGE_HAL_MAX_TIM_RTIMER_EVENT_SF
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|rtimer_event_sf
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_RTIMER_EVENT_SF
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_BTIMER_EVENT_SF
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|rtimer_val
operator|>
name|VXGE_HAL_MAX_TIM_RTIMER_VAL
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|rtimer_val
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_RTIMER_VAL
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_RTIMER_VAL
operator|)
return|;
if|if
condition|(
operator|(
operator|(
operator|(
name|tim_intr_config
operator|->
name|util_sel
operator|>
literal|19
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|util_sel
operator|<
literal|32
operator|)
operator|)
operator|||
operator|(
operator|(
name|tim_intr_config
operator|->
name|util_sel
operator|>
literal|48
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|util_sel
operator|<
literal|63
operator|)
operator|)
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|util_sel
operator|!=
name|VXGE_HAL_TIM_UTIL_SEL_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_UTIL_SEL
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|ltimer_val
operator|>
name|VXGE_HAL_MAX_TIM_LTIMER_VAL
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|ltimer_val
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_LTIMER_VAL
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_LTIMER_VAL
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|txfrm_cnt_en
operator|!=
name|VXGE_HAL_TXFRM_CNT_EN_ENABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|txfrm_cnt_en
operator|!=
name|VXGE_HAL_TXFRM_CNT_EN_DISABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|txfrm_cnt_en
operator|!=
name|VXGE_HAL_TXFRM_CNT_EN_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TXFRM_CNT_EN
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|txd_cnt_en
operator|!=
name|VXGE_HAL_TXD_CNT_EN_ENABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|txd_cnt_en
operator|!=
name|VXGE_HAL_TXD_CNT_EN_DISABLE
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|txd_cnt_en
operator|!=
name|VXGE_HAL_TXD_CNT_EN_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TXD_CNT_EN
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|urange_a
operator|>
name|VXGE_HAL_MAX_TIM_URANGE_A
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|urange_a
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_A
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_URANGE_A
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|uec_a
operator|>
name|VXGE_HAL_MAX_TIM_UEC_A
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|uec_a
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_A
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_UEC_A
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|urange_b
operator|>
name|VXGE_HAL_MAX_TIM_URANGE_B
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|urange_b
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_B
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_URANGE_B
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|uec_b
operator|>
name|VXGE_HAL_MAX_TIM_UEC_B
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|uec_b
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_B
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_UEC_B
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|urange_c
operator|>
name|VXGE_HAL_MAX_TIM_URANGE_C
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|urange_c
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_C
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_URANGE_C
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|uec_c
operator|>
name|VXGE_HAL_MAX_TIM_UEC_C
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|uec_c
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_C
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_UEC_C
operator|)
return|;
if|if
condition|(
operator|(
name|tim_intr_config
operator|->
name|uec_d
operator|>
name|VXGE_HAL_MAX_TIM_UEC_D
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|uec_d
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_D
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_TIM_UEC_D
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|tim_intr_config
operator|->
name|ufca_intr_thres
operator|<
name|VXGE_HAL_MIN_UFCA_INTR_THRES
operator|)
operator|||
operator|(
name|tim_intr_config
operator|->
name|ufca_intr_thres
operator|>
name|VXGE_HAL_MAX_UFCA_INTR_THRES
operator|)
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|ufca_intr_thres
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_INTR_THRES
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_UFCA_INTR_THRES
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|tim_intr_config
operator|->
name|ufca_lo_lim
operator|<
name|VXGE_HAL_MIN_UFCA_LO_LIM
operator|)
operator|||
operator|(
name|tim_intr_config
operator|->
name|ufca_lo_lim
operator|>
name|VXGE_HAL_MAX_UFCA_LO_LIM
operator|)
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|ufca_lo_lim
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_LO_LIM
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_UFCA_LO_LIM
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|tim_intr_config
operator|->
name|ufca_hi_lim
operator|<
name|VXGE_HAL_MIN_UFCA_HI_LIM
operator|)
operator|||
operator|(
name|tim_intr_config
operator|->
name|ufca_hi_lim
operator|>
name|VXGE_HAL_MAX_UFCA_HI_LIM
operator|)
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|ufca_hi_lim
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_HI_LIM
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_UFCA_HI_LIM
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|tim_intr_config
operator|->
name|ufca_lbolt_period
operator|<
name|VXGE_HAL_MIN_UFCA_LBOLT_PERIOD
operator|)
operator|||
operator|(
name|tim_intr_config
operator|->
name|ufca_lbolt_period
operator|>
name|VXGE_HAL_MAX_UFCA_LBOLT_PERIOD
operator|)
operator|)
operator|&&
operator|(
name|tim_intr_config
operator|->
name|ufca_lbolt_period
operator|!=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_LBOLT_PERIOD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_UFCA_LBOLT_PERIOD
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_vpath_config_check - Check vpath configuration.  * @vp_config: Vpath configuration information  *  * Check the vpath configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_vpath_config_check
parameter_list|(
name|vxge_hal_vp_config_t
modifier|*
name|vp_config
parameter_list|)
block|{
name|vxge_hal_status_e
name|status
decl_stmt|;
if|if
condition|(
name|vp_config
operator|->
name|vp_id
operator|>
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_ID
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|wire_port
operator|!=
name|VXGE_HAL_VPATH_USE_PORT0
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|wire_port
operator|!=
name|VXGE_HAL_VPATH_USE_PORT1
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|wire_port
operator|!=
name|VXGE_HAL_VPATH_USE_BOTH
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|wire_port
operator|!=
name|VXGE_HAL_VPATH_USE_DEFAULT_PORT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_WIRE_PORT
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|priority
operator|!=
name|VXGE_HAL_VPATH_PRIORITY_DEFAULT
operator|)
operator|&&
operator|(
operator|(
operator|(
name|int
operator|)
name|vp_config
operator|->
name|priority
operator|<
name|VXGE_HAL_VPATH_PRIORITY_MIN
operator|)
operator|||
operator|(
name|vp_config
operator|->
name|priority
operator|>
name|VXGE_HAL_VPATH_PRIORITY_MAX
operator|)
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_PRIORITY
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|bandwidth
operator|!=
name|VXGE_HAL_VPATH_BW_LIMIT_DEFAULT
operator|)
operator|&&
operator|(
operator|(
name|vp_config
operator|->
name|bandwidth
operator|<
name|VXGE_HAL_VPATH_BW_LIMIT_MIN
operator|)
operator|||
operator|(
name|vp_config
operator|->
name|bandwidth
operator|>
name|VXGE_HAL_VPATH_BW_LIMIT_MAX
operator|)
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_BANDWIDTH_LIMIT
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|no_snoop
operator|!=
name|VXGE_HAL_VPATH_NO_SNOOP_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|no_snoop
operator|!=
name|VXGE_HAL_VPATH_NO_SNOOP_DISABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|no_snoop
operator|!=
name|VXGE_HAL_VPATH_NO_SNOOP_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_NO_SNOOP
operator|)
return|;
name|status
operator|=
name|__hal_device_ring_config_check
argument_list|(
operator|&
name|vp_config
operator|->
name|ring
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_fifo_config_check
argument_list|(
operator|&
name|vp_config
operator|->
name|fifo
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_tim_intr_config_check
argument_list|(
operator|&
name|vp_config
operator|->
name|tti
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
name|status
operator|=
name|__hal_device_tim_intr_config_check
argument_list|(
operator|&
name|vp_config
operator|->
name|rti
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|mtu
operator|!=
name|VXGE_HAL_VPATH_USE_FLASH_DEFAULT_INITIAL_MTU
operator|)
operator|&&
operator|(
operator|(
name|vp_config
operator|->
name|mtu
operator|<
name|VXGE_HAL_VPATH_MIN_INITIAL_MTU
operator|)
operator|||
operator|(
name|vp_config
operator|->
name|mtu
operator|>
name|VXGE_HAL_VPATH_MAX_INITIAL_MTU
operator|)
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_MTU
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|tpa_lsov2_en
operator|!=
name|VXGE_HAL_VPATH_TPA_LSOV2_EN_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_lsov2_en
operator|!=
name|VXGE_HAL_VPATH_TPA_LSOV2_EN_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_lsov2_en
operator|!=
name|VXGE_HAL_VPATH_TPA_LSOV2_EN_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_TPA_LSOV2_EN
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|tpa_ignore_frame_error
operator|!=
name|VXGE_HAL_VPATH_TPA_IGNORE_FRAME_ERROR_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_ignore_frame_error
operator|!=
name|VXGE_HAL_VPATH_TPA_IGNORE_FRAME_ERROR_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_ignore_frame_error
operator|!=
name|VXGE_HAL_VPATH_TPA_IGNORE_FRAME_ERROR_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_TPA_IGNORE_FRAME_ERROR
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|tpa_ipv6_keep_searching
operator|!=
name|VXGE_HAL_VPATH_TPA_IPV6_KEEP_SEARCHING_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_ipv6_keep_searching
operator|!=
name|VXGE_HAL_VPATH_TPA_IPV6_KEEP_SEARCHING_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_ipv6_keep_searching
operator|!=
name|VXGE_HAL_VPATH_TPA_IPV6_KEEP_SEARCHING_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_TPA_IPV6_KEEP_SEARCHING
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|tpa_l4_pshdr_present
operator|!=
name|VXGE_HAL_VPATH_TPA_L4_PSHDR_PRESENT_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_l4_pshdr_present
operator|!=
name|VXGE_HAL_VPATH_TPA_L4_PSHDR_PRESENT_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_l4_pshdr_present
operator|!=
name|VXGE_HAL_VPATH_TPA_L4_PSHDR_PRESENT_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_TPA_L4_PSHDR_PRESENT
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|tpa_support_mobile_ipv6_hdrs
operator|!=
name|VXGE_HAL_VPATH_TPA_SUPPORT_MOBILE_IPV6_HDRS_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_support_mobile_ipv6_hdrs
operator|!=
name|VXGE_HAL_VPATH_TPA_SUPPORT_MOBILE_IPV6_HDRS_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|tpa_support_mobile_ipv6_hdrs
operator|!=
name|VXGE_HAL_VPATH_TPA_SUPPORT_MOBILE_IPV6_HDRS_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_TPA_SUPPORT_MOBILE_IPV6_HDRS
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV4_TCP_INCL_PH_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV4_TCP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV4_TCP_INCL_PH_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_IPV4_TCP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV6_TCP_INCL_PH_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV6_TCP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV6_TCP_INCL_PH_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_IPV6_TCP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV4_UDP_INCL_PH_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV4_UDP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV4_UDP_INCL_PH_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_IPV4_UDP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV6_UDP_INCL_PH_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV6_UDP_INCL_PH_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_VPATH_RPA_IPV6_UDP_INCL_PH_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_IPV4_UDP_INCL_PH
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_l4_incl_cf
operator|!=
name|VXGE_HAL_VPATH_RPA_L4_INCL_CF_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l4_incl_cf
operator|!=
name|VXGE_HAL_VPATH_RPA_L4_INCL_CF_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l4_incl_cf
operator|!=
name|VXGE_HAL_VPATH_RPA_L4_INCL_CF_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_L4_INCL_CF
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_strip_vlan_tag
operator|!=
name|VXGE_HAL_VPATH_RPA_STRIP_VLAN_TAG_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_strip_vlan_tag
operator|!=
name|VXGE_HAL_VPATH_RPA_STRIP_VLAN_TAG_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_strip_vlan_tag
operator|!=
name|VXGE_HAL_VPATH_RPA_STRIP_VLAN_TAG_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_STRIP_VLAN_TAG
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_l4_comp_csum
operator|!=
name|VXGE_HAL_VPATH_RPA_L4_COMP_CSUM_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l4_comp_csum
operator|!=
name|VXGE_HAL_VPATH_RPA_L4_COMP_CSUM_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l4_comp_csum
operator|!=
name|VXGE_HAL_VPATH_RPA_L4_COMP_CSUM_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_L4_COMP_CSUM
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_l3_incl_cf
operator|!=
name|VXGE_HAL_VPATH_RPA_L3_INCL_CF_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l3_incl_cf
operator|!=
name|VXGE_HAL_VPATH_RPA_L3_INCL_CF_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l3_incl_cf
operator|!=
name|VXGE_HAL_VPATH_RPA_L3_INCL_CF_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_L3_INCL_CF
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_l3_comp_csum
operator|!=
name|VXGE_HAL_VPATH_RPA_L3_COMP_CSUM_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l3_comp_csum
operator|!=
name|VXGE_HAL_VPATH_RPA_L3_COMP_CSUM_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_l3_comp_csum
operator|!=
name|VXGE_HAL_VPATH_RPA_L3_COMP_CSUM_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_L3_COMP_CSUM
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_ucast_all_addr_en
operator|!=
name|VXGE_HAL_VPATH_RPA_UCAST_ALL_ADDR_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ucast_all_addr_en
operator|!=
name|VXGE_HAL_VPATH_RPA_UCAST_ALL_ADDR_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_ucast_all_addr_en
operator|!=
name|VXGE_HAL_VPATH_RPA_UCAST_ALL_ADDR_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_UCAST_ALL_ADDR_EN
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_mcast_all_addr_en
operator|!=
name|VXGE_HAL_VPATH_RPA_MCAST_ALL_ADDR_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_mcast_all_addr_en
operator|!=
name|VXGE_HAL_VPATH_RPA_MCAST_ALL_ADDR_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_mcast_all_addr_en
operator|!=
name|VXGE_HAL_VPATH_RPA_MCAST_ALL_ADDR_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_MCAST_ALL_ADDR_EN
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_bcast_en
operator|!=
name|VXGE_HAL_VPATH_RPA_BCAST_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_bcast_en
operator|!=
name|VXGE_HAL_VPATH_RPA_BCAST_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_bcast_en
operator|!=
name|VXGE_HAL_VPATH_RPA_BCAST_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_CAST_EN
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|rpa_all_vid_en
operator|!=
name|VXGE_HAL_VPATH_RPA_ALL_VID_USE_FLASH_DEFAULT
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_all_vid_en
operator|!=
name|VXGE_HAL_VPATH_RPA_ALL_VID_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|rpa_all_vid_en
operator|!=
name|VXGE_HAL_VPATH_RPA_ALL_VID_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_RPA_ALL_VID_EN
operator|)
return|;
if|if
condition|(
operator|(
name|vp_config
operator|->
name|vp_queue_l2_flow
operator|!=
name|VXGE_HAL_VPATH_VP_Q_L2_FLOW_ENABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|vp_queue_l2_flow
operator|!=
name|VXGE_HAL_VPATH_VP_Q_L2_FLOW_DISABLE
operator|)
operator|&&
operator|(
name|vp_config
operator|->
name|vp_queue_l2_flow
operator|!=
name|VXGE_HAL_VPATH_VP_Q_L2_FLOW_USE_FLASH_DEFAULT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_VPATH_VP_Q_L2_FLOW
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_device_config_check - Check device configuration.  * @new_config: Device configuration information  *  * Check the device configuration  *  * Returns: VXGE_HAL_OK - success,  * otherwise one of the vxge_hal_status_e {} enumerated error codes.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_device_config_check
parameter_list|(
name|vxge_hal_device_config_t
modifier|*
name|new_config
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|vxge_hal_status_e
name|status
decl_stmt|;
if|if
condition|(
name|new_config
operator|->
name|dma_blockpool_incr
operator|<
name|VXGE_HAL_INCR_DMA_BLOCK_POOL_SIZE
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_BLOCKPOOL_INCR
operator|)
return|;
if|if
condition|(
name|new_config
operator|->
name|dma_blockpool_max
operator|<
name|VXGE_HAL_MAX_DMA_BLOCK_POOL_SIZE
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_BLOCKPOOL_MAX
operator|)
return|;
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_mrpcim_config_check
argument_list|(
operator|&
name|new_config
operator|->
name|mrpcim_config
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
if|if
condition|(
name|new_config
operator|->
name|isr_polling_cnt
operator|>
name|VXGE_HAL_MAX_ISR_POLLING_CNT
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_ISR_POLLING_CNT
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|max_payload_size
operator|>
name|VXGE_HAL_MAX_PAYLOAD_SIZE_4096
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|max_payload_size
operator|!=
name|VXGE_HAL_USE_BIOS_DEFAULT_PAYLOAD_SIZE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAX_PAYLOAD_SIZE
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|mmrb_count
operator|>
name|VXGE_HAL_MMRB_COUNT_4096
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|mmrb_count
operator|!=
name|VXGE_HAL_USE_BIOS_DEFAULT_MMRB_COUNT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAX_PAYLOAD_SIZE
operator|)
return|;
if|if
condition|(
operator|(
operator|(
name|new_config
operator|->
name|stats_refresh_time_sec
operator|<
name|VXGE_HAL_MIN_STATS_REFRESH_TIME
operator|)
operator|||
operator|(
name|new_config
operator|->
name|stats_refresh_time_sec
operator|>
name|VXGE_HAL_MAX_STATS_REFRESH_TIME
operator|)
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|stats_refresh_time_sec
operator|!=
name|VXGE_HAL_STATS_REFRESH_DISABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_STATS_REFRESH_TIME
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|intr_mode
operator|!=
name|VXGE_HAL_INTR_MODE_IRQLINE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|intr_mode
operator|!=
name|VXGE_HAL_INTR_MODE_MSIX
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|intr_mode
operator|!=
name|VXGE_HAL_INTR_MODE_MSIX_ONE_SHOT
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|intr_mode
operator|!=
name|VXGE_HAL_INTR_MODE_EMULATED_INTA
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|intr_mode
operator|!=
name|VXGE_HAL_INTR_MODE_DEF
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_INTR_MODE
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|dump_on_unknown
operator|!=
name|VXGE_HAL_DUMP_ON_UNKNOWN_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|dump_on_unknown
operator|!=
name|VXGE_HAL_DUMP_ON_UNKNOWN_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_DUMP_ON_UNKNOWN
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|dump_on_serr
operator|!=
name|VXGE_HAL_DUMP_ON_SERR_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|dump_on_serr
operator|!=
name|VXGE_HAL_DUMP_ON_SERR_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_DUMP_ON_SERR
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|dump_on_critical
operator|!=
name|VXGE_HAL_DUMP_ON_CRITICAL_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|dump_on_critical
operator|!=
name|VXGE_HAL_DUMP_ON_CRITICAL_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_DUMP_ON_CRITICAL
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|dump_on_eccerr
operator|!=
name|VXGE_HAL_DUMP_ON_ECCERR_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|dump_on_eccerr
operator|!=
name|VXGE_HAL_DUMP_ON_ECCERR_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_DUMP_ON_ECCERR
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|rth_en
operator|!=
name|VXGE_HAL_RTH_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|rth_en
operator|!=
name|VXGE_HAL_RTH_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RTH_EN
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|rth_it_type
operator|!=
name|VXGE_HAL_RTH_IT_TYPE_SOLO_IT
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|rth_it_type
operator|!=
name|VXGE_HAL_RTH_IT_TYPE_MULTI_IT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RTH_IT_TYPE
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|rts_mac_en
operator|!=
name|VXGE_HAL_RTS_MAC_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|rts_mac_en
operator|!=
name|VXGE_HAL_RTS_MAC_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RTS_MAC_EN
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|rts_qos_en
operator|!=
name|VXGE_HAL_RTS_QOS_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|rts_qos_en
operator|!=
name|VXGE_HAL_RTS_QOS_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RTS_QOS_EN
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|rts_port_en
operator|!=
name|VXGE_HAL_RTS_PORT_DISABLE
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|rts_port_en
operator|!=
name|VXGE_HAL_RTS_PORT_ENABLE
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_RTS_PORT_EN
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_device_vpath_config_check
argument_list|(
operator|&
name|new_config
operator|->
name|vp_config
index|[
name|i
index|]
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
return|return
operator|(
name|status
operator|)
return|;
block|}
if|if
condition|(
operator|(
name|new_config
operator|->
name|max_cqe_groups
operator|<
name|VXGE_HAL_MIN_MAX_CQE_GROUPS
operator|)
operator|||
operator|(
name|new_config
operator|->
name|max_cqe_groups
operator|>
name|VXGE_HAL_MAX_MAX_CQE_GROUPS
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAX_CQE_GROUPS
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|max_num_wqe_od_groups
operator|<
name|VXGE_HAL_MIN_MAX_NUM_OD_GROUPS
operator|)
operator|||
operator|(
name|new_config
operator|->
name|max_num_wqe_od_groups
operator|>
name|VXGE_HAL_MAX_MAX_NUM_OD_GROUPS
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_MAX_NUM_OD_GROUPS
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|no_wqe_threshold
operator|<
name|VXGE_HAL_MIN_NO_WQE_THRESHOLD
operator|)
operator|||
operator|(
name|new_config
operator|->
name|no_wqe_threshold
operator|>
name|VXGE_HAL_MAX_NO_WQE_THRESHOLD
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_NO_WQE_THRESHOLD
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|refill_threshold_high
operator|<
name|VXGE_HAL_MIN_REFILL_THRESHOLD_HIGH
operator|)
operator|||
operator|(
name|new_config
operator|->
name|refill_threshold_high
operator|>
name|VXGE_HAL_MAX_REFILL_THRESHOLD_HIGH
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_REFILL_THRESHOLD_HIGH
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|refill_threshold_low
operator|<
name|VXGE_HAL_MIN_REFILL_THRESHOLD_LOW
operator|)
operator|||
operator|(
name|new_config
operator|->
name|refill_threshold_low
operator|>
name|VXGE_HAL_MAX_REFILL_THRESHOLD_LOW
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_REFILL_THRESHOLD_LOW
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|ack_blk_limit
operator|<
name|VXGE_HAL_MIN_ACK_BLOCK_LIMIT
operator|)
operator|||
operator|(
name|new_config
operator|->
name|ack_blk_limit
operator|>
name|VXGE_HAL_MAX_ACK_BLOCK_LIMIT
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_ACK_BLOCK_LIMIT
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|stats_read_method
operator|!=
name|VXGE_HAL_STATS_READ_METHOD_DMA
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|stats_read_method
operator|!=
name|VXGE_HAL_STATS_READ_METHOD_PIO
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_STATS_READ_METHOD
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|poll_or_doorbell
operator|!=
name|VXGE_HAL_POLL_OR_DOORBELL_POLL
operator|)
operator|&&
operator|(
name|new_config
operator|->
name|poll_or_doorbell
operator|!=
name|VXGE_HAL_POLL_OR_DOORBELL_DOORBELL
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_POLL_OR_DOOR_BELL
operator|)
return|;
if|if
condition|(
operator|(
name|new_config
operator|->
name|device_poll_millis
operator|<
name|VXGE_HAL_MIN_DEVICE_POLL_MILLIS
operator|)
operator|||
operator|(
name|new_config
operator|->
name|device_poll_millis
operator|>
name|VXGE_HAL_MAX_DEVICE_POLL_MILLIS
operator|)
condition|)
return|return
operator|(
name|VXGE_HAL_BADCFG_DEVICE_POLL_MILLIS
operator|)
return|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_device_config_default_get - Initialize device config with defaults.  * @device_config: Configuration structure to be initialized,  *	    For the X3100 configuration "knobs" please  *	    refer to vxge_hal_device_config_t and X3100  *	    User Guide.  *  * Initialize X3100 device config with default values.  *  * See also: vxge_hal_device_initialize(), vxge_hal_device_terminate(),  * vxge_hal_status_e {} vxge_hal_device_attr_t {}.  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_device_config_default_get
parameter_list|(
name|vxge_hal_device_config_t
modifier|*
name|device_config
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|vxge_hal_mac_config_t
modifier|*
name|mac_config
decl_stmt|;
name|vxge_hal_wire_port_config_t
modifier|*
name|wire_port_config
decl_stmt|;
name|vxge_hal_switch_port_config_t
modifier|*
name|switch_port_config
decl_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"device_config = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|device_config
argument_list|)
expr_stmt|;
name|device_config
operator|->
name|dma_blockpool_min
operator|=
name|VXGE_HAL_MIN_DMA_BLOCK_POOL_SIZE
expr_stmt|;
name|device_config
operator|->
name|dma_blockpool_initial
operator|=
name|VXGE_HAL_INITIAL_DMA_BLOCK_POOL_SIZE
expr_stmt|;
name|device_config
operator|->
name|dma_blockpool_incr
operator|=
name|VXGE_HAL_INCR_DMA_BLOCK_POOL_SIZE
expr_stmt|;
name|device_config
operator|->
name|dma_blockpool_max
operator|=
name|VXGE_HAL_MAX_DMA_BLOCK_POOL_SIZE
expr_stmt|;
name|mac_config
operator|=
operator|&
name|device_config
operator|->
name|mrpcim_config
operator|.
name|mac_config
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAC_MAX_WIRE_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|wire_port_config
operator|=
operator|&
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
expr_stmt|;
name|wire_port_config
operator|->
name|port_id
operator|=
name|i
expr_stmt|;
name|wire_port_config
operator|->
name|media
operator|=
name|VXGE_HAL_WIRE_PORT_MEDIA_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|mtu
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_INITIAL_MTU
expr_stmt|;
name|wire_port_config
operator|->
name|autoneg_mode
operator|=
name|VXGE_HAL_WIRE_PORT_AUTONEG_MODE_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|autoneg_rate
operator|=
name|VXGE_HAL_WIRE_PORT_AUTONEG_RATE_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|fixed_use_fsm
operator|=
name|VXGE_HAL_WIRE_PORT_FIXED_USE_FSM_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|antp_use_fsm
operator|=
name|VXGE_HAL_WIRE_PORT_ANTP_USE_FSM_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|anbe_use_fsm
operator|=
name|VXGE_HAL_WIRE_PORT_ANBE_USE_FSM_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|link_stability_period
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_LINK_STABILITY_PERIOD
expr_stmt|;
name|wire_port_config
operator|->
name|port_stability_period
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_PORT_STABILITY_PERIOD
expr_stmt|;
name|wire_port_config
operator|->
name|tmac_en
operator|=
name|VXGE_HAL_WIRE_PORT_TMAC_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|tmac_pad
operator|=
name|VXGE_HAL_WIRE_PORT_TMAC_PAD_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|tmac_pad_byte
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_TMAC_PAD_BYTE
expr_stmt|;
name|wire_port_config
operator|->
name|tmac_util_period
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_TMAC_UTIL_PERIOD
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_strip_fcs
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_STRIP_FCS_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_prom_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_PROM_EN_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_discard_pfrm
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_DISCARD_PFRM_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_util_period
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_UTIL_PERIOD
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_pause_gen_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_GEN_EN_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_pause_rcv_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_RCV_EN_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|rmac_pause_time
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_HIGH_PTIME
expr_stmt|;
name|wire_port_config
operator|->
name|limiter_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_LIMITER_DEFAULT
expr_stmt|;
name|wire_port_config
operator|->
name|max_limit
operator|=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_MAX_LIMIT
expr_stmt|;
block|}
name|switch_port_config
operator|=
operator|&
name|mac_config
operator|->
name|switch_port_config
expr_stmt|;
name|switch_port_config
operator|->
name|mtu
operator|=
name|VXGE_HAL_SWITCH_PORT_DEF_INITIAL_MTU
expr_stmt|;
name|switch_port_config
operator|->
name|tmac_en
operator|=
name|VXGE_HAL_SWITCH_PORT_TMAC_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|tmac_pad
operator|=
name|VXGE_HAL_SWITCH_PORT_TMAC_PAD_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|tmac_pad_byte
operator|=
name|VXGE_HAL_SWITCH_PORT_DEF_TMAC_PAD_BYTE
expr_stmt|;
name|switch_port_config
operator|->
name|tmac_util_period
operator|=
name|VXGE_HAL_SWITCH_PORT_DEF_TMAC_UTIL_PERIOD
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_strip_fcs
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_STRIP_FCS_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_prom_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_PROM_EN_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_discard_pfrm
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_DISCARD_PFRM_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_util_period
operator|=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_UTIL_PERIOD
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_pause_gen_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_GEN_EN_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_pause_rcv_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_RCV_EN_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|rmac_pause_time
operator|=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_HIGH_PTIME
expr_stmt|;
name|switch_port_config
operator|->
name|limiter_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_LIMITER_DEFAULT
expr_stmt|;
name|switch_port_config
operator|->
name|max_limit
operator|=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_MAX_LIMIT
expr_stmt|;
name|mac_config
operator|->
name|network_stability_period
operator|=
name|VXGE_HAL_MAC_DEF_NETWORK_STABILITY_PERIOD
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|16
condition|;
name|i
operator|++
control|)
block|{
name|mac_config
operator|->
name|mc_pause_threshold
index|[
name|i
index|]
operator|=
name|VXGE_HAL_MAC_DEF_MC_PAUSE_THRESHOLD
expr_stmt|;
block|}
name|mac_config
operator|->
name|tmac_perma_stop_en
operator|=
name|VXGE_HAL_MAC_TMAC_PERMA_STOP_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tmac_tx_switch_dis
operator|=
name|VXGE_HAL_MAC_TMAC_TX_SWITCH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tmac_lossy_switch_en
operator|=
name|VXGE_HAL_MAC_TMAC_LOSSY_SWITCH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tmac_lossy_wire_en
operator|=
name|VXGE_HAL_MAC_TMAC_LOSSY_WIRE_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
operator|=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_WIRE_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tmac_bcast_to_switch_dis
operator|=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_SWITCH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tmac_host_append_fcs_en
operator|=
name|VXGE_HAL_MAC_TMAC_HOST_APPEND_FCS_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tpa_support_snap_ab_n
operator|=
name|VXGE_HAL_MAC_TPA_SUPPORT_SNAP_AB_N_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|tpa_ecc_enable_n
operator|=
name|VXGE_HAL_MAC_TPA_ECC_ENABLE_N_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_ignore_frame_err
operator|=
name|VXGE_HAL_MAC_RPA_IGNORE_FRAME_ERR_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_support_snap_ab_n
operator|=
name|VXGE_HAL_MAC_RPA_SUPPORT_SNAP_AB_N_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_search_for_hao
operator|=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_HAO_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_support_ipv6_mobile_hdrs
operator|=
name|VXGE_HAL_MAC_RPA_SUPPORT_IPV6_MOBILE_HDRS_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_ipv6_stop_searching
operator|=
name|VXGE_HAL_MAC_RPA_IPV6_STOP_SEARCHING_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_no_ps_if_unknown
operator|=
name|VXGE_HAL_MAC_RPA_NO_PS_IF_UNKNOWN_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_search_for_etype
operator|=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_ETYPE_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_l4_comp_csum
operator|=
name|VXGE_HAL_MAC_RPA_REPL_l4_COMP_CSUM_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_l3_incl_cf
operator|=
name|VXGE_HAL_MAC_RPA_REPL_L3_INCL_CF_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_l3_comp_csum
operator|=
name|VXGE_HAL_MAC_RPA_REPL_l3_COMP_CSUM_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_ipv4_tcp_incl_ph
operator|=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_TCP_INCL_PH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_ipv6_tcp_incl_ph
operator|=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_TCP_INCL_PH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_ipv4_udp_incl_ph
operator|=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_UDP_INCL_PH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_ipv6_udp_incl_ph
operator|=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_UDP_INCL_PH_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_l4_incl_cf
operator|=
name|VXGE_HAL_MAC_RPA_REPL_L4_INCL_CF_DEFAULT
expr_stmt|;
name|mac_config
operator|->
name|rpa_repl_strip_vlan_tag
operator|=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lag_en
operator|=
name|VXGE_HAL_LAG_LAG_EN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lag_mode
operator|=
name|VXGE_HAL_LAG_LAG_MODE_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|la_mode_config
operator|.
name|tx_discard
operator|=
name|VXGE_HAL_LAG_TX_DISCARD_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|la_mode_config
operator|.
name|distrib_alg_sel
operator|=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|la_mode_config
operator|.
name|distrib_dest
operator|=
name|VXGE_HAL_LAG_DISTRIB_DEST_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|la_mode_config
operator|.
name|distrib_remap_if_fail
operator|=
name|VXGE_HAL_LAG_DISTRIB_REMAP_IF_FAIL_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|la_mode_config
operator|.
name|coll_max_delay
operator|=
name|VXGE_HAL_LAG_DEF_COLL_MAX_DELAY
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|la_mode_config
operator|.
name|rx_discard
operator|=
name|VXGE_HAL_LAG_RX_DISCARD_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|hot_standby
operator|=
name|VXGE_HAL_LAG_HOT_STANDBY_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|lacp_decides
operator|=
name|VXGE_HAL_LAG_LACP_DECIDES_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|pref_active_port
operator|=
name|VXGE_HAL_LAG_PREF_ACTIVE_PORT_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|auto_failback
operator|=
name|VXGE_HAL_LAG_AUTO_FAILBACK_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|failback_en
operator|=
name|VXGE_HAL_LAG_FAILBACK_EN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|cold_failover_timeout
operator|=
name|VXGE_HAL_LAG_DEF_COLD_FAILOVER_TIMEOUT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|alt_admin_key
operator|=
name|VXGE_HAL_LAG_DEF_ALT_ADMIN_KEY
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|ap_mode_config
operator|.
name|alt_aggr
operator|=
name|VXGE_HAL_LAG_ALT_AGGR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|sl_mode_config
operator|.
name|pref_indiv_port
operator|=
name|VXGE_HAL_LAG_PREF_INDIV_PORT_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|lacp_en
operator|=
name|VXGE_HAL_LAG_LACP_EN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|lacp_begin
operator|=
name|VXGE_HAL_LAG_LACP_BEGIN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|discard_lacp
operator|=
name|VXGE_HAL_LAG_DISCARD_LACP_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|liberal_len_chk
operator|=
name|VXGE_HAL_LAG_LIBERAL_LEN_CHK_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|marker_gen_recv_en
operator|=
name|VXGE_HAL_LAG_MARKER_GEN_RECV_EN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|marker_resp_en
operator|=
name|VXGE_HAL_LAG_MARKER_RESP_EN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|marker_resp_timeout
operator|=
name|VXGE_HAL_LAG_DEF_MARKER_RESP_TIMEOUT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|slow_proto_mrkr_min_interval
operator|=
name|VXGE_HAL_LAG_DEF_SLOW_PROTO_MRKR_MIN_INTERVAL
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|lacp_config
operator|.
name|throttle_mrkr_resp
operator|=
name|VXGE_HAL_LAG_THROTTLE_MRKR_RESP_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|incr_tx_aggr_stats
operator|=
name|VXGE_HAL_LAG_INCR_TX_AGGR_STATS_DEFAULT
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_LAG_PORT_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|vxge_hal_lag_port_config_t
modifier|*
name|port_config
init|=
operator|&
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|port_config
index|[
name|i
index|]
decl_stmt|;
name|port_config
operator|->
name|port_id
operator|=
name|i
expr_stmt|;
name|port_config
operator|->
name|lag_en
operator|=
name|VXGE_HAL_LAG_PORT_LAG_EN_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|discard_slow_proto
operator|=
name|VXGE_HAL_LAG_PORT_DISCARD_SLOW_PROTO_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|host_chosen_aggr
operator|=
name|VXGE_HAL_LAG_PORT_HOST_CHOSEN_AGGR_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|discard_unknown_slow_proto
operator|=
name|VXGE_HAL_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_port_num
operator|=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_PORT_NUM
expr_stmt|;
name|port_config
operator|->
name|actor_port_priority
operator|=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_PORT_PRIORITY
expr_stmt|;
name|port_config
operator|->
name|actor_key_10g
operator|=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_KEY_10G
expr_stmt|;
name|port_config
operator|->
name|actor_key_1g
operator|=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_KEY_1G
expr_stmt|;
name|port_config
operator|->
name|actor_lacp_activity
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_lacp_timeout
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_TIMEOUT_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_aggregation
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_AGGREGATION_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_synchronization
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_SYNCHRONIZATION_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_collecting
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_COLLECTING_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_distributing
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_defaulted
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_DEFAULTED_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|actor_expired
operator|=
name|VXGE_HAL_LAG_PORT_ACTOR_EXPIRED_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_sys_pri
operator|=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_SYS_PRI
expr_stmt|;
name|port_config
operator|->
name|partner_key
operator|=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_KEY
expr_stmt|;
name|port_config
operator|->
name|partner_port_num
operator|=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_PORT_NUM
expr_stmt|;
name|port_config
operator|->
name|partner_port_priority
operator|=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_PORT_PRIORITY
expr_stmt|;
name|port_config
operator|->
name|partner_lacp_activity
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_lacp_timeout
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_TIMEOUT_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_aggregation
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_AGGREGATION_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_synchronization
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_SYNCHRONIZATION_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_collecting
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_COLLECTING_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_distributing
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_defaulted
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_DEFAULTED_DEFAULT
expr_stmt|;
name|port_config
operator|->
name|partner_expired
operator|=
name|VXGE_HAL_LAG_PORT_PARTNER_EXPIRED_DEFAULT
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_LAG_AGGR_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|aggr_config
index|[
name|i
index|]
operator|.
name|aggr_id
operator|=
name|i
operator|+
literal|1
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|aggr_config
index|[
name|i
index|]
operator|.
name|use_port_mac_addr
operator|=
name|VXGE_HAL_LAG_AGGR_USE_PORT_MAC_ADDR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|aggr_config
index|[
name|i
index|]
operator|.
name|mac_addr_sel
operator|=
name|VXGE_HAL_LAG_AGGR_MAC_ADDR_SEL_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|aggr_config
index|[
name|i
index|]
operator|.
name|admin_key
operator|=
name|VXGE_HAL_LAG_AGGR_DEF_ADMIN_KEY
expr_stmt|;
block|}
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|sys_pri
operator|=
name|VXGE_HAL_LAG_DEF_SYS_PRI
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|use_port_mac_addr
operator|=
name|VXGE_HAL_LAG_USE_PORT_MAC_ADDR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|mac_addr_sel
operator|=
name|VXGE_HAL_LAG_MAC_ADDR_SEL_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|fast_per_time
operator|=
name|VXGE_HAL_LAG_DEF_FAST_PER_TIME
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|slow_per_time
operator|=
name|VXGE_HAL_LAG_DEF_SLOW_PER_TIME
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|short_timeout
operator|=
name|VXGE_HAL_LAG_DEF_SHORT_TIMEOUT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|long_timeout
operator|=
name|VXGE_HAL_LAG_DEF_LONG_TIMEOUT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|churn_det_time
operator|=
name|VXGE_HAL_LAG_DEF_CHURN_DET_TIME
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|aggr_wait_time
operator|=
name|VXGE_HAL_LAG_DEF_AGGR_WAIT_TIME
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|short_timer_scale
operator|=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|lag_config
operator|.
name|long_timer_scale
operator|=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_DEFAULT
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
name|device_config
operator|->
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|i
index|]
operator|.
name|priority
operator|=
name|VXGE_HAL_VPATH_QOS_PRIORITY_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|i
index|]
operator|.
name|min_bandwidth
operator|=
name|VXGE_HAL_VPATH_QOS_MIN_BANDWIDTH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|i
index|]
operator|.
name|max_bandwidth
operator|=
name|VXGE_HAL_VPATH_QOS_MAX_BANDWIDTH_DEFAULT
expr_stmt|;
block|}
name|device_config
operator|->
name|isr_polling_cnt
operator|=
name|VXGE_HAL_DEF_ISR_POLLING_CNT
expr_stmt|;
name|device_config
operator|->
name|max_payload_size
operator|=
name|VXGE_HAL_USE_BIOS_DEFAULT_PAYLOAD_SIZE
expr_stmt|;
name|device_config
operator|->
name|mmrb_count
operator|=
name|VXGE_HAL_USE_BIOS_DEFAULT_MMRB_COUNT
expr_stmt|;
name|device_config
operator|->
name|stats_refresh_time_sec
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_STATS_REFRESH_TIME
expr_stmt|;
name|device_config
operator|->
name|intr_mode
operator|=
name|VXGE_HAL_INTR_MODE_DEF
expr_stmt|;
name|device_config
operator|->
name|dump_on_unknown
operator|=
name|VXGE_HAL_DUMP_ON_UNKNOWN_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|dump_on_serr
operator|=
name|VXGE_HAL_DUMP_ON_SERR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|dump_on_critical
operator|=
name|VXGE_HAL_DUMP_ON_CRITICAL_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|dump_on_eccerr
operator|=
name|VXGE_HAL_DUMP_ON_ECCERR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|rth_en
operator|=
name|VXGE_HAL_RTH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|rth_it_type
operator|=
name|VXGE_HAL_RTH_IT_TYPE_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|device_poll_millis
operator|=
name|VXGE_HAL_DEF_DEVICE_POLL_MILLIS
expr_stmt|;
name|device_config
operator|->
name|rts_mac_en
operator|=
name|VXGE_HAL_RTS_MAC_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|rts_qos_en
operator|=
name|VXGE_HAL_RTS_QOS_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|rts_port_en
operator|=
name|VXGE_HAL_RTS_PORT_DEFAULT
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|vp_id
operator|=
name|i
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|wire_port
operator|=
name|VXGE_HAL_VPATH_USE_DEFAULT_PORT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|priority
operator|=
name|VXGE_HAL_VPATH_PRIORITY_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|bandwidth
operator|=
name|VXGE_HAL_VPATH_BW_LIMIT_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|no_snoop
operator|=
name|VXGE_HAL_VPATH_NO_SNOOP_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|enable
operator|=
name|VXGE_HAL_RING_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|ring_length
operator|=
name|VXGE_HAL_DEF_RING_LENGTH
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|buffer_mode
operator|=
name|VXGE_HAL_RING_RXD_BUFFER_MODE_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|scatter_mode
operator|=
name|VXGE_HAL_RING_SCATTER_MODE_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|post_mode
operator|=
name|VXGE_HAL_RING_POST_MODE_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|max_frm_len
operator|=
name|VXGE_HAL_MAX_RING_FRM_LEN_USE_MTU
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|no_snoop_bits
operator|=
name|VXGE_HAL_RING_NO_SNOOP_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|rx_timer_val
operator|=
name|VXGE_HAL_RING_USE_FLASH_DEFAULT_RX_TIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|greedy_return
operator|=
name|VXGE_HAL_RING_GREEDY_RETURN_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|rx_timer_ci
operator|=
name|VXGE_HAL_RING_RX_TIMER_CI_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|backoff_interval_us
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_BACKOFF_INTERVAL_US
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|ring
operator|.
name|indicate_max_pkts
operator|=
name|VXGE_HAL_DEF_RING_INDICATE_MAX_PKTS
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|enable
operator|=
name|VXGE_HAL_FIFO_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|fifo_length
operator|=
name|VXGE_HAL_DEF_FIFO_LENGTH
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|max_frags
operator|=
name|VXGE_HAL_DEF_FIFO_FRAGS
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|alignment_size
operator|=
name|VXGE_HAL_DEF_FIFO_ALIGNMENT_SIZE
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|max_aligned_frags
operator|=
literal|0
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|intr
operator|=
name|VXGE_HAL_FIFO_QUEUE_INTR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|fifo
operator|.
name|no_snoop_bits
operator|=
name|VXGE_HAL_FIFO_NO_SNOOP_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|intr_enable
operator|=
name|VXGE_HAL_TIM_INTR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|btimer_val
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_BTIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|timer_ac_en
operator|=
name|VXGE_HAL_TIM_TIMER_AC_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|timer_ci_en
operator|=
name|VXGE_HAL_TIM_TIMER_CI_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|timer_ri_en
operator|=
name|VXGE_HAL_TIM_TIMER_RI_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|rtimer_event_sf
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_RTIMER_EVENT_SF
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|rtimer_val
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_RTIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|util_sel
operator|=
name|VXGE_HAL_TIM_UTIL_SEL_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|ltimer_val
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_LTIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|txfrm_cnt_en
operator|=
name|VXGE_HAL_TXFRM_CNT_EN_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|txd_cnt_en
operator|=
name|VXGE_HAL_TXD_CNT_EN_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|urange_a
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_A
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|uec_a
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_A
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|urange_b
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_B
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|uec_b
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_B
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|urange_c
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_C
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|uec_c
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_C
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|uec_d
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_D
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|ufca_intr_thres
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_INTR_THRES
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|ufca_lo_lim
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_LO_LIM
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|ufca_hi_lim
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_HI_LIM
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tti
operator|.
name|ufca_lbolt_period
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_LBOLT_PERIOD
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|intr_enable
operator|=
name|VXGE_HAL_TIM_INTR_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|btimer_val
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_BTIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|timer_ac_en
operator|=
name|VXGE_HAL_TIM_TIMER_AC_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|timer_ci_en
operator|=
name|VXGE_HAL_TIM_TIMER_CI_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|timer_ri_en
operator|=
name|VXGE_HAL_TIM_TIMER_RI_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|rtimer_event_sf
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_RTIMER_EVENT_SF
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|rtimer_val
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_RTIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|util_sel
operator|=
name|VXGE_HAL_TIM_UTIL_SEL_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|ltimer_val
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_LTIMER_VAL
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|txfrm_cnt_en
operator|=
name|VXGE_HAL_TXFRM_CNT_EN_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|txd_cnt_en
operator|=
name|VXGE_HAL_TXD_CNT_EN_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|urange_a
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_A
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|uec_a
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_A
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|urange_b
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_B
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|uec_b
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_B
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|urange_c
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_URANGE_C
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|uec_c
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_C
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|uec_d
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_TIM_UEC_D
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|ufca_intr_thres
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_INTR_THRES
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|ufca_lo_lim
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_LO_LIM
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|ufca_hi_lim
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_HI_LIM
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rti
operator|.
name|ufca_lbolt_period
operator|=
name|VXGE_HAL_USE_FLASH_DEFAULT_UFCA_LBOLT_PERIOD
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|mtu
operator|=
name|VXGE_HAL_VPATH_USE_FLASH_DEFAULT_INITIAL_MTU
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tpa_lsov2_en
operator|=
name|VXGE_HAL_VPATH_TPA_LSOV2_EN_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tpa_ignore_frame_error
operator|=
name|VXGE_HAL_VPATH_TPA_IGNORE_FRAME_ERROR_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tpa_ipv6_keep_searching
operator|=
name|VXGE_HAL_VPATH_TPA_IPV6_KEEP_SEARCHING_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tpa_l4_pshdr_present
operator|=
name|VXGE_HAL_VPATH_TPA_L4_PSHDR_PRESENT_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|tpa_support_mobile_ipv6_hdrs
operator|=
name|VXGE_HAL_VPATH_TPA_SUPPORT_MOBILE_IPV6_HDRS_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_ipv4_tcp_incl_ph
operator|=
name|VXGE_HAL_VPATH_RPA_IPV4_TCP_INCL_PH_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_ipv6_tcp_incl_ph
operator|=
name|VXGE_HAL_VPATH_RPA_IPV6_TCP_INCL_PH_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_ipv4_udp_incl_ph
operator|=
name|VXGE_HAL_VPATH_RPA_IPV4_UDP_INCL_PH_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_ipv6_udp_incl_ph
operator|=
name|VXGE_HAL_VPATH_RPA_IPV6_UDP_INCL_PH_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_l4_incl_cf
operator|=
name|VXGE_HAL_VPATH_RPA_L4_INCL_CF_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_strip_vlan_tag
operator|=
name|VXGE_HAL_VPATH_RPA_STRIP_VLAN_TAG_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_l4_comp_csum
operator|=
name|VXGE_HAL_VPATH_RPA_L4_COMP_CSUM_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_l3_incl_cf
operator|=
name|VXGE_HAL_VPATH_RPA_L3_INCL_CF_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_l3_comp_csum
operator|=
name|VXGE_HAL_VPATH_RPA_L3_COMP_CSUM_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_ucast_all_addr_en
operator|=
name|VXGE_HAL_VPATH_RPA_UCAST_ALL_ADDR_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_mcast_all_addr_en
operator|=
name|VXGE_HAL_VPATH_RPA_MCAST_ALL_ADDR_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_bcast_en
operator|=
name|VXGE_HAL_VPATH_RPA_BCAST_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|rpa_all_vid_en
operator|=
name|VXGE_HAL_VPATH_RPA_ALL_VID_USE_FLASH_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|vp_config
index|[
name|i
index|]
operator|.
name|vp_queue_l2_flow
operator|=
name|VXGE_HAL_VPATH_VP_Q_L2_FLOW_USE_FLASH_DEFAULT
expr_stmt|;
block|}
name|device_config
operator|->
name|max_cqe_groups
operator|=
name|VXGE_HAL_DEF_MAX_CQE_GROUPS
expr_stmt|;
name|device_config
operator|->
name|max_num_wqe_od_groups
operator|=
name|VXGE_HAL_DEF_MAX_NUM_OD_GROUPS
expr_stmt|;
name|device_config
operator|->
name|no_wqe_threshold
operator|=
name|VXGE_HAL_DEF_NO_WQE_THRESHOLD
expr_stmt|;
name|device_config
operator|->
name|refill_threshold_high
operator|=
name|VXGE_HAL_DEF_REFILL_THRESHOLD_HIGH
expr_stmt|;
name|device_config
operator|->
name|refill_threshold_low
operator|=
name|VXGE_HAL_DEF_REFILL_THRESHOLD_LOW
expr_stmt|;
name|device_config
operator|->
name|ack_blk_limit
operator|=
name|VXGE_HAL_DEF_ACK_BLOCK_LIMIT
expr_stmt|;
name|device_config
operator|->
name|poll_or_doorbell
operator|=
name|VXGE_HAL_POLL_OR_DOORBELL_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|stats_read_method
operator|=
name|VXGE_HAL_STATS_READ_METHOD_DEFAULT
expr_stmt|;
name|device_config
operator|->
name|debug_level
operator|=
name|VXGE_DEBUG_LEVEL_DEF
expr_stmt|;
name|device_config
operator|->
name|debug_mask
operator|=
name|VXGE_DEBUG_MODULE_MASK_DEF
expr_stmt|;
if|#
directive|if
name|defined
argument_list|(
name|VXGE_TRACE_INTO_CIRCULAR_ARR
argument_list|)
name|device_config
operator|->
name|tracebuf_size
operator|=
name|VXGE_HAL_DEF_CIRCULAR_ARR
expr_stmt|;
endif|#
directive|endif
name|vxge_hal_trace_log_driver
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_function
name|void
name|vxge_hw_vpath_set_zero_rx_frm_len
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|vp_id
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|__hal_virtualpath_t
modifier|*
name|vpath
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vpath
operator|=
operator|(
name|__hal_virtualpath_t
operator|*
operator|)
operator|&
name|hldev
operator|->
name|virtual_paths
index|[
name|vp_id
index|]
expr_stmt|;
name|vxge_hal_trace_log_vpath
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_vpath
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", vp_id = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|vp_id
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|vpath
operator|->
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|vpath
operator|->
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|vpath
operator|->
name|vp_reg
operator|->
name|rxmac_vcfg0
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_VCFG0_RTS_MAX_FRM_LEN
argument_list|(
literal|0x3fff
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|vpath
operator|->
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|vpath
operator|->
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|vpath
operator|->
name|vp_reg
operator|->
name|rxmac_vcfg0
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_ring
argument_list|(
literal|"<== %s:%s:%d  Result: 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_read64
argument_list|(
name|vpath
operator|->
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|vpath
operator|->
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|vpath
operator|->
name|vp_reg
operator|->
name|rxmac_vcfg0
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * vxge_hw_vpath_wait_receive_idle - Wait for Rx to become idle  *  * Bug: Receive path stuck during small frames blast test after numerous vpath  * reset cycle  *  * Fix: Driver work-around is to ensure that the vpath queue in the FB(frame  * buffer) is empty before reset is asserted. In order to do this driver needs  * to stop RxMAC from sending frames to the queue, e.g., by configuring the  * max frame length for the vpath to 0 or some small value. Driver then polls  * WRDMA registers to check that the ring controller for the vpath is not  * processing frames for a period of time(while having enough RxDs to do so).  *  * Poll 2 registers in the WRDMA, namely the FRM_IN_PROGRESS_CNT_VPn register  * and the PRC_RXD_DOORBELL_VPn register. There is no per-vpath register in  * the frame buffer that indicates if the vpath queue is empty, so determine  * the empty state with 2 conditions:  * 1. There are no frames currently being processed in the WRDMA for  * the vpath, and  * 2. The ring controller for the vpath is not being starved of RxDs  * (otherwise it will not be able to process frames even though the FB vpath  * queue is not empty).  *  * For the second condition, compare the read value of PRC_RXD_DOORBELL_VPn  * register against the RXD_SPAT value for the vpath.  * The ring controller will not attempt to fetch RxDs until it has at least  * RXD_SPAT qwords in the doorbell. A factor of 2 is used just to be safe.  * Additionally, it is also possible that the ring controller is not  * processing frames because of arbitration. The chance of this is very small,  * and we try to reduce it even further by checking that the 2 conditions above  * hold in 3 successive polls. This bug does not occur when frames from the  * reset vpath are not selected back-to-back due to arbitration.  * @hldev: HW device handle.  * @vp_id: Vpath ID.  * Returns: void  */
end_comment

begin_function
name|void
name|vxge_hw_vpath_wait_receive_idle
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|vp_id
parameter_list|,
name|u32
modifier|*
name|count
parameter_list|,
name|u32
modifier|*
name|total_count
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|u32
name|new_qw_count
decl_stmt|,
name|rxd_spat
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|__hal_virtualpath_t
modifier|*
name|vpath
decl_stmt|;
name|vpath
operator|=
operator|&
name|hldev
operator|->
name|virtual_paths
index|[
name|vp_id
index|]
expr_stmt|;
name|vxge_assert
argument_list|(
name|vpath
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_vpath
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_vpath
argument_list|(
literal|"vpath_handle = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
name|vpath
operator|->
name|vp_config
operator|->
name|ring
operator|.
name|enable
operator|==
name|VXGE_HAL_RING_DISABLE
condition|)
block|{
name|vxge_hal_trace_log_vpath
argument_list|(
literal|"<== %s:%s:%d "
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return;
block|}
do|do
block|{
name|vxge_os_mdelay
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|vpath
operator|->
name|vp_reg
operator|->
name|prc_rxd_doorbell
argument_list|)
expr_stmt|;
name|new_qw_count
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_PRC_RXD_DOORBELL_GET_NEW_QW_CNT
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|vpath
operator|->
name|vp_reg
operator|->
name|prc_cfg6
argument_list|)
expr_stmt|;
name|rxd_spat
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_PRC_CFG6_GET_RXD_SPAT
argument_list|(
name|val64
argument_list|)
operator|+
literal|1
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|vpath
operator|->
name|vp_reg
operator|->
name|frm_in_progress_cnt
argument_list|)
expr_stmt|;
comment|/* 		 * Check if there is enough RxDs with HW AND 		 * it is not processing any frames. 		 */
if|if
condition|(
operator|(
name|new_qw_count
operator|<=
literal|2
operator|*
name|rxd_spat
operator|)
operator|||
operator|(
name|val64
operator|>
literal|0
operator|)
condition|)
operator|*
name|count
operator|=
literal|0
expr_stmt|;
else|else
operator|(
operator|*
name|count
operator|)
operator|++
expr_stmt|;
operator|(
operator|*
name|total_count
operator|)
operator|++
expr_stmt|;
block|}
do|while
condition|(
operator|(
operator|*
name|count
operator|<
name|VXGE_HW_MIN_SUCCESSIVE_IDLE_COUNT
operator|)
operator|&&
operator|(
operator|*
name|total_count
operator|<
name|VXGE_HW_MAX_POLLING_COUNT
operator|)
condition|)
do|;
name|vxge_hal_trace_log_vpath
argument_list|(
literal|"<== %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_assert
argument_list|(
operator|*
name|total_count
operator|<
name|VXGE_HW_MAX_POLLING_COUNT
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

