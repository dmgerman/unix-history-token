begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright(c) 2002-2011 Exar Corp.  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification are permitted provided the following conditions are met:  *  *    1. Redistributions of source code must retain the above copyright notice,  *       this list of conditions and the following disclaimer.  *  *    2. Redistributions in binary form must reproduce the above copyright  *       notice, this list of conditions and the following disclaimer in the  *       documentation and/or other materials provided with the distribution.  *  *    3. Neither the name of the Exar Corporation nor the names of its  *       contributors may be used to endorse or promote products derived from  *       this software without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE  * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE  * POSSIBILITY OF SUCH DAMAGE.  */
end_comment

begin_comment
comment|/*$FreeBSD$*/
end_comment

begin_include
include|#
directive|include
file|<dev/vxge/vxgehal/vxgehal.h>
end_include

begin_comment
comment|/*  * vxge_hal_mrpcim_serial_number_get - Returns the serial number  * @devh: HAL device handle.  *  * Return the serial number  */
end_comment

begin_function
specifier|const
name|u8
modifier|*
name|vxge_hal_mrpcim_serial_number_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|NULL
operator|)
return|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|serial_num
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_vpath_map_get - Returns the assigned vpaths map  * @pdev: PCI device object.  * @regh0: BAR0 mapped memory handle (Solaris), or simply PCI device @pdev  *	(Linux and the rest.)  * @bar0: Address of BAR0 in PCI config  * @func: Function Number  *  * Returns the assigned vpaths map  */
end_comment

begin_function
name|u64
name|vxge_hal_mrpcim_vpath_map_get
parameter_list|(
name|pci_dev_h
name|pdev
parameter_list|,
name|pci_reg_h
name|regh0
parameter_list|,
name|u8
modifier|*
name|bar0
parameter_list|,
name|u32
name|func
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_legacy_reg_t
modifier|*
name|legacy_reg
decl_stmt|;
name|vxge_hal_toc_reg_t
modifier|*
name|toc_reg
decl_stmt|;
name|vxge_hal_vpath_reg_t
modifier|*
name|vpath_reg
decl_stmt|;
name|vxge_assert
argument_list|(
name|bar0
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"pdev = 0x"
name|VXGE_OS_STXFMT
literal|", regh0 = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"bar0 = 0x"
name|VXGE_OS_STXFMT
literal|", func = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|pdev
argument_list|,
operator|(
name|ptr_t
operator|)
name|regh0
argument_list|,
operator|(
name|ptr_t
operator|)
name|bar0
argument_list|,
name|func
argument_list|)
expr_stmt|;
name|legacy_reg
operator|=
operator|(
name|vxge_hal_legacy_reg_t
operator|*
operator|)
name|vxge_hal_device_get_legacy_reg
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
name|bar0
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|legacy_reg
operator|->
name|toc_first_pointer
argument_list|)
expr_stmt|;
name|toc_reg
operator|=
operator|(
name|vxge_hal_toc_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|toc_reg
operator|->
name|toc_vpath_pointer
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|vpath_reg
operator|=
operator|(
name|vxge_hal_vpath_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|val64
operator|=
name|__hal_vpath_vpath_map_get
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
name|func
argument_list|,
name|vpath_reg
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|val64
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_pcie_func_mode_set - Set PCI-E function mode  * @devh: Device Handle.  * @func_mode: PCI-E func mode. Please see vxge_hal_pcie_function_mode_e{}  *  * Set PCI-E function mode.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_pcie_func_mode_set
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|vxge_hal_pcie_function_mode_e
name|func_mode
parameter_list|)
block|{
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|u32
name|fmode
decl_stmt|;
name|vxge_hal_status_e
name|status
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|",func_mode = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|func_mode
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
switch|switch
condition|(
name|func_mode
condition|)
block|{
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_SF1_VP17
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_SF1_VP17
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MF8_VP2
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MF8_VP2
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_SR17_VP1
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_SR17_VP1
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MR17_VP1
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MR17_VP1
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MR8_VP2
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MR8_VP2
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MF17_VP1
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MF17_VP1
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_SR8_VP2
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_SR8_VP2
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_SR4_VP4
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_SR4_VP4
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MF2_VP8
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MF2_VP8
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MF4_VP4
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MF4_VP4
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MR4_VP4
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MR4_VP4
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_PCIE_FUNC_MODE_MF8P_VP2
case|:
name|fmode
operator|=
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_FUNC_MODE_MF8P_VP2
expr_stmt|;
break|break;
default|default:
name|vxge_hal_trace_log_driver
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_INVALID_TYPE
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_INVALID_TYPE
operator|)
return|;
block|}
name|status
operator|=
name|__hal_vpath_pcie_func_mode_set
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|fmode
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_fw_upgrade - Upgrade firmware  * @pdev: PCI device object.  * @regh0: BAR0 mapped memory handle (Solaris), or simply PCI device @pdev  *	(Linux and the rest.)  * @bar0: Address of BAR0 in PCI config  * @buffer: Buffer containing F/W image  * @length: F/W image length  *  * Upgrade firmware  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_fw_upgrade
parameter_list|(
name|pci_dev_h
name|pdev
parameter_list|,
name|pci_reg_h
name|regh0
parameter_list|,
name|u8
modifier|*
name|bar0
parameter_list|,
name|u8
modifier|*
name|buffer
parameter_list|,
name|u32
name|length
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|,
name|vpath_mask
decl_stmt|;
name|u32
name|host_type
decl_stmt|,
name|func_id
decl_stmt|,
name|i
decl_stmt|;
name|vxge_hal_legacy_reg_t
modifier|*
name|legacy_reg
decl_stmt|;
name|vxge_hal_toc_reg_t
modifier|*
name|toc_reg
decl_stmt|;
name|vxge_hal_mrpcim_reg_t
modifier|*
name|mrpcim_reg
decl_stmt|;
name|vxge_hal_common_reg_t
modifier|*
name|common_reg
decl_stmt|;
name|vxge_hal_vpmgmt_reg_t
modifier|*
name|vpmgmt_reg
decl_stmt|;
name|vxge_hal_vpath_reg_t
modifier|*
name|vpath_reg
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|bar0
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|buffer
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_driver
argument_list|(
literal|"pdev = 0x"
name|VXGE_OS_STXFMT
literal|", regh0 = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"bar0 = 0x"
name|VXGE_OS_STXFMT
literal|", buffer = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"length = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|pdev
argument_list|,
operator|(
name|ptr_t
operator|)
name|regh0
argument_list|,
operator|(
name|ptr_t
operator|)
name|bar0
argument_list|,
operator|(
name|ptr_t
operator|)
name|buffer
argument_list|,
name|length
argument_list|)
expr_stmt|;
name|legacy_reg
operator|=
operator|(
name|vxge_hal_legacy_reg_t
operator|*
operator|)
name|vxge_hal_device_get_legacy_reg
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
name|bar0
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|legacy_reg
operator|->
name|toc_first_pointer
argument_list|)
expr_stmt|;
name|toc_reg
operator|=
operator|(
name|vxge_hal_toc_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|toc_reg
operator|->
name|toc_common_pointer
argument_list|)
expr_stmt|;
name|common_reg
operator|=
operator|(
name|vxge_hal_common_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|vpath_mask
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|common_reg
operator|->
name|vpath_assignments
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|common_reg
operator|->
name|host_type_assignments
argument_list|)
expr_stmt|;
name|host_type
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_HOST_TYPE_ASSIGNMENTS_GET_HOST_TYPE_ASSIGNMENTS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
operator|(
operator|(
name|vpath_mask
operator|)
operator|&
name|mBIT
argument_list|(
name|i
argument_list|)
operator|)
condition|)
continue|continue;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|toc_reg
operator|->
name|toc_vpmgmt_pointer
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|vpmgmt_reg
operator|=
operator|(
name|vxge_hal_vpmgmt_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|vpmgmt_reg
operator|->
name|vpath_to_func_map_cfg1
argument_list|)
expr_stmt|;
name|func_id
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_VPATH_TO_FUNC_MAP_CFG1_GET_CFG1
argument_list|(
name|val64
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|__hal_device_access_rights_get
argument_list|(
name|host_type
argument_list|,
name|func_id
argument_list|)
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_driver
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|toc_reg
operator|->
name|toc_vpath_pointer
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|vpath_reg
operator|=
operator|(
name|vxge_hal_vpath_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|status
operator|=
name|__hal_vpath_fw_upgrade
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
name|i
argument_list|,
name|vpath_reg
argument_list|,
name|buffer
argument_list|,
name|length
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|toc_reg
operator|->
name|toc_mrpcim_pointer
argument_list|)
expr_stmt|;
name|mrpcim_reg
operator|=
operator|(
name|vxge_hal_mrpcim_reg_t
operator|*
operator|)
operator|(
operator|(
name|void
operator|*
operator|)
operator|(
name|bar0
operator|+
name|val64
operator|)
operator|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|sw_reset_cfg1
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_SW_RESET_CFG1_TYPE
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|sw_reset_cfg1
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|pdev
argument_list|,
name|regh0
argument_list|,
name|VXGE_HAL_PF_SW_RESET_PF_SW_RESET
argument_list|(
name|VXGE_HAL_PF_SW_RESET_COMMAND
argument_list|)
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|bf_sw_reset
argument_list|)
expr_stmt|;
name|vxge_os_mdelay
argument_list|(
literal|100
argument_list|)
expr_stmt|;
block|}
name|vxge_hal_trace_log_driver
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_vpath_qos_set - Set the priority, Guaranteed and maximum  *				 bandwidth for a vpath.  * @devh: HAL device handle.  * @vp_id: Vpath Id.  * @priority: Priority  * @min_bandwidth: Minimum Bandwidth  * @max_bandwidth: Maximum Bandwidth  *  * Set the Guaranteed and maximum bandwidth for a given vpath  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_vpath_qos_set
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|vp_id
parameter_list|,
name|u32
name|priority
parameter_list|,
name|u32
name|min_bandwidth
parameter_list|,
name|u32
name|max_bandwidth
parameter_list|)
block|{
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_hal_vpath_qos_config_t
name|config
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", vp_id = %d, "
literal|"priority = %d, min_bandwidth = %d, max_bandwidth = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|vp_id
argument_list|,
name|priority
argument_list|,
name|min_bandwidth
argument_list|,
name|max_bandwidth
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
name|vp_id
operator|>=
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_VPATH_NOT_AVAILABLE
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_VPATH_NOT_AVAILABLE
operator|)
return|;
block|}
name|config
operator|.
name|priority
operator|=
name|priority
expr_stmt|;
name|config
operator|.
name|min_bandwidth
operator|=
name|min_bandwidth
expr_stmt|;
name|config
operator|.
name|max_bandwidth
operator|=
name|max_bandwidth
expr_stmt|;
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_vpath_qos_config_check
argument_list|(
operator|&
name|config
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
block|{
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|vp_id
index|]
operator|.
name|priority
operator|=
name|priority
expr_stmt|;
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|vp_id
index|]
operator|.
name|min_bandwidth
operator|=
name|min_bandwidth
expr_stmt|;
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|vp_id
index|]
operator|.
name|max_bandwidth
operator|=
name|max_bandwidth
expr_stmt|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_vpath_qos_get - Get the priority, Guaranteed and maximum  *				 bandwidth for a vpath.  * @devh: HAL device handle.  * @vp_id: Vpath Id.  * @priority: Buffer to return Priority  * @min_bandwidth: Buffer to return Minimum Bandwidth  * @max_bandwidth: Buffer to return Maximum Bandwidth  *  * Get the Guaranteed and maximum bandwidth for a given vpath  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_vpath_qos_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|vp_id
parameter_list|,
name|u32
modifier|*
name|priority
parameter_list|,
name|u32
modifier|*
name|min_bandwidth
parameter_list|,
name|u32
modifier|*
name|max_bandwidth
parameter_list|)
block|{
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", vp_id = %d, "
literal|"priority = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"min_bandwidth = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"max_bandwidth = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|vp_id
argument_list|,
operator|(
name|ptr_t
operator|)
name|priority
argument_list|,
operator|(
name|ptr_t
operator|)
name|min_bandwidth
argument_list|,
operator|(
name|ptr_t
operator|)
name|max_bandwidth
argument_list|)
expr_stmt|;
if|if
condition|(
name|vp_id
operator|>=
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_VPATH_NOT_AVAILABLE
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_VPATH_NOT_AVAILABLE
operator|)
return|;
block|}
operator|*
name|priority
operator|=
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|vp_id
index|]
operator|.
name|min_bandwidth
expr_stmt|;
operator|*
name|min_bandwidth
operator|=
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|vp_id
index|]
operator|.
name|min_bandwidth
expr_stmt|;
operator|*
name|max_bandwidth
operator|=
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|vp_qos
index|[
name|vp_id
index|]
operator|.
name|max_bandwidth
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_mdio_access - Access the MDIO device  * @devh: HAL Device handle.  * @port: Port id  * @operation: Type of operation  * @device: MMD device address  * @addr: MMD address  * @data: MMD data  *  * Access the data from a MDIO Device.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_mdio_access
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|port
parameter_list|,
name|u32
name|operation
parameter_list|,
name|u32
name|device
parameter_list|,
name|u16
name|addr
parameter_list|,
name|u16
modifier|*
name|data
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|u32
name|prtad
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|devh
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|data
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", operation = %d, "
literal|"device = %d, addr = %d, data = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|operation
argument_list|,
name|device
argument_list|,
name|addr
argument_list|,
operator|(
name|ptr_t
operator|)
name|data
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
name|device
operator|==
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DEVAD_DTE_XS
condition|)
block|{
if|if
condition|(
name|port
operator|==
literal|0
condition|)
name|prtad
operator|=
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_dte_prtad0
expr_stmt|;
else|else
name|prtad
operator|=
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_dte_prtad1
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|port
operator|==
literal|0
condition|)
name|prtad
operator|=
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_phy_prtad0
expr_stmt|;
else|else
name|prtad
operator|=
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_phy_prtad1
expr_stmt|;
block|}
name|val64
operator|=
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_STROBE_ONE
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE
argument_list|(
name|operation
argument_list|)
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DEVAD
argument_list|(
name|device
argument_list|)
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR
argument_list|(
name|addr
argument_list|)
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DATA
argument_list|(
operator|*
name|data
argument_list|)
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ST_PATTERN
argument_list|(
literal|0
argument_list|)
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_PREAMBLE
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_PRTAD
argument_list|(
name|prtad
argument_list|)
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_STROBE_TWO
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_mgr_access_port
index|[
name|port
index|]
argument_list|)
expr_stmt|;
name|vxge_os_wmb
argument_list|()
expr_stmt|;
name|status
operator|=
name|vxge_hal_device_register_poll
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_mgr_access_port
index|[
name|port
index|]
argument_list|,
literal|0
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_STROBE_ONE
operator||
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_STROBE_TWO
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|device_poll_millis
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|status
operator|==
name|VXGE_HAL_OK
operator|)
operator|&&
operator|(
operator|(
name|operation
operator|==
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_READ_INCR
operator|)
operator|||
operator|(
name|operation
operator|==
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_READ
operator|)
operator|||
operator|(
name|operation
operator|==
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_ADDR_READ_INCR
operator|)
operator|||
operator|(
name|operation
operator|==
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_ADDR_READ
operator|)
operator|)
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_mgr_access_port
index|[
name|port
index|]
argument_list|)
expr_stmt|;
operator|*
name|data
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_MDIO_MGR_ACCESS_GET_PORT_DATA
argument_list|(
name|val64
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|*
name|data
operator|=
literal|0
expr_stmt|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_intr_enable - Enable the interrupts on mrpcim.  * @devh: HAL device handle.  *  * Enable mrpcim interrupts  *  * See also: vxge_hal_mrpcim_intr_disable().  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_intr_enable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_hal_mrpcim_reg_t
modifier|*
name|mrpcim_reg
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|mrpcim_reg
operator|=
name|hldev
operator|->
name|mrpcim_reg
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|ini_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|dma_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tgt_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|config_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|crdt_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_general_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pll_errors_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_ppif_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|dbecc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|general_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcipif_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pda_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcc_error_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|lso_error_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|sm_error_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rtdma_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rc_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxdrm_sm_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxdcm_sm_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxdwm_sm_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rda_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rda_ecc_db_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rqa_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|frf_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rocrc_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde0_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde1_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde2_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde3_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wrdma_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3cmct_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3cmct_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gsscc_err_reg
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gssc_err0_reg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gssc_err1_reg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gcmg1_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gxtmc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gcp_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|cmc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gcmg2_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cml_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cml_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cmu_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cmu_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|psscc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcmg1_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pxtmc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|cp_exc_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|cp_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcmg2_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|dam_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcmg3_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|xmac_gen_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|xgxs_gen_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|asic_ntwk_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|xgmac_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxmac_ecc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxmac_various_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxmac_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|txmac_gen_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|txmac_ecc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tmac_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_fb_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_fb_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|grocrc_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|fau_ecc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mc_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3fbct_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3fbct_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|orp_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|ptm_alarm_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tpa_error_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tpa_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|kdfc_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|doorbell_int_status
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tim_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_exc_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_err_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_err2_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_err3_reg
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_CLEAR
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_int_status
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_general_int_status
argument_list|)
expr_stmt|;
comment|/* unmask interrupts */
name|val64
operator|=
name|VXGE_HAL_INI_ERRORS_REG_DCPL_FSM_ERR
operator||
name|VXGE_HAL_INI_ERRORS_REG_INI_BUF_DB_ERR
operator||
name|VXGE_HAL_INI_ERRORS_REG_INI_DATA_OVERFLOW
operator||
name|VXGE_HAL_INI_ERRORS_REG_INI_HDR_OVERFLOW
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|ini_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_DMA_ERRORS_REG_RDARB_FSM_ERR
operator||
name|VXGE_HAL_DMA_ERRORS_REG_WRARB_FSM_ERR
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_WRDMA_WR_HDR_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_WRDMA_WR_HDR_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_WRDMA_WR_DATA_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_WRDMA_WR_DATA_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_MSG_WR_HDR_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_MSG_WR_HDR_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_MSG_WR_DATA_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_MSG_WR_DATA_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_STATS_WR_HDR_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_STATS_WR_HDR_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_STATS_WR_DATA_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_STATS_WR_DATA_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_RTDMA_WR_HDR_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_RTDMA_WR_HDR_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_RTDMA_WR_DATA_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_RTDMA_WR_DATA_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_WRDMA_RD_HDR_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_WRDMA_RD_HDR_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_RTDMA_RD_HDR_OVERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DMA_RTDMA_RD_HDR_UNDERFLOW
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DBLGEN_FSM_ERR
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DBLGEN_CREDIT_FSM_ERR
operator||
name|VXGE_HAL_DMA_ERRORS_REG_DBLGEN_DMA_WRR_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|dma_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TGT_ERRORS_REG_TGT_REQ_FSM_ERR
operator||
name|VXGE_HAL_TGT_ERRORS_REG_TGT_CPL_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|tgt_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_CONFIG_ERRORS_REG_I2C_MAIN_FSM_ERR
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_I2C_REG_FSM_ERR
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_CFGM_I2C_TIMEOUT
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_RIC_I2C_TIMEOUT
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_CFGM_FSM_ERR
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_RIC_FSM_ERR
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_PIFM_TIMEOUT
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_PIFM_FSM_ERR
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_PIFM_TO_FSM_ERR
operator||
name|VXGE_HAL_CONFIG_ERRORS_REG_RIC_RIC_RD_TIMEOUT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|config_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_CRDT_ERRORS_REG_WRCRDTARB_FSM_ERR
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_WRCRDTARB_INTCTL_ILLEGAL_CRD_DEAL
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_WRCRDTARB_PDA_ILLEGAL_CRD_DEAL
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_WRCRDTARB_PCI_MSG_ILLEGAL_CRD_DEAL
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_RDCRDTARB_FSM_ERR
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_RDCRDTARB_RDA_ILLEGAL_CRD_DEAL
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_RDCRDTARB_PDA_ILLEGAL_CRD_DEAL
operator||
name|VXGE_HAL_CRDT_ERRORS_REG_RDCRDTARB_DBLGEN_ILLEGAL_CRD_DEAL
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|crdt_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_STATSB_FSM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_XGEN_FSM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_XMEM_FSM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_KDFCCTL_FSM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_MRIOVCTL_FSM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_SPI_FLSH_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_SPI_IIC_ACK_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_SPI_IIC_CHKSUM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_INI_SERR_DET
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_INTCTL_MSIX_FSM_ERR
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_INTCTL_MSI_OVERFLOW
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_PPIF_PCI_NOT_FLUSH_SW_RESET
operator||
name|VXGE_HAL_MRPCIM_GENERAL_ERRORS_REG_PPIF_SW_RESET_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_general_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PLL_ERRORS_REG_CORE_CMG_PLL_OOL
operator||
name|VXGE_HAL_PLL_ERRORS_REG_CORE_FB_PLL_OOL
operator||
name|VXGE_HAL_PLL_ERRORS_REG_CORE_X_PLL_OOL
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pll_errors_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_INI_ERRORS_INI_INT
operator||
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_DMA_ERRORS_DMA_INT
operator||
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_TGT_ERRORS_TGT_INT
operator||
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_CONFIG_ERRORS_CONFIG_INT
operator||
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_CRDT_ERRORS_CRDT_INT
operator||
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_MRPCIM_GENERAL_ERRORS_GENERAL_INT
operator||
name|VXGE_HAL_MRPCIM_PPIF_INT_STATUS_PLL_ERRORS_PLL_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_ppif_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_DBECC_ERR_REG_PCI_RETRY_BUF_DB_ERR
operator||
name|VXGE_HAL_DBECC_ERR_REG_PCI_RETRY_SOT_DB_ERR
operator||
name|VXGE_HAL_DBECC_ERR_REG_PCI_P_HDR_DB_ERR
operator||
name|VXGE_HAL_DBECC_ERR_REG_PCI_P_DATA_DB_ERR
operator||
name|VXGE_HAL_DBECC_ERR_REG_PCI_NP_HDR_DB_ERR
operator||
name|VXGE_HAL_DBECC_ERR_REG_PCI_NP_DATA_DB_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|dbecc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GENERAL_ERR_REG_PCI_LINK_RST_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|general_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PCIPIF_INT_STATUS_DBECC_ERR_DBECC_ERR_INT
operator||
name|VXGE_HAL_PCIPIF_INT_STATUS_GENERAL_ERR_GENERAL_ERR_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pcipif_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PDA_ALARM_REG_PDA_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pda_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|8
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_PCC_ERROR_REG_PCC_PCC_FRM_BUF_DBE
argument_list|(
name|i
argument_list|)
operator||
name|VXGE_HAL_PCC_ERROR_REG_PCC_PCC_TXDO_DBE
argument_list|(
name|i
argument_list|)
operator||
name|VXGE_HAL_PCC_ERROR_REG_PCC_PCC_FSM_ERR_ALARM
argument_list|(
name|i
argument_list|)
operator||
name|VXGE_HAL_PCC_ERROR_REG_PCC_PCC_SERR
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pcc_error_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|8
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_LSO_ERROR_REG_PCC_LSO_FSM_ERR_ALARM
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|lso_error_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_SM_ERROR_REG_SM_FSM_ERR_ALARM
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|sm_error_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RTDMA_INT_STATUS_PDA_ALARM_PDA_INT
operator||
name|VXGE_HAL_RTDMA_INT_STATUS_PCC_ERROR_PCC_INT
operator||
name|VXGE_HAL_RTDMA_INT_STATUS_LSO_ERROR_LSO_INT
operator||
name|VXGE_HAL_RTDMA_INT_STATUS_SM_ERROR_SM_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rtdma_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RC_ALARM_REG_FTC_SM_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_FTC_SM_PHASE_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_BTDWM_SM_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_BTC_SM_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_BTDCM_SM_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_BTDRM_SM_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_RMM_RXD_RC_ECC_DB_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_RHS_RXD_RHS_ECC_DB_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_RMM_SM_ERR
operator||
name|VXGE_HAL_RC_ALARM_REG_BTC_VPATH_MISMATCH_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rc_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|17
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_RXDRM_SM_ERR_REG_PRC_VP
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rxdrm_sm_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|17
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_RXDCM_SM_ERR_REG_PRC_VP
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rxdcm_sm_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|17
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_RXDWM_SM_ERR_REG_PRC_VP
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rxdwm_sm_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RDA_ERR_REG_RDA_SM0_ERR_ALARM
operator||
name|VXGE_HAL_RDA_ERR_REG_RDA_RXD_ECC_DB_ERR
operator||
name|VXGE_HAL_RDA_ERR_REG_RDA_FRM_ECC_DB_ERR
operator||
name|VXGE_HAL_RDA_ERR_REG_RDA_UQM_ECC_DB_ERR
operator||
name|VXGE_HAL_RDA_ERR_REG_RDA_IMM_ECC_DB_ERR
operator||
name|VXGE_HAL_RDA_ERR_REG_RDA_TIM_ECC_DB_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rda_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|17
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_RDA_ECC_DB_REG_RDA_RXD_ERR
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rda_ecc_db_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RQA_ERR_REG_RQA_SM_ERR_ALARM
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rqa_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|17
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator||=
name|VXGE_HAL_FRF_ALARM_REG_PRC_VP_FRF_SM_ERR
argument_list|(
name|i
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|frf_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_ROCRC_ALARM_REG_QCQ_QCC_BYP_ECC_DB
operator||
name|VXGE_HAL_ROCRC_ALARM_REG_NOA_NMA_SM_ERR
operator||
name|VXGE_HAL_ROCRC_ALARM_REG_NOA_IMMM_ECC_DB
operator||
name|VXGE_HAL_ROCRC_ALARM_REG_UDQ_UMQM_ECC_DB
operator||
name|VXGE_HAL_ROCRC_ALARM_REG_NOA_RCBM_ECC_DB
operator||
name|VXGE_HAL_ROCRC_ALARM_REG_NOA_WCT_CMD_FIFO_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rocrc_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_WDE0_ALARM_REG_WDE0_DCC_SM_ERR
operator||
name|VXGE_HAL_WDE0_ALARM_REG_WDE0_PRM_SM_ERR
operator||
name|VXGE_HAL_WDE0_ALARM_REG_WDE0_CP_SM_ERR
operator||
name|VXGE_HAL_WDE0_ALARM_REG_WDE0_CP_CMD_ERR
operator||
name|VXGE_HAL_WDE0_ALARM_REG_WDE0_PCR_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|wde0_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_WDE1_ALARM_REG_WDE1_DCC_SM_ERR
operator||
name|VXGE_HAL_WDE1_ALARM_REG_WDE1_PRM_SM_ERR
operator||
name|VXGE_HAL_WDE1_ALARM_REG_WDE1_CP_SM_ERR
operator||
name|VXGE_HAL_WDE1_ALARM_REG_WDE1_CP_CMD_ERR
operator||
name|VXGE_HAL_WDE1_ALARM_REG_WDE1_PCR_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|wde1_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_WDE2_ALARM_REG_WDE2_DCC_SM_ERR
operator||
name|VXGE_HAL_WDE2_ALARM_REG_WDE2_PRM_SM_ERR
operator||
name|VXGE_HAL_WDE2_ALARM_REG_WDE2_CP_SM_ERR
operator||
name|VXGE_HAL_WDE2_ALARM_REG_WDE2_CP_CMD_ERR
operator||
name|VXGE_HAL_WDE2_ALARM_REG_WDE2_PCR_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|wde2_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_WDE3_ALARM_REG_WDE3_DCC_SM_ERR
operator||
name|VXGE_HAL_WDE3_ALARM_REG_WDE3_PRM_SM_ERR
operator||
name|VXGE_HAL_WDE3_ALARM_REG_WDE3_CP_SM_ERR
operator||
name|VXGE_HAL_WDE3_ALARM_REG_WDE3_CP_CMD_ERR
operator||
name|VXGE_HAL_WDE3_ALARM_REG_WDE3_PCR_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|wde3_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_WRDMA_INT_STATUS_RC_ALARM_RC_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_RXDRM_SM_ERR_RXDRM_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_RXDCM_SM_ERR_RXDCM_SM_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_RXDWM_SM_ERR_RXDWM_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_RDA_ERR_RDA_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_RDA_ECC_DB_RDA_ECC_DB_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_FRF_ALARM_FRF_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_ROCRC_ALARM_ROCRC_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_WDE0_ALARM_WDE0_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_WDE1_ALARM_WDE1_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_WDE2_ALARM_WDE2_INT
operator||
name|VXGE_HAL_WRDMA_INT_STATUS_WDE3_ALARM_WDE3_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|wrdma_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3CMCT_ERR_REG_G3IF_SM_ERR
operator||
name|VXGE_HAL_G3CMCT_ERR_REG_G3IF_GDDR3_DECC
operator||
name|VXGE_HAL_G3CMCT_ERR_REG_G3IF_GDDR3_U_DECC
operator||
name|VXGE_HAL_G3CMCT_ERR_REG_G3IF_CTRL_FIFO_DECC
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3cmct_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3CMCT_INT_STATUS_ERR_G3IF_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3cmct_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GSSCC_ERR_REG_SSCC_SSR_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_GSSCC_ERR_REG_SSCC_TSR_DB_ERR
argument_list|(
literal|0x3f
argument_list|)
operator||
name|VXGE_HAL_GSSCC_ERR_REG_SSCC_CP2STE_UFLOW_ERR
operator||
name|VXGE_HAL_GSSCC_ERR_REG_SSCC_CP2TTE_UFLOW_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gsscc_err_mask
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator|=
name|VXGE_HAL_GSSC_ERR0_REG_SSCC_STATE_DB_ERR
argument_list|(
literal|0xff
argument_list|)
operator||
name|VXGE_HAL_GSSC_ERR0_REG_SSCC_CM_RESP_DB_ERR
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_GSSC_ERR0_REG_SSCC_SSR_RESP_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_GSSC_ERR0_REG_SSCC_TSR_RESP_DB_ERR
argument_list|(
literal|0x3f
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gssc_err0_mask
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_CM_RESP_DB_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SCREQ_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_CM_RESP_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_CM_RESP_R_WN_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_CM_RESP_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_CM_REQ_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_CM_REQ_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_FSM_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_FSM_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SSR_REQ_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SSR_REQ_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SSR_RESP_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SSR_RESP_R_WN_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SSR_RESP_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_TSR_REQ_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_TSR_REQ_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_TSR_RESP_OFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_TSR_RESP_R_WN_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_TSR_RESP_UFLOW_ERR
operator||
name|VXGE_HAL_GSSC_ERR1_REG_SSCC_SCRESP_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gssc_err1_mask
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|val64
operator|=
name|VXGE_HAL_GCMG1_INT_STATUS_GSSCC_ERR_GSSCC_INT
operator||
name|VXGE_HAL_GCMG1_INT_STATUS_GSSC0_ERR0_GSSC0_0_INT
operator||
name|VXGE_HAL_GCMG1_INT_STATUS_GSSC0_ERR1_GSSC0_1_INT
operator||
name|VXGE_HAL_GCMG1_INT_STATUS_GSSC1_ERR0_GSSC1_0_INT
operator||
name|VXGE_HAL_GCMG1_INT_STATUS_GSSC1_ERR1_GSSC1_1_INT
operator||
name|VXGE_HAL_GCMG1_INT_STATUS_GSSC2_ERR0_GSSC2_0_INT
operator||
name|VXGE_HAL_GCMG1_INT_STATUS_GSSC2_ERR1_GSSC2_1_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gcmg1_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_MEM_DB_ERR
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMC_RD_DATA_DB_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_REQ_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_REQ_DATA_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_WR_RSP_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_RD_RSP_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_WRP_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_WRP_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_RRP_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_RRP_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_DATA_SM_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_CMC0_IF_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_CFC_SM_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_DFETCH_CREDIT_OVERFLOW
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_DFETCH_CREDIT_UNDERFLOW
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_DFETCH_SM_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_RCTRL_CREDIT_OVERFLOW
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_RCTRL_CREDIT_UNDERFLOW
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_RCTRL_SM_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_WCOMPL_SM_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_WCOMPL_TAG_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_WREQ_SM_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_BDT_CMI_WREQ_FIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CP2BDT_RFIFO_POP_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_XTMC_BDT_CMI_OP_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_XTMC_BDT_DFETCH_OP_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_XTMC_BDT_DFIFO_ERR
operator||
name|VXGE_HAL_GXTMC_ERR_REG_XTMC_CMI_ARB_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gxtmc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GCP_ERR_REG_CP_H2L2CP_FIFO_ERR
operator||
name|VXGE_HAL_GCP_ERR_REG_CP_STC2CP_FIFO_ERR
operator||
name|VXGE_HAL_GCP_ERR_REG_CP_STE2CP_FIFO_ERR
operator||
name|VXGE_HAL_GCP_ERR_REG_CP_TTE2CP_FIFO_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gcp_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_CMC_ERR_REG_CMC_CMC_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|cmc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GCMG2_INT_STATUS_GXTMC_ERR_GXTMC_INT
operator||
name|VXGE_HAL_GCMG2_INT_STATUS_GCP_ERR_GCP_INT
operator||
name|VXGE_HAL_GCMG2_INT_STATUS_CMC_ERR_CMC_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|gcmg2_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3IFCMD_CML_ERR_REG_G3IF_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cml_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3IFCMD_CML_INT_STATUS_ERR_G3IF_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cml_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3IFCMD_CMU_ERR_REG_G3IF_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cmu_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3IFCMD_CMU_INT_STATUS_ERR_G3IF_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cmu_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PSSCC_ERR_REG_SSCC_CP2STE_OFLOW_ERR
operator||
name|VXGE_HAL_PSSCC_ERR_REG_SSCC_CP2TTE_OFLOW_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|psscc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PCMG1_INT_STATUS_PSSCC_ERR_PSSCC_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pcmg1_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_XT_PIF_SRAM_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_REQ_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_PRSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_WRSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_REQ_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_PRSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_WRSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_REQ_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_PRSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_WRSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_REQ_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_REQ_DATA_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_WR_RSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_RD_RSP_FIFO_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_REQ_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_RSP_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_REQ_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_RSP_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_REQ_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_RSP_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_XIL_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_ARB_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_RAM_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CMW_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CMR_SHADOW_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_REQ_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MPT_RSP_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_REQ_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UPT_RSP_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_REQ_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CPT_RSP_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_XIL_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_ARB_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CMW_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CMR_FSM_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MXP_RD_PROT_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UXP_RD_PROT_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CXP_RD_PROT_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MXP_WR_PROT_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UXP_WR_PROT_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CXP_WR_PROT_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_MXP_INV_ADDR_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_UXP_INV_ADDR_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CXP_INV_ADDR_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CP2BDT_DFIFO_PUSH_ERR
operator||
name|VXGE_HAL_PXTMC_ERR_REG_XTMC_CP2BDT_RFIFO_PUSH_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pxtmc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_CP_EXC_REG_CP_CP_CAUSE_CRIT_INT
operator||
name|VXGE_HAL_CP_EXC_REG_CP_CP_SERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|cp_exc_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_CP_ERR_REG_CP_CP_DCACHE_DB_ERR
argument_list|(
literal|0xff
argument_list|)
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP_ICACHE_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP_DTAG_DB_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP_ITAG_DB_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP_TRACE_DB_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_DMA2CP_DB_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_MP2CP_DB_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_QCC2CP_DB_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_STC2CP_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_CP_ERR_REG_CP_H2L2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_STC2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_STE2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_TTE2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_SWIF2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP2DMA_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_DAM2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_MP2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_QCC2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_DMA2CP_FIFO_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP_WAKE_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_CP_PMON_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_DMA_RD_SHADOW_ERR
operator||
name|VXGE_HAL_CP_ERR_REG_CP_PIFT_CREDIT_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|cp_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PCMG2_INT_STATUS_PXTMC_ERR_PXTMC_INT
operator||
name|VXGE_HAL_PCMG2_INT_STATUS_CP_EXC_CP_XT_EXC_INT
operator||
name|VXGE_HAL_PCMG2_INT_STATUS_CP_ERR_CP_ERR_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pcmg2_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_DAM_ERR_REG_DAM_RDSB_ECC_DB_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_WRSB_ECC_DB_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_HPPEDAT_ECC_DB_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_LPPEDAT_ECC_DB_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_WRRESP_ECC_DB_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_HPRD_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_LPRD_0_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_LPRD_1_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_HPPEDAT_OVERFLOW_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_LPPEDAT_OVERFLOW_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_WRRESP_OVERFLOW_ERR
operator||
name|VXGE_HAL_DAM_ERR_REG_DAM_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|dam_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PCMG3_INT_STATUS_DAM_ERR_DAM_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|pcmg3_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_XMAC_GEN_ERR_REG_XSTATS_RMAC_STATS_TILE0_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_ERR_REG_XSTATS_RMAC_STATS_TILE1_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_ERR_REG_XSTATS_RMAC_STATS_TILE2_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_ERR_REG_XSTATS_RMAC_STATS_TILE3_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_ERR_REG_XSTATS_RMAC_STATS_TILE4_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_ERR_REG_XMACJ_XMAC_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|xmac_gen_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_XGXS_GEN_ERR_REG_XGXS_XGXS_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|xgxs_gen_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_ASIC_NTWK_ERR_REG_XMACJ_NTWK_DOWN
operator||
name|VXGE_HAL_ASIC_NTWK_ERR_REG_XMACJ_NTWK_UP
operator||
name|VXGE_HAL_ASIC_NTWK_ERR_REG_XMACJ_NTWK_WENT_DOWN
operator||
name|VXGE_HAL_ASIC_NTWK_ERR_REG_XMACJ_NTWK_WENT_UP
operator||
name|VXGE_HAL_ASIC_NTWK_ERR_REG_XMACJ_NTWK_REAFFIRMED_FAULT
operator||
name|VXGE_HAL_ASIC_NTWK_ERR_REG_XMACJ_NTWK_REAFFIRMED_OK
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|asic_ntwk_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_XGMAC_INT_STATUS_XMAC_GEN_ERR_XMAC_GEN_INT
operator||
name|VXGE_HAL_XGMAC_INT_STATUS_XGXS_GEN_ERR_XGXS_GEN_INT
operator||
name|VXGE_HAL_XGMAC_INT_STATUS_ASIC_NTWK_ERR_ASIC_NTWK_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|xgmac_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RMAC_PORT0_RMAC_RTS_PART_DB_ERR
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RMAC_PORT1_RMAC_RTS_PART_DB_ERR
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RMAC_PORT2_RMAC_RTS_PART_DB_ERR
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_DA_LKP_PRT0_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_DA_LKP_PRT1_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_VID_LKP_DB_ERR
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_PN_LKP_PRT0_DB_ERR
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_PN_LKP_PRT1_DB_ERR
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_PN_LKP_PRT2_DB_ERR
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_RTH_MASK_DB_ERR
argument_list|(
literal|0x3f
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_RTH_LKP_DB_ERR
argument_list|(
literal|0x7
argument_list|)
operator||
name|VXGE_HAL_RXMAC_ECC_ERR_REG_RTSJ_RMAC_DS_LKP_DB_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rxmac_ecc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RXMAC_VARIOUS_ERR_REG_RMAC_RMAC_PORT0_FSM_ERR
operator||
name|VXGE_HAL_RXMAC_VARIOUS_ERR_REG_RMAC_RMAC_PORT1_FSM_ERR
operator||
name|VXGE_HAL_RXMAC_VARIOUS_ERR_REG_RMAC_RMAC_PORT2_FSM_ERR
operator||
name|VXGE_HAL_RXMAC_VARIOUS_ERR_REG_RMACJ_RMACJ_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rxmac_various_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RXMAC_INT_STATUS_RXMAC_ECC_ERR_RXMAC_ECC_INT
operator||
name|VXGE_HAL_RXMAC_INT_STATUS_RXMAC_VARIOUS_ERR_RXMAC_VARIOUS_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|rxmac_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TXMAC_GEN_ERR_REG_TMACJ_PERMANENT_STOP
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|txmac_gen_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMACJ_TMAC_TPA2MAC_DB_ERR
operator||
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMACJ_TMAC_TPA2M_SB_DB_ERR
operator||
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMACJ_TMAC_TPA2M_DA_DB_ERR
operator||
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMAC_TMAC_PORT0_FSM_ERR
operator||
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMAC_TMAC_PORT1_FSM_ERR
operator||
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMAC_TMAC_PORT2_FSM_ERR
operator||
name|VXGE_HAL_TXMAC_ECC_ERR_REG_TMACJ_TMACJ_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|txmac_ecc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TMAC_INT_STATUS_TXMAC_GEN_ERR_TXMAC_GEN_INT
operator||
name|VXGE_HAL_TMAC_INT_STATUS_TXMAC_ECC_ERR_TXMAC_ECC_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|tmac_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3IFCMD_FB_ERR_REG_G3IF_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_fb_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3IFCMD_FB_INT_STATUS_ERR_G3IF_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_fb_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MC_ERR_REG_MC_XFMD_MEM_ECC_DB_ERR_A
operator||
name|VXGE_HAL_MC_ERR_REG_MC_XFMD_MEM_ECC_DB_ERR_B
operator||
name|VXGE_HAL_MC_ERR_REG_MC_G3IF_RD_FIFO_ECC_DB_ERR
operator||
name|VXGE_HAL_MC_ERR_REG_MC_MIRI_ECC_DB_ERR_0
operator||
name|VXGE_HAL_MC_ERR_REG_MC_MIRI_ECC_DB_ERR_1
operator||
name|VXGE_HAL_MC_ERR_REG_MC_SM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_GROCRC_ALARM_REG_XFMD_WR_FIFO_ERR
operator||
name|VXGE_HAL_GROCRC_ALARM_REG_WDE2MSR_RD_FIFO_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|grocrc_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_PORT0_FAU_MAC2F_N_DB_ERR
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_PORT0_FAU_MAC2F_W_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_PORT1_FAU_MAC2F_N_DB_ERR
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_PORT1_FAU_MAC2F_W_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_PORT2_FAU_MAC2F_N_DB_ERR
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_PORT2_FAU_MAC2F_W_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAU_FAU_XFMD_INS_DB_ERR
argument_list|(
literal|0x3
argument_list|)
operator||
name|VXGE_HAL_FAU_ECC_ERR_REG_FAUJ_FAU_FSM_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|fau_ecc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MC_INT_STATUS_MC_ERR_MC_INT
operator||
name|VXGE_HAL_MC_INT_STATUS_GROCRC_ALARM_ROCRC_INT
operator||
name|VXGE_HAL_MC_INT_STATUS_FAU_ECC_ERR_FAU_ECC_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mc_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3FBCT_ERR_REG_G3IF_SM_ERR
operator||
name|VXGE_HAL_G3FBCT_ERR_REG_G3IF_GDDR3_DECC
operator||
name|VXGE_HAL_G3FBCT_ERR_REG_G3IF_GDDR3_U_DECC
operator||
name|VXGE_HAL_G3FBCT_ERR_REG_G3IF_CTRL_FIFO_DECC
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3fbct_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_G3FBCT_INT_STATUS_ERR_G3IF_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|g3fbct_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_ORP_ERR_REG_ORP_FIFO_DB_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_XFMD_FIFO_UFLOW_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_FRM_FIFO_UFLOW_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_XFMD_RCV_FSM_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_OUTREAD_FSM_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_OUTQEM_FSM_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_XFMD_RCV_SHADOW_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_OUTREAD_SHADOW_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_OUTQEM_SHADOW_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_OUTFRM_SHADOW_ERR
operator||
name|VXGE_HAL_ORP_ERR_REG_ORP_OPTPRS_SHADOW_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|orp_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_PTM_ALARM_REG_PTM_RDCTRL_SYNC_ERR
operator||
name|VXGE_HAL_PTM_ALARM_REG_PTM_RDCTRL_FIFO_ERR
operator||
name|VXGE_HAL_PTM_ALARM_REG_XFMD_RD_FIFO_ERR
operator||
name|VXGE_HAL_PTM_ALARM_REG_WDE2MSR_WR_FIFO_ERR
operator||
name|VXGE_HAL_PTM_ALARM_REG_PTM_FRMM_ECC_DB_ERR
argument_list|(
literal|0x3
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|ptm_alarm_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TPA_ERROR_REG_TPA_FSM_ERR_ALARM
operator||
name|VXGE_HAL_TPA_ERROR_REG_TPA_TPA_DA_LKUP_PRT0_DB_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|tpa_error_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TPA_INT_STATUS_ORP_ERR_ORP_INT
operator||
name|VXGE_HAL_TPA_INT_STATUS_PTM_ALARM_PTM_INT
operator||
name|VXGE_HAL_TPA_INT_STATUS_TPA_ERROR_TPA_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|tpa_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_KDFC_ERR_REG_KDFC_KDFC_ECC_DB_ERR
operator||
name|VXGE_HAL_KDFC_ERR_REG_KDFC_KDFC_SM_ERR_ALARM
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|kdfc_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_DOORBELL_INT_STATUS_KDFC_ERR_REG_TXDMA_KDFC_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|doorbell_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_TIM_ERR_REG_TIM_VBLS_DB_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_BMAP_PA_DB_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_BMAP_PB_DB_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_BMAP_MSG_DB_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_BMAP_MEM_CNTRL_SM_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_BMAP_MSG_MEM_CNTRL_SM_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_MPIF_PCIWR_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_ROCRC_BMAP_UPDT_FIFO_ERR
operator||
name|VXGE_HAL_TIM_ERR_REG_TIM_CREATE_BMAPMSG_FIFO_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|tim_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MSG_EXC_REG_MP_MXP_CAUSE_CRIT_INT
operator||
name|VXGE_HAL_MSG_EXC_REG_UP_UXP_CAUSE_CRIT_INT
operator||
name|VXGE_HAL_MSG_EXC_REG_MP_MXP_SERR
operator||
name|VXGE_HAL_MSG_EXC_REG_UP_UXP_SERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|msg_exc_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MSG_ERR_REG_UP_UXP_WAKE_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MP_MXP_WAKE_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_DMQ_DMA_READ_CMD_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_DMQ_DMA_RESP_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_DMQ_OWN_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_PDA_ACC_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MP_MXP_PMON_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_UP_UXP_PMON_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_XFMDQRY_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_FRMQRY_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_UMQ_WRITE_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_UMQ_BWR_PF_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_REG_RESP_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_UP_UXP_DTAG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_UP_UXP_ITAG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MP_MXP_DTAG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MP_MXP_ITAG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_UP_UXP_TRACE_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MP_MXP_TRACE_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_CMG2MSG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_TXPE2MSG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_RXPE2MSG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_RPE2MSG_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_REG_READ_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_MXP2UXP_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_KDFC_SIF_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_CXP2SWIF_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_UMQ_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_BWR_PF_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_BWR_SIF_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_DMQ_ECC_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_DMA_READ_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_DMA_RESP_ECC_DB_ERR
operator||
name|VXGE_HAL_MSG_ERR_REG_MSG_QUE_UXP2MXP_FIFO_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|msg_err_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_CMG2MSG_DISPATCH_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_DMQ_DISPATCH_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_SWIF_DISPATCH_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_PIC_WRITE_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_SWIFREG_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_TIM_WRITE_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_UMQ_TA_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_TXPE_TA_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_RXPE_TA_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_SWIF_TA_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_DMA_TA_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_CP_TA_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA16_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA15_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA14_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA13_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA12_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA11_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA10_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA9_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA8_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA7_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA6_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA5_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA4_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA3_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA2_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA1_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_LONGTERMUMQ_TA0_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_FBMC_OWN_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_TXPE2MSG_DISPATCH_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_RXPE2MSG_DISPATCH_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_RPE2MSG_DISPATCH_FSM_INTEGRITY_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MP_MP_PIFT_IF_CREDIT_CNT_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_UP_UP_PIFT_IF_CREDIT_CNT_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_MSG_QUE_UMQ2PIC_CMD_FIFO_ERR
operator||
name|VXGE_HAL_MSG_ERR2_REG_TIM_TIM2MSG_CMD_FIFO_ERR
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|msg_err2_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR0
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR1
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR2
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR3
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR4
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR5
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR6
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_DCACHE_DB_ERR7
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_ICACHE_DB_ERR0
operator||
name|VXGE_HAL_MSG_ERR3_REG_UP_UXP_ICACHE_DB_ERR1
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR0
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR1
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR2
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR3
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR4
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR5
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR6
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_DCACHE_DB_ERR7
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_ICACHE_DB_ERR0
operator||
name|VXGE_HAL_MSG_ERR3_REG_MP_MXP_ICACHE_DB_ERR1
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|msg_err3_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MSG_INT_STATUS_TIM_ERR_TIM_INT
operator||
name|VXGE_HAL_MSG_INT_STATUS_MSG_EXC_MSG_XT_EXC_INT
operator||
name|VXGE_HAL_MSG_INT_STATUS_MSG_ERR3_MSG_ERR3_INT
operator||
name|VXGE_HAL_MSG_INT_STATUS_MSG_ERR2_MSG_ERR2_INT
operator||
name|VXGE_HAL_MSG_INT_STATUS_MSG_ERR_MSG_ERR_INT
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_UNMASK
argument_list|(
name|val64
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|msg_int_mask
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_PIC_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_PCI_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_RTDMA_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_WRDMA_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_G3CMCT_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_GCMG1_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_GCMG2_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_G3CMIFL_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_G3CMIFU_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_PCMG1_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_PCMG2_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_PCMG3_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_XMAC_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_RXMAC_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_TMAC_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_G3FBIF_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_FBMC_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_G3FBCT_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_TPA_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_DRBELL_INT
operator||
name|VXGE_HAL_MRPCIM_GENERAL_INT_STATUS_MSG_INT
expr_stmt|;
name|vxge_hal_pio_mem_write32_upper
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|bVAL32
argument_list|(
operator|~
name|val64
argument_list|,
literal|0
argument_list|)
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_general_int_mask
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_intr_disable - Disable the interrupts on mrpcim.  * @devh: HAL device handle.  *  * Disable mrpcim interrupts  *  * See also: vxge_hal_mrpcim_intr_enable().  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_intr_disable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_hal_mrpcim_reg_t
modifier|*
name|mrpcim_reg
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|mrpcim_reg
operator|=
name|hldev
operator|->
name|mrpcim_reg
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|ini_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|dma_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tgt_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|config_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|crdt_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_general_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pll_errors_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_ppif_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|dbecc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|general_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcipif_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pda_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcc_error_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|lso_error_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|sm_error_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rtdma_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rc_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxdrm_sm_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxdcm_sm_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxdwm_sm_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rda_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rda_ecc_db_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rqa_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|frf_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rocrc_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde0_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde1_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde2_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wde3_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|wrdma_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3cmct_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3cmct_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gsscc_err_mask
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|3
condition|;
name|i
operator|++
control|)
block|{
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gssc_err0_mask
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gssc_err1_mask
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gcmg1_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gxtmc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gcp_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|cmc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|gcmg2_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cml_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cml_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cmu_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_cmu_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|psscc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcmg1_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pxtmc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|cp_exc_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|cp_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcmg2_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|dam_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|pcmg3_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|xmac_gen_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|xgxs_gen_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|asic_ntwk_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|xgmac_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxmac_ecc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxmac_various_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|rxmac_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|txmac_gen_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|txmac_ecc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tmac_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_fb_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3ifcmd_fb_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|grocrc_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|fau_ecc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|mc_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3fbct_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|g3fbct_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|orp_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|ptm_alarm_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tpa_error_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tpa_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|kdfc_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|doorbell_int_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|tim_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_exc_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_err_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_err2_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_err3_mask
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_ERROR_REG_MASK
argument_list|(
operator|&
name|mrpcim_reg
operator|->
name|msg_int_mask
argument_list|)
expr_stmt|;
name|vxge_hal_pio_mem_write32_upper
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|VXGE_HAL_INTR_MASK_ALL
argument_list|,
operator|&
name|mrpcim_reg
operator|->
name|mrpcim_general_int_mask
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_reset - Reset the entire device.  * @devh: HAL device handle.  *  * Soft-reset the device, reset the device stats except reset_cnt.  *  *  * Returns:  VXGE_HAL_OK - success.  * VXGE_HAL_ERR_DEVICE_NOT_INITIALIZED - Device is not initialized.  * VXGE_HAL_ERR_RESET_FAILED - Reset failed.  *  * See also: vxge_hal_status_e {}.  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_reset
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
operator|!
name|hldev
operator|->
name|header
operator|.
name|is_initialized
condition|)
return|return
operator|(
name|VXGE_HAL_ERR_DEVICE_NOT_INITIALIZED
operator|)
return|;
if|if
condition|(
name|hldev
operator|->
name|device_resetting
operator|==
literal|1
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_RESET_IN_PROGRESS
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_RESET_IN_PROGRESS
operator|)
return|;
block|}
operator|(
name|void
operator|)
name|__hal_ifmsg_wmsg_post
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_MSG_DEST_BROADCAST
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_MSG_TYPE_DEVICE_RESET_BEGIN
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|vxge_os_mdelay
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|sw_reset_cfg1
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_SW_RESET_CFG1_TYPE
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|sw_reset_cfg1
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|VXGE_HAL_PF_SW_RESET_PF_SW_RESET
argument_list|(
name|VXGE_HAL_PF_SW_RESET_COMMAND
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|bf_sw_reset
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|stats
operator|.
name|sw_dev_info_stats
operator|.
name|soft_reset_cnt
operator|++
expr_stmt|;
name|hldev
operator|->
name|device_resetting
operator|=
literal|1
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_PENDING
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_PENDING
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_reset_poll - Poll the device for reset complete.  * @devh: HAL device handle.  *  * Soft-reset the device, reset the device stats except reset_cnt.  *  * After reset is done, will try to re-initialize HW.  *  * Returns:  VXGE_HAL_OK - success.  * VXGE_HAL_ERR_DEVICE_NOT_INITIALIZED - Device is not initialized.  * VXGE_HAL_ERR_RESET_FAILED - Reset failed.  *  * See also: vxge_hal_status_e {}.  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_reset_poll
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
operator|!
name|hldev
operator|->
name|header
operator|.
name|is_initialized
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_DEVICE_NOT_INITIALIZED
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_DEVICE_NOT_INITIALIZED
operator|)
return|;
block|}
if|if
condition|(
operator|(
name|status
operator|=
name|__hal_device_reg_addr_get
argument_list|(
name|hldev
argument_list|)
operator|)
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|device_resetting
operator|=
literal|0
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|__hal_device_id_get
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
name|__hal_device_host_info_get
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|hw_is_initialized
operator|=
literal|0
expr_stmt|;
name|hldev
operator|->
name|device_resetting
operator|=
literal|0
expr_stmt|;
name|vxge_os_memzero
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
name|vxge_os_memzero
argument_list|(
operator|&
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_sav
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
name|status
operator|=
name|__hal_mrpcim_mac_configure
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|status
operator|=
name|__hal_mrpcim_lag_configure
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_gen_cfg_port
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_phy_prtad0
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MDIO_GEN_CFG_PORT_GET_MDIO_PHY_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_gen_cfg_port
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_phy_prtad1
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MDIO_GEN_CFG_PORT_GET_MDIO_PHY_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgxs_static_cfg_port
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_dte_prtad0
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_XGXS_STATIC_CFG_PORT_GET_MDIO_DTE_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgxs_static_cfg_port
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_dte_prtad1
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_XGXS_STATIC_CFG_PORT_GET_MDIO_DTE_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|->
name|dma_addr
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_stats_start_host_addr
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|hldev
operator|->
name|vpath_assignments
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_authorize_all_addr
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|hldev
operator|->
name|vpath_assignments
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_authorize_all_vid
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|__hal_ifmsg_wmsg_post
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_MSG_DEST_BROADCAST
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_MSG_TYPE_DEVICE_RESET_END
argument_list|,
literal|0
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|vxge_hal_device_reset_poll
argument_list|(
name|devh
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_xpak_counter_check -  check the Xpak error count and log the msg  * @hldev: pointer to __hal_device_t structure  * @port: Port number  * @type:  xpak stats error type  * @value: xpak stats value  *  * It is used to log the error message based on the xpak stats value  * Return value:  * None  */
end_comment

begin_function
name|void
name|__hal_mrpcim_xpak_counter_check
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|,
name|u32
name|port
parameter_list|,
name|u32
name|type
parameter_list|,
name|u32
name|value
parameter_list|)
block|{
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
literal|", port = %d, type = %d, value = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|,
name|port
argument_list|,
name|type
argument_list|,
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return;
block|}
comment|/* 	 * If the value is high for three consecutive cylce, 	 * log a error message 	 */
if|if
condition|(
name|value
operator|==
literal|3
condition|)
block|{
switch|switch
condition|(
name|type
condition|)
block|{
case|case
name|VXGE_HAL_XPAK_ALARM_EXCESS_TEMP
case|:
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_temp
operator|=
literal|0
expr_stmt|;
comment|/* 			 * Notify the ULD on Excess Xpak temperature alarm msg 			 */
if|if
condition|(
name|g_vxge_hal_driver
operator|->
name|uld_callbacks
operator|.
name|xpak_alarm_log
condition|)
block|{
name|g_vxge_hal_driver
operator|->
name|uld_callbacks
operator|.
name|xpak_alarm_log
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|upper_layer_data
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_XPAK_ALARM_EXCESS_TEMP
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
name|VXGE_HAL_XPAK_ALARM_EXCESS_BIAS_CURRENT
case|:
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_bias_current
operator|=
literal|0
expr_stmt|;
comment|/* 			 * Notify the ULD on Excess  xpak bias current alarm msg 			 */
if|if
condition|(
name|g_vxge_hal_driver
operator|->
name|uld_callbacks
operator|.
name|xpak_alarm_log
condition|)
block|{
name|g_vxge_hal_driver
operator|->
name|uld_callbacks
operator|.
name|xpak_alarm_log
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|upper_layer_data
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_XPAK_ALARM_EXCESS_BIAS_CURRENT
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
name|VXGE_HAL_XPAK_ALARM_EXCESS_LASER_OUTPUT
case|:
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_laser_output
operator|=
literal|0
expr_stmt|;
comment|/* 			 * Notify the ULD on Excess Xpak Laser o/p power 			 * alarm msg 			 */
if|if
condition|(
name|g_vxge_hal_driver
operator|->
name|uld_callbacks
operator|.
name|xpak_alarm_log
condition|)
block|{
name|g_vxge_hal_driver
operator|->
name|uld_callbacks
operator|.
name|xpak_alarm_log
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|upper_layer_data
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_XPAK_ALARM_EXCESS_LASER_OUTPUT
argument_list|)
expr_stmt|;
block|}
break|break;
default|default:
name|vxge_hal_info_log_stats
argument_list|(
literal|"%s"
argument_list|,
literal|"Incorrect XPAK Alarm type"
argument_list|)
expr_stmt|;
block|}
block|}
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_xpak_stats_poll -  Poll and update the Xpak error count.  * @devh: HAL device handle  * @port: Port number  *  * It is used to update the xpak stats value  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_xpak_stats_poll
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|port
parameter_list|)
block|{
name|u16
name|val
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
literal|", port = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|,
name|port
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
comment|/* Loading the DOM register to MDIO register */
name|val
operator|=
literal|0
expr_stmt|;
name|status
operator|=
name|__hal_mrpcim_mdio_access
argument_list|(
name|devh
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_ADDR_WRITE
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DEVAD_PMA_PMD
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_CMD_STAT
argument_list|,
operator|&
name|val
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|status
operator|=
name|__hal_mrpcim_mdio_access
argument_list|(
name|devh
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_ADDR_READ
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DEVAD_PMA_PMD
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_CMD_STAT
argument_list|,
operator|&
name|val
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
comment|/* 	 * Reading the Alarm flags 	 */
name|status
operator|=
name|__hal_mrpcim_mdio_access
argument_list|(
name|devh
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_ADDR_READ
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DEVAD_PMA_PMD
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG
argument_list|,
operator|&
name|val
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG_TEMP_HIGH
condition|)
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|alarm_transceiver_temp_high
operator|++
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_temp
operator|++
expr_stmt|;
name|__hal_mrpcim_xpak_counter_check
argument_list|(
name|hldev
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_XPAK_ALARM_EXCESS_TEMP
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_temp
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_temp
operator|=
literal|0
expr_stmt|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG_TEMP_LOW
condition|)
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|alarm_transceiver_temp_low
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG_CUR_HIGH
condition|)
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|alarm_laser_bias_current_high
operator|++
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_bias_current
operator|++
expr_stmt|;
name|__hal_mrpcim_xpak_counter_check
argument_list|(
name|hldev
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_XPAK_ALARM_EXCESS_BIAS_CURRENT
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_bias_current
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_bias_current
operator|=
literal|0
expr_stmt|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG_CUR_LOW
condition|)
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|alarm_laser_bias_current_low
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG_PWR_HIGH
condition|)
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|alarm_laser_output_power_high
operator|++
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_laser_output
operator|++
expr_stmt|;
name|__hal_mrpcim_xpak_counter_check
argument_list|(
name|hldev
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_XPAK_ALARM_EXCESS_LASER_OUTPUT
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_laser_output
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|excess_laser_output
operator|=
literal|0
expr_stmt|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_ALARM_FLAG_PWR_LOW
condition|)
block|{
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|alarm_laser_output_power_low
operator|++
expr_stmt|;
block|}
comment|/* 	 * Reading the warning flags 	 */
name|status
operator|=
name|__hal_mrpcim_mdio_access
argument_list|(
name|devh
argument_list|,
name|port
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_OP_TYPE_ADDR_READ
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_DEVAD_PMA_PMD
argument_list|,
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG
argument_list|,
operator|&
name|val
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG_TEMP_HIGH
condition|)
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|warn_transceiver_temp_high
operator|++
expr_stmt|;
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG_TEMP_LOW
condition|)
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|warn_transceiver_temp_low
operator|++
expr_stmt|;
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG_CUR_HIGH
condition|)
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|warn_laser_bias_current_high
operator|++
expr_stmt|;
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG_CUR_LOW
condition|)
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|warn_laser_bias_current_low
operator|++
expr_stmt|;
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG_PWR_HIGH
condition|)
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|warn_laser_output_power_high
operator|++
expr_stmt|;
if|if
condition|(
name|val
operator|&
name|VXGE_HAL_MDIO_MGR_ACCESS_PORT_ADDR_DOM_TX_WARN_FLAG_PWR_LOW
condition|)
name|hldev
operator|->
name|mrpcim
operator|->
name|xpak_stats
index|[
name|port
index|]
operator|.
name|warn_laser_output_power_low
operator|++
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_stats_enable - Enable mrpcim statistics.  * @devh: HAL Device.  *  * Enable the DMA mrpcim statistics for the device. The function is to be called  * to re-enable the adapter to update stats into the host memory  *  * See also: vxge_hal_mrpcim_stats_disable()  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_stats_enable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|vxge_os_memcpy
argument_list|(
operator|&
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_sav
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|stats_read_method
operator|==
name|VXGE_HAL_STATS_READ_METHOD_DMA
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_MRPCIM_GENERAL_CFG2_MRPCIM_STATS_ENABLE
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|common_reg
operator|->
name|stats_cfg0
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_STATS_CFG0_STATS_ENABLE
argument_list|(
operator|(
literal|1
operator|<<
operator|(
literal|16
operator|-
name|hldev
operator|->
name|first_vp_id
operator|)
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_pio_mem_write32_upper
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|bVAL32
argument_list|(
name|val64
argument_list|,
literal|0
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|common_reg
operator|->
name|stats_cfg0
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|status
operator|=
name|__hal_mrpcim_stats_get
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|)
expr_stmt|;
block|}
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_stats_disable - Disable mrpcim statistics.  * @devh: HAL Device.  *  * Enable the DMA mrpcim statistics for the device. The function is to be called  * to disable the adapter to update stats into the host memory. This function  * is not needed to be called, normally.  *  * See also: vxge_hal_mrpcim_stats_enable()  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_stats_disable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_MRPCIM_GENERAL_CFG2_MRPCIM_STATS_ENABLE
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_stats_get - Get the device mrpcim statistics.  * @devh: HAL Device.  * @stats: mrpcim stats  *  * Returns the device mrpcim stats for the device.  *  * See also: vxge_hal_device_stats_get()  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_stats_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|vxge_hal_mrpcim_stats_hw_info_t
modifier|*
name|stats
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|hldev
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|stats
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", stats = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
operator|(
name|ptr_t
operator|)
name|stats
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|stats_read_method
operator|==
name|VXGE_HAL_STATS_READ_METHOD_DMA
condition|)
block|{
name|status
operator|=
name|vxge_hal_device_register_poll
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|common_reg
operator|->
name|stats_cfg0
argument_list|,
literal|0
argument_list|,
name|VXGE_HAL_STATS_CFG0_STATS_ENABLE
argument_list|(
operator|(
literal|1
operator|<<
operator|(
literal|16
operator|-
name|hldev
operator|->
name|first_vp_id
operator|)
operator|)
argument_list|)
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|device_poll_millis
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_MRPCIM_GENERAL_CFG2_MRPCIM_STATS_ENABLE
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|status
operator|==
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_os_memcpy
argument_list|(
name|stats
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_stats_access - Access the statistics from the given location  *			  and offset and perform an operation  * @devh: HAL Device handle.  * @operation: Operation to be performed  * @location: Location (one of vpath id, aggregate or port)  * @offset: Offset with in the location  * @stat: Pointer to a buffer to return the value  *  * Get the statistics from the given location and offset.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_stats_access
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|operation
parameter_list|,
name|u32
name|location
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u64
modifier|*
name|stat
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|devh
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|stat
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", operation = %d, "
literal|"location = %d, offset = %d, stat = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|operation
argument_list|,
name|location
argument_list|,
name|offset
argument_list|,
operator|(
name|ptr_t
operator|)
name|stat
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|val64
operator|=
name|VXGE_HAL_XMAC_STATS_SYS_CMD_OP
argument_list|(
name|operation
argument_list|)
operator||
name|VXGE_HAL_XMAC_STATS_SYS_CMD_STROBE
operator||
name|VXGE_HAL_XMAC_STATS_SYS_CMD_LOC_SEL
argument_list|(
name|location
argument_list|)
operator||
name|VXGE_HAL_XMAC_STATS_SYS_CMD_OFFSET_SEL
argument_list|(
name|offset
argument_list|)
expr_stmt|;
name|vxge_hal_pio_mem_write32_lower
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|bVAL32
argument_list|(
name|val64
argument_list|,
literal|32
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xmac_stats_sys_cmd
argument_list|)
expr_stmt|;
name|vxge_os_wmb
argument_list|()
expr_stmt|;
name|vxge_hal_pio_mem_write32_upper
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|bVAL32
argument_list|(
name|val64
argument_list|,
literal|0
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xmac_stats_sys_cmd
argument_list|)
expr_stmt|;
name|vxge_os_wmb
argument_list|()
expr_stmt|;
name|status
operator|=
name|vxge_hal_device_register_poll
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xmac_stats_sys_cmd
argument_list|,
literal|0
argument_list|,
name|VXGE_HAL_XMAC_STATS_SYS_CMD_STROBE
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|device_poll_millis
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|status
operator|==
name|VXGE_HAL_OK
operator|)
operator|&&
operator|(
name|operation
operator|==
name|VXGE_HAL_STATS_OP_READ
operator|)
condition|)
block|{
operator|*
name|stat
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xmac_stats_sys_data
argument_list|)
expr_stmt|;
block|}
else|else
block|{
operator|*
name|stat
operator|=
literal|0
expr_stmt|;
block|}
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_xmac_aggr_stats_get - Get the Statistics on aggregate port  * @devh: HAL device handle.  * @port: Number of the port (0 or 1)  * @aggr_stats: Buffer to return Statistics on aggregate port.  *  * Get the Statistics on aggregate port  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_xmac_aggr_stats_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|port
parameter_list|,
name|vxge_hal_xmac_aggr_stats_t
modifier|*
name|aggr_stats
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|devh
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|aggr_stats
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", port = %d, "
literal|"aggr_stats = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|port
argument_list|,
operator|(
name|ptr_t
operator|)
name|aggr_stats
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_TX_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|tx_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_TX_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_TX_DATA_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|tx_data_octets
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_TX_DATA_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_TX_MCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|tx_mcast_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_TX_MCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_TX_BCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|tx_bcast_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_TX_BCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_TX_DISCARDED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|tx_discarded_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_TX_DISCARDED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_TX_ERRORED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|tx_errored_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_TX_ERRORED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_DATA_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_data_octets
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_DATA_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_MCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_mcast_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_MCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_BCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_bcast_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_BCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_DISCARDED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_discarded_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_DISCARDED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_ERRORED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_errored_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_ERRORED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_AGGRn_RX_U_SLOW_PROTO_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|aggr_stats
operator|->
name|rx_unknown_slow_proto_frms
operator|=
name|VXGE_HAL_STATS_GET_AGGRn_RX_U_SLOW_PROTO_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_xmac_port_stats_get - Get the Statistics on a port  * @devh: HAL device handle.  * @port: Number of the port (wire 0, wire 1 or LAG)  * @port_stats: Buffer to return Statistics on a port.  *  * Get the Statistics on port  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_xmac_port_stats_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|port
parameter_list|,
name|vxge_hal_xmac_port_stats_t
modifier|*
name|port_stats
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|devh
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|port_stats
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", port = %d, "
literal|"port_stats = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|port
argument_list|,
operator|(
name|ptr_t
operator|)
name|port_stats
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_TTL_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_ttl_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_TTL_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_TTL_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_ttl_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_TTL_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_DATA_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_data_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_DATA_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_MCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_mcast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_MCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_BCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_bcast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_BCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_UCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_ucast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_UCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_TAGGED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_tagged_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_TAGGED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_VLD_IP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_vld_ip
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_VLD_IP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_VLD_IP_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_vld_ip_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_VLD_IP_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_ICMP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_icmp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_ICMP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_TCP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_tcp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_TCP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_RST_TCP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_rst_tcp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_RST_TCP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_UDP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_udp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_UDP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_UNKNOWN_PROTOCOL_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_unknown_protocol
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_UNKNOWN_PROTOCOL
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_PARSE_ERROR_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_parse_error
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_PARSE_ERROR
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_PAUSE_CTRL_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_pause_ctrl_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_TX_PAUSE_CTRL_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_LACPDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_lacpdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_LACPDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_MRKR_PDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_marker_pdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_MRKR_PDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_MRKR_RESP_PDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_marker_resp_pdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_MRKR_RESP_PDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_DROP_IP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_drop_ip
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_DROP_IP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_XGMII_CHAR1_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_xgmii_char1_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_XGMII_CHAR1_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_XGMII_CHAR2_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_xgmii_char2_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_XGMII_CHAR2_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_XGMII_COL1_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_xgmii_column1_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_XGMII_COL1_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_XGMII_COL2_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_xgmii_column2_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_XGMII_COL2_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_DROP_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_drop_frms
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_DROP_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_TX_ANY_ERR_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|tx_any_err_frms
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_STATS_GET_PORTn_TX_ANY_ERR_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_VLD_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_vld_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_VLD_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_OFFLOAD_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_offload_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_OFFLOAD_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_DATA_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_data_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_DATA_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_OFFLOAD_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_offload_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_OFFLOAD_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_VLD_MCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_vld_mcast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_VLD_MCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_VLD_BCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_vld_bcast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_VLD_BCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ACC_UCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_accepted_ucast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_ACC_UCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ACC_NUCAST_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_accepted_nucast_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_ACC_NUCAST_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TAGGED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_tagged_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TAGGED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_LONG_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_long_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_LONG_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_USIZED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_usized_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_USIZED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_OSIZED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_osized_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_OSIZED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_FRAG_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_frag_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_FRAG_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_JABBER_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_jabber_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_JABBER_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_64_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_64_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_64_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_65_127_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_65_127_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_65_127_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_128_255_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_128_255_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_128_255_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_256_511_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_256_511_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_256_511_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_512_1023_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_512_1023_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_512_1023_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_1024_1518_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_1024_1518_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_1024_1518_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_1519_4095_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_1519_4095_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_1519_4095_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_4096_81915_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_4096_8191_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_4096_8191_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_8192_MAX_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_8192_max_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_8192_MAX_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TTL_GT_MAX_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ttl_gt_max_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TTL_GT_MAX_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_IP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ip
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_IP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ACC_IP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_accepted_ip
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_ACC_IP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_IP_OCTETS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_ip_octets
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_IP_OCTETS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ERR_IP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_err_ip
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_ERR_IP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ICMP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_icmp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_ICMP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TCP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_tcp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_TCP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_UDP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_udp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_UDP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ERR_TCP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_err_tcp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_ERR_TCP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_PAUSE_CNT_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_pause_count
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_PAUSE_CNT
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_PAUSE_CTRL_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_pause_ctrl_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_PAUSE_CTRL_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_UNSUP_CTRL_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_unsup_ctrl_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_UNSUP_CTRL_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_FCS_ERR_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_fcs_err_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_FCS_ERR_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_IN_RNG_LEN_ERR_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_in_rng_len_err_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_IN_RNG_LEN_ERR_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_OUT_RNG_LEN_ERR_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_out_rng_len_err_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_OUT_RNG_LEN_ERR_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_DROP_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_drop_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_DROP_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_DISCARDED_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_discarded_frms
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_DISCARDED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_DROP_IP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_drop_ip
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_DROP_IP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_DRP_UDP_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_drop_udp
operator|=
name|VXGE_HAL_STATS_GET_PORTn_RX_DRP_UDP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_LACPDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_lacpdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_LACPDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_MRKR_PDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_marker_pdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_MRKR_PDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_MRKR_RESP_PDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_marker_resp_pdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_MRKR_RESP_PDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_UNKNOWN_PDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_unknown_pdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_UNKNOWN_PDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_ILLEGAL_PDU_FRMS_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_illegal_pdu_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_ILLEGAL_PDU_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_FCS_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_fcs_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_FCS_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_LEN_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_len_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_LEN_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_SWITCH_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_switch_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_SWITCH_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_L2_MGMT_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_l2_mgmt_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_L2_MGMT_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_RPA_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_rpa_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_RPA_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_TRASH_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_trash_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_TRASH_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_RTS_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_rts_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_RTS_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_RED_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_red_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_RED_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_BUFF_FULL_DISCARD_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_buff_full_discard
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_BUFF_FULL_DISCARD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_DATA_ERR_CNT_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_data_err_cnt
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_DATA_ERR_CNT
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_CTRL_ERR_CNT_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_ctrl_err_cnt
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_CTRL_ERR_CNT
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_ERR_SYM_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_err_sym
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_ERR_SYM
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_CHAR1_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_char1_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_CHAR1_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_CHAR2_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_char2_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_CHAR2_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_COL1_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_column1_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_COL1_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_XGMII_COL2_MATCH_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_xgmii_column2_match
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_XGMII_COL2_MATCH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_LOCAL_FAULT_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_local_fault
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_LOCAL_FAULT
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_REMOTE_FAULT_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_remote_fault
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_REMOTE_FAULT
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_PORT
argument_list|,
name|VXGE_HAL_STATS_PORTn_RX_JETTISON_OFFSET
argument_list|(
name|port
argument_list|)
argument_list|)
expr_stmt|;
name|port_stats
operator|->
name|rx_jettison
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_STATS_GET_PORTn_RX_JETTISON
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_xmac_stats_get - Get the XMAC Statistics  * @devh: HAL device handle.  * @xmac_stats: Buffer to return XMAC Statistics.  *  * Get the XMAC Statistics  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_xmac_stats_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|vxge_hal_mrpcim_xmac_stats_t
modifier|*
name|xmac_stats
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|devh
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|xmac_stats
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
literal|", mrpcim_stats = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
operator|(
name|ptr_t
operator|)
name|xmac_stats
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|status
operator|=
name|vxge_hal_mrpcim_xmac_aggr_stats_get
argument_list|(
name|devh
argument_list|,
literal|0
argument_list|,
operator|&
name|xmac_stats
operator|->
name|aggr_stats
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|status
operator|=
name|vxge_hal_mrpcim_xmac_aggr_stats_get
argument_list|(
name|devh
argument_list|,
literal|1
argument_list|,
operator|&
name|xmac_stats
operator|->
name|aggr_stats
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAC_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|status
operator|=
name|vxge_hal_mrpcim_xmac_port_stats_get
argument_list|(
name|devh
argument_list|,
name|i
argument_list|,
operator|&
name|xmac_stats
operator|->
name|port_stats
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
block|}
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * _hal_mrpcim_stats_get - Get the mrpcim statistics using PIO  * @hldev: hal device.  * @mrpcim_stats: MRPCIM stats  *  * Returns the mrpcim stats.  *  * See also: vxge_hal_mrpcim_stats_enable(), vxge_hal_mrpcim_stats_disable()  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_stats_get
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|,
name|vxge_hal_mrpcim_stats_hw_info_t
modifier|*
name|mrpcim_stats
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|u64
name|val64
decl_stmt|;
name|vxge_hal_device_h
name|devh
init|=
operator|(
name|vxge_hal_device_h
operator|)
name|hldev
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|hldev
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|mrpcim_stats
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
literal|", mrpcim_stats = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|,
operator|(
name|ptr_t
operator|)
name|mrpcim_stats
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_debug_stats0
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_ini_rd_drop
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS0_GET_INI_RD_DROP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_ini_wr_drop
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS0_GET_INI_WR_DROP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_debug_stats1_vplane
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_wrcrdtarb_ph_crdt_depleted_vplane
index|[
name|i
index|]
operator|.
name|pic_wrcrdtarb_ph_crdt_depleted
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS1_GET_VPLANE_WRCRDTARB_PH_CRDT_DEPLETED
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_debug_stats2_vplane
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_wrcrdtarb_pd_crdt_depleted_vplane
index|[
name|i
index|]
operator|.
name|pic_wrcrdtarb_pd_crdt_depleted
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS2_GET_VPLANE_WRCRDTARB_PD_CRDT_DEPLETED
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_debug_stats3_vplane
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_rdcrdtarb_nph_crdt_depleted_vplane
index|[
name|i
index|]
operator|.
name|pic_rdcrdtarb_nph_crdt_depleted
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS3_GET_VPLANE_RDCRDTARB_NPH_CRDT_DEPLETED
argument_list|(
name|val64
argument_list|)
expr_stmt|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_debug_stats4
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_ini_rd_vpin_drop
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS4_GET_INI_RD_VPIN_DROP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_ini_wr_vpin_drop
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MRPCIM_DEBUG_STATS4_GET_INI_WR_VPIN_DROP
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|genstats_count01
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_genstats_count0
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_GENSTATS_COUNT01_GET_GENSTATS_COUNT0
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_genstats_count1
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_GENSTATS_COUNT01_GET_GENSTATS_COUNT1
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|genstats_count23
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_genstats_count2
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_GENSTATS_COUNT23_GET_GENSTATS_COUNT2
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_genstats_count3
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_GENSTATS_COUNT23_GET_GENSTATS_COUNT3
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|genstats_count4
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_genstats_count4
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_GENSTATS_COUNT4_GET_GENSTATS_COUNT4
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|genstats_count5
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pic_genstats_count5
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_GENSTATS_COUNT5_GET_GENSTATS_COUNT5
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|debug_stats0
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_rstdrop_cpl
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_DEBUG_STATS0_GET_RSTDROP_CPL
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_rstdrop_msg
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_DEBUG_STATS0_GET_RSTDROP_MSG
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|debug_stats1
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_rstdrop_client0
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_DEBUG_STATS1_GET_RSTDROP_CLIENT0
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_rstdrop_client1
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_DEBUG_STATS1_GET_RSTDROP_CLIENT1
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|debug_stats2
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_rstdrop_client2
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_DEBUG_STATS2_GET_RSTDROP_CLIENT2
argument_list|(
name|val64
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|debug_stats3_vplane
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_depl_h_vplane
index|[
name|i
index|]
operator|.
name|pci_depl_cplh
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_DEBUG_STATS3_GET_VPLANE_DEPL_CPLH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_depl_h_vplane
index|[
name|i
index|]
operator|.
name|pci_depl_nph
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_DEBUG_STATS3_GET_VPLANE_DEPL_NPH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_depl_h_vplane
index|[
name|i
index|]
operator|.
name|pci_depl_ph
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_DEBUG_STATS3_GET_VPLANE_DEPL_PH
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|debug_stats4_vplane
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_depl_d_vplane
index|[
name|i
index|]
operator|.
name|pci_depl_cpld
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_DEBUG_STATS4_GET_VPLANE_DEPL_CPLD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_depl_d_vplane
index|[
name|i
index|]
operator|.
name|pci_depl_npd
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_DEBUG_STATS4_GET_VPLANE_DEPL_NPD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|pci_depl_d_vplane
index|[
name|i
index|]
operator|.
name|pci_depl_pd
operator|=
operator|(
name|u16
operator|)
name|VXGE_HAL_DEBUG_STATS4_GET_VPLANE_DEPL_PD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
block|}
name|status
operator|=
name|vxge_hal_mrpcim_xmac_aggr_stats_get
argument_list|(
name|hldev
argument_list|,
literal|0
argument_list|,
operator|&
name|mrpcim_stats
operator|->
name|xgmac_aggr
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|status
operator|=
name|vxge_hal_mrpcim_xmac_aggr_stats_get
argument_list|(
name|hldev
argument_list|,
literal|1
argument_list|,
operator|&
name|mrpcim_stats
operator|->
name|xgmac_aggr
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAC_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|status
operator|=
name|vxge_hal_mrpcim_xmac_port_stats_get
argument_list|(
name|hldev
argument_list|,
name|i
argument_list|,
operator|&
name|mrpcim_stats
operator|->
name|xgmac_port
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
block|}
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_GLOBAL_PROG_EVENT_GNUM0_OFFSET
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_global_prog_event_gnum0
operator|=
name|VXGE_HAL_STATS_GET_GLOBAL_PROG_EVENT_GNUM0
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|VXGE_HAL_MRPCIM_STATS_PIO_READ
argument_list|(
name|VXGE_HAL_STATS_LOC_AGGR
argument_list|,
name|VXGE_HAL_STATS_GLOBAL_PROG_EVENT_GNUM1_OFFSET
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_global_prog_event_gnum1
operator|=
name|VXGE_HAL_STATS_GET_GLOBAL_PROG_EVENT_GNUM1
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|orp_lro_events
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_orp_lro_events
operator|=
name|VXGE_HAL_ORP_LRO_EVENTS_GET_ORP_LRO_EVENTS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|orp_bs_events
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_orp_bs_events
operator|=
name|VXGE_HAL_ORP_BS_EVENTS_GET_ORP_BS_EVENTS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|orp_iwarp_events
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_orp_iwarp_events
operator|=
name|VXGE_HAL_ORP_IWARP_EVENTS_GET_ORP_IWARP_EVENTS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|dbg_stats_tpa_tx_path
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_tx_permitted_frms
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_DBG_STATS_TPA_TX_PATH_GET_TX_PERMITTED_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|dbg_stat_tx_any_frms
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_port0_tx_any_frms
operator|=
operator|(
name|u8
operator|)
name|VXGE_HAL_DBG_STAT_TX_ANY_FRMS_GET_PORT0_TX_ANY_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_port1_tx_any_frms
operator|=
operator|(
name|u8
operator|)
name|VXGE_HAL_DBG_STAT_TX_ANY_FRMS_GET_PORT1_TX_ANY_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_port2_tx_any_frms
operator|=
operator|(
name|u8
operator|)
name|VXGE_HAL_DBG_STAT_TX_ANY_FRMS_GET_PORT2_TX_ANY_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|dbg_stat_rx_any_frms
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_port0_rx_any_frms
operator|=
operator|(
name|u8
operator|)
name|VXGE_HAL_DBG_STAT_RX_ANY_FRMS_GET_PORT0_RX_ANY_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_port1_rx_any_frms
operator|=
operator|(
name|u8
operator|)
name|VXGE_HAL_DBG_STAT_RX_ANY_FRMS_GET_PORT1_RX_ANY_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|mrpcim_stats
operator|->
name|xgmac_port2_rx_any_frms
operator|=
operator|(
name|u8
operator|)
name|VXGE_HAL_DBG_STAT_RX_ANY_FRMS_GET_PORT2_RX_ANY_FRMS
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_stats_clear - Clear the statistics of the device  * @devh: HAL Device handle.  *  * Clear the statistics of the given Device.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_stats_clear
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|u64
name|stat
decl_stmt|;
name|vxge_hal_status_e
name|status
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|vxge_os_memcpy
argument_list|(
operator|&
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_sav
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
name|vxge_os_memzero
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
name|vxge_os_memzero
argument_list|(
operator|&
name|hldev
operator|->
name|stats
operator|.
name|sw_dev_err_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_device_stats_sw_err_t
argument_list|)
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|stats
operator|.
name|sw_dev_info_stats
operator|.
name|soft_reset_cnt
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAX_VIRTUAL_PATHS
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|vpaths_deployed
operator|&
name|mBIT
argument_list|(
name|i
argument_list|)
operator|)
condition|)
continue|continue;
operator|(
name|void
operator|)
name|vxge_hal_vpath_stats_clear
argument_list|(
name|VXGE_HAL_VIRTUAL_PATH_HANDLE
argument_list|(
operator|&
name|hldev
operator|->
name|virtual_paths
index|[
name|i
index|]
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|status
operator|=
name|vxge_hal_mrpcim_stats_access
argument_list|(
name|devh
argument_list|,
name|VXGE_HAL_STATS_OP_CLEAR_ALL_STATS
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|&
name|stat
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_udp_rth_enable - Enable UDP/RTH.  * @devh: HAL device handle.  *  * enable udp rth  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_udp_rth_enable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|status
operator|=
name|__hal_vpath_udp_rth_set
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_stats
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_mac_configure - Initialize mac  * @hldev: hal device.  *  * Initializes mac  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_mac_configure
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|u32
name|i
decl_stmt|,
name|port_id
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_hal_mac_config_t
modifier|*
name|mac_config
init|=
operator|&
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|mac_config
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_MAC_MAX_WIRE_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|port_id
operator|=
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|port_id
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_en
operator|==
name|VXGE_HAL_WIRE_PORT_TMAC_DEFAULT
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_cfg0_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_TXMAC_CFG0_PORT_TMAC_EN
condition|)
block|{
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_en
operator|=
name|VXGE_HAL_WIRE_PORT_TMAC_ENABLE
expr_stmt|;
block|}
else|else
block|{
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_en
operator|=
name|VXGE_HAL_WIRE_PORT_TMAC_DISABLE
expr_stmt|;
block|}
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_en
operator|==
name|VXGE_HAL_WIRE_PORT_RMAC_DEFAULT
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg0_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_RXMAC_CFG0_PORT_RMAC_EN
condition|)
block|{
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_ENABLE
expr_stmt|;
block|}
else|else
block|{
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_en
operator|=
name|VXGE_HAL_WIRE_PORT_RMAC_DISABLE
expr_stmt|;
block|}
block|}
if|if
condition|(
operator|(
operator|!
operator|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_en
operator|)
operator|)
operator|&&
operator|(
operator|!
operator|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_en
operator|)
operator|)
condition|)
name|val64
operator|=
literal|0
expr_stmt|;
else|else
name|val64
operator|=
name|VXGE_HAL_XGMAC_MAIN_CFG_PORT_PORT_EN
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgmac_main_cfg_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|val64
condition|)
continue|continue;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg0_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_RMAC_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_RMAC_EN
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_STRIP_FCS_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_strip_fcs
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_STRIP_FCS
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_STRIP_FCS
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_DISCARD_PFRM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_discard_pfrm
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_DISCARD_PFRM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_DISCARD_PFRM
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|mtu
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_INITIAL_MTU
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_MAX_PYLD_LEN
argument_list|(
literal|0x3fff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_MAX_PYLD_LEN
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|mtu
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg0_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg2_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_prom_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PROM_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_prom_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG2_PORT_PROM_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG2_PORT_PROM_EN
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg2_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_GEN_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_gen_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_RCV_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_rcv_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_time
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_HIGH_PTIME
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_HIGH_PTIME
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_HIGH_PTIME
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_time
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_pause_time
operator|!=
name|VXGE_HAL_WIRE_PORT_RMAC_PAUSE_LIMITER_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|limiter_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_LIMITER_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_LIMITER_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|max_limit
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_RMAC_MAX_LIMIT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_MAX_LIMIT
argument_list|(
literal|0xff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_MAX_LIMIT
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|max_limit
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_link_util_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_util_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_TMAC_UTIL_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_LINK_UTIL_PORT_RMAC_UTIL_CFG
argument_list|(
literal|0xf
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_LINK_UTIL_PORT_RMAC_UTIL_CFG
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|rmac_util_period
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_link_util_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgmac_debounce_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|link_stability_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_LINK_STABILITY_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
operator|(
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_LINK_UP
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_LINK_DOWN
argument_list|(
literal|0xf
argument_list|)
operator|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_LINK_UP
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|link_stability_period
argument_list|)
operator||
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_LINK_DOWN
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|link_stability_period
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|port_stability_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_PORT_STABILITY_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
operator|(
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_PORT_UP
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_PORT_DOWN
argument_list|(
literal|0xf
argument_list|)
operator|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_PORT_UP
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|port_stability_period
argument_list|)
operator||
name|VXGE_HAL_XGMAC_DEBOUNCE_PORT_PERIOD_PORT_DOWN
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|port_stability_period
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgmac_debounce_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_cfg0_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_en
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_CFG0_PORT_TMAC_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_CFG0_PORT_TMAC_EN
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_pad
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_PAD_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_pad
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_CFG0_PORT_APPEND_PAD
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_CFG0_PORT_APPEND_PAD
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_pad_byte
operator|!=
name|VXGE_HAL_WIRE_PORT_TMAC_PAD_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_CFG0_PORT_PAD_BYTE
argument_list|(
literal|0xff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_TXMAC_CFG0_PORT_PAD_BYTE
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_pad_byte
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_cfg0_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_link_util_port
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_util_period
operator|!=
name|VXGE_HAL_WIRE_PORT_DEF_TMAC_UTIL_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_LINK_UTIL_PORT_TMAC_UTIL_CFG
argument_list|(
literal|0xf
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_TXMAC_LINK_UTIL_PORT_TMAC_UTIL_CFG
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|tmac_util_period
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_link_util_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|ratemgmt_cfg_port
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|autoneg_mode
operator|!=
name|VXGE_HAL_WIRE_PORT_AUTONEG_MODE_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RATEMGMT_CFG_PORT_MODE
argument_list|(
literal|0x3
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RATEMGMT_CFG_PORT_MODE
argument_list|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|autoneg_mode
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|autoneg_rate
operator|!=
name|VXGE_HAL_WIRE_PORT_AUTONEG_RATE_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|autoneg_rate
condition|)
name|val64
operator||=
name|VXGE_HAL_RATEMGMT_CFG_PORT_RATE
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RATEMGMT_CFG_PORT_RATE
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|fixed_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_FIXED_USE_FSM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|fixed_use_fsm
condition|)
name|val64
operator||=
name|VXGE_HAL_RATEMGMT_CFG_PORT_FIXED_USE_FSM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RATEMGMT_CFG_PORT_FIXED_USE_FSM
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|antp_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANTP_USE_FSM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|antp_use_fsm
condition|)
name|val64
operator||=
name|VXGE_HAL_RATEMGMT_CFG_PORT_ANTP_USE_FSM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RATEMGMT_CFG_PORT_ANTP_USE_FSM
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|anbe_use_fsm
operator|!=
name|VXGE_HAL_WIRE_PORT_ANBE_USE_FSM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|wire_port_config
index|[
name|i
index|]
operator|.
name|anbe_use_fsm
condition|)
name|val64
operator||=
name|VXGE_HAL_RATEMGMT_CFG_PORT_ANBE_USE_FSM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RATEMGMT_CFG_PORT_ANBE_USE_FSM
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|ratemgmt_cfg_port
index|[
name|port_id
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_en
operator|==
name|VXGE_HAL_SWITCH_PORT_TMAC_DEFAULT
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_cfg0_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_TXMAC_CFG0_PORT_TMAC_EN
condition|)
block|{
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_en
operator|=
name|VXGE_HAL_SWITCH_PORT_TMAC_ENABLE
expr_stmt|;
block|}
else|else
block|{
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_en
operator|=
name|VXGE_HAL_SWITCH_PORT_TMAC_DISABLE
expr_stmt|;
block|}
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_en
operator|==
name|VXGE_HAL_SWITCH_PORT_RMAC_DEFAULT
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg0_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_RXMAC_CFG0_PORT_RMAC_EN
condition|)
block|{
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_ENABLE
expr_stmt|;
block|}
else|else
block|{
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_en
operator|=
name|VXGE_HAL_SWITCH_PORT_RMAC_DISABLE
expr_stmt|;
block|}
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_en
operator|||
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_en
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg0_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_RMAC_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_RMAC_EN
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_strip_fcs
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_STRIP_FCS_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_strip_fcs
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_STRIP_FCS
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_STRIP_FCS
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_discard_pfrm
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_DISCARD_PFRM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_discard_pfrm
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_DISCARD_PFRM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_DISCARD_PFRM
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|mtu
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_INITIAL_MTU
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG0_PORT_MAX_PYLD_LEN
argument_list|(
literal|0x3fff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG0_PORT_MAX_PYLD_LEN
argument_list|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|mtu
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg0_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg2_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_prom_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PROM_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_prom_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_CFG2_PORT_PROM_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_CFG2_PORT_PROM_EN
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_cfg2_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_gen_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_GEN_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_gen_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_rcv_en
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_RCV_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_rcv_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_time
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_HIGH_PTIME
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_HIGH_PTIME
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_HIGH_PTIME
argument_list|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_time
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_pause_time
operator|!=
name|VXGE_HAL_SWITCH_PORT_RMAC_PAUSE_LIMITER_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|limiter_en
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_LIMITER_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_LIMITER_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|max_limit
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_RMAC_MAX_LIMIT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_MAX_LIMIT
argument_list|(
literal|0xff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_MAX_LIMIT
argument_list|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|max_limit
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_link_util_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_util_period
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_TMAC_UTIL_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_LINK_UTIL_PORT_RMAC_UTIL_CFG
argument_list|(
literal|0xf
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_LINK_UTIL_PORT_RMAC_UTIL_CFG
argument_list|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|rmac_util_period
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_link_util_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_cfg0_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_en
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_CFG0_PORT_TMAC_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_CFG0_PORT_TMAC_EN
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_pad
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_PAD_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_pad
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_CFG0_PORT_APPEND_PAD
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_CFG0_PORT_APPEND_PAD
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_pad_byte
operator|!=
name|VXGE_HAL_SWITCH_PORT_TMAC_PAD_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_CFG0_PORT_PAD_BYTE
argument_list|(
literal|0xff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_TXMAC_CFG0_PORT_PAD_BYTE
argument_list|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_pad_byte
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_cfg0_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_link_util_port
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_util_period
operator|!=
name|VXGE_HAL_SWITCH_PORT_DEF_TMAC_UTIL_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_LINK_UTIL_PORT_TMAC_UTIL_CFG
argument_list|(
literal|0xf
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_TXMAC_LINK_UTIL_PORT_TMAC_UTIL_CFG
argument_list|(
name|mac_config
operator|->
name|switch_port_config
operator|.
name|tmac_util_period
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_link_util_port
index|[
name|VXGE_HAL_MAC_SWITCH_PORT
index|]
argument_list|)
expr_stmt|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_gen_cfg1
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|tmac_perma_stop_en
operator|!=
name|VXGE_HAL_MAC_TMAC_PERMA_STOP_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_perma_stop_en
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_TMAC_PERMA_STOP_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_TMAC_PERMA_STOP_EN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tmac_tx_switch_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_TX_SWITCH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_tx_switch_dis
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_TX_SWITCH_DISABLE
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_TX_SWITCH_DISABLE
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tmac_lossy_switch_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_SWITCH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_lossy_switch_en
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_LOSSY_SWITCH
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_LOSSY_SWITCH
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tmac_lossy_switch_en
operator|!=
name|VXGE_HAL_MAC_TMAC_LOSSY_WIRE_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_lossy_wire_en
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_LOSSY_WIRE
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_LOSSY_WIRE
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_WIRE_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_BLOCK_BCAST_TO_WIRE
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_BLOCK_BCAST_TO_WIRE
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tmac_bcast_to_wire_dis
operator|!=
name|VXGE_HAL_MAC_TMAC_BCAST_TO_SWITCH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_bcast_to_switch_dis
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_BLOCK_BCAST_TO_SWITCH
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_BLOCK_BCAST_TO_SWITCH
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tmac_host_append_fcs_en
operator|!=
name|VXGE_HAL_MAC_TMAC_HOST_APPEND_FCS_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tmac_host_append_fcs_en
condition|)
name|val64
operator||=
name|VXGE_HAL_TXMAC_GEN_CFG1_HOST_APPEND_FCS
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TXMAC_GEN_CFG1_HOST_APPEND_FCS
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|txmac_gen_cfg1
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg0
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|rpa_ignore_frame_err
operator|!=
name|VXGE_HAL_MAC_RPA_IGNORE_FRAME_ERR_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_ignore_frame_err
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_IGNORE_FRAME_ERR
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_IGNORE_FRAME_ERR
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_SNAP_AB_N_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_support_snap_ab_n
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SUPPORT_SNAP_AB_N
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SUPPORT_SNAP_AB_N
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_search_for_hao
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_HAO_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_search_for_hao
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SEARCH_FOR_HAO
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SEARCH_FOR_HAO
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_support_ipv6_mobile_hdrs
operator|!=
name|VXGE_HAL_MAC_RPA_SUPPORT_IPV6_MOBILE_HDRS_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_support_ipv6_mobile_hdrs
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SUPPORT_MOBILE_IPV6_HDRS
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SUPPORT_MOBILE_IPV6_HDRS
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_ipv6_stop_searching
operator|!=
name|VXGE_HAL_MAC_RPA_IPV6_STOP_SEARCHING_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_ipv6_stop_searching
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_IPV6_STOP_SEARCHING
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_IPV6_STOP_SEARCHING
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_no_ps_if_unknown
operator|!=
name|VXGE_HAL_MAC_RPA_NO_PS_IF_UNKNOWN_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_no_ps_if_unknown
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_NO_PS_IF_UNKNOWN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_NO_PS_IF_UNKNOWN
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_search_for_etype
operator|!=
name|VXGE_HAL_MAC_RPA_SEARCH_FOR_ETYPE_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_search_for_etype
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SEARCH_FOR_ETYPE
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG0_SEARCH_FOR_ETYPE
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg0
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|fau_pa_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l4_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_l4_COMP_CSUM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l4_comp_csum
condition|)
name|val64
operator||=
name|VXGE_HAL_FAU_PA_CFG_REPL_L4_COMP_CSUM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_FAU_PA_CFG_REPL_L4_COMP_CSUM
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l3_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L3_INCL_CF_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l3_incl_cf
condition|)
name|val64
operator||=
name|VXGE_HAL_FAU_PA_CFG_REPL_L3_INCL_CF
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_FAU_PA_CFG_REPL_L3_INCL_CF
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l3_comp_csum
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_l3_COMP_CSUM_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l3_comp_csum
condition|)
name|val64
operator||=
name|VXGE_HAL_FAU_PA_CFG_REPL_L3_COMP_CSUM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_FAU_PA_CFG_REPL_L3_COMP_CSUM
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|fau_pa_cfg
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg1
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv4_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_TCP_INCL_PH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv4_tcp_incl_ph
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV4_TCP_INCL_PH
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV4_TCP_INCL_PH
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv6_tcp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_TCP_INCL_PH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv6_tcp_incl_ph
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV6_TCP_INCL_PH
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV6_TCP_INCL_PH
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv4_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV4_UDP_INCL_PH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv4_udp_incl_ph
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV4_UDP_INCL_PH
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV4_UDP_INCL_PH
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv6_udp_incl_ph
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_IPV6_UDP_INCL_PH_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_ipv6_udp_incl_ph
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV6_UDP_INCL_PH
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_IPV6_UDP_INCL_PH
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l4_incl_cf
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_L4_INCL_CF_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_l4_incl_cf
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_L4_INCL_CF
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_L4_INCL_CF
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_strip_vlan_tag
operator|!=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|rpa_repl_strip_vlan_tag
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_STRIP_VLAN_TAG
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_STRIP_VLAN_TAG
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg1
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xmac_gen_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|network_stability_period
operator|!=
name|VXGE_HAL_MAC_DEF_NETWORK_STABILITY_PERIOD
condition|)
block|{
name|val64
operator|&=
operator|~
operator|(
name|VXGE_HAL_XMAC_GEN_CFG_PERIOD_NTWK_DOWN
argument_list|(
literal|0xf
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_CFG_PERIOD_NTWK_UP
argument_list|(
literal|0xf
argument_list|)
operator|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_XMAC_GEN_CFG_PERIOD_NTWK_DOWN
argument_list|(
name|mac_config
operator|->
name|network_stability_period
argument_list|)
operator||
name|VXGE_HAL_XMAC_GEN_CFG_PERIOD_NTWK_UP
argument_list|(
name|mac_config
operator|->
name|network_stability_period
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xmac_gen_cfg
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|tpa_global_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|mac_config
operator|->
name|tpa_support_snap_ab_n
operator|!=
name|VXGE_HAL_MAC_TPA_SUPPORT_SNAP_AB_N_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tpa_support_snap_ab_n
condition|)
name|val64
operator||=
name|VXGE_HAL_TPA_GLOBAL_CFG_SUPPORT_SNAP_AB_N
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TPA_GLOBAL_CFG_SUPPORT_SNAP_AB_N
expr_stmt|;
block|}
if|if
condition|(
name|mac_config
operator|->
name|tpa_ecc_enable_n
operator|!=
name|VXGE_HAL_MAC_TPA_ECC_ENABLE_N_DEFAULT
condition|)
block|{
if|if
condition|(
name|mac_config
operator|->
name|tpa_ecc_enable_n
condition|)
name|val64
operator||=
name|VXGE_HAL_TPA_GLOBAL_CFG_ECC_ENABLE_N
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_TPA_GLOBAL_CFG_ECC_ENABLE_N
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|tpa_global_cfg
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_lag_configure - Initialize LAG registers  * @hldev: hal device.  *  * Initializes LAG registers  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_lag_configure
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|u64
name|mac_addr
decl_stmt|;
name|u32
name|i
decl_stmt|,
name|j
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_hal_lag_config_t
modifier|*
name|lag_config
init|=
operator|&
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|lag_config
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|lag_en
operator|==
name|VXGE_HAL_LAG_LAG_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_LAG_CFG_EN
condition|)
name|lag_config
operator|->
name|lag_en
operator|=
name|VXGE_HAL_LAG_LAG_EN_ENABLE
expr_stmt|;
else|else
name|lag_config
operator|->
name|lag_en
operator|=
name|VXGE_HAL_LAG_LAG_EN_DISABLE
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lag_en
operator|==
name|VXGE_HAL_LAG_LAG_EN_DISABLE
condition|)
block|{
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_LAG_CFG_EN
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_CFG_EN
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_cfg
argument_list|)
expr_stmt|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lag_mode
operator|!=
name|VXGE_HAL_LAG_LAG_MODE_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_CFG_MODE
argument_list|(
literal|0x3
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_CFG_MODE
argument_list|(
name|lag_config
operator|->
name|lag_mode
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|lag_config
operator|->
name|lag_mode
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_LAG_CFG_GET_MODE
argument_list|(
name|val64
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|tx_discard
operator|!=
name|VXGE_HAL_LAG_TX_DISCARD_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|tx_discard
operator|==
name|VXGE_HAL_LAG_TX_DISCARD_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_CFG_TX_DISCARD_BEHAV
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_CFG_TX_DISCARD_BEHAV
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|rx_discard
operator|!=
name|VXGE_HAL_LAG_RX_DISCARD_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|rx_discard
operator|==
name|VXGE_HAL_LAG_RX_DISCARD_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_CFG_RX_DISCARD_BEHAV
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_CFG_RX_DISCARD_BEHAV
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|sl_mode_config
operator|.
name|pref_indiv_port
operator|!=
name|VXGE_HAL_LAG_PREF_INDIV_PORT_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|sl_mode_config
operator|.
name|pref_indiv_port
operator|==
name|VXGE_HAL_LAG_RX_DISCARD_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_CFG_PREF_INDIV_PORT_NUM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_CFG_PREF_INDIV_PORT_NUM
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_cfg
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_tx_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|incr_tx_aggr_stats
operator|!=
name|VXGE_HAL_LAG_INCR_TX_AGGR_STATS_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|incr_tx_aggr_stats
operator|==
name|VXGE_HAL_LAG_INCR_TX_AGGR_STATS_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_TX_CFG_INCR_TX_AGGR_STATS
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TX_CFG_INCR_TX_AGGR_STATS
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_alg_sel
operator|!=
name|VXGE_HAL_LAG_DISTRIB_ALG_SEL_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TX_CFG_DISTRIB_ALG_SEL
argument_list|(
literal|0x3
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TX_CFG_DISTRIB_ALG_SEL
argument_list|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_alg_sel
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_dest
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_distrib_dest
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_alg_sel
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_LAG_TX_CFG_GET_DISTRIB_ALG_SEL
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_dest
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_distrib_dest
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_remap_if_fail
operator|!=
name|VXGE_HAL_LAG_DISTRIB_REMAP_IF_FAIL_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|distrib_remap_if_fail
operator|==
name|VXGE_HAL_LAG_DISTRIB_REMAP_IF_FAIL_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_TX_CFG_DISTRIB_REMAP_IF_FAIL
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TX_CFG_DISTRIB_REMAP_IF_FAIL
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|coll_max_delay
operator|!=
name|VXGE_HAL_LAG_DEF_COLL_MAX_DELAY
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TX_CFG_COLL_MAX_DELAY
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TX_CFG_DISTRIB_ALG_SEL
argument_list|(
name|lag_config
operator|->
name|la_mode_config
operator|.
name|coll_max_delay
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_tx_cfg
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_active_passive_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|hot_standby
operator|!=
name|VXGE_HAL_LAG_HOT_STANDBY_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|hot_standby
operator|==
name|VXGE_HAL_LAG_HOT_STANDBY_KEEP_UP_PORT
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_HOT_STANDBY
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_HOT_STANDBY
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|lacp_decides
operator|!=
name|VXGE_HAL_LAG_LACP_DECIDES_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|lacp_decides
operator|==
name|VXGE_HAL_LAG_LACP_DECIDES_ENBALE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_LACP_DECIDES
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_LACP_DECIDES
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|pref_active_port
operator|!=
name|VXGE_HAL_LAG_PREF_ACTIVE_PORT_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|pref_active_port
operator|==
name|VXGE_HAL_LAG_PREF_ACTIVE_PORT_1
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_PREF_ACTIVE_PORT_NUM
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_PREF_ACTIVE_PORT_NUM
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|auto_failback
operator|!=
name|VXGE_HAL_LAG_AUTO_FAILBACK_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|auto_failback
operator|==
name|VXGE_HAL_LAG_AUTO_FAILBACK_ENBALE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_AUTO_FAILBACK
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_AUTO_FAILBACK
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|failback_en
operator|!=
name|VXGE_HAL_LAG_FAILBACK_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|failback_en
operator|==
name|VXGE_HAL_LAG_FAILBACK_EN_ENBALE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_FAILBACK_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_FAILBACK_EN
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|cold_failover_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_COLD_FAILOVER_TIMEOUT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_COLD_FAILOVER_TIMEOUT
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_ACTIVE_PASSIVE_CFG_COLD_FAILOVER_TIMEOUT
argument_list|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|cold_failover_timeout
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_active_passive_cfg
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_lacp_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|lacp_en
operator|!=
name|VXGE_HAL_LAG_LACP_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|lacp_en
operator|==
name|VXGE_HAL_LAG_LACP_EN_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_LACP_CFG_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_LACP_CFG_EN
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|lacp_begin
operator|!=
name|VXGE_HAL_LAG_LACP_BEGIN_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|lacp_begin
operator|==
name|VXGE_HAL_LAG_LACP_BEGIN_RESET
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_LACP_CFG_LACP_BEGIN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_LACP_CFG_LACP_BEGIN
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|discard_lacp
operator|!=
name|VXGE_HAL_LAG_DISCARD_LACP_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|discard_lacp
operator|==
name|VXGE_HAL_LAG_DISCARD_LACP_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_LACP_CFG_DISCARD_LACP
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_LACP_CFG_DISCARD_LACP
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|liberal_len_chk
operator|!=
name|VXGE_HAL_LAG_LIBERAL_LEN_CHK_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|liberal_len_chk
operator|==
name|VXGE_HAL_LAG_LIBERAL_LEN_CHK_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_LACP_CFG_LIBERAL_LEN_CHK
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_LACP_CFG_LIBERAL_LEN_CHK
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_lacp_cfg
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_marker_cfg
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|marker_gen_recv_en
operator|!=
name|VXGE_HAL_LAG_MARKER_GEN_RECV_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|marker_gen_recv_en
operator|==
name|VXGE_HAL_LAG_MARKER_GEN_RECV_EN_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_MARKER_CFG_GEN_RCVR_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_MARKER_CFG_GEN_RCVR_EN
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|marker_resp_en
operator|!=
name|VXGE_HAL_LAG_MARKER_RESP_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|marker_resp_en
operator|==
name|VXGE_HAL_LAG_MARKER_RESP_EN_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_MARKER_CFG_RESP_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_MARKER_CFG_RESP_EN
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|marker_resp_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_MARKER_RESP_TIMEOUT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_MARKER_CFG_RESP_TIMEOUT
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_MARKER_CFG_RESP_TIMEOUT
argument_list|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|marker_resp_timeout
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|slow_proto_mrkr_min_interval
operator|!=
name|VXGE_HAL_LAG_DEF_SLOW_PROTO_MRKR_MIN_INTERVAL
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_MARKER_CFG_SLOW_PROTO_MRKR_MIN_INTERVAL
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_MARKER_CFG_SLOW_PROTO_MRKR_MIN_INTERVAL
argument_list|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|slow_proto_mrkr_min_interval
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|throttle_mrkr_resp
operator|!=
name|VXGE_HAL_LAG_THROTTLE_MRKR_RESP_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|lacp_config
operator|.
name|throttle_mrkr_resp
operator|==
name|VXGE_HAL_LAG_THROTTLE_MRKR_RESP_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_MARKER_CFG_THROTTLE_MRKR_RESP
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_MARKER_CFG_THROTTLE_MRKR_RESP
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_marker_cfg
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_LAG_PORT_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|lag_en
operator|!=
name|VXGE_HAL_LAG_PORT_LAG_EN_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|lag_en
operator|==
name|VXGE_HAL_LAG_PORT_LAG_EN_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_CFG_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_CFG_EN
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|discard_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_SLOW_PROTO_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|discard_slow_proto
operator|==
name|VXGE_HAL_LAG_PORT_DISCARD_SLOW_PROTO_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_CFG_DISCARD_SLOW_PROTO
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_CFG_DISCARD_SLOW_PROTO
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|host_chosen_aggr
operator|!=
name|VXGE_HAL_LAG_PORT_HOST_CHOSEN_AGGR_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|host_chosen_aggr
operator|==
name|VXGE_HAL_LAG_PORT_HOST_CHOSEN_AGGR_1
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_CFG_HOST_CHOSEN_AGGR
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_CFG_HOST_CHOSEN_AGGR
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|discard_unknown_slow_proto
operator|!=
name|VXGE_HAL_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|discard_unknown_slow_proto
operator|==
name|VXGE_HAL_LAG_PORT_DISCARD_UNKNOWN_SLOW_PROTO_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_CFG_DISCARD_UNKNOWN_SLOW_PROTO
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_CFG_DISCARD_UNKNOWN_SLOW_PROTO
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_actor_admin_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_port_num
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_PORT_NUM
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_PORT_NUM
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_PORT_NUM
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_port_num
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_port_priority
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_PORT_PRIORITY
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_PORT_PRI
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_PORT_PRI
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_port_priority
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_key_10g
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_KEY_10G
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_KEY_10G
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_KEY_10G
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_key_10g
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_key_1g
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_ACTOR_KEY_1G
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_KEY_1G
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_CFG_KEY_1G
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_key_1g
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_actor_admin_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_actor_admin_state
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_lacp_activity
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_ACTIVE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_LACP_ACTIVITY
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_LACP_ACTIVITY
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_ACTIVITY_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_lacp_timeout
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_LACP_TIMEOUT_SHORT
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_LACP_TIMEOUT
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_LACP_TIMEOUT
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_AGGREGATION_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_aggregation
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_AGGREGATION_AGGREGATEABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_AGGREGATION
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_AGGREGATION
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_SYNCHRONIZATION_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_aggregation
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_SYNCHRONIZATION_IN_SYNC
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_SYNCHRONIZATION
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_SYNCHRONIZATION
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_COLLECTING_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_collecting
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_COLLECTING_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_COLLECTING
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_COLLECTING
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_distributing
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_DISTRIBUTING_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_DISTRIBUTING
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_DISTRIBUTING
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_DEFAULTED_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_defaulted
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_NOT_DEFAULTED
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_DEFAULTED
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_DEFAULTED
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_expired
operator|!=
name|VXGE_HAL_LAG_PORT_ACTOR_EXPIRED_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_expired
operator|==
name|VXGE_HAL_LAG_PORT_ACTOR_NOT_EXPIRED
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_EXPIRED
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_ACTOR_ADMIN_STATE_EXPIRED
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_actor_admin_state
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_partner_admin_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_sys_pri
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_SYS_PRI
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_SYS_PRI
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_SYS_PRI
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_sys_pri
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_key
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_KEY
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_KEY
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_KEY
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_key
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_port_num
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_PORT_NUM
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_PORT_NUM
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_PORT_NUM
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_port_num
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_port_priority
operator|!=
name|VXGE_HAL_LAG_PORT_DEF_PARTNER_PORT_PRIORITY
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_PORT_PRI
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_CFG_PORT_PRI
argument_list|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|actor_port_priority
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_partner_admin_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_partner_admin_state
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_lacp_activity
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_lacp_activity
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_ACTIVE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_LACP_ACTIVITY
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_LACP_ACTIVITY
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_lacp_timeout
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_ACTIVITY_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_lacp_timeout
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_LACP_TIMEOUT_SHORT
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_LACP_TIMEOUT
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_LACP_TIMEOUT
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_aggregation
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_AGGREGATION_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_aggregation
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_AGGREGATION_AGGREGATEABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_AGGREGATION
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_AGGREGATION
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_synchronization
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_SYNCHRONIZATION_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_aggregation
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_SYNCHRONIZATION_IN_SYNC
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_SYNCHRONIZATION
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_SYNCHRONIZATION
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_collecting
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_COLLECTING_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_collecting
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_COLLECTING_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_COLLECTING
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_COLLECTING
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_distributing
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_distributing
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_DISTRIBUTING_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_DISTRIBUTING
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_DISTRIBUTING
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_defaulted
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_DEFAULTED_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_defaulted
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_NOT_DEFAULTED
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_DEFAULTED
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_DEFAULTED
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_expired
operator|!=
name|VXGE_HAL_LAG_PORT_PARTNER_EXPIRED_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_expired
operator|==
name|VXGE_HAL_LAG_PORT_PARTNER_NOT_EXPIRED
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_EXPIRED
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_STATE_EXPIRED
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_partner_admin_state
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_partner_admin_sys_id
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|mac_addr
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|VXGE_HAL_ETH_ALEN
condition|;
name|j
operator|++
control|)
block|{
name|mac_addr
operator|<<=
literal|8
expr_stmt|;
name|mac_addr
operator||=
operator|(
name|u8
operator|)
name|lag_config
operator|->
name|port_config
index|[
name|i
index|]
operator|.
name|partner_mac_addr
index|[
name|j
index|]
expr_stmt|;
block|}
if|if
condition|(
name|mac_addr
operator|!=
literal|0xffffffffffffULL
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_SYS_ID_ADDR
argument_list|(
literal|0xffffffffffffULL
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_PORT_PARTNER_ADMIN_SYS_ID_ADDR
argument_list|(
name|mac_addr
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_port_partner_admin_sys_id
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_LAG_AGGR_MAX_PORTS
condition|;
name|i
operator|++
control|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_id_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ID_CFG_ID
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ID_CFG_ID
argument_list|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|aggr_id
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_id_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_addr_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|mac_addr
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|VXGE_HAL_ETH_ALEN
condition|;
name|j
operator|++
control|)
block|{
name|mac_addr
operator|<<=
literal|8
expr_stmt|;
name|mac_addr
operator||=
operator|(
name|u8
operator|)
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|mac_addr
index|[
name|j
index|]
expr_stmt|;
block|}
if|if
condition|(
name|mac_addr
operator|!=
literal|0xffffffffffffULL
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ADDR_CFG_ADDR
argument_list|(
literal|0xffffffffffffULL
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ADDR_CFG_ADDR
argument_list|(
name|mac_addr
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_AGGR_USE_PORT_MAC_ADDR_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|use_port_mac_addr
operator|==
name|VXGE_HAL_LAG_AGGR_USE_PORT_MAC_ADDR_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ADDR_CFG_USE_PORT_ADDR
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ADDR_CFG_USE_PORT_ADDR
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_AGGR_MAC_ADDR_SEL_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|mac_addr_sel
operator|==
name|VXGE_HAL_LAG_AGGR_MAC_ADDR_SEL_PORT_1
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ADDR_CFG_ADDR_SEL
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ADDR_CFG_ADDR_SEL
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_addr_cfg
index|[
name|i
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|admin_key
operator|==
name|VXGE_HAL_LAG_AGGR_DEF_ADMIN_KEY
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_admin_key
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ADMIN_KEY_KEY
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ADMIN_KEY_KEY
argument_list|(
name|lag_config
operator|->
name|aggr_config
index|[
name|i
index|]
operator|.
name|admin_key
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_admin_key
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|lag_config
operator|->
name|sys_pri
operator|!=
name|VXGE_HAL_LAG_DEF_SYS_PRI
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_sys_cfg
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_SYS_CFG_SYS_PRI
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_SYS_CFG_SYS_PRI
argument_list|(
name|lag_config
operator|->
name|sys_pri
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_sys_cfg
argument_list|)
expr_stmt|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_sys_id
argument_list|)
expr_stmt|;
name|mac_addr
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|VXGE_HAL_ETH_ALEN
condition|;
name|j
operator|++
control|)
block|{
name|mac_addr
operator|<<=
literal|8
expr_stmt|;
name|mac_addr
operator||=
operator|(
name|u8
operator|)
name|lag_config
operator|->
name|mac_addr
index|[
name|j
index|]
expr_stmt|;
block|}
if|if
condition|(
name|mac_addr
operator|!=
literal|0xffffffffffffULL
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_SYS_ID_ADDR
argument_list|(
literal|0xffffffffffffULL
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_SYS_ID_ADDR
argument_list|(
name|mac_addr
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|use_port_mac_addr
operator|!=
name|VXGE_HAL_LAG_USE_PORT_MAC_ADDR_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|use_port_mac_addr
operator|==
name|VXGE_HAL_LAG_USE_PORT_MAC_ADDR_ENABLE
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_SYS_ID_USE_PORT_ADDR
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_SYS_ID_USE_PORT_ADDR
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|mac_addr_sel
operator|!=
name|VXGE_HAL_LAG_MAC_ADDR_SEL_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|mac_addr_sel
operator|==
name|VXGE_HAL_LAG_MAC_ADDR_SEL_PORT_1
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_SYS_ID_ADDR_SEL
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_SYS_ID_ADDR_SEL
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_sys_id
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_alt_admin_key
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|alt_admin_key
operator|!=
name|VXGE_HAL_LAG_DEF_ALT_ADMIN_KEY
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ALT_ADMIN_KEY_KEY
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ALT_ADMIN_KEY_KEY
argument_list|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|alt_admin_key
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|alt_aggr
operator|!=
name|VXGE_HAL_LAG_ALT_AGGR_DEFAULT
condition|)
block|{
if|if
condition|(
name|lag_config
operator|->
name|ap_mode_config
operator|.
name|alt_aggr
operator|==
name|VXGE_HAL_LAG_ALT_AGGR_1
condition|)
name|val64
operator||=
name|VXGE_HAL_LAG_AGGR_ALT_ADMIN_KEY_ALT_AGGR
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_AGGR_ALT_ADMIN_KEY_ALT_AGGR
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_aggr_alt_admin_key
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_timer_cfg_1
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|fast_per_time
operator|!=
name|VXGE_HAL_LAG_DEF_FAST_PER_TIME
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_1_FAST_PER
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_1_FAST_PER
argument_list|(
name|lag_config
operator|->
name|fast_per_time
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|slow_per_time
operator|!=
name|VXGE_HAL_LAG_DEF_SLOW_PER_TIME
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_1_SLOW_PER
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_1_SLOW_PER
argument_list|(
name|lag_config
operator|->
name|slow_per_time
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|short_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_SHORT_TIMEOUT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_1_SHORT_TIMEOUT
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_1_SHORT_TIMEOUT
argument_list|(
name|lag_config
operator|->
name|short_timeout
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|long_timeout
operator|!=
name|VXGE_HAL_LAG_DEF_LONG_TIMEOUT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_1_LONG_TIMEOUT
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_1_LONG_TIMEOUT
argument_list|(
name|lag_config
operator|->
name|short_timeout
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_timer_cfg_1
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_timer_cfg_2
argument_list|)
expr_stmt|;
if|if
condition|(
name|lag_config
operator|->
name|churn_det_time
operator|!=
name|VXGE_HAL_LAG_DEF_CHURN_DET_TIME
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_2_CHURN_DET
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_2_CHURN_DET
argument_list|(
name|lag_config
operator|->
name|churn_det_time
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|aggr_wait_time
operator|!=
name|VXGE_HAL_LAG_DEF_AGGR_WAIT_TIME
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_2_AGGR_WAIT
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_2_AGGR_WAIT
argument_list|(
name|lag_config
operator|->
name|slow_per_time
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|short_timer_scale
operator|!=
name|VXGE_HAL_LAG_SHORT_TIMER_SCALE_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_2_SHORT_TIMER_SCALE
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_2_SHORT_TIMER_SCALE
argument_list|(
name|lag_config
operator|->
name|short_timer_scale
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|lag_config
operator|->
name|long_timer_scale
operator|!=
name|VXGE_HAL_LAG_LONG_TIMER_SCALE_DEFAULT
condition|)
block|{
name|val64
operator|&=
operator|~
name|VXGE_HAL_LAG_TIMER_CFG_2_LONG_TIMER_SCALE
argument_list|(
literal|0xffff
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_LAG_TIMER_CFG_2_LONG_TIMER_SCALE
argument_list|(
name|lag_config
operator|->
name|long_timer_scale
argument_list|)
expr_stmt|;
block|}
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|lag_timer_cfg_2
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_get_vpd_data - Getting vpd_data.  *  * @hldev: HAL device handle.  *  * Getting  product name and serial number from vpd capabilites structure  *  */
end_comment

begin_function
name|void
name|__hal_mrpcim_get_vpd_data
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|)
block|{
name|u8
modifier|*
name|vpd_data
decl_stmt|;
name|u16
name|data
decl_stmt|;
name|u32
name|data32
decl_stmt|;
name|u32
name|i
decl_stmt|,
name|j
decl_stmt|,
name|count
decl_stmt|,
name|fail
init|=
literal|0
decl_stmt|;
name|u32
name|addr_offset
decl_stmt|,
name|data_offset
decl_stmt|;
name|u32
name|max_count
init|=
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|device_poll_millis
operator|*
literal|10
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|)
expr_stmt|;
name|addr_offset
operator|=
name|hldev
operator|->
name|pci_caps
operator|.
name|vpd_cap_offset
operator|+
name|vxge_offsetof
argument_list|(
name|vxge_hal_vpid_capability_le_t
argument_list|,
name|vpd_address
argument_list|)
expr_stmt|;
name|data_offset
operator|=
name|hldev
operator|->
name|pci_caps
operator|.
name|vpd_cap_offset
operator|+
name|vxge_offsetof
argument_list|(
name|vxge_hal_vpid_capability_le_t
argument_list|,
name|vpd_data
argument_list|)
expr_stmt|;
name|vxge_os_strlcpy
argument_list|(
operator|(
name|char
operator|*
operator|)
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|product_name
argument_list|,
literal|"10 Gigabit Ethernet Adapter"
argument_list|,
sizeof|sizeof
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|product_name
argument_list|)
argument_list|)
expr_stmt|;
name|vxge_os_strlcpy
argument_list|(
operator|(
name|char
operator|*
operator|)
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|serial_num
argument_list|,
literal|"not available"
argument_list|,
sizeof|sizeof
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|serial_num
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|func_id
operator|!=
literal|0
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return;
block|}
name|vpd_data
operator|=
operator|(
name|u8
operator|*
operator|)
name|vxge_os_malloc
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|VXGE_HAL_VPD_BUFFER_SIZE
operator|+
literal|16
argument_list|)
expr_stmt|;
if|if
condition|(
name|vpd_data
operator|==
name|NULL
condition|)
return|return;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_VPD_BUFFER_SIZE
condition|;
name|i
operator|+=
literal|4
control|)
block|{
name|vxge_os_pci_write16
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|cfgh
argument_list|,
name|addr_offset
argument_list|,
operator|(
name|u16
operator|)
name|i
argument_list|)
expr_stmt|;
for|for
control|(
name|count
operator|=
literal|0
init|;
name|count
operator|<
name|max_count
condition|;
name|count
operator|++
control|)
block|{
name|vxge_os_udelay
argument_list|(
literal|100
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|__hal_vpath_pci_read
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|addr_offset
argument_list|,
literal|2
argument_list|,
operator|&
name|data
argument_list|)
expr_stmt|;
if|if
condition|(
name|data
operator|&
name|VXGE_HAL_PCI_VPID_COMPL_FALG
condition|)
break|break;
block|}
if|if
condition|(
name|count
operator|>=
name|max_count
condition|)
block|{
name|vxge_hal_info_log_device
argument_list|(
literal|"%s:ERR, \ 			    Reading VPD data failed"
argument_list|,
name|__func__
argument_list|)
expr_stmt|;
name|fail
operator|=
literal|1
expr_stmt|;
break|break;
block|}
operator|(
name|void
operator|)
name|__hal_vpath_pci_read
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|data_offset
argument_list|,
literal|4
argument_list|,
operator|&
name|data32
argument_list|)
expr_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
literal|4
condition|;
name|j
operator|++
control|)
block|{
name|vpd_data
index|[
name|i
operator|+
name|j
index|]
operator|=
call|(
name|u8
call|)
argument_list|(
name|data32
operator|&
literal|0xff
argument_list|)
expr_stmt|;
name|data32
operator|>>=
literal|8
expr_stmt|;
block|}
block|}
if|if
condition|(
operator|!
name|fail
condition|)
block|{
comment|/* read serial number of adapter */
for|for
control|(
name|count
operator|=
literal|0
init|;
name|count
operator|<
name|VXGE_HAL_VPD_BUFFER_SIZE
condition|;
name|count
operator|++
control|)
block|{
if|if
condition|(
operator|(
name|vpd_data
index|[
name|count
index|]
operator|==
literal|'S'
operator|)
operator|&&
operator|(
name|vpd_data
index|[
name|count
operator|+
literal|1
index|]
operator|==
literal|'N'
operator|)
operator|&&
operator|(
name|vpd_data
index|[
name|count
operator|+
literal|2
index|]
operator|<
name|VXGE_HAL_VPD_LENGTH
operator|)
condition|)
block|{
name|vxge_os_memzero
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|serial_num
argument_list|,
name|VXGE_HAL_VPD_LENGTH
argument_list|)
expr_stmt|;
name|vxge_os_memcpy
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|serial_num
argument_list|,
operator|&
name|vpd_data
index|[
name|count
operator|+
literal|3
index|]
argument_list|,
name|vpd_data
index|[
name|count
operator|+
literal|2
index|]
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
if|if
condition|(
name|vpd_data
index|[
literal|1
index|]
operator|<
name|VXGE_HAL_VPD_LENGTH
condition|)
block|{
name|vxge_os_memzero
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|product_name
argument_list|,
name|vpd_data
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|vxge_os_memcpy
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|vpd_data
operator|.
name|product_name
argument_list|,
operator|&
name|vpd_data
index|[
literal|3
index|]
argument_list|,
name|vpd_data
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
block|}
name|vxge_os_free
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|vpd_data
argument_list|,
name|VXGE_HAL_VPD_BUFFER_SIZE
operator|+
literal|16
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|fail
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_rts_table_access - Get/Set the entries from RTS access tables  * @devh: Device handle.  * @action: Write Enable. 0 - Read Operation; 1 - Write Operation  * @rts_table: Data structure select. Identifies the RTS data structure  *		(i.e. lookup table) to access.  *		0; DA; Destination Address  *		1; VID; VLAN ID  *		2; ETYPE; Ethertype  *		3; PN; Layer 4 Port Number  *		4; RANGE_PN; Range of Layer 4 Port Numbers  *		5; RTH_GEN_CFG; Receive-Traffic Hashing General Configuration  *		6; RTH_SOLO_IT; Receive-Traffic Hashing Indirection Table  *		(Single Bucket Programming)  *		7; RTH_JHASH_CFG; Receive-Traffic Hashing Jenkins Hash Config  *		8; RTH_MASK; Receive-Traffic Hashing Mask  *		9; RTH_KEY; Receive-Traffic Hashing Key  *		10; QOS; VLAN Quality of Service  *		11; DS; IP Differentiated Services  * @offset: Offset (into the data structure) to execute the command on.  * @data1: Pointer to the data 1 to be read from the table  * @data2: Pointer to the data 2 to be read from the table  * @vpath_vector: Identifies the candidate VPATH(s) for the given entry.  *		These VPATH(s) determine the set of target destinations for  *		a frame that matches this steering entry. Any or all bits  *		can be set, which handles 16+1 virtual paths in an 'n-hot'  *		basis. VPATH 0 is the MSbit.  *  * Read from the RTS table  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_rts_table_access
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|action
parameter_list|,
name|u32
name|rts_table
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u64
modifier|*
name|data1
parameter_list|,
name|u64
modifier|*
name|data2
parameter_list|,
name|u64
modifier|*
name|vpath_vector
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|devh
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|data1
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|data2
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|vpath_vector
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|hldev
operator|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", action = %d, rts_table = %d, "
literal|"offset = %d, data1 = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"data2 = 0x"
name|VXGE_OS_STXFMT
literal|", vpath_vector = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|action
argument_list|,
name|rts_table
argument_list|,
name|offset
argument_list|,
operator|(
name|ptr_t
operator|)
name|data1
argument_list|,
operator|(
name|ptr_t
operator|)
name|data2
argument_list|,
operator|(
name|ptr_t
operator|)
name|vpath_vector
argument_list|)
expr_stmt|;
name|val64
operator|=
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL
argument_list|(
name|rts_table
argument_list|)
operator||
name|VXGE_HAL_RTS_MGR_STEER_CTRL_STROBE
operator||
name|VXGE_HAL_RTS_MGR_STEER_CTRL_OFFSET
argument_list|(
name|offset
argument_list|)
expr_stmt|;
if|if
condition|(
name|action
operator|==
name|VXGE_HAL_RTS_MGR_STEER_CTRL_WE_WRITE
condition|)
name|val64
operator|=
name|VXGE_HAL_RTS_MGR_STEER_CTRL_WE
expr_stmt|;
if|if
condition|(
operator|(
name|rts_table
operator|==
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL_RTH_SOLO_IT
operator|)
operator|||
operator|(
name|rts_table
operator|==
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL_RTH_MULTI_IT
operator|)
operator|||
operator|(
name|rts_table
operator|==
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL_RTH_MASK
operator|)
operator|||
operator|(
name|rts_table
operator|==
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL_RTH_KEY
operator|)
condition|)
block|{
name|val64
operator||=
name|VXGE_HAL_RTS_MGR_STEER_CTRL_TABLE_SEL
expr_stmt|;
block|}
name|vxge_hal_pio_mem_write32_lower
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|bVAL32
argument_list|(
name|val64
argument_list|,
literal|32
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_ctrl
argument_list|)
expr_stmt|;
name|vxge_os_wmb
argument_list|()
expr_stmt|;
name|vxge_hal_pio_mem_write32_upper
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|(
name|u32
operator|)
name|bVAL32
argument_list|(
name|val64
argument_list|,
literal|0
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_ctrl
argument_list|)
expr_stmt|;
name|vxge_os_wmb
argument_list|()
expr_stmt|;
name|status
operator|=
name|vxge_hal_device_register_poll
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_ctrl
argument_list|,
literal|0
argument_list|,
name|VXGE_HAL_RTS_MGR_STEER_CTRL_STROBE
argument_list|,
name|WAIT_FACTOR
operator|*
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|device_poll_millis
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_ctrl
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|val64
operator|&
name|VXGE_HAL_RTS_MGR_STEER_CTRL_RMACJ_STATUS
operator|)
operator|&&
operator|(
name|action
operator|==
name|VXGE_HAL_RTS_MGR_STEER_CTRL_WE_READ
operator|)
condition|)
block|{
operator|*
name|data1
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_data0
argument_list|)
expr_stmt|;
operator|*
name|data2
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_data1
argument_list|)
expr_stmt|;
operator|*
name|vpath_vector
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rts_mgr_steer_vpath_vector
argument_list|)
expr_stmt|;
name|status
operator|=
name|VXGE_HAL_OK
expr_stmt|;
block|}
else|else
block|{
name|status
operator|=
name|VXGE_HAL_FAIL
expr_stmt|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_mac_addr_add - Add the mac address entry  *				into MAC address table.  * @devh: Device handle.  * @offset: Index into the DA table to add the mac address.  * @macaddr: MAC address to be added for this vpath into the list  * @macaddr_mask: MAC address mask for macaddr  * @vpath_vector: Bit mask specifying the vpaths to which  *		the mac address applies  * @duplicate_mode: Duplicate MAC address add mode. Please see  *		vxge_hal_vpath_mac_addr_add_mode_e {}  *  * Adds the given mac address, mac address mask and vpath vector into the list  *  * see also: vxge_hal_mrpcim_mac_addr_get  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_mac_addr_add
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|offset
parameter_list|,
name|macaddr_t
name|macaddr
parameter_list|,
name|macaddr_t
name|macaddr_mask
parameter_list|,
name|u64
name|vpath_vector
parameter_list|,
name|u32
name|duplicate_mode
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|u64
name|data1
init|=
literal|0ULL
decl_stmt|;
name|u64
name|data2
init|=
literal|0ULL
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|hldev
operator|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", offset = %d, "
literal|"macaddr = %02x-%02x-%02x-%02x-%02x-%02x, "
literal|"macaddr_mask = %02x-%02x-%02x-%02x-%02x-%02x, "
literal|"vpath_vector = 0x"
name|VXGE_OS_LLXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|offset
argument_list|,
name|macaddr
index|[
literal|0
index|]
argument_list|,
name|macaddr
index|[
literal|1
index|]
argument_list|,
name|macaddr
index|[
literal|2
index|]
argument_list|,
name|macaddr
index|[
literal|3
index|]
argument_list|,
name|macaddr
index|[
literal|4
index|]
argument_list|,
name|macaddr
index|[
literal|5
index|]
argument_list|,
name|macaddr_mask
index|[
literal|0
index|]
argument_list|,
name|macaddr_mask
index|[
literal|1
index|]
argument_list|,
name|macaddr_mask
index|[
literal|2
index|]
argument_list|,
name|macaddr_mask
index|[
literal|3
index|]
argument_list|,
name|macaddr_mask
index|[
literal|4
index|]
argument_list|,
name|macaddr_mask
index|[
literal|5
index|]
argument_list|,
name|vpath_vector
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_ETH_ALEN
condition|;
name|i
operator|++
control|)
block|{
name|data1
operator|<<=
literal|8
expr_stmt|;
name|data1
operator||=
operator|(
name|u8
operator|)
name|macaddr
index|[
name|i
index|]
expr_stmt|;
block|}
name|data1
operator|=
name|VXGE_HAL_RTS_MGR_STEER_DATA0_DA_MAC_ADDR
argument_list|(
name|data1
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|VXGE_HAL_ETH_ALEN
condition|;
name|i
operator|++
control|)
block|{
name|data2
operator|<<=
literal|8
expr_stmt|;
name|data2
operator||=
operator|(
name|u8
operator|)
name|macaddr_mask
index|[
name|i
index|]
expr_stmt|;
block|}
switch|switch
condition|(
name|duplicate_mode
condition|)
block|{
case|case
name|VXGE_HAL_VPATH_MAC_ADDR_ADD_DUPLICATE
case|:
name|i
operator|=
literal|0
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_VPATH_MAC_ADDR_DISCARD_DUPLICATE
case|:
name|i
operator|=
literal|1
expr_stmt|;
break|break;
case|case
name|VXGE_HAL_VPATH_MAC_ADDR_REPLACE_DUPLICATE
case|:
name|i
operator|=
literal|2
expr_stmt|;
break|break;
default|default:
name|i
operator|=
literal|0
expr_stmt|;
break|break;
block|}
name|data2
operator|=
name|VXGE_HAL_RTS_MGR_STEER_DATA1_DA_MAC_ADDR_MASK
argument_list|(
name|data2
argument_list|)
operator||
name|VXGE_HAL_RTS_MGR_STEER_DATA1_DA_MAC_ADDR_MODE
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|status
operator|=
name|__hal_mrpcim_rts_table_access
argument_list|(
name|devh
argument_list|,
name|VXGE_HAL_RTS_MGR_STEER_CTRL_WE_WRITE
argument_list|,
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL_DA
argument_list|,
name|offset
argument_list|,
operator|&
name|data1
argument_list|,
operator|&
name|data2
argument_list|,
operator|&
name|vpath_vector
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_mac_addr_get - Read the mac address entry into  *				MAC address table.  * @devh: Device handle.  * @offset: Index into the DA table to execute the command on.  * @macaddr: Buffer to return MAC address to be added for this vpath  *		into the list  * @macaddr_mask: Buffer to return MAC address mask for macaddr  * @vpath_vector: Buffer to return Bit mask specifying the vpaths  *		to which the mac address applies  *  * Reads the mac address, mac address mask and vpath vector from  *		the given offset  *  * see also: vxge_hal_mrpcim_mac_addr_add  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_mac_addr_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|offset
parameter_list|,
name|macaddr_t
name|macaddr
parameter_list|,
name|macaddr_t
name|macaddr_mask
parameter_list|,
name|u64
modifier|*
name|vpath_vector
parameter_list|)
block|{
name|u32
name|i
decl_stmt|;
name|u64
name|data1
init|=
literal|0ULL
decl_stmt|;
name|u64
name|data2
init|=
literal|0ULL
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|hldev
operator|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|)
expr_stmt|;
name|status
operator|=
name|__hal_mrpcim_rts_table_access
argument_list|(
name|devh
argument_list|,
name|VXGE_HAL_RTS_MGR_STEER_CTRL_WE_WRITE
argument_list|,
name|VXGE_HAL_RTS_MGR_STEER_CTRL_DATA_STRUCT_SEL_DA
argument_list|,
name|offset
argument_list|,
operator|&
name|data1
argument_list|,
operator|&
name|data2
argument_list|,
name|vpath_vector
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|data1
operator|=
name|VXGE_HAL_RTS_MGR_STEER_DATA0_GET_DA_MAC_ADDR
argument_list|(
name|data1
argument_list|)
expr_stmt|;
name|data2
operator|=
name|VXGE_HAL_RTS_MGR_STEER_DATA1_GET_DA_MAC_ADDR_MASK
argument_list|(
name|data2
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
name|VXGE_HAL_ETH_ALEN
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
name|macaddr
index|[
name|i
operator|-
literal|1
index|]
operator|=
call|(
name|u8
call|)
argument_list|(
name|data1
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|data1
operator|>>=
literal|8
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
name|VXGE_HAL_ETH_ALEN
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
name|macaddr_mask
index|[
name|i
operator|-
literal|1
index|]
operator|=
call|(
name|u8
call|)
argument_list|(
name|data2
operator|&
literal|0xFF
argument_list|)
expr_stmt|;
name|data2
operator|>>=
literal|8
expr_stmt|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_strip_repl_vlan_tag_enable - Enable strip Repl vlan tag.  * @devh: Device handle.  *  * Enable X3100 strip Repl vlan tag.  * Returns: VXGE_HAL_OK on success.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_strip_repl_vlan_tag_enable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|mac_config
operator|.
name|rpa_repl_strip_vlan_tag
operator|==
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_ENABLE
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg1
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_STRIP_VLAN_TAG
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg1
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|mac_config
operator|.
name|rpa_repl_strip_vlan_tag
operator|=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_ENABLE
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_strip_repl_vlan_tag_disable - Disable strip Repl vlan tag.  * @devh: Device handle.  *  * Disable X3100 strip Repl vlan tag.  * Returns: VXGE_HAL_OK on success.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_strip_repl_vlan_tag_disable
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|mac_config
operator|.
name|rpa_repl_strip_vlan_tag
operator|==
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_DISABLE
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg1
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_RX_PA_CFG1_REPL_STRIP_VLAN_TAG
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_rx_pa_cfg1
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|mac_config
operator|.
name|rpa_repl_strip_vlan_tag
operator|=
name|VXGE_HAL_MAC_RPA_REPL_STRIP_VLAN_TAG_DISABLE
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_lag_config_get - Get the LAG config.  * @devh: Device handle.  * @lconfig: LAG Configuration  *  * Returns the current LAG configuration.  * Returns: VXGE_HAL_OK on success.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_lag_config_get
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|vxge_hal_lag_config_t
modifier|*
name|lconfig
parameter_list|)
block|{
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", lconfig = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
operator|(
name|ptr_t
operator|)
name|lconfig
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|vxge_os_memcpy
argument_list|(
name|lconfig
argument_list|,
operator|&
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|lag_config
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_lag_config_t
argument_list|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_lag_config_set - Set the LAG config.  * @devh: Device handle.  * @lconfig: LAG Configuration  *  * Sets the LAG configuration.  * Returns: VXGE_HAL_OK on success.  *  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_lag_config_set
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|vxge_hal_lag_config_t
modifier|*
name|lconfig
parameter_list|)
block|{
name|vxge_hal_status_e
name|status
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", lconfig = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
operator|(
name|ptr_t
operator|)
name|lconfig
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|status
operator|=
name|__hal_device_lag_config_check
argument_list|(
name|lconfig
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|vxge_os_memcpy
argument_list|(
operator|&
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|mrpcim_config
operator|.
name|lag_config
argument_list|,
name|lconfig
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_lag_config_t
argument_list|)
argument_list|)
expr_stmt|;
name|status
operator|=
name|__hal_mrpcim_lag_configure
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_getpause_data -Pause frame frame generation and reception.  * @devh: HAL device handle.  * @port : Port number 0, 1, or 2  * @tx : A field to return the pause generation capability of the NIC.  * @rx : A field to return the pause reception capability of the NIC.  *  * Returns the Pause frame generation and reception capability of the NIC.  * Return value:  * status  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_getpause_data
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|port
parameter_list|,
name|u32
modifier|*
name|tx
parameter_list|,
name|u32
modifier|*
name|rx
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", port = %d, tx = 0x"
name|VXGE_OS_STXFMT
literal|", "
literal|"rx = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|port
argument_list|,
operator|(
name|ptr_t
operator|)
name|tx
argument_list|,
operator|(
name|ptr_t
operator|)
name|rx
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|magic
operator|!=
name|VXGE_HAL_DEVICE_MAGIC
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_INVALID_DEVICE
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_INVALID_DEVICE
operator|)
return|;
block|}
if|if
condition|(
name|port
operator|>=
name|VXGE_HAL_MAC_MAX_PORTS
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_INVALID_PORT
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_INVALID_PORT
operator|)
return|;
block|}
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|port
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
condition|)
operator|*
name|tx
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|val64
operator|&
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
condition|)
operator|*
name|rx
operator|=
literal|1
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_setpause_data -  set/reset pause frame generation.  * @devh: HAL device handle.  * @port : Port number 0, 1, or 2  * @tx: A field that indicates the pause generation capability to be  * set on the NIC.  * @rx: A field that indicates the pause reception capability to be  * set on the NIC.  *  * It can be used to set or reset Pause frame generation or reception  * support of the NIC.  * Return value:  * int, returns 0 on Success  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_setpause_data
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u32
name|port
parameter_list|,
name|u32
name|tx
parameter_list|,
name|u32
name|rx
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
literal|", port = %d, tx = %d, rx = %d"
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|,
name|port
argument_list|,
name|tx
argument_list|,
name|rx
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|magic
operator|!=
name|VXGE_HAL_DEVICE_MAGIC
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_INVALID_DEVICE
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_INVALID_DEVICE
operator|)
return|;
block|}
if|if
condition|(
name|port
operator|>=
name|VXGE_HAL_MAC_MAX_PORTS
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_INVALID_PORT
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_INVALID_PORT
operator|)
return|;
block|}
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|port
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|tx
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_GEN_EN
expr_stmt|;
if|if
condition|(
name|rx
condition|)
name|val64
operator||=
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
expr_stmt|;
else|else
name|val64
operator|&=
operator|~
name|VXGE_HAL_RXMAC_PAUSE_CFG_PORT_RCV_EN
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_pause_cfg_port
index|[
name|port
index|]
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: 0"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_OK
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * vxge_hal_mrpcim_bist_test - invokes the MemBist test of the card .  * @devh: HAL device handle.  * vxge_nic structure.  * @data:variable that returns the result of each of the test conducted by  * the driver.  *  * This invokes the MemBist test of the card. We give around  * 2 secs time for the Test to complete. If it's still not complete  * within this peiod, we consider that the test failed.  * Return value:  * 0 on success and -1 on failure.  */
end_comment

begin_function
name|vxge_hal_status_e
name|vxge_hal_mrpcim_bist_test
parameter_list|(
name|vxge_hal_device_h
name|devh
parameter_list|,
name|u64
modifier|*
name|data
parameter_list|)
block|{
name|__hal_device_t
modifier|*
name|hldev
init|=
operator|(
name|__hal_device_t
operator|*
operator|)
name|devh
decl_stmt|;
name|u8
name|bist
init|=
literal|0
decl_stmt|;
name|int
name|retry
init|=
literal|0
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_FAIL
decl_stmt|;
name|vxge_assert
argument_list|(
name|devh
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"devh = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|devh
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|magic
operator|!=
name|VXGE_HAL_DEVICE_MAGIC
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_INVALID_DEVICE
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_INVALID_DEVICE
operator|)
return|;
block|}
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
operator|(
name|void
operator|)
name|__hal_vpath_pci_read
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|vxge_offsetof
argument_list|(
name|vxge_hal_pci_config_le_t
argument_list|,
name|bist
argument_list|)
argument_list|,
literal|1
argument_list|,
operator|&
name|bist
argument_list|)
expr_stmt|;
name|bist
operator||=
literal|0x40
expr_stmt|;
name|vxge_os_pci_write8
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|cfgh
argument_list|,
name|vxge_offsetof
argument_list|(
name|vxge_hal_pci_config_le_t
argument_list|,
name|bist
argument_list|)
argument_list|,
name|bist
argument_list|)
expr_stmt|;
while|while
condition|(
name|retry
operator|<
literal|20
condition|)
block|{
operator|(
name|void
operator|)
name|__hal_vpath_pci_read
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|vxge_offsetof
argument_list|(
name|vxge_hal_pci_config_le_t
argument_list|,
name|bist
argument_list|)
argument_list|,
literal|1
argument_list|,
operator|&
name|bist
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|bist
operator|&
literal|0x40
operator|)
condition|)
block|{
operator|*
name|data
operator|=
operator|(
name|bist
operator|&
literal|0x0f
operator|)
expr_stmt|;
name|status
operator|=
name|VXGE_HAL_OK
expr_stmt|;
break|break;
block|}
name|vxge_os_mdelay
argument_list|(
literal|100
argument_list|)
expr_stmt|;
name|retry
operator|++
expr_stmt|;
block|}
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d  Result: %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_initialize - Initialize mrpcim  * @hldev: hal device.  *  * Initializes mrpcim  *  * See also: __hal_mrpcim_terminate()  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_initialize
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|)
block|{
name|u64
name|val64
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
name|hldev
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|hldev
operator|->
name|access_rights
operator|&
name|VXGE_HAL_DEVICE_ACCESS_RIGHT_MRPCIM
operator|)
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_PRIVILAGED_OPEARATION
operator|)
return|;
block|}
name|hldev
operator|->
name|mrpcim
operator|=
operator|(
name|__hal_mrpcim_t
operator|*
operator|)
name|vxge_os_malloc
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
sizeof|sizeof
argument_list|(
name|__hal_mrpcim_t
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|mrpcim
operator|==
name|NULL
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_OUT_OF_MEMORY
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_OUT_OF_MEMORY
operator|)
return|;
block|}
name|vxge_os_memzero
argument_list|(
name|hldev
operator|->
name|mrpcim
argument_list|,
sizeof|sizeof
argument_list|(
name|__hal_mrpcim_t
argument_list|)
argument_list|)
expr_stmt|;
name|__hal_mrpcim_get_vpd_data
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|=
name|__hal_blockpool_block_allocate
argument_list|(
name|hldev
argument_list|,
name|VXGE_OS_HOST_PAGE_SIZE
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|==
name|NULL
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|VXGE_HAL_ERR_OUT_OF_MEMORY
argument_list|)
expr_stmt|;
return|return
operator|(
name|VXGE_HAL_ERR_OUT_OF_MEMORY
operator|)
return|;
block|}
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
operator|=
operator|(
name|vxge_hal_mrpcim_stats_hw_info_t
operator|*
operator|)
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|->
name|memblock
expr_stmt|;
name|vxge_os_memzero
argument_list|(
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
name|vxge_os_memzero
argument_list|(
operator|&
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_sav
argument_list|,
sizeof|sizeof
argument_list|(
name|vxge_hal_mrpcim_stats_hw_info_t
argument_list|)
argument_list|)
expr_stmt|;
name|status
operator|=
name|__hal_mrpcim_mac_configure
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|status
operator|=
name|__hal_mrpcim_lag_configure
argument_list|(
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
name|status
operator|!=
name|VXGE_HAL_OK
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_gen_cfg_port
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_phy_prtad0
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MDIO_GEN_CFG_PORT_GET_MDIO_PHY_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mdio_gen_cfg_port
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_phy_prtad1
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_MDIO_GEN_CFG_PORT_GET_MDIO_PHY_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgxs_static_cfg_port
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_dte_prtad0
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_XGXS_STATIC_CFG_PORT_GET_MDIO_DTE_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|xgxs_static_cfg_port
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mdio_dte_prtad1
operator|=
operator|(
name|u32
operator|)
name|VXGE_HAL_XGXS_STATIC_CFG_PORT_GET_MDIO_DTE_PRTAD
argument_list|(
name|val64
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|->
name|dma_addr
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_stats_start_host_addr
argument_list|)
expr_stmt|;
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|val64
operator|&=
operator|~
name|VXGE_HAL_MRPCIM_GENERAL_CFG2_MRPCIM_STATS_MAP_TO_VPATH
argument_list|(
literal|0x1f
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_MRPCIM_GENERAL_CFG2_MRPCIM_STATS_MAP_TO_VPATH
argument_list|(
name|hldev
operator|->
name|first_vp_id
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|mrpcim_general_cfg2
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|vBIT
argument_list|(
literal|0xFFFFFFFFFFFFFFFFULL
argument_list|,
literal|0
argument_list|,
name|VXGE_HAL_MAX_VIRTUAL_PATHS
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_authorize_all_addr
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|vBIT
argument_list|(
literal|0xFFFFFFFFFFFFFFFFULL
argument_list|,
literal|0
argument_list|,
name|VXGE_HAL_MAX_VIRTUAL_PATHS
argument_list|)
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rxmac_authorize_all_vid
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|header
operator|.
name|config
operator|.
name|intr_mode
operator|==
name|VXGE_HAL_INTR_MODE_EMULATED_INTA
condition|)
block|{
name|val64
operator|=
name|vxge_os_pio_mem_read64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rdcrdtarb_cfg0
argument_list|)
expr_stmt|;
comment|/* Set MOST to 8 for HP-ISS platform */
name|val64
operator|&=
operator|~
name|VXGE_HAL_RDCRDTARB_CFG0_MAX_OUTSTANDING_RDS
argument_list|(
literal|0x3f
argument_list|)
expr_stmt|;
name|val64
operator||=
name|VXGE_HAL_RDCRDTARB_CFG0_MAX_OUTSTANDING_RDS
argument_list|(
literal|8
argument_list|)
expr_stmt|;
name|vxge_os_pio_mem_write64
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|header
operator|.
name|regh0
argument_list|,
name|val64
argument_list|,
operator|&
name|hldev
operator|->
name|mrpcim_reg
operator|->
name|rdcrdtarb_cfg0
argument_list|)
expr_stmt|;
block|}
operator|(
name|void
operator|)
name|__hal_ifmsg_wmsg_post
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_MSG_DEST_BROADCAST
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_MSG_TYPE_PRIV_DRIVER_UP
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  * __hal_mrpcim_terminate - Terminates mrpcim  * @hldev: hal device.  *  * Terminates mrpcim.  *  * See also: __hal_mrpcim_initialize()  */
end_comment

begin_function
name|vxge_hal_status_e
name|__hal_mrpcim_terminate
parameter_list|(
name|__hal_device_t
modifier|*
name|hldev
parameter_list|)
block|{
name|vxge_hal_device_h
name|devh
init|=
operator|(
name|vxge_hal_device_h
operator|)
name|hldev
decl_stmt|;
name|vxge_hal_status_e
name|status
init|=
name|VXGE_HAL_OK
decl_stmt|;
name|vxge_assert
argument_list|(
operator|(
name|hldev
operator|!=
name|NULL
operator|)
operator|&&
operator|(
name|hldev
operator|->
name|mrpcim
operator|!=
name|NULL
operator|)
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"==> %s:%s:%d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|)
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"hldev = 0x"
name|VXGE_OS_STXFMT
argument_list|,
operator|(
name|ptr_t
operator|)
name|hldev
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|mrpcim
operator|==
name|NULL
condition|)
block|{
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
operator|(
name|void
operator|)
name|__hal_ifmsg_wmsg_post
argument_list|(
name|hldev
argument_list|,
name|hldev
operator|->
name|first_vp_id
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_MSG_DEST_BROADCAST
argument_list|,
name|VXGE_HAL_RTS_ACCESS_STEER_DATA0_MSG_TYPE_PRIV_DRIVER_DOWN
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|!=
name|NULL
condition|)
block|{
name|__hal_blockpool_block_free
argument_list|(
name|devh
argument_list|,
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|->
name|mrpcim_stats_block
operator|=
name|NULL
expr_stmt|;
block|}
name|vxge_os_free
argument_list|(
name|hldev
operator|->
name|header
operator|.
name|pdev
argument_list|,
name|hldev
operator|->
name|mrpcim
argument_list|,
sizeof|sizeof
argument_list|(
name|__hal_mrpcim_t
argument_list|)
argument_list|)
expr_stmt|;
name|hldev
operator|->
name|mrpcim
operator|=
name|NULL
expr_stmt|;
name|vxge_hal_trace_log_mrpcim
argument_list|(
literal|"<== %s:%s:%d Result = %d"
argument_list|,
name|__FILE__
argument_list|,
name|__func__
argument_list|,
name|__LINE__
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return
operator|(
name|status
operator|)
return|;
block|}
end_function

end_unit

