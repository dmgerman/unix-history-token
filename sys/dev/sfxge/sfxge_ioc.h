begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2014-2016 Solarflare Communications Inc.  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions are met:  *  * 1. Redistributions of source code must retain the above copyright notice,  *    this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright notice,  *    this list of conditions and the following disclaimer in the documentation  *    and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"  * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,  * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR  * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR  * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,  * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;  * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR  * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,  * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *  * The views and conclusions contained in the software and documentation are  * those of the authors and should not be interpreted as representing official  * policies, either expressed or implied, of the FreeBSD Project.  *  * $FreeBSD$  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|_SYS_SFXGE_IOC_H
end_ifndef

begin_define
define|#
directive|define
name|_SYS_SFXGE_IOC_H
end_define

begin_ifdef
ifdef|#
directive|ifdef
name|__cplusplus
end_ifdef

begin_extern
extern|extern
literal|"C"
block|{
endif|#
directive|endif
include|#
directive|include
file|<sys/types.h>
comment|/* More codes may be added if necessary */
enum|enum
name|sfxge_ioc_codes
block|{
name|SFXGE_MCDI_IOC
block|,
name|SFXGE_NVRAM_IOC
block|,
name|SFXGE_VPD_IOC
block|}
enum|;
enum|enum
name|sfxge_nvram_ops
block|{
name|SFXGE_NVRAM_OP_SIZE
block|,
name|SFXGE_NVRAM_OP_READ
block|,
name|SFXGE_NVRAM_OP_WRITE
block|,
name|SFXGE_NVRAM_OP_ERASE
block|,
name|SFXGE_NVRAM_OP_GET_VER
block|,
name|SFXGE_NVRAM_OP_SET_VER
block|}
enum|;
enum|enum
name|sfxge_nvram_types
block|{
name|SFXGE_NVRAM_TYPE_BOOTROM
block|,
name|SFXGE_NVRAM_TYPE_BOOTROM_CFG
block|,
name|SFXGE_NVRAM_TYPE_MC
block|,
name|SFXGE_NVRAM_TYPE_MC_GOLDEN
block|,
name|SFXGE_NVRAM_TYPE_PHY
block|,
name|SFXGE_NVRAM_TYPE_NULL_PHY
block|,
name|SFXGE_NVRAM_TYPE_FPGA
block|,
name|SFXGE_NVRAM_TYPE_FCFW
block|,
name|SFXGE_NVRAM_TYPE_CPLD
block|,
name|SFXGE_NVRAM_TYPE_FPGA_BACKUP
block|,
name|SFXGE_NVRAM_TYPE_DYNAMIC_CFG
block|}
enum|;
enum|enum
name|sfxge_vpd_ops
block|{
name|SFXGE_VPD_OP_GET_KEYWORD
block|,
name|SFXGE_VPD_OP_SET_KEYWORD
block|}
enum|;
define|#
directive|define
name|SFXGE_MCDI_MAX_PAYLOAD
value|0x400
define|#
directive|define
name|SFXGE_VPD_MAX_PAYLOAD
value|0x100
typedef|typedef
struct|struct
name|sfxge_ioc_s
block|{
name|uint32_t
name|op
decl_stmt|;
union|union
block|{
struct|struct
block|{
name|caddr_t
name|payload
decl_stmt|;
name|uint32_t
name|cmd
decl_stmt|;
name|size_t
name|len
decl_stmt|;
comment|/* In and out */
name|uint32_t
name|rc
decl_stmt|;
block|}
name|mcdi
struct|;
struct|struct
block|{
name|uint32_t
name|op
decl_stmt|;
name|uint32_t
name|type
decl_stmt|;
name|uint32_t
name|offset
decl_stmt|;
name|uint32_t
name|size
decl_stmt|;
name|uint32_t
name|subtype
decl_stmt|;
name|uint16_t
name|version
index|[
literal|4
index|]
decl_stmt|;
comment|/* get/set_ver */
name|caddr_t
name|data
decl_stmt|;
block|}
name|nvram
struct|;
struct|struct
block|{
name|uint8_t
name|op
decl_stmt|;
name|uint8_t
name|tag
decl_stmt|;
name|uint16_t
name|keyword
decl_stmt|;
name|uint16_t
name|len
decl_stmt|;
comment|/* In or out */
name|caddr_t
name|payload
decl_stmt|;
block|}
name|vpd
struct|;
block|}
name|u
union|;
block|}
name|__packed
name|sfxge_ioc_t
typedef|;
ifdef|#
directive|ifdef
name|__cplusplus
block|}
end_extern

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* _SYS_SFXGE_IOC_H */
end_comment

end_unit

