begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2006 Marcel Moolenaar  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  *  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES  * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,  * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT  * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF  * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/*  * PCI "universal" communications card driver configuration data (used to  * match/attach the cards).  */
end_comment

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/systm.h>
end_include

begin_include
include|#
directive|include
file|<sys/kernel.h>
end_include

begin_include
include|#
directive|include
file|<sys/bus.h>
end_include

begin_include
include|#
directive|include
file|<machine/resource.h>
end_include

begin_include
include|#
directive|include
file|<machine/bus.h>
end_include

begin_include
include|#
directive|include
file|<sys/rman.h>
end_include

begin_include
include|#
directive|include
file|<dev/pci/pcivar.h>
end_include

begin_include
include|#
directive|include
file|<dev/puc/puc_bus.h>
end_include

begin_include
include|#
directive|include
file|<dev/puc/puc_cfg.h>
end_include

begin_include
include|#
directive|include
file|<dev/puc/puc_bfe.h>
end_include

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_amc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_diva
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_exar
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_icbook
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_quatech
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_syba
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_siig
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_timedia
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_titan
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|puc_config_f
name|puc_config_oxford_pcie
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|struct
name|puc_cfg
name|puc_pci_devices
index|[]
init|=
block|{
block|{
literal|0x0009
block|,
literal|0x7168
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Sunix SUN1889"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x103c
block|,
literal|0x1048
block|,
literal|0x103c
block|,
literal|0x1049
block|,
literal|"HP Diva Serial [GSP] Multiport UART - Tosca Console"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_3S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_diva
block|}
block|,
block|{
literal|0x103c
block|,
literal|0x1048
block|,
literal|0x103c
block|,
literal|0x104a
block|,
literal|"HP Diva Serial [GSP] Multiport UART - Tosca Secondary"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_diva
block|}
block|,
block|{
literal|0x103c
block|,
literal|0x1048
block|,
literal|0x103c
block|,
literal|0x104b
block|,
literal|"HP Diva Serial [GSP] Multiport UART - Maestro SP2"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_diva
block|}
block|,
block|{
literal|0x103c
block|,
literal|0x1048
block|,
literal|0x103c
block|,
literal|0x1223
block|,
literal|"HP Diva Serial [GSP] Multiport UART - Superdome Console"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_3S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_diva
block|}
block|,
block|{
literal|0x103c
block|,
literal|0x1048
block|,
literal|0x103c
block|,
literal|0x1226
block|,
literal|"HP Diva Serial [GSP] Multiport UART - Keystone SP2"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_3S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_diva
block|}
block|,
block|{
literal|0x103c
block|,
literal|0x1048
block|,
literal|0x103c
block|,
literal|0x1282
block|,
literal|"HP Diva Serial [GSP] Multiport UART - Everest SP2"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_3S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_diva
block|}
block|,
block|{
literal|0x10b5
block|,
literal|0x1076
block|,
literal|0x10b5
block|,
literal|0x1076
block|,
literal|"VScom PCI-800"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x10b5
block|,
literal|0x1077
block|,
literal|0x10b5
block|,
literal|0x1077
block|,
literal|"VScom PCI-400"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x10b5
block|,
literal|0x1103
block|,
literal|0x10b5
block|,
literal|0x1103
block|,
literal|"VScom PCI-200"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
comment|/* 	 * Boca Research Turbo Serial 658 (8 serial port) card. 	 * Appears to be the same as Chase Research PLC PCI-FAST8 	 * and Perle PCI-FAST8 Multi-Port serial cards. 	 */
block|{
literal|0x10b5
block|,
literal|0x9050
block|,
literal|0x12e0
block|,
literal|0x0021
block|,
literal|"Boca Research Turbo Serial 658"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_8S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x10b5
block|,
literal|0x9050
block|,
literal|0x12e0
block|,
literal|0x0031
block|,
literal|"Boca Research Turbo Serial 654"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
comment|/* 	 * Dolphin Peripherals 4035 (dual serial port) card.  PLX 9050, with 	 * a seemingly-lame EEPROM setup that puts the Dolphin IDs 	 * into the subsystem fields, and claims that it's a 	 * network/misc (0x02/0x80) device. 	 */
block|{
literal|0x10b5
block|,
literal|0x9050
block|,
literal|0xd84d
block|,
literal|0x6808
block|,
literal|"Dolphin Peripherals 4035"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
comment|/* 	 * Dolphin Peripherals 4014 (dual parallel port) card.  PLX 9050, with 	 * a seemingly-lame EEPROM setup that puts the Dolphin IDs 	 * into the subsystem fields, and claims that it's a 	 * network/misc (0x02/0x80) device. 	 */
block|{
literal|0x10b5
block|,
literal|0x9050
block|,
literal|0xd84d
block|,
literal|0x6810
block|,
literal|"Dolphin Peripherals 4014"
block|,
literal|0
block|,
name|PUC_PORT_2P
block|,
literal|0x20
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x10e8
block|,
literal|0x818e
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Applied Micro Circuits 8 Port UART"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_8S
block|,
literal|0x14
block|,
operator|-
literal|1
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_amc
block|}
block|,
block|{
literal|0x11fe
block|,
literal|0x8010
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/8 RJ11 part A"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8011
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/8 RJ11 part B"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8012
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/8 Octa part A"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8013
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/8 Octa part B"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8014
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/4 RJ45"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8015
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/Quad"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8016
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/16 part A"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8017
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/16 part B"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_12S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8018
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/8 part A"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x11fe
block|,
literal|0x8019
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Comtrol RocketPort 550/8 part B"
block|,
name|DEFAULT_RCLK
operator|*
literal|4
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
comment|/* 	 * IBM SurePOS 300 Series (481033H) serial ports 	 * Details can be found on the IBM RSS websites 	 */
block|{
literal|0x1014
block|,
literal|0x0297
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IBM SurePOS 300 Series (481033H) serial ports"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|}
block|,
comment|/* 	 * SIIG Boards. 	 * 	 * SIIG provides documentation for their boards at: 	 *<URL:http://www.siig.com/downloads.asp> 	 */
block|{
literal|0x131f
block|,
literal|0x1010
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber I/O PCI 16C550 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1011
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber I/O PCI 16C650 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1012
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber I/O PCI 16C850 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1021
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Parallel Dual PCI (10x family)"
block|,
literal|0
block|,
name|PUC_PORT_2P
block|,
literal|0x18
block|,
literal|8
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1030
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Serial Dual PCI 16C550 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1031
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Serial Dual PCI 16C650 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1032
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Serial Dual PCI 16C850 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1034
block|,
literal|0xffff
block|,
literal|0
block|,
comment|/* XXX really? */
literal|"SIIG Cyber 2S1P PCI 16C550 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1035
block|,
literal|0xffff
block|,
literal|0
block|,
comment|/* XXX really? */
literal|"SIIG Cyber 2S1P PCI 16C650 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1036
block|,
literal|0xffff
block|,
literal|0
block|,
comment|/* XXX really? */
literal|"SIIG Cyber 2S1P PCI 16C850 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1050
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 4S PCI 16C550 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1051
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 4S PCI 16C650 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x1052
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 4S PCI 16C850 (10x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2010
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber I/O PCI 16C550 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2011
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber I/O PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2012
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber I/O PCI 16C850 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2021
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Parallel Dual PCI (20x family)"
block|,
literal|0
block|,
name|PUC_PORT_2P
block|,
literal|0x10
block|,
literal|8
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2030
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Serial Dual PCI 16C550 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2031
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Serial Dual PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2032
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber Serial Dual PCI 16C850 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2040
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 2P1S PCI 16C550 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S2P
block|,
literal|0x10
block|,
operator|-
literal|1
block|,
literal|0
block|,
operator|.
name|config_function
operator|=
name|puc_config_siig
block|}
block|,
block|{
literal|0x131f
block|,
literal|0x2041
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 2P1S PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S2P
block|,
literal|0x10
block|,
operator|-
literal|1
block|,
literal|0
block|,
operator|.
name|config_function
operator|=
name|puc_config_siig
block|}
block|,
block|{
literal|0x131f
block|,
literal|0x2042
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 2P1S PCI 16C850 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S2P
block|,
literal|0x10
block|,
operator|-
literal|1
block|,
literal|0
block|,
operator|.
name|config_function
operator|=
name|puc_config_siig
block|}
block|,
block|{
literal|0x131f
block|,
literal|0x2050
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 4S PCI 16C550 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2051
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 4S PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2052
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 4S PCI 16C850 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2060
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 2S1P PCI 16C550 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2061
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 2S1P PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2062
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG Cyber 2S1P PCI 16C850 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x131f
block|,
literal|0x2081
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"SIIG PS8000 8S PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_8S
block|,
literal|0x10
block|,
operator|-
literal|1
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_siig
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0010
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech QSC-100"
block|,
operator|-
literal|3
block|,
comment|/* max 8x clock rate */
name|PUC_PORT_4S
block|,
literal|0x14
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0020
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech DSC-100"
block|,
operator|-
literal|1
block|,
comment|/* max 2x clock rate */
name|PUC_PORT_2S
block|,
literal|0x14
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0030
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech DSC-200/300"
block|,
operator|-
literal|1
block|,
comment|/* max 2x clock rate */
name|PUC_PORT_2S
block|,
literal|0x14
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0040
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech QSC-200/300"
block|,
operator|-
literal|3
block|,
comment|/* max 8x clock rate */
name|PUC_PORT_4S
block|,
literal|0x14
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0050
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech ESC-100D"
block|,
operator|-
literal|3
block|,
comment|/* max 8x clock rate */
name|PUC_PORT_8S
block|,
literal|0x14
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0060
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech ESC-100M"
block|,
operator|-
literal|3
block|,
comment|/* max 8x clock rate */
name|PUC_PORT_8S
block|,
literal|0x14
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0170
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech QSCLP-100"
block|,
operator|-
literal|1
block|,
comment|/* max 2x clock rate */
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x0180
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech DSCLP-100"
block|,
operator|-
literal|1
block|,
comment|/* max 3x clock rate */
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x01b0
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech DSCLP-200/300"
block|,
operator|-
literal|1
block|,
comment|/* max 2x clock rate */
name|PUC_PORT_2S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x135c
block|,
literal|0x01e0
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Quatech ESCLP-100"
block|,
operator|-
literal|3
block|,
comment|/* max 8x clock rate */
name|PUC_PORT_8S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_quatech
block|}
block|,
block|{
literal|0x1393
block|,
literal|0x1040
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, Smartio C104H/PCI"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1393
block|,
literal|0x1041
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, Smartio CP-104UL/PCI"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1393
block|,
literal|0x1043
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, Smartio CP-104EL/PCIe"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1393
block|,
literal|0x1141
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, Industio CP-114"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1393
block|,
literal|0x1680
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, C168H/PCI"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1393
block|,
literal|0x1681
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, C168U/PCI"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1393
block|,
literal|0x1682
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Moxa Technologies, CP-168EL/PCIe"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x13a8
block|,
literal|0x0152
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Exar XR17C/D152"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_exar
block|}
block|,
block|{
literal|0x13a8
block|,
literal|0x0154
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Exar XR17C154"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_exar
block|}
block|,
block|{
literal|0x13a8
block|,
literal|0x0158
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Exar XR17C158"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_exar
block|}
block|,
block|{
literal|0x13a8
block|,
literal|0x0258
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Exar XR17V258IV"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0100
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Dual Serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0101
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Quatro A"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0102
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Quatro B"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0120
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Quattro-PCI A"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0121
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Quattro-PCI B"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0180
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Octo A"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1407
block|,
literal|0x0181
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Lava Computers Octo B"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1409
block|,
literal|0x7268
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Sunix SUN1888"
block|,
literal|0
block|,
name|PUC_PORT_2P
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1409
block|,
literal|0x7168
block|,
literal|0xffff
block|,
literal|0
block|,
name|NULL
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
operator|-
literal|1
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_timedia
block|}
block|,
comment|/* 	 * Boards with an Oxford Semiconductor chip. 	 * 	 * Oxford Semiconductor provides documentation for their chip at: 	 *<URL:http://www.plxtech.com/products/uart/> 	 * 	 * As sold by Kouwell<URL:http://www.kouwell.com/>. 	 * I/O Flex PCI I/O Card Model-223 with 4 serial and 1 parallel ports. 	 */
block|{
literal|0x1415
block|,
literal|0x9501
block|,
literal|0x131f
block|,
literal|0x2050
block|,
literal|"SIIG Cyber 4 PCI 16550"
block|,
name|DEFAULT_RCLK
operator|*
literal|10
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9501
block|,
literal|0x131f
block|,
literal|0x2051
block|,
literal|"SIIG Cyber 4S PCI 16C650 (20x family)"
block|,
name|DEFAULT_RCLK
operator|*
literal|10
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9501
block|,
literal|0x131f
block|,
literal|0x2052
block|,
literal|"SIIG Quartet Serial 850"
block|,
name|DEFAULT_RCLK
operator|*
literal|10
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9501
block|,
literal|0x14db
block|,
literal|0x2150
block|,
literal|"Kuroutoshikou SERIAL4P-LPPCI2"
block|,
name|DEFAULT_RCLK
operator|*
literal|10
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9501
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OX16PCI954 UARTs"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x950a
block|,
literal|0x131f
block|,
literal|0x2030
block|,
literal|"SIIG Cyber 2S PCIe"
block|,
name|DEFAULT_RCLK
operator|*
literal|10
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x950a
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OX16PCI954 UARTs"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9511
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OX9160/OX16PCI954 UARTs (function 1)"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9521
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OX16PCI952 UARTs"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1415
block|,
literal|0x9538
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OX16PCI958 UARTs"
block|,
name|DEFAULT_RCLK
operator|*
literal|10
block|,
name|PUC_PORT_8S
block|,
literal|0x18
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
comment|/* 	 * Perle boards use Oxford Semiconductor chips, but they store the 	 * Oxford Semiconductor device ID as a subvendor device ID and use 	 * their own device IDs. 	 */
block|{
literal|0x155f
block|,
literal|0x0331
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Perle Speed4 LE"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
comment|/* 	 * Oxford Semiconductor PCI Express Expresso family 	 * 	 * Found in many 'native' PCI Express serial boards such as: 	 * 	 * eMegatech MP954ER4 (4 port) and MP958ER8 (8 port) 	 *<URL:http://www.emegatech.com.tw/pdrs232pcie.html> 	 * 	 * Lindy 51189 (4 port) 	 *<URL:http://www.lindy.com><URL:http://tinyurl.com/lindy-51189> 	 *  	 * StarTech.com PEX4S952 (4 port) and PEX8S952 (8 port) 	 *<URL:http://www.startech.com> 	 */
block|{
literal|0x1415
block|,
literal|0xc158
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OXPCIe952 UARTs"
block|,
name|DEFAULT_RCLK
operator|*
literal|0x22
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_oxford_pcie
block|}
block|,
block|{
literal|0x1415
block|,
literal|0xc15d
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OXPCIe952 UARTs (function 1)"
block|,
name|DEFAULT_RCLK
operator|*
literal|0x22
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_oxford_pcie
block|}
block|,
block|{
literal|0x1415
block|,
literal|0xc208
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OXPCIe954 UARTs"
block|,
name|DEFAULT_RCLK
operator|*
literal|0x22
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_oxford_pcie
block|}
block|,
block|{
literal|0x1415
block|,
literal|0xc20d
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OXPCIe954 UARTs (function 1)"
block|,
name|DEFAULT_RCLK
operator|*
literal|0x22
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_oxford_pcie
block|}
block|,
block|{
literal|0x1415
block|,
literal|0xc308
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OXPCIe958 UARTs"
block|,
name|DEFAULT_RCLK
operator|*
literal|0x22
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_oxford_pcie
block|}
block|,
block|{
literal|0x1415
block|,
literal|0xc30d
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Oxford Semiconductor OXPCIe958 UARTs (function 1)"
block|,
name|DEFAULT_RCLK
operator|*
literal|0x22
block|,
name|PUC_PORT_NONSTANDARD
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_oxford_pcie
block|}
block|,
block|{
literal|0x14d2
block|,
literal|0x8010
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"VScom PCI-100L"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_1S
block|,
literal|0x14
block|,
literal|0
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x14d2
block|,
literal|0x8020
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"VScom PCI-200L"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_2S
block|,
literal|0x14
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x14d2
block|,
literal|0x8028
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"VScom 200Li"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x20
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
comment|/* 	 * VScom (Titan?) PCI-800L.  More modern variant of the 	 * PCI-800.  Uses 6 discrete 16550 UARTs, plus another 	 * two of them obviously implemented as macro cells in 	 * the ASIC.  This causes the weird port access pattern 	 * below, where two of the IO port ranges each access 	 * one of the ASIC UARTs, and a block of IO addresses 	 * access the external UARTs. 	 */
block|{
literal|0x14d2
block|,
literal|0x8080
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Titan VScom PCI-800L"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_8S
block|,
literal|0x14
block|,
operator|-
literal|1
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_titan
block|}
block|,
comment|/* 	 * VScom PCI-800H. Uses 8 16950 UART, behind a PCI chips that offers 	 * 4 com port on PCI device 0 and 4 on PCI device 1. PCI device 0 has 	 * device ID 3 and PCI device 1 device ID 4. 	 */
block|{
literal|0x14d2
block|,
literal|0xa003
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Titan PCI-800H"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x14d2
block|,
literal|0xa004
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Titan PCI-800H"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x14d2
block|,
literal|0xa005
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Titan PCI-200H"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x14d2
block|,
literal|0xe020
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Titan VScom PCI-200HV2"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x14db
block|,
literal|0x2130
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Avlab Technology, PCI IO 2S"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x14db
block|,
literal|0x2150
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Avlab Low Profile PCI 4 Serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x14db
block|,
literal|0x2152
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Avlab Low Profile PCI 4 Serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x1592
block|,
literal|0x0781
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Syba Tech Ltd. PCI-4S2P-550-ECP"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S1P
block|,
literal|0x10
block|,
literal|0
block|,
operator|-
literal|1
block|,
operator|.
name|config_function
operator|=
name|puc_config_syba
block|}
block|,
block|{
literal|0x6666
block|,
literal|0x0001
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Decision Computer Inc, PCCOM 4-port serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x1c
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x6666
block|,
literal|0x0002
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"Decision Computer Inc, PCCOM 8-port serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_8S
block|,
literal|0x1c
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x6666
block|,
literal|0x0004
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"PCCOM dual port RS232/422/485"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x1c
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9815
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"NetMos NM9815 Dual 1284 Printer port"
block|,
literal|0
block|,
name|PUC_PORT_2P
block|,
literal|0x10
block|,
literal|8
block|,
literal|0
block|, 	}
block|,
comment|/* 	 * This is more specific than the generic NM9835 entry that follows, and 	 * is placed here to _prevent_ puc from claiming this single port card. 	 * 	 * uart(4) will claim this device. 	 */
block|{
literal|0x9710
block|,
literal|0x9835
block|,
literal|0x1000
block|,
literal|1
block|,
literal|"NetMos NM9835 based 1-port serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9835
block|,
literal|0x1000
block|,
literal|2
block|,
literal|"NetMos NM9835 based 2-port serial"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9835
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"NetMos NM9835 Dual UART and 1284 Printer port"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9845
block|,
literal|0x1000
block|,
literal|0x0006
block|,
literal|"NetMos NM9845 6 Port UART"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_6S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9845
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"NetMos NM9845 Quad UART and 1284 Printer port"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9865
block|,
literal|0xa000
block|,
literal|0x3002
block|,
literal|"NetMos NM9865 Dual UART"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9865
block|,
literal|0xa000
block|,
literal|0x3003
block|,
literal|"NetMos NM9865 Triple UART"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_3S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9865
block|,
literal|0xa000
block|,
literal|0x3004
block|,
literal|"NetMos NM9865 Quad UART"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|0x9710
block|,
literal|0x9865
block|,
literal|0xa000
block|,
literal|0x3011
block|,
literal|"NetMos NM9865 Single UART and 1284 Printer port"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_1S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9865
block|,
literal|0xa000
block|,
literal|0x3012
block|,
literal|"NetMos NM9865 Dual UART and 1284 Printer port"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S1P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0x9710
block|,
literal|0x9865
block|,
literal|0xa000
block|,
literal|0x3020
block|,
literal|"NetMos NM9865 Dual 1284 Printer port"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2P
block|,
literal|0x10
block|,
literal|4
block|,
literal|0
block|, 	}
block|,
block|{
literal|0xb00c
block|,
literal|0x021c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Gunboat x4 Lite"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xb00c
block|,
literal|0x031c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Gunboat x4 Pro"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xb00c
block|,
literal|0x041c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Ironclad x8 Lite"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_8S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xb00c
block|,
literal|0x051c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Ironclad x8 Pro"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_8S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xb00c
block|,
literal|0x081c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Dreadnought x16 Pro"
block|,
name|DEFAULT_RCLK
operator|*
literal|8
block|,
name|PUC_PORT_16S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xb00c
block|,
literal|0x091c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Dreadnought x16 Lite"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_16S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xb00c
block|,
literal|0x0a1c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Gunboat x2 Low Profile"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_2S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|, 	}
block|,
block|{
literal|0xb00c
block|,
literal|0x0b1c
block|,
literal|0xffff
block|,
literal|0
block|,
literal|"IC Book Labs Gunboat x4 Low Profile"
block|,
name|DEFAULT_RCLK
block|,
name|PUC_PORT_4S
block|,
literal|0x10
block|,
literal|0
block|,
literal|8
block|,
operator|.
name|config_function
operator|=
name|puc_config_icbook
block|}
block|,
block|{
literal|0xffff
block|,
literal|0
block|,
literal|0xffff
block|,
literal|0
block|,
name|NULL
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|int
name|puc_config_amc
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_GET_OFS
case|:
operator|*
name|res
operator|=
literal|8
operator|*
operator|(
name|port
operator|&
literal|1
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_RID
case|:
operator|*
name|res
operator|=
literal|0x14
operator|+
operator|(
name|port
operator|>>
literal|1
operator|)
operator|*
literal|4
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_diva
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
specifier|const
name|struct
name|puc_cfg
modifier|*
name|cfg
init|=
name|sc
operator|->
name|sc_cfg
decl_stmt|;
if|if
condition|(
name|cmd
operator|==
name|PUC_CFG_GET_OFS
condition|)
block|{
if|if
condition|(
name|cfg
operator|->
name|subdevice
operator|==
literal|0x1282
condition|)
comment|/* Everest SP */
name|port
operator|<<=
literal|1
expr_stmt|;
elseif|else
if|if
condition|(
name|cfg
operator|->
name|subdevice
operator|==
literal|0x104b
condition|)
comment|/* Maestro SP2 */
name|port
operator|=
operator|(
name|port
operator|==
literal|3
operator|)
condition|?
literal|4
else|:
name|port
expr_stmt|;
operator|*
name|res
operator|=
name|port
operator|*
literal|8
operator|+
operator|(
operator|(
name|port
operator|>
literal|2
operator|)
condition|?
literal|0x18
else|:
literal|0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_exar
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
if|if
condition|(
name|cmd
operator|==
name|PUC_CFG_GET_OFS
condition|)
block|{
operator|*
name|res
operator|=
name|port
operator|*
literal|0x200
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_icbook
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
if|if
condition|(
name|cmd
operator|==
name|PUC_CFG_GET_ILR
condition|)
block|{
operator|*
name|res
operator|=
name|PUC_ILR_DIGI
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_quatech
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
specifier|const
name|struct
name|puc_cfg
modifier|*
name|cfg
init|=
name|sc
operator|->
name|sc_cfg
decl_stmt|;
name|struct
name|puc_bar
modifier|*
name|bar
decl_stmt|;
name|uint8_t
name|v0
decl_stmt|,
name|v1
decl_stmt|;
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_SETUP
case|:
comment|/* 		 * Check if the scratchpad register is enabled or if the 		 * interrupt status and options registers are active. 		 */
name|bar
operator|=
name|puc_get_bar
argument_list|(
name|sc
argument_list|,
name|cfg
operator|->
name|rid
argument_list|)
expr_stmt|;
if|if
condition|(
name|bar
operator|==
name|NULL
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
comment|/* Set DLAB in the LCR register of UART 0. */
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|3
argument_list|,
literal|0x80
argument_list|)
expr_stmt|;
comment|/* Write 0 to the SPR register of UART 0. */
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|7
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Read back the contents of the SPR register of UART 0. */
name|v0
operator|=
name|bus_read_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|7
argument_list|)
expr_stmt|;
comment|/* Write a specific value to the SPR register of UART 0. */
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|7
argument_list|,
literal|0x80
operator|+
operator|-
name|cfg
operator|->
name|clock
argument_list|)
expr_stmt|;
comment|/* Read back the contents of the SPR register of UART 0. */
name|v1
operator|=
name|bus_read_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|7
argument_list|)
expr_stmt|;
comment|/* Clear DLAB in the LCR register of UART 0. */
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* Save the two values read-back from the SPR register. */
name|sc
operator|->
name|sc_cfg_data
operator|=
operator|(
name|v0
operator|<<
literal|8
operator|)
operator||
name|v1
expr_stmt|;
if|if
condition|(
name|v0
operator|==
literal|0
operator|&&
name|v1
operator|==
literal|0x80
operator|+
operator|-
name|cfg
operator|->
name|clock
condition|)
block|{
comment|/* 			 * The SPR register echoed the two values written 			 * by us. This means that the SPAD jumper is set. 			 */
name|device_printf
argument_list|(
name|sc
operator|->
name|sc_dev
argument_list|,
literal|"warning: extra features "
literal|"not usable -- SPAD compatibility enabled\n"
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|v0
operator|!=
literal|0
condition|)
block|{
comment|/* 			 * The first value doesn't match. This can only mean 			 * that the SPAD jumper is not set and that a non- 			 * standard fixed clock multiplier jumper is set. 			 */
if|if
condition|(
name|bootverbose
condition|)
name|device_printf
argument_list|(
name|sc
operator|->
name|sc_dev
argument_list|,
literal|"fixed clock rate "
literal|"multiplier of %d\n"
argument_list|,
literal|1
operator|<<
name|v0
argument_list|)
expr_stmt|;
if|if
condition|(
name|v0
operator|<
operator|-
name|cfg
operator|->
name|clock
condition|)
name|device_printf
argument_list|(
name|sc
operator|->
name|sc_dev
argument_list|,
literal|"warning: "
literal|"suboptimal fixed clock rate multiplier "
literal|"setting\n"
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
comment|/* 		 * The first value matched, but the second didn't. We know 		 * that the SPAD jumper is not set. We also know that the 		 * clock rate multiplier is software controlled *and* that 		 * we just programmed it to the maximum allowed. 		 */
if|if
condition|(
name|bootverbose
condition|)
name|device_printf
argument_list|(
name|sc
operator|->
name|sc_dev
argument_list|,
literal|"clock rate multiplier of "
literal|"%d selected\n"
argument_list|,
literal|1
operator|<<
operator|-
name|cfg
operator|->
name|clock
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_CLOCK
case|:
name|v0
operator|=
operator|(
name|sc
operator|->
name|sc_cfg_data
operator|>>
literal|8
operator|)
operator|&
literal|0xff
expr_stmt|;
name|v1
operator|=
name|sc
operator|->
name|sc_cfg_data
operator|&
literal|0xff
expr_stmt|;
if|if
condition|(
name|v0
operator|==
literal|0
operator|&&
name|v1
operator|==
literal|0x80
operator|+
operator|-
name|cfg
operator|->
name|clock
condition|)
block|{
comment|/* 			 * XXX With the SPAD jumper applied, there's no 			 * easy way of knowing if there's also a clock 			 * rate multiplier jumper installed. Let's hope 			 * not... 			 */
operator|*
name|res
operator|=
name|DEFAULT_RCLK
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|v0
operator|==
literal|0
condition|)
block|{
comment|/* 			 * No clock rate multiplier jumper installed, 			 * so we programmed the board with the maximum 			 * multiplier allowed as given to us in the 			 * clock field of the config record (negated). 			 */
operator|*
name|res
operator|=
name|DEFAULT_RCLK
operator|<<
operator|-
name|cfg
operator|->
name|clock
expr_stmt|;
block|}
else|else
operator|*
name|res
operator|=
name|DEFAULT_RCLK
operator|<<
name|v0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_ILR
case|:
name|v0
operator|=
operator|(
name|sc
operator|->
name|sc_cfg_data
operator|>>
literal|8
operator|)
operator|&
literal|0xff
expr_stmt|;
name|v1
operator|=
name|sc
operator|->
name|sc_cfg_data
operator|&
literal|0xff
expr_stmt|;
operator|*
name|res
operator|=
operator|(
name|v0
operator|==
literal|0
operator|&&
name|v1
operator|==
literal|0x80
operator|+
operator|-
name|cfg
operator|->
name|clock
operator|)
condition|?
name|PUC_ILR_NONE
else|:
name|PUC_ILR_QUATECH
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_syba
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
specifier|static
name|int
name|base
index|[]
init|=
block|{
literal|0x251
block|,
literal|0x3f0
block|,
literal|0
block|}
decl_stmt|;
specifier|const
name|struct
name|puc_cfg
modifier|*
name|cfg
init|=
name|sc
operator|->
name|sc_cfg
decl_stmt|;
name|struct
name|puc_bar
modifier|*
name|bar
decl_stmt|;
name|int
name|efir
decl_stmt|,
name|idx
decl_stmt|,
name|ofs
decl_stmt|;
name|uint8_t
name|v
decl_stmt|;
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_SETUP
case|:
name|bar
operator|=
name|puc_get_bar
argument_list|(
name|sc
argument_list|,
name|cfg
operator|->
name|rid
argument_list|)
expr_stmt|;
if|if
condition|(
name|bar
operator|==
name|NULL
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
comment|/* configure both W83877TFs */
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x250
argument_list|,
literal|0x89
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x3f0
argument_list|,
literal|0x87
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x3f0
argument_list|,
literal|0x87
argument_list|)
expr_stmt|;
name|idx
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|base
index|[
name|idx
index|]
operator|!=
literal|0
condition|)
block|{
name|efir
operator|=
name|base
index|[
name|idx
index|]
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x09
argument_list|)
expr_stmt|;
name|v
operator|=
name|bus_read_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|v
operator|&
literal|0x0f
operator|)
operator|!=
literal|0x0c
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x16
argument_list|)
expr_stmt|;
name|v
operator|=
name|bus_read_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x16
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
name|v
operator||
literal|0x04
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x16
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
name|v
operator|&
operator|~
literal|0x04
argument_list|)
expr_stmt|;
name|ofs
operator|=
name|base
index|[
name|idx
index|]
operator|&
literal|0x300
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x23
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
operator|(
name|ofs
operator|+
literal|0x78
operator|)
operator|>>
literal|2
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x24
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
operator|(
name|ofs
operator|+
literal|0xf8
operator|)
operator|>>
literal|2
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x25
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
operator|(
name|ofs
operator|+
literal|0xe8
operator|)
operator|>>
literal|2
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x17
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
literal|0x03
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
argument_list|,
literal|0x28
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
name|efir
operator|+
literal|1
argument_list|,
literal|0x43
argument_list|)
expr_stmt|;
name|idx
operator|++
expr_stmt|;
block|}
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x250
argument_list|,
literal|0xaa
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x3f0
argument_list|,
literal|0xaa
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_OFS
case|:
switch|switch
condition|(
name|port
condition|)
block|{
case|case
literal|0
case|:
operator|*
name|res
operator|=
literal|0x2f8
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|1
case|:
operator|*
name|res
operator|=
literal|0x2e8
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|2
case|:
operator|*
name|res
operator|=
literal|0x3f8
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|3
case|:
operator|*
name|res
operator|=
literal|0x3e8
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|4
case|:
operator|*
name|res
operator|=
literal|0x278
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
break|break;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_siig
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
specifier|const
name|struct
name|puc_cfg
modifier|*
name|cfg
init|=
name|sc
operator|->
name|sc_cfg
decl_stmt|;
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_GET_OFS
case|:
if|if
condition|(
name|cfg
operator|->
name|ports
operator|==
name|PUC_PORT_8S
condition|)
block|{
operator|*
name|res
operator|=
operator|(
name|port
operator|>
literal|4
operator|)
condition|?
literal|8
operator|*
operator|(
name|port
operator|-
literal|4
operator|)
else|:
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
break|break;
case|case
name|PUC_CFG_GET_RID
case|:
if|if
condition|(
name|cfg
operator|->
name|ports
operator|==
name|PUC_PORT_8S
condition|)
block|{
operator|*
name|res
operator|=
literal|0x10
operator|+
operator|(
operator|(
name|port
operator|>
literal|4
operator|)
condition|?
literal|0x10
else|:
literal|4
operator|*
name|port
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|cfg
operator|->
name|ports
operator|==
name|PUC_PORT_2S1P
condition|)
block|{
switch|switch
condition|(
name|port
condition|)
block|{
case|case
literal|0
case|:
operator|*
name|res
operator|=
literal|0x10
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|1
case|:
operator|*
name|res
operator|=
literal|0x14
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|2
case|:
operator|*
name|res
operator|=
literal|0x1c
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
block|}
break|break;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_timedia
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
specifier|static
name|uint16_t
name|dual
index|[]
init|=
block|{
literal|0x0002
block|,
literal|0x4036
block|,
literal|0x4037
block|,
literal|0x4038
block|,
literal|0x4078
block|,
literal|0x4079
block|,
literal|0x4085
block|,
literal|0x4088
block|,
literal|0x4089
block|,
literal|0x5037
block|,
literal|0x5078
block|,
literal|0x5079
block|,
literal|0x5085
block|,
literal|0x6079
block|,
literal|0x7079
block|,
literal|0x8079
block|,
literal|0x8137
block|,
literal|0x8138
block|,
literal|0x8237
block|,
literal|0x8238
block|,
literal|0x9079
block|,
literal|0x9137
block|,
literal|0x9138
block|,
literal|0x9237
block|,
literal|0x9238
block|,
literal|0xA079
block|,
literal|0xB079
block|,
literal|0xC079
block|,
literal|0xD079
block|,
literal|0
block|}
decl_stmt|;
specifier|static
name|uint16_t
name|quad
index|[]
init|=
block|{
literal|0x4055
block|,
literal|0x4056
block|,
literal|0x4095
block|,
literal|0x4096
block|,
literal|0x5056
block|,
literal|0x8156
block|,
literal|0x8157
block|,
literal|0x8256
block|,
literal|0x8257
block|,
literal|0x9056
block|,
literal|0x9156
block|,
literal|0x9157
block|,
literal|0x9158
block|,
literal|0x9159
block|,
literal|0x9256
block|,
literal|0x9257
block|,
literal|0xA056
block|,
literal|0xA157
block|,
literal|0xA158
block|,
literal|0xA159
block|,
literal|0xB056
block|,
literal|0xB157
block|,
literal|0
block|}
decl_stmt|;
specifier|static
name|uint16_t
name|octa
index|[]
init|=
block|{
literal|0x4065
block|,
literal|0x4066
block|,
literal|0x5065
block|,
literal|0x5066
block|,
literal|0x8166
block|,
literal|0x9066
block|,
literal|0x9166
block|,
literal|0x9167
block|,
literal|0x9168
block|,
literal|0xA066
block|,
literal|0xA167
block|,
literal|0xA168
block|,
literal|0
block|}
decl_stmt|;
specifier|static
struct|struct
block|{
name|int
name|ports
decl_stmt|;
name|uint16_t
modifier|*
name|ids
decl_stmt|;
block|}
name|subdevs
index|[]
init|=
block|{
block|{
literal|2
block|,
name|dual
block|}
block|,
block|{
literal|4
block|,
name|quad
block|}
block|,
block|{
literal|8
block|,
name|octa
block|}
block|,
block|{
literal|0
block|,
name|NULL
block|}
block|}
struct|;
specifier|static
name|char
name|desc
index|[
literal|64
index|]
decl_stmt|;
name|int
name|dev
decl_stmt|,
name|id
decl_stmt|;
name|uint16_t
name|subdev
decl_stmt|;
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_GET_CLOCK
case|:
if|if
condition|(
name|port
operator|<
literal|2
condition|)
operator|*
name|res
operator|=
name|DEFAULT_RCLK
operator|*
literal|8
expr_stmt|;
else|else
operator|*
name|res
operator|=
name|DEFAULT_RCLK
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_DESC
case|:
name|snprintf
argument_list|(
name|desc
argument_list|,
sizeof|sizeof
argument_list|(
name|desc
argument_list|)
argument_list|,
literal|"Timedia technology %d Port Serial"
argument_list|,
operator|(
name|int
operator|)
name|sc
operator|->
name|sc_cfg_data
argument_list|)
expr_stmt|;
operator|*
name|res
operator|=
operator|(
name|intptr_t
operator|)
name|desc
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_NPORTS
case|:
name|subdev
operator|=
name|pci_get_subdevice
argument_list|(
name|sc
operator|->
name|sc_dev
argument_list|)
expr_stmt|;
name|dev
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|subdevs
index|[
name|dev
index|]
operator|.
name|ports
operator|!=
literal|0
condition|)
block|{
name|id
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|subdevs
index|[
name|dev
index|]
operator|.
name|ids
index|[
name|id
index|]
operator|!=
literal|0
condition|)
block|{
if|if
condition|(
name|subdev
operator|==
name|subdevs
index|[
name|dev
index|]
operator|.
name|ids
index|[
name|id
index|]
condition|)
block|{
name|sc
operator|->
name|sc_cfg_data
operator|=
name|subdevs
index|[
name|dev
index|]
operator|.
name|ports
expr_stmt|;
operator|*
name|res
operator|=
name|sc
operator|->
name|sc_cfg_data
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
name|id
operator|++
expr_stmt|;
block|}
name|dev
operator|++
expr_stmt|;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
case|case
name|PUC_CFG_GET_OFS
case|:
operator|*
name|res
operator|=
operator|(
name|port
operator|==
literal|1
operator|||
name|port
operator|==
literal|3
operator|)
condition|?
literal|8
else|:
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_RID
case|:
operator|*
name|res
operator|=
literal|0x10
operator|+
operator|(
operator|(
name|port
operator|>
literal|3
operator|)
condition|?
name|port
operator|-
literal|2
else|:
name|port
operator|>>
literal|1
operator|)
operator|*
literal|4
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_TYPE
case|:
operator|*
name|res
operator|=
name|PUC_TYPE_SERIAL
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_oxford_pcie
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
specifier|const
name|struct
name|puc_cfg
modifier|*
name|cfg
init|=
name|sc
operator|->
name|sc_cfg
decl_stmt|;
name|int
name|idx
decl_stmt|;
name|struct
name|puc_bar
modifier|*
name|bar
decl_stmt|;
name|uint8_t
name|value
decl_stmt|;
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_SETUP
case|:
name|device_printf
argument_list|(
name|sc
operator|->
name|sc_dev
argument_list|,
literal|"%d UARTs detected\n"
argument_list|,
name|sc
operator|->
name|sc_nports
argument_list|)
expr_stmt|;
comment|/* Set UARTs to enhanced mode */
name|bar
operator|=
name|puc_get_bar
argument_list|(
name|sc
argument_list|,
name|cfg
operator|->
name|rid
argument_list|)
expr_stmt|;
if|if
condition|(
name|bar
operator|==
name|NULL
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
for|for
control|(
name|idx
operator|=
literal|0
init|;
name|idx
operator|<
name|sc
operator|->
name|sc_nports
condition|;
name|idx
operator|++
control|)
block|{
name|value
operator|=
name|bus_read_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x1000
operator|+
operator|(
name|idx
operator|<<
literal|9
operator|)
operator|+
literal|0x92
argument_list|)
expr_stmt|;
name|bus_write_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x1000
operator|+
operator|(
name|idx
operator|<<
literal|9
operator|)
operator|+
literal|0x92
argument_list|,
name|value
operator||
literal|0x10
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_LEN
case|:
operator|*
name|res
operator|=
literal|0x200
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_NPORTS
case|:
comment|/* 		 * Check if we are being called from puc_bfe_attach() 		 * or puc_bfe_probe(). If puc_bfe_probe(), we cannot 		 * puc_get_bar(), so we return a value of 16. This has cosmetic 		 * side-effects at worst; in PUC_CFG_GET_DESC, 		 * (int)sc->sc_cfg_data will not contain the true number of 		 * ports in PUC_CFG_GET_DESC, but we are not implementing that 		 * call for this device family anyway. 		 * 		 * The check is for initialisation of sc->sc_bar[idx], which is 		 * only done in puc_bfe_attach(). 		 */
name|idx
operator|=
literal|0
expr_stmt|;
do|do
block|{
if|if
condition|(
name|sc
operator|->
name|sc_bar
index|[
name|idx
operator|++
index|]
operator|.
name|b_rid
operator|!=
operator|-
literal|1
condition|)
block|{
name|sc
operator|->
name|sc_cfg_data
operator|=
literal|16
expr_stmt|;
operator|*
name|res
operator|=
name|sc
operator|->
name|sc_cfg_data
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
block|}
do|while
condition|(
name|idx
operator|<
name|PUC_PCI_BARS
condition|)
do|;
name|bar
operator|=
name|puc_get_bar
argument_list|(
name|sc
argument_list|,
name|cfg
operator|->
name|rid
argument_list|)
expr_stmt|;
if|if
condition|(
name|bar
operator|==
name|NULL
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
name|value
operator|=
name|bus_read_1
argument_list|(
name|bar
operator|->
name|b_res
argument_list|,
literal|0x04
argument_list|)
expr_stmt|;
if|if
condition|(
name|value
operator|==
literal|0
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
name|sc
operator|->
name|sc_cfg_data
operator|=
name|value
expr_stmt|;
operator|*
name|res
operator|=
name|sc
operator|->
name|sc_cfg_data
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_OFS
case|:
operator|*
name|res
operator|=
literal|0x1000
operator|+
operator|(
name|port
operator|<<
literal|9
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_TYPE
case|:
operator|*
name|res
operator|=
name|PUC_TYPE_SERIAL
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|puc_config_titan
parameter_list|(
name|struct
name|puc_softc
modifier|*
name|sc
parameter_list|,
name|enum
name|puc_cfg_cmd
name|cmd
parameter_list|,
name|int
name|port
parameter_list|,
name|intptr_t
modifier|*
name|res
parameter_list|)
block|{
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|PUC_CFG_GET_OFS
case|:
operator|*
name|res
operator|=
operator|(
name|port
operator|<
literal|3
operator|)
condition|?
literal|0
else|:
operator|(
name|port
operator|-
literal|2
operator|)
operator|<<
literal|3
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|PUC_CFG_GET_RID
case|:
operator|*
name|res
operator|=
literal|0x14
operator|+
operator|(
operator|(
name|port
operator|>=
literal|2
operator|)
condition|?
literal|0x0c
else|:
name|port
operator|<<
literal|2
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
break|break;
block|}
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

end_unit

