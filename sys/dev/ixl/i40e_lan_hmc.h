begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/******************************************************************************    Copyright (c) 2013-2014, Intel Corporation    All rights reserved.      Redistribution and use in source and binary forms, with or without    modification, are permitted provided that the following conditions are met:       1. Redistributions of source code must retain the above copyright notice,        this list of conditions and the following disclaimer.       2. Redistributions in binary form must reproduce the above copyright        notice, this list of conditions and the following disclaimer in the        documentation and/or other materials provided with the distribution.       3. Neither the name of the Intel Corporation nor the names of its        contributors may be used to endorse or promote products derived from        this software without specific prior written permission.      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE    ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE    LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR    CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE   POSSIBILITY OF SUCH DAMAGE.  ******************************************************************************/
end_comment

begin_comment
comment|/*$FreeBSD$*/
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|_I40E_LAN_HMC_H_
end_ifndef

begin_define
define|#
directive|define
name|_I40E_LAN_HMC_H_
end_define

begin_comment
comment|/* forward-declare the HW struct for the compiler */
end_comment

begin_struct_decl
struct_decl|struct
name|i40e_hw
struct_decl|;
end_struct_decl

begin_comment
comment|/* HMC element context information */
end_comment

begin_comment
comment|/* Rx queue context data  *  * The sizes of the variables may be larger than needed due to crossing byte  * boundaries. If we do not have the width of the variable set to the correct  * size then we could end up shifting bits off the top of the variable when the  * variable is at the top of a byte and crosses over into the next byte.  */
end_comment

begin_struct
struct|struct
name|i40e_hmc_obj_rxq
block|{
name|u16
name|head
decl_stmt|;
name|u16
name|cpuid
decl_stmt|;
comment|/* bigger than needed, see above for reason */
name|u64
name|base
decl_stmt|;
name|u16
name|qlen
decl_stmt|;
define|#
directive|define
name|I40E_RXQ_CTX_DBUFF_SHIFT
value|7
name|u16
name|dbuff
decl_stmt|;
comment|/* bigger than needed, see above for reason */
define|#
directive|define
name|I40E_RXQ_CTX_HBUFF_SHIFT
value|6
name|u16
name|hbuff
decl_stmt|;
comment|/* bigger than needed, see above for reason */
name|u8
name|dtype
decl_stmt|;
name|u8
name|dsize
decl_stmt|;
name|u8
name|crcstrip
decl_stmt|;
name|u8
name|fc_ena
decl_stmt|;
name|u8
name|l2tsel
decl_stmt|;
name|u8
name|hsplit_0
decl_stmt|;
name|u8
name|hsplit_1
decl_stmt|;
name|u8
name|showiv
decl_stmt|;
name|u32
name|rxmax
decl_stmt|;
comment|/* bigger than needed, see above for reason */
name|u8
name|tphrdesc_ena
decl_stmt|;
name|u8
name|tphwdesc_ena
decl_stmt|;
name|u8
name|tphdata_ena
decl_stmt|;
name|u8
name|tphhead_ena
decl_stmt|;
name|u16
name|lrxqthresh
decl_stmt|;
comment|/* bigger than needed, see above for reason */
name|u8
name|prefena
decl_stmt|;
comment|/* NOTE: normally must be set to 1 at init */
block|}
struct|;
end_struct

begin_comment
comment|/* Tx queue context data * * The sizes of the variables may be larger than needed due to crossing byte * boundaries. If we do not have the width of the variable set to the correct * size then we could end up shifting bits off the top of the variable when the * variable is at the top of a byte and crosses over into the next byte. */
end_comment

begin_struct
struct|struct
name|i40e_hmc_obj_txq
block|{
name|u16
name|head
decl_stmt|;
name|u8
name|new_context
decl_stmt|;
name|u64
name|base
decl_stmt|;
name|u8
name|fc_ena
decl_stmt|;
name|u8
name|timesync_ena
decl_stmt|;
name|u8
name|fd_ena
decl_stmt|;
name|u8
name|alt_vlan_ena
decl_stmt|;
name|u16
name|thead_wb
decl_stmt|;
name|u8
name|cpuid
decl_stmt|;
name|u8
name|head_wb_ena
decl_stmt|;
name|u16
name|qlen
decl_stmt|;
name|u8
name|tphrdesc_ena
decl_stmt|;
name|u8
name|tphrpacket_ena
decl_stmt|;
name|u8
name|tphwdesc_ena
decl_stmt|;
name|u64
name|head_wb_addr
decl_stmt|;
name|u32
name|crc
decl_stmt|;
name|u16
name|rdylist
decl_stmt|;
name|u8
name|rdylist_act
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* for hsplit_0 field of Rx HMC context */
end_comment

begin_enum
enum|enum
name|i40e_hmc_obj_rx_hsplit_0
block|{
name|I40E_HMC_OBJ_RX_HSPLIT_0_NO_SPLIT
init|=
literal|0
block|,
name|I40E_HMC_OBJ_RX_HSPLIT_0_SPLIT_L2
init|=
literal|1
block|,
name|I40E_HMC_OBJ_RX_HSPLIT_0_SPLIT_IP
init|=
literal|2
block|,
name|I40E_HMC_OBJ_RX_HSPLIT_0_SPLIT_TCP_UDP
init|=
literal|4
block|,
name|I40E_HMC_OBJ_RX_HSPLIT_0_SPLIT_SCTP
init|=
literal|8
block|, }
enum|;
end_enum

begin_comment
comment|/* fcoe_cntx and fcoe_filt are for debugging purpose only */
end_comment

begin_struct
struct|struct
name|i40e_hmc_obj_fcoe_cntx
block|{
name|u32
name|rsv
index|[
literal|32
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|i40e_hmc_obj_fcoe_filt
block|{
name|u32
name|rsv
index|[
literal|8
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* Context sizes for LAN objects */
end_comment

begin_enum
enum|enum
name|i40e_hmc_lan_object_size
block|{
name|I40E_HMC_LAN_OBJ_SZ_8
init|=
literal|0x3
block|,
name|I40E_HMC_LAN_OBJ_SZ_16
init|=
literal|0x4
block|,
name|I40E_HMC_LAN_OBJ_SZ_32
init|=
literal|0x5
block|,
name|I40E_HMC_LAN_OBJ_SZ_64
init|=
literal|0x6
block|,
name|I40E_HMC_LAN_OBJ_SZ_128
init|=
literal|0x7
block|,
name|I40E_HMC_LAN_OBJ_SZ_256
init|=
literal|0x8
block|,
name|I40E_HMC_LAN_OBJ_SZ_512
init|=
literal|0x9
block|, }
enum|;
end_enum

begin_define
define|#
directive|define
name|I40E_HMC_L2OBJ_BASE_ALIGNMENT
value|512
end_define

begin_define
define|#
directive|define
name|I40E_HMC_OBJ_SIZE_TXQ
value|128
end_define

begin_define
define|#
directive|define
name|I40E_HMC_OBJ_SIZE_RXQ
value|32
end_define

begin_define
define|#
directive|define
name|I40E_HMC_OBJ_SIZE_FCOE_CNTX
value|64
end_define

begin_define
define|#
directive|define
name|I40E_HMC_OBJ_SIZE_FCOE_FILT
value|64
end_define

begin_enum
enum|enum
name|i40e_hmc_lan_rsrc_type
block|{
name|I40E_HMC_LAN_FULL
init|=
literal|0
block|,
name|I40E_HMC_LAN_TX
init|=
literal|1
block|,
name|I40E_HMC_LAN_RX
init|=
literal|2
block|,
name|I40E_HMC_FCOE_CTX
init|=
literal|3
block|,
name|I40E_HMC_FCOE_FILT
init|=
literal|4
block|,
name|I40E_HMC_LAN_MAX
init|=
literal|5
block|}
enum|;
end_enum

begin_enum
enum|enum
name|i40e_hmc_model
block|{
name|I40E_HMC_MODEL_DIRECT_PREFERRED
init|=
literal|0
block|,
name|I40E_HMC_MODEL_DIRECT_ONLY
init|=
literal|1
block|,
name|I40E_HMC_MODEL_PAGED_ONLY
init|=
literal|2
block|,
name|I40E_HMC_MODEL_UNKNOWN
block|, }
enum|;
end_enum

begin_struct
struct|struct
name|i40e_hmc_lan_create_obj_info
block|{
name|struct
name|i40e_hmc_info
modifier|*
name|hmc_info
decl_stmt|;
name|u32
name|rsrc_type
decl_stmt|;
name|u32
name|start_idx
decl_stmt|;
name|u32
name|count
decl_stmt|;
name|enum
name|i40e_sd_entry_type
name|entry_type
decl_stmt|;
name|u64
name|direct_mode_sz
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|i40e_hmc_lan_delete_obj_info
block|{
name|struct
name|i40e_hmc_info
modifier|*
name|hmc_info
decl_stmt|;
name|u32
name|rsrc_type
decl_stmt|;
name|u32
name|start_idx
decl_stmt|;
name|u32
name|count
decl_stmt|;
block|}
struct|;
end_struct

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_init_lan_hmc
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|txq_num
parameter_list|,
name|u32
name|rxq_num
parameter_list|,
name|u32
name|fcoe_cntx_num
parameter_list|,
name|u32
name|fcoe_filt_num
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_configure_lan_hmc
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|enum
name|i40e_hmc_model
name|model
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_shutdown_lan_hmc
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|u64
name|i40e_calculate_l2fpm_size
parameter_list|(
name|u32
name|txq_num
parameter_list|,
name|u32
name|rxq_num
parameter_list|,
name|u32
name|fcoe_cntx_num
parameter_list|,
name|u32
name|fcoe_filt_num
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_get_lan_tx_queue_context
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|queue
parameter_list|,
name|struct
name|i40e_hmc_obj_txq
modifier|*
name|s
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_clear_lan_tx_queue_context
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|queue
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_set_lan_tx_queue_context
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|queue
parameter_list|,
name|struct
name|i40e_hmc_obj_txq
modifier|*
name|s
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_get_lan_rx_queue_context
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|queue
parameter_list|,
name|struct
name|i40e_hmc_obj_rxq
modifier|*
name|s
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_clear_lan_rx_queue_context
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|queue
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_set_lan_rx_queue_context
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|queue
parameter_list|,
name|struct
name|i40e_hmc_obj_rxq
modifier|*
name|s
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_create_lan_hmc_object
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|struct
name|i40e_hmc_lan_create_obj_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|enum
name|i40e_status_code
name|i40e_delete_lan_hmc_object
parameter_list|(
name|struct
name|i40e_hw
modifier|*
name|hw
parameter_list|,
name|struct
name|i40e_hmc_lan_delete_obj_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* _I40E_LAN_HMC_H_ */
end_comment

end_unit

