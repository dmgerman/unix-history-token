begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2008-2009 Atheros Communications Inc.  *  * Permission to use, copy, modify, and/or distribute this software for any  * purpose with or without fee is hereby granted, provided that the above  * copyright notice and this permission notice appear in all copies.  *  * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES  * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF  * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR  * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES  * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN  * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF  * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.  *  * $FreeBSD$  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|__AH_EEPROM_9287_H__
end_ifndef

begin_define
define|#
directive|define
name|__AH_EEPROM_9287_H__
end_define

begin_define
define|#
directive|define
name|OLC_FOR_AR9287_10_LATER
value|(AR_SREV_9287_11_OR_LATER(ah)&& \ 				 ah->eep_ops->get_eeprom(ah, EEP_OL_PWRCTRL))
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_VER
value|0xE
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_VER_MINOR_MASK
value|0xFFF
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_MINOR_VER_1
value|0x1
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_MINOR_VER_2
value|0x2
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_MINOR_VER_3
value|0x3
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_MINOR_VER
value|AR9287_EEP_MINOR_VER_3
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_MINOR_VER_b
value|AR9287_EEP_MINOR_VER
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_NO_BACK_VER
value|AR9287_EEP_MINOR_VER_1
end_define

begin_define
define|#
directive|define
name|AR9287_RDEXT_DEFAULT
value|0x1F
end_define

begin_define
define|#
directive|define
name|AR9287_EEP_START_LOC
value|128
end_define

begin_define
define|#
directive|define
name|AR9287_HTC_EEP_START_LOC
value|256
end_define

begin_define
define|#
directive|define
name|AR9287_NUM_2G_CAL_PIERS
value|3
end_define

begin_define
define|#
directive|define
name|AR9287_NUM_2G_CCK_TARGET_POWERS
value|3
end_define

begin_define
define|#
directive|define
name|AR9287_NUM_2G_20_TARGET_POWERS
value|3
end_define

begin_define
define|#
directive|define
name|AR9287_NUM_2G_40_TARGET_POWERS
value|3
end_define

begin_define
define|#
directive|define
name|AR9287_NUM_CTLS
value|12
end_define

begin_define
define|#
directive|define
name|AR9287_NUM_BAND_EDGES
value|4
end_define

begin_define
define|#
directive|define
name|AR9287_PD_GAIN_ICEPTS
value|1
end_define

begin_define
define|#
directive|define
name|AR9287_EEPMISC_BIG_ENDIAN
value|0x01
end_define

begin_define
define|#
directive|define
name|AR9287_EEPMISC_WOW
value|0x02
end_define

begin_define
define|#
directive|define
name|AR9287_MAX_CHAINS
value|2
end_define

begin_define
define|#
directive|define
name|AR9287_ANT_16S
value|32
end_define

begin_define
define|#
directive|define
name|AR9287_DATA_SZ
value|32
end_define

begin_define
define|#
directive|define
name|AR9287_PWR_TABLE_OFFSET_DB
value|-5
end_define

begin_define
define|#
directive|define
name|AR9287_CHECKSUM_LOCATION
value|(AR9287_EEP_START_LOC + 1)
end_define

begin_struct
struct|struct
name|base_eep_ar9287_header
block|{
name|uint16_t
name|version
decl_stmt|;
comment|/* Swapped w/ length; check ah_eeprom_v14.h */
name|uint16_t
name|checksum
decl_stmt|;
name|uint16_t
name|length
decl_stmt|;
name|uint8_t
name|opCapFlags
decl_stmt|;
name|uint8_t
name|eepMisc
decl_stmt|;
name|uint16_t
name|regDmn
index|[
literal|2
index|]
decl_stmt|;
name|uint8_t
name|macAddr
index|[
literal|6
index|]
decl_stmt|;
name|uint8_t
name|rxMask
decl_stmt|;
name|uint8_t
name|txMask
decl_stmt|;
name|uint16_t
name|rfSilent
decl_stmt|;
name|uint16_t
name|blueToothOptions
decl_stmt|;
name|uint16_t
name|deviceCap
decl_stmt|;
name|uint32_t
name|binBuildNumber
decl_stmt|;
name|uint8_t
name|deviceType
decl_stmt|;
name|uint8_t
name|openLoopPwrCntl
decl_stmt|;
name|int8_t
name|pwrTableOffset
decl_stmt|;
name|int8_t
name|tempSensSlope
decl_stmt|;
name|int8_t
name|tempSensSlopePalOn
decl_stmt|;
name|uint8_t
name|futureBase
index|[
literal|29
index|]
decl_stmt|;
block|}
name|__packed
struct|;
end_struct

begin_struct
struct|struct
name|modal_eep_ar9287_header
block|{
name|uint32_t
name|antCtrlChain
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint32_t
name|antCtrlCommon
decl_stmt|;
name|int8_t
name|antennaGainCh
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint8_t
name|switchSettling
decl_stmt|;
name|uint8_t
name|txRxAttenCh
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint8_t
name|rxTxMarginCh
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|int8_t
name|adcDesiredSize
decl_stmt|;
name|uint8_t
name|txEndToXpaOff
decl_stmt|;
name|uint8_t
name|txEndToRxOn
decl_stmt|;
name|uint8_t
name|txFrameToXpaOn
decl_stmt|;
name|uint8_t
name|thresh62
decl_stmt|;
name|int8_t
name|noiseFloorThreshCh
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint8_t
name|xpdGain
decl_stmt|;
name|uint8_t
name|xpd
decl_stmt|;
name|int8_t
name|iqCalICh
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|int8_t
name|iqCalQCh
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint8_t
name|pdGainOverlap
decl_stmt|;
name|uint8_t
name|xpaBiasLvl
decl_stmt|;
name|uint8_t
name|txFrameToDataStart
decl_stmt|;
name|uint8_t
name|txFrameToPaOn
decl_stmt|;
name|uint8_t
name|ht40PowerIncForPdadc
decl_stmt|;
name|uint8_t
name|bswAtten
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint8_t
name|bswMargin
index|[
name|AR9287_MAX_CHAINS
index|]
decl_stmt|;
name|uint8_t
name|swSettleHt40
decl_stmt|;
name|uint8_t
name|version
decl_stmt|;
name|uint8_t
name|db1
decl_stmt|;
name|uint8_t
name|db2
decl_stmt|;
name|uint8_t
name|ob_cck
decl_stmt|;
name|uint8_t
name|ob_psk
decl_stmt|;
name|uint8_t
name|ob_qam
decl_stmt|;
name|uint8_t
name|ob_pal_off
decl_stmt|;
name|uint8_t
name|futureModal
index|[
literal|30
index|]
decl_stmt|;
name|SPUR_CHAN
name|spurChans
index|[
name|AR5416_EEPROM_MODAL_SPURS
index|]
decl_stmt|;
block|}
name|__packed
struct|;
end_struct

begin_struct
struct|struct
name|cal_data_op_loop_ar9287
block|{
name|uint8_t
name|pwrPdg
index|[
literal|2
index|]
index|[
literal|5
index|]
decl_stmt|;
name|uint8_t
name|vpdPdg
index|[
literal|2
index|]
index|[
literal|5
index|]
decl_stmt|;
name|uint8_t
name|pcdac
index|[
literal|2
index|]
index|[
literal|5
index|]
decl_stmt|;
name|uint8_t
name|empty
index|[
literal|2
index|]
index|[
literal|5
index|]
decl_stmt|;
block|}
name|__packed
struct|;
end_struct

begin_struct
struct|struct
name|cal_data_per_freq_ar9287
block|{
name|uint8_t
name|pwrPdg
index|[
name|AR5416_NUM_PD_GAINS
index|]
index|[
name|AR9287_PD_GAIN_ICEPTS
index|]
decl_stmt|;
name|uint8_t
name|vpdPdg
index|[
name|AR5416_NUM_PD_GAINS
index|]
index|[
name|AR9287_PD_GAIN_ICEPTS
index|]
decl_stmt|;
block|}
name|__packed
struct|;
end_struct

begin_union
union|union
name|cal_data_per_freq_ar9287_u
block|{
name|struct
name|cal_data_op_loop_ar9287
name|calDataOpen
decl_stmt|;
name|struct
name|cal_data_per_freq_ar9287
name|calDataClose
decl_stmt|;
block|}
name|__packed
union|;
end_union

begin_struct
struct|struct
name|cal_ctl_data_ar9287
block|{
name|CAL_CTL_EDGES
name|ctlEdges
index|[
name|AR9287_MAX_CHAINS
index|]
index|[
name|AR9287_NUM_BAND_EDGES
index|]
decl_stmt|;
block|}
name|__packed
struct|;
end_struct

begin_struct
struct|struct
name|ar9287_eeprom
block|{
name|struct
name|base_eep_ar9287_header
name|baseEepHeader
decl_stmt|;
name|uint8_t
name|custData
index|[
name|AR9287_DATA_SZ
index|]
decl_stmt|;
name|struct
name|modal_eep_ar9287_header
name|modalHeader
decl_stmt|;
name|uint8_t
name|calFreqPier2G
index|[
name|AR9287_NUM_2G_CAL_PIERS
index|]
decl_stmt|;
name|union
name|cal_data_per_freq_ar9287_u
name|calPierData2G
index|[
name|AR9287_MAX_CHAINS
index|]
index|[
name|AR9287_NUM_2G_CAL_PIERS
index|]
decl_stmt|;
name|CAL_TARGET_POWER_LEG
name|calTargetPowerCck
index|[
name|AR9287_NUM_2G_CCK_TARGET_POWERS
index|]
decl_stmt|;
name|CAL_TARGET_POWER_LEG
name|calTargetPower2G
index|[
name|AR9287_NUM_2G_20_TARGET_POWERS
index|]
decl_stmt|;
name|CAL_TARGET_POWER_HT
name|calTargetPower2GHT20
index|[
name|AR9287_NUM_2G_20_TARGET_POWERS
index|]
decl_stmt|;
name|CAL_TARGET_POWER_HT
name|calTargetPower2GHT40
index|[
name|AR9287_NUM_2G_40_TARGET_POWERS
index|]
decl_stmt|;
name|uint8_t
name|ctlIndex
index|[
name|AR9287_NUM_CTLS
index|]
decl_stmt|;
name|struct
name|cal_ctl_data_ar9287
name|ctlData
index|[
name|AR9287_NUM_CTLS
index|]
decl_stmt|;
name|uint8_t
name|padding
decl_stmt|;
block|}
name|__packed
struct|;
end_struct

begin_typedef
typedef|typedef
struct|struct
block|{
name|struct
name|ar9287_eeprom
name|ee_base
decl_stmt|;
define|#
directive|define
name|NUM_EDGES
value|8
name|uint16_t
name|ee_numCtls
decl_stmt|;
name|RD_EDGES_POWER
name|ee_rdEdgesPower
index|[
name|NUM_EDGES
operator|*
name|AR9287_NUM_CTLS
index|]
decl_stmt|;
comment|/* XXX these are dynamically calculated for use by shared code */
name|int8_t
name|ee_antennaGainMax
index|[
literal|2
index|]
decl_stmt|;
block|}
name|HAL_EEPROM_9287
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|modal_eep_ar9287_header
name|MODAL_EEP_9287_HEADER
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|struct
name|base_eep_ar9287_header
name|BASE_EEP_9287_HEADER
typedef|;
end_typedef

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* __AH_EEPROM_9287_H__ */
end_comment

end_unit

