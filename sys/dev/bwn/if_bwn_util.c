begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2009-2010 Weongyo Jeong<weongyo@freebsd.org>  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer,  *    without modification.  * 2. Redistributions in binary form must reproduce at minimum a disclaimer  *    similar to the "NO WARRANTY" disclaimer below ("Disclaimer") and any  *    redistribution must be conditioned upon including a substantially  *    similar Disclaimer requirement for further binary redistribution.  *  * NO WARRANTY  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS  * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT  * LIMITED TO, THE IMPLIED WARRANTIES OF NONINFRINGEMENT, MERCHANTIBILITY  * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL  * THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE LIABLE FOR SPECIAL, EXEMPLARY,  * OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER  * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF  * THE POSSIBILITY OF SUCH DAMAGES.  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/*  * The Broadcom Wireless LAN controller driver.  */
end_comment

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/systm.h>
end_include

begin_include
include|#
directive|include
file|<sys/kernel.h>
end_include

begin_include
include|#
directive|include
file|<sys/malloc.h>
end_include

begin_include
include|#
directive|include
file|<sys/module.h>
end_include

begin_include
include|#
directive|include
file|<sys/endian.h>
end_include

begin_include
include|#
directive|include
file|<sys/errno.h>
end_include

begin_include
include|#
directive|include
file|<sys/firmware.h>
end_include

begin_include
include|#
directive|include
file|<sys/lock.h>
end_include

begin_include
include|#
directive|include
file|<sys/mutex.h>
end_include

begin_include
include|#
directive|include
file|<machine/bus.h>
end_include

begin_include
include|#
directive|include
file|<machine/resource.h>
end_include

begin_include
include|#
directive|include
file|<sys/bus.h>
end_include

begin_include
include|#
directive|include
file|<sys/rman.h>
end_include

begin_include
include|#
directive|include
file|<sys/socket.h>
end_include

begin_include
include|#
directive|include
file|<sys/sockio.h>
end_include

begin_include
include|#
directive|include
file|<net/ethernet.h>
end_include

begin_include
include|#
directive|include
file|<net/if.h>
end_include

begin_include
include|#
directive|include
file|<net/if_var.h>
end_include

begin_include
include|#
directive|include
file|<net/if_arp.h>
end_include

begin_include
include|#
directive|include
file|<net/if_dl.h>
end_include

begin_include
include|#
directive|include
file|<net/if_llc.h>
end_include

begin_include
include|#
directive|include
file|<net/if_media.h>
end_include

begin_include
include|#
directive|include
file|<net/if_types.h>
end_include

begin_include
include|#
directive|include
file|<dev/pci/pcivar.h>
end_include

begin_include
include|#
directive|include
file|<dev/pci/pcireg.h>
end_include

begin_include
include|#
directive|include
file|<dev/siba/siba_ids.h>
end_include

begin_include
include|#
directive|include
file|<dev/siba/sibareg.h>
end_include

begin_include
include|#
directive|include
file|<dev/siba/sibavar.h>
end_include

begin_include
include|#
directive|include
file|<net80211/ieee80211_var.h>
end_include

begin_include
include|#
directive|include
file|<net80211/ieee80211_radiotap.h>
end_include

begin_include
include|#
directive|include
file|<net80211/ieee80211_regdomain.h>
end_include

begin_include
include|#
directive|include
file|<net80211/ieee80211_phy.h>
end_include

begin_include
include|#
directive|include
file|<net80211/ieee80211_ratectl.h>
end_include

begin_include
include|#
directive|include
file|<dev/bwn/if_bwnreg.h>
end_include

begin_include
include|#
directive|include
file|<dev/bwn/if_bwnvar.h>
end_include

begin_include
include|#
directive|include
file|<dev/bwn/if_bwn_chipid.h>
end_include

begin_include
include|#
directive|include
file|<dev/bwn/if_bwn_debug.h>
end_include

begin_include
include|#
directive|include
file|<dev/bwn/if_bwn_misc.h>
end_include

begin_include
include|#
directive|include
file|<dev/bwn/if_bwn_util.h>
end_include

begin_function
name|unsigned
name|int
name|bwn_sqrt
parameter_list|(
name|struct
name|bwn_mac
modifier|*
name|mac
parameter_list|,
name|unsigned
name|int
name|x
parameter_list|)
block|{
comment|/* Table holding (10 * sqrt(x)) for x between 1 and 256. */
specifier|static
name|uint8_t
name|sqrt_table
index|[
literal|256
index|]
init|=
block|{
literal|10
block|,
literal|14
block|,
literal|17
block|,
literal|20
block|,
literal|22
block|,
literal|24
block|,
literal|26
block|,
literal|28
block|,
literal|30
block|,
literal|31
block|,
literal|33
block|,
literal|34
block|,
literal|36
block|,
literal|37
block|,
literal|38
block|,
literal|40
block|,
literal|41
block|,
literal|42
block|,
literal|43
block|,
literal|44
block|,
literal|45
block|,
literal|46
block|,
literal|47
block|,
literal|48
block|,
literal|50
block|,
literal|50
block|,
literal|51
block|,
literal|52
block|,
literal|53
block|,
literal|54
block|,
literal|55
block|,
literal|56
block|,
literal|57
block|,
literal|58
block|,
literal|59
block|,
literal|60
block|,
literal|60
block|,
literal|61
block|,
literal|62
block|,
literal|63
block|,
literal|64
block|,
literal|64
block|,
literal|65
block|,
literal|66
block|,
literal|67
block|,
literal|67
block|,
literal|68
block|,
literal|69
block|,
literal|70
block|,
literal|70
block|,
literal|71
block|,
literal|72
block|,
literal|72
block|,
literal|73
block|,
literal|74
block|,
literal|74
block|,
literal|75
block|,
literal|76
block|,
literal|76
block|,
literal|77
block|,
literal|78
block|,
literal|78
block|,
literal|79
block|,
literal|80
block|,
literal|80
block|,
literal|81
block|,
literal|81
block|,
literal|82
block|,
literal|83
block|,
literal|83
block|,
literal|84
block|,
literal|84
block|,
literal|85
block|,
literal|86
block|,
literal|86
block|,
literal|87
block|,
literal|87
block|,
literal|88
block|,
literal|88
block|,
literal|89
block|,
literal|90
block|,
literal|90
block|,
literal|91
block|,
literal|91
block|,
literal|92
block|,
literal|92
block|,
literal|93
block|,
literal|93
block|,
literal|94
block|,
literal|94
block|,
literal|95
block|,
literal|95
block|,
literal|96
block|,
literal|96
block|,
literal|97
block|,
literal|97
block|,
literal|98
block|,
literal|98
block|,
literal|99
block|,
literal|100
block|,
literal|100
block|,
literal|100
block|,
literal|101
block|,
literal|101
block|,
literal|102
block|,
literal|102
block|,
literal|103
block|,
literal|103
block|,
literal|104
block|,
literal|104
block|,
literal|105
block|,
literal|105
block|,
literal|106
block|,
literal|106
block|,
literal|107
block|,
literal|107
block|,
literal|108
block|,
literal|108
block|,
literal|109
block|,
literal|109
block|,
literal|110
block|,
literal|110
block|,
literal|110
block|,
literal|111
block|,
literal|111
block|,
literal|112
block|,
literal|112
block|,
literal|113
block|,
literal|113
block|,
literal|114
block|,
literal|114
block|,
literal|114
block|,
literal|115
block|,
literal|115
block|,
literal|116
block|,
literal|116
block|,
literal|117
block|,
literal|117
block|,
literal|117
block|,
literal|118
block|,
literal|118
block|,
literal|119
block|,
literal|119
block|,
literal|120
block|,
literal|120
block|,
literal|120
block|,
literal|121
block|,
literal|121
block|,
literal|122
block|,
literal|122
block|,
literal|122
block|,
literal|123
block|,
literal|123
block|,
literal|124
block|,
literal|124
block|,
literal|124
block|,
literal|125
block|,
literal|125
block|,
literal|126
block|,
literal|126
block|,
literal|126
block|,
literal|127
block|,
literal|127
block|,
literal|128
block|,
literal|128
block|,
literal|128
block|,
literal|129
block|,
literal|129
block|,
literal|130
block|,
literal|130
block|,
literal|130
block|,
literal|131
block|,
literal|131
block|,
literal|131
block|,
literal|132
block|,
literal|132
block|,
literal|133
block|,
literal|133
block|,
literal|133
block|,
literal|134
block|,
literal|134
block|,
literal|134
block|,
literal|135
block|,
literal|135
block|,
literal|136
block|,
literal|136
block|,
literal|136
block|,
literal|137
block|,
literal|137
block|,
literal|137
block|,
literal|138
block|,
literal|138
block|,
literal|138
block|,
literal|139
block|,
literal|139
block|,
literal|140
block|,
literal|140
block|,
literal|140
block|,
literal|141
block|,
literal|141
block|,
literal|141
block|,
literal|142
block|,
literal|142
block|,
literal|142
block|,
literal|143
block|,
literal|143
block|,
literal|143
block|,
literal|144
block|,
literal|144
block|,
literal|144
block|,
literal|145
block|,
literal|145
block|,
literal|145
block|,
literal|146
block|,
literal|146
block|,
literal|146
block|,
literal|147
block|,
literal|147
block|,
literal|147
block|,
literal|148
block|,
literal|148
block|,
literal|148
block|,
literal|149
block|,
literal|149
block|,
literal|150
block|,
literal|150
block|,
literal|150
block|,
literal|150
block|,
literal|151
block|,
literal|151
block|,
literal|151
block|,
literal|152
block|,
literal|152
block|,
literal|152
block|,
literal|153
block|,
literal|153
block|,
literal|153
block|,
literal|154
block|,
literal|154
block|,
literal|154
block|,
literal|155
block|,
literal|155
block|,
literal|155
block|,
literal|156
block|,
literal|156
block|,
literal|156
block|,
literal|157
block|,
literal|157
block|,
literal|157
block|,
literal|158
block|,
literal|158
block|,
literal|158
block|,
literal|159
block|,
literal|159
block|,
literal|159
block|,
literal|160
block|}
decl_stmt|;
if|if
condition|(
name|x
operator|==
literal|0
condition|)
return|return
operator|(
literal|0
operator|)
return|;
if|if
condition|(
name|x
operator|>=
literal|256
condition|)
block|{
name|unsigned
name|int
name|tmp
decl_stmt|;
for|for
control|(
name|tmp
operator|=
literal|0
init|;
name|x
operator|>=
operator|(
literal|2
operator|*
name|tmp
operator|)
operator|+
literal|1
condition|;
name|x
operator|-=
operator|(
literal|2
operator|*
name|tmp
operator|++
operator|)
operator|+
literal|1
control|)
comment|/* do nothing */
empty_stmt|;
return|return
operator|(
name|tmp
operator|)
return|;
block|}
return|return
operator|(
name|sqrt_table
index|[
name|x
operator|-
literal|1
index|]
operator|/
literal|10
operator|)
return|;
block|}
end_function

end_unit

