begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2013-2015, Mellanox Technologies, Ltd.  All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY AUTHOR AND CONTRIBUTORS `AS IS' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL AUTHOR OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  *  * $FreeBSD$  */
end_comment

begin_include
include|#
directive|include
file|<dev/mlx5/driver.h>
end_include

begin_include
include|#
directive|include
file|<linux/module.h>
end_include

begin_include
include|#
directive|include
file|"mlx5_core.h"
end_include

begin_function
specifier|static
name|int
name|mlx5_cmd_query_adapter
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|,
name|u32
modifier|*
name|out
parameter_list|,
name|int
name|outlen
parameter_list|)
block|{
name|u32
name|in
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|query_adapter_in
argument_list|)
index|]
decl_stmt|;
name|int
name|err
decl_stmt|;
name|memset
argument_list|(
name|in
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|)
expr_stmt|;
name|MLX5_SET
argument_list|(
name|query_adapter_in
argument_list|,
name|in
argument_list|,
name|opcode
argument_list|,
name|MLX5_CMD_OP_QUERY_ADAPTER
argument_list|)
expr_stmt|;
name|err
operator|=
name|mlx5_cmd_exec_check_status
argument_list|(
name|dev
argument_list|,
name|in
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|,
name|out
argument_list|,
name|outlen
argument_list|)
expr_stmt|;
return|return
name|err
return|;
block|}
end_function

begin_function
name|int
name|mlx5_query_board_id
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|)
block|{
name|u32
modifier|*
name|out
decl_stmt|;
name|int
name|outlen
init|=
name|MLX5_ST_SZ_BYTES
argument_list|(
name|query_adapter_out
argument_list|)
decl_stmt|;
name|int
name|err
decl_stmt|;
name|out
operator|=
name|kzalloc
argument_list|(
name|outlen
argument_list|,
name|GFP_KERNEL
argument_list|)
expr_stmt|;
name|err
operator|=
name|mlx5_cmd_query_adapter
argument_list|(
name|dev
argument_list|,
name|out
argument_list|,
name|outlen
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
goto|goto
name|out_out
goto|;
name|memcpy
argument_list|(
name|dev
operator|->
name|board_id
argument_list|,
name|MLX5_ADDR_OF
argument_list|(
name|query_adapter_out
argument_list|,
name|out
argument_list|,
name|query_adapter_struct
operator|.
name|vsd_contd_psid
argument_list|)
argument_list|,
name|MLX5_FLD_SZ_BYTES
argument_list|(
name|query_adapter_out
argument_list|,
name|query_adapter_struct
operator|.
name|vsd_contd_psid
argument_list|)
argument_list|)
expr_stmt|;
name|out_out
label|:
name|kfree
argument_list|(
name|out
argument_list|)
expr_stmt|;
return|return
name|err
return|;
block|}
end_function

begin_function
name|int
name|mlx5_core_query_vendor_id
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|mdev
parameter_list|,
name|u32
modifier|*
name|vendor_id
parameter_list|)
block|{
name|u32
modifier|*
name|out
decl_stmt|;
name|int
name|outlen
init|=
name|MLX5_ST_SZ_BYTES
argument_list|(
name|query_adapter_out
argument_list|)
decl_stmt|;
name|int
name|err
decl_stmt|;
name|out
operator|=
name|kzalloc
argument_list|(
name|outlen
argument_list|,
name|GFP_KERNEL
argument_list|)
expr_stmt|;
name|err
operator|=
name|mlx5_cmd_query_adapter
argument_list|(
name|mdev
argument_list|,
name|out
argument_list|,
name|outlen
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
goto|goto
name|out_out
goto|;
operator|*
name|vendor_id
operator|=
name|MLX5_GET
argument_list|(
name|query_adapter_out
argument_list|,
name|out
argument_list|,
name|query_adapter_struct
operator|.
name|ieee_vendor_id
argument_list|)
expr_stmt|;
name|out_out
label|:
name|kfree
argument_list|(
name|out
argument_list|)
expr_stmt|;
return|return
name|err
return|;
block|}
end_function

begin_expr_stmt
name|EXPORT_SYMBOL
argument_list|(
name|mlx5_core_query_vendor_id
argument_list|)
expr_stmt|;
end_expr_stmt

begin_function
specifier|static
name|int
name|mlx5_core_query_special_contexts
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|)
block|{
name|u32
name|in
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|query_special_contexts_in
argument_list|)
index|]
decl_stmt|;
name|u32
name|out
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|query_special_contexts_out
argument_list|)
index|]
decl_stmt|;
name|int
name|err
decl_stmt|;
name|memset
argument_list|(
name|in
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|out
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
expr_stmt|;
name|MLX5_SET
argument_list|(
name|query_special_contexts_in
argument_list|,
name|in
argument_list|,
name|opcode
argument_list|,
name|MLX5_CMD_OP_QUERY_SPECIAL_CONTEXTS
argument_list|)
expr_stmt|;
name|err
operator|=
name|mlx5_cmd_exec_check_status
argument_list|(
name|dev
argument_list|,
name|in
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|,
name|out
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|dev
operator|->
name|special_contexts
operator|.
name|resd_lkey
operator|=
name|MLX5_GET
argument_list|(
name|query_special_contexts_out
argument_list|,
name|out
argument_list|,
name|resd_lkey
argument_list|)
expr_stmt|;
return|return
name|err
return|;
block|}
end_function

begin_function
name|int
name|mlx5_query_hca_caps
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|)
block|{
name|int
name|err
decl_stmt|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_GENERAL
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_GENERAL
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|eth_net_offloads
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ETHERNET_OFFLOADS
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ETHERNET_OFFLOADS
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|pg
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ODP
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ODP
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|atomic
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ATOMIC
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ATOMIC
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|roce
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ROCE
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ROCE
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
operator|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|port_type
argument_list|)
operator|==
name|MLX5_CMD_HCA_CAP_PORT_TYPE_ETHERNET
operator|&&
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|nic_flow_table
argument_list|)
operator|)
operator|||
operator|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|port_type
argument_list|)
operator|==
name|MLX5_CMD_HCA_CAP_PORT_TYPE_IB
operator|&&
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|ipoib_enhanced_offloads
argument_list|)
operator|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_FLOW_TABLE
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_FLOW_TABLE
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|eswitch_flow_table
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ESWITCH_FLOW_TABLE
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ESWITCH_FLOW_TABLE
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|vport_group_manager
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ESWITCH
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_ESWITCH
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|snapshot
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_SNAPSHOT
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_SNAPSHOT
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|ipoib_enhanced_offloads
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_EOIB_OFFLOADS
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_EOIB_OFFLOADS
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|debug
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_DEBUG
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_DEBUG
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
if|if
condition|(
name|MLX5_CAP_GEN
argument_list|(
name|dev
argument_list|,
name|qos
argument_list|)
condition|)
block|{
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_QOS
argument_list|,
name|HCA_CAP_OPMOD_GET_CUR
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
name|err
operator|=
name|mlx5_core_get_caps
argument_list|(
name|dev
argument_list|,
name|MLX5_CAP_QOS
argument_list|,
name|HCA_CAP_OPMOD_GET_MAX
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
block|}
name|err
operator|=
name|mlx5_core_query_special_contexts
argument_list|(
name|dev
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
return|return
name|err
return|;
return|return
literal|0
return|;
block|}
end_function

begin_function
name|int
name|mlx5_cmd_init_hca
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|)
block|{
name|u32
name|in
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|init_hca_in
argument_list|)
index|]
decl_stmt|;
name|u32
name|out
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|init_hca_out
argument_list|)
index|]
decl_stmt|;
name|memset
argument_list|(
name|in
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|)
expr_stmt|;
name|MLX5_SET
argument_list|(
name|init_hca_in
argument_list|,
name|in
argument_list|,
name|opcode
argument_list|,
name|MLX5_CMD_OP_INIT_HCA
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|out
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|mlx5_cmd_exec_check_status
argument_list|(
name|dev
argument_list|,
name|in
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|,
name|out
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int
name|mlx5_cmd_teardown_hca
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|)
block|{
name|u32
name|in
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|teardown_hca_in
argument_list|)
index|]
decl_stmt|;
name|u32
name|out
index|[
name|MLX5_ST_SZ_DW
argument_list|(
name|teardown_hca_out
argument_list|)
index|]
decl_stmt|;
name|memset
argument_list|(
name|in
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|)
expr_stmt|;
name|MLX5_SET
argument_list|(
name|teardown_hca_in
argument_list|,
name|in
argument_list|,
name|opcode
argument_list|,
name|MLX5_CMD_OP_TEARDOWN_HCA
argument_list|)
expr_stmt|;
name|memset
argument_list|(
name|out
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
expr_stmt|;
return|return
name|mlx5_cmd_exec_check_status
argument_list|(
name|dev
argument_list|,
name|in
argument_list|,
sizeof|sizeof
argument_list|(
name|in
argument_list|)
argument_list|,
name|out
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int
name|mlx5_core_set_dc_cnak_trace
parameter_list|(
name|struct
name|mlx5_core_dev
modifier|*
name|dev
parameter_list|,
name|int
name|enable
parameter_list|,
name|u64
name|addr
parameter_list|)
block|{
name|struct
name|mlx5_cmd_set_dc_cnak_mbox_in
modifier|*
name|in
decl_stmt|;
name|struct
name|mlx5_cmd_set_dc_cnak_mbox_out
name|out
decl_stmt|;
name|int
name|err
decl_stmt|;
name|in
operator|=
name|kzalloc
argument_list|(
sizeof|sizeof
argument_list|(
operator|*
name|in
argument_list|)
argument_list|,
name|GFP_KERNEL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|in
condition|)
return|return
operator|-
name|ENOMEM
return|;
name|memset
argument_list|(
operator|&
name|out
argument_list|,
literal|0
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
expr_stmt|;
name|in
operator|->
name|hdr
operator|.
name|opcode
operator|=
name|cpu_to_be16
argument_list|(
name|MLX5_CMD_OP_SET_DC_CNAK_TRACE
argument_list|)
expr_stmt|;
name|in
operator|->
name|enable
operator|=
operator|!
operator|!
name|enable
operator|<<
literal|7
expr_stmt|;
name|in
operator|->
name|pa
operator|=
name|cpu_to_be64
argument_list|(
name|addr
argument_list|)
expr_stmt|;
name|err
operator|=
name|mlx5_cmd_exec
argument_list|(
name|dev
argument_list|,
name|in
argument_list|,
sizeof|sizeof
argument_list|(
operator|*
name|in
argument_list|)
argument_list|,
operator|&
name|out
argument_list|,
sizeof|sizeof
argument_list|(
name|out
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|err
condition|)
goto|goto
name|out
goto|;
if|if
condition|(
name|out
operator|.
name|hdr
operator|.
name|status
condition|)
name|err
operator|=
name|mlx5_cmd_status_to_err
argument_list|(
operator|&
name|out
operator|.
name|hdr
argument_list|)
expr_stmt|;
name|out
label|:
name|kfree
argument_list|(
name|in
argument_list|)
expr_stmt|;
return|return
name|err
return|;
block|}
end_function

end_unit

