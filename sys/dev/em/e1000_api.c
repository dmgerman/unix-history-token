begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*******************************************************************************    Copyright (c) 2001-2007, Intel Corporation    All rights reserved.      Redistribution and use in source and binary forms, with or without    modification, are permitted provided that the following conditions are met:       1. Redistributions of source code must retain the above copyright notice,        this list of conditions and the following disclaimer.       2. Redistributions in binary form must reproduce the above copyright        notice, this list of conditions and the following disclaimer in the        documentation and/or other materials provided with the distribution.       3. Neither the name of the Intel Corporation nor the names of its        contributors may be used to endorse or promote products derived from        this software without specific prior written permission.      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"   AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE    ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE    LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR    CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE   POSSIBILITY OF SUCH DAMAGE.  *******************************************************************************/
end_comment

begin_function_decl
name|$FreeBSD$
include|#
directive|include
file|"e1000_mac.h"
include|#
directive|include
file|"e1000_nvm.h"
include|#
directive|include
file|"e1000_phy.h"
ifndef|#
directive|ifndef
name|NO_82542_SUPPORT
specifier|extern
name|void
name|e1000_init_function_pointers_82542
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_82543
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_82540
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_82571
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_82541
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_80003es2lan
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_ich8lan
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|e1000_init_function_pointers_82575
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/**  *  e1000_init_mac_params - Initialize MAC function pointers  *  @hw - pointer to the HW structure  *  *  This function initializes the function pointers for the MAC  *  set of functions.  Called by drivers or by e1000_setup_init_funcs.  **/
end_comment

begin_function
name|s32
name|e1000_init_mac_params
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
name|s32
name|ret_val
init|=
name|E1000_SUCCESS
decl_stmt|;
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|init_mac_params
operator|!=
name|NULL
condition|)
block|{
name|ret_val
operator|=
name|hw
operator|->
name|func
operator|.
name|init_mac_params
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
block|{
name|DEBUGOUT
argument_list|(
literal|"MAC Initialization Error\n"
argument_list|)
expr_stmt|;
goto|goto
name|out
goto|;
block|}
block|}
else|else
block|{
name|DEBUGOUT
argument_list|(
literal|"mac.init_mac_params was NULL\n"
argument_list|)
expr_stmt|;
name|ret_val
operator|=
operator|-
name|E1000_ERR_CONFIG
expr_stmt|;
block|}
name|out
label|:
return|return
name|ret_val
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_init_nvm_params - Initialize NVM function pointers  *  @hw - pointer to the HW structure  *  *  This function initializes the function pointers for the NVM  *  set of functions.  Called by drivers or by e1000_setup_init_funcs.  **/
end_comment

begin_function
name|s32
name|e1000_init_nvm_params
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
name|s32
name|ret_val
init|=
name|E1000_SUCCESS
decl_stmt|;
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|init_nvm_params
operator|!=
name|NULL
condition|)
block|{
name|ret_val
operator|=
name|hw
operator|->
name|func
operator|.
name|init_nvm_params
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
block|{
name|DEBUGOUT
argument_list|(
literal|"NVM Initialization Error\n"
argument_list|)
expr_stmt|;
goto|goto
name|out
goto|;
block|}
block|}
else|else
block|{
name|DEBUGOUT
argument_list|(
literal|"nvm.init_nvm_params was NULL\n"
argument_list|)
expr_stmt|;
name|ret_val
operator|=
operator|-
name|E1000_ERR_CONFIG
expr_stmt|;
block|}
name|out
label|:
return|return
name|ret_val
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_init_phy_params - Initialize PHY function pointers  *  @hw - pointer to the HW structure  *  *  This function initializes the function pointers for the PHY  *  set of functions.  Called by drivers or by e1000_setup_init_funcs.  **/
end_comment

begin_function
name|s32
name|e1000_init_phy_params
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
name|s32
name|ret_val
init|=
name|E1000_SUCCESS
decl_stmt|;
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|init_phy_params
operator|!=
name|NULL
condition|)
block|{
name|ret_val
operator|=
name|hw
operator|->
name|func
operator|.
name|init_phy_params
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
block|{
name|DEBUGOUT
argument_list|(
literal|"PHY Initialization Error\n"
argument_list|)
expr_stmt|;
goto|goto
name|out
goto|;
block|}
block|}
else|else
block|{
name|DEBUGOUT
argument_list|(
literal|"phy.init_phy_params was NULL\n"
argument_list|)
expr_stmt|;
name|ret_val
operator|=
operator|-
name|E1000_ERR_CONFIG
expr_stmt|;
block|}
name|out
label|:
return|return
name|ret_val
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_set_mac_type - Sets MAC type  *  @hw - pointer to the HW structure  *  *  This function sets the mac type of the adapter based on the  *  device ID stored in the hw structure.  *  MUST BE FIRST FUNCTION CALLED (explicitly or through  *  e1000_setup_init_funcs()).  **/
end_comment

begin_function
name|s32
name|e1000_set_mac_type
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
name|struct
name|e1000_mac_info
modifier|*
name|mac
init|=
operator|&
name|hw
operator|->
name|mac
decl_stmt|;
name|s32
name|ret_val
init|=
name|E1000_SUCCESS
decl_stmt|;
name|DEBUGFUNC
argument_list|(
literal|"e1000_set_mac_type"
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|hw
operator|->
name|device_id
condition|)
block|{
ifndef|#
directive|ifndef
name|NO_82542_SUPPORT
case|case
name|E1000_DEV_ID_82542
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82542
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|E1000_DEV_ID_82543GC_FIBER
case|:
case|case
name|E1000_DEV_ID_82543GC_COPPER
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82543
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82544EI_COPPER
case|:
case|case
name|E1000_DEV_ID_82544EI_FIBER
case|:
case|case
name|E1000_DEV_ID_82544GC_COPPER
case|:
case|case
name|E1000_DEV_ID_82544GC_LOM
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82544
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82540EM
case|:
case|case
name|E1000_DEV_ID_82540EM_LOM
case|:
case|case
name|E1000_DEV_ID_82540EP
case|:
case|case
name|E1000_DEV_ID_82540EP_LOM
case|:
case|case
name|E1000_DEV_ID_82540EP_LP
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82540
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82545EM_COPPER
case|:
case|case
name|E1000_DEV_ID_82545EM_FIBER
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82545
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82545GM_COPPER
case|:
case|case
name|E1000_DEV_ID_82545GM_FIBER
case|:
case|case
name|E1000_DEV_ID_82545GM_SERDES
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82545_rev_3
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82546EB_COPPER
case|:
case|case
name|E1000_DEV_ID_82546EB_FIBER
case|:
case|case
name|E1000_DEV_ID_82546EB_QUAD_COPPER
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82546
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82546GB_COPPER
case|:
case|case
name|E1000_DEV_ID_82546GB_FIBER
case|:
case|case
name|E1000_DEV_ID_82546GB_SERDES
case|:
case|case
name|E1000_DEV_ID_82546GB_PCIE
case|:
case|case
name|E1000_DEV_ID_82546GB_QUAD_COPPER
case|:
case|case
name|E1000_DEV_ID_82546GB_QUAD_COPPER_KSP3
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82546_rev_3
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82541EI
case|:
case|case
name|E1000_DEV_ID_82541EI_MOBILE
case|:
case|case
name|E1000_DEV_ID_82541ER_LOM
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82541
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82541ER
case|:
case|case
name|E1000_DEV_ID_82541GI
case|:
case|case
name|E1000_DEV_ID_82541GI_LF
case|:
case|case
name|E1000_DEV_ID_82541GI_MOBILE
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82541_rev_2
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82547EI
case|:
case|case
name|E1000_DEV_ID_82547EI_MOBILE
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82547
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82547GI
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82547_rev_2
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82571EB_COPPER
case|:
case|case
name|E1000_DEV_ID_82571EB_FIBER
case|:
case|case
name|E1000_DEV_ID_82571EB_SERDES
case|:
case|case
name|E1000_DEV_ID_82571EB_QUAD_COPPER
case|:
case|case
name|E1000_DEV_ID_82571EB_QUAD_FIBER
case|:
case|case
name|E1000_DEV_ID_82571EB_QUAD_COPPER_LP
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82571
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82572EI
case|:
case|case
name|E1000_DEV_ID_82572EI_COPPER
case|:
case|case
name|E1000_DEV_ID_82572EI_FIBER
case|:
case|case
name|E1000_DEV_ID_82572EI_SERDES
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82572
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82573E
case|:
case|case
name|E1000_DEV_ID_82573E_IAMT
case|:
case|case
name|E1000_DEV_ID_82573L
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82573
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_80003ES2LAN_COPPER_DPT
case|:
case|case
name|E1000_DEV_ID_80003ES2LAN_SERDES_DPT
case|:
case|case
name|E1000_DEV_ID_80003ES2LAN_COPPER_SPT
case|:
case|case
name|E1000_DEV_ID_80003ES2LAN_SERDES_SPT
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_80003es2lan
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_ICH8_IFE
case|:
case|case
name|E1000_DEV_ID_ICH8_IFE_GT
case|:
case|case
name|E1000_DEV_ID_ICH8_IFE_G
case|:
case|case
name|E1000_DEV_ID_ICH8_IGP_M
case|:
case|case
name|E1000_DEV_ID_ICH8_IGP_M_AMT
case|:
case|case
name|E1000_DEV_ID_ICH8_IGP_AMT
case|:
case|case
name|E1000_DEV_ID_ICH8_IGP_C
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_ich8lan
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_ICH9_IFE
case|:
case|case
name|E1000_DEV_ID_ICH9_IFE_GT
case|:
case|case
name|E1000_DEV_ID_ICH9_IFE_G
case|:
case|case
name|E1000_DEV_ID_ICH9_IGP_AMT
case|:
case|case
name|E1000_DEV_ID_ICH9_IGP_C
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_ich9lan
expr_stmt|;
break|break;
case|case
name|E1000_DEV_ID_82575EB_COPPER
case|:
case|case
name|E1000_DEV_ID_82575EB_FIBER_SERDES
case|:
case|case
name|E1000_DEV_ID_82575EM_COPPER
case|:
case|case
name|E1000_DEV_ID_82575EM_FIBER_SERDES
case|:
case|case
name|E1000_DEV_ID_82575GB_QUAD_COPPER
case|:
name|mac
operator|->
name|type
operator|=
name|e1000_82575
expr_stmt|;
break|break;
default|default:
comment|/* Should never have loaded on this device */
name|ret_val
operator|=
operator|-
name|E1000_ERR_MAC_INIT
expr_stmt|;
break|break;
block|}
return|return
name|ret_val
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_setup_init_funcs - Initializes function pointers  *  @hw - pointer to the HW structure  *  @init_device - TRUE will initialize the rest of the function pointers  *                 getting the device ready for use.  FALSE will only set  *                 MAC type and the function pointers for the other init  *                 functions.  Passing FALSE will not generate any hardware  *                 reads or writes.  *  *  This function must be called by a driver in order to use the rest  *  of the 'shared' code files. Called by drivers only.  **/
end_comment

begin_function
name|s32
name|e1000_setup_init_funcs
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|boolean_t
name|init_device
parameter_list|)
block|{
name|s32
name|ret_val
decl_stmt|;
comment|/* Can't do much good without knowing the MAC type. 	 */
name|ret_val
operator|=
name|e1000_set_mac_type
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
block|{
name|DEBUGOUT
argument_list|(
literal|"ERROR: MAC type could not be set properly.\n"
argument_list|)
expr_stmt|;
goto|goto
name|out
goto|;
block|}
if|if
condition|(
operator|!
name|hw
operator|->
name|hw_addr
condition|)
block|{
name|DEBUGOUT
argument_list|(
literal|"ERROR: Registers not mapped\n"
argument_list|)
expr_stmt|;
name|ret_val
operator|=
operator|-
name|E1000_ERR_CONFIG
expr_stmt|;
goto|goto
name|out
goto|;
block|}
comment|/* Init some generic function pointers that are currently all pointing 	 * to generic implementations. We do this first allowing a driver 	 * module to override it afterwards. 	 */
name|hw
operator|->
name|func
operator|.
name|config_collision_dist
operator|=
name|e1000_config_collision_dist_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|rar_set
operator|=
name|e1000_rar_set_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|validate_mdi_setting
operator|=
name|e1000_validate_mdi_setting_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|mng_host_if_write
operator|=
name|e1000_mng_host_if_write_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|mng_write_cmd_header
operator|=
name|e1000_mng_write_cmd_header_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|mng_enable_host_if
operator|=
name|e1000_mng_enable_host_if_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|wait_autoneg
operator|=
name|e1000_wait_autoneg_generic
expr_stmt|;
name|hw
operator|->
name|func
operator|.
name|reload_nvm
operator|=
name|e1000_reload_nvm_generic
expr_stmt|;
comment|/* Set up the init function pointers. These are functions within the 	 * adapter family file that sets up function pointers for the rest of 	 * the functions in that family. 	 */
switch|switch
condition|(
name|hw
operator|->
name|mac
operator|.
name|type
condition|)
block|{
ifndef|#
directive|ifndef
name|NO_82542_SUPPORT
case|case
name|e1000_82542
case|:
name|e1000_init_function_pointers_82542
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|e1000_82543
case|:
case|case
name|e1000_82544
case|:
name|e1000_init_function_pointers_82543
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
case|case
name|e1000_82540
case|:
case|case
name|e1000_82545
case|:
case|case
name|e1000_82545_rev_3
case|:
case|case
name|e1000_82546
case|:
case|case
name|e1000_82546_rev_3
case|:
name|e1000_init_function_pointers_82540
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
case|case
name|e1000_82541
case|:
case|case
name|e1000_82541_rev_2
case|:
case|case
name|e1000_82547
case|:
case|case
name|e1000_82547_rev_2
case|:
name|e1000_init_function_pointers_82541
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
case|case
name|e1000_82571
case|:
case|case
name|e1000_82572
case|:
case|case
name|e1000_82573
case|:
name|e1000_init_function_pointers_82571
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
case|case
name|e1000_80003es2lan
case|:
name|e1000_init_function_pointers_80003es2lan
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
case|case
name|e1000_ich8lan
case|:
case|case
name|e1000_ich9lan
case|:
name|e1000_init_function_pointers_ich8lan
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
case|case
name|e1000_82575
case|:
name|e1000_init_function_pointers_82575
argument_list|(
name|hw
argument_list|)
expr_stmt|;
break|break;
default|default:
name|DEBUGOUT
argument_list|(
literal|"Hardware not supported\n"
argument_list|)
expr_stmt|;
name|ret_val
operator|=
operator|-
name|E1000_ERR_CONFIG
expr_stmt|;
break|break;
block|}
comment|/* Initialize the rest of the function pointers. These require some 	 * register reads/writes in some cases. 	 */
if|if
condition|(
operator|(
name|ret_val
operator|==
name|E1000_SUCCESS
operator|)
operator|&&
operator|(
name|init_device
operator|==
name|TRUE
operator|)
condition|)
block|{
name|ret_val
operator|=
name|e1000_init_mac_params
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
goto|goto
name|out
goto|;
name|ret_val
operator|=
name|e1000_init_nvm_params
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
goto|goto
name|out
goto|;
name|ret_val
operator|=
name|e1000_init_phy_params
argument_list|(
name|hw
argument_list|)
expr_stmt|;
if|if
condition|(
name|ret_val
condition|)
goto|goto
name|out
goto|;
block|}
name|out
label|:
return|return
name|ret_val
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_remove_device - Free device specific structure  *  @hw - pointer to the HW structure  *  *  If a device specific structure was allocated, this function will  *  free it. This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|void
name|e1000_remove_device
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|remove_device
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|remove_device
argument_list|(
name|hw
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_get_bus_info - Obtain bus information for adapter  *  @hw - pointer to the HW structure  *  *  This will obtain information about the HW bus for which the  *  adaper is attached and stores it in the hw structure. This is a  *  function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_get_bus_info
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|get_bus_info
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|get_bus_info
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_clear_vfta - Clear VLAN filter table  *  @hw - pointer to the HW structure  *  *  This clears the VLAN filter table on the adapter. This is a function  *  pointer entry point called by drivers.  **/
end_comment

begin_function
name|void
name|e1000_clear_vfta
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|clear_vfta
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|clear_vfta
argument_list|(
name|hw
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_write_vfta - Write value to VLAN filter table  *  @hw - pointer to the HW structure  *  @offset - the 32-bit offset in which to write the value to.  *  @value - the 32-bit value to write at location offset.  *  *  This writes a 32-bit value to a 32-bit offset in the VLAN filter  *  table. This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|void
name|e1000_write_vfta
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u32
name|value
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|write_vfta
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|write_vfta
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_mc_addr_list_update - Update Multicast addresses  *  @hw - pointer to the HW structure  *  @mc_addr_list - array of multicast addresses to program  *  @mc_addr_count - number of multicast addresses to program  *  @rar_used_count - the first RAR register free to program  *  @rar_count - total number of supported Receive Address Registers  *  *  Updates the Receive Address Registers and Multicast Table Array.  *  The caller must have a packed mc_addr_list of multicast addresses.  *  The parameter rar_count will usually be hw->mac.rar_entry_count  *  unless there are workarounds that change this.  Currently no func pointer  *  exists and all implementations are handled in the generic version of this  *  function.  **/
end_comment

begin_function
name|void
name|e1000_mc_addr_list_update
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u8
modifier|*
name|mc_addr_list
parameter_list|,
name|u32
name|mc_addr_count
parameter_list|,
name|u32
name|rar_used_count
parameter_list|,
name|u32
name|rar_count
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|mc_addr_list_update
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|mc_addr_list_update
argument_list|(
name|hw
argument_list|,
name|mc_addr_list
argument_list|,
name|mc_addr_count
argument_list|,
name|rar_used_count
argument_list|,
name|rar_count
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_force_mac_fc - Force MAC flow control  *  @hw - pointer to the HW structure  *  *  Force the MAC's flow control settings. Currently no func pointer exists  *  and all implementations are handled in the generic version of this  *  function.  **/
end_comment

begin_function
name|s32
name|e1000_force_mac_fc
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
return|return
name|e1000_force_mac_fc_generic
argument_list|(
name|hw
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_check_for_link - Check/Store link connection  *  @hw - pointer to the HW structure  *  *  This checks the link condition of the adapter and stores the  *  results in the hw->mac structure. This is a function pointer entry  *  point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_check_for_link
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|check_for_link
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|check_for_link
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_check_mng_mode - Check management mode  *  @hw - pointer to the HW structure  *  *  This checks if the adapter has manageability enabled.  *  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|boolean_t
name|e1000_check_mng_mode
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|check_mng_mode
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|check_mng_mode
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|FALSE
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_mng_write_dhcp_info - Writes DHCP info to host interface  *  @hw - pointer to the HW structure  *  @buffer - pointer to the host interface  *  @length - size of the buffer  *  *  Writes the DHCP information to the host interface.  **/
end_comment

begin_function
name|s32
name|e1000_mng_write_dhcp_info
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u8
modifier|*
name|buffer
parameter_list|,
name|u16
name|length
parameter_list|)
block|{
return|return
name|e1000_mng_write_dhcp_info_generic
argument_list|(
name|hw
argument_list|,
name|buffer
argument_list|,
name|length
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_reset_hw - Reset hardware  *  @hw - pointer to the HW structure  *  *  This resets the hardware into a known state. This is a function pointer  *  entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_reset_hw
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|reset_hw
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|reset_hw
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_init_hw - Initialize hardware  *  @hw - pointer to the HW structure  *  *  This inits the hardware readying it for operation. This is a function  *  pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_init_hw
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|init_hw
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|init_hw
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_setup_link - Configures link and flow control  *  @hw - pointer to the HW structure  *  *  This configures link and flow control settings for the adapter. This  *  is a function pointer entry point called by drivers. While modules can  *  also call this, they probably call their own version of this function.  **/
end_comment

begin_function
name|s32
name|e1000_setup_link
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|setup_link
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|setup_link
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_get_speed_and_duplex - Returns current speed and duplex  *  @hw - pointer to the HW structure  *  @speed - pointer to a 16-bit value to store the speed  *  @duplex - pointer to a 16-bit value to store the duplex.  *  *  This returns the speed and duplex of the adapter in the two 'out'  *  variables passed in. This is a function pointer entry point called  *  by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_get_speed_and_duplex
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u16
modifier|*
name|speed
parameter_list|,
name|u16
modifier|*
name|duplex
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|get_link_up_info
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|get_link_up_info
argument_list|(
name|hw
argument_list|,
name|speed
argument_list|,
name|duplex
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_setup_led - Configures SW controllable LED  *  @hw - pointer to the HW structure  *  *  This prepares the SW controllable LED for use and saves the current state  *  of the LED so it can be later restored. This is a function pointer entry  *  point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_setup_led
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|setup_led
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|setup_led
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_cleanup_led - Restores SW controllable LED  *  @hw - pointer to the HW structure  *  *  This restores the SW controllable LED to the value saved off by  *  e1000_setup_led. This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_cleanup_led
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|cleanup_led
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|cleanup_led
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_blink_led - Blink SW controllable LED  *  @hw - pointer to the HW structure  *  *  This starts the adapter LED blinking. Request the LED to be setup first  *  and cleaned up after. This is a function pointer entry point called by  *  drivers.  **/
end_comment

begin_function
name|s32
name|e1000_blink_led
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|blink_led
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|blink_led
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_led_on - Turn on SW controllable LED  *  @hw - pointer to the HW structure  *  *  Turns the SW defined LED on. This is a function pointer entry point  *  called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_led_on
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|led_on
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|led_on
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_led_off - Turn off SW controllable LED  *  @hw - pointer to the HW structure  *  *  Turns the SW defined LED off. This is a function pointer entry point  *  called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_led_off
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|led_off
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|led_off
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_reset_adaptive - Reset adaptive IFS  *  @hw - pointer to the HW structure  *  *  Resets the adaptive IFS. Currently no func pointer exists and all  *  implementations are handled in the generic version of this function.  **/
end_comment

begin_function
name|void
name|e1000_reset_adaptive
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
name|e1000_reset_adaptive_generic
argument_list|(
name|hw
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_update_adaptive - Update adaptive IFS  *  @hw - pointer to the HW structure  *  *  Updates adapter IFS. Currently no func pointer exists and all  *  implementations are handled in the generic version of this function.  **/
end_comment

begin_function
name|void
name|e1000_update_adaptive
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
name|e1000_update_adaptive_generic
argument_list|(
name|hw
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_disable_pcie_master - Disable PCI-Express master access  *  @hw - pointer to the HW structure  *  *  Disables PCI-Express master access and verifies there are no pending  *  requests. Currently no func pointer exists and all implementations are  *  handled in the generic version of this function.  **/
end_comment

begin_function
name|s32
name|e1000_disable_pcie_master
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
return|return
name|e1000_disable_pcie_master_generic
argument_list|(
name|hw
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_config_collision_dist - Configure collision distance  *  @hw - pointer to the HW structure  *  *  Configures the collision distance to the default value and is used  *  during link setup.  **/
end_comment

begin_function
name|void
name|e1000_config_collision_dist
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|config_collision_dist
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|config_collision_dist
argument_list|(
name|hw
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_rar_set - Sets a receive address register  *  @hw - pointer to the HW structure  *  @addr - address to set the RAR to  *  @index - the RAR to set  *  *  Sets a Receive Address Register (RAR) to the specified address.  **/
end_comment

begin_function
name|void
name|e1000_rar_set
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u8
modifier|*
name|addr
parameter_list|,
name|u32
name|index
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|rar_set
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|rar_set
argument_list|(
name|hw
argument_list|,
name|addr
argument_list|,
name|index
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_validate_mdi_setting - Ensures valid MDI/MDIX SW state  *  @hw - pointer to the HW structure  *  *  Ensures that the MDI/MDIX SW state is valid.  **/
end_comment

begin_function
name|s32
name|e1000_validate_mdi_setting
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|validate_mdi_setting
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|validate_mdi_setting
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_mta_set - Sets multicast table bit  *  @hw - pointer to the HW structure  *  @hash_value - Multicast hash value.  *  *  This sets the bit in the multicast table corresponding to the  *  hash value.  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|void
name|e1000_mta_set
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|hash_value
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|mta_set
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|mta_set
argument_list|(
name|hw
argument_list|,
name|hash_value
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_hash_mc_addr - Determines address location in multicast table  *  @hw - pointer to the HW structure  *  @mc_addr - Multicast address to hash.  *  *  This hashes an address to determine its location in the multicast  *  table. Currently no func pointer exists and all implementations  *  are handled in the generic version of this function.  **/
end_comment

begin_function
name|u32
name|e1000_hash_mc_addr
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u8
modifier|*
name|mc_addr
parameter_list|)
block|{
return|return
name|e1000_hash_mc_addr_generic
argument_list|(
name|hw
argument_list|,
name|mc_addr
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_enable_tx_pkt_filtering - Enable packet filtering on TX  *  @hw - pointer to the HW structure  *  *  Enables packet filtering on transmit packets if manageability is enabled  *  and host interface is enabled.  *  Currently no func pointer exists and all implementations are handled in the  *  generic version of this function.  **/
end_comment

begin_function
name|boolean_t
name|e1000_enable_tx_pkt_filtering
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
return|return
name|e1000_enable_tx_pkt_filtering_generic
argument_list|(
name|hw
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_mng_host_if_write - Writes to the manageability host interface  *  @hw - pointer to the HW structure  *  @buffer - pointer to the host interface buffer  *  @length - size of the buffer  *  @offset - location in the buffer to write to  *  @sum - sum of the data (not checksum)  *  *  This function writes the buffer content at the offset given on the host if.  *  It also does alignment considerations to do the writes in most efficient  *  way.  Also fills up the sum of the buffer in *buffer parameter.  **/
end_comment

begin_function
name|s32
name|e1000_mng_host_if_write
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u8
modifier|*
name|buffer
parameter_list|,
name|u16
name|length
parameter_list|,
name|u16
name|offset
parameter_list|,
name|u8
modifier|*
name|sum
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|mng_host_if_write
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|mng_host_if_write
argument_list|(
name|hw
argument_list|,
name|buffer
argument_list|,
name|length
argument_list|,
name|offset
argument_list|,
name|sum
argument_list|)
return|;
else|else
return|return
name|E1000_NOT_IMPLEMENTED
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_mng_write_cmd_header - Writes manageability command header  *  @hw - pointer to the HW structure  *  @hdr - pointer to the host interface command header  *  *  Writes the command header after does the checksum calculation.  **/
end_comment

begin_function
name|s32
name|e1000_mng_write_cmd_header
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|struct
name|e1000_host_mng_command_header
modifier|*
name|hdr
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|mng_write_cmd_header
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|mng_write_cmd_header
argument_list|(
name|hw
argument_list|,
name|hdr
argument_list|)
return|;
else|else
return|return
name|E1000_NOT_IMPLEMENTED
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_mng_enable_host_if - Checks host interface is enabled  *  @hw - pointer to the HW structure  *  *  Returns E1000_success upon success, else E1000_ERR_HOST_INTERFACE_COMMAND  *  *  This function checks whether the HOST IF is enabled for command operaton  *  and also checks whether the previous command is completed.  It busy waits  *  in case of previous command is not completed.  **/
end_comment

begin_function
name|s32
name|e1000_mng_enable_host_if
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|mng_enable_host_if
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|mng_enable_host_if
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_NOT_IMPLEMENTED
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_wait_autoneg - Waits for autonegotiation completion  *  @hw - pointer to the HW structure  *  *  Waits for autoneg to complete. Currently no func pointer exists and all  *  implementations are handled in the generic version of this function.  **/
end_comment

begin_function
name|s32
name|e1000_wait_autoneg
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|wait_autoneg
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|wait_autoneg
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_check_reset_block - Verifies PHY can be reset  *  @hw - pointer to the HW structure  *  *  Checks if the PHY is in a state that can be reset or if manageability  *  has it tied up. This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_check_reset_block
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|check_reset_block
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|check_reset_block
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_read_phy_reg - Reads PHY register  *  @hw - pointer to the HW structure  *  @offset - the register to read  *  @data - the buffer to store the 16-bit read.  *  *  Reads the PHY register and returns the value in data.  *  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_read_phy_reg
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u16
modifier|*
name|data
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|read_phy_reg
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|read_phy_reg
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|data
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_write_phy_reg - Writes PHY register  *  @hw - pointer to the HW structure  *  @offset - the register to write  *  @data - the value to write.  *  *  Writes the PHY register at offset with the value in data.  *  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_write_phy_reg
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u16
name|data
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|write_phy_reg
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|write_phy_reg
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|data
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_read_kmrn_reg - Reads register using Kumeran interface  *  @hw - pointer to the HW structure  *  @offset - the register to read  *  @data - the location to store the 16-bit value read.  *  *  Reads a register out of the Kumeran interface. Currently no func pointer  *  exists and all implementations are handled in the generic version of  *  this function.  **/
end_comment

begin_function
name|s32
name|e1000_read_kmrn_reg
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u16
modifier|*
name|data
parameter_list|)
block|{
return|return
name|e1000_read_kmrn_reg_generic
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_write_kmrn_reg - Writes register using Kumeran interface  *  @hw - pointer to the HW structure  *  @offset - the register to write  *  @data - the value to write.  *  *  Writes a register to the Kumeran interface. Currently no func pointer  *  exists and all implementations are handled in the generic version of  *  this function.  **/
end_comment

begin_function
name|s32
name|e1000_write_kmrn_reg
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u16
name|data
parameter_list|)
block|{
return|return
name|e1000_write_kmrn_reg_generic
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_get_cable_length - Retrieves cable length estimation  *  @hw - pointer to the HW structure  *  *  This function estimates the cable length and stores them in  *  hw->phy.min_length and hw->phy.max_length. This is a function pointer  *  entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_get_cable_length
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|get_cable_length
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|get_cable_length
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_get_phy_info - Retrieves PHY information from registers  *  @hw - pointer to the HW structure  *  *  This function gets some information from various PHY registers and  *  populates hw->phy values with it. This is a function pointer entry  *  point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_get_phy_info
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|get_phy_info
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|get_phy_info
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_phy_hw_reset - Hard PHY reset  *  @hw - pointer to the HW structure  *  *  Performs a hard PHY reset. This is a function pointer entry point called  *  by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_phy_hw_reset
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|reset_phy
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|reset_phy
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_phy_commit - Soft PHY reset  *  @hw - pointer to the HW structure  *  *  Performs a soft PHY reset on those that apply. This is a function pointer  *  entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_phy_commit
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|commit_phy
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|commit_phy
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_set_d3_lplu_state - Sets low power link up state for D0  *  @hw - pointer to the HW structure  *  @active boolean used to enable/disable lplu  *  *  Success returns 0, Failure returns 1  *  *  The low power link up (lplu) state is set to the power management level D0  *  and SmartSpeed is disabled when active is true, else clear lplu for D0  *  and enable Smartspeed.  LPLU and Smartspeed are mutually exclusive.  LPLU  *  is used during Dx states where the power conservation is most important.  *  During driver activity, SmartSpeed should be enabled so performance is  *  maintained.  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_set_d0_lplu_state
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|boolean_t
name|active
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|set_d0_lplu_state
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|set_d0_lplu_state
argument_list|(
name|hw
argument_list|,
name|active
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_set_d3_lplu_state - Sets low power link up state for D3  *  @hw - pointer to the HW structure  *  @active boolean used to enable/disable lplu  *  *  Success returns 0, Failure returns 1  *  *  The low power link up (lplu) state is set to the power management level D3  *  and SmartSpeed is disabled when active is true, else clear lplu for D3  *  and enable Smartspeed.  LPLU and Smartspeed are mutually exclusive.  LPLU  *  is used during Dx states where the power conservation is most important.  *  During driver activity, SmartSpeed should be enabled so performance is  *  maintained.  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_set_d3_lplu_state
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|boolean_t
name|active
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|set_d3_lplu_state
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|set_d3_lplu_state
argument_list|(
name|hw
argument_list|,
name|active
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_read_mac_addr - Reads MAC address  *  @hw - pointer to the HW structure  *  *  Reads the MAC address out of the adapter and stores it in the HW structure.  *  Currently no func pointer exists and all implementations are handled in the  *  generic version of this function.  **/
end_comment

begin_function
name|s32
name|e1000_read_mac_addr
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
return|return
name|e1000_read_mac_addr_generic
argument_list|(
name|hw
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_read_part_num - Read device part number  *  @hw - pointer to the HW structure  *  @part_num - pointer to device part number  *  *  Reads the product board assembly (PBA) number from the EEPROM and stores  *  the value in part_num.  *  Currently no func pointer exists and all implementations are handled in the  *  generic version of this function.  **/
end_comment

begin_function
name|s32
name|e1000_read_part_num
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
modifier|*
name|part_num
parameter_list|)
block|{
return|return
name|e1000_read_part_num_generic
argument_list|(
name|hw
argument_list|,
name|part_num
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_validate_nvm_checksum - Verifies NVM (EEPROM) checksum  *  @hw - pointer to the HW structure  *  *  Validates the NVM checksum is correct. This is a function pointer entry  *  point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_validate_nvm_checksum
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|validate_nvm
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|validate_nvm
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_update_nvm_checksum - Updates NVM (EEPROM) checksum  *  @hw - pointer to the HW structure  *  *  Updates the NVM checksum. Currently no func pointer exists and all  *  implementations are handled in the generic version of this function.  **/
end_comment

begin_function
name|s32
name|e1000_update_nvm_checksum
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|update_nvm
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|update_nvm
argument_list|(
name|hw
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_reload_nvm - Reloads EEPROM  *  @hw - pointer to the HW structure  *  *  Reloads the EEPROM by setting the "Reinitialize from EEPROM" bit in the  *  extended control register.  **/
end_comment

begin_function
name|void
name|e1000_reload_nvm
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|reload_nvm
operator|!=
name|NULL
condition|)
name|hw
operator|->
name|func
operator|.
name|reload_nvm
argument_list|(
name|hw
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**  *  e1000_read_nvm - Reads NVM (EEPROM)  *  @hw - pointer to the HW structure  *  @offset - the word offset to read  *  @words - number of 16-bit words to read  *  @data - pointer to the properly sized buffer for the data.  *  *  Reads 16-bit chunks of data from the NVM (EEPROM). This is a function  *  pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_read_nvm
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|offset
parameter_list|,
name|u16
name|words
parameter_list|,
name|u16
modifier|*
name|data
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|read_nvm
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|read_nvm
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|words
argument_list|,
name|data
argument_list|)
return|;
else|else
return|return
operator|-
name|E1000_ERR_CONFIG
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_write_nvm - Writes to NVM (EEPROM)  *  @hw - pointer to the HW structure  *  @offset - the word offset to read  *  @words - number of 16-bit words to write  *  @data - pointer to the properly sized buffer for the data.  *  *  Writes 16-bit chunks of data to the NVM (EEPROM). This is a function  *  pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_write_nvm
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u16
name|offset
parameter_list|,
name|u16
name|words
parameter_list|,
name|u16
modifier|*
name|data
parameter_list|)
block|{
if|if
condition|(
name|hw
operator|->
name|func
operator|.
name|write_nvm
operator|!=
name|NULL
condition|)
return|return
name|hw
operator|->
name|func
operator|.
name|write_nvm
argument_list|(
name|hw
argument_list|,
name|offset
argument_list|,
name|words
argument_list|,
name|data
argument_list|)
return|;
else|else
return|return
name|E1000_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**  *  e1000_write_8bit_ctrl_reg - Writes 8bit Control register  *  @hw - pointer to the HW structure  *  @reg - 32bit register offset  *  @offset - the register to write  *  @data - the value to write.  *  *  Writes the PHY register at offset with the value in data.  *  This is a function pointer entry point called by drivers.  **/
end_comment

begin_function
name|s32
name|e1000_write_8bit_ctrl_reg
parameter_list|(
name|struct
name|e1000_hw
modifier|*
name|hw
parameter_list|,
name|u32
name|reg
parameter_list|,
name|u32
name|offset
parameter_list|,
name|u8
name|data
parameter_list|)
block|{
return|return
name|e1000_write_8bit_ctrl_reg_generic
argument_list|(
name|hw
argument_list|,
name|reg
argument_list|,
name|offset
argument_list|,
name|data
argument_list|)
return|;
block|}
end_function

end_unit

