begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2006-2009 Red Hat Inc.  * Copyright (c) 2006-2008 Intel Corporation  * Copyright (c) 2007 Dave Airlie<airlied@linux.ie>  *  * DRM framebuffer helper functions  *  * Permission to use, copy, modify, distribute, and sell this software and its  * documentation for any purpose is hereby granted without fee, provided that  * the above copyright notice appear in all copies and that both that copyright  * notice and this permission notice appear in supporting documentation, and  * that the name of the copyright holders not be used in advertising or  * publicity pertaining to distribution of the software without specific,  * written prior permission.  The copyright holders make no representations  * about the suitability of this software for any purpose.  It is provided "as  * is" without express or implied warranty.  *  * THE COPYRIGHT HOLDERS DISCLAIM ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,  * INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO  * EVENT SHALL THE COPYRIGHT HOLDERS BE LIABLE FOR ANY SPECIAL, INDIRECT OR  * CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,  * DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER  * TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE  * OF THIS SOFTWARE.  *  * Authors:  *      Dave Airlie<airlied@linux.ie>  *      Jesse Barnes<jesse.barnes@intel.com>  *  * $FreeBSD$  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|DRM_FB_HELPER_H
end_ifndef

begin_define
define|#
directive|define
name|DRM_FB_HELPER_H
end_define

begin_struct_decl
struct_decl|struct
name|drm_fb_helper
struct_decl|;
end_struct_decl

begin_struct
struct|struct
name|drm_fb_helper_crtc
block|{
name|uint32_t
name|crtc_id
decl_stmt|;
name|struct
name|drm_mode_set
name|mode_set
decl_stmt|;
name|struct
name|drm_display_mode
modifier|*
name|desired_mode
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|drm_fb_helper_surface_size
block|{
name|u32
name|fb_width
decl_stmt|;
name|u32
name|fb_height
decl_stmt|;
name|u32
name|surface_width
decl_stmt|;
name|u32
name|surface_height
decl_stmt|;
name|u32
name|surface_bpp
decl_stmt|;
name|u32
name|surface_depth
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|drm_fb_helper_funcs
block|{
name|void
function_decl|(
modifier|*
name|gamma_set
function_decl|)
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|u16
name|red
parameter_list|,
name|u16
name|green
parameter_list|,
name|u16
name|blue
parameter_list|,
name|int
name|regno
parameter_list|)
function_decl|;
name|void
function_decl|(
modifier|*
name|gamma_get
function_decl|)
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|u16
modifier|*
name|red
parameter_list|,
name|u16
modifier|*
name|green
parameter_list|,
name|u16
modifier|*
name|blue
parameter_list|,
name|int
name|regno
parameter_list|)
function_decl|;
name|int
function_decl|(
modifier|*
name|fb_probe
function_decl|)
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|helper
parameter_list|,
name|struct
name|drm_fb_helper_surface_size
modifier|*
name|sizes
parameter_list|)
function_decl|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|drm_fb_helper_connector
block|{
name|struct
name|drm_connector
modifier|*
name|connector
decl_stmt|;
name|struct
name|drm_cmdline_mode
name|cmdline_mode
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|drm_fb_helper
block|{
name|struct
name|drm_framebuffer
modifier|*
name|fb
decl_stmt|;
name|struct
name|drm_framebuffer
modifier|*
name|saved_fb
decl_stmt|;
name|struct
name|drm_device
modifier|*
name|dev
decl_stmt|;
name|struct
name|drm_display_mode
modifier|*
name|mode
decl_stmt|;
name|int
name|crtc_count
decl_stmt|;
name|struct
name|drm_fb_helper_crtc
modifier|*
name|crtc_info
decl_stmt|;
name|int
name|connector_count
decl_stmt|;
name|struct
name|drm_fb_helper_connector
modifier|*
modifier|*
name|connector_info
decl_stmt|;
name|struct
name|drm_fb_helper_funcs
modifier|*
name|funcs
decl_stmt|;
name|int
name|conn_limit
decl_stmt|;
name|struct
name|fb_info
modifier|*
name|fbdev
decl_stmt|;
name|u32
name|pseudo_palette
index|[
literal|17
index|]
decl_stmt|;
name|struct
name|list_head
name|kernel_fb_list
decl_stmt|;
comment|/* we got a hotplug but fbdev wasn't running the console 	   delay until next set_par */
name|bool
name|delayed_hotplug
decl_stmt|;
block|}
struct|;
end_struct

begin_struct_decl
struct_decl|struct
name|fb_var_screeninfo
struct_decl|;
end_struct_decl

begin_struct_decl
struct_decl|struct
name|fb_cmap
struct_decl|;
end_struct_decl

begin_function_decl
name|int
name|drm_fb_helper_single_fb_probe
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|helper
parameter_list|,
name|int
name|preferred_bpp
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_init
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|drm_fb_helper
modifier|*
name|helper
parameter_list|,
name|int
name|crtc_count
parameter_list|,
name|int
name|max_conn
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|drm_fb_helper_fini
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|helper
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_blank
parameter_list|(
name|int
name|blank
parameter_list|,
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_pan_display
parameter_list|(
name|struct
name|fb_var_screeninfo
modifier|*
name|var
parameter_list|,
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_set_par
parameter_list|(
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_check_var
parameter_list|(
name|struct
name|fb_var_screeninfo
modifier|*
name|var
parameter_list|,
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_setcolreg
parameter_list|(
name|unsigned
name|regno
parameter_list|,
name|unsigned
name|red
parameter_list|,
name|unsigned
name|green
parameter_list|,
name|unsigned
name|blue
parameter_list|,
name|unsigned
name|transp
parameter_list|,
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|drm_fb_helper_restore_fbdev_mode
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|fb_helper
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|drm_fb_helper_restore
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|drm_fb_helper_fill_var
parameter_list|(
name|struct
name|fb_info
modifier|*
name|info
parameter_list|,
name|struct
name|drm_fb_helper
modifier|*
name|fb_helper
parameter_list|,
name|uint32_t
name|fb_width
parameter_list|,
name|uint32_t
name|fb_height
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|drm_fb_helper_fill_fix
parameter_list|(
name|struct
name|fb_info
modifier|*
name|info
parameter_list|,
name|uint32_t
name|pitch
parameter_list|,
name|uint32_t
name|depth
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_setcmap
parameter_list|(
name|struct
name|fb_cmap
modifier|*
name|cmap
parameter_list|,
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_hotplug_event
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|fb_helper
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|drm_fb_helper_initial_config
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|fb_helper
parameter_list|,
name|int
name|bpp_sel
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_single_add_all_connectors
parameter_list|(
name|struct
name|drm_fb_helper
modifier|*
name|fb_helper
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_debug_enter
parameter_list|(
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|drm_fb_helper_debug_leave
parameter_list|(
name|struct
name|fb_info
modifier|*
name|info
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|drm_fb_helper_force_kernel_mode
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

end_unit

