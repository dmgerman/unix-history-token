begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright 2000 ATI Technologies Inc., Markham, Ontario, and  *                VA Linux Systems Inc., Fremont, California.  * Copyright 2008 Red Hat Inc.  *  * Permission is hereby granted, free of charge, to any person obtaining a  * copy of this software and associated documentation files (the "Software"),  * to deal in the Software without restriction, including without limitation  * the rights to use, copy, modify, merge, publish, distribute, sublicense,  * and/or sell copies of the Software, and to permit persons to whom the  * Software is furnished to do so, subject to the following conditions:  *  * The above copyright notice and this permission notice shall be included in  * all copies or substantial portions of the Software.  *  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL  * THE COPYRIGHT HOLDER(S) OR AUTHOR(S) BE LIABLE FOR ANY CLAIM, DAMAGES OR  * OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,  * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR  * OTHER DEALINGS IN THE SOFTWARE.  *  * Original Authors:  *   Kevin E. Martin, Rickard E. Faith, Alan Hourihane  *  * Kernel port Author: Dave Airlie  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_ifndef
ifndef|#
directive|ifndef
name|RADEON_MODE_H
end_ifndef

begin_define
define|#
directive|define
name|RADEON_MODE_H
end_define

begin_include
include|#
directive|include
file|<dev/drm2/drm_crtc.h>
end_include

begin_include
include|#
directive|include
file|<dev/drm2/drm_edid.h>
end_include

begin_include
include|#
directive|include
file|<dev/drm2/drm_dp_helper.h>
end_include

begin_include
include|#
directive|include
file|<dev/drm2/drm_fixed.h>
end_include

begin_include
include|#
directive|include
file|<dev/drm2/drm_crtc_helper.h>
end_include

begin_struct_decl
struct_decl|struct
name|radeon_bo
struct_decl|;
end_struct_decl

begin_struct_decl
struct_decl|struct
name|radeon_device
struct_decl|;
end_struct_decl

begin_define
define|#
directive|define
name|to_radeon_crtc
parameter_list|(
name|x
parameter_list|)
value|container_of(x, struct radeon_crtc, base)
end_define

begin_define
define|#
directive|define
name|to_radeon_connector
parameter_list|(
name|x
parameter_list|)
value|container_of(x, struct radeon_connector, base)
end_define

begin_define
define|#
directive|define
name|to_radeon_encoder
parameter_list|(
name|x
parameter_list|)
value|container_of(x, struct radeon_encoder, base)
end_define

begin_define
define|#
directive|define
name|to_radeon_framebuffer
parameter_list|(
name|x
parameter_list|)
value|container_of(x, struct radeon_framebuffer, base)
end_define

begin_enum
enum|enum
name|radeon_rmx_type
block|{
name|RMX_OFF
block|,
name|RMX_FULL
block|,
name|RMX_CENTER
block|,
name|RMX_ASPECT
block|}
enum|;
end_enum

begin_enum
enum|enum
name|radeon_tv_std
block|{
name|TV_STD_NTSC
block|,
name|TV_STD_PAL
block|,
name|TV_STD_PAL_M
block|,
name|TV_STD_PAL_60
block|,
name|TV_STD_NTSC_J
block|,
name|TV_STD_SCART_PAL
block|,
name|TV_STD_SECAM
block|,
name|TV_STD_PAL_CN
block|,
name|TV_STD_PAL_N
block|, }
enum|;
end_enum

begin_enum
enum|enum
name|radeon_underscan_type
block|{
name|UNDERSCAN_OFF
block|,
name|UNDERSCAN_ON
block|,
name|UNDERSCAN_AUTO
block|, }
enum|;
end_enum

begin_enum
enum|enum
name|radeon_hpd_id
block|{
name|RADEON_HPD_1
init|=
literal|0
block|,
name|RADEON_HPD_2
block|,
name|RADEON_HPD_3
block|,
name|RADEON_HPD_4
block|,
name|RADEON_HPD_5
block|,
name|RADEON_HPD_6
block|,
name|RADEON_HPD_NONE
init|=
literal|0xff
block|, }
enum|;
end_enum

begin_define
define|#
directive|define
name|RADEON_MAX_I2C_BUS
value|16
end_define

begin_comment
comment|/* radeon gpio-based i2c  * 1. "mask" reg and bits  *    grabs the gpio pins for software use  *    0=not held  1=held  * 2. "a" reg and bits  *    output pin value  *    0=low 1=high  * 3. "en" reg and bits  *    sets the pin direction  *    0=input 1=output  * 4. "y" reg and bits  *    input pin value  *    0=low 1=high  */
end_comment

begin_struct
struct|struct
name|radeon_i2c_bus_rec
block|{
name|bool
name|valid
decl_stmt|;
comment|/* id used by atom */
name|uint8_t
name|i2c_id
decl_stmt|;
comment|/* id used by atom */
name|enum
name|radeon_hpd_id
name|hpd
decl_stmt|;
comment|/* can be used with hw i2c engine */
name|bool
name|hw_capable
decl_stmt|;
comment|/* uses multi-media i2c engine */
name|bool
name|mm_i2c
decl_stmt|;
comment|/* regs and bits */
name|uint32_t
name|mask_clk_reg
decl_stmt|;
name|uint32_t
name|mask_data_reg
decl_stmt|;
name|uint32_t
name|a_clk_reg
decl_stmt|;
name|uint32_t
name|a_data_reg
decl_stmt|;
name|uint32_t
name|en_clk_reg
decl_stmt|;
name|uint32_t
name|en_data_reg
decl_stmt|;
name|uint32_t
name|y_clk_reg
decl_stmt|;
name|uint32_t
name|y_data_reg
decl_stmt|;
name|uint32_t
name|mask_clk_mask
decl_stmt|;
name|uint32_t
name|mask_data_mask
decl_stmt|;
name|uint32_t
name|a_clk_mask
decl_stmt|;
name|uint32_t
name|a_data_mask
decl_stmt|;
name|uint32_t
name|en_clk_mask
decl_stmt|;
name|uint32_t
name|en_data_mask
decl_stmt|;
name|uint32_t
name|y_clk_mask
decl_stmt|;
name|uint32_t
name|y_data_mask
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_tmds_pll
block|{
name|uint32_t
name|freq
decl_stmt|;
name|uint32_t
name|value
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|RADEON_MAX_BIOS_CONNECTOR
value|16
end_define

begin_comment
comment|/* pll flags */
end_comment

begin_define
define|#
directive|define
name|RADEON_PLL_USE_BIOS_DIVS
value|(1<< 0)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_NO_ODD_POST_DIV
value|(1<< 1)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_USE_REF_DIV
value|(1<< 2)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_LEGACY
value|(1<< 3)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_LOW_REF_DIV
value|(1<< 4)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_HIGH_REF_DIV
value|(1<< 5)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_LOW_FB_DIV
value|(1<< 6)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_HIGH_FB_DIV
value|(1<< 7)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_LOW_POST_DIV
value|(1<< 8)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_HIGH_POST_DIV
value|(1<< 9)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_USE_FRAC_FB_DIV
value|(1<< 10)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_CLOSEST_LOWER
value|(1<< 11)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_USE_POST_DIV
value|(1<< 12)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_IS_LCD
value|(1<< 13)
end_define

begin_define
define|#
directive|define
name|RADEON_PLL_PREFER_MINM_OVER_MAXP
value|(1<< 14)
end_define

begin_struct
struct|struct
name|radeon_pll
block|{
comment|/* reference frequency */
name|uint32_t
name|reference_freq
decl_stmt|;
comment|/* fixed dividers */
name|uint32_t
name|reference_div
decl_stmt|;
name|uint32_t
name|post_div
decl_stmt|;
comment|/* pll in/out limits */
name|uint32_t
name|pll_in_min
decl_stmt|;
name|uint32_t
name|pll_in_max
decl_stmt|;
name|uint32_t
name|pll_out_min
decl_stmt|;
name|uint32_t
name|pll_out_max
decl_stmt|;
name|uint32_t
name|lcd_pll_out_min
decl_stmt|;
name|uint32_t
name|lcd_pll_out_max
decl_stmt|;
name|uint32_t
name|best_vco
decl_stmt|;
comment|/* divider limits */
name|uint32_t
name|min_ref_div
decl_stmt|;
name|uint32_t
name|max_ref_div
decl_stmt|;
name|uint32_t
name|min_post_div
decl_stmt|;
name|uint32_t
name|max_post_div
decl_stmt|;
name|uint32_t
name|min_feedback_div
decl_stmt|;
name|uint32_t
name|max_feedback_div
decl_stmt|;
name|uint32_t
name|min_frac_feedback_div
decl_stmt|;
name|uint32_t
name|max_frac_feedback_div
decl_stmt|;
comment|/* flags for the current clock */
name|uint32_t
name|flags
decl_stmt|;
comment|/* pll id */
name|uint32_t
name|id
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_i2c_chan
block|{
name|device_t
name|adapter
decl_stmt|;
name|device_t
name|iic_bus
decl_stmt|;
name|struct
name|drm_device
modifier|*
name|dev
decl_stmt|;
name|struct
name|radeon_i2c_bus_rec
name|rec
decl_stmt|;
name|char
name|name
index|[
literal|48
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* mostly for macs, but really any system without connector tables */
end_comment

begin_enum
enum|enum
name|radeon_connector_table
block|{
name|CT_NONE
init|=
literal|0
block|,
name|CT_GENERIC
block|,
name|CT_IBOOK
block|,
name|CT_POWERBOOK_EXTERNAL
block|,
name|CT_POWERBOOK_INTERNAL
block|,
name|CT_POWERBOOK_VGA
block|,
name|CT_MINI_EXTERNAL
block|,
name|CT_MINI_INTERNAL
block|,
name|CT_IMAC_G5_ISIGHT
block|,
name|CT_EMAC
block|,
name|CT_RN50_POWER
block|,
name|CT_MAC_X800
block|,
name|CT_MAC_G5_9600
block|,
name|CT_SAM440EP
block|,
name|CT_MAC_G4_SILVER
block|}
enum|;
end_enum

begin_enum
enum|enum
name|radeon_dvo_chip
block|{
name|DVO_SIL164
block|,
name|DVO_SIL1178
block|, }
enum|;
end_enum

begin_struct_decl
struct_decl|struct
name|radeon_fbdev
struct_decl|;
end_struct_decl

begin_struct
struct|struct
name|radeon_afmt
block|{
name|bool
name|enabled
decl_stmt|;
name|int
name|offset
decl_stmt|;
name|bool
name|last_buffer_filled_status
decl_stmt|;
name|int
name|id
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_mode_info
block|{
name|struct
name|atom_context
modifier|*
name|atom_context
decl_stmt|;
name|struct
name|card_info
modifier|*
name|atom_card_info
decl_stmt|;
name|enum
name|radeon_connector_table
name|connector_table
decl_stmt|;
name|bool
name|mode_config_initialized
decl_stmt|;
name|struct
name|radeon_crtc
modifier|*
name|crtcs
index|[
literal|6
index|]
decl_stmt|;
name|struct
name|radeon_afmt
modifier|*
name|afmt
index|[
literal|6
index|]
decl_stmt|;
comment|/* DVI-I properties */
name|struct
name|drm_property
modifier|*
name|coherent_mode_property
decl_stmt|;
comment|/* DAC enable load detect */
name|struct
name|drm_property
modifier|*
name|load_detect_property
decl_stmt|;
comment|/* TV standard */
name|struct
name|drm_property
modifier|*
name|tv_std_property
decl_stmt|;
comment|/* legacy TMDS PLL detect */
name|struct
name|drm_property
modifier|*
name|tmds_pll_property
decl_stmt|;
comment|/* underscan */
name|struct
name|drm_property
modifier|*
name|underscan_property
decl_stmt|;
name|struct
name|drm_property
modifier|*
name|underscan_hborder_property
decl_stmt|;
name|struct
name|drm_property
modifier|*
name|underscan_vborder_property
decl_stmt|;
comment|/* hardcoded DFP edid from BIOS */
name|struct
name|edid
modifier|*
name|bios_hardcoded_edid
decl_stmt|;
name|int
name|bios_hardcoded_edid_size
decl_stmt|;
comment|/* pointer to fbdev info structure */
name|struct
name|radeon_fbdev
modifier|*
name|rfbdev
decl_stmt|;
comment|/* firmware flags */
name|u16
name|firmware_flags
decl_stmt|;
comment|/* pointer to backlight encoder */
name|struct
name|radeon_encoder
modifier|*
name|bl_encoder
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|RADEON_MAX_BL_LEVEL
value|0xFF
end_define

begin_if
if|#
directive|if
name|defined
argument_list|(
name|CONFIG_BACKLIGHT_CLASS_DEVICE
argument_list|)
operator|||
name|defined
argument_list|(
name|CONFIG_BACKLIGHT_CLASS_DEVICE_MODULE
argument_list|)
end_if

begin_struct
struct|struct
name|radeon_backlight_privdata
block|{
name|struct
name|radeon_encoder
modifier|*
name|encoder
decl_stmt|;
name|uint8_t
name|negative
decl_stmt|;
block|}
struct|;
end_struct

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|MAX_H_CODE_TIMING_LEN
value|32
end_define

begin_define
define|#
directive|define
name|MAX_V_CODE_TIMING_LEN
value|32
end_define

begin_comment
comment|/* need to store these as reading    back code tables is excessive */
end_comment

begin_struct
struct|struct
name|radeon_tv_regs
block|{
name|uint32_t
name|tv_uv_adr
decl_stmt|;
name|uint32_t
name|timing_cntl
decl_stmt|;
name|uint32_t
name|hrestart
decl_stmt|;
name|uint32_t
name|vrestart
decl_stmt|;
name|uint32_t
name|frestart
decl_stmt|;
name|uint16_t
name|h_code_timing
index|[
name|MAX_H_CODE_TIMING_LEN
index|]
decl_stmt|;
name|uint16_t
name|v_code_timing
index|[
name|MAX_V_CODE_TIMING_LEN
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_atom_ss
block|{
name|uint16_t
name|percentage
decl_stmt|;
name|uint8_t
name|type
decl_stmt|;
name|uint16_t
name|step
decl_stmt|;
name|uint8_t
name|delay
decl_stmt|;
name|uint8_t
name|range
decl_stmt|;
name|uint8_t
name|refdiv
decl_stmt|;
comment|/* asic_ss */
name|uint16_t
name|rate
decl_stmt|;
name|uint16_t
name|amount
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_crtc
block|{
name|struct
name|drm_crtc
name|base
decl_stmt|;
name|int
name|crtc_id
decl_stmt|;
name|u16
name|lut_r
index|[
literal|256
index|]
decl_stmt|,
name|lut_g
index|[
literal|256
index|]
decl_stmt|,
name|lut_b
index|[
literal|256
index|]
decl_stmt|;
name|bool
name|enabled
decl_stmt|;
name|bool
name|can_tile
decl_stmt|;
name|bool
name|in_mode_set
decl_stmt|;
name|uint32_t
name|crtc_offset
decl_stmt|;
name|struct
name|drm_gem_object
modifier|*
name|cursor_bo
decl_stmt|;
name|uint64_t
name|cursor_addr
decl_stmt|;
name|int
name|cursor_width
decl_stmt|;
name|int
name|cursor_height
decl_stmt|;
name|uint32_t
name|legacy_display_base_addr
decl_stmt|;
name|uint32_t
name|legacy_cursor_offset
decl_stmt|;
name|enum
name|radeon_rmx_type
name|rmx_type
decl_stmt|;
name|u8
name|h_border
decl_stmt|;
name|u8
name|v_border
decl_stmt|;
name|fixed20_12
name|vsc
decl_stmt|;
name|fixed20_12
name|hsc
decl_stmt|;
name|struct
name|drm_display_mode
name|native_mode
decl_stmt|;
name|int
name|pll_id
decl_stmt|;
comment|/* page flipping */
name|struct
name|radeon_unpin_work
modifier|*
name|unpin_work
decl_stmt|;
name|int
name|deferred_flip_completion
decl_stmt|;
comment|/* pll sharing */
name|struct
name|radeon_atom_ss
name|ss
decl_stmt|;
name|bool
name|ss_enabled
decl_stmt|;
name|u32
name|adjusted_clock
decl_stmt|;
name|int
name|bpc
decl_stmt|;
name|u32
name|pll_reference_div
decl_stmt|;
name|u32
name|pll_post_div
decl_stmt|;
name|u32
name|pll_flags
decl_stmt|;
name|struct
name|drm_encoder
modifier|*
name|encoder
decl_stmt|;
name|struct
name|drm_connector
modifier|*
name|connector
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder_primary_dac
block|{
comment|/* legacy primary dac */
name|uint32_t
name|ps2_pdac_adj
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder_lvds
block|{
comment|/* legacy lvds */
name|uint16_t
name|panel_vcc_delay
decl_stmt|;
name|uint8_t
name|panel_pwr_delay
decl_stmt|;
name|uint8_t
name|panel_digon_delay
decl_stmt|;
name|uint8_t
name|panel_blon_delay
decl_stmt|;
name|uint16_t
name|panel_ref_divider
decl_stmt|;
name|uint8_t
name|panel_post_divider
decl_stmt|;
name|uint16_t
name|panel_fb_divider
decl_stmt|;
name|bool
name|use_bios_dividers
decl_stmt|;
name|uint32_t
name|lvds_gen_cntl
decl_stmt|;
comment|/* panel mode */
name|struct
name|drm_display_mode
name|native_mode
decl_stmt|;
name|struct
name|backlight_device
modifier|*
name|bl_dev
decl_stmt|;
name|int
name|dpms_mode
decl_stmt|;
name|uint8_t
name|backlight_level
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder_tv_dac
block|{
comment|/* legacy tv dac */
name|uint32_t
name|ps2_tvdac_adj
decl_stmt|;
name|uint32_t
name|ntsc_tvdac_adj
decl_stmt|;
name|uint32_t
name|pal_tvdac_adj
decl_stmt|;
name|int
name|h_pos
decl_stmt|;
name|int
name|v_pos
decl_stmt|;
name|int
name|h_size
decl_stmt|;
name|int
name|supported_tv_stds
decl_stmt|;
name|bool
name|tv_on
decl_stmt|;
name|enum
name|radeon_tv_std
name|tv_std
decl_stmt|;
name|struct
name|radeon_tv_regs
name|tv
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder_int_tmds
block|{
comment|/* legacy int tmds */
name|struct
name|radeon_tmds_pll
name|tmds_pll
index|[
literal|4
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder_ext_tmds
block|{
comment|/* tmds over dvo */
name|struct
name|radeon_i2c_chan
modifier|*
name|i2c_bus
decl_stmt|;
name|uint8_t
name|slave_addr
decl_stmt|;
name|enum
name|radeon_dvo_chip
name|dvo_chip
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* spread spectrum */
end_comment

begin_struct
struct|struct
name|radeon_encoder_atom_dig
block|{
name|bool
name|linkb
decl_stmt|;
comment|/* atom dig */
name|bool
name|coherent_mode
decl_stmt|;
name|int
name|dig_encoder
decl_stmt|;
comment|/* -1 disabled, 0 DIGA, 1 DIGB, etc. */
comment|/* atom lvds/edp */
name|uint32_t
name|lcd_misc
decl_stmt|;
name|uint16_t
name|panel_pwr_delay
decl_stmt|;
name|uint32_t
name|lcd_ss_id
decl_stmt|;
comment|/* panel mode */
name|struct
name|drm_display_mode
name|native_mode
decl_stmt|;
name|struct
name|backlight_device
modifier|*
name|bl_dev
decl_stmt|;
name|int
name|dpms_mode
decl_stmt|;
name|uint8_t
name|backlight_level
decl_stmt|;
name|int
name|panel_mode
decl_stmt|;
name|struct
name|radeon_afmt
modifier|*
name|afmt
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder_atom_dac
block|{
name|enum
name|radeon_tv_std
name|tv_std
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_encoder
block|{
name|struct
name|drm_encoder
name|base
decl_stmt|;
name|uint32_t
name|encoder_enum
decl_stmt|;
name|uint32_t
name|encoder_id
decl_stmt|;
name|uint32_t
name|devices
decl_stmt|;
name|uint32_t
name|active_device
decl_stmt|;
name|uint32_t
name|flags
decl_stmt|;
name|uint32_t
name|pixel_clock
decl_stmt|;
name|enum
name|radeon_rmx_type
name|rmx_type
decl_stmt|;
name|enum
name|radeon_underscan_type
name|underscan_type
decl_stmt|;
name|uint32_t
name|underscan_hborder
decl_stmt|;
name|uint32_t
name|underscan_vborder
decl_stmt|;
name|struct
name|drm_display_mode
name|native_mode
decl_stmt|;
name|void
modifier|*
name|enc_priv
decl_stmt|;
name|int
name|audio_polling_active
decl_stmt|;
name|bool
name|is_ext_encoder
decl_stmt|;
name|u16
name|caps
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_connector_atom_dig
block|{
name|uint32_t
name|igp_lane_info
decl_stmt|;
comment|/* displayport */
name|struct
name|radeon_i2c_chan
modifier|*
name|dp_i2c_bus
decl_stmt|;
name|u8
name|dpcd
index|[
name|DP_RECEIVER_CAP_SIZE
index|]
decl_stmt|;
name|u8
name|dp_sink_type
decl_stmt|;
name|int
name|dp_clock
decl_stmt|;
name|int
name|dp_lane_count
decl_stmt|;
name|bool
name|edp_on
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_gpio_rec
block|{
name|bool
name|valid
decl_stmt|;
name|u8
name|id
decl_stmt|;
name|u32
name|reg
decl_stmt|;
name|u32
name|mask
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_hpd
block|{
name|enum
name|radeon_hpd_id
name|hpd
decl_stmt|;
name|u8
name|plugged_state
decl_stmt|;
name|struct
name|radeon_gpio_rec
name|gpio
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_router
block|{
name|u32
name|router_id
decl_stmt|;
name|struct
name|radeon_i2c_bus_rec
name|i2c_info
decl_stmt|;
name|u8
name|i2c_addr
decl_stmt|;
comment|/* i2c mux */
name|bool
name|ddc_valid
decl_stmt|;
name|u8
name|ddc_mux_type
decl_stmt|;
name|u8
name|ddc_mux_control_pin
decl_stmt|;
name|u8
name|ddc_mux_state
decl_stmt|;
comment|/* clock/data mux */
name|bool
name|cd_valid
decl_stmt|;
name|u8
name|cd_mux_type
decl_stmt|;
name|u8
name|cd_mux_control_pin
decl_stmt|;
name|u8
name|cd_mux_state
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_connector
block|{
name|struct
name|drm_connector
name|base
decl_stmt|;
name|uint32_t
name|connector_id
decl_stmt|;
name|uint32_t
name|devices
decl_stmt|;
name|struct
name|radeon_i2c_chan
modifier|*
name|ddc_bus
decl_stmt|;
comment|/* some systems have an hdmi and vga port with a shared ddc line */
name|bool
name|shared_ddc
decl_stmt|;
name|bool
name|use_digital
decl_stmt|;
comment|/* we need to mind the EDID between detect 	   and get modes due to analog/digital/tvencoder */
name|struct
name|edid
modifier|*
name|edid
decl_stmt|;
name|void
modifier|*
name|con_priv
decl_stmt|;
name|bool
name|dac_load_detect
decl_stmt|;
name|bool
name|detected_by_load
decl_stmt|;
comment|/* if the connection status was determined by load */
name|uint16_t
name|connector_object_id
decl_stmt|;
name|struct
name|radeon_hpd
name|hpd
decl_stmt|;
name|struct
name|radeon_router
name|router
decl_stmt|;
name|struct
name|radeon_i2c_chan
modifier|*
name|router_bus
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|radeon_framebuffer
block|{
name|struct
name|drm_framebuffer
name|base
decl_stmt|;
name|struct
name|drm_gem_object
modifier|*
name|obj
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|ENCODER_MODE_IS_DP
parameter_list|(
name|em
parameter_list|)
value|(((em) == ATOM_ENCODER_MODE_DP) || \ 				((em) == ATOM_ENCODER_MODE_DP_MST))
end_define

begin_function_decl
specifier|extern
name|enum
name|radeon_tv_std
name|radeon_combios_get_tv_info
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|enum
name|radeon_tv_std
name|radeon_atombios_get_tv_info
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|drm_connector
modifier|*
name|radeon_get_connector_for_encoder
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|drm_connector
modifier|*
name|radeon_get_connector_for_encoder_init
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_dig_monitor_is_duallink
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|u32
name|pixel_clock
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|u16
name|radeon_encoder_get_dp_bridge_encoder_id
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|u16
name|radeon_connector_encoder_get_dp_bridge_encoder_id
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_connector_encoder_is_hbr2
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_connector_is_dp12_capable
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_get_monitor_bpc
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_connector_hotplug
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_dp_mode_valid_helper
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|mode
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_dp_set_link_config
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|,
specifier|const
name|struct
name|drm_display_mode
modifier|*
name|mode
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_dp_link_train
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_dp_needs_link_train
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|u8
name|radeon_dp_getsinktype
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_dp_getdpcd
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_dp_get_panel_mode
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|atombios_dig_encoder_setup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|int
name|action
parameter_list|,
name|int
name|panel_mode
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atom_encoder_init
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atom_disp_eng_pll_init
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|atombios_dig_transmitter_setup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|int
name|action
parameter_list|,
name|uint8_t
name|lane_num
parameter_list|,
name|uint8_t
name|lane_set
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atom_ext_encoder_setup_ddc
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|drm_encoder
modifier|*
name|radeon_get_external_encoder
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_dp_i2c_aux_ch
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|int
name|mode
parameter_list|,
name|u8
name|write_byte
parameter_list|,
name|u8
modifier|*
name|read_byte
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_i2c_init
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_i2c_fini
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_combios_i2c_init
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atombios_i2c_init
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_i2c_add
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|struct
name|radeon_i2c_bus_rec
modifier|*
name|rec
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_i2c_chan
modifier|*
name|radeon_i2c_lookup
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|struct
name|radeon_i2c_bus_rec
modifier|*
name|i2c_bus
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_i2c_chan
modifier|*
name|radeon_i2c_create_dp
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|radeon_i2c_bus_rec
modifier|*
name|rec
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_i2c_chan
modifier|*
name|radeon_i2c_create
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|radeon_i2c_bus_rec
modifier|*
name|rec
parameter_list|,
specifier|const
name|char
modifier|*
name|name
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_i2c_destroy
parameter_list|(
name|struct
name|radeon_i2c_chan
modifier|*
name|i2c
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_i2c_get_byte
parameter_list|(
name|struct
name|radeon_i2c_chan
modifier|*
name|i2c_bus
parameter_list|,
name|u8
name|slave_addr
parameter_list|,
name|u8
name|addr
parameter_list|,
name|u8
modifier|*
name|val
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_i2c_put_byte
parameter_list|(
name|struct
name|radeon_i2c_chan
modifier|*
name|i2c
parameter_list|,
name|u8
name|slave_addr
parameter_list|,
name|u8
name|addr
parameter_list|,
name|u8
name|val
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_router_select_ddc_port
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_router_select_cd_port
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_ddc_probe
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|,
name|bool
name|use_aux
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_ddc_get_modes
parameter_list|(
name|struct
name|radeon_connector
modifier|*
name|radeon_connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|drm_encoder
modifier|*
name|radeon_best_encoder
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_atombios_get_ppll_ss_info
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|struct
name|radeon_atom_ss
modifier|*
name|ss
parameter_list|,
name|int
name|id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_atombios_get_asic_ss_info
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|struct
name|radeon_atom_ss
modifier|*
name|ss
parameter_list|,
name|int
name|id
parameter_list|,
name|u32
name|clock
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_compute_pll_legacy
parameter_list|(
name|struct
name|radeon_pll
modifier|*
name|pll
parameter_list|,
name|uint64_t
name|freq
parameter_list|,
name|uint32_t
modifier|*
name|dot_clock_p
parameter_list|,
name|uint32_t
modifier|*
name|fb_div_p
parameter_list|,
name|uint32_t
modifier|*
name|frac_fb_div_p
parameter_list|,
name|uint32_t
modifier|*
name|ref_div_p
parameter_list|,
name|uint32_t
modifier|*
name|post_div_p
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_compute_pll_avivo
parameter_list|(
name|struct
name|radeon_pll
modifier|*
name|pll
parameter_list|,
name|u32
name|freq
parameter_list|,
name|u32
modifier|*
name|dot_clock_p
parameter_list|,
name|u32
modifier|*
name|fb_div_p
parameter_list|,
name|u32
modifier|*
name|frac_fb_div_p
parameter_list|,
name|u32
modifier|*
name|ref_div_p
parameter_list|,
name|u32
modifier|*
name|post_div_p
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_setup_encoder_clones
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|drm_encoder
modifier|*
name|radeon_encoder_legacy_lvds_add
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|int
name|bios_index
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|drm_encoder
modifier|*
name|radeon_encoder_legacy_primary_dac_add
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|int
name|bios_index
parameter_list|,
name|int
name|with_tv
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|drm_encoder
modifier|*
name|radeon_encoder_legacy_tv_dac_add
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|int
name|bios_index
parameter_list|,
name|int
name|with_tv
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|drm_encoder
modifier|*
name|radeon_encoder_legacy_tmds_int_add
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|int
name|bios_index
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|drm_encoder
modifier|*
name|radeon_encoder_legacy_tmds_ext_add
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|int
name|bios_index
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|atombios_dvo_setup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|int
name|action
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|atombios_digital_setup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|int
name|action
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|atombios_get_encoder_mode
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|atombios_set_edp_panel_power
parameter_list|(
name|struct
name|drm_connector
modifier|*
name|connector
parameter_list|,
name|int
name|action
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_encoder_set_active_device
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_crtc_load_lut
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|atombios_crtc_set_base
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|old_fb
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|atombios_crtc_set_base_atomic
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|fb
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|enum
name|mode_set_atomic
name|state
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|atombios_crtc_mode_set
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|mode
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|adjusted_mode
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|old_fb
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|atombios_crtc_dpms
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|int
name|mode
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_crtc_set_base
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|old_fb
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_crtc_set_base_atomic
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|fb
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|enum
name|mode_set_atomic
name|state
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_crtc_do_set_base
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|fb
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|,
name|int
name|atomic
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_crtc_cursor_set
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|,
name|uint32_t
name|handle
parameter_list|,
name|uint32_t
name|width
parameter_list|,
name|uint32_t
name|height
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_crtc_cursor_move
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|int
name|x
parameter_list|,
name|int
name|y
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|radeon_get_crtc_scanoutpos
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|int
name|crtc
parameter_list|,
name|int
modifier|*
name|vpos
parameter_list|,
name|int
modifier|*
name|hpos
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_combios_check_hardcoded_edid
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|edid
modifier|*
name|radeon_bios_get_hardcoded_edid
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_atom_get_clock_info
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_combios_get_clock_info
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_encoder_atom_dig
modifier|*
name|radeon_atombios_get_lvds_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_atombios_get_tmds_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|radeon_encoder_int_tmds
modifier|*
name|tmds
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_legacy_get_tmds_info_from_combios
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|radeon_encoder_int_tmds
modifier|*
name|tmds
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_legacy_get_tmds_info_from_table
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|radeon_encoder_int_tmds
modifier|*
name|tmds
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_legacy_get_ext_tmds_info_from_combios
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|radeon_encoder_ext_tmds
modifier|*
name|tmds
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_legacy_get_ext_tmds_info_from_table
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|radeon_encoder_ext_tmds
modifier|*
name|tmds
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_encoder_primary_dac
modifier|*
name|radeon_atombios_get_primary_dac_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_encoder_tv_dac
modifier|*
name|radeon_atombios_get_tv_dac_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_encoder_lvds
modifier|*
name|radeon_combios_get_lvds_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_combios_get_ext_tmds_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_encoder_tv_dac
modifier|*
name|radeon_combios_get_tv_dac_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|struct
name|radeon_encoder_primary_dac
modifier|*
name|radeon_combios_get_primary_dac_info
parameter_list|(
name|struct
name|radeon_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_combios_external_tmds_setup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_external_tmds_setup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_combios_output_lock
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|bool
name|lock
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_combios_initialize_bios_scratch_regs
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atom_output_lock
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|bool
name|lock
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atom_initialize_bios_scratch_regs
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_save_bios_scratch_regs
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_restore_bios_scratch_regs
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atombios_encoder_crtc_scratch_regs
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|int
name|crtc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_atombios_encoder_dpms_scratch_regs
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|bool
name|on
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_combios_encoder_crtc_scratch_regs
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|int
name|crtc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_combios_encoder_dpms_scratch_regs
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|bool
name|on
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_crtc_fb_gamma_set
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|u16
name|red
parameter_list|,
name|u16
name|green
parameter_list|,
name|u16
name|blue
parameter_list|,
name|int
name|regno
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|radeon_crtc_fb_gamma_get
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
name|u16
modifier|*
name|red
parameter_list|,
name|u16
modifier|*
name|green
parameter_list|,
name|u16
modifier|*
name|blue
parameter_list|,
name|int
name|regno
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|radeon_framebuffer_init
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|radeon_framebuffer
modifier|*
name|rfb
parameter_list|,
name|struct
name|drm_mode_fb_cmd2
modifier|*
name|mode_cmd
parameter_list|,
name|struct
name|drm_gem_object
modifier|*
name|obj
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|radeonfb_remove
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|drm_framebuffer
modifier|*
name|fb
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|radeon_get_legacy_connector_info_from_bios
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|radeon_get_legacy_connector_info_from_table
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_atombios_init_crtc
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|radeon_crtc
modifier|*
name|radeon_crtc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_legacy_init_crtc
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|radeon_crtc
modifier|*
name|radeon_crtc
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_get_clock_info
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_get_atom_connector_info_from_object_table
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|bool
name|radeon_get_atom_connector_info_from_supported_devices_table
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_enc_destroy
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_copy_fb
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|struct
name|drm_gem_object
modifier|*
name|dst_obj
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_combios_asic_init
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|radeon_crtc_scaling_mode_fixup
parameter_list|(
name|struct
name|drm_crtc
modifier|*
name|crtc
parameter_list|,
specifier|const
name|struct
name|drm_display_mode
modifier|*
name|mode
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|adjusted_mode
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_panel_mode_fixup
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|adjusted_mode
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|atom_rv515_force_tv_scaler
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|struct
name|radeon_crtc
modifier|*
name|radeon_crtc
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* legacy tv */
end_comment

begin_function_decl
name|void
name|radeon_legacy_tv_adjust_crtc_reg
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|uint32_t
modifier|*
name|h_total_disp
parameter_list|,
name|uint32_t
modifier|*
name|h_sync_strt_wid
parameter_list|,
name|uint32_t
modifier|*
name|v_total_disp
parameter_list|,
name|uint32_t
modifier|*
name|v_sync_strt_wid
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_legacy_tv_adjust_pll1
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|uint32_t
modifier|*
name|htotal_cntl
parameter_list|,
name|uint32_t
modifier|*
name|ppll_ref_div
parameter_list|,
name|uint32_t
modifier|*
name|ppll_div_3
parameter_list|,
name|uint32_t
modifier|*
name|pixclks_cntl
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_legacy_tv_adjust_pll2
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|uint32_t
modifier|*
name|htotal2_cntl
parameter_list|,
name|uint32_t
modifier|*
name|p2pll_ref_div
parameter_list|,
name|uint32_t
modifier|*
name|p2pll_div_0
parameter_list|,
name|uint32_t
modifier|*
name|pixclks_cntl
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_legacy_tv_mode_set
parameter_list|(
name|struct
name|drm_encoder
modifier|*
name|encoder
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|mode
parameter_list|,
name|struct
name|drm_display_mode
modifier|*
name|adjusted_mode
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* fbdev layer */
end_comment

begin_function_decl
name|int
name|radeon_fbdev_init
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_fbdev_fini
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_fbdev_set_suspend
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|int
name|state
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|radeon_fbdev_total_size
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|bool
name|radeon_fbdev_robj_is_fb
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|struct
name|radeon_bo
modifier|*
name|robj
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_fb_output_poll_changed
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|radeon_crtc_handle_flip
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|int
name|crtc_id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|radeon_align_pitch
parameter_list|(
name|struct
name|radeon_device
modifier|*
name|rdev
parameter_list|,
name|int
name|width
parameter_list|,
name|int
name|bpp
parameter_list|,
name|bool
name|tiled
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

end_unit

