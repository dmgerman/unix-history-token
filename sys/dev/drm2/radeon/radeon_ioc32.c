begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/**  * \file radeon_ioc32.c  *  * 32-bit ioctl compatibility routines for the Radeon DRM.  *  * \author Paul Mackerras<paulus@samba.org>  *  * Copyright (C) Paul Mackerras 2005  * All Rights Reserved.  *  * Permission is hereby granted, free of charge, to any person obtaining a  * copy of this software and associated documentation files (the "Software"),  * to deal in the Software without restriction, including without limitation  * the rights to use, copy, modify, merge, publish, distribute, sublicense,  * and/or sell copies of the Software, and to permit persons to whom the  * Software is furnished to do so, subject to the following conditions:  *  * The above copyright notice and this permission notice (including the next  * paragraph) shall be included in all copies or substantial portions of the  * Software.  *  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,  * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL  * THE AUTHOR BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,  * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS  * IN THE SOFTWARE.  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_include
include|#
directive|include
file|"opt_compat.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|COMPAT_FREEBSD32
end_ifdef

begin_include
include|#
directive|include
file|<dev/drm2/drmP.h>
end_include

begin_include
include|#
directive|include
file|<dev/drm2/drm.h>
end_include

begin_include
include|#
directive|include
file|<dev/drm2/radeon/radeon_drm.h>
end_include

begin_include
include|#
directive|include
file|"radeon_drv.h"
end_include

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_init32
block|{
name|int
name|func
decl_stmt|;
name|u32
name|sarea_priv_offset
decl_stmt|;
name|int
name|is_pci
decl_stmt|;
name|int
name|cp_mode
decl_stmt|;
name|int
name|gart_size
decl_stmt|;
name|int
name|ring_size
decl_stmt|;
name|int
name|usec_timeout
decl_stmt|;
name|unsigned
name|int
name|fb_bpp
decl_stmt|;
name|unsigned
name|int
name|front_offset
decl_stmt|,
name|front_pitch
decl_stmt|;
name|unsigned
name|int
name|back_offset
decl_stmt|,
name|back_pitch
decl_stmt|;
name|unsigned
name|int
name|depth_bpp
decl_stmt|;
name|unsigned
name|int
name|depth_offset
decl_stmt|,
name|depth_pitch
decl_stmt|;
name|u32
name|fb_offset
decl_stmt|;
name|u32
name|mmio_offset
decl_stmt|;
name|u32
name|ring_offset
decl_stmt|;
name|u32
name|ring_rptr_offset
decl_stmt|;
name|u32
name|buffers_offset
decl_stmt|;
name|u32
name|gart_textures_offset
decl_stmt|;
block|}
name|drm_radeon_init32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_init
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_init32_t
modifier|*
name|init32
decl_stmt|;
name|drm_radeon_init_t
name|__user
name|init
decl_stmt|;
name|init32
operator|=
name|arg
expr_stmt|;
name|init
operator|.
name|func
operator|=
name|init32
operator|->
name|func
expr_stmt|;
name|init
operator|.
name|sarea_priv_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|sarea_priv_offset
expr_stmt|;
name|init
operator|.
name|is_pci
operator|=
name|init32
operator|->
name|is_pci
expr_stmt|;
name|init
operator|.
name|cp_mode
operator|=
name|init32
operator|->
name|cp_mode
expr_stmt|;
name|init
operator|.
name|gart_size
operator|=
name|init32
operator|->
name|gart_size
expr_stmt|;
name|init
operator|.
name|ring_size
operator|=
name|init32
operator|->
name|ring_size
expr_stmt|;
name|init
operator|.
name|usec_timeout
operator|=
name|init32
operator|->
name|usec_timeout
expr_stmt|;
name|init
operator|.
name|fb_bpp
operator|=
name|init32
operator|->
name|fb_bpp
expr_stmt|;
name|init
operator|.
name|front_offset
operator|=
name|init32
operator|->
name|front_offset
expr_stmt|;
name|init
operator|.
name|front_pitch
operator|=
name|init32
operator|->
name|front_pitch
expr_stmt|;
name|init
operator|.
name|back_offset
operator|=
name|init32
operator|->
name|back_offset
expr_stmt|;
name|init
operator|.
name|back_pitch
operator|=
name|init32
operator|->
name|back_pitch
expr_stmt|;
name|init
operator|.
name|depth_bpp
operator|=
name|init32
operator|->
name|depth_bpp
expr_stmt|;
name|init
operator|.
name|depth_offset
operator|=
name|init32
operator|->
name|depth_offset
expr_stmt|;
name|init
operator|.
name|depth_pitch
operator|=
name|init32
operator|->
name|depth_pitch
expr_stmt|;
name|init
operator|.
name|fb_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|fb_offset
expr_stmt|;
name|init
operator|.
name|mmio_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|mmio_offset
expr_stmt|;
name|init
operator|.
name|ring_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|ring_offset
expr_stmt|;
name|init
operator|.
name|ring_rptr_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|ring_rptr_offset
expr_stmt|;
name|init
operator|.
name|buffers_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|buffers_offset
expr_stmt|;
name|init
operator|.
name|gart_textures_offset
operator|=
operator|(
name|unsigned
name|long
operator|)
name|init32
operator|->
name|gart_textures_offset
expr_stmt|;
return|return
name|radeon_cp_init
argument_list|(
name|dev
argument_list|,
operator|&
name|init
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_clear32
block|{
name|unsigned
name|int
name|flags
decl_stmt|;
name|unsigned
name|int
name|clear_color
decl_stmt|;
name|unsigned
name|int
name|clear_depth
decl_stmt|;
name|unsigned
name|int
name|color_mask
decl_stmt|;
name|unsigned
name|int
name|depth_mask
decl_stmt|;
comment|/* misnamed field:  should be stencil */
name|u32
name|depth_boxes
decl_stmt|;
block|}
name|drm_radeon_clear32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_clear
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_clear32_t
modifier|*
name|clr32
decl_stmt|;
name|drm_radeon_clear_t
name|__user
name|clr
decl_stmt|;
name|clr32
operator|=
name|arg
expr_stmt|;
name|clr
operator|.
name|flags
operator|=
name|clr32
operator|->
name|flags
expr_stmt|;
name|clr
operator|.
name|clear_color
operator|=
name|clr32
operator|->
name|clear_color
expr_stmt|;
name|clr
operator|.
name|clear_depth
operator|=
name|clr32
operator|->
name|clear_depth
expr_stmt|;
name|clr
operator|.
name|color_mask
operator|=
name|clr32
operator|->
name|color_mask
expr_stmt|;
name|clr
operator|.
name|depth_mask
operator|=
name|clr32
operator|->
name|depth_mask
expr_stmt|;
name|clr
operator|.
name|depth_boxes
operator|=
operator|(
name|drm_radeon_clear_rect_t
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|clr32
operator|->
name|depth_boxes
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_CLEAR
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|clr
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_stipple32
block|{
name|u32
name|mask
decl_stmt|;
block|}
name|drm_radeon_stipple32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_stipple
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_stipple32_t
name|__user
modifier|*
name|argp
init|=
operator|(
name|void
name|__user
operator|*
operator|)
name|arg
decl_stmt|;
name|drm_radeon_stipple_t
name|__user
name|request
decl_stmt|;
name|request
operator|.
name|mask
operator|=
operator|(
name|unsigned
name|int
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|argp
operator|->
name|mask
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_STIPPLE
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_tex_image32
block|{
name|unsigned
name|int
name|x
decl_stmt|,
name|y
decl_stmt|;
comment|/* Blit coordinates */
name|unsigned
name|int
name|width
decl_stmt|,
name|height
decl_stmt|;
name|u32
name|data
decl_stmt|;
block|}
name|drm_radeon_tex_image32_t
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_texture32
block|{
name|unsigned
name|int
name|offset
decl_stmt|;
name|int
name|pitch
decl_stmt|;
name|int
name|format
decl_stmt|;
name|int
name|width
decl_stmt|;
comment|/* Texture image coordinates */
name|int
name|height
decl_stmt|;
name|u32
name|image
decl_stmt|;
block|}
name|drm_radeon_texture32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_texture
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_texture32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_texture_t
name|__user
name|request
decl_stmt|;
name|drm_radeon_tex_image32_t
modifier|*
name|img32
decl_stmt|;
name|drm_radeon_tex_image_t
name|__user
name|image
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
if|if
condition|(
name|req32
operator|->
name|image
operator|==
literal|0
condition|)
return|return
operator|-
name|EINVAL
return|;
name|img32
operator|=
operator|(
name|drm_radeon_tex_image32_t
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|image
expr_stmt|;
name|request
operator|.
name|offset
operator|=
name|req32
operator|->
name|offset
expr_stmt|;
name|request
operator|.
name|pitch
operator|=
name|req32
operator|->
name|pitch
expr_stmt|;
name|request
operator|.
name|format
operator|=
name|req32
operator|->
name|format
expr_stmt|;
name|request
operator|.
name|width
operator|=
name|req32
operator|->
name|width
expr_stmt|;
name|request
operator|.
name|height
operator|=
name|req32
operator|->
name|height
expr_stmt|;
name|request
operator|.
name|image
operator|=
operator|&
name|image
expr_stmt|;
name|image
operator|.
name|x
operator|=
name|img32
operator|->
name|x
expr_stmt|;
name|image
operator|.
name|y
operator|=
name|img32
operator|->
name|y
expr_stmt|;
name|image
operator|.
name|width
operator|=
name|img32
operator|->
name|width
expr_stmt|;
name|image
operator|.
name|height
operator|=
name|img32
operator|->
name|height
expr_stmt|;
name|image
operator|.
name|data
operator|=
operator|(
name|void
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|img32
operator|->
name|data
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_TEXTURE
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_vertex2_32
block|{
name|int
name|idx
decl_stmt|;
comment|/* Index of vertex buffer */
name|int
name|discard
decl_stmt|;
comment|/* Client finished with buffer? */
name|int
name|nr_states
decl_stmt|;
name|u32
name|state
decl_stmt|;
name|int
name|nr_prims
decl_stmt|;
name|u32
name|prim
decl_stmt|;
block|}
name|drm_radeon_vertex2_32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_vertex2
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_vertex2_32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_vertex2_t
name|__user
name|request
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
name|request
operator|.
name|idx
operator|=
name|req32
operator|->
name|idx
expr_stmt|;
name|request
operator|.
name|discard
operator|=
name|req32
operator|->
name|discard
expr_stmt|;
name|request
operator|.
name|nr_states
operator|=
name|req32
operator|->
name|nr_states
expr_stmt|;
name|request
operator|.
name|state
operator|=
operator|(
name|drm_radeon_state_t
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|state
expr_stmt|;
name|request
operator|.
name|nr_prims
operator|=
name|req32
operator|->
name|nr_prims
expr_stmt|;
name|request
operator|.
name|prim
operator|=
operator|(
name|drm_radeon_prim_t
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|prim
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_VERTEX2
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_cmd_buffer32
block|{
name|int
name|bufsz
decl_stmt|;
name|u32
name|buf
decl_stmt|;
name|int
name|nbox
decl_stmt|;
name|u32
name|boxes
decl_stmt|;
block|}
name|drm_radeon_cmd_buffer32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_cmdbuf
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_cmd_buffer32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_cmd_buffer_t
name|__user
name|request
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
name|request
operator|.
name|bufsz
operator|=
name|req32
operator|->
name|bufsz
expr_stmt|;
name|request
operator|.
name|buf
operator|=
operator|(
name|char
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|buf
expr_stmt|;
name|request
operator|.
name|nbox
operator|=
name|req32
operator|->
name|nbox
expr_stmt|;
name|request
operator|.
name|boxes
operator|=
operator|(
expr|struct
name|drm_clip_rect
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|boxes
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_CMDBUF
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_getparam32
block|{
name|int
name|param
decl_stmt|;
name|u32
name|value
decl_stmt|;
block|}
name|drm_radeon_getparam32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_getparam
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_getparam32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_getparam_t
name|__user
name|request
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
name|request
operator|.
name|param
operator|=
name|req32
operator|->
name|param
expr_stmt|;
name|request
operator|.
name|value
operator|=
operator|(
name|void
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|value
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_GETPARAM
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_mem_alloc32
block|{
name|int
name|region
decl_stmt|;
name|int
name|alignment
decl_stmt|;
name|int
name|size
decl_stmt|;
name|u32
name|region_offset
decl_stmt|;
comment|/* offset from start of fb or GART */
block|}
name|drm_radeon_mem_alloc32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_mem_alloc
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_mem_alloc32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_mem_alloc_t
name|__user
name|request
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
name|request
operator|.
name|region
operator|=
name|req32
operator|->
name|region
expr_stmt|;
name|request
operator|.
name|alignment
operator|=
name|req32
operator|->
name|alignment
expr_stmt|;
name|request
operator|.
name|size
operator|=
name|req32
operator|->
name|size
expr_stmt|;
name|request
operator|.
name|region_offset
operator|=
operator|(
name|int
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|region_offset
expr_stmt|;
return|return
name|radeon_mem_alloc
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_irq_emit32
block|{
name|u32
name|irq_seq
decl_stmt|;
block|}
name|drm_radeon_irq_emit32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_irq_emit
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_irq_emit32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_irq_emit_t
name|__user
name|request
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
name|request
operator|.
name|irq_seq
operator|=
operator|(
name|int
operator|*
operator|)
operator|(
name|unsigned
name|long
operator|)
name|req32
operator|->
name|irq_seq
expr_stmt|;
return|return
name|radeon_irq_emit
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* The two 64-bit arches where alignof(u64)==4 in 32-bit code */
end_comment

begin_typedef
typedef|typedef
struct|struct
name|drm_radeon_setparam32
block|{
name|int
name|param
decl_stmt|;
name|u64
name|value
decl_stmt|;
block|}
name|__attribute__
typedef|((
name|packed
typedef|))
name|drm_radeon_setparam32_t
typedef|;
end_typedef

begin_function
specifier|static
name|int
name|compat_radeon_cp_setparam
parameter_list|(
name|struct
name|drm_device
modifier|*
name|dev
parameter_list|,
name|void
modifier|*
name|arg
parameter_list|,
name|struct
name|drm_file
modifier|*
name|file_priv
parameter_list|)
block|{
name|drm_radeon_setparam32_t
modifier|*
name|req32
decl_stmt|;
name|drm_radeon_setparam_t
name|__user
name|request
decl_stmt|;
name|req32
operator|=
name|arg
expr_stmt|;
name|request
operator|.
name|param
operator|=
name|req32
operator|->
name|param
expr_stmt|;
name|request
operator|.
name|value
operator|=
name|req32
operator|->
name|value
expr_stmt|;
return|return
name|radeon_ioctls
index|[
name|DRM_IOCTL_RADEON_SETPARAM
index|]
operator|.
name|func
argument_list|(
name|dev
argument_list|,
operator|&
name|request
argument_list|,
name|file_priv
argument_list|)
return|;
block|}
end_function

begin_decl_stmt
name|struct
name|drm_ioctl_desc
name|radeon_compat_ioctls
index|[]
init|=
block|{
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_CP_INIT
argument_list|,
name|compat_radeon_cp_init
argument_list|,
name|DRM_AUTH
operator||
name|DRM_MASTER
operator||
name|DRM_ROOT_ONLY
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_CLEAR
argument_list|,
name|compat_radeon_cp_clear
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_STIPPLE
argument_list|,
name|compat_radeon_cp_stipple
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_TEXTURE
argument_list|,
name|compat_radeon_cp_texture
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_VERTEX2
argument_list|,
name|compat_radeon_cp_vertex2
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_CMDBUF
argument_list|,
name|compat_radeon_cp_cmdbuf
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_GETPARAM
argument_list|,
name|compat_radeon_cp_getparam
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_SETPARAM
argument_list|,
name|compat_radeon_cp_setparam
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
name|DRM_RADEON_ALLOC
argument_list|,
name|compat_radeon_mem_alloc
argument_list|,
name|DRM_AUTH
argument_list|)
block|,
name|DRM_IOCTL_DEF
argument_list|(
argument|DRM_RADEON_IRQ_EMIT
argument_list|,
argument|compat_radeon_irq_emit
argument_list|,
argument|DRM_AUTH
argument_list|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|radeon_num_compat_ioctls
init|=
name|DRM_ARRAY_SIZE
argument_list|(
name|radeon_compat_ioctls
argument_list|)
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

end_unit

