begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2003-2012 Broadcom Corporation  * All Rights Reserved  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  *  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in  *    the documentation and/or other materials provided with the  *    distribution.  *   * THIS SOFTWARE IS PROVIDED BY BROADCOM ``AS IS'' AND ANY EXPRESS OR  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED  * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED. IN NO EVENT SHALL BROADCOM OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR  * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN  * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<sys/systm.h>
end_include

begin_include
include|#
directive|include
file|<mips/nlm/hal/mips-extns.h>
end_include

begin_include
include|#
directive|include
file|<mips/nlm/hal/haldefs.h>
end_include

begin_include
include|#
directive|include
file|<mips/nlm/hal/iomap.h>
end_include

begin_include
include|#
directive|include
file|<mips/nlm/hal/sys.h>
end_include

begin_include
include|#
directive|include
file|<mips/nlm/hal/nae.h>
end_include

begin_include
include|#
directive|include
file|<mips/nlm/hal/mdio.h>
end_include

begin_comment
comment|/* Internal MDIO READ/WRITE Routines */
end_comment

begin_function
name|int
name|nlm_int_gmac_mdio_read
parameter_list|(
name|uint64_t
name|nae_base
parameter_list|,
name|int
name|bus
parameter_list|,
name|int
name|block
parameter_list|,
name|int
name|intf_type
parameter_list|,
name|int
name|phyaddr
parameter_list|,
name|int
name|regidx
parameter_list|)
block|{
name|uint32_t
name|mdio_ld_cmd
decl_stmt|;
name|uint32_t
name|ctrlval
decl_stmt|;
name|ctrlval
operator|=
name|INT_MDIO_CTRL_SMP
operator||
operator|(
name|phyaddr
operator|<<
name|INT_MDIO_CTRL_PHYADDR_POS
operator|)
operator||
operator|(
name|regidx
operator|<<
name|INT_MDIO_CTRL_DEVTYPE_POS
operator|)
operator||
operator|(
literal|2
operator|<<
name|INT_MDIO_CTRL_OP_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_ST_POS
operator|)
operator||
operator|(
literal|7
operator|<<
name|INT_MDIO_CTRL_XDIV_POS
operator|)
operator||
operator|(
literal|2
operator|<<
name|INT_MDIO_CTRL_TA_POS
operator|)
operator||
operator|(
literal|2
operator|<<
name|INT_MDIO_CTRL_MIIM_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_MCDIV_POS
operator|)
expr_stmt|;
name|mdio_ld_cmd
operator|=
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|mdio_ld_cmd
operator|&
name|INT_MDIO_CTRL_CMD_LOAD
condition|)
block|{
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
operator|(
name|mdio_ld_cmd
operator|&
operator|~
name|INT_MDIO_CTRL_CMD_LOAD
operator|)
argument_list|)
expr_stmt|;
block|}
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
argument_list|)
expr_stmt|;
comment|/* Toggle Load Cmd Bit */
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_LOAD_POS
operator|)
argument_list|)
expr_stmt|;
comment|/* poll master busy bit until it is not busy */
while|while
condition|(
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
operator|&
name|INT_MDIO_STAT_MBSY
condition|)
block|{ 	}
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
argument_list|)
expr_stmt|;
comment|/* Read the data back */
return|return
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/* Internal MDIO WRITE Routines */
end_comment

begin_function
name|int
name|nlm_int_gmac_mdio_write
parameter_list|(
name|uint64_t
name|nae_base
parameter_list|,
name|int
name|bus
parameter_list|,
name|int
name|block
parameter_list|,
name|int
name|intf_type
parameter_list|,
name|int
name|phyaddr
parameter_list|,
name|int
name|regidx
parameter_list|,
name|uint16_t
name|val
parameter_list|)
block|{
name|uint32_t
name|mdio_ld_cmd
decl_stmt|;
name|uint32_t
name|ctrlval
decl_stmt|;
name|ctrlval
operator|=
name|INT_MDIO_CTRL_SMP
operator||
operator|(
name|phyaddr
operator|<<
name|INT_MDIO_CTRL_PHYADDR_POS
operator|)
operator||
operator|(
name|regidx
operator|<<
name|INT_MDIO_CTRL_DEVTYPE_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_OP_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_ST_POS
operator|)
operator||
operator|(
literal|7
operator|<<
name|INT_MDIO_CTRL_XDIV_POS
operator|)
operator||
operator|(
literal|2
operator|<<
name|INT_MDIO_CTRL_TA_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_MIIM_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_MCDIV_POS
operator|)
expr_stmt|;
name|mdio_ld_cmd
operator|=
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|mdio_ld_cmd
operator|&
name|INT_MDIO_CTRL_CMD_LOAD
condition|)
block|{
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
operator|(
name|mdio_ld_cmd
operator|&
operator|~
name|INT_MDIO_CTRL_CMD_LOAD
operator|)
argument_list|)
expr_stmt|;
block|}
comment|/* load data into ctrl data reg */
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL_DATA
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_LOAD_POS
operator|)
argument_list|)
expr_stmt|;
comment|/* poll master busy bit until it is not busy */
while|while
condition|(
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
operator|&
name|INT_MDIO_STAT_MBSY
condition|)
block|{ 	}
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
name|int
name|nlm_int_gmac_mdio_reset
parameter_list|(
name|uint64_t
name|nae_base
parameter_list|,
name|int
name|bus
parameter_list|,
name|int
name|block
parameter_list|,
name|int
name|intf_type
parameter_list|)
block|{
name|uint32_t
name|val
decl_stmt|;
name|val
operator|=
operator|(
literal|7
operator|<<
name|INT_MDIO_CTRL_XDIV_POS
operator|)
operator||
operator|(
literal|1
operator|<<
name|INT_MDIO_CTRL_MCDIV_POS
operator|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
operator||
name|INT_MDIO_CTRL_RST
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|INT_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  *  nae_gmac_mdio_read - Read sgmii phy register  *  *  Input parameters:  *         bus          - bus number, nae has two external gmac bus: 0 and 1  *         phyaddr      - PHY's address  *         regidx       - index of register to read  *  *  Return value:  *         value read (16 bits), or 0xffffffff if an error occurred.  */
end_comment

begin_function
name|int
name|nlm_gmac_mdio_read
parameter_list|(
name|uint64_t
name|nae_base
parameter_list|,
name|int
name|bus
parameter_list|,
name|int
name|block
parameter_list|,
name|int
name|intf_type
parameter_list|,
name|int
name|phyaddr
parameter_list|,
name|int
name|regidx
parameter_list|)
block|{
name|uint32_t
name|mdio_ld_cmd
decl_stmt|;
name|uint32_t
name|val
decl_stmt|;
name|val
operator|=
name|EXT_G_MDIO_CMD_SP
operator||
operator|(
name|phyaddr
operator|<<
name|EXT_G_MDIO_PHYADDR_POS
operator|)
operator||
operator|(
name|regidx
operator|<<
name|EXT_G_MDIO_REGADDR_POS
operator|)
operator||
name|EXT_G_MDIO_DIV
expr_stmt|;
name|mdio_ld_cmd
operator|=
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|mdio_ld_cmd
operator|&
name|EXT_G_MDIO_CMD_LCD
condition|)
block|{
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
operator|(
name|mdio_ld_cmd
operator|&
operator|~
name|EXT_G_MDIO_CMD_LCD
operator|)
argument_list|)
expr_stmt|;
while|while
condition|(
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
operator|&
name|EXT_G_MDIO_STAT_MBSY
condition|)
empty_stmt|;
block|}
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
operator||
operator|(
literal|1
operator|<<
literal|18
operator|)
argument_list|)
expr_stmt|;
comment|/* poll master busy bit until it is not busy */
while|while
condition|(
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
operator|&
name|EXT_G_MDIO_STAT_MBSY
condition|)
empty_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
argument_list|)
expr_stmt|;
comment|/* Read the data back */
return|return
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/*  *  nae_gmac_mdio_write -Write sgmac mii PHY register.  *  *  Input parameters:  *         bus          - bus number, nae has two external gmac bus: 0 and 1  *         phyaddr      - PHY to use  *         regidx       - register within the PHY  *         val          - data to write to register  *  *  Return value:  *         0 - success  */
end_comment

begin_function
name|int
name|nlm_gmac_mdio_write
parameter_list|(
name|uint64_t
name|nae_base
parameter_list|,
name|int
name|bus
parameter_list|,
name|int
name|block
parameter_list|,
name|int
name|intf_type
parameter_list|,
name|int
name|phyaddr
parameter_list|,
name|int
name|regidx
parameter_list|,
name|uint16_t
name|val
parameter_list|)
block|{
name|uint32_t
name|mdio_ld_cmd
decl_stmt|;
name|uint32_t
name|ctrlval
decl_stmt|;
name|ctrlval
operator|=
name|EXT_G_MDIO_CMD_SP
operator||
operator|(
name|phyaddr
operator|<<
name|EXT_G_MDIO_PHYADDR_POS
operator|)
operator||
operator|(
name|regidx
operator|<<
name|EXT_G_MDIO_REGADDR_POS
operator|)
operator||
name|EXT_G_MDIO_DIV
expr_stmt|;
name|mdio_ld_cmd
operator|=
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|mdio_ld_cmd
operator|&
name|EXT_G_MDIO_CMD_LCD
condition|)
block|{
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
operator|(
name|mdio_ld_cmd
operator|&
operator|~
name|EXT_G_MDIO_CMD_LCD
operator|)
argument_list|)
expr_stmt|;
while|while
condition|(
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
operator|&
name|EXT_G_MDIO_STAT_MBSY
condition|)
empty_stmt|;
block|}
comment|/* load data into ctrl data reg */
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL_DATA
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|val
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
operator||
name|EXT_G_MDIO_CMD_LCD
argument_list|)
expr_stmt|;
comment|/* poll master busy bit until it is not busy */
while|while
condition|(
name|nlm_read_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_RD_STAT
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|)
operator|&
name|EXT_G_MDIO_STAT_MBSY
condition|)
empty_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|ctrlval
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  *  nae_gmac_mdio_reset -Reset sgmii mdio module.  *  *  Input parameters:  *         bus - bus number, nae has two external gmac bus: 0 and 1  *  *  Return value:  *        0 - success  */
end_comment

begin_function
name|int
name|nlm_gmac_mdio_reset
parameter_list|(
name|uint64_t
name|nae_base
parameter_list|,
name|int
name|bus
parameter_list|,
name|int
name|block
parameter_list|,
name|int
name|intf_type
parameter_list|)
block|{
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|EXT_G_MDIO_MMRST
operator||
name|EXT_G_MDIO_DIV
argument_list|)
expr_stmt|;
name|nlm_write_nae_reg
argument_list|(
name|nae_base
argument_list|,
name|NAE_REG
argument_list|(
name|block
argument_list|,
name|intf_type
argument_list|,
operator|(
name|EXT_G0_MDIO_CTRL
operator|+
name|bus
operator|*
literal|4
operator|)
argument_list|)
argument_list|,
name|EXT_G_MDIO_DIV
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

end_unit

