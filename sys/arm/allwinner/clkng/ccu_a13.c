begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2017 Emmanuel Vadot<manu@freebsd.org>  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES  * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.  * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,  * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,  * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;  * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED  * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,  * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  *  * $FreeBSD$  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/systm.h>
end_include

begin_include
include|#
directive|include
file|<sys/bus.h>
end_include

begin_include
include|#
directive|include
file|<dev/extres/clk/clk_div.h>
end_include

begin_include
include|#
directive|include
file|<dev/extres/clk/clk_fixed.h>
end_include

begin_include
include|#
directive|include
file|<dev/extres/clk/clk_mux.h>
end_include

begin_include
include|#
directive|include
file|<arm/allwinner/clkng/aw_ccung.h>
end_include

begin_include
include|#
directive|include
file|<arm/allwinner/clkng/aw_clk.h>
end_include

begin_include
include|#
directive|include
file|<arm/allwinner/clkng/aw_clk_nm.h>
end_include

begin_include
include|#
directive|include
file|<arm/allwinner/clkng/aw_clk_nkmp.h>
end_include

begin_include
include|#
directive|include
file|<arm/allwinner/clkng/aw_clk_prediv_mux.h>
end_include

begin_include
include|#
directive|include
file|<dt-bindings/clock/sun5i-ccu.h>
end_include

begin_include
include|#
directive|include
file|<dt-bindings/reset/sun5i-ccu.h>
end_include

begin_include
include|#
directive|include
file|"ccu_a13.h"
end_include

begin_comment
comment|/* Non-exported clocks */
end_comment

begin_define
define|#
directive|define
name|CLK_PLL_CORE
value|2
end_define

begin_define
define|#
directive|define
name|CLK_PLL_AUDIO_BASE
value|3
end_define

begin_define
define|#
directive|define
name|CLK_PLL_AUDIO
value|4
end_define

begin_define
define|#
directive|define
name|CLK_PLL_AUDIO_2X
value|5
end_define

begin_define
define|#
directive|define
name|CLK_PLL_AUDIO_4X
value|6
end_define

begin_define
define|#
directive|define
name|CLK_PLL_AUDIO_8X
value|7
end_define

begin_define
define|#
directive|define
name|CLK_PLL_VIDEO0
value|8
end_define

begin_define
define|#
directive|define
name|CLK_PLL_VE
value|10
end_define

begin_define
define|#
directive|define
name|CLK_PLL_DDR_BASE
value|11
end_define

begin_define
define|#
directive|define
name|CLK_PLL_DDR
value|12
end_define

begin_define
define|#
directive|define
name|CLK_PLL_DDR_OTHER
value|13
end_define

begin_define
define|#
directive|define
name|CLK_PLL_PERIPH
value|14
end_define

begin_define
define|#
directive|define
name|CLK_PLL_VIDEO1
value|15
end_define

begin_define
define|#
directive|define
name|CLK_AXI
value|18
end_define

begin_define
define|#
directive|define
name|CLK_AHB
value|19
end_define

begin_define
define|#
directive|define
name|CLK_APB0
value|20
end_define

begin_define
define|#
directive|define
name|CLK_APB1
value|21
end_define

begin_define
define|#
directive|define
name|CLK_DRAM_AXI
value|22
end_define

begin_define
define|#
directive|define
name|CLK_TCON_CH1_SCLK
value|91
end_define

begin_define
define|#
directive|define
name|CLK_MBUS
value|99
end_define

begin_decl_stmt
specifier|static
name|struct
name|aw_ccung_reset
name|a13_ccu_resets
index|[]
init|=
block|{
name|CCU_RESET
argument_list|(
argument|RST_USB_PHY0
argument_list|,
literal|0xcc
argument_list|,
literal|0
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_USB_PHY1
argument_list|,
literal|0xcc
argument_list|,
literal|1
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_GPS
argument_list|,
literal|0xd0
argument_list|,
literal|30
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_DE_BE
argument_list|,
literal|0x104
argument_list|,
literal|30
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_DE_FE
argument_list|,
literal|0x10c
argument_list|,
literal|30
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_TVE
argument_list|,
literal|0x118
argument_list|,
literal|29
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_LCD
argument_list|,
literal|0x118
argument_list|,
literal|30
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_CSI
argument_list|,
literal|0x134
argument_list|,
literal|30
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_VE
argument_list|,
literal|0x13c
argument_list|,
literal|0
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_GPU
argument_list|,
literal|0x154
argument_list|,
literal|30
argument_list|)
name|CCU_RESET
argument_list|(
argument|RST_IEP
argument_list|,
literal|0x160
argument_list|,
literal|30
argument_list|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_ccung_gate
name|a13_ccu_gates
index|[]
init|=
block|{
name|CCU_GATE
argument_list|(
argument|CLK_HOSC
argument_list|,
literal|"hosc"
argument_list|,
literal|"osc24M"
argument_list|,
literal|0x50
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_AXI
argument_list|,
literal|"axi-dram"
argument_list|,
literal|"axi"
argument_list|,
literal|0x5c
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_OTG
argument_list|,
literal|"ahb-otg"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_EHCI
argument_list|,
literal|"ahb-ehci"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|1
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_OHCI
argument_list|,
literal|"ahb-ohci"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|2
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_SS
argument_list|,
literal|"ahb-ss"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|5
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_DMA
argument_list|,
literal|"ahb-dma"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|6
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_BIST
argument_list|,
literal|"ahb-bist"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|7
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_MMC0
argument_list|,
literal|"ahb-mmc0"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|8
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_MMC1
argument_list|,
literal|"ahb-mmc1"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|9
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_MMC2
argument_list|,
literal|"ahb-mmc2"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|10
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_NAND
argument_list|,
literal|"ahb-nand"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|13
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_SDRAM
argument_list|,
literal|"ahb-sdram"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|14
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_SPI0
argument_list|,
literal|"ahb-spi0"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|20
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_SPI1
argument_list|,
literal|"ahb-spi1"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|21
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_SPI2
argument_list|,
literal|"ahb-spi2"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|22
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_GPS
argument_list|,
literal|"ahb-gps"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|26
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_HSTIMER
argument_list|,
literal|"ahb-hstimer"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x60
argument_list|,
literal|28
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_VE
argument_list|,
literal|"ahb-ve"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_LCD
argument_list|,
literal|"ahb-lcd"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|4
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_CSI
argument_list|,
literal|"ahb-csi"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|8
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_DE_BE
argument_list|,
literal|"ahb-de-be"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|12
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_DE_FE
argument_list|,
literal|"ahb-de-fe"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|14
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_IEP
argument_list|,
literal|"ahb-iep"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|19
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AHB_GPU
argument_list|,
literal|"ahb-gpu"
argument_list|,
literal|"ahb"
argument_list|,
literal|0x64
argument_list|,
literal|20
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB0_CODEC
argument_list|,
literal|"apb0-codec"
argument_list|,
literal|"apb0"
argument_list|,
literal|0x68
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB0_PIO
argument_list|,
literal|"apb0-pio"
argument_list|,
literal|"apb0"
argument_list|,
literal|0x68
argument_list|,
literal|5
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB0_IR
argument_list|,
literal|"apb0-ir"
argument_list|,
literal|"apb0"
argument_list|,
literal|0x68
argument_list|,
literal|6
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB1_I2C0
argument_list|,
literal|"apb1-i2c0"
argument_list|,
literal|"apb1"
argument_list|,
literal|0x6c
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB1_I2C1
argument_list|,
literal|"apb1-i2c1"
argument_list|,
literal|"apb1"
argument_list|,
literal|0x6c
argument_list|,
literal|1
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB1_I2C2
argument_list|,
literal|"apb1-i2c2"
argument_list|,
literal|"apb1"
argument_list|,
literal|0x6c
argument_list|,
literal|2
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB1_UART1
argument_list|,
literal|"apb1-uart1"
argument_list|,
literal|"apb1"
argument_list|,
literal|0x6c
argument_list|,
literal|17
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_APB1_UART3
argument_list|,
literal|"apb1-uart3"
argument_list|,
literal|"apb1"
argument_list|,
literal|0x6c
argument_list|,
literal|19
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_VE
argument_list|,
literal|"dram-ve"
argument_list|,
literal|"pll-ddr"
argument_list|,
literal|0x100
argument_list|,
literal|0
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_CSI
argument_list|,
literal|"dram-csi"
argument_list|,
literal|"pll-ddr"
argument_list|,
literal|0x100
argument_list|,
literal|1
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_DE_FE
argument_list|,
literal|"dram-de-fe"
argument_list|,
literal|"pll-ddr"
argument_list|,
literal|0x100
argument_list|,
literal|25
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_DE_BE
argument_list|,
literal|"dram-de-be"
argument_list|,
literal|"pll-ddr"
argument_list|,
literal|0x100
argument_list|,
literal|26
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_ACE
argument_list|,
literal|"dram-ace"
argument_list|,
literal|"pll-ddr"
argument_list|,
literal|0x100
argument_list|,
literal|29
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_DRAM_IEP
argument_list|,
literal|"dram-iep"
argument_list|,
literal|"pll-ddr"
argument_list|,
literal|0x100
argument_list|,
literal|31
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_CODEC
argument_list|,
literal|"codec"
argument_list|,
literal|"pll-audio"
argument_list|,
literal|0x140
argument_list|,
literal|31
argument_list|)
name|CCU_GATE
argument_list|(
argument|CLK_AVS
argument_list|,
literal|"avs"
argument_list|,
literal|"hosc"
argument_list|,
literal|0x144
argument_list|,
literal|31
argument_list|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|pll_parents
index|[]
init|=
block|{
literal|"hosc"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nkmp_def
name|pll_core
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_PLL_CORE
block|,
operator|.
name|name
operator|=
literal|"pll-core"
block|,
operator|.
name|parent_names
operator|=
name|pll_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|pll_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x00
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|8
block|,
operator|.
name|width
operator|=
literal|5
block|}
block|,
operator|.
name|k
operator|=
block|{
operator|.
name|shift
operator|=
literal|4
block|,
operator|.
name|width
operator|=
literal|2
block|}
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|2
block|}
block|,
operator|.
name|p
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|}
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_GATE
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*   * We only implement pll-audio for now  * For pll-audio-2/4/8 x we need a way to change the frequency  * of the parent clocks  */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nkmp_def
name|pll_audio
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_PLL_AUDIO
block|,
operator|.
name|name
operator|=
literal|"pll-audio"
block|,
operator|.
name|parent_names
operator|=
name|pll_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|pll_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x08
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|8
block|,
operator|.
name|width
operator|=
literal|7
block|}
block|,
operator|.
name|k
operator|=
block|{
operator|.
name|value
operator|=
literal|1
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_FIXED
block|}
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|5
block|}
block|,
operator|.
name|p
operator|=
block|{
operator|.
name|shift
operator|=
literal|26
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_GATE
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Missing PLL3-Video */
end_comment

begin_comment
comment|/* Missing PLL4-VE */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nkmp_def
name|pll_ddr_base
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_PLL_DDR_BASE
block|,
operator|.
name|name
operator|=
literal|"pll-ddr-base"
block|,
operator|.
name|parent_names
operator|=
name|pll_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|pll_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x20
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|8
block|,
operator|.
name|width
operator|=
literal|5
block|}
block|,
operator|.
name|k
operator|=
block|{
operator|.
name|shift
operator|=
literal|4
block|,
operator|.
name|width
operator|=
literal|2
block|}
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|value
operator|=
literal|1
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_FIXED
block|}
block|,
operator|.
name|p
operator|=
block|{
operator|.
name|value
operator|=
literal|1
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_FIXED
block|}
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_GATE
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|pll_ddr_parents
index|[]
init|=
block|{
literal|"pll-ddr-base"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_div_def
name|pll_ddr
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_PLL_DDR
block|,
operator|.
name|name
operator|=
literal|"pll-ddr"
block|,
operator|.
name|parent_names
operator|=
name|pll_ddr_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|pll_ddr_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x20
block|,
operator|.
name|i_shift
operator|=
literal|0
block|,
operator|.
name|i_width
operator|=
literal|2
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|pll_ddr_other_parents
index|[]
init|=
block|{
literal|"pll-ddr-base"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_div_def
name|pll_ddr_other
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_PLL_DDR_OTHER
block|,
operator|.
name|name
operator|=
literal|"pll-ddr-other"
block|,
operator|.
name|parent_names
operator|=
name|pll_ddr_other_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|pll_ddr_other_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x20
block|,
operator|.
name|i_shift
operator|=
literal|16
block|,
operator|.
name|i_width
operator|=
literal|2
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nkmp_def
name|pll_periph
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_PLL_PERIPH
block|,
operator|.
name|name
operator|=
literal|"pll-periph"
block|,
operator|.
name|parent_names
operator|=
name|pll_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|pll_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x28
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|8
block|,
operator|.
name|width
operator|=
literal|5
block|}
block|,
operator|.
name|k
operator|=
block|{
operator|.
name|shift
operator|=
literal|4
block|,
operator|.
name|width
operator|=
literal|2
block|}
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|2
block|}
block|,
operator|.
name|p
operator|=
block|{
operator|.
name|value
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_FIXED
block|}
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_GATE
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Missing PLL7-VIDEO1 */
end_comment

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|cpu_parents
index|[]
init|=
block|{
literal|"osc32k"
block|,
literal|"hosc"
block|,
literal|"pll-core"
block|,
literal|"pll-periph"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_prediv_mux_def
name|cpu_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_CPU
block|,
operator|.
name|name
operator|=
literal|"cpu"
block|,
operator|.
name|parent_names
operator|=
name|cpu_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|cpu_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x54
block|,
operator|.
name|mux_shift
operator|=
literal|16
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|prediv
operator|=
block|{
operator|.
name|value
operator|=
literal|6
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_FIXED
block|,
operator|.
name|cond_shift
operator|=
literal|16
block|,
operator|.
name|cond_width
operator|=
literal|2
block|,
operator|.
name|cond_value
operator|=
literal|3
block|, 	}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|axi_parents
index|[]
init|=
block|{
literal|"cpu"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_div_def
name|axi_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_AXI
block|,
operator|.
name|name
operator|=
literal|"axi"
block|,
operator|.
name|parent_names
operator|=
name|axi_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|axi_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x50
block|,
operator|.
name|i_shift
operator|=
literal|0
block|,
operator|.
name|i_width
operator|=
literal|2
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|ahb_parents
index|[]
init|=
block|{
literal|"axi"
block|,
literal|"cpu"
block|,
literal|"pll-periph"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_prediv_mux_def
name|ahb_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_AHB
block|,
operator|.
name|name
operator|=
literal|"ahb"
block|,
operator|.
name|parent_names
operator|=
name|ahb_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|ahb_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x54
block|,
operator|.
name|mux_shift
operator|=
literal|6
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|div
operator|=
block|{
operator|.
name|shift
operator|=
literal|4
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|}
block|,
operator|.
name|prediv
operator|=
block|{
operator|.
name|value
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_FIXED
block|,
operator|.
name|cond_shift
operator|=
literal|6
block|,
operator|.
name|cond_width
operator|=
literal|2
block|,
operator|.
name|cond_value
operator|=
literal|2
block|, 	}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|apb0_parents
index|[]
init|=
block|{
literal|"ahb"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_div_table
name|apb0_div_table
index|[]
init|=
block|{
block|{
operator|.
name|value
operator|=
literal|0
block|,
operator|.
name|divider
operator|=
literal|2
block|, }
block|,
block|{
operator|.
name|value
operator|=
literal|1
block|,
operator|.
name|divider
operator|=
literal|2
block|, }
block|,
block|{
operator|.
name|value
operator|=
literal|2
block|,
operator|.
name|divider
operator|=
literal|4
block|, }
block|,
block|{
operator|.
name|value
operator|=
literal|3
block|,
operator|.
name|divider
operator|=
literal|8
block|, }
block|,
block|{ }
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_div_def
name|apb0_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_APB0
block|,
operator|.
name|name
operator|=
literal|"apb0"
block|,
operator|.
name|parent_names
operator|=
name|apb0_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|apb0_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x54
block|,
operator|.
name|i_shift
operator|=
literal|8
block|,
operator|.
name|i_width
operator|=
literal|2
block|,
operator|.
name|div_flags
operator|=
name|CLK_DIV_WITH_TABLE
block|,
operator|.
name|div_table
operator|=
name|apb0_div_table
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|apb1_parents
index|[]
init|=
block|{
literal|"hosc"
block|,
literal|"pll-periph"
block|,
literal|"osc32k"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|apb1_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_APB1
block|,
operator|.
name|name
operator|=
literal|"apb1"
block|,
operator|.
name|parent_names
operator|=
name|apb1_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|apb1_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x58
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|5
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|mod_parents
index|[]
init|=
block|{
literal|"hosc"
block|,
literal|"pll-periph"
block|,
literal|"pll-ddr-other"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|nand_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_NAND
block|,
operator|.
name|name
operator|=
literal|"nand"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x80
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|mmc0_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_MMC0
block|,
operator|.
name|name
operator|=
literal|"mmc0"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x88
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|mmc1_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_MMC1
block|,
operator|.
name|name
operator|=
literal|"mmc1"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x8C
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|mmc2_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_MMC2
block|,
operator|.
name|name
operator|=
literal|"mmc2"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x90
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|ss_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_SS
block|,
operator|.
name|name
operator|=
literal|"ss"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0x9C
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|spi0_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_SPI0
block|,
operator|.
name|name
operator|=
literal|"spi0"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0xA0
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|spi1_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_SPI1
block|,
operator|.
name|name
operator|=
literal|"spi1"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0xA4
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|spi2_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_SPI2
block|,
operator|.
name|name
operator|=
literal|"spi2"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0xA8
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
name|ir_clk
init|=
block|{
operator|.
name|clkdef
operator|=
block|{
operator|.
name|id
operator|=
name|CLK_IR
block|,
operator|.
name|name
operator|=
literal|"ir"
block|,
operator|.
name|parent_names
operator|=
name|mod_parents
block|,
operator|.
name|parent_cnt
operator|=
name|nitems
argument_list|(
name|mod_parents
argument_list|)
block|, 	}
block|,
operator|.
name|offset
operator|=
literal|0xB0
block|,
operator|.
name|n
operator|=
block|{
operator|.
name|shift
operator|=
literal|16
block|,
operator|.
name|width
operator|=
literal|2
block|,
operator|.
name|flags
operator|=
name|AW_CLK_FACTOR_POWER_OF_TWO
block|, }
block|,
operator|.
name|m
operator|=
block|{
operator|.
name|shift
operator|=
literal|0
block|,
operator|.
name|width
operator|=
literal|4
block|}
block|,
operator|.
name|mux_shift
operator|=
literal|24
block|,
operator|.
name|mux_width
operator|=
literal|2
block|,
operator|.
name|gate_shift
operator|=
literal|31
block|,
operator|.
name|flags
operator|=
name|AW_CLK_HAS_MUX
operator||
name|AW_CLK_HAS_GATE
operator||
name|AW_CLK_REPARENT
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Missing DE-BE clock */
end_comment

begin_comment
comment|/* Missing DE-FE clock */
end_comment

begin_comment
comment|/* Missing LCD CH1 clock */
end_comment

begin_comment
comment|/* Missing CSI clock */
end_comment

begin_comment
comment|/* Missing VE clock */
end_comment

begin_comment
comment|/* Clocks list */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nkmp_def
modifier|*
name|nkmp_clks
index|[]
init|=
block|{
operator|&
name|pll_core
block|,
operator|&
name|pll_audio
block|,
operator|&
name|pll_ddr_base
block|,
operator|&
name|pll_periph
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_nm_def
modifier|*
name|nm_clks
index|[]
init|=
block|{
operator|&
name|apb1_clk
block|,
operator|&
name|nand_clk
block|,
operator|&
name|mmc0_clk
block|,
operator|&
name|mmc1_clk
block|,
operator|&
name|mmc2_clk
block|,
operator|&
name|ss_clk
block|,
operator|&
name|spi0_clk
block|,
operator|&
name|spi1_clk
block|,
operator|&
name|spi2_clk
block|,
operator|&
name|ir_clk
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_prediv_mux_def
modifier|*
name|prediv_mux_clks
index|[]
init|=
block|{
operator|&
name|cpu_clk
block|,
operator|&
name|ahb_clk
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_div_def
modifier|*
name|div_clks
index|[]
init|=
block|{
operator|&
name|pll_ddr
block|,
operator|&
name|pll_ddr_other
block|,
operator|&
name|axi_clk
block|,
operator|&
name|apb0_clk
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_mux_def
modifier|*
name|mux_clks
index|[]
init|=
block|{ }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|clk_fixed_def
modifier|*
name|fixed_factor_clks
index|[]
init|=
block|{ }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|struct
name|aw_clk_init
name|init_clks
index|[]
init|=
block|{ }
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|ccu_a13_register_clocks
parameter_list|(
name|struct
name|aw_ccung_softc
modifier|*
name|sc
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
name|sc
operator|->
name|resets
operator|=
name|a13_ccu_resets
expr_stmt|;
name|sc
operator|->
name|nresets
operator|=
name|nitems
argument_list|(
name|a13_ccu_resets
argument_list|)
expr_stmt|;
name|sc
operator|->
name|gates
operator|=
name|a13_ccu_gates
expr_stmt|;
name|sc
operator|->
name|ngates
operator|=
name|nitems
argument_list|(
name|a13_ccu_gates
argument_list|)
expr_stmt|;
name|sc
operator|->
name|clk_init
operator|=
name|init_clks
expr_stmt|;
name|sc
operator|->
name|n_clk_init
operator|=
name|nitems
argument_list|(
name|init_clks
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nitems
argument_list|(
name|nkmp_clks
argument_list|)
condition|;
name|i
operator|++
control|)
name|aw_clk_nkmp_register
argument_list|(
name|sc
operator|->
name|clkdom
argument_list|,
name|nkmp_clks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nitems
argument_list|(
name|nm_clks
argument_list|)
condition|;
name|i
operator|++
control|)
name|aw_clk_nm_register
argument_list|(
name|sc
operator|->
name|clkdom
argument_list|,
name|nm_clks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nitems
argument_list|(
name|prediv_mux_clks
argument_list|)
condition|;
name|i
operator|++
control|)
name|aw_clk_prediv_mux_register
argument_list|(
name|sc
operator|->
name|clkdom
argument_list|,
name|prediv_mux_clks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nitems
argument_list|(
name|mux_clks
argument_list|)
condition|;
name|i
operator|++
control|)
name|clknode_mux_register
argument_list|(
name|sc
operator|->
name|clkdom
argument_list|,
name|mux_clks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nitems
argument_list|(
name|div_clks
argument_list|)
condition|;
name|i
operator|++
control|)
name|clknode_div_register
argument_list|(
name|sc
operator|->
name|clkdom
argument_list|,
name|div_clks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|nitems
argument_list|(
name|fixed_factor_clks
argument_list|)
condition|;
name|i
operator|++
control|)
name|clknode_fixed_register
argument_list|(
name|sc
operator|->
name|clkdom
argument_list|,
name|fixed_factor_clks
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

