begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * HISTORY  * $Log:	scsi_all.h,v $  * Revision 1.1.1.1  1993/06/12  14:57:27  rgrimes  * Initial import, 0.1 + pk 0.2.4-B1  *  * Revision 1.2  1992/11/20  23:07:13  julian  * add a definition for device type T_NODEVICE  *  * Revision 1.1  1992/09/26  22:14:02  julian  * Initial revision  *  *   */
end_comment

begin_comment
comment|/*  * SCSI general  interface description  */
end_comment

begin_comment
comment|/*  * Largely written by Julian Elischer (julian@tfs.com)  * for TRW Financial Systems.  *  * TRW Financial Systems, in accordance with their agreement with Carnegie  * Mellon University, makes this software available to CMU to distribute  * or use in any manner that they see fit as long as this message is kept with   * the software. For this reason TFS also grants any other persons or  * organisations permission to use or modify this software.  *  * TFS supplies this software to be publicly redistributed  * on the understanding that TFS is not responsible for the correct  * functioning of this software in any circumstances.  *  */
end_comment

begin_comment
comment|/*  * Ported to run under 386BSD by Julian Elischer (julian@tfs.com) Sept 1992  */
end_comment

begin_comment
comment|/*  * SCSI command format  */
end_comment

begin_struct
struct|struct
name|scsi_generic
block|{
name|u_char
name|opcode
decl_stmt|;
name|u_char
name|bytes
index|[
literal|11
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_test_unit_ready
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|4
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_send_diag
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|uol
range|:
literal|1
decl_stmt|;
name|u_char
name|dol
range|:
literal|1
decl_stmt|;
name|u_char
name|selftest
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|1
expr_stmt|;
name|u_char
name|pf
range|:
literal|1
decl_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|1
index|]
decl_stmt|;
name|u_char
name|paramlen
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|4
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_sense
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|length
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_inquiry
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|length
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_sense
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|u_char
name|dbd
range|:
literal|1
decl_stmt|;
name|u_char
name|rsvd
range|:
literal|1
decl_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|page_code
range|:
literal|6
decl_stmt|;
name|u_char
name|page_ctrl
range|:
literal|2
decl_stmt|;
name|u_char
name|unused
decl_stmt|;
name|u_char
name|length
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_sense_big
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|u_char
name|dbd
range|:
literal|1
decl_stmt|;
name|u_char
name|rsvd
range|:
literal|1
decl_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|page_code
range|:
literal|6
decl_stmt|;
name|u_char
name|page_ctrl
range|:
literal|2
decl_stmt|;
name|u_char
name|unused
index|[
literal|4
index|]
decl_stmt|;
name|u_char
name|length
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_select
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|sp
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|u_char
name|pf
range|:
literal|1
decl_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|length
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_select_big
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|sp
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|u_char
name|pf
range|:
literal|1
decl_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|5
index|]
decl_stmt|;
name|u_char
name|length
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_reserve
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|length
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_release
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|length
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_prevent
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|prevent
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|7
expr_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|PR_PREVENT
value|1
end_define

begin_define
define|#
directive|define
name|PR_ALLOW
value|0
end_define

begin_comment
comment|/*  * Opcodes  */
end_comment

begin_define
define|#
directive|define
name|TEST_UNIT_READY
value|0x00
end_define

begin_define
define|#
directive|define
name|REQUEST_SENSE
value|0x03
end_define

begin_define
define|#
directive|define
name|INQUIRY
value|0x12
end_define

begin_define
define|#
directive|define
name|MODE_SELECT
value|0x15
end_define

begin_define
define|#
directive|define
name|MODE_SENSE
value|0x1a
end_define

begin_define
define|#
directive|define
name|START_STOP
value|0x1b
end_define

begin_define
define|#
directive|define
name|RESERVE
value|0x16
end_define

begin_define
define|#
directive|define
name|RELEASE
value|0x17
end_define

begin_define
define|#
directive|define
name|PREVENT_ALLOW
value|0x1e
end_define

begin_define
define|#
directive|define
name|POSITION_TO_ELEMENT
value|0x2b
end_define

begin_define
define|#
directive|define
name|MODE_SENSE_BIG
value|0x54
end_define

begin_define
define|#
directive|define
name|MODE_SELECT_BIG
value|0x55
end_define

begin_define
define|#
directive|define
name|MOVE_MEDIUM
value|0xa5
end_define

begin_define
define|#
directive|define
name|READ_ELEMENT_STATUS
value|0xb8
end_define

begin_comment
comment|/*  * sense data format  */
end_comment

begin_define
define|#
directive|define
name|T_DIRECT
value|0
end_define

begin_define
define|#
directive|define
name|T_SEQUENTIAL
value|1
end_define

begin_define
define|#
directive|define
name|T_PRINTER
value|2
end_define

begin_define
define|#
directive|define
name|T_PROCESSOR
value|3
end_define

begin_define
define|#
directive|define
name|T_WORM
value|4
end_define

begin_define
define|#
directive|define
name|T_READONLY
value|5
end_define

begin_define
define|#
directive|define
name|T_SCANNER
value|6
end_define

begin_define
define|#
directive|define
name|T_OPTICAL
value|7
end_define

begin_define
define|#
directive|define
name|T_NODEVICE
value|0x1F
end_define

begin_define
define|#
directive|define
name|T_CHANGER
value|8
end_define

begin_define
define|#
directive|define
name|T_COMM
value|9
end_define

begin_define
define|#
directive|define
name|T_REMOV
value|1
end_define

begin_define
define|#
directive|define
name|T_FIXED
value|0
end_define

begin_struct
struct|struct
name|scsi_inquiry_data
block|{
name|u_char
name|device_type
range|:
literal|5
decl_stmt|;
name|u_char
name|device_qualifier
range|:
literal|3
decl_stmt|;
name|u_char
name|dev_qual2
range|:
literal|7
decl_stmt|;
name|u_char
name|removable
range|:
literal|1
decl_stmt|;
name|u_char
name|ansii_version
range|:
literal|3
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|response_format
decl_stmt|;
name|u_char
name|additional_length
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|u_char
name|can_link
range|:
literal|1
decl_stmt|;
name|u_char
name|can_sync
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|char
name|vendor
index|[
literal|8
index|]
decl_stmt|;
name|char
name|product
index|[
literal|16
index|]
decl_stmt|;
name|char
name|revision
index|[
literal|4
index|]
decl_stmt|;
name|u_char
name|extra
index|[
literal|8
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_sense_data
block|{
name|u_char
name|error_code
range|:
literal|4
decl_stmt|;
name|u_char
name|error_class
range|:
literal|3
decl_stmt|;
name|u_char
name|valid
range|:
literal|1
decl_stmt|;
union|union
block|{
struct|struct
block|{
name|u_char
name|blockhi
range|:
literal|5
decl_stmt|;
name|u_char
name|vendor
range|:
literal|3
decl_stmt|;
name|u_char
name|blockmed
decl_stmt|;
name|u_char
name|blocklow
decl_stmt|;
block|}
name|unextended
struct|;
struct|struct
block|{
name|u_char
name|segment
decl_stmt|;
name|u_char
name|sense_key
range|:
literal|4
decl_stmt|;
name|u_char
label|:
literal|1
expr_stmt|;
name|u_char
name|ili
range|:
literal|1
decl_stmt|;
name|u_char
name|eom
range|:
literal|1
decl_stmt|;
name|u_char
name|filemark
range|:
literal|1
decl_stmt|;
name|u_char
name|info
index|[
literal|4
index|]
decl_stmt|;
name|u_char
name|extra_len
decl_stmt|;
comment|/* allocate enough room to hold new stuff 			u_char	cmd_spec_info[4]; 			u_char	add_sense_code; 			u_char	add_sense_code_qual; 			u_char	fru; 			u_char	sense_key_spec_1:7; 			u_char	sksv:1; 			u_char	sense_key_spec_2; 			u_char	sense_key_spec_3; 			( by increasing 16 to 26 below) */
name|u_char
name|extra_bytes
index|[
literal|26
index|]
decl_stmt|;
block|}
name|extended
struct|;
block|}
name|ext
union|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_sense_data_new
block|{
name|u_char
name|error_code
range|:
literal|7
decl_stmt|;
name|u_char
name|valid
range|:
literal|1
decl_stmt|;
union|union
block|{
struct|struct
block|{
name|u_char
name|blockhi
range|:
literal|5
decl_stmt|;
name|u_char
name|vendor
range|:
literal|3
decl_stmt|;
name|u_char
name|blockmed
decl_stmt|;
name|u_char
name|blocklow
decl_stmt|;
block|}
name|unextended
struct|;
struct|struct
block|{
name|u_char
name|segment
decl_stmt|;
name|u_char
name|sense_key
range|:
literal|4
decl_stmt|;
name|u_char
label|:
literal|1
expr_stmt|;
name|u_char
name|ili
range|:
literal|1
decl_stmt|;
name|u_char
name|eom
range|:
literal|1
decl_stmt|;
name|u_char
name|filemark
range|:
literal|1
decl_stmt|;
name|u_char
name|info
index|[
literal|4
index|]
decl_stmt|;
name|u_char
name|extra_len
decl_stmt|;
name|u_char
name|cmd_spec_info
index|[
literal|4
index|]
decl_stmt|;
name|u_char
name|add_sense_code
decl_stmt|;
name|u_char
name|add_sense_code_qual
decl_stmt|;
name|u_char
name|fru
decl_stmt|;
name|u_char
name|sense_key_spec_1
range|:
literal|7
decl_stmt|;
name|u_char
name|sksv
range|:
literal|1
decl_stmt|;
name|u_char
name|sense_key_spec_2
decl_stmt|;
name|u_char
name|sense_key_spec_3
decl_stmt|;
name|u_char
name|extra_bytes
index|[
literal|16
index|]
decl_stmt|;
block|}
name|extended
struct|;
block|}
name|ext
union|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|blk_desc
block|{
name|u_char
name|density
decl_stmt|;
name|u_char
name|nblocks
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|reserved
decl_stmt|;
name|u_char
name|blklen
index|[
literal|3
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_header
block|{
name|u_char
name|data_length
decl_stmt|;
comment|/* Sense data length */
name|u_char
name|medium_type
decl_stmt|;
name|u_char
name|dev_spec
decl_stmt|;
name|u_char
name|blk_desc_len
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_header_big
block|{
name|u_char
name|data_length
index|[
literal|2
index|]
decl_stmt|;
comment|/* Sense data length */
name|u_char
name|medium_type
decl_stmt|;
name|u_char
name|dev_spec
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|blk_desc_len
index|[
literal|2
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/*  * Status Byte  */
end_comment

begin_define
define|#
directive|define
name|SCSI_OK
value|0x00
end_define

begin_define
define|#
directive|define
name|SCSI_CHECK
value|0x02
end_define

begin_define
define|#
directive|define
name|SCSI_BUSY
value|0x08
end_define

begin_define
define|#
directive|define
name|SCSI_INTERM
value|0x10
end_define

end_unit

