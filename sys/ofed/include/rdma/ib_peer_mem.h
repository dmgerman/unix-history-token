begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_if
if|#
directive|if
operator|!
name|defined
argument_list|(
name|IB_PEER_MEM_H
argument_list|)
end_if

begin_define
define|#
directive|define
name|IB_PEER_MEM_H
end_define

begin_include
include|#
directive|include
file|<rdma/peer_mem.h>
end_include

begin_struct_decl
struct_decl|struct
name|invalidation_ctx
struct_decl|;
end_struct_decl

begin_struct_decl
struct_decl|struct
name|ib_ucontext
struct_decl|;
end_struct_decl

begin_struct
struct|struct
name|ib_peer_memory_statistics
block|{
name|unsigned
name|long
name|num_alloc_mrs
decl_stmt|;
name|unsigned
name|long
name|num_dealloc_mrs
decl_stmt|;
name|unsigned
name|long
name|num_reg_pages
decl_stmt|;
name|unsigned
name|long
name|num_dereg_pages
decl_stmt|;
name|unsigned
name|long
name|num_free_callbacks
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|ib_peer_memory_client
block|{
specifier|const
name|struct
name|peer_memory_client
modifier|*
name|peer_mem
decl_stmt|;
name|struct
name|list_head
name|core_peer_list
decl_stmt|;
name|struct
name|list_head
name|core_ticket_list
decl_stmt|;
name|unsigned
name|long
name|last_ticket
decl_stmt|;
ifdef|#
directive|ifdef
name|__FreeBSD__
name|int
name|holdcount
decl_stmt|;
name|int
name|needwakeup
decl_stmt|;
name|struct
name|cv
name|peer_cv
decl_stmt|;
else|#
directive|else
name|struct
name|srcu_struct
name|peer_srcu
decl_stmt|;
endif|#
directive|endif
name|struct
name|mutex
name|lock
decl_stmt|;
name|struct
name|kobject
modifier|*
name|kobj
decl_stmt|;
name|struct
name|attribute_group
name|peer_mem_attr_group
decl_stmt|;
name|struct
name|ib_peer_memory_statistics
name|stats
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|core_ticket
block|{
name|unsigned
name|long
name|key
decl_stmt|;
name|void
modifier|*
name|context
decl_stmt|;
name|struct
name|list_head
name|ticket_list
decl_stmt|;
block|}
struct|;
end_struct

begin_function_decl
name|struct
name|ib_peer_memory_client
modifier|*
name|ib_get_peer_client
parameter_list|(
name|struct
name|ib_ucontext
modifier|*
name|context
parameter_list|,
name|unsigned
name|long
name|addr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|void
modifier|*
modifier|*
name|peer_client_context
parameter_list|,
name|int
modifier|*
name|srcu_key
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|ib_put_peer_client
parameter_list|(
name|struct
name|ib_peer_memory_client
modifier|*
name|ib_peer_client
parameter_list|,
name|void
modifier|*
name|peer_client_context
parameter_list|,
name|int
name|srcu_key
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|unsigned
name|long
name|ib_peer_insert_context
parameter_list|(
name|struct
name|ib_peer_memory_client
modifier|*
name|ib_peer_client
parameter_list|,
name|void
modifier|*
name|context
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|ib_peer_remove_context
parameter_list|(
name|struct
name|ib_peer_memory_client
modifier|*
name|ib_peer_client
parameter_list|,
name|unsigned
name|long
name|key
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|core_ticket
modifier|*
name|ib_peer_search_context
parameter_list|(
name|struct
name|ib_peer_memory_client
modifier|*
name|ib_peer_client
parameter_list|,
name|unsigned
name|long
name|key
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

end_unit

