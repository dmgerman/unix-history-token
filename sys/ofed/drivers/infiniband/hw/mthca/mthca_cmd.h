begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 2004, 2005 Topspin Communications.  All rights reserved.  * Copyright (c) 2005 Mellanox Technologies. All rights reserved.  * Copyright (c) 2006 Cisco Systems.  All rights reserved.  *  * This software is available to you under a choice of one of two  * licenses.  You may choose to be licensed under the terms of the GNU  * General Public License (GPL) Version 2, available from the file  * COPYING in the main directory of this source tree, or the  * OpenIB.org BSD license below:  *  *     Redistribution and use in source and binary forms, with or  *     without modification, are permitted provided that the following  *     conditions are met:  *  *      - Redistributions of source code must retain the above  *        copyright notice, this list of conditions and the following  *        disclaimer.  *  *      - Redistributions in binary form must reproduce the above  *        copyright notice, this list of conditions and the following  *        disclaimer in the documentation and/or other materials  *        provided with the distribution.  *  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF  * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS  * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN  * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE  * SOFTWARE.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MTHCA_CMD_H
end_ifndef

begin_define
define|#
directive|define
name|MTHCA_CMD_H
end_define

begin_include
include|#
directive|include
file|<rdma/ib_verbs.h>
end_include

begin_define
define|#
directive|define
name|MTHCA_MAILBOX_SIZE
value|4096
end_define

begin_enum
enum|enum
block|{
comment|/* command completed successfully: */
name|MTHCA_CMD_STAT_OK
init|=
literal|0x00
block|,
comment|/* Internal error (such as a bus error) occurred while processing command: */
name|MTHCA_CMD_STAT_INTERNAL_ERR
init|=
literal|0x01
block|,
comment|/* Operation/command not supported or opcode modifier not supported: */
name|MTHCA_CMD_STAT_BAD_OP
init|=
literal|0x02
block|,
comment|/* Parameter not supported or parameter out of range: */
name|MTHCA_CMD_STAT_BAD_PARAM
init|=
literal|0x03
block|,
comment|/* System not enabled or bad system state: */
name|MTHCA_CMD_STAT_BAD_SYS_STATE
init|=
literal|0x04
block|,
comment|/* Attempt to access reserved or unallocaterd resource: */
name|MTHCA_CMD_STAT_BAD_RESOURCE
init|=
literal|0x05
block|,
comment|/* Requested resource is currently executing a command, or is otherwise busy: */
name|MTHCA_CMD_STAT_RESOURCE_BUSY
init|=
literal|0x06
block|,
comment|/* memory error: */
name|MTHCA_CMD_STAT_DDR_MEM_ERR
init|=
literal|0x07
block|,
comment|/* Required capability exceeds device limits: */
name|MTHCA_CMD_STAT_EXCEED_LIM
init|=
literal|0x08
block|,
comment|/* Resource is not in the appropriate state or ownership: */
name|MTHCA_CMD_STAT_BAD_RES_STATE
init|=
literal|0x09
block|,
comment|/* Index out of range: */
name|MTHCA_CMD_STAT_BAD_INDEX
init|=
literal|0x0a
block|,
comment|/* FW image corrupted: */
name|MTHCA_CMD_STAT_BAD_NVMEM
init|=
literal|0x0b
block|,
comment|/* Attempt to modify a QP/EE which is not in the presumed state: */
name|MTHCA_CMD_STAT_BAD_QPEE_STATE
init|=
literal|0x10
block|,
comment|/* Bad segment parameters (Address/Size): */
name|MTHCA_CMD_STAT_BAD_SEG_PARAM
init|=
literal|0x20
block|,
comment|/* Memory Region has Memory Windows bound to: */
name|MTHCA_CMD_STAT_REG_BOUND
init|=
literal|0x21
block|,
comment|/* HCA local attached memory not present: */
name|MTHCA_CMD_STAT_LAM_NOT_PRE
init|=
literal|0x22
block|,
comment|/* Bad management packet (silently discarded): */
name|MTHCA_CMD_STAT_BAD_PKT
init|=
literal|0x30
block|,
comment|/* More outstanding CQEs in CQ than new CQ size: */
name|MTHCA_CMD_STAT_BAD_SIZE
init|=
literal|0x40
block|}
enum|;
end_enum

begin_enum
enum|enum
block|{
name|MTHCA_TRANS_INVALID
init|=
literal|0
block|,
name|MTHCA_TRANS_RST2INIT
block|,
name|MTHCA_TRANS_INIT2INIT
block|,
name|MTHCA_TRANS_INIT2RTR
block|,
name|MTHCA_TRANS_RTR2RTS
block|,
name|MTHCA_TRANS_RTS2RTS
block|,
name|MTHCA_TRANS_SQERR2RTS
block|,
name|MTHCA_TRANS_ANY2ERR
block|,
name|MTHCA_TRANS_RTS2SQD
block|,
name|MTHCA_TRANS_SQD2SQD
block|,
name|MTHCA_TRANS_SQD2RTS
block|,
name|MTHCA_TRANS_ANY2RST
block|, }
enum|;
end_enum

begin_enum
enum|enum
block|{
name|DEV_LIM_FLAG_RC
init|=
literal|1
operator|<<
literal|0
block|,
name|DEV_LIM_FLAG_UC
init|=
literal|1
operator|<<
literal|1
block|,
name|DEV_LIM_FLAG_UD
init|=
literal|1
operator|<<
literal|2
block|,
name|DEV_LIM_FLAG_RD
init|=
literal|1
operator|<<
literal|3
block|,
name|DEV_LIM_FLAG_RAW_IPV6
init|=
literal|1
operator|<<
literal|4
block|,
name|DEV_LIM_FLAG_RAW_ETHER
init|=
literal|1
operator|<<
literal|5
block|,
name|DEV_LIM_FLAG_SRQ
init|=
literal|1
operator|<<
literal|6
block|,
name|DEV_LIM_FLAG_IPOIB_CSUM
init|=
literal|1
operator|<<
literal|7
block|,
name|DEV_LIM_FLAG_BAD_PKEY_CNTR
init|=
literal|1
operator|<<
literal|8
block|,
name|DEV_LIM_FLAG_BAD_QKEY_CNTR
init|=
literal|1
operator|<<
literal|9
block|,
name|DEV_LIM_FLAG_MW
init|=
literal|1
operator|<<
literal|16
block|,
name|DEV_LIM_FLAG_AUTO_PATH_MIG
init|=
literal|1
operator|<<
literal|17
block|,
name|DEV_LIM_FLAG_ATOMIC
init|=
literal|1
operator|<<
literal|18
block|,
name|DEV_LIM_FLAG_RAW_MULTI
init|=
literal|1
operator|<<
literal|19
block|,
name|DEV_LIM_FLAG_UD_AV_PORT_ENFORCE
init|=
literal|1
operator|<<
literal|20
block|,
name|DEV_LIM_FLAG_UD_MULTI
init|=
literal|1
operator|<<
literal|21
block|, }
enum|;
end_enum

begin_enum
enum|enum
block|{
name|DIAG_RPRT_Q_XPRT_CIERR
init|=
literal|2
block|,
name|DIAG_RPRT_QR_XPRT_CIERR
init|=
literal|3
block|,
name|DIAG_RPRT_Q_PERF
init|=
literal|4
block|,
name|DIAG_RPRT_QR_PERF
init|=
literal|5
block|,
name|DIAG_RPRT_Q_MISC
init|=
literal|6
block|,
name|DIAG_RPRT_QR_MISC
init|=
literal|7
block|, }
enum|;
end_enum

begin_struct
struct|struct
name|mthca_mailbox
block|{
name|dma_addr_t
name|dma
decl_stmt|;
name|void
modifier|*
name|buf
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|mthca_dev_lim
block|{
name|int
name|max_srq_sz
decl_stmt|;
name|int
name|max_qp_sz
decl_stmt|;
name|int
name|reserved_qps
decl_stmt|;
name|int
name|max_qps
decl_stmt|;
name|int
name|reserved_srqs
decl_stmt|;
name|int
name|max_srqs
decl_stmt|;
name|int
name|reserved_eecs
decl_stmt|;
name|int
name|max_eecs
decl_stmt|;
name|int
name|max_cq_sz
decl_stmt|;
name|int
name|reserved_cqs
decl_stmt|;
name|int
name|max_cqs
decl_stmt|;
name|int
name|max_mpts
decl_stmt|;
name|int
name|reserved_eqs
decl_stmt|;
name|int
name|max_eqs
decl_stmt|;
name|int
name|reserved_mtts
decl_stmt|;
name|int
name|max_mrw_sz
decl_stmt|;
name|int
name|reserved_mrws
decl_stmt|;
name|int
name|max_mtt_seg
decl_stmt|;
name|int
name|max_requester_per_qp
decl_stmt|;
name|int
name|max_responder_per_qp
decl_stmt|;
name|int
name|max_rdma_global
decl_stmt|;
name|int
name|local_ca_ack_delay
decl_stmt|;
name|int
name|max_mtu
decl_stmt|;
name|int
name|max_port_width
decl_stmt|;
name|int
name|max_vl
decl_stmt|;
name|int
name|num_ports
decl_stmt|;
name|int
name|max_gids
decl_stmt|;
name|u16
name|stat_rate_support
decl_stmt|;
name|int
name|max_pkeys
decl_stmt|;
name|u32
name|flags
decl_stmt|;
name|int
name|reserved_uars
decl_stmt|;
name|int
name|uar_size
decl_stmt|;
name|int
name|min_page_sz
decl_stmt|;
name|int
name|max_sg
decl_stmt|;
name|int
name|max_desc_sz
decl_stmt|;
name|int
name|max_qp_per_mcg
decl_stmt|;
name|int
name|reserved_mgms
decl_stmt|;
name|int
name|max_mcgs
decl_stmt|;
name|int
name|reserved_pds
decl_stmt|;
name|int
name|max_pds
decl_stmt|;
name|int
name|reserved_rdds
decl_stmt|;
name|int
name|max_rdds
decl_stmt|;
name|int
name|eec_entry_sz
decl_stmt|;
name|int
name|qpc_entry_sz
decl_stmt|;
name|int
name|eeec_entry_sz
decl_stmt|;
name|int
name|eqpc_entry_sz
decl_stmt|;
name|int
name|eqc_entry_sz
decl_stmt|;
name|int
name|cqc_entry_sz
decl_stmt|;
name|int
name|srq_entry_sz
decl_stmt|;
name|int
name|uar_scratch_entry_sz
decl_stmt|;
name|int
name|mpt_entry_sz
decl_stmt|;
union|union
block|{
struct|struct
block|{
name|int
name|max_avs
decl_stmt|;
block|}
name|tavor
struct|;
struct|struct
block|{
name|int
name|resize_srq
decl_stmt|;
name|int
name|max_pbl_sz
decl_stmt|;
name|u8
name|bmme_flags
decl_stmt|;
name|u32
name|reserved_lkey
decl_stmt|;
name|int
name|lam_required
decl_stmt|;
name|u64
name|max_icm_sz
decl_stmt|;
block|}
name|arbel
struct|;
block|}
name|hca
union|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|mthca_adapter
block|{
name|u32
name|vendor_id
decl_stmt|;
name|u32
name|device_id
decl_stmt|;
name|u32
name|revision_id
decl_stmt|;
name|char
name|board_id
index|[
name|MTHCA_BOARD_ID_LEN
index|]
decl_stmt|;
name|u8
name|inta_pin
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|mthca_init_hca_param
block|{
name|u64
name|qpc_base
decl_stmt|;
name|u64
name|eec_base
decl_stmt|;
name|u64
name|srqc_base
decl_stmt|;
name|u64
name|cqc_base
decl_stmt|;
name|u64
name|eqpc_base
decl_stmt|;
name|u64
name|eeec_base
decl_stmt|;
name|u64
name|eqc_base
decl_stmt|;
name|u64
name|rdb_base
decl_stmt|;
name|u64
name|mc_base
decl_stmt|;
name|u64
name|mpt_base
decl_stmt|;
name|u64
name|mtt_base
decl_stmt|;
name|u64
name|uar_scratch_base
decl_stmt|;
name|u64
name|uarc_base
decl_stmt|;
name|u16
name|log_mc_entry_sz
decl_stmt|;
name|u16
name|mc_hash_sz
decl_stmt|;
name|u8
name|log_num_qps
decl_stmt|;
name|u8
name|log_num_eecs
decl_stmt|;
name|u8
name|log_num_srqs
decl_stmt|;
name|u8
name|log_num_cqs
decl_stmt|;
name|u8
name|log_num_eqs
decl_stmt|;
name|u8
name|log_mc_table_sz
decl_stmt|;
name|u8
name|mtt_seg_sz
decl_stmt|;
name|u8
name|log_mpt_sz
decl_stmt|;
name|u8
name|log_uar_sz
decl_stmt|;
name|u8
name|log_uarc_sz
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|mthca_init_ib_param
block|{
name|int
name|port_width
decl_stmt|;
name|int
name|vl_cap
decl_stmt|;
name|int
name|mtu_cap
decl_stmt|;
name|u16
name|gid_cap
decl_stmt|;
name|u16
name|pkey_cap
decl_stmt|;
name|int
name|set_guid0
decl_stmt|;
name|u64
name|guid0
decl_stmt|;
name|int
name|set_node_guid
decl_stmt|;
name|u64
name|node_guid
decl_stmt|;
name|int
name|set_si_guid
decl_stmt|;
name|u64
name|si_guid
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|mthca_set_ib_param
block|{
name|int
name|set_si_guid
decl_stmt|;
name|int
name|reset_qkey_viol
decl_stmt|;
name|u64
name|si_guid
decl_stmt|;
name|u32
name|cap_mask
decl_stmt|;
block|}
struct|;
end_struct

begin_function_decl
name|int
name|mthca_cmd_init
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|mthca_cmd_cleanup
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_cmd_use_events
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|mthca_cmd_use_polling
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|mthca_cmd_event
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u16
name|token
parameter_list|,
name|u8
name|status
parameter_list|,
name|u64
name|out_param
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|struct
name|mthca_mailbox
modifier|*
name|mthca_alloc_mailbox
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|gfp_t
name|gfp_mask
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|mthca_free_mailbox
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SYS_EN
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SYS_DIS
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MAP_FA
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_icm
modifier|*
name|icm
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_UNMAP_FA
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_RUN_FW
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_QUERY_FW
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_ENABLE_LAM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_DISABLE_LAM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_QUERY_DDR
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_QUERY_DEV_LIM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_dev_lim
modifier|*
name|dev_lim
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_QUERY_ADAPTER
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_adapter
modifier|*
name|adapter
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_INIT_HCA
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_init_hca_param
modifier|*
name|param
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_INIT_IB
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_init_ib_param
modifier|*
name|param
parameter_list|,
name|int
name|port
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_CLOSE_IB
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|port
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_CLOSE_HCA
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|panic
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SET_IB
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_set_ib_param
modifier|*
name|param
parameter_list|,
name|int
name|port
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MAP_ICM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_icm
modifier|*
name|icm
parameter_list|,
name|u64
name|virt
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MAP_ICM_page
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u64
name|dma_addr
parameter_list|,
name|u64
name|virt
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_UNMAP_ICM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u64
name|virt
parameter_list|,
name|u32
name|page_count
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MAP_ICM_AUX
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_icm
modifier|*
name|icm
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_UNMAP_ICM_AUX
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SET_ICM_SIZE
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u64
name|icm_size
parameter_list|,
name|u64
modifier|*
name|aux_pages
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SW2HW_MPT
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|mpt_index
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_HW2SW_MPT
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|mpt_index
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_WRITE_MTT
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|num_mtt
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SYNC_TPT
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MAP_EQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u64
name|event_mask
parameter_list|,
name|int
name|unmap
parameter_list|,
name|int
name|eq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SW2HW_EQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|eq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_HW2SW_EQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|eq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SW2HW_CQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|cq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_HW2SW_CQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|cq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_RESIZE_CQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|cq_num
parameter_list|,
name|u32
name|lkey
parameter_list|,
name|u8
name|log_size
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_SW2HW_SRQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|srq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_HW2SW_SRQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|int
name|srq_num
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_QUERY_SRQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u32
name|num
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_ARM_SRQ
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|srq_num
parameter_list|,
name|int
name|limit
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MODIFY_QP
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|enum
name|ib_qp_state
name|cur
parameter_list|,
name|enum
name|ib_qp_state
name|next
parameter_list|,
name|u32
name|num
parameter_list|,
name|int
name|is_ee
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u32
name|optmask
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_QUERY_QP
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u32
name|num
parameter_list|,
name|int
name|is_ee
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_CONF_SPECIAL_QP
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|type
parameter_list|,
name|u32
name|qpn
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MAD_IFC
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|ignore_mkey
parameter_list|,
name|int
name|ignore_bkey
parameter_list|,
name|int
name|port
parameter_list|,
name|struct
name|ib_wc
modifier|*
name|in_wc
parameter_list|,
name|struct
name|ib_grh
modifier|*
name|in_grh
parameter_list|,
name|void
modifier|*
name|in_mad
parameter_list|,
name|void
modifier|*
name|response_mad
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_READ_MGM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|index
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_WRITE_MGM
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|index
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_MGID_HASH
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u16
modifier|*
name|hash
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_DIAG_RPRT
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|int
name|mod
parameter_list|,
name|struct
name|mthca_mailbox
modifier|*
name|mailbox
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mthca_NOP
parameter_list|(
name|struct
name|mthca_dev
modifier|*
name|dev
parameter_list|,
name|u8
modifier|*
name|status
parameter_list|)
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* MTHCA_CMD_H */
end_comment

end_unit

