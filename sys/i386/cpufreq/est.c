begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2004 Colin Percival  * Copyright (c) 2005 Nate Lawson  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted providing that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR``AS IS'' AND ANY EXPRESS OR   * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY   * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING   * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE   * POSSIBILITY OF SUCH DAMAGE.  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/bus.h>
end_include

begin_include
include|#
directive|include
file|<sys/cpu.h>
end_include

begin_include
include|#
directive|include
file|<sys/kernel.h>
end_include

begin_include
include|#
directive|include
file|<sys/module.h>
end_include

begin_include
include|#
directive|include
file|<sys/smp.h>
end_include

begin_include
include|#
directive|include
file|<sys/systm.h>
end_include

begin_include
include|#
directive|include
file|"cpufreq_if.h"
end_include

begin_include
include|#
directive|include
file|<machine/md_var.h>
end_include

begin_comment
comment|/* Status/control registers (from the IA-32 System Programming Guide). */
end_comment

begin_define
define|#
directive|define
name|MSR_PERF_STATUS
value|0x198
end_define

begin_define
define|#
directive|define
name|MSR_PERF_CTL
value|0x199
end_define

begin_comment
comment|/* Register and bit for enabling SpeedStep. */
end_comment

begin_define
define|#
directive|define
name|MSR_MISC_ENABLE
value|0x1a0
end_define

begin_define
define|#
directive|define
name|MSR_SS_ENABLE
value|(1<<16)
end_define

begin_comment
comment|/* Frequency and MSR control values. */
end_comment

begin_typedef
typedef|typedef
struct|struct
block|{
name|uint16_t
name|freq
decl_stmt|;
name|uint16_t
name|volts
decl_stmt|;
name|uint16_t
name|id16
decl_stmt|;
block|}
name|freq_info
typedef|;
end_typedef

begin_comment
comment|/* Identifying characteristics of a processor and supported frequencies. */
end_comment

begin_typedef
typedef|typedef
struct|struct
block|{
specifier|const
name|char
modifier|*
name|vendor
decl_stmt|;
name|uint32_t
name|id32
decl_stmt|;
name|uint32_t
name|bus_clk
decl_stmt|;
specifier|const
name|freq_info
modifier|*
name|freqtab
decl_stmt|;
block|}
name|cpu_info
typedef|;
end_typedef

begin_struct
struct|struct
name|est_softc
block|{
name|device_t
name|dev
decl_stmt|;
specifier|const
name|freq_info
modifier|*
name|freq_list
decl_stmt|;
block|}
struct|;
end_struct

begin_comment
comment|/* Convert MHz and mV into IDs for passing to the MSR. */
end_comment

begin_define
define|#
directive|define
name|ID16
parameter_list|(
name|MHz
parameter_list|,
name|mV
parameter_list|,
name|bus_clk
parameter_list|)
define|\
value|(((MHz / bus_clk)<< 8) | ((mV ? mV - 700 : 0)>> 4))
end_define

begin_define
define|#
directive|define
name|ID32
parameter_list|(
name|MHz_hi
parameter_list|,
name|mV_hi
parameter_list|,
name|MHz_lo
parameter_list|,
name|mV_lo
parameter_list|,
name|bus_clk
parameter_list|)
define|\
value|((ID16(MHz_lo, mV_lo, bus_clk)<< 16) | (ID16(MHz_hi, mV_hi, bus_clk)))
end_define

begin_comment
comment|/* Format for storing IDs in our table. */
end_comment

begin_define
define|#
directive|define
name|FREQ_INFO
parameter_list|(
name|MHz
parameter_list|,
name|mV
parameter_list|,
name|bus_clk
parameter_list|)
define|\
value|{ MHz, mV, ID16(MHz, mV, bus_clk) }
end_define

begin_define
define|#
directive|define
name|INTEL
parameter_list|(
name|tab
parameter_list|,
name|zhi
parameter_list|,
name|vhi
parameter_list|,
name|zlo
parameter_list|,
name|vlo
parameter_list|,
name|bus_clk
parameter_list|)
define|\
value|{ GenuineIntel, ID32(zhi, vhi, zlo, vlo, bus_clk), bus_clk, tab }
end_define

begin_decl_stmt
specifier|const
name|char
name|GenuineIntel
index|[]
init|=
literal|"GenuineIntel"
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* Default bus clock value for Centrino processors. */
end_comment

begin_define
define|#
directive|define
name|INTEL_BUS_CLK
value|100
end_define

begin_comment
comment|/* XXX Update this if new CPUs have more settings. */
end_comment

begin_define
define|#
directive|define
name|EST_MAX_SETTINGS
value|10
end_define

begin_expr_stmt
name|CTASSERT
argument_list|(
name|EST_MAX_SETTINGS
operator|<=
name|MAX_SETTINGS
argument_list|)
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* Estimate in microseconds of latency for performing a transition. */
end_comment

begin_define
define|#
directive|define
name|EST_TRANS_LAT
value|10
end_define

begin_comment
comment|/*  * Frequency (MHz) and voltage (mV) settings.  Data from the  * Intel Pentium M Processor Datasheet (Order Number 252612), Table 5.  *  * XXX New Dothan processors have multiple VID# with different  * settings for each VID#.  Since we can't uniquely identify this info  * without undisclosed methods from Intel, we can't support newer  * processors with this table method.  If ACPI Px states are supported,  * we can get info from them.  */
end_comment

begin_decl_stmt
specifier|const
name|freq_info
name|PM17_130
index|[]
init|=
block|{
comment|/* 130nm 1.70GHz Pentium M */
name|FREQ_INFO
argument_list|(
literal|1700
argument_list|,
literal|1484
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1004
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM16_130
index|[]
init|=
block|{
comment|/* 130nm 1.60GHz Pentium M */
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1484
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1420
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM15_130
index|[]
init|=
block|{
comment|/* 130nm 1.50GHz Pentium M */
name|FREQ_INFO
argument_list|(
literal|1500
argument_list|,
literal|1484
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1452
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1356
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM14_130
index|[]
init|=
block|{
comment|/* 130nm 1.40GHz Pentium M */
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1484
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1436
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM13_130
index|[]
init|=
block|{
comment|/* 130nm 1.30GHz Pentium M */
name|FREQ_INFO
argument_list|(
literal|1300
argument_list|,
literal|1388
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1356
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1292
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1260
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM13_LV_130
index|[]
init|=
block|{
comment|/* 130nm 1.30GHz Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1300
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1100
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1020
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|1004
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM12_LV_130
index|[]
init|=
block|{
comment|/* 130 nm 1.20GHz Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1100
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|1020
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1004
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM11_LV_130
index|[]
init|=
block|{
comment|/* 130 nm 1.10GHz Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1100
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1020
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM11_ULV_130
index|[]
init|=
block|{
comment|/* 130 nm 1.10GHz Ultra Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1100
argument_list|,
literal|1004
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|972
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|844
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM10_ULV_130
index|[]
init|=
block|{
comment|/* 130 nm 1.00GHz Ultra Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1004
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|972
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|844
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  * Data from "Intel Pentium M Processor on 90nm Process with  * 2-MB L2 Cache Datasheet", Order Number 302189, Table 5.  */
end_comment

begin_decl_stmt
specifier|const
name|freq_info
name|PM_765A_90
index|[]
init|=
block|{
comment|/* 90 nm 2.10GHz Pentium M, VID #A */
name|FREQ_INFO
argument_list|(
literal|2100
argument_list|,
literal|1340
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_765B_90
index|[]
init|=
block|{
comment|/* 90 nm 2.10GHz Pentium M, VID #B */
name|FREQ_INFO
argument_list|(
literal|2100
argument_list|,
literal|1324
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1260
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_765C_90
index|[]
init|=
block|{
comment|/* 90 nm 2.10GHz Pentium M, VID #C */
name|FREQ_INFO
argument_list|(
literal|2100
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_765E_90
index|[]
init|=
block|{
comment|/* 90 nm 2.10GHz Pentium M, VID #E */
name|FREQ_INFO
argument_list|(
literal|2100
argument_list|,
literal|1356
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1292
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1196
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1148
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_755A_90
index|[]
init|=
block|{
comment|/* 90 nm 2.00GHz Pentium M, VID #A */
name|FREQ_INFO
argument_list|(
literal|2000
argument_list|,
literal|1340
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1292
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1196
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1148
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_755B_90
index|[]
init|=
block|{
comment|/* 90 nm 2.00GHz Pentium M, VID #B */
name|FREQ_INFO
argument_list|(
literal|2000
argument_list|,
literal|1324
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_755C_90
index|[]
init|=
block|{
comment|/* 90 nm 2.00GHz Pentium M, VID #C */
name|FREQ_INFO
argument_list|(
literal|2000
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_755D_90
index|[]
init|=
block|{
comment|/* 90 nm 2.00GHz Pentium M, VID #D */
name|FREQ_INFO
argument_list|(
literal|2000
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1196
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_745A_90
index|[]
init|=
block|{
comment|/* 90 nm 1.80GHz Pentium M, VID #A */
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1340
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1292
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_745B_90
index|[]
init|=
block|{
comment|/* 90 nm 1.80GHz Pentium M, VID #B */
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1324
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_745C_90
index|[]
init|=
block|{
comment|/* 90 nm 1.80GHz Pentium M, VID #C */
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1260
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1148
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_745D_90
index|[]
init|=
block|{
comment|/* 90 nm 1.80GHz Pentium M, VID #D */
name|FREQ_INFO
argument_list|(
literal|1800
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1084
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_735A_90
index|[]
init|=
block|{
comment|/* 90 nm 1.70GHz Pentium M, VID #A */
name|FREQ_INFO
argument_list|(
literal|1700
argument_list|,
literal|1340
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_735B_90
index|[]
init|=
block|{
comment|/* 90 nm 1.70GHz Pentium M, VID #B */
name|FREQ_INFO
argument_list|(
literal|1700
argument_list|,
literal|1324
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_735C_90
index|[]
init|=
block|{
comment|/* 90 nm 1.70GHz Pentium M, VID #C */
name|FREQ_INFO
argument_list|(
literal|1700
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_735D_90
index|[]
init|=
block|{
comment|/* 90 nm 1.70GHz Pentium M, VID #D */
name|FREQ_INFO
argument_list|(
literal|1700
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1148
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_725A_90
index|[]
init|=
block|{
comment|/* 90 nm 1.60GHz Pentium M, VID #A */
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1340
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1068
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_725B_90
index|[]
init|=
block|{
comment|/* 90 nm 1.60GHz Pentium M, VID #B */
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1324
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1260
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1196
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1068
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_725C_90
index|[]
init|=
block|{
comment|/* 90 nm 1.60GHz Pentium M, VID #C */
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1244
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_725D_90
index|[]
init|=
block|{
comment|/* 90 nm 1.60GHz Pentium M, VID #D */
name|FREQ_INFO
argument_list|(
literal|1600
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1164
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_715A_90
index|[]
init|=
block|{
comment|/* 90 nm 1.50GHz Pentium M, VID #A */
name|FREQ_INFO
argument_list|(
literal|1500
argument_list|,
literal|1340
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1228
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1148
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1068
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_715B_90
index|[]
init|=
block|{
comment|/* 90 nm 1.50GHz Pentium M, VID #B */
name|FREQ_INFO
argument_list|(
literal|1500
argument_list|,
literal|1324
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1148
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1068
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_715C_90
index|[]
init|=
block|{
comment|/* 90 nm 1.50GHz Pentium M, VID #C */
name|FREQ_INFO
argument_list|(
literal|1500
argument_list|,
literal|1308
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1212
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1132
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1068
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_715D_90
index|[]
init|=
block|{
comment|/* 90 nm 1.50GHz Pentium M, VID #D */
name|FREQ_INFO
argument_list|(
literal|1500
argument_list|,
literal|1276
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1180
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_738_90
index|[]
init|=
block|{
comment|/* 90 nm 1.40GHz Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1400
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1300
argument_list|,
literal|1116
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1200
argument_list|,
literal|1100
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1100
argument_list|,
literal|1068
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|1052
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|1036
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|1020
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_733_90
index|[]
init|=
block|{
comment|/* 90 nm 1.10GHz Ultra Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1100
argument_list|,
literal|940
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|924
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|892
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|876
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|812
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|freq_info
name|PM_723_90
index|[]
init|=
block|{
comment|/* 90 nm 1.00GHz Ultra Low Voltage Pentium M */
name|FREQ_INFO
argument_list|(
literal|1000
argument_list|,
literal|940
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|900
argument_list|,
literal|908
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|800
argument_list|,
literal|876
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|600
argument_list|,
literal|812
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|FREQ_INFO
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|cpu_info
name|ESTprocs
index|[]
init|=
block|{
name|INTEL
argument_list|(
name|PM17_130
argument_list|,
literal|1700
argument_list|,
literal|1484
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM16_130
argument_list|,
literal|1600
argument_list|,
literal|1484
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM15_130
argument_list|,
literal|1500
argument_list|,
literal|1484
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM14_130
argument_list|,
literal|1400
argument_list|,
literal|1484
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM13_130
argument_list|,
literal|1300
argument_list|,
literal|1388
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM13_LV_130
argument_list|,
literal|1300
argument_list|,
literal|1180
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM12_LV_130
argument_list|,
literal|1200
argument_list|,
literal|1180
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM11_LV_130
argument_list|,
literal|1100
argument_list|,
literal|1180
argument_list|,
literal|600
argument_list|,
literal|956
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM11_ULV_130
argument_list|,
literal|1100
argument_list|,
literal|1004
argument_list|,
literal|600
argument_list|,
literal|844
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM10_ULV_130
argument_list|,
literal|1000
argument_list|,
literal|1004
argument_list|,
literal|600
argument_list|,
literal|844
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_765A_90
argument_list|,
literal|2100
argument_list|,
literal|1340
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_765B_90
argument_list|,
literal|2100
argument_list|,
literal|1324
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_765C_90
argument_list|,
literal|2100
argument_list|,
literal|1308
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_765E_90
argument_list|,
literal|2100
argument_list|,
literal|1356
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_755A_90
argument_list|,
literal|2000
argument_list|,
literal|1340
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_755B_90
argument_list|,
literal|2000
argument_list|,
literal|1324
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_755C_90
argument_list|,
literal|2000
argument_list|,
literal|1308
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_755D_90
argument_list|,
literal|2000
argument_list|,
literal|1276
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_745A_90
argument_list|,
literal|1800
argument_list|,
literal|1340
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_745B_90
argument_list|,
literal|1800
argument_list|,
literal|1324
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_745C_90
argument_list|,
literal|1800
argument_list|,
literal|1308
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_745D_90
argument_list|,
literal|1800
argument_list|,
literal|1276
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_735A_90
argument_list|,
literal|1700
argument_list|,
literal|1340
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_735B_90
argument_list|,
literal|1700
argument_list|,
literal|1324
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_735C_90
argument_list|,
literal|1700
argument_list|,
literal|1308
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_735D_90
argument_list|,
literal|1700
argument_list|,
literal|1276
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_725A_90
argument_list|,
literal|1600
argument_list|,
literal|1340
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_725B_90
argument_list|,
literal|1600
argument_list|,
literal|1324
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_725C_90
argument_list|,
literal|1600
argument_list|,
literal|1308
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_725D_90
argument_list|,
literal|1600
argument_list|,
literal|1276
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_715A_90
argument_list|,
literal|1500
argument_list|,
literal|1340
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_715B_90
argument_list|,
literal|1500
argument_list|,
literal|1324
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_715C_90
argument_list|,
literal|1500
argument_list|,
literal|1308
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_715D_90
argument_list|,
literal|1500
argument_list|,
literal|1276
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_738_90
argument_list|,
literal|1400
argument_list|,
literal|1116
argument_list|,
literal|600
argument_list|,
literal|988
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_733_90
argument_list|,
literal|1100
argument_list|,
literal|940
argument_list|,
literal|600
argument_list|,
literal|812
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
name|INTEL
argument_list|(
name|PM_723_90
argument_list|,
literal|1000
argument_list|,
literal|940
argument_list|,
literal|600
argument_list|,
literal|812
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
block|,
block|{
name|NULL
block|,
literal|0
block|,
literal|0
block|,
name|NULL
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_function_decl
specifier|static
name|void
name|est_identify
parameter_list|(
name|driver_t
modifier|*
name|driver
parameter_list|,
name|device_t
name|parent
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_probe
parameter_list|(
name|device_t
name|parent
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_attach
parameter_list|(
name|device_t
name|parent
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_detach
parameter_list|(
name|device_t
name|parent
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_find_cpu
parameter_list|(
specifier|const
name|char
modifier|*
name|vendor
parameter_list|,
name|uint64_t
name|msr
parameter_list|,
name|uint32_t
name|bus_clk
parameter_list|,
specifier|const
name|freq_info
modifier|*
modifier|*
name|freqs
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
specifier|const
name|freq_info
modifier|*
name|est_get_current
parameter_list|(
specifier|const
name|freq_info
modifier|*
name|freq_list
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_settings
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|struct
name|cf_setting
modifier|*
name|sets
parameter_list|,
name|int
modifier|*
name|count
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_set
parameter_list|(
name|device_t
name|dev
parameter_list|,
specifier|const
name|struct
name|cf_setting
modifier|*
name|set
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_get
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|struct
name|cf_setting
modifier|*
name|set
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|est_type
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|int
modifier|*
name|type
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|device_method_t
name|est_methods
index|[]
init|=
block|{
comment|/* Device interface */
name|DEVMETHOD
argument_list|(
name|device_identify
argument_list|,
name|est_identify
argument_list|)
block|,
name|DEVMETHOD
argument_list|(
name|device_probe
argument_list|,
name|est_probe
argument_list|)
block|,
name|DEVMETHOD
argument_list|(
name|device_attach
argument_list|,
name|est_attach
argument_list|)
block|,
name|DEVMETHOD
argument_list|(
name|device_detach
argument_list|,
name|est_detach
argument_list|)
block|,
comment|/* cpufreq interface */
name|DEVMETHOD
argument_list|(
name|cpufreq_drv_set
argument_list|,
name|est_set
argument_list|)
block|,
name|DEVMETHOD
argument_list|(
name|cpufreq_drv_get
argument_list|,
name|est_get
argument_list|)
block|,
name|DEVMETHOD
argument_list|(
name|cpufreq_drv_type
argument_list|,
name|est_type
argument_list|)
block|,
name|DEVMETHOD
argument_list|(
name|cpufreq_drv_settings
argument_list|,
name|est_settings
argument_list|)
block|,
block|{
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|driver_t
name|est_driver
init|=
block|{
literal|"est"
block|,
name|est_methods
block|,
sizeof|sizeof
argument_list|(
expr|struct
name|est_softc
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|devclass_t
name|est_devclass
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|DRIVER_MODULE
argument_list|(
name|est
argument_list|,
name|cpu
argument_list|,
name|est_driver
argument_list|,
name|est_devclass
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
end_expr_stmt

begin_function
specifier|static
name|void
name|est_identify
parameter_list|(
name|driver_t
modifier|*
name|driver
parameter_list|,
name|device_t
name|parent
parameter_list|)
block|{
name|u_int
name|p
index|[
literal|4
index|]
decl_stmt|;
comment|/* Make sure we're not being doubly invoked. */
if|if
condition|(
name|device_find_child
argument_list|(
name|parent
argument_list|,
literal|"est"
argument_list|,
operator|-
literal|1
argument_list|)
operator|!=
name|NULL
condition|)
return|return;
comment|/* Check that CPUID is supported and the vendor is Intel.*/
if|if
condition|(
name|cpu_high
operator|==
literal|0
operator|||
name|strcmp
argument_list|(
name|cpu_vendor
argument_list|,
name|GenuineIntel
argument_list|)
operator|!=
literal|0
condition|)
return|return;
comment|/* Read capability bits and check if the CPU supports EST. */
name|do_cpuid
argument_list|(
literal|1
argument_list|,
name|p
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|p
index|[
literal|2
index|]
operator|&
literal|0x80
operator|)
operator|==
literal|0
condition|)
return|return;
if|if
condition|(
name|BUS_ADD_CHILD
argument_list|(
name|parent
argument_list|,
literal|0
argument_list|,
literal|"est"
argument_list|,
operator|-
literal|1
argument_list|)
operator|==
name|NULL
condition|)
name|device_printf
argument_list|(
name|parent
argument_list|,
literal|"add est child failed\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_probe
parameter_list|(
name|device_t
name|dev
parameter_list|)
block|{
specifier|const
name|freq_info
modifier|*
name|f
decl_stmt|;
name|device_t
name|perf_dev
decl_stmt|;
name|uint64_t
name|msr
decl_stmt|;
name|int
name|error
decl_stmt|,
name|type
decl_stmt|;
comment|/* 	 * If the ACPI perf driver has attached and is not just offering 	 * info, let it manage things. 	 */
name|perf_dev
operator|=
name|device_find_child
argument_list|(
name|device_get_parent
argument_list|(
name|dev
argument_list|)
argument_list|,
literal|"acpi_perf"
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|perf_dev
operator|&&
name|device_is_attached
argument_list|(
name|perf_dev
argument_list|)
condition|)
block|{
name|error
operator|=
name|CPUFREQ_DRV_TYPE
argument_list|(
name|perf_dev
argument_list|,
operator|&
name|type
argument_list|)
expr_stmt|;
if|if
condition|(
name|error
operator|==
literal|0
operator|&&
operator|(
name|type
operator|&
name|CPUFREQ_FLAG_INFO_ONLY
operator|)
operator|==
literal|0
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
comment|/* Attempt to enable SpeedStep if not currently enabled. */
name|msr
operator|=
name|rdmsr
argument_list|(
name|MSR_MISC_ENABLE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|msr
operator|&
name|MSR_SS_ENABLE
operator|)
operator|==
literal|0
condition|)
block|{
name|wrmsr
argument_list|(
name|MSR_MISC_ENABLE
argument_list|,
name|msr
operator||
name|MSR_SS_ENABLE
argument_list|)
expr_stmt|;
comment|/* Check if the enable failed. */
name|msr
operator|=
name|rdmsr
argument_list|(
name|MSR_MISC_ENABLE
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|msr
operator|&
name|MSR_SS_ENABLE
operator|)
operator|==
literal|0
condition|)
block|{
name|device_printf
argument_list|(
name|dev
argument_list|,
literal|"failed to enable SpeedStep\n"
argument_list|)
expr_stmt|;
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
block|}
comment|/* Identify the exact CPU model */
name|msr
operator|=
name|rdmsr
argument_list|(
name|MSR_PERF_STATUS
argument_list|)
expr_stmt|;
if|if
condition|(
name|est_find_cpu
argument_list|(
name|cpu_vendor
argument_list|,
name|msr
argument_list|,
name|INTEL_BUS_CLK
argument_list|,
operator|&
name|f
argument_list|)
operator|!=
literal|0
condition|)
block|{
name|printf
argument_list|(
literal|"CPU claims to support Enhanced Speedstep, but is not recognized.\n"
literal|"Please update driver or contact the maintainer.\n"
literal|"cpu_vendor = %s msr = %0jx, bus_clk = %x\n"
argument_list|,
name|cpu_vendor
argument_list|,
name|msr
argument_list|,
name|INTEL_BUS_CLK
argument_list|)
expr_stmt|;
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
name|device_set_desc
argument_list|(
name|dev
argument_list|,
literal|"Enhanced SpeedStep Frequency Control"
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_attach
parameter_list|(
name|device_t
name|dev
parameter_list|)
block|{
name|struct
name|est_softc
modifier|*
name|sc
decl_stmt|;
name|uint64_t
name|msr
decl_stmt|;
name|sc
operator|=
name|device_get_softc
argument_list|(
name|dev
argument_list|)
expr_stmt|;
name|sc
operator|->
name|dev
operator|=
name|dev
expr_stmt|;
name|msr
operator|=
name|rdmsr
argument_list|(
name|MSR_PERF_STATUS
argument_list|)
expr_stmt|;
name|est_find_cpu
argument_list|(
name|cpu_vendor
argument_list|,
name|msr
argument_list|,
name|INTEL_BUS_CLK
argument_list|,
operator|&
name|sc
operator|->
name|freq_list
argument_list|)
expr_stmt|;
name|cpufreq_register
argument_list|(
name|dev
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_detach
parameter_list|(
name|device_t
name|dev
parameter_list|)
block|{
return|return
operator|(
name|ENXIO
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_find_cpu
parameter_list|(
specifier|const
name|char
modifier|*
name|vendor
parameter_list|,
name|uint64_t
name|msr
parameter_list|,
name|uint32_t
name|bus_clk
parameter_list|,
specifier|const
name|freq_info
modifier|*
modifier|*
name|freqs
parameter_list|)
block|{
specifier|const
name|cpu_info
modifier|*
name|p
decl_stmt|;
name|uint32_t
name|id
decl_stmt|;
comment|/* Find a table which matches (vendor, id, bus_clk). */
name|id
operator|=
name|msr
operator|>>
literal|32
expr_stmt|;
for|for
control|(
name|p
operator|=
name|ESTprocs
init|;
name|p
operator|->
name|id32
operator|!=
literal|0
condition|;
name|p
operator|++
control|)
block|{
if|if
condition|(
name|strcmp
argument_list|(
name|p
operator|->
name|vendor
argument_list|,
name|vendor
argument_list|)
operator|==
literal|0
operator|&&
name|p
operator|->
name|id32
operator|==
name|id
operator|&&
name|p
operator|->
name|bus_clk
operator|==
name|bus_clk
condition|)
break|break;
block|}
if|if
condition|(
name|p
operator|->
name|id32
operator|==
literal|0
condition|)
return|return
operator|(
name|EOPNOTSUPP
operator|)
return|;
comment|/* Make sure the current setpoint is valid. */
if|if
condition|(
name|est_get_current
argument_list|(
name|p
operator|->
name|freqtab
argument_list|)
operator|==
name|NULL
condition|)
return|return
operator|(
name|EOPNOTSUPP
operator|)
return|;
operator|*
name|freqs
operator|=
name|p
operator|->
name|freqtab
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
specifier|const
name|freq_info
modifier|*
name|est_get_current
parameter_list|(
specifier|const
name|freq_info
modifier|*
name|freq_list
parameter_list|)
block|{
specifier|const
name|freq_info
modifier|*
name|f
decl_stmt|;
name|int
name|i
decl_stmt|;
name|uint16_t
name|id16
decl_stmt|;
comment|/* 	 * Try a few times to get a valid value.  Sometimes, if the CPU 	 * is in the middle of an asynchronous transition (i.e., P4TCC), 	 * we get a temporary invalid result. 	 */
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|5
condition|;
name|i
operator|++
control|)
block|{
name|id16
operator|=
name|rdmsr
argument_list|(
name|MSR_PERF_STATUS
argument_list|)
operator|&
literal|0xffff
expr_stmt|;
for|for
control|(
name|f
operator|=
name|freq_list
init|;
name|f
operator|->
name|id16
operator|!=
literal|0
condition|;
name|f
operator|++
control|)
block|{
if|if
condition|(
name|f
operator|->
name|id16
operator|==
name|id16
condition|)
return|return
operator|(
name|f
operator|)
return|;
block|}
name|DELAY
argument_list|(
literal|100
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
name|NULL
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_settings
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|struct
name|cf_setting
modifier|*
name|sets
parameter_list|,
name|int
modifier|*
name|count
parameter_list|)
block|{
name|struct
name|est_softc
modifier|*
name|sc
decl_stmt|;
specifier|const
name|freq_info
modifier|*
name|f
decl_stmt|;
name|int
name|i
decl_stmt|;
name|sc
operator|=
name|device_get_softc
argument_list|(
name|dev
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|count
operator|<
name|EST_MAX_SETTINGS
condition|)
return|return
operator|(
name|E2BIG
operator|)
return|;
name|i
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|f
operator|=
name|sc
operator|->
name|freq_list
init|;
name|f
operator|->
name|freq
operator|!=
literal|0
condition|;
name|f
operator|++
control|)
block|{
name|sets
index|[
name|i
index|]
operator|.
name|freq
operator|=
name|f
operator|->
name|freq
expr_stmt|;
name|sets
index|[
name|i
index|]
operator|.
name|volts
operator|=
name|f
operator|->
name|volts
expr_stmt|;
name|sets
index|[
name|i
index|]
operator|.
name|power
operator|=
name|CPUFREQ_VAL_UNKNOWN
expr_stmt|;
name|sets
index|[
name|i
index|]
operator|.
name|lat
operator|=
name|EST_TRANS_LAT
expr_stmt|;
name|sets
index|[
name|i
index|]
operator|.
name|dev
operator|=
name|dev
expr_stmt|;
name|i
operator|++
expr_stmt|;
block|}
operator|*
name|count
operator|=
name|i
operator|+
literal|1
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_set
parameter_list|(
name|device_t
name|dev
parameter_list|,
specifier|const
name|struct
name|cf_setting
modifier|*
name|set
parameter_list|)
block|{
name|struct
name|est_softc
modifier|*
name|sc
decl_stmt|;
specifier|const
name|freq_info
modifier|*
name|f
decl_stmt|;
name|uint64_t
name|msr
decl_stmt|;
comment|/* Find the setting matching the requested one. */
name|sc
operator|=
name|device_get_softc
argument_list|(
name|dev
argument_list|)
expr_stmt|;
for|for
control|(
name|f
operator|=
name|sc
operator|->
name|freq_list
init|;
name|f
operator|->
name|freq
operator|!=
literal|0
condition|;
name|f
operator|++
control|)
block|{
if|if
condition|(
name|f
operator|->
name|freq
operator|==
name|set
operator|->
name|freq
condition|)
break|break;
block|}
if|if
condition|(
name|f
operator|->
name|freq
operator|==
literal|0
condition|)
return|return
operator|(
name|EINVAL
operator|)
return|;
comment|/* Read the current register, mask out the old, set the new id. */
name|msr
operator|=
name|rdmsr
argument_list|(
name|MSR_PERF_CTL
argument_list|)
expr_stmt|;
name|msr
operator|=
operator|(
name|msr
operator|&
operator|~
literal|0xffff
operator|)
operator||
name|f
operator|->
name|id16
expr_stmt|;
name|wrmsr
argument_list|(
name|MSR_PERF_CTL
argument_list|,
name|msr
argument_list|)
expr_stmt|;
comment|/* Wait a short while for the new setting.  Is this necessary? */
name|DELAY
argument_list|(
name|EST_TRANS_LAT
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_get
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|struct
name|cf_setting
modifier|*
name|set
parameter_list|)
block|{
name|struct
name|est_softc
modifier|*
name|sc
decl_stmt|;
specifier|const
name|freq_info
modifier|*
name|f
decl_stmt|;
name|sc
operator|=
name|device_get_softc
argument_list|(
name|dev
argument_list|)
expr_stmt|;
name|f
operator|=
name|est_get_current
argument_list|(
name|sc
operator|->
name|freq_list
argument_list|)
expr_stmt|;
if|if
condition|(
name|f
operator|==
name|NULL
condition|)
return|return
operator|(
name|ENXIO
operator|)
return|;
name|set
operator|->
name|freq
operator|=
name|f
operator|->
name|freq
expr_stmt|;
name|set
operator|->
name|volts
operator|=
name|f
operator|->
name|volts
expr_stmt|;
name|set
operator|->
name|power
operator|=
name|CPUFREQ_VAL_UNKNOWN
expr_stmt|;
name|set
operator|->
name|lat
operator|=
name|EST_TRANS_LAT
expr_stmt|;
name|set
operator|->
name|dev
operator|=
name|dev
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|est_type
parameter_list|(
name|device_t
name|dev
parameter_list|,
name|int
modifier|*
name|type
parameter_list|)
block|{
if|if
condition|(
name|type
operator|==
name|NULL
condition|)
return|return
operator|(
name|EINVAL
operator|)
return|;
operator|*
name|type
operator|=
name|CPUFREQ_TYPE_ABSOLUTE
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

end_unit

