begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/************************************************************************** ** **  $Id: pci_intel.c,v 1.2 94/09/15 21:01:52 wolf Exp $ ** **  Device driver for INTEL PCI chipsets. ** **  386bsd / FreeBSD ** **------------------------------------------------------------------------- ** **  Written for 386bsd and FreeBSD by **	wolf@dentaro.gun.de	Wolfgang Stanglmeier **	se@mi.Uni-Koeln.de	Stefan Esser ** **------------------------------------------------------------------------- ** ** Copyright (c) 1994 Stefan Esser.  All rights reserved. ** ** Redistribution and use in source and binary forms, with or without ** modification, are permitted provided that the following conditions ** are met: ** 1. Redistributions of source code must retain the above copyright **    notice, this list of conditions and the following disclaimer. ** 2. Redistributions in binary form must reproduce the above copyright **    notice, this list of conditions and the following disclaimer in the **    documentation and/or other materials provided with the distribution. ** 3. The name of the author may not be used to endorse or promote products **    derived from this software without specific prior written permission. ** ** THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR ** IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES ** OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. ** IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, ** INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT ** NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, ** DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY ** THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT ** (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF ** THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. ** **------------------------------------------------------------------------- */
end_comment

begin_escape
end_escape

begin_comment
comment|/*========================================================== ** **      Include files ** **========================================================== */
end_comment

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<i386/pci/pci.h>
end_include

begin_include
include|#
directive|include
file|<i386/pci/pcibios.h>
end_include

begin_include
include|#
directive|include
file|<i386/pci/pci_device.h>
end_include

begin_function_decl
specifier|static
name|int
name|probe1
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|return0
parameter_list|(
name|int
name|unit
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|intel_attach
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|intel_82424zx_attach
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|int
name|intel_82434lx_attach
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|printf
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|static
name|char
name|confread
parameter_list|(
name|pcici_t
name|config_id
parameter_list|,
name|int
name|port
parameter_list|)
function_decl|;
end_function_decl

begin_struct
struct|struct
name|condmsg
block|{
name|unsigned
name|char
name|port
decl_stmt|;
name|unsigned
name|char
name|mask
decl_stmt|;
name|unsigned
name|char
name|value
decl_stmt|;
name|char
name|flags
decl_stmt|;
name|char
modifier|*
name|text
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|M_EQ
value|0
end_define

begin_comment
comment|/* mask and return true if equal */
end_comment

begin_define
define|#
directive|define
name|M_NE
value|1
end_define

begin_comment
comment|/* mask and return true if not equal */
end_comment

begin_define
define|#
directive|define
name|TRUE
value|2
end_define

begin_comment
comment|/* don't read config, always true */
end_comment

begin_decl_stmt
name|struct
name|pci_driver
name|intel82378_device
init|=
block|{
name|probe1
block|,
name|intel_attach
block|,
literal|0x04848086
block|,
literal|"intel 82378IB pci-isa bridge"
block|,
name|return0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|pci_driver
name|intel82424_device
init|=
block|{
name|probe1
block|,
name|intel_82424zx_attach
block|,
literal|0x04838086
block|,
literal|"intel 82424ZX cache dram controller"
block|,
name|return0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|pci_driver
name|intel82375_device
init|=
block|{
name|probe1
block|,
name|intel_attach
block|,
literal|0x04828086
block|,
literal|"intel 82375EB pci-eisa bridge"
block|,
name|return0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|pci_driver
name|intel82434_device
init|=
block|{
name|probe1
block|,
name|intel_82434lx_attach
block|,
literal|0x04a38086
block|,
literal|"intel 82434LX pci cache memory controller"
block|,
name|return0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|condmsg
name|conf82424zx
index|[]
init|=
block|{
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\tCPU: "
block|}
block|,
block|{
literal|0x50
block|,
literal|0xe0
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"486DX"
block|}
block|,
block|{
literal|0x50
block|,
literal|0xe0
block|,
literal|0x20
block|,
name|M_EQ
block|,
literal|"486SX"
block|}
block|,
block|{
literal|0x50
block|,
literal|0xe0
block|,
literal|0x40
block|,
name|M_EQ
block|,
literal|"486DX2 or 486DX4"
block|}
block|,
block|{
literal|0x50
block|,
literal|0xe0
block|,
literal|0x80
block|,
name|M_EQ
block|,
literal|"Overdrive (writeback)"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|", bus="
block|}
block|,
block|{
literal|0x50
block|,
literal|0x03
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"25MHz"
block|}
block|,
block|{
literal|0x50
block|,
literal|0x03
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|"33MHz"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x01
block|,
literal|0x01
block|,
name|TRUE
block|,
literal|", CPU->Memory posting "
block|}
block|,
block|{
literal|0x53
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x56
block|,
literal|0x30
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"\n\tWarning:"
block|}
block|,
block|{
literal|0x56
block|,
literal|0x20
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|" NO cache parity!"
block|}
block|,
block|{
literal|0x56
block|,
literal|0x10
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|" NO DRAM parity!"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x04
block|,
literal|0x04
block|,
name|M_EQ
block|,
literal|"\n\tWarning: refresh OFF! "
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n\tCache: "
block|}
block|,
block|{
literal|0x52
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"None"
block|}
block|,
block|{
literal|0x52
block|,
literal|0xc1
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|"64KB"
block|}
block|,
block|{
literal|0x52
block|,
literal|0xc1
block|,
literal|0x41
block|,
name|M_EQ
block|,
literal|"128KB"
block|}
block|,
block|{
literal|0x52
block|,
literal|0xc1
block|,
literal|0x81
block|,
name|M_EQ
block|,
literal|"256KB"
block|}
block|,
block|{
literal|0x52
block|,
literal|0xc1
block|,
literal|0xc1
block|,
name|M_EQ
block|,
literal|"512KB"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x03
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|" writethrough"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x03
block|,
literal|0x03
block|,
name|M_EQ
block|,
literal|" writeback"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|", cache clocks="
block|}
block|,
block|{
literal|0x52
block|,
literal|0x05
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|"3-1-1-1"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x05
block|,
literal|0x05
block|,
name|M_EQ
block|,
literal|"2-1-1-1"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n\tDRAM:"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x43
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|" page mode"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x02
block|,
literal|0x02
block|,
name|M_EQ
block|,
literal|" code fetch"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x43
block|,
literal|0x43
block|,
name|M_EQ
block|,
literal|","
block|}
block|,
block|{
literal|0x55
block|,
literal|0x43
block|,
literal|0x42
block|,
name|M_EQ
block|,
literal|" and"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x40
block|,
literal|0x40
block|,
name|M_EQ
block|,
literal|" read"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x03
block|,
literal|0x03
block|,
name|M_EQ
block|,
literal|" and"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x43
block|,
literal|0x41
block|,
name|M_EQ
block|,
literal|" and"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|" write"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x43
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|","
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|" memory clocks="
block|}
block|,
block|{
literal|0x55
block|,
literal|0x20
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"X-2-2-2"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x20
block|,
literal|0x20
block|,
name|M_EQ
block|,
literal|"X-1-2-1"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n\tPCI: CPU->PCI posting "
block|}
block|,
block|{
literal|0x53
block|,
literal|0x02
block|,
literal|0x02
block|,
name|M_EQ
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x02
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|", CPU->PCI burst mode "
block|}
block|,
block|{
literal|0x54
block|,
literal|0x02
block|,
literal|0x02
block|,
name|M_EQ
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x54
block|,
literal|0x02
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|", PCI->Memory posting "
block|}
block|,
block|{
literal|0x54
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x54
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n"
block|}
block|,
comment|/* end marker */
block|{
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|condmsg
name|conf82434lx
index|[]
init|=
block|{
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\tCPU: "
block|}
block|,
block|{
literal|0x50
block|,
literal|0xe0
block|,
literal|0x80
block|,
name|M_EQ
block|,
literal|"Pentium"
block|}
block|,
block|{
literal|0x50
block|,
literal|0xe0
block|,
literal|0x80
block|,
name|M_NE
block|,
literal|"???"
block|}
block|,
block|{
literal|0x50
block|,
literal|0x02
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|", ???MHz"
block|}
block|,
block|{
literal|0x50
block|,
literal|0x03
block|,
literal|0x02
block|,
name|M_EQ
block|,
literal|", 60MHz"
block|}
block|,
block|{
literal|0x50
block|,
literal|0x03
block|,
literal|0x03
block|,
name|M_EQ
block|,
literal|", 66MHz"
block|}
block|,
block|{
literal|0x50
block|,
literal|0x04
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|" (primary cache OFF)"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x01
block|,
literal|0x01
block|,
name|TRUE
block|,
literal|", CPU->Memory posting "
block|}
block|,
block|{
literal|0x53
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_NE
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x04
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|", read around write"
block|}
block|,
block|{
literal|0x71
block|,
literal|0xc0
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"\n\tWarning: NO cache parity!"
block|}
block|,
block|{
literal|0x57
block|,
literal|0x20
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"\n\tWarning: NO DRAM parity!"
block|}
block|,
block|{
literal|0x55
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|"\n\tWarning: refresh OFF! "
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n\tCache: "
block|}
block|,
block|{
literal|0x52
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"None"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x81
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|""
block|}
block|,
block|{
literal|0x52
block|,
literal|0xc1
block|,
literal|0x81
block|,
name|M_EQ
block|,
literal|"256KB"
block|}
block|,
block|{
literal|0x52
block|,
literal|0xc1
block|,
literal|0xc1
block|,
name|M_EQ
block|,
literal|"512KB"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x03
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|" writethrough"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x03
block|,
literal|0x03
block|,
name|M_EQ
block|,
literal|" writeback"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x01
block|,
literal|0x01
block|,
name|M_EQ
block|,
literal|", cache clocks="
block|}
block|,
block|{
literal|0x52
block|,
literal|0x20
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"3-2-2-2/4-2-2-2"
block|}
block|,
block|{
literal|0x52
block|,
literal|0x20
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"3-1-1-1"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n\tDRAM:"
block|}
block|,
block|{
literal|0x57
block|,
literal|0x10
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|" page mode"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|" memory clocks="
block|}
block|,
block|{
literal|0x57
block|,
literal|0xc0
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"X-4-4-4 (70ns)"
block|}
block|,
block|{
literal|0x57
block|,
literal|0xc0
block|,
literal|0x40
block|,
name|M_EQ
block|,
literal|"X-4-4-4/X-3-3-3 (60ns)"
block|}
block|,
block|{
literal|0x57
block|,
literal|0xc0
block|,
literal|0x80
block|,
name|M_EQ
block|,
literal|"???"
block|}
block|,
block|{
literal|0x57
block|,
literal|0xc0
block|,
literal|0xc0
block|,
name|M_EQ
block|,
literal|"X-3-3-3 (50ns)"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n\tPCI: CPU->PCI posting "
block|}
block|,
block|{
literal|0x53
block|,
literal|0x02
block|,
literal|0x02
block|,
name|M_EQ
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x53
block|,
literal|0x02
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|", CPU->PCI burst mode "
block|}
block|,
block|{
literal|0x54
block|,
literal|0x02
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x54
block|,
literal|0x02
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|", PCI->Memory posting "
block|}
block|,
block|{
literal|0x54
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"ON"
block|}
block|,
block|{
literal|0x54
block|,
literal|0x01
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"OFF"
block|}
block|,
block|{
literal|0x54
block|,
literal|0x04
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|", PCI clocks="
block|}
block|,
block|{
literal|0x54
block|,
literal|0x04
block|,
literal|0x00
block|,
name|M_EQ
block|,
literal|"2-2-2-2"
block|}
block|,
block|{
literal|0x54
block|,
literal|0x04
block|,
literal|0x00
block|,
name|M_NE
block|,
literal|"2-1-1-1"
block|}
block|,
block|{
literal|0x00
block|,
literal|0x00
block|,
literal|0x00
block|,
name|TRUE
block|,
literal|"\n"
block|}
block|,
comment|/* end marker */
block|{
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|int
name|return0
parameter_list|(
name|int
name|unit
parameter_list|)
block|{
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
name|int
name|probe1
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
block|{
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|char
name|confread
parameter_list|(
name|pcici_t
name|config_id
parameter_list|,
name|int
name|port
parameter_list|)
block|{
name|unsigned
name|long
name|portw
init|=
name|port
operator|&
operator|-
literal|3
decl_stmt|;
name|unsigned
name|long
name|ports
init|=
operator|(
name|port
operator|-
name|portw
operator|)
operator|<<
literal|3
decl_stmt|;
name|unsigned
name|long
name|l
init|=
name|pci_conf_read
argument_list|(
name|config_id
argument_list|,
name|portw
argument_list|)
decl_stmt|;
return|return
operator|(
name|l
operator|>>
name|ports
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|writeconfig
parameter_list|(
name|pcici_t
name|config_id
parameter_list|,
name|struct
name|condmsg
modifier|*
name|tbl
parameter_list|)
block|{
while|while
condition|(
name|tbl
operator|->
name|text
condition|)
block|{
name|int
name|cond
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|tbl
operator|->
name|flags
operator|==
name|TRUE
condition|)
block|{
name|cond
operator|=
literal|1
expr_stmt|;
block|}
else|else
block|{
name|unsigned
name|char
name|v
init|=
operator|(
name|unsigned
name|char
operator|)
name|confread
argument_list|(
name|config_id
argument_list|,
name|tbl
operator|->
name|port
argument_list|)
decl_stmt|;
switch|switch
condition|(
name|tbl
operator|->
name|flags
condition|)
block|{
case|case
name|M_EQ
case|:
if|if
condition|(
operator|(
name|v
operator|&
name|tbl
operator|->
name|mask
operator|)
operator|==
name|tbl
operator|->
name|value
condition|)
name|cond
operator|=
literal|1
expr_stmt|;
break|break;
case|case
name|M_NE
case|:
if|if
condition|(
operator|(
name|v
operator|&
name|tbl
operator|->
name|mask
operator|)
operator|!=
name|tbl
operator|->
name|value
condition|)
name|cond
operator|=
literal|1
expr_stmt|;
break|break;
block|}
block|}
if|if
condition|(
name|cond
condition|)
name|printf
argument_list|(
literal|"%s"
argument_list|,
name|tbl
operator|->
name|text
argument_list|)
expr_stmt|;
name|tbl
operator|++
expr_stmt|;
block|}
block|}
end_function

begin_function
name|int
name|intel_attach
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
block|{
name|printf
argument_list|(
literal|"\t[40] %lx [50] %lx [54] %lx\n"
argument_list|,
name|pci_conf_read
argument_list|(
name|config_id
argument_list|,
literal|0x40
argument_list|)
argument_list|,
name|pci_conf_read
argument_list|(
name|config_id
argument_list|,
literal|0x50
argument_list|)
argument_list|,
name|pci_conf_read
argument_list|(
name|config_id
argument_list|,
literal|0x54
argument_list|)
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
name|int
name|intel_82424zx_attach
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
block|{
name|writeconfig
argument_list|(
name|config_id
argument_list|,
name|conf82424zx
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
name|int
name|intel_82434lx_attach
parameter_list|(
name|pcici_t
name|config_id
parameter_list|)
block|{
name|writeconfig
argument_list|(
name|config_id
argument_list|,
name|conf82434lx
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

end_unit

