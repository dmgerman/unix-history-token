begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* ===============================================================================  This C source file is part of TestFloat, Release 2a, a package of programs for testing the correctness of floating-point arithmetic complying to the IEC/IEEE Standard for Floating-Point.  Written by John R. Hauser.  More information is available through the Web page `http://HTTP.CS.Berkeley.EDU/~jhauser/arithmetic/TestFloat.html'.  THIS SOFTWARE IS DISTRIBUTED AS IS, FOR FREE.  Although reasonable effort has been made to avoid it, THIS SOFTWARE MAY CONTAIN FAULTS THAT WILL AT TIMES RESULT IN INCORRECT BEHAVIOR.  USE OF THIS SOFTWARE IS RESTRICTED TO PERSONS AND ORGANIZATIONS WHO CAN AND WILL TAKE FULL RESPONSIBILITY FOR ANY AND ALL LOSSES, COSTS, OR OTHER PROBLEMS ARISING FROM ITS USE.  Derivative works are acceptable, even for commercial purposes, so long as (1) they include prominent notice that the work is derivative, and (2) they include prominent notice akin to these four paragraphs for those parts of this code that are retained.  =============================================================================== */
end_comment

begin_decl_stmt
name|int8
name|slow_float_rounding_mode
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int8
name|slow_float_exception_flags
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int8
name|slow_float_detect_tininess
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_decl_stmt
name|int8
name|slow_floatx80_rounding_precision
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_typedef
typedef|typedef
struct|struct
block|{
name|bits64
name|a0
decl_stmt|,
name|a1
decl_stmt|;
block|}
name|bits128X
typedef|;
end_typedef

begin_typedef
typedef|typedef
struct|struct
block|{
name|flag
name|isNaN
decl_stmt|;
name|flag
name|isInf
decl_stmt|;
name|flag
name|isZero
decl_stmt|;
name|flag
name|sign
decl_stmt|;
name|int32
name|exp
decl_stmt|;
name|bits128X
name|sig
decl_stmt|;
block|}
name|floatX
typedef|;
end_typedef

begin_decl_stmt
specifier|static
specifier|const
name|floatX
name|floatXNaN
init|=
block|{
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
literal|0
block|,
block|{
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|floatX
name|floatXPositiveZero
init|=
block|{
name|FALSE
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
literal|0
block|,
block|{
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|floatX
name|floatXNegativeZero
init|=
block|{
name|FALSE
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
literal|0
block|,
block|{
literal|0
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|bits128X
name|shortShift128Left
parameter_list|(
name|bits128X
name|a
parameter_list|,
name|int8
name|shiftCount
parameter_list|)
block|{
name|int8
name|negShiftCount
decl_stmt|;
name|negShiftCount
operator|=
operator|(
operator|-
name|shiftCount
operator|&
literal|63
operator|)
expr_stmt|;
name|a
operator|.
name|a0
operator|=
operator|(
name|a
operator|.
name|a0
operator|<<
name|shiftCount
operator|)
operator||
operator|(
name|a
operator|.
name|a1
operator|>>
name|negShiftCount
operator|)
expr_stmt|;
name|a
operator|.
name|a1
operator|<<=
name|shiftCount
expr_stmt|;
return|return
name|a
return|;
block|}
end_function

begin_function
specifier|static
name|bits128X
name|shortShift128RightJamming
parameter_list|(
name|bits128X
name|a
parameter_list|,
name|int8
name|shiftCount
parameter_list|)
block|{
name|int8
name|negShiftCount
decl_stmt|;
name|bits64
name|extra
decl_stmt|;
name|negShiftCount
operator|=
operator|(
operator|-
name|shiftCount
operator|&
literal|63
operator|)
expr_stmt|;
name|extra
operator|=
name|a
operator|.
name|a1
operator|<<
name|negShiftCount
expr_stmt|;
name|a
operator|.
name|a1
operator|=
operator|(
name|a
operator|.
name|a0
operator|<<
name|negShiftCount
operator|)
operator||
operator|(
name|a
operator|.
name|a1
operator|>>
name|shiftCount
operator|)
operator||
operator|(
name|extra
operator|!=
literal|0
operator|)
expr_stmt|;
name|a
operator|.
name|a0
operator|>>=
name|shiftCount
expr_stmt|;
return|return
name|a
return|;
block|}
end_function

begin_function
specifier|static
name|bits128X
name|neg128
parameter_list|(
name|bits128X
name|a
parameter_list|)
block|{
if|if
condition|(
name|a
operator|.
name|a1
operator|==
literal|0
condition|)
block|{
name|a
operator|.
name|a0
operator|=
operator|-
name|a
operator|.
name|a0
expr_stmt|;
block|}
else|else
block|{
name|a
operator|.
name|a1
operator|=
operator|-
name|a
operator|.
name|a1
expr_stmt|;
name|a
operator|.
name|a0
operator|=
operator|~
name|a
operator|.
name|a0
expr_stmt|;
block|}
return|return
name|a
return|;
block|}
end_function

begin_function
specifier|static
name|bits128X
name|add128
parameter_list|(
name|bits128X
name|a
parameter_list|,
name|bits128X
name|b
parameter_list|)
block|{
name|a
operator|.
name|a1
operator|+=
name|b
operator|.
name|a1
expr_stmt|;
name|a
operator|.
name|a0
operator|+=
name|b
operator|.
name|a0
operator|+
operator|(
name|a
operator|.
name|a1
operator|<
name|b
operator|.
name|a1
operator|)
expr_stmt|;
return|return
name|a
return|;
block|}
end_function

begin_function
specifier|static
name|flag
name|eq128
parameter_list|(
name|bits128X
name|a
parameter_list|,
name|bits128X
name|b
parameter_list|)
block|{
return|return
operator|(
name|a
operator|.
name|a0
operator|==
name|b
operator|.
name|a0
operator|)
operator|&&
operator|(
name|a
operator|.
name|a1
operator|==
name|b
operator|.
name|a1
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|flag
name|le128
parameter_list|(
name|bits128X
name|a
parameter_list|,
name|bits128X
name|b
parameter_list|)
block|{
return|return
operator|(
name|a
operator|.
name|a0
operator|<
name|b
operator|.
name|a0
operator|)
operator|||
operator|(
operator|(
name|a
operator|.
name|a0
operator|==
name|b
operator|.
name|a0
operator|)
operator|&&
operator|(
name|a
operator|.
name|a1
operator|<=
name|b
operator|.
name|a1
operator|)
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|flag
name|lt128
parameter_list|(
name|bits128X
name|a
parameter_list|,
name|bits128X
name|b
parameter_list|)
block|{
return|return
operator|(
name|a
operator|.
name|a0
operator|<
name|b
operator|.
name|a0
operator|)
operator|||
operator|(
operator|(
name|a
operator|.
name|a0
operator|==
name|b
operator|.
name|a0
operator|)
operator|&&
operator|(
name|a
operator|.
name|a1
operator|<
name|b
operator|.
name|a1
operator|)
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|roundFloatXTo24
parameter_list|(
name|flag
name|isTiny
parameter_list|,
name|floatX
name|zx
parameter_list|)
block|{
name|bits32
name|roundBits
decl_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator||=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|!=
literal|0
operator|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|roundBits
operator|=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
literal|0xFFFFFFFF
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|-=
name|roundBits
expr_stmt|;
if|if
condition|(
name|roundBits
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|isTiny
condition|)
name|slow_float_exception_flags
operator||=
name|float_flag_underflow
expr_stmt|;
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
if|if
condition|(
name|roundBits
operator|<
literal|0x80000000
condition|)
goto|goto
name|noIncrement
goto|;
if|if
condition|(
operator|(
name|roundBits
operator|==
literal|0x80000000
operator|)
operator|&&
operator|!
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
name|LIT64
argument_list|(
literal|0x100000000
argument_list|)
operator|)
condition|)
block|{
goto|goto
name|noIncrement
goto|;
block|}
break|break;
case|case
name|float_round_to_zero
case|:
goto|goto
name|noIncrement
goto|;
case|case
name|float_round_down
case|:
if|if
condition|(
operator|!
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
case|case
name|float_round_up
case|:
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
block|}
name|zx
operator|.
name|sig
operator|.
name|a0
operator|+=
name|LIT64
argument_list|(
literal|0x100000000
argument_list|)
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|==
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
block|}
name|noIncrement
label|:
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|roundFloatXTo53
parameter_list|(
name|flag
name|isTiny
parameter_list|,
name|floatX
name|zx
parameter_list|)
block|{
name|int8
name|roundBits
decl_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator||=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|!=
literal|0
operator|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|roundBits
operator|=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
literal|7
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|-=
name|roundBits
expr_stmt|;
if|if
condition|(
name|roundBits
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|isTiny
condition|)
name|slow_float_exception_flags
operator||=
name|float_flag_underflow
expr_stmt|;
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
if|if
condition|(
name|roundBits
operator|<
literal|4
condition|)
goto|goto
name|noIncrement
goto|;
if|if
condition|(
operator|(
name|roundBits
operator|==
literal|4
operator|)
operator|&&
operator|!
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
literal|8
operator|)
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
case|case
name|float_round_to_zero
case|:
goto|goto
name|noIncrement
goto|;
case|case
name|float_round_down
case|:
if|if
condition|(
operator|!
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
case|case
name|float_round_up
case|:
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
block|}
name|zx
operator|.
name|sig
operator|.
name|a0
operator|+=
literal|8
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|==
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
block|}
name|noIncrement
label|:
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|roundFloatXTo64
parameter_list|(
name|flag
name|isTiny
parameter_list|,
name|floatX
name|zx
parameter_list|)
block|{
name|int64
name|roundBits
decl_stmt|;
name|roundBits
operator|=
name|zx
operator|.
name|sig
operator|.
name|a1
operator|&
name|LIT64
argument_list|(
literal|0x00FFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|-=
name|roundBits
expr_stmt|;
if|if
condition|(
name|roundBits
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|isTiny
condition|)
name|slow_float_exception_flags
operator||=
name|float_flag_underflow
expr_stmt|;
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
if|if
condition|(
name|roundBits
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
goto|goto
name|noIncrement
goto|;
if|if
condition|(
operator|(
name|roundBits
operator|==
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
operator|)
operator|&&
operator|!
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|&
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
operator|)
condition|)
block|{
goto|goto
name|noIncrement
goto|;
block|}
break|break;
case|case
name|float_round_to_zero
case|:
goto|goto
name|noIncrement
goto|;
case|case
name|float_round_down
case|:
if|if
condition|(
operator|!
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
case|case
name|float_round_up
case|:
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
block|}
name|zx
operator|.
name|sig
operator|.
name|a1
operator|+=
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|+=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
operator|)
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|==
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
block|}
name|noIncrement
label|:
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|roundFloatXTo113
parameter_list|(
name|flag
name|isTiny
parameter_list|,
name|floatX
name|zx
parameter_list|)
block|{
name|int8
name|roundBits
decl_stmt|;
name|roundBits
operator|=
name|zx
operator|.
name|sig
operator|.
name|a1
operator|&
literal|0x7F
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|-=
name|roundBits
expr_stmt|;
if|if
condition|(
name|roundBits
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|isTiny
condition|)
name|slow_float_exception_flags
operator||=
name|float_flag_underflow
expr_stmt|;
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
if|if
condition|(
name|roundBits
operator|<
literal|0x40
condition|)
goto|goto
name|noIncrement
goto|;
if|if
condition|(
operator|(
name|roundBits
operator|==
literal|0x40
operator|)
operator|&&
operator|!
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|&
literal|0x80
operator|)
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
case|case
name|float_round_to_zero
case|:
goto|goto
name|noIncrement
goto|;
case|case
name|float_round_down
case|:
if|if
condition|(
operator|!
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
case|case
name|float_round_up
case|:
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
goto|goto
name|noIncrement
goto|;
break|break;
block|}
name|zx
operator|.
name|sig
operator|.
name|a1
operator|+=
literal|0x80
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|+=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
operator|)
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|==
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
block|}
name|noIncrement
label|:
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|int32ToFloatX
parameter_list|(
name|int32
name|a
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|;
name|ax
operator|.
name|isNaN
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isInf
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sign
operator|=
operator|(
name|a
operator|<
literal|0
operator|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
name|ax
operator|.
name|sign
condition|?
operator|-
operator|(
name|bits64
operator|)
name|a
else|:
name|a
expr_stmt|;
if|if
condition|(
name|a
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
return|return
name|ax
return|;
block|}
name|ax
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<<=
literal|24
expr_stmt|;
name|ax
operator|.
name|exp
operator|=
literal|31
expr_stmt|;
while|while
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
block|{
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<<=
literal|1
expr_stmt|;
operator|--
name|ax
operator|.
name|exp
expr_stmt|;
block|}
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|int32
name|floatXToInt32
parameter_list|(
name|floatX
name|ax
parameter_list|)
block|{
name|int8
name|savedExceptionFlags
decl_stmt|;
name|int32
name|shiftCount
decl_stmt|;
name|int32
name|z
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|ax
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
return|return
operator|(
name|ax
operator|.
name|isInf
operator|&
name|ax
operator|.
name|sign
operator|)
condition|?
operator|(
name|sbits32
operator|)
literal|0x80000000
else|:
literal|0x7FFFFFFF
return|;
block|}
if|if
condition|(
name|ax
operator|.
name|isZero
condition|)
return|return
literal|0
return|;
name|savedExceptionFlags
operator|=
name|slow_float_exception_flags
expr_stmt|;
name|shiftCount
operator|=
literal|52
operator|-
name|ax
operator|.
name|exp
expr_stmt|;
if|if
condition|(
literal|56
operator|<
name|shiftCount
condition|)
block|{
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
literal|1
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
literal|0
operator|<
name|shiftCount
condition|)
block|{
name|ax
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|shiftCount
expr_stmt|;
block|}
block|}
name|ax
operator|=
name|roundFloatXTo53
argument_list|(
name|FALSE
argument_list|,
name|ax
argument_list|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|z
operator|=
name|ax
operator|.
name|sig
operator|.
name|a0
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
name|z
operator|=
operator|-
name|z
expr_stmt|;
if|if
condition|(
operator|(
name|shiftCount
operator|<
literal|0
operator|)
operator|||
operator|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|>>
literal|32
operator|)
operator|||
operator|(
operator|(
name|z
operator|!=
literal|0
operator|)
operator|&&
operator|(
operator|(
name|ax
operator|.
name|sign
operator|^
operator|(
name|z
operator|<
literal|0
operator|)
operator|)
operator|!=
literal|0
operator|)
operator|)
condition|)
block|{
name|slow_float_exception_flags
operator|=
name|savedExceptionFlags
operator||
name|float_flag_invalid
expr_stmt|;
return|return
name|ax
operator|.
name|sign
condition|?
operator|(
name|sbits32
operator|)
literal|0x80000000
else|:
literal|0x7FFFFFFF
return|;
block|}
return|return
name|z
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|int64ToFloatX
parameter_list|(
name|int64
name|a
parameter_list|)
block|{
name|uint64
name|absA
decl_stmt|;
name|floatX
name|ax
decl_stmt|;
name|ax
operator|.
name|isNaN
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isInf
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sign
operator|=
operator|(
name|a
operator|<
literal|0
operator|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
name|ax
operator|.
name|sign
condition|?
operator|-
name|a
else|:
name|a
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|a
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
return|return
name|ax
return|;
block|}
name|ax
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|56
argument_list|)
expr_stmt|;
name|ax
operator|.
name|exp
operator|=
literal|63
expr_stmt|;
while|while
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
block|{
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|ax
operator|.
name|exp
expr_stmt|;
block|}
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|int64
name|floatXToInt64
parameter_list|(
name|floatX
name|ax
parameter_list|)
block|{
name|int8
name|savedExceptionFlags
decl_stmt|;
name|int32
name|shiftCount
decl_stmt|;
name|int64
name|z
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|ax
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
return|return
operator|(
name|ax
operator|.
name|isInf
operator|&
name|ax
operator|.
name|sign
operator|)
condition|?
operator|(
name|sbits64
operator|)
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
else|:
name|LIT64
argument_list|(
literal|0x7FFFFFFFFFFFFFFF
argument_list|)
return|;
block|}
if|if
condition|(
name|ax
operator|.
name|isZero
condition|)
return|return
literal|0
return|;
name|savedExceptionFlags
operator|=
name|slow_float_exception_flags
expr_stmt|;
name|shiftCount
operator|=
literal|112
operator|-
name|ax
operator|.
name|exp
expr_stmt|;
if|if
condition|(
literal|116
operator|<
name|shiftCount
condition|)
block|{
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
literal|1
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
literal|0
operator|<
name|shiftCount
condition|)
block|{
name|ax
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|shiftCount
expr_stmt|;
block|}
block|}
name|ax
operator|=
name|roundFloatXTo113
argument_list|(
name|FALSE
argument_list|,
name|ax
argument_list|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|7
argument_list|)
expr_stmt|;
name|z
operator|=
name|ax
operator|.
name|sig
operator|.
name|a1
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
name|z
operator|=
operator|-
name|z
expr_stmt|;
if|if
condition|(
operator|(
name|shiftCount
operator|<
literal|0
operator|)
operator|||
name|ax
operator|.
name|sig
operator|.
name|a0
operator|||
operator|(
operator|(
name|z
operator|!=
literal|0
operator|)
operator|&&
operator|(
operator|(
name|ax
operator|.
name|sign
operator|^
operator|(
name|z
operator|<
literal|0
operator|)
operator|)
operator|!=
literal|0
operator|)
operator|)
condition|)
block|{
name|slow_float_exception_flags
operator|=
name|savedExceptionFlags
operator||
name|float_flag_invalid
expr_stmt|;
return|return
name|ax
operator|.
name|sign
condition|?
operator|(
name|sbits64
operator|)
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
else|:
name|LIT64
argument_list|(
literal|0x7FFFFFFFFFFFFFFF
argument_list|)
return|;
block|}
return|return
name|z
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|float32ToFloatX
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
name|int16
name|expField
decl_stmt|;
name|floatX
name|ax
decl_stmt|;
name|ax
operator|.
name|isNaN
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isInf
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sign
operator|=
operator|(
operator|(
name|a
operator|&
literal|0x80000000
operator|)
operator|!=
literal|0
operator|)
expr_stmt|;
name|expField
operator|=
operator|(
name|a
operator|>>
literal|23
operator|)
operator|&
literal|0xFF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
name|a
operator|&
literal|0x007FFFFF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<<=
literal|32
expr_stmt|;
if|if
condition|(
name|expField
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|expField
operator|=
literal|1
operator|-
literal|0x7F
expr_stmt|;
do|do
block|{
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<<=
literal|1
expr_stmt|;
operator|--
name|expField
expr_stmt|;
block|}
do|while
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
do|;
name|ax
operator|.
name|exp
operator|=
name|expField
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|expField
operator|==
literal|0xFF
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isInf
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|ax
operator|.
name|isNaN
operator|=
name|TRUE
expr_stmt|;
block|}
block|}
else|else
block|{
name|ax
operator|.
name|sig
operator|.
name|a0
operator||=
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
expr_stmt|;
name|ax
operator|.
name|exp
operator|=
name|expField
operator|-
literal|0x7F
expr_stmt|;
block|}
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|float32
name|floatXToFloat32
parameter_list|(
name|floatX
name|zx
parameter_list|)
block|{
name|floatX
name|savedZ
decl_stmt|;
name|flag
name|isTiny
decl_stmt|;
name|int32
name|expField
decl_stmt|;
name|float32
name|z
decl_stmt|;
if|if
condition|(
name|zx
operator|.
name|isZero
condition|)
return|return
name|zx
operator|.
name|sign
condition|?
literal|0x80000000
else|:
literal|0
return|;
if|if
condition|(
name|zx
operator|.
name|isInf
condition|)
return|return
name|zx
operator|.
name|sign
condition|?
literal|0xFF800000
else|:
literal|0x7F800000
return|;
if|if
condition|(
name|zx
operator|.
name|isNaN
condition|)
return|return
literal|0xFFFFFFFF
return|;
while|while
condition|(
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
while|while
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|zx
operator|.
name|exp
expr_stmt|;
block|}
name|savedZ
operator|=
name|zx
expr_stmt|;
name|isTiny
operator|=
operator|(
name|slow_float_detect_tininess
operator|==
name|float_tininess_before_rounding
operator|)
operator|&&
operator|(
name|zx
operator|.
name|exp
operator|+
literal|0x7F
operator|<=
literal|0
operator|)
expr_stmt|;
name|zx
operator|=
name|roundFloatXTo24
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x7F
expr_stmt|;
if|if
condition|(
literal|0xFF
operator|<=
name|expField
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_overflow
operator||
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_down
case|:
name|z
operator|=
literal|0xFF800000
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_up
case|:
name|z
operator|=
literal|0xFF7FFFFF
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_up
case|:
name|z
operator|=
literal|0x7F800000
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_down
case|:
name|z
operator|=
literal|0x7F7FFFFF
expr_stmt|;
break|break;
block|}
block|}
return|return
name|z
return|;
block|}
if|if
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|isTiny
operator|=
name|TRUE
expr_stmt|;
name|zx
operator|=
name|savedZ
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x7F
expr_stmt|;
if|if
condition|(
name|expField
operator|<
operator|-
literal|27
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|!=
literal|0
operator|)
operator|||
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|!=
literal|0
operator|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|expField
expr_stmt|;
block|}
block|}
name|zx
operator|=
name|roundFloatXTo24
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
name|expField
operator|=
operator|(
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|)
condition|?
literal|1
else|:
literal|0
expr_stmt|;
block|}
name|z
operator|=
name|expField
expr_stmt|;
name|z
operator|<<=
literal|23
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
name|z
operator||=
literal|0x80000000
expr_stmt|;
name|z
operator||=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|>>
literal|32
operator|)
operator|&
literal|0x007FFFFF
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|float64ToFloatX
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
name|int16
name|expField
decl_stmt|;
name|floatX
name|ax
decl_stmt|;
name|ax
operator|.
name|isNaN
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isInf
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sign
operator|=
operator|(
operator|(
name|a
operator|&
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
operator|)
operator|!=
literal|0
operator|)
expr_stmt|;
name|expField
operator|=
operator|(
name|a
operator|>>
literal|52
operator|)
operator|&
literal|0x7FF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
name|a
operator|&
name|LIT64
argument_list|(
literal|0x000FFFFFFFFFFFFF
argument_list|)
expr_stmt|;
if|if
condition|(
name|expField
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|expField
operator|=
literal|1
operator|-
literal|0x3FF
expr_stmt|;
do|do
block|{
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<<=
literal|1
expr_stmt|;
operator|--
name|expField
expr_stmt|;
block|}
do|while
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0010000000000000
argument_list|)
condition|)
do|;
name|ax
operator|.
name|exp
operator|=
name|expField
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|expField
operator|==
literal|0x7FF
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isInf
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|ax
operator|.
name|isNaN
operator|=
name|TRUE
expr_stmt|;
block|}
block|}
else|else
block|{
name|ax
operator|.
name|exp
operator|=
name|expField
operator|-
literal|0x3FF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator||=
name|LIT64
argument_list|(
literal|0x0010000000000000
argument_list|)
expr_stmt|;
block|}
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<<=
literal|3
expr_stmt|;
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|float64
name|floatXToFloat64
parameter_list|(
name|floatX
name|zx
parameter_list|)
block|{
name|floatX
name|savedZ
decl_stmt|;
name|flag
name|isTiny
decl_stmt|;
name|int32
name|expField
decl_stmt|;
name|float64
name|z
decl_stmt|;
if|if
condition|(
name|zx
operator|.
name|isZero
condition|)
return|return
name|zx
operator|.
name|sign
condition|?
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
else|:
literal|0
return|;
if|if
condition|(
name|zx
operator|.
name|isInf
condition|)
block|{
return|return
name|zx
operator|.
name|sign
condition|?
name|LIT64
argument_list|(
literal|0xFFF0000000000000
argument_list|)
else|:
name|LIT64
argument_list|(
literal|0x7FF0000000000000
argument_list|)
return|;
block|}
if|if
condition|(
name|zx
operator|.
name|isNaN
condition|)
return|return
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
return|;
while|while
condition|(
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
while|while
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|zx
operator|.
name|exp
expr_stmt|;
block|}
name|savedZ
operator|=
name|zx
expr_stmt|;
name|isTiny
operator|=
operator|(
name|slow_float_detect_tininess
operator|==
name|float_tininess_before_rounding
operator|)
operator|&&
operator|(
name|zx
operator|.
name|exp
operator|+
literal|0x3FF
operator|<=
literal|0
operator|)
expr_stmt|;
name|zx
operator|=
name|roundFloatXTo53
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x3FF
expr_stmt|;
if|if
condition|(
literal|0x7FF
operator|<=
name|expField
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_overflow
operator||
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_down
case|:
name|z
operator|=
name|LIT64
argument_list|(
literal|0xFFF0000000000000
argument_list|)
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_up
case|:
name|z
operator|=
name|LIT64
argument_list|(
literal|0xFFEFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_up
case|:
name|z
operator|=
name|LIT64
argument_list|(
literal|0x7FF0000000000000
argument_list|)
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_down
case|:
name|z
operator|=
name|LIT64
argument_list|(
literal|0x7FEFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
return|return
name|z
return|;
block|}
if|if
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|isTiny
operator|=
name|TRUE
expr_stmt|;
name|zx
operator|=
name|savedZ
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x3FF
expr_stmt|;
if|if
condition|(
name|expField
operator|<
operator|-
literal|56
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|!=
literal|0
operator|)
operator|||
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|!=
literal|0
operator|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|expField
expr_stmt|;
block|}
block|}
name|zx
operator|=
name|roundFloatXTo53
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
name|expField
operator|=
operator|(
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|)
condition|?
literal|1
else|:
literal|0
expr_stmt|;
block|}
name|zx
operator|.
name|sig
operator|.
name|a0
operator|>>=
literal|3
expr_stmt|;
name|z
operator|=
name|expField
expr_stmt|;
name|z
operator|<<=
literal|52
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
name|z
operator||=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
name|z
operator||=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
name|LIT64
argument_list|(
literal|0x000FFFFFFFFFFFFF
argument_list|)
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
specifier|static
name|floatX
name|floatx80ToFloatX
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
name|int32
name|expField
decl_stmt|;
name|floatX
name|ax
decl_stmt|;
name|ax
operator|.
name|isNaN
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isInf
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sign
operator|=
operator|(
operator|(
name|a
operator|.
name|high
operator|&
literal|0x8000
operator|)
operator|!=
literal|0
operator|)
expr_stmt|;
name|expField
operator|=
name|a
operator|.
name|high
operator|&
literal|0x7FFF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
name|a
operator|.
name|low
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|expField
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|expField
operator|=
literal|1
operator|-
literal|0x3FFF
expr_stmt|;
while|while
condition|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|<
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
condition|)
block|{
name|ax
operator|.
name|sig
operator|.
name|a1
operator|<<=
literal|1
expr_stmt|;
operator|--
name|expField
expr_stmt|;
block|}
name|ax
operator|.
name|exp
operator|=
name|expField
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|expField
operator|==
literal|0x7FFF
condition|)
block|{
if|if
condition|(
operator|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|&
name|LIT64
argument_list|(
literal|0x7FFFFFFFFFFFFFFF
argument_list|)
operator|)
operator|==
literal|0
condition|)
block|{
name|ax
operator|.
name|isInf
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|ax
operator|.
name|isNaN
operator|=
name|TRUE
expr_stmt|;
block|}
block|}
else|else
block|{
name|ax
operator|.
name|exp
operator|=
name|expField
operator|-
literal|0x3FFF
expr_stmt|;
block|}
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|56
argument_list|)
expr_stmt|;
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|floatx80
name|floatXToFloatx80
parameter_list|(
name|floatX
name|zx
parameter_list|)
block|{
name|floatX
name|savedZ
decl_stmt|;
name|flag
name|isTiny
decl_stmt|;
name|int32
name|expField
decl_stmt|;
name|floatx80
name|z
decl_stmt|;
if|if
condition|(
name|zx
operator|.
name|isZero
condition|)
block|{
name|z
operator|.
name|low
operator|=
literal|0
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|zx
operator|.
name|sign
condition|?
literal|0x8000
else|:
literal|0
expr_stmt|;
return|return
name|z
return|;
block|}
if|if
condition|(
name|zx
operator|.
name|isInf
condition|)
block|{
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|zx
operator|.
name|sign
condition|?
literal|0xFFFF
else|:
literal|0x7FFF
expr_stmt|;
return|return
name|z
return|;
block|}
if|if
condition|(
name|zx
operator|.
name|isNaN
condition|)
block|{
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator|=
literal|0xFFFF
expr_stmt|;
return|return
name|z
return|;
block|}
while|while
condition|(
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
while|while
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|zx
operator|.
name|exp
expr_stmt|;
block|}
name|savedZ
operator|=
name|zx
expr_stmt|;
name|isTiny
operator|=
operator|(
name|slow_float_detect_tininess
operator|==
name|float_tininess_before_rounding
operator|)
operator|&&
operator|(
name|zx
operator|.
name|exp
operator|+
literal|0x3FFF
operator|<=
literal|0
operator|)
expr_stmt|;
switch|switch
condition|(
name|slow_floatx80_rounding_precision
condition|)
block|{
case|case
literal|32
case|:
name|zx
operator|=
name|roundFloatXTo24
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
break|break;
case|case
literal|64
case|:
name|zx
operator|=
name|roundFloatXTo53
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
break|break;
default|default:
name|zx
operator|=
name|roundFloatXTo64
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
break|break;
block|}
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x3FFF
expr_stmt|;
if|if
condition|(
literal|0x7FFF
operator|<=
name|expField
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_overflow
operator||
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_down
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator|=
literal|0xFFFF
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_up
case|:
switch|switch
condition|(
name|slow_floatx80_rounding_precision
condition|)
block|{
case|case
literal|32
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFF0000000000
argument_list|)
expr_stmt|;
break|break;
case|case
literal|64
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFF800
argument_list|)
expr_stmt|;
break|break;
default|default:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
break|break;
block|}
name|z
operator|.
name|high
operator|=
literal|0xFFFE
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_up
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator|=
literal|0x7FFF
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_down
case|:
switch|switch
condition|(
name|slow_floatx80_rounding_precision
condition|)
block|{
case|case
literal|32
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFF0000000000
argument_list|)
expr_stmt|;
break|break;
case|case
literal|64
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFF800
argument_list|)
expr_stmt|;
break|break;
default|default:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
break|break;
block|}
name|z
operator|.
name|high
operator|=
literal|0x7FFE
expr_stmt|;
break|break;
block|}
block|}
return|return
name|z
return|;
block|}
if|if
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|isTiny
operator|=
name|TRUE
expr_stmt|;
name|zx
operator|=
name|savedZ
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x3FFF
expr_stmt|;
if|if
condition|(
name|expField
operator|<
operator|-
literal|70
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|!=
literal|0
operator|)
operator|||
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|!=
literal|0
operator|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|expField
expr_stmt|;
block|}
block|}
switch|switch
condition|(
name|slow_floatx80_rounding_precision
condition|)
block|{
case|case
literal|32
case|:
name|zx
operator|=
name|roundFloatXTo24
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
break|break;
case|case
literal|64
case|:
name|zx
operator|=
name|roundFloatXTo53
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
break|break;
default|default:
name|zx
operator|=
name|roundFloatXTo64
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
break|break;
block|}
name|expField
operator|=
operator|(
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|)
condition|?
literal|1
else|:
literal|0
expr_stmt|;
block|}
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|56
argument_list|)
expr_stmt|;
name|z
operator|.
name|low
operator|=
name|zx
operator|.
name|sig
operator|.
name|a1
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|expField
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
name|z
operator|.
name|high
operator||=
literal|0x8000
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
specifier|static
name|floatX
name|float128ToFloatX
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
name|int32
name|expField
decl_stmt|;
name|floatX
name|ax
decl_stmt|;
name|ax
operator|.
name|isNaN
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isInf
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|ax
operator|.
name|sign
operator|=
operator|(
operator|(
name|a
operator|.
name|high
operator|&
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
operator|)
operator|!=
literal|0
operator|)
expr_stmt|;
name|expField
operator|=
operator|(
name|a
operator|.
name|high
operator|>>
literal|48
operator|)
operator|&
literal|0x7FFF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
name|a
operator|.
name|low
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
name|a
operator|.
name|high
operator|&
name|LIT64
argument_list|(
literal|0x0000FFFFFFFFFFFF
argument_list|)
expr_stmt|;
if|if
condition|(
name|expField
operator|==
literal|0
condition|)
block|{
if|if
condition|(
operator|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
operator|)
operator|&&
operator|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
operator|)
condition|)
block|{
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|expField
operator|=
literal|1
operator|-
literal|0x3FFF
expr_stmt|;
do|do
block|{
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|expField
expr_stmt|;
block|}
do|while
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0001000000000000
argument_list|)
condition|)
do|;
name|ax
operator|.
name|exp
operator|=
name|expField
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|expField
operator|==
literal|0x7FFF
condition|)
block|{
if|if
condition|(
operator|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
operator|)
operator|&&
operator|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
operator|)
condition|)
block|{
name|ax
operator|.
name|isInf
operator|=
name|TRUE
expr_stmt|;
block|}
else|else
block|{
name|ax
operator|.
name|isNaN
operator|=
name|TRUE
expr_stmt|;
block|}
block|}
else|else
block|{
name|ax
operator|.
name|exp
operator|=
name|expField
operator|-
literal|0x3FFF
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator||=
name|LIT64
argument_list|(
literal|0x0001000000000000
argument_list|)
expr_stmt|;
block|}
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|7
argument_list|)
expr_stmt|;
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|float128
name|floatXToFloat128
parameter_list|(
name|floatX
name|zx
parameter_list|)
block|{
name|floatX
name|savedZ
decl_stmt|;
name|flag
name|isTiny
decl_stmt|;
name|int32
name|expField
decl_stmt|;
name|float128
name|z
decl_stmt|;
if|if
condition|(
name|zx
operator|.
name|isZero
condition|)
block|{
name|z
operator|.
name|low
operator|=
literal|0
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|zx
operator|.
name|sign
condition|?
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
else|:
literal|0
expr_stmt|;
return|return
name|z
return|;
block|}
if|if
condition|(
name|zx
operator|.
name|isInf
condition|)
block|{
name|z
operator|.
name|low
operator|=
literal|0
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|zx
operator|.
name|sign
condition|?
name|LIT64
argument_list|(
literal|0xFFFF000000000000
argument_list|)
else|:
name|LIT64
argument_list|(
literal|0x7FFF000000000000
argument_list|)
expr_stmt|;
return|return
name|z
return|;
block|}
if|if
condition|(
name|zx
operator|.
name|isNaN
condition|)
block|{
name|z
operator|.
name|high
operator|=
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
return|return
name|z
return|;
block|}
while|while
condition|(
name|LIT64
argument_list|(
literal|0x0100000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|zx
operator|.
name|exp
expr_stmt|;
block|}
while|while
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|<
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|zx
operator|.
name|exp
expr_stmt|;
block|}
name|savedZ
operator|=
name|zx
expr_stmt|;
name|isTiny
operator|=
operator|(
name|slow_float_detect_tininess
operator|==
name|float_tininess_before_rounding
operator|)
operator|&&
operator|(
name|zx
operator|.
name|exp
operator|+
literal|0x3FFF
operator|<=
literal|0
operator|)
expr_stmt|;
name|zx
operator|=
name|roundFloatXTo113
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x3FFF
expr_stmt|;
if|if
condition|(
literal|0x7FFF
operator|<=
name|expField
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_overflow
operator||
name|float_flag_inexact
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_down
case|:
name|z
operator|.
name|low
operator|=
literal|0
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|LIT64
argument_list|(
literal|0xFFFF000000000000
argument_list|)
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_up
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|LIT64
argument_list|(
literal|0xFFFEFFFFFFFFFFFF
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|slow_float_rounding_mode
condition|)
block|{
case|case
name|float_round_nearest_even
case|:
case|case
name|float_round_up
case|:
name|z
operator|.
name|low
operator|=
literal|0
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|LIT64
argument_list|(
literal|0x7FFF000000000000
argument_list|)
expr_stmt|;
break|break;
case|case
name|float_round_to_zero
case|:
case|case
name|float_round_down
case|:
name|z
operator|.
name|low
operator|=
name|LIT64
argument_list|(
literal|0xFFFFFFFFFFFFFFFF
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|LIT64
argument_list|(
literal|0x7FFEFFFFFFFFFFFF
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
return|return
name|z
return|;
block|}
if|if
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|isTiny
operator|=
name|TRUE
expr_stmt|;
name|zx
operator|=
name|savedZ
expr_stmt|;
name|expField
operator|=
name|zx
operator|.
name|exp
operator|+
literal|0x3FFF
expr_stmt|;
if|if
condition|(
name|expField
operator|<
operator|-
literal|120
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
operator|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|!=
literal|0
operator|)
operator|||
operator|(
name|zx
operator|.
name|sig
operator|.
name|a1
operator|!=
literal|0
operator|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
name|expField
operator|<=
literal|0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|expField
expr_stmt|;
block|}
block|}
name|zx
operator|=
name|roundFloatXTo113
argument_list|(
name|isTiny
argument_list|,
name|zx
argument_list|)
expr_stmt|;
name|expField
operator|=
operator|(
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
operator|<=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|)
condition|?
literal|1
else|:
literal|0
expr_stmt|;
block|}
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|7
argument_list|)
expr_stmt|;
name|z
operator|.
name|low
operator|=
name|zx
operator|.
name|sig
operator|.
name|a1
expr_stmt|;
name|z
operator|.
name|high
operator|=
name|expField
expr_stmt|;
name|z
operator|.
name|high
operator|<<=
literal|48
expr_stmt|;
if|if
condition|(
name|zx
operator|.
name|sign
condition|)
name|z
operator|.
name|high
operator||=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
name|z
operator|.
name|high
operator||=
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
name|LIT64
argument_list|(
literal|0x0000FFFFFFFFFFFF
argument_list|)
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
specifier|static
name|floatX
name|floatXInvalid
parameter_list|(
name|void
parameter_list|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
return|return
name|floatXNaN
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|floatXRoundToInt
parameter_list|(
name|floatX
name|ax
parameter_list|)
block|{
name|int32
name|shiftCount
decl_stmt|,
name|i
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|ax
operator|.
name|isInf
condition|)
return|return
name|ax
return|;
name|shiftCount
operator|=
literal|112
operator|-
name|ax
operator|.
name|exp
expr_stmt|;
if|if
condition|(
name|shiftCount
operator|<=
literal|0
condition|)
return|return
name|ax
return|;
if|if
condition|(
literal|119
operator|<
name|shiftCount
condition|)
block|{
name|ax
operator|.
name|exp
operator|=
literal|112
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a1
operator|=
operator|!
name|ax
operator|.
name|isZero
expr_stmt|;
name|ax
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
literal|0
operator|<
name|shiftCount
condition|)
block|{
name|ax
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|ax
operator|.
name|exp
expr_stmt|;
operator|--
name|shiftCount
expr_stmt|;
block|}
block|}
name|ax
operator|=
name|roundFloatXTo113
argument_list|(
name|FALSE
argument_list|,
name|ax
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
operator|)
operator|&&
operator|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
operator|)
condition|)
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|floatXAdd
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
name|int32
name|expDiff
decl_stmt|;
name|floatX
name|zx
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
condition|)
return|return
name|ax
return|;
if|if
condition|(
name|bx
operator|.
name|isNaN
condition|)
return|return
name|bx
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|&&
name|bx
operator|.
name|isInf
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sign
operator|==
name|bx
operator|.
name|sign
condition|)
return|return
name|ax
return|;
return|return
name|floatXInvalid
argument_list|()
return|;
block|}
if|if
condition|(
name|ax
operator|.
name|isInf
condition|)
return|return
name|ax
return|;
if|if
condition|(
name|bx
operator|.
name|isInf
condition|)
return|return
name|bx
return|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|&&
name|bx
operator|.
name|isZero
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|sign
operator|==
name|bx
operator|.
name|sign
condition|)
return|return
name|ax
return|;
goto|goto
name|completeCancellation
goto|;
block|}
if|if
condition|(
operator|(
name|ax
operator|.
name|sign
operator|!=
name|bx
operator|.
name|sign
operator|)
operator|&&
operator|(
name|ax
operator|.
name|exp
operator|==
name|bx
operator|.
name|exp
operator|)
operator|&&
name|eq128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|bx
operator|.
name|sig
argument_list|)
condition|)
block|{
name|completeCancellation
label|:
return|return
operator|(
name|slow_float_rounding_mode
operator|==
name|float_round_down
operator|)
condition|?
name|floatXNegativeZero
else|:
name|floatXPositiveZero
return|;
block|}
if|if
condition|(
name|ax
operator|.
name|isZero
condition|)
return|return
name|bx
return|;
if|if
condition|(
name|bx
operator|.
name|isZero
condition|)
return|return
name|ax
return|;
name|expDiff
operator|=
name|ax
operator|.
name|exp
operator|-
name|bx
operator|.
name|exp
expr_stmt|;
if|if
condition|(
name|expDiff
operator|<
literal|0
condition|)
block|{
name|zx
operator|=
name|ax
expr_stmt|;
name|zx
operator|.
name|exp
operator|=
name|bx
operator|.
name|exp
expr_stmt|;
if|if
condition|(
name|expDiff
operator|<
operator|-
literal|120
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|1
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
name|expDiff
operator|<
literal|0
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|++
name|expDiff
expr_stmt|;
block|}
block|}
if|if
condition|(
name|ax
operator|.
name|sign
operator|!=
name|bx
operator|.
name|sign
condition|)
name|zx
operator|.
name|sig
operator|=
name|neg128
argument_list|(
name|zx
operator|.
name|sig
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sign
operator|=
name|bx
operator|.
name|sign
expr_stmt|;
name|zx
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
name|bx
operator|.
name|sig
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|zx
operator|=
name|bx
expr_stmt|;
name|zx
operator|.
name|exp
operator|=
name|ax
operator|.
name|exp
expr_stmt|;
if|if
condition|(
literal|120
operator|<
name|expDiff
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|1
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
while|while
condition|(
literal|0
operator|<
name|expDiff
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|expDiff
expr_stmt|;
block|}
block|}
if|if
condition|(
name|ax
operator|.
name|sign
operator|!=
name|bx
operator|.
name|sign
condition|)
name|zx
operator|.
name|sig
operator|=
name|neg128
argument_list|(
name|zx
operator|.
name|sig
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sign
operator|=
name|ax
operator|.
name|sign
expr_stmt|;
name|zx
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|zx
operator|.
name|sig
operator|.
name|a0
operator|&
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|=
name|neg128
argument_list|(
name|zx
operator|.
name|sig
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sign
operator|=
operator|!
name|zx
operator|.
name|sign
expr_stmt|;
block|}
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|floatXMul
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
name|int8
name|bitNum
decl_stmt|;
name|floatX
name|zx
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
condition|)
return|return
name|ax
return|;
if|if
condition|(
name|bx
operator|.
name|isNaN
condition|)
return|return
name|bx
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
condition|)
block|{
if|if
condition|(
name|bx
operator|.
name|isZero
condition|)
return|return
name|floatXInvalid
argument_list|()
return|;
if|if
condition|(
name|bx
operator|.
name|sign
condition|)
name|ax
operator|.
name|sign
operator|=
operator|!
name|ax
operator|.
name|sign
expr_stmt|;
return|return
name|ax
return|;
block|}
if|if
condition|(
name|bx
operator|.
name|isInf
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|isZero
condition|)
return|return
name|floatXInvalid
argument_list|()
return|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
name|bx
operator|.
name|sign
operator|=
operator|!
name|bx
operator|.
name|sign
expr_stmt|;
return|return
name|bx
return|;
block|}
name|zx
operator|=
name|ax
expr_stmt|;
name|zx
operator|.
name|sign
operator|^=
name|bx
operator|.
name|sign
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|||
name|bx
operator|.
name|isZero
condition|)
block|{
return|return
name|zx
operator|.
name|sign
condition|?
name|floatXNegativeZero
else|:
name|floatXPositiveZero
return|;
block|}
name|zx
operator|.
name|exp
operator|+=
name|bx
operator|.
name|exp
operator|+
literal|1
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|bitNum
operator|=
literal|0
init|;
name|bitNum
operator|<
literal|119
condition|;
operator|++
name|bitNum
control|)
block|{
if|if
condition|(
name|bx
operator|.
name|sig
operator|.
name|a1
operator|&
literal|2
condition|)
name|zx
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
expr_stmt|;
name|bx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|floatXDiv
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
name|bits128X
name|negBSig
decl_stmt|;
name|int8
name|bitNum
decl_stmt|;
name|floatX
name|zx
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
condition|)
return|return
name|ax
return|;
if|if
condition|(
name|bx
operator|.
name|isNaN
condition|)
return|return
name|bx
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
condition|)
block|{
if|if
condition|(
name|bx
operator|.
name|isInf
condition|)
return|return
name|floatXInvalid
argument_list|()
return|;
if|if
condition|(
name|bx
operator|.
name|sign
condition|)
name|ax
operator|.
name|sign
operator|=
operator|!
name|ax
operator|.
name|sign
expr_stmt|;
return|return
name|ax
return|;
block|}
if|if
condition|(
name|bx
operator|.
name|isZero
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|isZero
condition|)
return|return
name|floatXInvalid
argument_list|()
return|;
name|slow_float_exception_flags
operator||=
name|float_flag_divbyzero
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
name|bx
operator|.
name|sign
operator|=
operator|!
name|bx
operator|.
name|sign
expr_stmt|;
name|bx
operator|.
name|isZero
operator|=
name|FALSE
expr_stmt|;
name|bx
operator|.
name|isInf
operator|=
name|TRUE
expr_stmt|;
return|return
name|bx
return|;
block|}
name|zx
operator|=
name|ax
expr_stmt|;
name|zx
operator|.
name|sign
operator|^=
name|bx
operator|.
name|sign
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|||
name|bx
operator|.
name|isInf
condition|)
block|{
return|return
name|zx
operator|.
name|sign
condition|?
name|floatXNegativeZero
else|:
name|floatXPositiveZero
return|;
block|}
name|zx
operator|.
name|exp
operator|-=
name|bx
operator|.
name|exp
operator|+
literal|1
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
name|negBSig
operator|=
name|neg128
argument_list|(
name|bx
operator|.
name|sig
argument_list|)
expr_stmt|;
for|for
control|(
name|bitNum
operator|=
literal|0
init|;
name|bitNum
operator|<
literal|120
condition|;
operator|++
name|bitNum
control|)
block|{
if|if
condition|(
name|le128
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
condition|)
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator||=
literal|1
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|negBSig
argument_list|)
expr_stmt|;
block|}
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|zx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|||
name|ax
operator|.
name|sig
operator|.
name|a1
condition|)
name|zx
operator|.
name|sig
operator|.
name|a1
operator||=
literal|1
expr_stmt|;
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|floatXRem
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
name|bits128X
name|negBSig
decl_stmt|;
name|flag
name|lastQuotientBit
decl_stmt|;
name|bits128X
name|savedASig
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
condition|)
return|return
name|ax
return|;
if|if
condition|(
name|bx
operator|.
name|isNaN
condition|)
return|return
name|bx
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|bx
operator|.
name|isZero
condition|)
return|return
name|floatXInvalid
argument_list|()
return|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|||
name|bx
operator|.
name|isInf
condition|)
return|return
name|ax
return|;
operator|--
name|bx
operator|.
name|exp
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|exp
operator|<
name|bx
operator|.
name|exp
condition|)
return|return
name|ax
return|;
name|bx
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|negBSig
operator|=
name|neg128
argument_list|(
name|bx
operator|.
name|sig
argument_list|)
expr_stmt|;
while|while
condition|(
name|bx
operator|.
name|exp
operator|<
name|ax
operator|.
name|exp
condition|)
block|{
if|if
condition|(
name|le128
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
condition|)
name|ax
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|negBSig
argument_list|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
operator|--
name|ax
operator|.
name|exp
expr_stmt|;
block|}
name|lastQuotientBit
operator|=
name|le128
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
expr_stmt|;
if|if
condition|(
name|lastQuotientBit
condition|)
name|ax
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|negBSig
argument_list|)
expr_stmt|;
name|savedASig
operator|=
name|ax
operator|.
name|sig
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|neg128
argument_list|(
name|add128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|negBSig
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|lt128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|savedASig
argument_list|)
condition|)
block|{
name|ax
operator|.
name|sign
operator|=
operator|!
name|ax
operator|.
name|sign
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|lt128
argument_list|(
name|savedASig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
condition|)
block|{
name|ax
operator|.
name|sig
operator|=
name|savedASig
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|lastQuotientBit
condition|)
block|{
name|ax
operator|.
name|sign
operator|=
operator|!
name|ax
operator|.
name|sign
expr_stmt|;
block|}
else|else
block|{
name|ax
operator|.
name|sig
operator|=
name|savedASig
expr_stmt|;
block|}
block|}
if|if
condition|(
operator|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|==
literal|0
operator|)
operator|&&
operator|(
name|ax
operator|.
name|sig
operator|.
name|a1
operator|==
literal|0
operator|)
condition|)
name|ax
operator|.
name|isZero
operator|=
name|TRUE
expr_stmt|;
return|return
name|ax
return|;
block|}
end_function

begin_function
specifier|static
name|floatX
name|floatXSqrt
parameter_list|(
name|floatX
name|ax
parameter_list|)
block|{
name|int8
name|bitNum
decl_stmt|;
name|bits128X
name|bitSig
decl_stmt|,
name|savedASig
decl_stmt|;
name|floatX
name|zx
decl_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|ax
operator|.
name|isZero
condition|)
return|return
name|ax
return|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
return|return
name|floatXInvalid
argument_list|()
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
condition|)
return|return
name|ax
return|;
name|zx
operator|=
name|ax
expr_stmt|;
name|zx
operator|.
name|exp
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|(
name|ax
operator|.
name|exp
operator|&
literal|1
operator|)
operator|==
literal|0
condition|)
name|ax
operator|.
name|sig
operator|=
name|shortShift128RightJamming
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator|=
literal|0
expr_stmt|;
name|bitSig
operator|.
name|a1
operator|=
literal|0
expr_stmt|;
name|bitSig
operator|.
name|a0
operator|=
name|LIT64
argument_list|(
literal|0x0080000000000000
argument_list|)
expr_stmt|;
for|for
control|(
name|bitNum
operator|=
literal|0
init|;
name|bitNum
operator|<
literal|120
condition|;
operator|++
name|bitNum
control|)
block|{
name|savedASig
operator|=
name|ax
operator|.
name|sig
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|neg128
argument_list|(
name|zx
operator|.
name|sig
argument_list|)
argument_list|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|ax
operator|.
name|sig
operator|=
name|add128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|neg128
argument_list|(
name|bitSig
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|&
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
condition|)
block|{
name|ax
operator|.
name|sig
operator|=
name|shortShift128Left
argument_list|(
name|savedASig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|zx
operator|.
name|sig
operator|.
name|a1
operator||=
name|bitSig
operator|.
name|a1
expr_stmt|;
name|zx
operator|.
name|sig
operator|.
name|a0
operator||=
name|bitSig
operator|.
name|a0
expr_stmt|;
block|}
name|bitSig
operator|=
name|shortShift128RightJamming
argument_list|(
name|bitSig
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|ax
operator|.
name|sig
operator|.
name|a0
operator|||
name|ax
operator|.
name|sig
operator|.
name|a1
condition|)
name|zx
operator|.
name|sig
operator|.
name|a1
operator||=
literal|1
expr_stmt|;
return|return
name|zx
return|;
block|}
end_function

begin_function
specifier|static
name|flag
name|floatXEq
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|&&
name|bx
operator|.
name|isZero
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|ax
operator|.
name|sign
operator|!=
name|bx
operator|.
name|sign
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|bx
operator|.
name|isInf
condition|)
return|return
name|ax
operator|.
name|isInf
operator|&&
name|bx
operator|.
name|isInf
return|;
return|return
operator|(
name|ax
operator|.
name|exp
operator|==
name|bx
operator|.
name|exp
operator|)
operator|&&
name|eq128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|bx
operator|.
name|sig
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|flag
name|floatXLe
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|&&
name|bx
operator|.
name|isZero
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|ax
operator|.
name|sign
operator|!=
name|bx
operator|.
name|sign
condition|)
return|return
name|ax
operator|.
name|sign
return|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|bx
operator|.
name|isZero
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|bx
operator|.
name|isInf
operator|||
name|ax
operator|.
name|isZero
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|bx
operator|.
name|exp
operator|<
name|ax
operator|.
name|exp
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|ax
operator|.
name|exp
operator|<
name|bx
operator|.
name|exp
condition|)
return|return
name|FALSE
return|;
return|return
name|le128
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
return|;
block|}
else|else
block|{
if|if
condition|(
name|bx
operator|.
name|isInf
operator|||
name|ax
operator|.
name|isZero
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|bx
operator|.
name|isZero
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|exp
operator|<
name|bx
operator|.
name|exp
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|bx
operator|.
name|exp
operator|<
name|ax
operator|.
name|exp
condition|)
return|return
name|FALSE
return|;
return|return
name|le128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|bx
operator|.
name|sig
argument_list|)
return|;
block|}
block|}
end_function

begin_function
specifier|static
name|flag
name|floatXLt
parameter_list|(
name|floatX
name|ax
parameter_list|,
name|floatX
name|bx
parameter_list|)
block|{
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|isZero
operator|&&
name|bx
operator|.
name|isZero
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|sign
operator|!=
name|bx
operator|.
name|sign
condition|)
return|return
name|ax
operator|.
name|sign
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|&&
name|bx
operator|.
name|isInf
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|sign
condition|)
block|{
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|bx
operator|.
name|isZero
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|bx
operator|.
name|isInf
operator|||
name|ax
operator|.
name|isZero
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|bx
operator|.
name|exp
operator|<
name|ax
operator|.
name|exp
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|ax
operator|.
name|exp
operator|<
name|bx
operator|.
name|exp
condition|)
return|return
name|FALSE
return|;
return|return
name|lt128
argument_list|(
name|bx
operator|.
name|sig
argument_list|,
name|ax
operator|.
name|sig
argument_list|)
return|;
block|}
else|else
block|{
if|if
condition|(
name|bx
operator|.
name|isInf
operator|||
name|ax
operator|.
name|isZero
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|ax
operator|.
name|isInf
operator|||
name|bx
operator|.
name|isZero
condition|)
return|return
name|FALSE
return|;
if|if
condition|(
name|ax
operator|.
name|exp
operator|<
name|bx
operator|.
name|exp
condition|)
return|return
name|TRUE
return|;
if|if
condition|(
name|bx
operator|.
name|exp
operator|<
name|ax
operator|.
name|exp
condition|)
return|return
name|FALSE
return|;
return|return
name|lt128
argument_list|(
name|ax
operator|.
name|sig
argument_list|,
name|bx
operator|.
name|sig
argument_list|)
return|;
block|}
block|}
end_function

begin_function
name|float32
name|slow_int32_to_float32
parameter_list|(
name|int32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|int32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_int32_to_float64
parameter_list|(
name|int32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|int32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
name|floatx80
name|slow_int32_to_floatx80
parameter_list|(
name|int32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|int32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
name|float128
name|slow_int32_to_float128
parameter_list|(
name|int32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|int32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|float32
name|slow_int64_to_float32
parameter_list|(
name|int64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|int64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_int64_to_float64
parameter_list|(
name|int64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|int64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
name|floatx80
name|slow_int64_to_floatx80
parameter_list|(
name|int64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|int64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
name|float128
name|slow_int64_to_float128
parameter_list|(
name|int64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|int64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|int32
name|slow_float32_to_int32
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToInt32
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int32
name|slow_float32_to_int32_round_to_zero
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int32
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt32
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|int64
name|slow_float32_to_int64
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToInt64
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int64
name|slow_float32_to_int64_round_to_zero
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int64
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt64
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|float64
name|slow_float32_to_float64
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
name|floatx80
name|slow_float32_to_floatx80
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
name|float128
name|slow_float32_to_float128
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|float32
name|slow_float32_round_to_int
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatXRoundToInt
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float32
name|slow_float32_add
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatXAdd
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float32
name|slow_float32_sub
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
name|b
operator|^=
literal|0x80000000
expr_stmt|;
return|return
name|floatXToFloat32
argument_list|(
name|floatXAdd
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float32
name|slow_float32_mul
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatXMul
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float32
name|slow_float32_div
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatXDiv
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float32
name|slow_float32_rem
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatXRem
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float32
name|slow_float32_sqrt
parameter_list|(
name|float32
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatXSqrt
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float32_eq
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXEq
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float32_le
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLe
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float32_lt
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLt
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float32_eq_signaling
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXEq
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float32_le_quiet
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXLe
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float32_lt_quiet
parameter_list|(
name|float32
name|a
parameter_list|,
name|float32
name|b
parameter_list|)
block|{
return|return
name|floatXLt
argument_list|(
name|float32ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float32ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int32
name|slow_float64_to_int32
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToInt32
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int32
name|slow_float64_to_int32_round_to_zero
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int32
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt32
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|int64
name|slow_float64_to_int64
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToInt64
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int64
name|slow_float64_to_int64_round_to_zero
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int64
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt64
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|float32
name|slow_float64_to_float32
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
name|floatx80
name|slow_float64_to_floatx80
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
name|float128
name|slow_float64_to_float128
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|float64
name|slow_float64_round_to_int
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatXRoundToInt
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float64_add
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatXAdd
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float64_sub
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
name|b
operator|^=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
return|return
name|floatXToFloat64
argument_list|(
name|floatXAdd
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float64_mul
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatXMul
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float64_div
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatXDiv
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float64_rem
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatXRem
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float64_sqrt
parameter_list|(
name|float64
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatXSqrt
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float64_eq
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXEq
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float64_le
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLe
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float64_lt
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLt
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float64_eq_signaling
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXEq
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float64_le_quiet
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXLe
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float64_lt_quiet
parameter_list|(
name|float64
name|a
parameter_list|,
name|float64
name|b
parameter_list|)
block|{
return|return
name|floatXLt
argument_list|(
name|float64ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float64ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
name|int32
name|slow_floatx80_to_int32
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToInt32
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int32
name|slow_floatx80_to_int32_round_to_zero
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int32
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt32
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|int64
name|slow_floatx80_to_int64
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToInt64
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int64
name|slow_floatx80_to_int64_round_to_zero
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int64
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt64
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|float32
name|slow_floatx80_to_float32
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_floatx80_to_float64
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
name|float128
name|slow_floatx80_to_float128
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|floatx80
name|slow_floatx80_round_to_int
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|floatXRoundToInt
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|floatx80
name|slow_floatx80_add
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|floatXAdd
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|floatx80
name|slow_floatx80_sub
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
name|b
operator|.
name|high
operator|^=
literal|0x8000
expr_stmt|;
return|return
name|floatXToFloatx80
argument_list|(
name|floatXAdd
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|floatx80
name|slow_floatx80_mul
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|floatXMul
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|floatx80
name|slow_floatx80_div
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|floatXDiv
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|floatx80
name|slow_floatx80_rem
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|floatXRem
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|floatx80
name|slow_floatx80_sqrt
parameter_list|(
name|floatx80
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|floatXSqrt
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_floatx80_eq
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXEq
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_floatx80_le
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLe
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_floatx80_lt
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLt
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_floatx80_eq_signaling
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXEq
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_floatx80_le_quiet
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXLe
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_floatx80_lt_quiet
parameter_list|(
name|floatx80
name|a
parameter_list|,
name|floatx80
name|b
parameter_list|)
block|{
return|return
name|floatXLt
argument_list|(
name|floatx80ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|floatx80ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FLOAT128
end_ifdef

begin_function
name|int32
name|slow_float128_to_int32
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToInt32
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int32
name|slow_float128_to_int32_round_to_zero
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int32
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt32
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|int64
name|slow_float128_to_int64
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToInt64
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|int64
name|slow_float128_to_int64_round_to_zero
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
name|int8
name|savedRoundingMode
decl_stmt|;
name|int64
name|z
decl_stmt|;
name|savedRoundingMode
operator|=
name|slow_float_rounding_mode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|float_round_to_zero
expr_stmt|;
name|z
operator|=
name|floatXToInt64
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|savedRoundingMode
expr_stmt|;
return|return
name|z
return|;
block|}
end_function

begin_function
name|float32
name|slow_float128_to_float32
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat32
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float64
name|slow_float128_to_float64
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat64
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|FLOATX80
end_ifdef

begin_function
name|floatx80
name|slow_float128_to_floatx80
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToFloatx80
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|float128
name|slow_float128_round_to_int
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatXRoundToInt
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float128
name|slow_float128_add
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatXAdd
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float128
name|slow_float128_sub
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
name|b
operator|.
name|high
operator|^=
name|LIT64
argument_list|(
literal|0x8000000000000000
argument_list|)
expr_stmt|;
return|return
name|floatXToFloat128
argument_list|(
name|floatXAdd
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float128
name|slow_float128_mul
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatXMul
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float128
name|slow_float128_div
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatXDiv
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float128
name|slow_float128_rem
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatXRem
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|float128
name|slow_float128_sqrt
parameter_list|(
name|float128
name|a
parameter_list|)
block|{
return|return
name|floatXToFloat128
argument_list|(
name|floatXSqrt
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float128_eq
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXEq
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float128_le
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLe
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float128_lt
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXLt
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float128_eq_signaling
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
name|floatX
name|ax
decl_stmt|,
name|bx
decl_stmt|;
name|ax
operator|=
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
expr_stmt|;
name|bx
operator|=
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
expr_stmt|;
if|if
condition|(
name|ax
operator|.
name|isNaN
operator|||
name|bx
operator|.
name|isNaN
condition|)
block|{
name|slow_float_exception_flags
operator||=
name|float_flag_invalid
expr_stmt|;
block|}
return|return
name|floatXEq
argument_list|(
name|ax
argument_list|,
name|bx
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float128_le_quiet
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXLe
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_function
name|flag
name|slow_float128_lt_quiet
parameter_list|(
name|float128
name|a
parameter_list|,
name|float128
name|b
parameter_list|)
block|{
return|return
name|floatXLt
argument_list|(
name|float128ToFloatX
argument_list|(
name|a
argument_list|)
argument_list|,
name|float128ToFloatX
argument_list|(
name|b
argument_list|)
argument_list|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

end_unit

