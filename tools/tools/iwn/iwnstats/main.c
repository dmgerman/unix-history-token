begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 2014 Adrian Chadd<adrian@FreeBSD.org>  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer,  *    without modification.  * 2. Redistributions in binary form must reproduce at minimum a disclaimer  *    similar to the "NO WARRANTY" disclaimer below ("Disclaimer") and any  *    redistribution must be conditioned upon including a substantially  *    similar Disclaimer requirement for further binary redistribution.  *  * NO WARRANTY  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS  * ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT  * LIMITED TO, THE IMPLIED WARRANTIES OF NONINFRINGEMENT, MERCHANTIBILITY  * AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL  * THE COPYRIGHT HOLDERS OR CONTRIBUTORS BE LIABLE FOR SPECIAL, EXEMPLARY,  * OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER  * IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF  * THE POSSIBILITY OF SUCH DAMAGES.  *  * $FreeBSD$  */
end_comment

begin_include
include|#
directive|include
file|<stdbool.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_include
include|#
directive|include
file|<unistd.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<err.h>
end_include

begin_include
include|#
directive|include
file|<net/if.h>
end_include

begin_include
include|#
directive|include
file|<sys/endian.h>
end_include

begin_include
include|#
directive|include
file|"net80211/ieee80211_ioctl.h"
end_include

begin_include
include|#
directive|include
file|"net80211/ieee80211_radiotap.h"
end_include

begin_include
include|#
directive|include
file|"if_iwn_ioctl.h"
end_include

begin_include
include|#
directive|include
file|"if_iwnreg.h"
end_include

begin_include
include|#
directive|include
file|"iwnstats.h"
end_include

begin_include
include|#
directive|include
file|"iwn_ioctl.h"
end_include

begin_define
define|#
directive|define
name|IWN_DEFAULT_IF
value|"iwn0"
end_define

begin_function
specifier|static
name|struct
name|iwnstats
modifier|*
name|iwnstats_new
parameter_list|(
specifier|const
name|char
modifier|*
name|ifname
parameter_list|)
block|{
name|struct
name|iwnstats
modifier|*
name|is
decl_stmt|;
name|is
operator|=
name|calloc
argument_list|(
literal|1
argument_list|,
sizeof|sizeof
argument_list|(
expr|struct
name|iwnstats
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|is
operator|==
name|NULL
condition|)
return|return
operator|(
name|NULL
operator|)
return|;
name|is
operator|->
name|s
operator|=
name|socket
argument_list|(
name|AF_INET
argument_list|,
name|SOCK_DGRAM
argument_list|,
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|is
operator|->
name|s
operator|<
literal|0
condition|)
name|err
argument_list|(
literal|1
argument_list|,
literal|"socket"
argument_list|)
expr_stmt|;
name|iwn_setifname
argument_list|(
name|is
argument_list|,
name|ifname
argument_list|)
expr_stmt|;
return|return
operator|(
name|is
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|iwn_stats_phy_print
parameter_list|(
name|struct
name|iwnstats
modifier|*
name|is
parameter_list|,
name|struct
name|iwn_rx_phy_stats
modifier|*
name|rxphy
parameter_list|,
specifier|const
name|char
modifier|*
name|prefix
parameter_list|)
block|{
name|printf
argument_list|(
literal|"%s: %s: ina=%d, fina=%d, bad_plcp=%d, bad_crc32=%d, overrun=%d, eoverrun=%d\n"
argument_list|,
name|__func__
argument_list|,
name|prefix
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|ina
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|fina
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|bad_plcp
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|bad_crc32
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|overrun
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|eoverrun
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: %s: fa=%d, bad_fina_sync=%d, sfd_timeout=%d, fina_timeout=%d, no_rts_ack=%d\n"
argument_list|,
name|__func__
argument_list|,
name|prefix
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|fa
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|bad_fina_sync
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|sfd_timeout
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|fina_timeout
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|no_rts_ack
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: %s: rxe_limit=%d, ack=%d, cts=%d, ba_resp=%d, dsp_kill=%d, bad_mh=%d, rssi_sum=%d\n"
argument_list|,
name|__func__
argument_list|,
name|prefix
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|rxe_limit
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|ack
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|cts
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|ba_resp
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|dsp_kill
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|bad_mh
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|rxphy
operator|->
name|rssi_sum
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|iwn_stats_rx_general_print
parameter_list|(
name|struct
name|iwnstats
modifier|*
name|is
parameter_list|,
name|struct
name|iwn_rx_general_stats
modifier|*
name|g
parameter_list|)
block|{
name|printf
argument_list|(
literal|"%s: bad_cts=%d, bad_ack=%d, not_bss=%d, filtered=%d, bad_chan=%d, beacons=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|bad_cts
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|bad_ack
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|not_bss
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|filtered
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|bad_chan
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|beacons
argument_list|)
argument_list|)
expr_stmt|;
comment|/* XXX it'd be nice to have adc/ina saturated as a % of time */
name|printf
argument_list|(
literal|"%s: missed_beacons=%d, adc_saturated=%d, ina_searched=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|missed_beacons
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|adc_saturated
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|ina_searched
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: noise=[%d, %d, %d] flags=0x%08x, load=%d, fa=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|noise
index|[
literal|0
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|noise
index|[
literal|1
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|noise
index|[
literal|2
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|flags
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|load
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|fa
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: rssi=[%d, %d, %d] energy=[%d %d %d]\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|rssi
index|[
literal|0
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|rssi
index|[
literal|1
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|rssi
index|[
literal|2
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|energy
index|[
literal|0
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|energy
index|[
literal|1
index|]
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|g
operator|->
name|energy
index|[
literal|2
index|]
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|iwn_stats_tx_print
parameter_list|(
name|struct
name|iwnstats
modifier|*
name|is
parameter_list|,
name|struct
name|iwn_tx_stats
modifier|*
name|tx
parameter_list|)
block|{
name|printf
argument_list|(
literal|"%s: preamble=%d, rx_detected=%d, bt_defer=%d, bt_kill=%d, short_len=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|preamble
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|rx_detected
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|bt_defer
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|bt_kill
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|short_len
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: cts_timeout=%d, ack_timeout=%d, exp_ack=%d, ack=%d, msdu=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|cts_timeout
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|ack_timeout
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|exp_ack
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|ack
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|msdu
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: burst_err1=%d, burst_err2=%d, cts_collision=%d, ack_collision=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|burst_err1
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|burst_err2
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|cts_collision
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|ack_collision
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: ba_timeout=%d, ba_resched=%d, query_ampdu=%d, query=%d, query_ampdu_frag=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|ba_timeout
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|ba_resched
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|query_ampdu
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|query
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|query_ampdu_frag
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: query_mismatch=%d, not_ready=%d, underrun=%d, bt_ht_kill=%d, rx_ba_resp=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|query_mismatch
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|not_ready
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|underrun
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|bt_ht_kill
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|tx
operator|->
name|rx_ba_resp
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|iwn_stats_ht_phy_print
parameter_list|(
name|struct
name|iwnstats
modifier|*
name|is
parameter_list|,
name|struct
name|iwn_rx_ht_phy_stats
modifier|*
name|ht
parameter_list|)
block|{
name|printf
argument_list|(
literal|"%s: bad_plcp=%d, overrun=%d, eoverrun=%d, good_crc32=%d, bad_crc32=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|bad_plcp
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|overrun
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|eoverrun
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|good_crc32
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|bad_crc32
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: bad_mh=%d, good_ampdu_crc32=%d, ampdu=%d, fragment=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|bad_plcp
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|good_ampdu_crc32
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|ampdu
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|ht
operator|->
name|fragment
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|iwn_stats_general_print
parameter_list|(
name|struct
name|iwnstats
modifier|*
name|is
parameter_list|,
name|struct
name|iwn_stats
modifier|*
name|stats
parameter_list|)
block|{
comment|/* General */
name|printf
argument_list|(
literal|"%s: temp=%d, temp_m=%d, burst_check=%d, burst=%d, sleep=%d, slot_out=%d, slot_idle=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|temp
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|temp_m
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|burst_check
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|burst
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|sleep
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|slot_out
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|slot_idle
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: slot_out=%d, ttl_tstamp=0x%08x, tx_ant_a=%d, tx_ant_b=%d, exec=%d, probe=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|slot_out
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|ttl_tstamp
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|tx_ant_a
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|tx_ant_b
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|exec
argument_list|)
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|probe
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%s: rx_enabled=%d\n"
argument_list|,
name|__func__
argument_list|,
name|le32toh
argument_list|(
name|stats
operator|->
name|general
operator|.
name|rx_enabled
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|iwn_print
parameter_list|(
name|struct
name|iwnstats
modifier|*
name|is
parameter_list|)
block|{
name|struct
name|iwn_stats
modifier|*
name|s
decl_stmt|;
name|s
operator|=
operator|&
name|is
operator|->
name|st
expr_stmt|;
name|iwn_stats_general_print
argument_list|(
name|is
argument_list|,
name|s
argument_list|)
expr_stmt|;
comment|/* RX */
name|iwn_stats_phy_print
argument_list|(
name|is
argument_list|,
operator|&
name|s
operator|->
name|rx
operator|.
name|ofdm
argument_list|,
literal|"ofdm"
argument_list|)
expr_stmt|;
name|iwn_stats_phy_print
argument_list|(
name|is
argument_list|,
operator|&
name|s
operator|->
name|rx
operator|.
name|cck
argument_list|,
literal|"cck"
argument_list|)
expr_stmt|;
name|iwn_stats_ht_phy_print
argument_list|(
name|is
argument_list|,
operator|&
name|s
operator|->
name|rx
operator|.
name|ht
argument_list|)
expr_stmt|;
name|iwn_stats_rx_general_print
argument_list|(
name|is
argument_list|,
operator|&
name|s
operator|->
name|rx
operator|.
name|general
argument_list|)
expr_stmt|;
comment|/* TX */
name|iwn_stats_tx_print
argument_list|(
name|is
argument_list|,
operator|&
name|s
operator|->
name|tx
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"--\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|usage
parameter_list|(
name|void
parameter_list|)
block|{
name|printf
argument_list|(
literal|"Usage: iwnstats [-h] [-i ifname]\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"    -h:			Help\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"    -i<ifname>:	Use ifname (default %s)\n"
argument_list|,
name|IWN_DEFAULT_IF
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|int
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|char
modifier|*
name|argv
index|[]
parameter_list|)
block|{
name|struct
name|iwnstats
modifier|*
name|is
decl_stmt|;
name|int
name|ch
decl_stmt|;
name|char
modifier|*
name|ifname
decl_stmt|;
name|bool
name|first
decl_stmt|;
name|ifname
operator|=
name|strdup
argument_list|(
name|IWN_DEFAULT_IF
argument_list|)
expr_stmt|;
comment|/* Parse command line arguments */
while|while
condition|(
operator|(
name|ch
operator|=
name|getopt
argument_list|(
name|argc
argument_list|,
name|argv
argument_list|,
literal|"hi:"
argument_list|)
operator|)
operator|!=
operator|-
literal|1
condition|)
block|{
switch|switch
condition|(
name|ch
condition|)
block|{
case|case
literal|'i'
case|:
if|if
condition|(
name|ifname
condition|)
name|free
argument_list|(
name|ifname
argument_list|)
expr_stmt|;
name|ifname
operator|=
name|strdup
argument_list|(
name|optarg
argument_list|)
expr_stmt|;
break|break;
default|default:
case|case
literal|'?'
case|:
case|case
literal|'h'
case|:
name|usage
argument_list|()
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
name|is
operator|=
name|iwnstats_new
argument_list|(
name|ifname
argument_list|)
expr_stmt|;
if|if
condition|(
name|is
operator|==
name|NULL
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: couldn't allocate new stats structure\n"
argument_list|,
name|argv
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|127
argument_list|)
expr_stmt|;
block|}
comment|/* begin fetching data */
name|first
operator|=
name|true
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
if|if
condition|(
name|iwn_collect
argument_list|(
name|is
argument_list|)
operator|!=
literal|0
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: fetch failed\n"
argument_list|,
name|argv
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|first
condition|)
return|return
literal|1
return|;
goto|goto
name|next
goto|;
block|}
name|iwn_print
argument_list|(
name|is
argument_list|)
expr_stmt|;
name|next
label|:
name|usleep
argument_list|(
literal|100
operator|*
literal|1000
argument_list|)
expr_stmt|;
name|first
operator|=
name|false
expr_stmt|;
block|}
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

