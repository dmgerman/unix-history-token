begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_define
define|#
directive|define
name|PLOT
value|006
end_define

begin_comment
comment|/* ack */
end_comment

begin_define
define|#
directive|define
name|BEL
value|007
end_define

begin_comment
comment|/* exit plot mode */
end_comment

begin_define
define|#
directive|define
name|ESC
value|033
end_define

begin_comment
comment|/* escape */
end_comment

begin_define
define|#
directive|define
name|HFWD
value|'9'
end_define

begin_define
define|#
directive|define
name|HREV
value|'8'
end_define

begin_define
define|#
directive|define
name|FREV
value|'7'
end_define

begin_define
define|#
directive|define
name|SO
value|016
end_define

begin_comment
comment|/* shift out - enter greek */
end_comment

begin_define
define|#
directive|define
name|SI
value|017
end_define

begin_comment
comment|/* shift in */
end_comment

begin_define
define|#
directive|define
name|UP
value|013
end_define

begin_define
define|#
directive|define
name|DN
value|012
end_define

begin_define
define|#
directive|define
name|RT
value|' '
end_define

begin_define
define|#
directive|define
name|LF
value|'\b'
end_define

begin_function_decl
name|int
name|restore
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|int
name|svmode
decl_stmt|,
name|mode
index|[
literal|3
index|]
decl_stmt|;
end_decl_stmt

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
name|int
name|c
decl_stmt|,
name|textmode
decl_stmt|;
specifier|extern
name|int
name|fin
decl_stmt|,
name|fout
decl_stmt|;
name|fin
operator|=
name|dup
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|fout
operator|=
name|dup
argument_list|(
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|signal
argument_list|(
literal|2
argument_list|,
literal|1
argument_list|)
operator|&
literal|01
operator|)
operator|==
literal|0
condition|)
name|signal
argument_list|(
literal|2
argument_list|,
operator|&
name|restore
argument_list|)
expr_stmt|;
name|gtty
argument_list|(
literal|1
argument_list|,
name|mode
argument_list|)
expr_stmt|;
name|svmode
operator|=
name|mode
index|[
literal|2
index|]
expr_stmt|;
name|mode
index|[
literal|2
index|]
operator|=
operator|&
literal|0777757
expr_stmt|;
comment|/* turn off cr-lf  */
name|mode
index|[
literal|2
index|]
operator|=
operator||
literal|03
expr_stmt|;
comment|/* turn off delays, tabs */
name|stty
argument_list|(
literal|1
argument_list|,
name|mode
argument_list|)
expr_stmt|;
name|textmode
operator|=
literal|1
expr_stmt|;
while|while
condition|(
operator|(
name|c
operator|=
name|getchar
argument_list|()
operator|)
operator|!=
literal|'\0'
condition|)
block|{
if|if
condition|(
name|c
operator|==
name|SO
condition|)
block|{
name|special
argument_list|()
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|c
operator|==
name|PLOT
condition|)
name|textmode
operator|=
literal|1
operator|-
name|textmode
expr_stmt|;
if|if
condition|(
name|c
operator|==
name|BEL
condition|)
name|textmode
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|c
operator|==
literal|'\n'
operator|&&
name|textmode
condition|)
name|putchar
argument_list|(
literal|015
argument_list|)
expr_stmt|;
comment|/* CR */
if|if
condition|(
name|c
operator|!=
name|ESC
condition|)
block|{
name|putchar
argument_list|(
name|c
argument_list|)
expr_stmt|;
continue|continue;
block|}
name|putchar
argument_list|(
name|PLOT
argument_list|)
expr_stmt|;
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|c
operator|==
name|HREV
condition|)
name|nplot
argument_list|(
literal|4
argument_list|,
name|UP
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|c
operator|==
name|HFWD
condition|)
name|nplot
argument_list|(
literal|4
argument_list|,
name|DN
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|c
operator|==
name|FREV
condition|)
name|nplot
argument_list|(
literal|8
argument_list|,
name|UP
argument_list|)
expr_stmt|;
name|putchar
argument_list|(
name|PLOT
argument_list|)
expr_stmt|;
block|}
name|flush
argument_list|()
expr_stmt|;
name|restore
argument_list|()
expr_stmt|;
block|}
end_function

begin_macro
name|restore
argument_list|()
end_macro

begin_block
block|{
name|mode
index|[
literal|2
index|]
operator|=
name|svmode
expr_stmt|;
name|stty
argument_list|(
literal|1
argument_list|,
name|mode
argument_list|)
expr_stmt|;
name|exit
argument_list|()
expr_stmt|;
block|}
end_block

begin_decl_stmt
name|int
name|tab
index|[]
block|{
literal|'A'
operator|,
comment|/* alpha */
literal|'B'
operator|,
comment|/* beta */
literal|'D'
operator|,
comment|/* delta */
literal|'W'
operator|,
comment|/* DELTA */
literal|'S'
operator|,
comment|/* epsilon */
literal|'N'
operator|,
comment|/* eta */
literal|'\\'
operator|,
comment|/* gamma */
literal|'G'
operator|,
comment|/* GAMMA */
literal|'o'
operator|,
comment|/* infinity - not in M37 */
literal|'^'
operator|,
comment|/* integral */
literal|'L'
operator|,
comment|/* lambda */
literal|'E'
operator|,
comment|/* LAMBDA */
literal|'M'
operator|,
comment|/* mu */
literal|'['
operator|,
comment|/* nabla (del) */
literal|'_'
operator|,
comment|/* not */
literal|'@'
operator|,
comment|/* nu */
literal|'C'
operator|,
comment|/* omega */
literal|'Z'
operator|,
comment|/* OMEGA */
literal|']'
operator|,
comment|/* partial */
literal|'U'
operator|,
comment|/* phi */
literal|'F'
operator|,
comment|/* PHI */
literal|'V'
operator|,
comment|/* psi */
literal|'H'
operator|,
comment|/* PSI */
literal|'J'
operator|,
comment|/* pi */
literal|'P'
operator|,
comment|/* PI */
literal|'K'
operator|,
comment|/* rho */
literal|'Y'
operator|,
comment|/* sigma */
literal|'R'
operator|,
comment|/* SIGMA */
literal|'I'
operator|,
comment|/* tau */
literal|'T'
operator|,
comment|/* theta */
literal|'O'
operator|,
comment|/* THETA */
literal|'X'
operator|,
comment|/* xi */
literal|'Q'
operator|,
comment|/* zeta */
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|trans
index|[]
block|{
name|alpha
operator|,
name|beta
operator|,
name|delta
operator|,
name|DELTA
operator|,
name|epsilon
operator|,
name|eta
operator|,
name|gamma
operator|,
name|GAMMA
operator|,
name|infinity
operator|,
name|integral
operator|,
name|lambda
operator|,
name|LAMBDA
operator|,
name|mu
operator|,
name|nabla
operator|,
name|not
operator|,
name|nu
operator|,
name|omega
operator|,
name|OMEGA
operator|,
name|partial
operator|,
name|phi
operator|,
name|PHI
operator|,
name|psi
operator|,
name|PSI
operator|,
name|pi
operator|,
name|PI
operator|,
name|rho
operator|,
name|sigma
operator|,
name|SIGMA
operator|,
name|tau
operator|,
name|theta
operator|,
name|THETA
operator|,
name|xi
operator|,
name|zeta
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|alpha
index|[]
block|{
name|LF
operator|,
literal|'c'
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'('
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|beta
index|[]
block|{
literal|'B'
operator|,
name|LF
operator|,
name|LF
operator|,
name|DN
operator|,
name|DN
operator|,
literal|'|'
operator|,
name|RT
operator|,
name|RT
operator|,
name|UP
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|delta
index|[]
block|{
literal|'o'
operator|,
name|UP
operator|,
name|UP
operator|,
literal|'<'
operator|,
name|DN
operator|,
name|DN
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|DELTA
index|[]
block|{
name|LF
operator|,
name|LF
operator|,
literal|'/'
operator|,
operator|-
literal|3
operator|,
name|DN
operator|,
literal|'-'
operator|,
operator|-
literal|4
operator|,
name|RT
operator|,
literal|'-'
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|'\\'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|epsilon
index|[]
block|{
literal|'<'
operator|,
literal|'-'
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|eta
index|[]
block|{
literal|'n'
operator|,
name|RT
operator|,
name|RT
operator|,
name|DN
operator|,
name|DN
operator|,
literal|'|'
operator|,
name|LF
operator|,
name|LF
operator|,
name|UP
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|gamma
index|[]
block|{
literal|')'
operator|,
name|RT
operator|,
literal|'/'
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|GAMMA
index|[]
block|{
name|LF
operator|,
name|LF
operator|,
literal|'|'
operator|,
name|RT
operator|,
name|RT
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|'-'
operator|,
operator|-
literal|3
operator|,
name|DN
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'`'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|infinity
index|[]
block|{
name|LF
operator|,
name|LF
operator|,
literal|'c'
operator|,
operator|-
literal|4
operator|,
name|RT
operator|,
literal|'o'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|integral
index|[]
block|{
literal|'|'
operator|,
literal|'\''
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'`'
operator|,
operator|-
literal|3
operator|,
name|LF
operator|,
operator|-
literal|6
operator|,
name|DN
operator|,
literal|'\''
operator|,
name|LF
operator|,
literal|'`'
operator|,
name|RT
operator|,
name|RT
operator|,
operator|-
literal|6
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|lambda
index|[]
block|{
literal|'\\'
operator|,
operator|-
literal|4
operator|,
name|DN
operator|,
name|LF
operator|,
literal|'\''
operator|,
name|DN
operator|,
name|LF
operator|,
literal|'\''
operator|,
operator|-
literal|5
operator|,
name|UP
operator|,
name|RT
operator|,
name|RT
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|LAMBDA
index|[]
block|{
name|LF
operator|,
name|LF
operator|,
literal|'/'
operator|,
operator|-
literal|4
operator|,
name|RT
operator|,
literal|'\\'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|mu
index|[]
block|{
literal|'u'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|','
operator|,
name|RT
operator|,
name|RT
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|nabla
index|[]
block|{
name|LF
operator|,
name|LF
operator|,
literal|'\\'
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|'-'
operator|,
operator|-
literal|4
operator|,
name|RT
operator|,
literal|'-'
operator|,
operator|-
literal|3
operator|,
name|DN
operator|,
literal|'/'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|not
index|[]
block|{
literal|'-'
operator|,
operator|-
literal|2
operator|,
name|RT
operator|,
name|UP
operator|,
literal|','
operator|,
name|DN
operator|,
operator|-
literal|2
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|nu
index|[]
block|{
name|LF
operator|,
literal|'('
operator|,
operator|-
literal|3
operator|,
name|RT
operator|,
literal|'/'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|omega
index|[]
block|{
name|LF
operator|,
literal|'u'
operator|,
operator|-
literal|3
operator|,
name|RT
operator|,
literal|'u'
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|OMEGA
index|[]
block|{
literal|'O'
operator|,
name|DN
operator|,
name|DN
operator|,
name|LF
operator|,
literal|'-'
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'-'
operator|,
name|LF
operator|,
name|UP
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|partial
index|[]
block|{
literal|'o'
operator|,
name|RT
operator|,
name|DN
operator|,
literal|'`'
operator|,
name|LF
operator|,
name|UP
operator|,
literal|'`'
operator|,
name|LF
operator|,
name|UP
operator|,
literal|'`'
operator|,
name|RT
operator|,
name|DN
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|phi
index|[]
block|{
literal|'o'
operator|,
literal|'/'
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|PHI
index|[]
block|{
literal|'o'
operator|,
literal|'['
operator|,
literal|']'
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|psi
index|[]
block|{
literal|'/'
operator|,
literal|'-'
operator|,
name|DN
operator|,
name|DN
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'\''
operator|,
operator|-
literal|4
operator|,
name|LF
operator|,
literal|'\''
operator|,
name|RT
operator|,
name|RT
operator|,
name|UP
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|PSI
index|[]
block|{
literal|'['
operator|,
literal|']'
operator|,
literal|'-'
operator|,
name|DN
operator|,
name|DN
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'\''
operator|,
operator|-
literal|4
operator|,
name|LF
operator|,
literal|'`'
operator|,
name|RT
operator|,
name|RT
operator|,
name|UP
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|pi
index|[]
block|{
name|UP
operator|,
literal|'-'
operator|,
operator|-
literal|3
operator|,
name|DN
operator|,
literal|'"'
operator|,
name|DN
operator|,
literal|'"'
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|PI
index|[]
block|{
name|LF
operator|,
name|LF
operator|,
literal|'['
operator|,
literal|']'
operator|,
operator|-
literal|4
operator|,
name|RT
operator|,
literal|'['
operator|,
literal|']'
operator|,
name|LF
operator|,
name|LF
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|'-'
operator|,
operator|-
literal|3
operator|,
name|DN
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|rho
index|[]
block|{
literal|'o'
operator|,
name|LF
operator|,
name|LF
operator|,
name|DN
operator|,
name|DN
operator|,
literal|'|'
operator|,
name|UP
operator|,
name|UP
operator|,
name|RT
operator|,
name|RT
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|sigma
index|[]
block|{
literal|'o'
operator|,
name|DN
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'~'
operator|,
name|UP
operator|,
name|LF
operator|,
name|LF
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|SIGMA
index|[]
block|{
literal|'>'
operator|,
operator|-
literal|2
operator|,
name|DN
operator|,
literal|'-'
operator|,
operator|-
literal|5
operator|,
name|UP
operator|,
literal|'-'
operator|,
operator|-
literal|3
operator|,
name|DN
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|tau
index|[]
block|{
literal|'t'
operator|,
name|DN
operator|,
name|RT
operator|,
name|RT
operator|,
literal|'~'
operator|,
name|LF
operator|,
name|LF
operator|,
name|LF
operator|,
literal|'~'
operator|,
name|RT
operator|,
name|UP
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|theta
index|[]
block|{
literal|'O'
operator|,
literal|'-'
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|THETA
index|[]
block|{
literal|'O'
operator|,
literal|'='
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|xi
index|[]
block|{
literal|'c'
operator|,
name|RT
operator|,
name|DN
operator|,
literal|','
operator|,
name|LF
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|'c'
operator|,
name|LF
operator|,
name|DN
operator|,
literal|'`'
operator|,
name|RT
operator|,
name|DN
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_decl_stmt
name|int
name|zeta
index|[]
block|{
literal|'c'
operator|,
name|RT
operator|,
name|DN
operator|,
literal|','
operator|,
name|LF
operator|,
operator|-
literal|3
operator|,
name|UP
operator|,
literal|'<'
operator|,
name|DN
operator|,
name|DN
operator|,
literal|0
block|}
end_decl_stmt

begin_empty_stmt
empty_stmt|;
end_empty_stmt

begin_macro
name|special
argument_list|()
end_macro

begin_block
block|{
name|int
name|c
decl_stmt|,
name|i
decl_stmt|,
name|j
decl_stmt|,
name|t
decl_stmt|;
name|loop
label|:
if|if
condition|(
operator|(
name|c
operator|=
name|getchar
argument_list|()
operator|)
operator|==
name|SI
condition|)
return|return;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|tab
index|[
name|i
index|]
operator|!=
literal|0
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|c
operator|==
name|tab
index|[
name|i
index|]
condition|)
block|{
name|plot
argument_list|(
name|trans
index|[
name|i
index|]
argument_list|)
expr_stmt|;
goto|goto
name|loop
goto|;
block|}
name|putchar
argument_list|(
name|c
argument_list|)
expr_stmt|;
goto|goto
name|loop
goto|;
block|}
end_block

begin_macro
name|plot
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|int
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|int
name|i
decl_stmt|,
name|c
decl_stmt|;
name|putchar
argument_list|(
name|PLOT
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
operator|(
name|c
operator|=
name|s
index|[
name|i
index|]
operator|)
operator|!=
literal|0
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|c
operator|<
literal|0
condition|)
name|nplot
argument_list|(
operator|-
name|c
argument_list|,
name|s
index|[
operator|++
name|i
index|]
argument_list|)
expr_stmt|;
else|else
name|putchar
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|putchar
argument_list|(
name|PLOT
argument_list|)
expr_stmt|;
name|putchar
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|nplot
argument_list|(
argument|n
argument_list|,
argument|c
argument_list|)
end_macro

begin_decl_stmt
name|int
name|n
decl_stmt|,
name|c
decl_stmt|;
end_decl_stmt

begin_block
block|{
while|while
condition|(
name|n
operator|--
condition|)
name|putchar
argument_list|(
name|c
argument_list|)
expr_stmt|;
block|}
end_block

end_unit

