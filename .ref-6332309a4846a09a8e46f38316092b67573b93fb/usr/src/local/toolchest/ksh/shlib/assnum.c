begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*   *      Copyright (c) 1984, 1985, 1986 AT&T  *      All Rights Reserved   *      THIS IS UNPUBLISHED PROPRIETARY SOURCE   *      CODE OF AT&T.  *      The copyright notice above does not   *      evidence any actual or intended  *      publication of such source code.   */
end_comment

begin_comment
comment|/* @(#)assnum.c	1.1 */
end_comment

begin_comment
comment|/*  *   ASSNUM.C  *  *   Programmer:  D. G. Korn  *  *        Owner:  D. A. Lambeth  *  *         Date:  April 17, 1980  *  *  *  *  *   ASSCADR (NODE, CHARP)  *  *        Assign the string address CHARP to the Namnod given  *        by node.  *  *   ASSLONG (NODE, NUM)  *  *        Assign the long integer NUM to NODE.  NODE should have  *        the L_FLAG and INT_GER attributes.  *  *  *  *   See Also:  assign(III), unassign(III), valup(III), ltos(III)  */
end_comment

begin_include
include|#
directive|include
file|"name.h"
end_include

begin_include
include|#
directive|include
file|"flags.h"
end_include

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|ltos
argument_list|()
decl_stmt|,
modifier|*
name|malloc
argument_list|()
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|NAME_SCOPE
end_ifdef

begin_function_decl
specifier|extern
name|struct
name|Namnod
modifier|*
name|copy_nod
parameter_list|()
function_decl|;
end_function_decl

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
specifier|extern
name|union
name|Namval
modifier|*
name|aget_up
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|void
name|assign
parameter_list|()
function_decl|;
end_function_decl

begin_comment
comment|/*  *   ASSCADR (NODE, CHARP)  *  *        struct Namnod *NODE;  *  *        char *CHARP;  *  *   Assign the string address CHARP to the Namnod given by NODE.  *   The attributes of NODE are neither inspected nor altered.  *   Thus, to guarantee success, NODE should have the N_DEFAULT  *   value-determining attribute.  *   The following code has been replaced by a macro in name.h.  asscadr(node,charp) struct Namnod *node; char *charp; { 	node->value.namval.cp = charp; }  */
end_comment

begin_comment
comment|/*  *   ASSLONG (NODE, NUM)  *  *        struct Namnod *NODE;  *  *        int NUM;  *  *   Assign the value NUM to the Namnod given by NODE.  All   *   appropriate conversions are made.  */
end_comment

begin_macro
name|asslong
argument_list|(
argument|node
argument_list|,
argument|num
argument_list|)
end_macro

begin_decl_stmt
name|struct
name|Namnod
modifier|*
name|node
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|long
name|num
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|struct
name|Namnod
modifier|*
name|np
init|=
name|node
decl_stmt|;
specifier|register
name|union
name|Namval
modifier|*
name|up
init|=
operator|&
name|np
operator|->
name|value
operator|.
name|namval
decl_stmt|;
if|if
condition|(
name|attest
argument_list|(
name|np
argument_list|,
name|INT_GER
argument_list|)
condition|)
block|{
if|if
condition|(
name|attest
argument_list|(
name|np
argument_list|,
name|ARRAY
argument_list|)
condition|)
name|up
operator|=
name|aget_up
argument_list|(
name|np
argument_list|,
name|up
argument_list|)
expr_stmt|;
ifdef|#
directive|ifdef
name|NAME_SCOPE
if|if
condition|(
name|attest
argument_list|(
name|np
argument_list|,
name|C_WRITE
argument_list|)
condition|)
name|np
operator|=
name|copy_nod
argument_list|(
name|np
argument_list|,
literal|1
argument_list|)
expr_stmt|;
endif|#
directive|endif
comment|/* NAME_SCOPE */
if|if
condition|(
name|attest
argument_list|(
name|np
argument_list|,
name|IN_DIR
argument_list|)
condition|)
name|up
operator|=
name|up
operator|->
name|up
expr_stmt|;
if|if
condition|(
name|attest
argument_list|(
name|np
argument_list|,
name|BLT_NOD
argument_list|)
condition|)
call|(
modifier|*
name|up
operator|->
name|fp
operator|->
name|f_ap
call|)
argument_list|(
operator|(
name|unsigned
operator|)
name|num
argument_list|)
expr_stmt|;
else|else
block|{
if|if
condition|(
name|up
operator|->
name|lp
operator|==
literal|0
condition|)
name|up
operator|->
name|lp
operator|=
operator|(
name|long
operator|*
operator|)
name|malloc
argument_list|(
operator|(
name|unsigned
operator|)
sizeof|sizeof
argument_list|(
name|long
argument_list|)
argument_list|)
expr_stmt|;
operator|*
operator|(
name|up
operator|->
name|lp
operator|)
operator|=
name|num
expr_stmt|;
if|if
condition|(
name|np
operator|->
name|namsz
operator|==
literal|0
condition|)
name|np
operator|->
name|namsz
operator|=
name|lastbase
expr_stmt|;
block|}
block|}
else|else
name|assign
argument_list|(
name|np
argument_list|,
name|ltos
argument_list|(
name|num
argument_list|,
literal|10
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_block

end_unit

