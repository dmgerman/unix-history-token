begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|sccsid
index|[]
init|=
literal|"@(#)n6.c	1.1	(CWI)	86/08/14"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|"tdef.h"
end_include

begin_include
include|#
directive|include
file|"tw.h"
end_include

begin_include
include|#
directive|include
file|"ext.h"
end_include

begin_include
include|#
directive|include
file|<ctype.h>
end_include

begin_comment
comment|/*  * n6.c -- width functions, sizes and fonts */
end_comment

begin_decl_stmt
name|int
name|bdtab
index|[
name|NFONT
operator|+
literal|1
index|]
init|=
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|3
block|,
literal|3
block|,
literal|0
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|sbold
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|fontlab
index|[
name|NFONT
operator|+
literal|1
index|]
init|=
block|{
literal|0
block|,
literal|'R'
block|,
literal|'I'
block|,
literal|'B'
block|,
name|PAIR
argument_list|(
literal|'B'
argument_list|,
literal|'I'
argument_list|)
block|,
literal|'S'
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_expr_stmt
name|width
argument_list|(
name|j
argument_list|)
specifier|register
name|tchar
name|j
expr_stmt|;
end_expr_stmt

begin_block
block|{
specifier|register
name|i
operator|,
name|k
expr_stmt|;
if|if
condition|(
name|j
operator|&
operator|(
name|ZBIT
operator||
name|MOT
operator|)
condition|)
block|{
if|if
condition|(
name|iszbit
argument_list|(
name|j
argument_list|)
condition|)
return|return
operator|(
literal|0
operator|)
return|;
if|if
condition|(
name|isvmot
argument_list|(
name|j
argument_list|)
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|k
operator|=
name|absmot
argument_list|(
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|isnmot
argument_list|(
name|j
argument_list|)
condition|)
name|k
operator|=
operator|-
name|k
expr_stmt|;
return|return
operator|(
name|k
operator|)
return|;
block|}
name|i
operator|=
name|cbits
argument_list|(
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|i
operator|<
literal|' '
condition|)
block|{
if|if
condition|(
name|i
operator|==
literal|'\b'
condition|)
return|return
operator|(
operator|-
name|widthp
operator|)
return|;
if|if
condition|(
name|i
operator|==
name|PRESC
condition|)
name|i
operator|=
name|eschar
expr_stmt|;
elseif|else
if|if
condition|(
name|iscontrol
argument_list|(
name|i
argument_list|)
condition|)
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|i
operator|==
name|ohc
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|i
operator|=
name|trtab
index|[
name|i
index|]
expr_stmt|;
if|if
condition|(
name|i
operator|<
literal|32
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|k
operator|=
name|t
operator|.
name|width
index|[
name|i
index|]
operator|*
name|t
operator|.
name|Char
expr_stmt|;
name|widthp
operator|=
name|k
expr_stmt|;
return|return
operator|(
name|k
operator|)
return|;
block|}
end_block

begin_function
name|tchar
name|setch
parameter_list|()
block|{
specifier|register
name|j
expr_stmt|;
name|char
name|temp
index|[
literal|10
index|]
decl_stmt|;
specifier|register
name|char
modifier|*
name|s
decl_stmt|;
name|s
operator|=
name|temp
expr_stmt|;
if|if
condition|(
operator|(
operator|*
name|s
operator|++
operator|=
name|getach
argument_list|()
operator|)
operator|==
literal|0
operator|||
operator|(
operator|*
name|s
operator|++
operator|=
name|getach
argument_list|()
operator|)
operator|==
literal|0
condition|)
return|return
operator|(
literal|0
operator|)
return|;
operator|*
name|s
operator|=
literal|'\0'
expr_stmt|;
if|if
condition|(
operator|(
name|j
operator|=
name|findch
argument_list|(
name|temp
argument_list|)
operator|)
operator|>
literal|0
condition|)
return|return
name|j
operator||
name|chbits
return|;
else|else
return|return
literal|0
return|;
block|}
end_function

begin_function
name|tchar
name|setabs
parameter_list|()
comment|/* set absolute char from \C'...' */
block|{
comment|/* for now, a no-op */
name|int
name|i
decl_stmt|,
name|n
decl_stmt|,
name|nf
decl_stmt|;
name|getch
argument_list|()
expr_stmt|;
name|n
operator|=
literal|0
expr_stmt|;
name|n
operator|=
name|inumb
argument_list|(
operator|&
name|n
argument_list|)
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
return|return
literal|' '
return|;
block|}
end_function

begin_expr_stmt
name|findft
argument_list|(
name|i
argument_list|)
specifier|register
name|int
name|i
expr_stmt|;
end_expr_stmt

begin_block
block|{
specifier|register
name|k
expr_stmt|;
if|if
condition|(
operator|(
name|k
operator|=
name|i
operator|-
literal|'0'
operator|)
operator|>=
literal|0
operator|&&
name|k
operator|<=
name|nfonts
operator|&&
name|k
operator|<
name|smnt
condition|)
return|return
operator|(
name|k
operator|)
return|;
for|for
control|(
name|k
operator|=
literal|0
init|;
name|fontlab
index|[
name|k
index|]
operator|!=
name|i
condition|;
name|k
operator|++
control|)
if|if
condition|(
name|k
operator|>
name|nfonts
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
return|return
operator|(
name|k
operator|)
return|;
block|}
end_block

begin_macro
name|caseps
argument_list|()
end_macro

begin_block
block|{ }
end_block

begin_macro
name|mchbits
argument_list|()
end_macro

begin_block
block|{
name|chbits
operator|=
literal|0
expr_stmt|;
name|setfbits
argument_list|(
name|chbits
argument_list|,
name|font
argument_list|)
expr_stmt|;
name|sps
operator|=
name|width
argument_list|(
literal|' '
operator||
name|chbits
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|setps
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|i
operator|,
name|j
expr_stmt|;
name|i
operator|=
name|cbits
argument_list|(
name|getch
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|isdigit
argument_list|(
name|i
argument_list|)
condition|)
block|{
comment|/* \sd or \sdd */
name|i
operator|-=
literal|'0'
expr_stmt|;
if|if
condition|(
name|i
operator|==
literal|0
condition|)
comment|/* \s0 */
empty_stmt|;
elseif|else
if|if
condition|(
name|i
operator|<=
literal|3
operator|&&
name|isdigit
argument_list|(
name|j
operator|=
name|cbits
argument_list|(
name|ch
operator|=
name|getch
argument_list|()
argument_list|)
argument_list|)
condition|)
block|{
comment|/* \sdd */
name|ch
operator|=
literal|0
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|i
operator|==
literal|'('
condition|)
block|{
comment|/* \s(dd */
name|getch
argument_list|()
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|i
operator|==
literal|'+'
operator|||
name|i
operator|==
literal|'-'
condition|)
block|{
comment|/* \s+, \s- */
name|j
operator|=
name|cbits
argument_list|(
name|getch
argument_list|()
argument_list|)
expr_stmt|;
if|if
condition|(
name|isdigit
argument_list|(
name|j
argument_list|)
condition|)
block|{
comment|/* \s+d, \s-d */
empty_stmt|;
block|}
elseif|else
if|if
condition|(
name|j
operator|==
literal|'('
condition|)
block|{
comment|/* \s+(dd, \s-(dd */
name|getch
argument_list|()
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
block|}
block|}
block|}
end_block

begin_macro
name|oldsetps
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|,
name|j
decl_stmt|,
name|k
decl_stmt|;
if|if
condition|(
operator|(
operator|(
name|i
operator|=
name|cbits
argument_list|(
name|getch
argument_list|()
argument_list|)
operator|)
operator|==
literal|'+'
operator|||
name|i
operator|==
literal|'-'
operator|)
operator|&&
operator|(
name|j
operator|=
name|cbits
argument_list|(
name|ch
operator|=
name|getch
argument_list|()
argument_list|)
operator|-
literal|'0'
operator|)
operator|>=
literal|0
operator|&&
name|j
operator|<=
literal|9
condition|)
block|{
if|if
condition|(
name|i
operator|==
literal|'-'
condition|)
name|j
operator|=
operator|-
name|j
expr_stmt|;
name|ch
operator|=
literal|0
expr_stmt|;
return|return;
block|}
if|if
condition|(
operator|(
name|i
operator|-=
literal|'0'
operator|)
operator|==
literal|0
condition|)
block|{
return|return;
block|}
if|if
condition|(
name|i
operator|>
literal|0
operator|&&
name|i
operator|<=
literal|9
condition|)
block|{
comment|/* removed if (i<= 3&& */
comment|/* didn't work!!!! */
if|if
condition|(
name|i
operator|<=
literal|3
operator|&&
operator|(
name|j
operator|=
name|cbits
argument_list|(
name|ch
operator|=
name|getch
argument_list|()
argument_list|)
operator|-
literal|'0'
operator|)
operator|>=
literal|0
operator|&&
name|j
operator|<=
literal|9
condition|)
block|{
name|i
operator|=
literal|10
operator|*
name|i
operator|+
name|j
expr_stmt|;
name|ch
operator|=
literal|0
expr_stmt|;
block|}
block|}
block|}
end_block

begin_function
name|tchar
name|setht
parameter_list|()
comment|/* set character height from \H'...' */
block|{
name|int
name|n
decl_stmt|;
name|tchar
name|c
decl_stmt|;
name|getch
argument_list|()
expr_stmt|;
name|n
operator|=
name|inumb
argument_list|(
operator|&
name|apts
argument_list|)
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
name|tchar
name|setslant
parameter_list|()
comment|/* set slant from \S'...' */
block|{
name|int
name|n
decl_stmt|;
name|tchar
name|c
decl_stmt|;
name|getch
argument_list|()
expr_stmt|;
name|n
operator|=
literal|0
expr_stmt|;
name|n
operator|=
name|inumb
argument_list|(
operator|&
name|n
argument_list|)
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_macro
name|caseft
argument_list|()
end_macro

begin_block
block|{
name|skip
argument_list|()
expr_stmt|;
name|setfont
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|setfont
argument_list|(
argument|a
argument_list|)
end_macro

begin_decl_stmt
name|int
name|a
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|i
operator|,
name|j
expr_stmt|;
if|if
condition|(
name|a
condition|)
name|i
operator|=
name|getrq
argument_list|()
expr_stmt|;
else|else
name|i
operator|=
name|getsn
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|i
operator|||
name|i
operator|==
literal|'P'
condition|)
block|{
name|j
operator|=
name|font1
expr_stmt|;
goto|goto
name|s0
goto|;
block|}
if|if
condition|(
name|i
operator|==
literal|'S'
operator|||
name|i
operator|==
literal|'0'
condition|)
return|return;
if|if
condition|(
operator|(
name|j
operator|=
name|findft
argument_list|(
name|i
argument_list|,
name|fontlab
argument_list|)
operator|)
operator|==
operator|-
literal|1
condition|)
return|return;
name|s0
label|:
name|font1
operator|=
name|font
expr_stmt|;
name|font
operator|=
name|j
expr_stmt|;
name|mchbits
argument_list|()
expr_stmt|;
block|}
end_block

begin_macro
name|setwd
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|base
operator|,
name|wid
expr_stmt|;
specifier|register
name|tchar
name|i
decl_stmt|;
name|int
name|delim
decl_stmt|,
name|emsz
decl_stmt|,
name|k
decl_stmt|;
name|int
name|savhp
decl_stmt|,
name|savapts
decl_stmt|,
name|savapts1
decl_stmt|,
name|savfont
decl_stmt|,
name|savfont1
decl_stmt|,
name|savpts
decl_stmt|,
name|savpts1
decl_stmt|;
name|base
operator|=
name|numtab
index|[
name|ST
index|]
operator|.
name|val
operator|=
name|numtab
index|[
name|ST
index|]
operator|.
name|val
operator|=
name|wid
operator|=
name|numtab
index|[
name|CT
index|]
operator|.
name|val
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|ismot
argument_list|(
name|i
operator|=
name|getch
argument_list|()
argument_list|)
condition|)
return|return;
name|delim
operator|=
name|cbits
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|savhp
operator|=
name|numtab
index|[
name|HP
index|]
operator|.
name|val
expr_stmt|;
name|numtab
index|[
name|HP
index|]
operator|.
name|val
operator|=
literal|0
expr_stmt|;
name|savapts
operator|=
name|apts
expr_stmt|;
name|savapts1
operator|=
name|apts1
expr_stmt|;
name|savfont
operator|=
name|font
expr_stmt|;
name|savfont1
operator|=
name|font1
expr_stmt|;
name|savpts
operator|=
name|pts
expr_stmt|;
name|savpts1
operator|=
name|pts1
expr_stmt|;
name|setwdf
operator|++
expr_stmt|;
while|while
condition|(
name|cbits
argument_list|(
name|i
operator|=
name|getch
argument_list|()
argument_list|)
operator|!=
name|delim
operator|&&
operator|!
name|nlflg
condition|)
block|{
name|k
operator|=
name|width
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|wid
operator|+=
name|k
expr_stmt|;
name|numtab
index|[
name|HP
index|]
operator|.
name|val
operator|+=
name|k
expr_stmt|;
if|if
condition|(
operator|!
name|ismot
argument_list|(
name|i
argument_list|)
condition|)
block|{
name|emsz
operator|=
operator|(
name|INCH
operator|*
name|pts
operator|+
literal|36
operator|)
operator|/
literal|72
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|isvmot
argument_list|(
name|i
argument_list|)
condition|)
block|{
name|k
operator|=
name|absmot
argument_list|(
name|i
argument_list|)
expr_stmt|;
if|if
condition|(
name|isnmot
argument_list|(
name|i
argument_list|)
condition|)
name|k
operator|=
operator|-
name|k
expr_stmt|;
name|base
operator|-=
name|k
expr_stmt|;
name|emsz
operator|=
literal|0
expr_stmt|;
block|}
else|else
continue|continue;
if|if
condition|(
name|base
operator|<
name|numtab
index|[
name|SB
index|]
operator|.
name|val
condition|)
name|numtab
index|[
name|SB
index|]
operator|.
name|val
operator|=
name|base
expr_stmt|;
if|if
condition|(
operator|(
name|k
operator|=
name|base
operator|+
name|emsz
operator|)
operator|>
name|numtab
index|[
name|ST
index|]
operator|.
name|val
condition|)
name|numtab
index|[
name|ST
index|]
operator|.
name|val
operator|=
name|k
expr_stmt|;
block|}
name|setn1
argument_list|(
name|wid
argument_list|,
literal|0
argument_list|,
operator|(
name|tchar
operator|)
literal|0
argument_list|)
expr_stmt|;
name|numtab
index|[
name|HP
index|]
operator|.
name|val
operator|=
name|savhp
expr_stmt|;
name|apts
operator|=
name|savapts
expr_stmt|;
name|apts1
operator|=
name|savapts1
expr_stmt|;
name|font
operator|=
name|savfont
expr_stmt|;
name|font1
operator|=
name|savfont1
expr_stmt|;
name|pts
operator|=
name|savpts
expr_stmt|;
name|pts1
operator|=
name|savpts1
expr_stmt|;
name|mchbits
argument_list|()
expr_stmt|;
name|setwdf
operator|=
literal|0
expr_stmt|;
block|}
end_block

begin_function
name|tchar
name|vmot
parameter_list|()
block|{
name|dfact
operator|=
name|lss
expr_stmt|;
name|vflag
operator|++
expr_stmt|;
return|return
operator|(
name|mot
argument_list|()
operator|)
return|;
block|}
end_function

begin_function
name|tchar
name|hmot
parameter_list|()
block|{
name|dfact
operator|=
name|EM
expr_stmt|;
return|return
operator|(
name|mot
argument_list|()
operator|)
return|;
block|}
end_function

begin_function
name|tchar
name|mot
parameter_list|()
block|{
specifier|register
name|int
name|j
decl_stmt|,
name|n
decl_stmt|;
specifier|register
name|tchar
name|i
decl_stmt|;
name|j
operator|=
name|HOR
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
comment|/*eat delim*/
if|if
condition|(
name|n
operator|=
operator|(
name|int
operator|)
name|atoi0
argument_list|()
condition|)
block|{
if|if
condition|(
name|vflag
condition|)
name|j
operator|=
name|VERT
expr_stmt|;
name|i
operator|=
name|makem
argument_list|(
name|quant
argument_list|(
name|n
argument_list|,
name|j
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
name|i
operator|=
literal|0
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
name|vflag
operator|=
literal|0
expr_stmt|;
name|dfact
operator|=
literal|1
expr_stmt|;
return|return
operator|(
name|i
operator|)
return|;
block|}
end_function

begin_function
name|tchar
name|sethl
parameter_list|(
name|k
parameter_list|)
name|int
name|k
decl_stmt|;
block|{
specifier|register
name|j
expr_stmt|;
name|tchar
name|i
decl_stmt|;
name|j
operator|=
name|t
operator|.
name|Halfline
expr_stmt|;
if|if
condition|(
name|k
operator|==
literal|'u'
condition|)
name|j
operator|=
operator|-
name|j
expr_stmt|;
elseif|else
if|if
condition|(
name|k
operator|==
literal|'r'
condition|)
name|j
operator|=
operator|-
literal|2
operator|*
name|j
expr_stmt|;
name|vflag
operator|++
expr_stmt|;
name|i
operator|=
name|makem
argument_list|(
name|j
argument_list|)
expr_stmt|;
name|vflag
operator|=
literal|0
expr_stmt|;
return|return
operator|(
name|i
operator|)
return|;
block|}
end_function

begin_function
name|tchar
name|makem
parameter_list|(
name|i
parameter_list|)
name|int
name|i
decl_stmt|;
block|{
specifier|register
name|tchar
name|j
decl_stmt|;
if|if
condition|(
operator|(
name|j
operator|=
name|i
operator|)
operator|<
literal|0
condition|)
name|j
operator|=
operator|-
name|j
expr_stmt|;
name|j
operator||=
name|MOT
expr_stmt|;
if|if
condition|(
name|i
operator|<
literal|0
condition|)
name|j
operator||=
name|NMOT
expr_stmt|;
if|if
condition|(
name|vflag
condition|)
name|j
operator||=
name|VMOT
expr_stmt|;
return|return
operator|(
name|j
operator|)
return|;
block|}
end_function

begin_function
name|tchar
name|getlg
parameter_list|(
name|i
parameter_list|)
name|tchar
name|i
decl_stmt|;
block|{
return|return
operator|(
name|i
operator|)
return|;
block|}
end_function

begin_macro
name|caselg
argument_list|()
end_macro

begin_block
block|{ }
end_block

begin_macro
name|casefp
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|i
operator|,
name|j
expr_stmt|;
name|skip
argument_list|()
expr_stmt|;
if|if
condition|(
operator|(
name|i
operator|=
name|cbits
argument_list|(
name|getch
argument_list|()
argument_list|)
operator|-
literal|'0'
operator|)
operator|<
literal|0
operator|||
name|i
operator|>
name|nfonts
condition|)
return|return;
if|if
condition|(
name|skip
argument_list|()
operator|||
operator|!
operator|(
name|j
operator|=
name|getrq
argument_list|()
operator|)
condition|)
return|return;
name|fontlab
index|[
name|i
index|]
operator|=
name|j
expr_stmt|;
block|}
end_block

begin_macro
name|casecs
argument_list|()
end_macro

begin_block
block|{ }
end_block

begin_macro
name|casebd
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|i
operator|,
name|j
operator|,
name|k
expr_stmt|;
name|k
operator|=
literal|0
expr_stmt|;
name|bd0
label|:
if|if
condition|(
name|skip
argument_list|()
operator|||
operator|!
operator|(
name|i
operator|=
name|getrq
argument_list|()
operator|)
operator|||
operator|(
name|j
operator|=
name|findft
argument_list|(
name|i
argument_list|)
operator|)
operator|==
operator|-
literal|1
condition|)
block|{
if|if
condition|(
name|k
condition|)
goto|goto
name|bd1
goto|;
else|else
return|return;
block|}
if|if
condition|(
name|j
operator|==
name|smnt
condition|)
block|{
name|k
operator|=
name|smnt
expr_stmt|;
goto|goto
name|bd0
goto|;
block|}
if|if
condition|(
name|k
condition|)
block|{
name|sbold
operator|=
name|j
expr_stmt|;
name|j
operator|=
name|k
expr_stmt|;
block|}
name|bd1
label|:
name|skip
argument_list|()
expr_stmt|;
name|noscale
operator|++
expr_stmt|;
name|bdtab
index|[
name|j
index|]
operator|=
operator|(
name|int
operator|)
name|atoi0
argument_list|()
expr_stmt|;
name|noscale
operator|=
literal|0
expr_stmt|;
block|}
end_block

begin_macro
name|casevs
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|i
expr_stmt|;
name|skip
argument_list|()
expr_stmt|;
name|vflag
operator|++
expr_stmt|;
name|dfact
operator|=
name|INCH
expr_stmt|;
comment|/*default scaling is points!*/
name|dfactd
operator|=
literal|72
expr_stmt|;
name|res
operator|=
name|VERT
expr_stmt|;
name|i
operator|=
name|inumb
argument_list|(
operator|&
name|lss
argument_list|)
expr_stmt|;
if|if
condition|(
name|nonumb
condition|)
name|i
operator|=
name|lss1
expr_stmt|;
if|if
condition|(
name|i
operator|<
name|VERT
condition|)
name|i
operator|=
literal|0
expr_stmt|;
comment|/* was VERT */
name|lss1
operator|=
name|lss
expr_stmt|;
name|lss
operator|=
name|i
expr_stmt|;
block|}
end_block

begin_macro
name|casess
argument_list|()
end_macro

begin_block
block|{ }
end_block

begin_function
name|tchar
name|xlss
parameter_list|()
block|{
comment|/* stores \x'...' into 	/* two successive tchars. 	/* the first contains HX, the second the value, 	/* encoded as a vertical motion. 	/* decoding is done in n2.c by pchar(). 	*/
name|int
name|i
decl_stmt|;
name|getch
argument_list|()
expr_stmt|;
name|dfact
operator|=
name|lss
expr_stmt|;
name|i
operator|=
name|quant
argument_list|(
operator|(
name|int
operator|)
name|atoi0
argument_list|()
argument_list|,
name|VERT
argument_list|)
expr_stmt|;
name|dfact
operator|=
literal|1
expr_stmt|;
name|getch
argument_list|()
expr_stmt|;
if|if
condition|(
name|i
operator|>=
literal|0
condition|)
operator|*
name|pbp
operator|++
operator|=
name|MOT
operator||
name|VMOT
operator||
name|i
expr_stmt|;
else|else
operator|*
name|pbp
operator|++
operator|=
name|MOT
operator||
name|VMOT
operator||
name|NMOT
operator||
operator|-
name|i
expr_stmt|;
return|return
operator|(
name|HX
operator|)
return|;
block|}
end_function

end_unit

