begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"spell.h"
end_include

begin_comment
comment|/* add entries to hash table for use by spell    preexisting hash table is first argument    words to be added are standard input    if no hash table is given, create one from scratch */
end_comment

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
specifier|register
name|i
operator|,
name|j
expr_stmt|;
name|long
name|h
decl_stmt|;
specifier|register
name|long
modifier|*
name|lp
decl_stmt|;
name|char
name|word
index|[
name|NW
index|]
decl_stmt|;
specifier|register
name|char
modifier|*
name|wp
decl_stmt|;
if|if
condition|(
operator|!
name|prime
argument_list|(
name|argc
argument_list|,
name|argv
argument_list|)
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"spellin: cannot initialize hash table\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
name|fgets
argument_list|(
name|word
argument_list|,
sizeof|sizeof
argument_list|(
name|word
argument_list|)
argument_list|,
name|stdin
argument_list|)
condition|)
block|{
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|NP
condition|;
name|i
operator|++
control|)
block|{
for|for
control|(
name|wp
operator|=
name|word
operator|,
name|h
operator|=
literal|0
operator|,
name|lp
operator|=
name|pow2
index|[
name|i
index|]
init|;
operator|(
name|j
operator|=
operator|*
name|wp
operator|)
operator|!=
literal|'\0'
condition|;
operator|++
name|wp
operator|,
operator|++
name|lp
control|)
name|h
operator|+=
name|j
operator|*
operator|*
name|lp
expr_stmt|;
name|h
operator|%=
name|p
index|[
name|i
index|]
expr_stmt|;
name|set
argument_list|(
name|h
argument_list|)
expr_stmt|;
block|}
block|}
ifdef|#
directive|ifdef
name|gcos
name|freopen
argument_list|(
operator|(
name|char
operator|*
operator|)
name|NULL
argument_list|,
literal|"wi"
argument_list|,
name|stdout
argument_list|)
expr_stmt|;
endif|#
directive|endif
if|if
condition|(
name|fwrite
argument_list|(
operator|(
name|char
operator|*
operator|)
name|tab
argument_list|,
sizeof|sizeof
argument_list|(
operator|*
name|tab
argument_list|)
argument_list|,
name|TABSIZE
argument_list|,
name|stdout
argument_list|)
operator|!=
name|TABSIZE
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"spellin: trouble writing hash table\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

end_unit

