begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* ===============================================================================  This C source file is part of TestFloat, Release 2a, a package of programs for testing the correctness of floating-point arithmetic complying to the IEC/IEEE Standard for Floating-Point.  Written by John R. Hauser.  More information is available through the Web page `http://HTTP.CS.Berkeley.EDU/~jhauser/arithmetic/TestFloat.html'.  THIS SOFTWARE IS DISTRIBUTED AS IS, FOR FREE.  Although reasonable effort has been made to avoid it, THIS SOFTWARE MAY CONTAIN FAULTS THAT WILL AT TIMES RESULT IN INCORRECT BEHAVIOR.  USE OF THIS SOFTWARE IS RESTRICTED TO PERSONS AND ORGANIZATIONS WHO CAN AND WILL TAKE FULL RESPONSIBILITY FOR ANY AND ALL LOSSES, COSTS, OR OTHER PROBLEMS ARISING FROM ITS USE.  Derivative works are acceptable, even for commercial purposes, so long as (1) they include prominent notice that the work is derivative, and (2) they include prominent notice akin to these four paragraphs for those parts of this code that are retained.  =============================================================================== */
end_comment

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|"milieu.h"
end_include

begin_include
include|#
directive|include
file|"fail.h"
end_include

begin_include
include|#
directive|include
file|"softfloat.h"
end_include

begin_include
include|#
directive|include
file|"slowfloat.h"
end_include

begin_include
include|#
directive|include
file|"testCases.h"
end_include

begin_include
include|#
directive|include
file|"testLoops.h"
end_include

begin_function
specifier|static
name|void
name|catchSIGINT
parameter_list|(
name|int
name|signalCode
parameter_list|)
block|{
if|if
condition|(
name|stop
condition|)
name|exit
argument_list|(
name|EXIT_FAILURE
argument_list|)
expr_stmt|;
name|stop
operator|=
name|TRUE
expr_stmt|;
block|}
end_function

begin_function
name|int8
name|clearFlags
parameter_list|(
name|void
parameter_list|)
block|{
name|int8
name|flags
decl_stmt|;
name|flags
operator|=
name|float_exception_flags
expr_stmt|;
name|float_exception_flags
operator|=
literal|0
expr_stmt|;
return|return
name|flags
return|;
block|}
end_function

begin_enum
enum|enum
block|{
name|INT32_TO_FLOAT32
init|=
literal|1
block|,
name|INT32_TO_FLOAT64
block|,
ifdef|#
directive|ifdef
name|FLOATX80
name|INT32_TO_FLOATX80
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
name|INT32_TO_FLOAT128
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|BITS64
name|INT64_TO_FLOAT32
block|,
name|INT64_TO_FLOAT64
block|,
ifdef|#
directive|ifdef
name|FLOATX80
name|INT64_TO_FLOATX80
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
name|INT64_TO_FLOAT128
block|,
endif|#
directive|endif
endif|#
directive|endif
name|FLOAT32_TO_INT32
block|,
name|FLOAT32_TO_INT32_ROUND_TO_ZERO
block|,
ifdef|#
directive|ifdef
name|BITS64
name|FLOAT32_TO_INT64
block|,
name|FLOAT32_TO_INT64_ROUND_TO_ZERO
block|,
endif|#
directive|endif
name|FLOAT32_TO_FLOAT64
block|,
ifdef|#
directive|ifdef
name|FLOATX80
name|FLOAT32_TO_FLOATX80
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
name|FLOAT32_TO_FLOAT128
block|,
endif|#
directive|endif
name|FLOAT32_ROUND_TO_INT
block|,
name|FLOAT32_ADD
block|,
name|FLOAT32_SUB
block|,
name|FLOAT32_MUL
block|,
name|FLOAT32_DIV
block|,
name|FLOAT32_REM
block|,
name|FLOAT32_SQRT
block|,
name|FLOAT32_EQ
block|,
name|FLOAT32_LE
block|,
name|FLOAT32_LT
block|,
name|FLOAT32_EQ_SIGNALING
block|,
name|FLOAT32_LE_QUIET
block|,
name|FLOAT32_LT_QUIET
block|,
name|FLOAT64_TO_INT32
block|,
name|FLOAT64_TO_INT32_ROUND_TO_ZERO
block|,
ifdef|#
directive|ifdef
name|BITS64
name|FLOAT64_TO_INT64
block|,
name|FLOAT64_TO_INT64_ROUND_TO_ZERO
block|,
endif|#
directive|endif
name|FLOAT64_TO_FLOAT32
block|,
ifdef|#
directive|ifdef
name|FLOATX80
name|FLOAT64_TO_FLOATX80
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
name|FLOAT64_TO_FLOAT128
block|,
endif|#
directive|endif
name|FLOAT64_ROUND_TO_INT
block|,
name|FLOAT64_ADD
block|,
name|FLOAT64_SUB
block|,
name|FLOAT64_MUL
block|,
name|FLOAT64_DIV
block|,
name|FLOAT64_REM
block|,
name|FLOAT64_SQRT
block|,
name|FLOAT64_EQ
block|,
name|FLOAT64_LE
block|,
name|FLOAT64_LT
block|,
name|FLOAT64_EQ_SIGNALING
block|,
name|FLOAT64_LE_QUIET
block|,
name|FLOAT64_LT_QUIET
block|,
ifdef|#
directive|ifdef
name|FLOATX80
name|FLOATX80_TO_INT32
block|,
name|FLOATX80_TO_INT32_ROUND_TO_ZERO
block|,
ifdef|#
directive|ifdef
name|BITS64
name|FLOATX80_TO_INT64
block|,
name|FLOATX80_TO_INT64_ROUND_TO_ZERO
block|,
endif|#
directive|endif
name|FLOATX80_TO_FLOAT32
block|,
name|FLOATX80_TO_FLOAT64
block|,
ifdef|#
directive|ifdef
name|FLOAT128
name|FLOATX80_TO_FLOAT128
block|,
endif|#
directive|endif
name|FLOATX80_ROUND_TO_INT
block|,
name|FLOATX80_ADD
block|,
name|FLOATX80_SUB
block|,
name|FLOATX80_MUL
block|,
name|FLOATX80_DIV
block|,
name|FLOATX80_REM
block|,
name|FLOATX80_SQRT
block|,
name|FLOATX80_EQ
block|,
name|FLOATX80_LE
block|,
name|FLOATX80_LT
block|,
name|FLOATX80_EQ_SIGNALING
block|,
name|FLOATX80_LE_QUIET
block|,
name|FLOATX80_LT_QUIET
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
name|FLOAT128_TO_INT32
block|,
name|FLOAT128_TO_INT32_ROUND_TO_ZERO
block|,
ifdef|#
directive|ifdef
name|BITS64
name|FLOAT128_TO_INT64
block|,
name|FLOAT128_TO_INT64_ROUND_TO_ZERO
block|,
endif|#
directive|endif
name|FLOAT128_TO_FLOAT32
block|,
name|FLOAT128_TO_FLOAT64
block|,
ifdef|#
directive|ifdef
name|FLOATX80
name|FLOAT128_TO_FLOATX80
block|,
endif|#
directive|endif
name|FLOAT128_ROUND_TO_INT
block|,
name|FLOAT128_ADD
block|,
name|FLOAT128_SUB
block|,
name|FLOAT128_MUL
block|,
name|FLOAT128_DIV
block|,
name|FLOAT128_REM
block|,
name|FLOAT128_SQRT
block|,
name|FLOAT128_EQ
block|,
name|FLOAT128_LE
block|,
name|FLOAT128_LT
block|,
name|FLOAT128_EQ_SIGNALING
block|,
name|FLOAT128_LE_QUIET
block|,
name|FLOAT128_LT_QUIET
block|,
endif|#
directive|endif
name|NUM_FUNCTIONS
block|}
enum|;
end_enum

begin_struct
specifier|static
struct|struct
block|{
name|char
modifier|*
name|name
decl_stmt|;
name|int8
name|numInputs
decl_stmt|;
name|flag
name|roundingPrecision
decl_stmt|,
name|roundingMode
decl_stmt|;
name|flag
name|tininessMode
decl_stmt|,
name|tininessModeAtReducedPrecision
decl_stmt|;
block|}
name|functions
index|[
name|NUM_FUNCTIONS
index|]
init|=
block|{
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|"int32_to_float32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"int32_to_float64"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOATX80
block|{
literal|"int32_to_floatx80"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
block|{
literal|"int32_to_float128"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|BITS64
block|{
literal|"int64_to_float32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"int64_to_float64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOATX80
block|{
literal|"int64_to_floatx80"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
block|{
literal|"int64_to_float128"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
endif|#
directive|endif
block|{
literal|"float32_to_int32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_to_int32_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|BITS64
block|{
literal|"float32_to_int64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_to_int64_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"float32_to_float64"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOATX80
block|{
literal|"float32_to_floatx80"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
block|{
literal|"float32_to_float128"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"float32_round_to_int"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_add"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_sub"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_mul"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_div"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_rem"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_sqrt"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_eq"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_le"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_lt"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_eq_signaling"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_le_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float32_lt_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_to_int32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_to_int32_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|BITS64
block|{
literal|"float64_to_int64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_to_int64_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"float64_to_float32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOATX80
block|{
literal|"float64_to_floatx80"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
block|{
literal|"float64_to_float128"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"float64_round_to_int"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_add"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_sub"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_mul"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_div"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_rem"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_sqrt"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_eq"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_le"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_lt"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_eq_signaling"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_le_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float64_lt_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOATX80
block|{
literal|"floatx80_to_int32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_to_int32_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|BITS64
block|{
literal|"floatx80_to_int64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_to_int64_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"floatx80_to_float32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_to_float64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOAT128
block|{
literal|"floatx80_to_float128"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"floatx80_round_to_int"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_add"
block|,
literal|2
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|TRUE
block|}
block|,
block|{
literal|"floatx80_sub"
block|,
literal|2
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|TRUE
block|}
block|,
block|{
literal|"floatx80_mul"
block|,
literal|2
block|,
name|TRUE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|TRUE
block|}
block|,
block|{
literal|"floatx80_div"
block|,
literal|2
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|TRUE
block|}
block|,
block|{
literal|"floatx80_rem"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_sqrt"
block|,
literal|1
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_eq"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_le"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_lt"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_eq_signaling"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_le_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"floatx80_lt_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
block|{
literal|"float128_to_int32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_to_int32_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|BITS64
block|{
literal|"float128_to_int64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_to_int64_round_to_zero"
block|,
literal|1
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"float128_to_float32"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_to_float64"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
ifdef|#
directive|ifdef
name|FLOATX80
block|{
literal|"float128_to_floatx80"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|{
literal|"float128_round_to_int"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_add"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_sub"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_mul"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|TRUE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_div"
block|,
literal|2
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_rem"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_sqrt"
block|,
literal|1
block|,
name|FALSE
block|,
name|TRUE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_eq"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_le"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_lt"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_eq_signaling"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_le_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
block|{
literal|"float128_lt_quiet"
block|,
literal|2
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|,
name|FALSE
block|}
block|,
endif|#
directive|endif
block|}
struct|;
end_struct

begin_enum
enum|enum
block|{
name|ROUND_NEAREST_EVEN
init|=
literal|1
block|,
name|ROUND_TO_ZERO
block|,
name|ROUND_DOWN
block|,
name|ROUND_UP
block|,
name|NUM_ROUNDINGMODES
block|}
enum|;
end_enum

begin_enum
enum|enum
block|{
name|TININESS_BEFORE_ROUNDING
init|=
literal|1
block|,
name|TININESS_AFTER_ROUNDING
block|,
name|NUM_TININESSMODES
block|}
enum|;
end_enum

begin_function
specifier|static
name|void
name|testFunctionVariety
parameter_list|(
name|uint8
name|functionCode
parameter_list|,
name|int8
name|roundingPrecision
parameter_list|,
name|int8
name|roundingMode
parameter_list|,
name|int8
name|tininessMode
parameter_list|)
block|{
name|uint8
name|roundingCode
decl_stmt|;
name|int8
name|tininessCode
decl_stmt|;
name|functionName
operator|=
name|functions
index|[
name|functionCode
index|]
operator|.
name|name
expr_stmt|;
if|if
condition|(
name|roundingPrecision
operator|==
literal|32
condition|)
block|{
name|roundingPrecisionName
operator|=
literal|"32"
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|roundingPrecision
operator|==
literal|64
condition|)
block|{
name|roundingPrecisionName
operator|=
literal|"64"
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|roundingPrecision
operator|==
literal|80
condition|)
block|{
name|roundingPrecisionName
operator|=
literal|"80"
expr_stmt|;
block|}
else|else
block|{
name|roundingPrecisionName
operator|=
literal|0
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|FLOATX80
name|floatx80_rounding_precision
operator|=
name|roundingPrecision
expr_stmt|;
name|slow_floatx80_rounding_precision
operator|=
name|roundingPrecision
expr_stmt|;
endif|#
directive|endif
switch|switch
condition|(
name|roundingMode
condition|)
block|{
case|case
literal|0
case|:
name|roundingModeName
operator|=
literal|0
expr_stmt|;
name|roundingCode
operator|=
name|float_round_nearest_even
expr_stmt|;
break|break;
case|case
name|ROUND_NEAREST_EVEN
case|:
name|roundingModeName
operator|=
literal|"nearest_even"
expr_stmt|;
name|roundingCode
operator|=
name|float_round_nearest_even
expr_stmt|;
break|break;
case|case
name|ROUND_TO_ZERO
case|:
name|roundingModeName
operator|=
literal|"to_zero"
expr_stmt|;
name|roundingCode
operator|=
name|float_round_to_zero
expr_stmt|;
break|break;
case|case
name|ROUND_DOWN
case|:
name|roundingModeName
operator|=
literal|"down"
expr_stmt|;
name|roundingCode
operator|=
name|float_round_down
expr_stmt|;
break|break;
case|case
name|ROUND_UP
case|:
name|roundingModeName
operator|=
literal|"up"
expr_stmt|;
name|roundingCode
operator|=
name|float_round_up
expr_stmt|;
break|break;
block|}
name|float_rounding_mode
operator|=
name|roundingCode
expr_stmt|;
name|slow_float_rounding_mode
operator|=
name|roundingCode
expr_stmt|;
switch|switch
condition|(
name|tininessMode
condition|)
block|{
case|case
literal|0
case|:
name|tininessModeName
operator|=
literal|0
expr_stmt|;
name|tininessCode
operator|=
name|float_tininess_after_rounding
expr_stmt|;
break|break;
case|case
name|TININESS_BEFORE_ROUNDING
case|:
name|tininessModeName
operator|=
literal|"before"
expr_stmt|;
name|tininessCode
operator|=
name|float_tininess_before_rounding
expr_stmt|;
break|break;
case|case
name|TININESS_AFTER_ROUNDING
case|:
name|tininessModeName
operator|=
literal|"after"
expr_stmt|;
name|tininessCode
operator|=
name|float_tininess_after_rounding
expr_stmt|;
break|break;
block|}
name|float_detect_tininess
operator|=
name|tininessCode
expr_stmt|;
name|slow_float_detect_tininess
operator|=
name|tininessCode
expr_stmt|;
name|fputs
argument_list|(
literal|"Testing "
argument_list|,
name|stderr
argument_list|)
expr_stmt|;
name|writeFunctionName
argument_list|(
name|stderr
argument_list|)
expr_stmt|;
name|fputs
argument_list|(
literal|".\n"
argument_list|,
name|stderr
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|functionCode
condition|)
block|{
case|case
name|INT32_TO_FLOAT32
case|:
name|test_a_int32_z_float32
argument_list|(
name|slow_int32_to_float32
argument_list|,
name|int32_to_float32
argument_list|)
expr_stmt|;
break|break;
case|case
name|INT32_TO_FLOAT64
case|:
name|test_a_int32_z_float64
argument_list|(
name|slow_int32_to_float64
argument_list|,
name|int32_to_float64
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOATX80
case|case
name|INT32_TO_FLOATX80
case|:
name|test_a_int32_z_floatx80
argument_list|(
name|slow_int32_to_floatx80
argument_list|,
name|int32_to_floatx80
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
case|case
name|INT32_TO_FLOAT128
case|:
name|test_a_int32_z_float128
argument_list|(
name|slow_int32_to_float128
argument_list|,
name|int32_to_float128
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|BITS64
case|case
name|INT64_TO_FLOAT32
case|:
name|test_a_int64_z_float32
argument_list|(
name|slow_int64_to_float32
argument_list|,
name|int64_to_float32
argument_list|)
expr_stmt|;
break|break;
case|case
name|INT64_TO_FLOAT64
case|:
name|test_a_int64_z_float64
argument_list|(
name|slow_int64_to_float64
argument_list|,
name|int64_to_float64
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOATX80
case|case
name|INT64_TO_FLOATX80
case|:
name|test_a_int64_z_floatx80
argument_list|(
name|slow_int64_to_floatx80
argument_list|,
name|int64_to_floatx80
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
case|case
name|INT64_TO_FLOAT128
case|:
name|test_a_int64_z_float128
argument_list|(
name|slow_int64_to_float128
argument_list|,
name|int64_to_float128
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
endif|#
directive|endif
case|case
name|FLOAT32_TO_INT32
case|:
name|test_a_float32_z_int32
argument_list|(
name|slow_float32_to_int32
argument_list|,
name|float32_to_int32
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_TO_INT32_ROUND_TO_ZERO
case|:
name|test_a_float32_z_int32
argument_list|(
name|slow_float32_to_int32_round_to_zero
argument_list|,
name|float32_to_int32_round_to_zero
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|BITS64
case|case
name|FLOAT32_TO_INT64
case|:
name|test_a_float32_z_int64
argument_list|(
name|slow_float32_to_int64
argument_list|,
name|float32_to_int64
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_TO_INT64_ROUND_TO_ZERO
case|:
name|test_a_float32_z_int64
argument_list|(
name|slow_float32_to_int64_round_to_zero
argument_list|,
name|float32_to_int64_round_to_zero
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOAT32_TO_FLOAT64
case|:
name|test_a_float32_z_float64
argument_list|(
name|slow_float32_to_float64
argument_list|,
name|float32_to_float64
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOATX80
case|case
name|FLOAT32_TO_FLOATX80
case|:
name|test_a_float32_z_floatx80
argument_list|(
name|slow_float32_to_floatx80
argument_list|,
name|float32_to_floatx80
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
case|case
name|FLOAT32_TO_FLOAT128
case|:
name|test_a_float32_z_float128
argument_list|(
name|slow_float32_to_float128
argument_list|,
name|float32_to_float128
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOAT32_ROUND_TO_INT
case|:
name|test_az_float32
argument_list|(
name|slow_float32_round_to_int
argument_list|,
name|float32_round_to_int
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_ADD
case|:
name|test_abz_float32
argument_list|(
name|slow_float32_add
argument_list|,
name|float32_add
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_SUB
case|:
name|test_abz_float32
argument_list|(
name|slow_float32_sub
argument_list|,
name|float32_sub
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_MUL
case|:
name|test_abz_float32
argument_list|(
name|slow_float32_mul
argument_list|,
name|float32_mul
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_DIV
case|:
name|test_abz_float32
argument_list|(
name|slow_float32_div
argument_list|,
name|float32_div
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_REM
case|:
name|test_abz_float32
argument_list|(
name|slow_float32_rem
argument_list|,
name|float32_rem
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_SQRT
case|:
name|test_az_float32
argument_list|(
name|slow_float32_sqrt
argument_list|,
name|float32_sqrt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_EQ
case|:
name|test_ab_float32_z_flag
argument_list|(
name|slow_float32_eq
argument_list|,
name|float32_eq
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_LE
case|:
name|test_ab_float32_z_flag
argument_list|(
name|slow_float32_le
argument_list|,
name|float32_le
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_LT
case|:
name|test_ab_float32_z_flag
argument_list|(
name|slow_float32_lt
argument_list|,
name|float32_lt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_EQ_SIGNALING
case|:
name|test_ab_float32_z_flag
argument_list|(
name|slow_float32_eq_signaling
argument_list|,
name|float32_eq_signaling
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_LE_QUIET
case|:
name|test_ab_float32_z_flag
argument_list|(
name|slow_float32_le_quiet
argument_list|,
name|float32_le_quiet
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT32_LT_QUIET
case|:
name|test_ab_float32_z_flag
argument_list|(
name|slow_float32_lt_quiet
argument_list|,
name|float32_lt_quiet
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_TO_INT32
case|:
name|test_a_float64_z_int32
argument_list|(
name|slow_float64_to_int32
argument_list|,
name|float64_to_int32
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_TO_INT32_ROUND_TO_ZERO
case|:
name|test_a_float64_z_int32
argument_list|(
name|slow_float64_to_int32_round_to_zero
argument_list|,
name|float64_to_int32_round_to_zero
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|BITS64
case|case
name|FLOAT64_TO_INT64
case|:
name|test_a_float64_z_int64
argument_list|(
name|slow_float64_to_int64
argument_list|,
name|float64_to_int64
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_TO_INT64_ROUND_TO_ZERO
case|:
name|test_a_float64_z_int64
argument_list|(
name|slow_float64_to_int64_round_to_zero
argument_list|,
name|float64_to_int64_round_to_zero
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOAT64_TO_FLOAT32
case|:
name|test_a_float64_z_float32
argument_list|(
name|slow_float64_to_float32
argument_list|,
name|float64_to_float32
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOATX80
case|case
name|FLOAT64_TO_FLOATX80
case|:
name|test_a_float64_z_floatx80
argument_list|(
name|slow_float64_to_floatx80
argument_list|,
name|float64_to_floatx80
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
case|case
name|FLOAT64_TO_FLOAT128
case|:
name|test_a_float64_z_float128
argument_list|(
name|slow_float64_to_float128
argument_list|,
name|float64_to_float128
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOAT64_ROUND_TO_INT
case|:
name|test_az_float64
argument_list|(
name|slow_float64_round_to_int
argument_list|,
name|float64_round_to_int
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_ADD
case|:
name|test_abz_float64
argument_list|(
name|slow_float64_add
argument_list|,
name|float64_add
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_SUB
case|:
name|test_abz_float64
argument_list|(
name|slow_float64_sub
argument_list|,
name|float64_sub
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_MUL
case|:
name|test_abz_float64
argument_list|(
name|slow_float64_mul
argument_list|,
name|float64_mul
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_DIV
case|:
name|test_abz_float64
argument_list|(
name|slow_float64_div
argument_list|,
name|float64_div
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_REM
case|:
name|test_abz_float64
argument_list|(
name|slow_float64_rem
argument_list|,
name|float64_rem
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_SQRT
case|:
name|test_az_float64
argument_list|(
name|slow_float64_sqrt
argument_list|,
name|float64_sqrt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_EQ
case|:
name|test_ab_float64_z_flag
argument_list|(
name|slow_float64_eq
argument_list|,
name|float64_eq
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_LE
case|:
name|test_ab_float64_z_flag
argument_list|(
name|slow_float64_le
argument_list|,
name|float64_le
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_LT
case|:
name|test_ab_float64_z_flag
argument_list|(
name|slow_float64_lt
argument_list|,
name|float64_lt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_EQ_SIGNALING
case|:
name|test_ab_float64_z_flag
argument_list|(
name|slow_float64_eq_signaling
argument_list|,
name|float64_eq_signaling
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_LE_QUIET
case|:
name|test_ab_float64_z_flag
argument_list|(
name|slow_float64_le_quiet
argument_list|,
name|float64_le_quiet
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT64_LT_QUIET
case|:
name|test_ab_float64_z_flag
argument_list|(
name|slow_float64_lt_quiet
argument_list|,
name|float64_lt_quiet
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOATX80
case|case
name|FLOATX80_TO_INT32
case|:
name|test_a_floatx80_z_int32
argument_list|(
name|slow_floatx80_to_int32
argument_list|,
name|floatx80_to_int32
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_TO_INT32_ROUND_TO_ZERO
case|:
name|test_a_floatx80_z_int32
argument_list|(
name|slow_floatx80_to_int32_round_to_zero
argument_list|,
name|floatx80_to_int32_round_to_zero
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|BITS64
case|case
name|FLOATX80_TO_INT64
case|:
name|test_a_floatx80_z_int64
argument_list|(
name|slow_floatx80_to_int64
argument_list|,
name|floatx80_to_int64
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_TO_INT64_ROUND_TO_ZERO
case|:
name|test_a_floatx80_z_int64
argument_list|(
name|slow_floatx80_to_int64_round_to_zero
argument_list|,
name|floatx80_to_int64_round_to_zero
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOATX80_TO_FLOAT32
case|:
name|test_a_floatx80_z_float32
argument_list|(
name|slow_floatx80_to_float32
argument_list|,
name|floatx80_to_float32
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_TO_FLOAT64
case|:
name|test_a_floatx80_z_float64
argument_list|(
name|slow_floatx80_to_float64
argument_list|,
name|floatx80_to_float64
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOAT128
case|case
name|FLOATX80_TO_FLOAT128
case|:
name|test_a_floatx80_z_float128
argument_list|(
name|slow_floatx80_to_float128
argument_list|,
name|floatx80_to_float128
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOATX80_ROUND_TO_INT
case|:
name|test_az_floatx80
argument_list|(
name|slow_floatx80_round_to_int
argument_list|,
name|floatx80_round_to_int
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_ADD
case|:
name|test_abz_floatx80
argument_list|(
name|slow_floatx80_add
argument_list|,
name|floatx80_add
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_SUB
case|:
name|test_abz_floatx80
argument_list|(
name|slow_floatx80_sub
argument_list|,
name|floatx80_sub
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_MUL
case|:
name|test_abz_floatx80
argument_list|(
name|slow_floatx80_mul
argument_list|,
name|floatx80_mul
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_DIV
case|:
name|test_abz_floatx80
argument_list|(
name|slow_floatx80_div
argument_list|,
name|floatx80_div
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_REM
case|:
name|test_abz_floatx80
argument_list|(
name|slow_floatx80_rem
argument_list|,
name|floatx80_rem
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_SQRT
case|:
name|test_az_floatx80
argument_list|(
name|slow_floatx80_sqrt
argument_list|,
name|floatx80_sqrt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_EQ
case|:
name|test_ab_floatx80_z_flag
argument_list|(
name|slow_floatx80_eq
argument_list|,
name|floatx80_eq
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_LE
case|:
name|test_ab_floatx80_z_flag
argument_list|(
name|slow_floatx80_le
argument_list|,
name|floatx80_le
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_LT
case|:
name|test_ab_floatx80_z_flag
argument_list|(
name|slow_floatx80_lt
argument_list|,
name|floatx80_lt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_EQ_SIGNALING
case|:
name|test_ab_floatx80_z_flag
argument_list|(
name|slow_floatx80_eq_signaling
argument_list|,
name|floatx80_eq_signaling
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_LE_QUIET
case|:
name|test_ab_floatx80_z_flag
argument_list|(
name|slow_floatx80_le_quiet
argument_list|,
name|floatx80_le_quiet
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOATX80_LT_QUIET
case|:
name|test_ab_floatx80_z_flag
argument_list|(
name|slow_floatx80_lt_quiet
argument_list|,
name|floatx80_lt_quiet
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
case|case
name|FLOAT128_TO_INT32
case|:
name|test_a_float128_z_int32
argument_list|(
name|slow_float128_to_int32
argument_list|,
name|float128_to_int32
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_TO_INT32_ROUND_TO_ZERO
case|:
name|test_a_float128_z_int32
argument_list|(
name|slow_float128_to_int32_round_to_zero
argument_list|,
name|float128_to_int32_round_to_zero
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|BITS64
case|case
name|FLOAT128_TO_INT64
case|:
name|test_a_float128_z_int64
argument_list|(
name|slow_float128_to_int64
argument_list|,
name|float128_to_int64
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_TO_INT64_ROUND_TO_ZERO
case|:
name|test_a_float128_z_int64
argument_list|(
name|slow_float128_to_int64_round_to_zero
argument_list|,
name|float128_to_int64_round_to_zero
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOAT128_TO_FLOAT32
case|:
name|test_a_float128_z_float32
argument_list|(
name|slow_float128_to_float32
argument_list|,
name|float128_to_float32
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_TO_FLOAT64
case|:
name|test_a_float128_z_float64
argument_list|(
name|slow_float128_to_float64
argument_list|,
name|float128_to_float64
argument_list|)
expr_stmt|;
break|break;
ifdef|#
directive|ifdef
name|FLOATX80
case|case
name|FLOAT128_TO_FLOATX80
case|:
name|test_a_float128_z_floatx80
argument_list|(
name|slow_float128_to_floatx80
argument_list|,
name|float128_to_floatx80
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
case|case
name|FLOAT128_ROUND_TO_INT
case|:
name|test_az_float128
argument_list|(
name|slow_float128_round_to_int
argument_list|,
name|float128_round_to_int
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_ADD
case|:
name|test_abz_float128
argument_list|(
name|slow_float128_add
argument_list|,
name|float128_add
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_SUB
case|:
name|test_abz_float128
argument_list|(
name|slow_float128_sub
argument_list|,
name|float128_sub
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_MUL
case|:
name|test_abz_float128
argument_list|(
name|slow_float128_mul
argument_list|,
name|float128_mul
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_DIV
case|:
name|test_abz_float128
argument_list|(
name|slow_float128_div
argument_list|,
name|float128_div
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_REM
case|:
name|test_abz_float128
argument_list|(
name|slow_float128_rem
argument_list|,
name|float128_rem
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_SQRT
case|:
name|test_az_float128
argument_list|(
name|slow_float128_sqrt
argument_list|,
name|float128_sqrt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_EQ
case|:
name|test_ab_float128_z_flag
argument_list|(
name|slow_float128_eq
argument_list|,
name|float128_eq
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_LE
case|:
name|test_ab_float128_z_flag
argument_list|(
name|slow_float128_le
argument_list|,
name|float128_le
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_LT
case|:
name|test_ab_float128_z_flag
argument_list|(
name|slow_float128_lt
argument_list|,
name|float128_lt
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_EQ_SIGNALING
case|:
name|test_ab_float128_z_flag
argument_list|(
name|slow_float128_eq_signaling
argument_list|,
name|float128_eq_signaling
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_LE_QUIET
case|:
name|test_ab_float128_z_flag
argument_list|(
name|slow_float128_le_quiet
argument_list|,
name|float128_le_quiet
argument_list|)
expr_stmt|;
break|break;
case|case
name|FLOAT128_LT_QUIET
case|:
name|test_ab_float128_z_flag
argument_list|(
name|slow_float128_lt_quiet
argument_list|,
name|float128_lt_quiet
argument_list|)
expr_stmt|;
break|break;
endif|#
directive|endif
block|}
if|if
condition|(
operator|(
name|errorStop
operator|&&
name|anyErrors
operator|)
operator|||
name|stop
condition|)
name|exitWithStatus
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|testFunction
parameter_list|(
name|uint8
name|functionCode
parameter_list|,
name|int8
name|roundingPrecisionIn
parameter_list|,
name|int8
name|roundingModeIn
parameter_list|,
name|int8
name|tininessModeIn
parameter_list|)
block|{
name|int8
name|roundingPrecision
decl_stmt|,
name|roundingMode
decl_stmt|,
name|tininessMode
decl_stmt|;
name|roundingPrecision
operator|=
literal|32
expr_stmt|;
for|for
control|(
init|;
condition|;
control|)
block|{
if|if
condition|(
operator|!
name|functions
index|[
name|functionCode
index|]
operator|.
name|roundingPrecision
condition|)
block|{
name|roundingPrecision
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|roundingPrecisionIn
condition|)
block|{
name|roundingPrecision
operator|=
name|roundingPrecisionIn
expr_stmt|;
block|}
for|for
control|(
name|roundingMode
operator|=
literal|1
init|;
name|roundingMode
operator|<
name|NUM_ROUNDINGMODES
condition|;
operator|++
name|roundingMode
control|)
block|{
if|if
condition|(
operator|!
name|functions
index|[
name|functionCode
index|]
operator|.
name|roundingMode
condition|)
block|{
name|roundingMode
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|roundingModeIn
condition|)
block|{
name|roundingMode
operator|=
name|roundingModeIn
expr_stmt|;
block|}
for|for
control|(
name|tininessMode
operator|=
literal|1
init|;
name|tininessMode
operator|<
name|NUM_TININESSMODES
condition|;
operator|++
name|tininessMode
control|)
block|{
if|if
condition|(
operator|(
name|roundingPrecision
operator|==
literal|32
operator|)
operator|||
operator|(
name|roundingPrecision
operator|==
literal|64
operator|)
condition|)
block|{
if|if
condition|(
operator|!
name|functions
index|[
name|functionCode
index|]
operator|.
name|tininessModeAtReducedPrecision
condition|)
block|{
name|tininessMode
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|tininessModeIn
condition|)
block|{
name|tininessMode
operator|=
name|tininessModeIn
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
operator|!
name|functions
index|[
name|functionCode
index|]
operator|.
name|tininessMode
condition|)
block|{
name|tininessMode
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|tininessModeIn
condition|)
block|{
name|tininessMode
operator|=
name|tininessModeIn
expr_stmt|;
block|}
block|}
name|testFunctionVariety
argument_list|(
name|functionCode
argument_list|,
name|roundingPrecision
argument_list|,
name|roundingMode
argument_list|,
name|tininessMode
argument_list|)
expr_stmt|;
if|if
condition|(
name|tininessModeIn
operator|||
operator|!
name|tininessMode
condition|)
break|break;
block|}
if|if
condition|(
name|roundingModeIn
operator|||
operator|!
name|roundingMode
condition|)
break|break;
block|}
if|if
condition|(
name|roundingPrecisionIn
operator|||
operator|!
name|roundingPrecision
condition|)
break|break;
if|if
condition|(
name|roundingPrecision
operator|==
literal|80
condition|)
block|{
break|break;
block|}
elseif|else
if|if
condition|(
name|roundingPrecision
operator|==
literal|64
condition|)
block|{
name|roundingPrecision
operator|=
literal|80
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|roundingPrecision
operator|==
literal|32
condition|)
block|{
name|roundingPrecision
operator|=
literal|64
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|char
modifier|*
modifier|*
name|argv
parameter_list|)
block|{
name|char
modifier|*
name|argPtr
decl_stmt|;
name|flag
name|functionArgument
decl_stmt|;
name|uint8
name|functionCode
decl_stmt|;
name|int8
name|operands
decl_stmt|,
name|roundingPrecision
decl_stmt|,
name|roundingMode
decl_stmt|,
name|tininessMode
decl_stmt|;
name|fail_programName
operator|=
literal|"testsoftfloat"
expr_stmt|;
if|if
condition|(
name|argc
operator|<=
literal|1
condition|)
goto|goto
name|writeHelpMessage
goto|;
name|testCases_setLevel
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|trueName
operator|=
literal|"true"
expr_stmt|;
name|testName
operator|=
literal|"soft"
expr_stmt|;
name|errorStop
operator|=
name|FALSE
expr_stmt|;
name|forever
operator|=
name|FALSE
expr_stmt|;
name|maxErrorCount
operator|=
literal|20
expr_stmt|;
name|trueFlagsPtr
operator|=
operator|&
name|slow_float_exception_flags
expr_stmt|;
name|testFlagsFunctionPtr
operator|=
name|clearFlags
expr_stmt|;
name|functionArgument
operator|=
name|FALSE
expr_stmt|;
name|functionCode
operator|=
literal|0
expr_stmt|;
name|operands
operator|=
literal|0
expr_stmt|;
name|roundingPrecision
operator|=
literal|0
expr_stmt|;
name|roundingMode
operator|=
literal|0
expr_stmt|;
name|tininessMode
operator|=
literal|0
expr_stmt|;
operator|--
name|argc
expr_stmt|;
operator|++
name|argv
expr_stmt|;
while|while
condition|(
name|argc
operator|&&
operator|(
name|argPtr
operator|=
name|argv
index|[
literal|0
index|]
operator|)
condition|)
block|{
if|if
condition|(
name|argPtr
index|[
literal|0
index|]
operator|==
literal|'-'
condition|)
operator|++
name|argPtr
expr_stmt|;
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"help"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|writeHelpMessage
label|:
name|fputs
argument_list|(
literal|"testsoftfloat [<option>...]<function>\n"
literal|"<option>:  (* is default)\n"
literal|"    -help            --Write this message and exit.\n"
literal|"    -level<num>     --Testing level<num> (1 or 2).\n"
literal|" *  -level 1\n"
literal|"    -errors<num>    --Stop each function test after<num> errors.\n"
literal|" *  -errors 20\n"
literal|"    -errorstop       --Exit after first function with any error.\n"
literal|"    -forever         --Test one function repeatedly (implies `-level 2').\n"
ifdef|#
directive|ifdef
name|FLOATX80
literal|"    -precision32     --Only test rounding precision equivalent to float32.\n"
literal|"    -precision64     --Only test rounding precision equivalent to float64.\n"
literal|"    -precision80     --Only test maximum rounding precision.\n"
endif|#
directive|endif
literal|"    -nearesteven     --Only test rounding to nearest/even.\n"
literal|"    -tozero          --Only test rounding to zero.\n"
literal|"    -down            --Only test rounding down.\n"
literal|"    -up              --Only test rounding up.\n"
literal|"    -tininessbefore  --Only test underflow tininess before rounding.\n"
literal|"    -tininessafter   --Only test underflow tininess after rounding.\n"
literal|"<function>:\n"
literal|"    int32_to_<float><float>_add<float>_eq\n"
literal|"<float>_to_int32<float>_sub<float>_le\n"
literal|"<float>_to_int32_round_to_zero<float>_mul<float>_lt\n"
ifdef|#
directive|ifdef
name|BITS64
literal|"    int64_to_<float><float>_div<float>_eq_signaling\n"
literal|"<float>_to_int64<float>_rem<float>_le_quiet\n"
literal|"<float>_to_int64_round_to_zero<float>_lt_quiet\n"
literal|"<float>_to_<float>\n"
literal|"<float>_round_to_int\n"
literal|"<float>_sqrt\n"
else|#
directive|else
literal|"<float>_to_<float><float>_div<float>_eq_signaling\n"
literal|"<float>_round_to_int<float>_rem<float>_le_quiet\n"
literal|"<float>_sqrt<float>_lt_quiet\n"
endif|#
directive|endif
literal|"    -all1            --All 1-operand functions.\n"
literal|"    -all2            --All 2-operand functions.\n"
literal|"    -all             --All functions.\n"
literal|"<float>:\n"
literal|"    float32          --Single precision.\n"
literal|"    float64          --Double precision.\n"
ifdef|#
directive|ifdef
name|FLOATX80
literal|"    floatx80         --Extended double precision.\n"
endif|#
directive|endif
ifdef|#
directive|ifdef
name|FLOAT128
literal|"    float128         --Quadruple precision.\n"
endif|#
directive|endif
argument_list|,
name|stdout
argument_list|)
expr_stmt|;
return|return
name|EXIT_SUCCESS
return|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"level"
argument_list|)
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|argc
operator|<
literal|2
condition|)
goto|goto
name|optionError
goto|;
name|testCases_setLevel
argument_list|(
name|atoi
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|)
argument_list|)
expr_stmt|;
operator|--
name|argc
expr_stmt|;
operator|++
name|argv
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"level1"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|testCases_setLevel
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"level2"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|testCases_setLevel
argument_list|(
literal|2
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"errors"
argument_list|)
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|argc
operator|<
literal|2
condition|)
block|{
name|optionError
label|:
name|fail
argument_list|(
literal|"`%s' option requires numeric argument"
argument_list|,
name|argv
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
block|}
name|maxErrorCount
operator|=
name|atoi
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
operator|--
name|argc
expr_stmt|;
operator|++
name|argv
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"errorstop"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|errorStop
operator|=
name|TRUE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"forever"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|testCases_setLevel
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|forever
operator|=
name|TRUE
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|FLOATX80
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"precision32"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|roundingPrecision
operator|=
literal|32
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"precision64"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|roundingPrecision
operator|=
literal|64
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"precision80"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|roundingPrecision
operator|=
literal|80
expr_stmt|;
block|}
endif|#
directive|endif
elseif|else
if|if
condition|(
operator|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"nearesteven"
argument_list|)
operator|==
literal|0
operator|)
operator|||
operator|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"nearest_even"
argument_list|)
operator|==
literal|0
operator|)
condition|)
block|{
name|roundingMode
operator|=
name|ROUND_NEAREST_EVEN
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"tozero"
argument_list|)
operator|==
literal|0
operator|)
operator|||
operator|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"to_zero"
argument_list|)
operator|==
literal|0
operator|)
condition|)
block|{
name|roundingMode
operator|=
name|ROUND_TO_ZERO
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"down"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|roundingMode
operator|=
name|ROUND_DOWN
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"up"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|roundingMode
operator|=
name|ROUND_UP
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"tininessbefore"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|tininessMode
operator|=
name|TININESS_BEFORE_ROUNDING
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"tininessafter"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|tininessMode
operator|=
name|TININESS_AFTER_ROUNDING
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"all1"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|functionArgument
operator|=
name|TRUE
expr_stmt|;
name|functionCode
operator|=
literal|0
expr_stmt|;
name|operands
operator|=
literal|1
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"all2"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|functionArgument
operator|=
name|TRUE
expr_stmt|;
name|functionCode
operator|=
literal|0
expr_stmt|;
name|operands
operator|=
literal|2
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
literal|"all"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|functionArgument
operator|=
name|TRUE
expr_stmt|;
name|functionCode
operator|=
literal|0
expr_stmt|;
name|operands
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
for|for
control|(
name|functionCode
operator|=
literal|1
init|;
name|functionCode
operator|<
name|NUM_FUNCTIONS
condition|;
operator|++
name|functionCode
control|)
block|{
if|if
condition|(
name|strcmp
argument_list|(
name|argPtr
argument_list|,
name|functions
index|[
name|functionCode
index|]
operator|.
name|name
argument_list|)
operator|==
literal|0
condition|)
block|{
break|break;
block|}
block|}
if|if
condition|(
name|functionCode
operator|==
name|NUM_FUNCTIONS
condition|)
block|{
name|fail
argument_list|(
literal|"Invalid option or function `%s'"
argument_list|,
name|argv
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
block|}
name|functionArgument
operator|=
name|TRUE
expr_stmt|;
block|}
operator|--
name|argc
expr_stmt|;
operator|++
name|argv
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|functionArgument
condition|)
name|fail
argument_list|(
literal|"Function argument required"
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|signal
argument_list|(
name|SIGINT
argument_list|,
name|catchSIGINT
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|signal
argument_list|(
name|SIGTERM
argument_list|,
name|catchSIGINT
argument_list|)
expr_stmt|;
if|if
condition|(
name|functionCode
condition|)
block|{
if|if
condition|(
name|forever
condition|)
block|{
if|if
condition|(
operator|!
name|roundingPrecision
condition|)
name|roundingPrecision
operator|=
literal|80
expr_stmt|;
if|if
condition|(
operator|!
name|roundingMode
condition|)
name|roundingMode
operator|=
name|ROUND_NEAREST_EVEN
expr_stmt|;
block|}
name|testFunction
argument_list|(
name|functionCode
argument_list|,
name|roundingPrecision
argument_list|,
name|roundingMode
argument_list|,
name|tininessMode
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|operands
operator|==
literal|1
condition|)
block|{
for|for
control|(
name|functionCode
operator|=
literal|1
init|;
name|functionCode
operator|<
name|NUM_FUNCTIONS
condition|;
operator|++
name|functionCode
control|)
block|{
if|if
condition|(
name|functions
index|[
name|functionCode
index|]
operator|.
name|numInputs
operator|==
literal|1
condition|)
block|{
name|testFunction
argument_list|(
name|functionCode
argument_list|,
name|roundingPrecision
argument_list|,
name|roundingMode
argument_list|,
name|tininessMode
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
name|operands
operator|==
literal|2
condition|)
block|{
for|for
control|(
name|functionCode
operator|=
literal|1
init|;
name|functionCode
operator|<
name|NUM_FUNCTIONS
condition|;
operator|++
name|functionCode
control|)
block|{
if|if
condition|(
name|functions
index|[
name|functionCode
index|]
operator|.
name|numInputs
operator|==
literal|2
condition|)
block|{
name|testFunction
argument_list|(
name|functionCode
argument_list|,
name|roundingPrecision
argument_list|,
name|roundingMode
argument_list|,
name|tininessMode
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
for|for
control|(
name|functionCode
operator|=
literal|1
init|;
name|functionCode
operator|<
name|NUM_FUNCTIONS
condition|;
operator|++
name|functionCode
control|)
block|{
name|testFunction
argument_list|(
name|functionCode
argument_list|,
name|roundingPrecision
argument_list|,
name|roundingMode
argument_list|,
name|tininessMode
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|exitWithStatus
argument_list|()
expr_stmt|;
block|}
end_function

end_unit

