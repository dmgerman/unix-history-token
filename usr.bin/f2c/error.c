begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/**************************************************************** Copyright 1990, 1993, 1994 by AT&T Bell Laboratories and Bellcore.  Permission to use, copy, modify, and distribute this software and its documentation for any purpose and without fee is hereby granted, provided that the above copyright notice appear in all copies and that both that the copyright notice and this permission notice and warranty disclaimer appear in supporting documentation, and that the names of AT&T Bell Laboratories or Bellcore or any of their entities not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  AT&T and Bellcore disclaim all warranties with regard to this software, including all implied warranties of merchantability and fitness.  In no event shall AT&T or Bellcore be liable for any special, indirect or consequential damages or any damages whatsoever resulting from loss of use, data or profits, whether in an action of contract, negligence or other tortious action, arising out of or in connection with the use or performance of this software. ****************************************************************/
end_comment

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|warni
parameter_list|(
name|s
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|warni
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buf
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buf
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|warn
argument_list|(
name|buf
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|warn1
parameter_list|(
name|s
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
name|t
decl_stmt|;
else|#
directive|else
function|warn1
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|char
modifier|*
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|warn
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|warn
parameter_list|(
name|s
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
else|#
directive|else
function|warn
parameter_list|(
name|char
modifier|*
name|s
parameter_list|)
endif|#
directive|endif
block|{
if|if
condition|(
name|nowarnflag
condition|)
return|return;
if|if
condition|(
name|infname
operator|&&
operator|*
name|infname
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Warning on line %ld of %s: %s\n"
argument_list|,
name|lineno
argument_list|,
name|infname
argument_list|,
name|s
argument_list|)
expr_stmt|;
else|else
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Warning on line %ld: %s\n"
argument_list|,
name|lineno
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|diagfile
argument_list|)
expr_stmt|;
operator|++
name|nwarn
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|errstr
parameter_list|(
name|s
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
name|t
decl_stmt|;
else|#
directive|else
function|errstr
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|char
modifier|*
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|erri
parameter_list|(
name|s
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|erri
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|errl
parameter_list|(
name|s
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|long
name|t
decl_stmt|;
else|#
directive|else
function|errl
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|long
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_decl_stmt
name|char
modifier|*
name|err_proc
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|err
parameter_list|(
name|s
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
else|#
directive|else
function|err
parameter_list|(
name|char
modifier|*
name|s
parameter_list|)
endif|#
directive|endif
block|{
if|if
condition|(
name|err_proc
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Error processing %s before line %ld"
argument_list|,
name|err_proc
argument_list|,
name|lineno
argument_list|)
expr_stmt|;
else|else
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Error on line %ld"
argument_list|,
name|lineno
argument_list|)
expr_stmt|;
if|if
condition|(
name|infname
operator|&&
operator|*
name|infname
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|" of %s"
argument_list|,
name|infname
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|": %s\n"
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|diagfile
argument_list|)
expr_stmt|;
operator|++
name|nerr
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|yyerror
parameter_list|(
name|s
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
else|#
directive|else
function|yyerror
parameter_list|(
name|char
modifier|*
name|s
parameter_list|)
endif|#
directive|endif
block|{
name|err
argument_list|(
name|s
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|dclerr
parameter_list|(
name|s
parameter_list|,
name|v
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|Namep
name|v
decl_stmt|;
else|#
directive|else
function|dclerr
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|Namep
name|v
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
if|if
condition|(
name|v
condition|)
block|{
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"Declaration error for %s: %s"
argument_list|,
name|v
operator|->
name|fvarname
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
else|else
name|errstr
argument_list|(
literal|"Declaration error %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|execerr
parameter_list|(
name|s
parameter_list|,
name|n
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|char
modifier|*
name|n
decl_stmt|;
else|#
directive|else
function|execerr
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|char
modifier|*
name|n
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buf1
index|[
literal|100
index|]
decl_stmt|,
name|buf2
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buf1
argument_list|,
literal|"Execution error %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buf2
argument_list|,
name|buf1
argument_list|,
name|n
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buf2
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|Fatal
parameter_list|(
name|t
parameter_list|)
name|char
modifier|*
name|t
decl_stmt|;
else|#
directive|else
function|Fatal
parameter_list|(
name|char
modifier|*
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Compiler error line %ld"
argument_list|,
name|lineno
argument_list|)
expr_stmt|;
if|if
condition|(
name|infname
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|" of %s"
argument_list|,
name|infname
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|": %s\n"
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|done
argument_list|(
literal|3
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|fatalstr
parameter_list|(
name|t
parameter_list|,
name|s
parameter_list|)
name|char
modifier|*
name|t
decl_stmt|;
name|char
modifier|*
name|s
decl_stmt|;
else|#
directive|else
function|fatalstr
parameter_list|(
name|char
modifier|*
name|t
parameter_list|,
name|char
modifier|*
name|s
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|t
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|fatali
parameter_list|(
name|t
parameter_list|,
name|d
parameter_list|)
name|char
modifier|*
name|t
decl_stmt|;
name|int
name|d
decl_stmt|;
else|#
directive|else
function|fatali
parameter_list|(
name|char
modifier|*
name|t
parameter_list|,
name|int
name|d
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|t
argument_list|,
name|d
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|badthing
parameter_list|(
name|thing
parameter_list|,
name|r
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|thing
decl_stmt|;
name|char
modifier|*
name|r
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|badthing
parameter_list|(
name|char
modifier|*
name|thing
parameter_list|,
name|char
modifier|*
name|r
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|50
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"Impossible %s %d in routine %s"
argument_list|,
name|thing
argument_list|,
name|t
argument_list|,
name|r
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|badop
parameter_list|(
name|r
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|r
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|badop
parameter_list|(
name|char
modifier|*
name|r
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|badthing
argument_list|(
literal|"opcode"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|badtag
parameter_list|(
name|r
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|r
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|badtag
parameter_list|(
name|char
modifier|*
name|r
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|badthing
argument_list|(
literal|"tag"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|badstg
parameter_list|(
name|r
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|r
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|badstg
parameter_list|(
name|char
modifier|*
name|r
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|badthing
argument_list|(
literal|"storage class"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|badtype
parameter_list|(
name|r
parameter_list|,
name|t
parameter_list|)
name|char
modifier|*
name|r
decl_stmt|;
name|int
name|t
decl_stmt|;
else|#
directive|else
function|badtype
parameter_list|(
name|char
modifier|*
name|r
parameter_list|,
name|int
name|t
parameter_list|)
endif|#
directive|endif
block|{
name|badthing
argument_list|(
literal|"type"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|many
parameter_list|(
name|s
parameter_list|,
name|c
parameter_list|,
name|n
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
name|char
name|c
decl_stmt|;
name|int
name|n
decl_stmt|;
else|#
directive|else
function|many
parameter_list|(
name|char
modifier|*
name|s
parameter_list|,
name|char
name|c
parameter_list|,
name|int
name|n
parameter_list|)
endif|#
directive|endif
block|{
name|char
name|buff
index|[
literal|250
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"Too many %s.\nTable limit now %d.\nTry rerunning with the -N%c%d option.\n"
argument_list|,
name|s
argument_list|,
name|n
argument_list|,
name|c
argument_list|,
literal|2
operator|*
name|n
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|err66
parameter_list|(
name|s
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
else|#
directive|else
function|err66
parameter_list|(
name|char
modifier|*
name|s
parameter_list|)
endif|#
directive|endif
block|{
name|errstr
argument_list|(
literal|"Fortran 77 feature used: %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
operator|--
name|nerr
expr_stmt|;
block|}
end_function

begin_function
name|void
ifdef|#
directive|ifdef
name|KR_headers
name|errext
parameter_list|(
name|s
parameter_list|)
name|char
modifier|*
name|s
decl_stmt|;
else|#
directive|else
function|errext
parameter_list|(
name|char
modifier|*
name|s
parameter_list|)
endif|#
directive|endif
block|{
name|errstr
argument_list|(
literal|"f2c extension used: %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
operator|--
name|nerr
expr_stmt|;
block|}
end_function

end_unit

