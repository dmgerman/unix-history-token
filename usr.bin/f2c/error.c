begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/**************************************************************** Copyright 1990, 1993 by AT&T Bell Laboratories and Bellcore.  Permission to use, copy, modify, and distribute this software and its documentation for any purpose and without fee is hereby granted, provided that the above copyright notice appear in all copies and that both that the copyright notice and this permission notice and warranty disclaimer appear in supporting documentation, and that the names of AT&T Bell Laboratories or Bellcore or any of their entities not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  AT&T and Bellcore disclaim all warranties with regard to this software, including all implied warranties of merchantability and fitness.  In no event shall AT&T or Bellcore be liable for any special, indirect or consequential damages or any damages whatsoever resulting from loss of use, data or profits, whether in an action of contract, negligence or other tortious action, arising out of or in connection with the use or performance of this software. ****************************************************************/
end_comment

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_macro
name|warni
argument_list|(
argument|s
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buf
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buf
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|warn
argument_list|(
name|buf
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|warn1
argument_list|(
argument|s
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|,
modifier|*
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|warn
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|warn
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
name|nowarnflag
condition|)
return|return;
if|if
condition|(
name|infname
operator|&&
operator|*
name|infname
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Warning on line %ld of %s: %s\n"
argument_list|,
name|lineno
argument_list|,
name|infname
argument_list|,
name|s
argument_list|)
expr_stmt|;
else|else
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Warning on line %ld: %s\n"
argument_list|,
name|lineno
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|diagfile
argument_list|)
expr_stmt|;
operator|++
name|nwarn
expr_stmt|;
block|}
end_block

begin_macro
name|errstr
argument_list|(
argument|s
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|,
modifier|*
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|erri
argument_list|(
argument|s
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|errl
argument_list|(
argument|s
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|long
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|s
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_decl_stmt
name|char
modifier|*
name|err_proc
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_macro
name|err
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
name|err_proc
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Error processing %s before line %ld"
argument_list|,
name|err_proc
argument_list|,
name|lineno
argument_list|)
expr_stmt|;
else|else
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Error on line %ld"
argument_list|,
name|lineno
argument_list|)
expr_stmt|;
if|if
condition|(
name|infname
operator|&&
operator|*
name|infname
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|" of %s"
argument_list|,
name|infname
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|": %s\n"
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|diagfile
argument_list|)
expr_stmt|;
operator|++
name|nerr
expr_stmt|;
block|}
end_block

begin_macro
name|yyerror
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|err
argument_list|(
name|s
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|dclerr
argument_list|(
argument|s
argument_list|,
argument|v
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Namep
name|v
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
if|if
condition|(
name|v
condition|)
block|{
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"Declaration error for %s: %s"
argument_list|,
name|v
operator|->
name|fvarname
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
else|else
name|errstr
argument_list|(
literal|"Declaration error %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|execerr
argument_list|(
argument|s
argument_list|,
argument|n
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|,
modifier|*
name|n
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buf1
index|[
literal|100
index|]
decl_stmt|,
name|buf2
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buf1
argument_list|,
literal|"Execution error %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|sprintf
argument_list|(
name|buf2
argument_list|,
name|buf1
argument_list|,
name|n
argument_list|)
expr_stmt|;
name|err
argument_list|(
name|buf2
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|Fatal
argument_list|(
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|"Compiler error line %ld"
argument_list|,
name|lineno
argument_list|)
expr_stmt|;
if|if
condition|(
name|infname
condition|)
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|" of %s"
argument_list|,
name|infname
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|diagfile
argument_list|,
literal|": %s\n"
argument_list|,
name|t
argument_list|)
expr_stmt|;
name|done
argument_list|(
literal|3
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|fatalstr
argument_list|(
argument|t
argument_list|,
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|t
decl_stmt|,
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|t
argument_list|,
name|s
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|fatali
argument_list|(
argument|t
argument_list|,
argument|d
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|t
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|d
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|100
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
name|t
argument_list|,
name|d
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|badthing
argument_list|(
argument|thing
argument_list|,
argument|r
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|thing
decl_stmt|,
modifier|*
name|r
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|50
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"Impossible %s %d in routine %s"
argument_list|,
name|thing
argument_list|,
name|t
argument_list|,
name|r
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|badop
argument_list|(
argument|r
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|r
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|badthing
argument_list|(
literal|"opcode"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|badtag
argument_list|(
argument|r
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|r
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|badthing
argument_list|(
literal|"tag"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|badstg
argument_list|(
argument|r
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|r
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|badthing
argument_list|(
literal|"storage class"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|badtype
argument_list|(
argument|r
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|r
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|badthing
argument_list|(
literal|"type"
argument_list|,
name|r
argument_list|,
name|t
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|many
argument_list|(
argument|s
argument_list|,
argument|c
argument_list|,
argument|n
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|,
name|c
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|n
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|char
name|buff
index|[
literal|250
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|buff
argument_list|,
literal|"Too many %s.\nTable limit now %d.\nTry rerunning with the -N%c%d option.\n"
argument_list|,
name|s
argument_list|,
name|n
argument_list|,
name|c
argument_list|,
literal|2
operator|*
name|n
argument_list|)
expr_stmt|;
name|Fatal
argument_list|(
name|buff
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|err66
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|errstr
argument_list|(
literal|"Fortran 77 feature used: %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
operator|--
name|nerr
expr_stmt|;
block|}
end_block

begin_macro
name|errext
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|errstr
argument_list|(
literal|"f2c extension used: %s"
argument_list|,
name|s
argument_list|)
expr_stmt|;
operator|--
name|nerr
expr_stmt|;
block|}
end_block

end_unit

