begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* replace.h    Interface to replacement file parser. */
end_comment

begin_enum
enum|enum
name|replacement_type
block|{
name|DATA_REPL
block|,
name|ATTR_REPL
block|}
enum|;
end_enum

begin_struct
struct|struct
name|replacement_item
block|{
union|union
block|{
name|char
modifier|*
name|attr
decl_stmt|;
struct|struct
block|{
name|char
modifier|*
name|s
decl_stmt|;
name|unsigned
name|n
decl_stmt|;
block|}
name|data
struct|;
block|}
name|u
union|;
name|enum
name|replacement_type
name|type
decl_stmt|;
name|struct
name|replacement_item
modifier|*
name|next
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|NEWLINE_BEGIN
value|01
end_define

begin_define
define|#
directive|define
name|NEWLINE_END
value|02
end_define

begin_struct
struct|struct
name|replacement
block|{
name|unsigned
name|flags
decl_stmt|;
name|struct
name|replacement_item
modifier|*
name|items
decl_stmt|;
block|}
struct|;
end_struct

begin_enum
enum|enum
name|event_type
block|{
name|START_ELEMENT
block|,
name|END_ELEMENT
block|}
enum|;
end_enum

begin_decl_stmt
name|struct
name|replacement_table
modifier|*
name|make_replacement_table
name|P
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|void
name|load_replacement_file
name|P
argument_list|(
operator|(
expr|struct
name|replacement_table
operator|*
operator|,
name|char
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|replacement
modifier|*
name|lookup_replacement
name|P
argument_list|(
operator|(
expr|struct
name|replacement_table
operator|*
operator|,
expr|enum
name|event_type
operator|,
name|char
operator|*
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

end_unit

