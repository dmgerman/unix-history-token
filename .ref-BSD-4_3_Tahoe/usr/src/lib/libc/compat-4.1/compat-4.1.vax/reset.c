begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1980 Regents of the University of California.  * All rights reserved.  The Berkeley software License Agreement  * specifies the terms and conditions for redistribution.  */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|LIBC_SCCS
end_ifdef

begin_label
name|_sccsid
label|:
end_label

begin_expr_stmt
operator|.
name|asciz
literal|"@(#)reset.c	5.4 (Berkeley) 3/9/86"
endif|#
directive|endif
endif|LIBC_SCCS
comment|/*  * C library -- reset, setexit  *  *	reset(x)  * will generate a "return" from  * the last call to  *	setexit()  * by restoring r6 - r12, ap, fp  * and doing a return.  * The returned value is x; on the original  * call the returned value is 0.  *  * useful for going back to the main loop  * after a horrible error in a lowlevel  * routine.  */
include|#
directive|include
file|"DEFS.h"
name|ENTRY
argument_list|(
argument|setexit
argument_list|)
name|movab
name|setsav
operator|,
name|r0
name|movq
name|r6
operator|,
operator|(
name|r0
operator|)
operator|+
name|movq
name|r8
operator|,
operator|(
name|r0
operator|)
operator|+
name|movq
name|r10
operator|,
operator|(
name|r0
operator|)
operator|+
name|movq
literal|8
operator|(
name|fp
operator|)
operator|,
operator|(
name|r0
operator|)
operator|+
operator|#
name|ap
operator|,
name|fp
name|movab
literal|4
operator|(
name|ap
operator|)
operator|,
operator|(
name|r0
operator|)
operator|+
operator|#
name|sp
name|movl
literal|16
operator|(
name|fp
operator|)
operator|,
operator|(
name|r0
operator|)
operator|#
name|pc
name|clrl
name|r0
name|ret
name|ENTRY
argument_list|(
argument|reset
argument_list|)
name|movl
literal|4
operator|(
name|ap
operator|)
operator|,
name|r0
operator|#
name|returned
name|value
name|movab
name|setsav
operator|,
name|r1
name|movq
argument_list|(
name|r1
argument_list|)
operator|+
operator|,
name|r6
name|movq
argument_list|(
name|r1
argument_list|)
operator|+
operator|,
name|r8
name|movq
argument_list|(
name|r1
argument_list|)
operator|+
operator|,
name|r10
name|movq
argument_list|(
name|r1
argument_list|)
operator|+
operator|,
name|r12
name|movl
argument_list|(
name|r1
argument_list|)
operator|+
operator|,
name|sp
name|jmp
operator|*
operator|(
name|r1
operator|)
operator|.
name|data
name|setsav
operator|:
operator|.
name|space
literal|10
operator|*
literal|4
end_expr_stmt

end_unit

