begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1980 Regents of the University of California.  * All rights reserved.  The Berkeley software License Agreement  * specifies the terms and conditions for redistribution.  */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|LIBC_SCCS
end_ifdef

begin_label
name|_sccsid
label|:
end_label

begin_expr_stmt
operator|.
name|asciz
literal|"@(#)reset.c	1.2 (Berkeley/CCI) 8/1/86"
endif|#
directive|endif
endif|LIBC_SCCS
comment|/*  * C library -- reset, setexit  *  *	reset(x)  * will generate a "return" from  * the last call to  *	setexit()  * by restoring r2 - r12, fp  * and doing a return.  * The returned value is x; on the original  * call the returned value is 0.  *  * useful for going back to the main loop  * after a horrible error in a lowlevel  * routine.  */
include|#
directive|include
file|"DEFS.h"
name|ENTRY
argument_list|(
argument|setexit
argument_list|,
literal|0
argument_list|)
name|movab
name|setsav
operator|,
name|r0
name|storer
name|$0x1ffc
operator|,
operator|(
name|r0
operator|)
name|movl
argument_list|(
name|fp
argument_list|)
operator|,
literal|44
operator|(
name|r0
operator|)
operator|#
name|fp
name|moval
literal|4
operator|(
name|fp
operator|)
operator|,
literal|48
operator|(
name|r0
operator|)
operator|#
name|sp
name|movl
operator|-
literal|8
operator|(
name|fp
operator|)
operator|,
literal|52
operator|(
name|r0
operator|)
operator|#
name|pc
name|clrl
name|r0
name|ret
name|ENTRY
argument_list|(
argument|reset
argument_list|,
literal|0
argument_list|)
name|movl
literal|4
operator|(
name|fp
operator|)
operator|,
name|r0
operator|#
name|returned
name|value
name|movab
name|setsav
operator|,
name|r1
name|loadr
name|$0x1ffc
operator|,
operator|(
name|r1
operator|)
name|movl
literal|44
operator|(
name|r1
operator|)
operator|,
name|fp
name|movl
literal|48
operator|(
name|r1
operator|)
operator|,
name|sp
name|jmp
operator|*
literal|52
operator|(
name|r1
operator|)
operator|.
name|data
name|setsav
operator|:
operator|.
name|space
literal|14
operator|*
literal|4
end_expr_stmt

end_unit

