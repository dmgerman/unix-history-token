begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
modifier|*
name|sccsid
init|=
literal|"@(#)dd.c	4.6 (Berkeley) 6/1/88"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<sys/file.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_define
define|#
directive|define
name|BIG
value|2147483647
end_define

begin_define
define|#
directive|define
name|LCASE
value|01
end_define

begin_define
define|#
directive|define
name|UCASE
value|02
end_define

begin_define
define|#
directive|define
name|SWAB
value|04
end_define

begin_define
define|#
directive|define
name|NERR
value|010
end_define

begin_define
define|#
directive|define
name|SYNC
value|020
end_define

begin_decl_stmt
name|int
name|cflag
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|fflag
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|skip
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|seekn
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|count
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|files
init|=
literal|1
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|string
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|ifile
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|ofile
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|ibuf
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|obuf
decl_stmt|;
end_decl_stmt

begin_function_decl
name|char
modifier|*
name|sbrk
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|int
name|ibs
init|=
literal|512
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|obs
init|=
literal|512
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|bs
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|cbs
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|ibc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|obc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|cbc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|nifr
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|nipr
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|nofr
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|nopr
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|ntrunc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|ibf
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|obf
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|op
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|nspace
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|etoa
index|[]
init|=
block|{
literal|0000
block|,
literal|0001
block|,
literal|0002
block|,
literal|0003
block|,
literal|0234
block|,
literal|0011
block|,
literal|0206
block|,
literal|0177
block|,
literal|0227
block|,
literal|0215
block|,
literal|0216
block|,
literal|0013
block|,
literal|0014
block|,
literal|0015
block|,
literal|0016
block|,
literal|0017
block|,
literal|0020
block|,
literal|0021
block|,
literal|0022
block|,
literal|0023
block|,
literal|0235
block|,
literal|0205
block|,
literal|0010
block|,
literal|0207
block|,
literal|0030
block|,
literal|0031
block|,
literal|0222
block|,
literal|0217
block|,
literal|0034
block|,
literal|0035
block|,
literal|0036
block|,
literal|0037
block|,
literal|0200
block|,
literal|0201
block|,
literal|0202
block|,
literal|0203
block|,
literal|0204
block|,
literal|0012
block|,
literal|0027
block|,
literal|0033
block|,
literal|0210
block|,
literal|0211
block|,
literal|0212
block|,
literal|0213
block|,
literal|0214
block|,
literal|0005
block|,
literal|0006
block|,
literal|0007
block|,
literal|0220
block|,
literal|0221
block|,
literal|0026
block|,
literal|0223
block|,
literal|0224
block|,
literal|0225
block|,
literal|0226
block|,
literal|0004
block|,
literal|0230
block|,
literal|0231
block|,
literal|0232
block|,
literal|0233
block|,
literal|0024
block|,
literal|0025
block|,
literal|0236
block|,
literal|0032
block|,
literal|0040
block|,
literal|0240
block|,
literal|0241
block|,
literal|0242
block|,
literal|0243
block|,
literal|0244
block|,
literal|0245
block|,
literal|0246
block|,
literal|0247
block|,
literal|0250
block|,
literal|0133
block|,
literal|0056
block|,
literal|0074
block|,
literal|0050
block|,
literal|0053
block|,
literal|0041
block|,
literal|0046
block|,
literal|0251
block|,
literal|0252
block|,
literal|0253
block|,
literal|0254
block|,
literal|0255
block|,
literal|0256
block|,
literal|0257
block|,
literal|0260
block|,
literal|0261
block|,
literal|0135
block|,
literal|0044
block|,
literal|0052
block|,
literal|0051
block|,
literal|0073
block|,
literal|0136
block|,
literal|0055
block|,
literal|0057
block|,
literal|0262
block|,
literal|0263
block|,
literal|0264
block|,
literal|0265
block|,
literal|0266
block|,
literal|0267
block|,
literal|0270
block|,
literal|0271
block|,
literal|0174
block|,
literal|0054
block|,
literal|0045
block|,
literal|0137
block|,
literal|0076
block|,
literal|0077
block|,
literal|0272
block|,
literal|0273
block|,
literal|0274
block|,
literal|0275
block|,
literal|0276
block|,
literal|0277
block|,
literal|0300
block|,
literal|0301
block|,
literal|0302
block|,
literal|0140
block|,
literal|0072
block|,
literal|0043
block|,
literal|0100
block|,
literal|0047
block|,
literal|0075
block|,
literal|0042
block|,
literal|0303
block|,
literal|0141
block|,
literal|0142
block|,
literal|0143
block|,
literal|0144
block|,
literal|0145
block|,
literal|0146
block|,
literal|0147
block|,
literal|0150
block|,
literal|0151
block|,
literal|0304
block|,
literal|0305
block|,
literal|0306
block|,
literal|0307
block|,
literal|0310
block|,
literal|0311
block|,
literal|0312
block|,
literal|0152
block|,
literal|0153
block|,
literal|0154
block|,
literal|0155
block|,
literal|0156
block|,
literal|0157
block|,
literal|0160
block|,
literal|0161
block|,
literal|0162
block|,
literal|0313
block|,
literal|0314
block|,
literal|0315
block|,
literal|0316
block|,
literal|0317
block|,
literal|0320
block|,
literal|0321
block|,
literal|0176
block|,
literal|0163
block|,
literal|0164
block|,
literal|0165
block|,
literal|0166
block|,
literal|0167
block|,
literal|0170
block|,
literal|0171
block|,
literal|0172
block|,
literal|0322
block|,
literal|0323
block|,
literal|0324
block|,
literal|0325
block|,
literal|0326
block|,
literal|0327
block|,
literal|0330
block|,
literal|0331
block|,
literal|0332
block|,
literal|0333
block|,
literal|0334
block|,
literal|0335
block|,
literal|0336
block|,
literal|0337
block|,
literal|0340
block|,
literal|0341
block|,
literal|0342
block|,
literal|0343
block|,
literal|0344
block|,
literal|0345
block|,
literal|0346
block|,
literal|0347
block|,
literal|0173
block|,
literal|0101
block|,
literal|0102
block|,
literal|0103
block|,
literal|0104
block|,
literal|0105
block|,
literal|0106
block|,
literal|0107
block|,
literal|0110
block|,
literal|0111
block|,
literal|0350
block|,
literal|0351
block|,
literal|0352
block|,
literal|0353
block|,
literal|0354
block|,
literal|0355
block|,
literal|0175
block|,
literal|0112
block|,
literal|0113
block|,
literal|0114
block|,
literal|0115
block|,
literal|0116
block|,
literal|0117
block|,
literal|0120
block|,
literal|0121
block|,
literal|0122
block|,
literal|0356
block|,
literal|0357
block|,
literal|0360
block|,
literal|0361
block|,
literal|0362
block|,
literal|0363
block|,
literal|0134
block|,
literal|0237
block|,
literal|0123
block|,
literal|0124
block|,
literal|0125
block|,
literal|0126
block|,
literal|0127
block|,
literal|0130
block|,
literal|0131
block|,
literal|0132
block|,
literal|0364
block|,
literal|0365
block|,
literal|0366
block|,
literal|0367
block|,
literal|0370
block|,
literal|0371
block|,
literal|0060
block|,
literal|0061
block|,
literal|0062
block|,
literal|0063
block|,
literal|0064
block|,
literal|0065
block|,
literal|0066
block|,
literal|0067
block|,
literal|0070
block|,
literal|0071
block|,
literal|0372
block|,
literal|0373
block|,
literal|0374
block|,
literal|0375
block|,
literal|0376
block|,
literal|0377
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|atoe
index|[]
init|=
block|{
literal|0000
block|,
literal|0001
block|,
literal|0002
block|,
literal|0003
block|,
literal|0067
block|,
literal|0055
block|,
literal|0056
block|,
literal|0057
block|,
literal|0026
block|,
literal|0005
block|,
literal|0045
block|,
literal|0013
block|,
literal|0014
block|,
literal|0015
block|,
literal|0016
block|,
literal|0017
block|,
literal|0020
block|,
literal|0021
block|,
literal|0022
block|,
literal|0023
block|,
literal|0074
block|,
literal|0075
block|,
literal|0062
block|,
literal|0046
block|,
literal|0030
block|,
literal|0031
block|,
literal|0077
block|,
literal|0047
block|,
literal|0034
block|,
literal|0035
block|,
literal|0036
block|,
literal|0037
block|,
literal|0100
block|,
literal|0117
block|,
literal|0177
block|,
literal|0173
block|,
literal|0133
block|,
literal|0154
block|,
literal|0120
block|,
literal|0175
block|,
literal|0115
block|,
literal|0135
block|,
literal|0134
block|,
literal|0116
block|,
literal|0153
block|,
literal|0140
block|,
literal|0113
block|,
literal|0141
block|,
literal|0360
block|,
literal|0361
block|,
literal|0362
block|,
literal|0363
block|,
literal|0364
block|,
literal|0365
block|,
literal|0366
block|,
literal|0367
block|,
literal|0370
block|,
literal|0371
block|,
literal|0172
block|,
literal|0136
block|,
literal|0114
block|,
literal|0176
block|,
literal|0156
block|,
literal|0157
block|,
literal|0174
block|,
literal|0301
block|,
literal|0302
block|,
literal|0303
block|,
literal|0304
block|,
literal|0305
block|,
literal|0306
block|,
literal|0307
block|,
literal|0310
block|,
literal|0311
block|,
literal|0321
block|,
literal|0322
block|,
literal|0323
block|,
literal|0324
block|,
literal|0325
block|,
literal|0326
block|,
literal|0327
block|,
literal|0330
block|,
literal|0331
block|,
literal|0342
block|,
literal|0343
block|,
literal|0344
block|,
literal|0345
block|,
literal|0346
block|,
literal|0347
block|,
literal|0350
block|,
literal|0351
block|,
literal|0112
block|,
literal|0340
block|,
literal|0132
block|,
literal|0137
block|,
literal|0155
block|,
literal|0171
block|,
literal|0201
block|,
literal|0202
block|,
literal|0203
block|,
literal|0204
block|,
literal|0205
block|,
literal|0206
block|,
literal|0207
block|,
literal|0210
block|,
literal|0211
block|,
literal|0221
block|,
literal|0222
block|,
literal|0223
block|,
literal|0224
block|,
literal|0225
block|,
literal|0226
block|,
literal|0227
block|,
literal|0230
block|,
literal|0231
block|,
literal|0242
block|,
literal|0243
block|,
literal|0244
block|,
literal|0245
block|,
literal|0246
block|,
literal|0247
block|,
literal|0250
block|,
literal|0251
block|,
literal|0300
block|,
literal|0152
block|,
literal|0320
block|,
literal|0241
block|,
literal|0007
block|,
literal|0040
block|,
literal|0041
block|,
literal|0042
block|,
literal|0043
block|,
literal|0044
block|,
literal|0025
block|,
literal|0006
block|,
literal|0027
block|,
literal|0050
block|,
literal|0051
block|,
literal|0052
block|,
literal|0053
block|,
literal|0054
block|,
literal|0011
block|,
literal|0012
block|,
literal|0033
block|,
literal|0060
block|,
literal|0061
block|,
literal|0032
block|,
literal|0063
block|,
literal|0064
block|,
literal|0065
block|,
literal|0066
block|,
literal|0010
block|,
literal|0070
block|,
literal|0071
block|,
literal|0072
block|,
literal|0073
block|,
literal|0004
block|,
literal|0024
block|,
literal|0076
block|,
literal|0341
block|,
literal|0101
block|,
literal|0102
block|,
literal|0103
block|,
literal|0104
block|,
literal|0105
block|,
literal|0106
block|,
literal|0107
block|,
literal|0110
block|,
literal|0111
block|,
literal|0121
block|,
literal|0122
block|,
literal|0123
block|,
literal|0124
block|,
literal|0125
block|,
literal|0126
block|,
literal|0127
block|,
literal|0130
block|,
literal|0131
block|,
literal|0142
block|,
literal|0143
block|,
literal|0144
block|,
literal|0145
block|,
literal|0146
block|,
literal|0147
block|,
literal|0150
block|,
literal|0151
block|,
literal|0160
block|,
literal|0161
block|,
literal|0162
block|,
literal|0163
block|,
literal|0164
block|,
literal|0165
block|,
literal|0166
block|,
literal|0167
block|,
literal|0170
block|,
literal|0200
block|,
literal|0212
block|,
literal|0213
block|,
literal|0214
block|,
literal|0215
block|,
literal|0216
block|,
literal|0217
block|,
literal|0220
block|,
literal|0232
block|,
literal|0233
block|,
literal|0234
block|,
literal|0235
block|,
literal|0236
block|,
literal|0237
block|,
literal|0240
block|,
literal|0252
block|,
literal|0253
block|,
literal|0254
block|,
literal|0255
block|,
literal|0256
block|,
literal|0257
block|,
literal|0260
block|,
literal|0261
block|,
literal|0262
block|,
literal|0263
block|,
literal|0264
block|,
literal|0265
block|,
literal|0266
block|,
literal|0267
block|,
literal|0270
block|,
literal|0271
block|,
literal|0272
block|,
literal|0273
block|,
literal|0274
block|,
literal|0275
block|,
literal|0276
block|,
literal|0277
block|,
literal|0312
block|,
literal|0313
block|,
literal|0314
block|,
literal|0315
block|,
literal|0316
block|,
literal|0317
block|,
literal|0332
block|,
literal|0333
block|,
literal|0334
block|,
literal|0335
block|,
literal|0336
block|,
literal|0337
block|,
literal|0352
block|,
literal|0353
block|,
literal|0354
block|,
literal|0355
block|,
literal|0356
block|,
literal|0357
block|,
literal|0372
block|,
literal|0373
block|,
literal|0374
block|,
literal|0375
block|,
literal|0376
block|,
literal|0377
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|atoibm
index|[]
init|=
block|{
literal|0000
block|,
literal|0001
block|,
literal|0002
block|,
literal|0003
block|,
literal|0067
block|,
literal|0055
block|,
literal|0056
block|,
literal|0057
block|,
literal|0026
block|,
literal|0005
block|,
literal|0045
block|,
literal|0013
block|,
literal|0014
block|,
literal|0015
block|,
literal|0016
block|,
literal|0017
block|,
literal|0020
block|,
literal|0021
block|,
literal|0022
block|,
literal|0023
block|,
literal|0074
block|,
literal|0075
block|,
literal|0062
block|,
literal|0046
block|,
literal|0030
block|,
literal|0031
block|,
literal|0077
block|,
literal|0047
block|,
literal|0034
block|,
literal|0035
block|,
literal|0036
block|,
literal|0037
block|,
literal|0100
block|,
literal|0132
block|,
literal|0177
block|,
literal|0173
block|,
literal|0133
block|,
literal|0154
block|,
literal|0120
block|,
literal|0175
block|,
literal|0115
block|,
literal|0135
block|,
literal|0134
block|,
literal|0116
block|,
literal|0153
block|,
literal|0140
block|,
literal|0113
block|,
literal|0141
block|,
literal|0360
block|,
literal|0361
block|,
literal|0362
block|,
literal|0363
block|,
literal|0364
block|,
literal|0365
block|,
literal|0366
block|,
literal|0367
block|,
literal|0370
block|,
literal|0371
block|,
literal|0172
block|,
literal|0136
block|,
literal|0114
block|,
literal|0176
block|,
literal|0156
block|,
literal|0157
block|,
literal|0174
block|,
literal|0301
block|,
literal|0302
block|,
literal|0303
block|,
literal|0304
block|,
literal|0305
block|,
literal|0306
block|,
literal|0307
block|,
literal|0310
block|,
literal|0311
block|,
literal|0321
block|,
literal|0322
block|,
literal|0323
block|,
literal|0324
block|,
literal|0325
block|,
literal|0326
block|,
literal|0327
block|,
literal|0330
block|,
literal|0331
block|,
literal|0342
block|,
literal|0343
block|,
literal|0344
block|,
literal|0345
block|,
literal|0346
block|,
literal|0347
block|,
literal|0350
block|,
literal|0351
block|,
literal|0255
block|,
literal|0340
block|,
literal|0275
block|,
literal|0137
block|,
literal|0155
block|,
literal|0171
block|,
literal|0201
block|,
literal|0202
block|,
literal|0203
block|,
literal|0204
block|,
literal|0205
block|,
literal|0206
block|,
literal|0207
block|,
literal|0210
block|,
literal|0211
block|,
literal|0221
block|,
literal|0222
block|,
literal|0223
block|,
literal|0224
block|,
literal|0225
block|,
literal|0226
block|,
literal|0227
block|,
literal|0230
block|,
literal|0231
block|,
literal|0242
block|,
literal|0243
block|,
literal|0244
block|,
literal|0245
block|,
literal|0246
block|,
literal|0247
block|,
literal|0250
block|,
literal|0251
block|,
literal|0300
block|,
literal|0117
block|,
literal|0320
block|,
literal|0241
block|,
literal|0007
block|,
literal|0040
block|,
literal|0041
block|,
literal|0042
block|,
literal|0043
block|,
literal|0044
block|,
literal|0025
block|,
literal|0006
block|,
literal|0027
block|,
literal|0050
block|,
literal|0051
block|,
literal|0052
block|,
literal|0053
block|,
literal|0054
block|,
literal|0011
block|,
literal|0012
block|,
literal|0033
block|,
literal|0060
block|,
literal|0061
block|,
literal|0032
block|,
literal|0063
block|,
literal|0064
block|,
literal|0065
block|,
literal|0066
block|,
literal|0010
block|,
literal|0070
block|,
literal|0071
block|,
literal|0072
block|,
literal|0073
block|,
literal|0004
block|,
literal|0024
block|,
literal|0076
block|,
literal|0341
block|,
literal|0101
block|,
literal|0102
block|,
literal|0103
block|,
literal|0104
block|,
literal|0105
block|,
literal|0106
block|,
literal|0107
block|,
literal|0110
block|,
literal|0111
block|,
literal|0121
block|,
literal|0122
block|,
literal|0123
block|,
literal|0124
block|,
literal|0125
block|,
literal|0126
block|,
literal|0127
block|,
literal|0130
block|,
literal|0131
block|,
literal|0142
block|,
literal|0143
block|,
literal|0144
block|,
literal|0145
block|,
literal|0146
block|,
literal|0147
block|,
literal|0150
block|,
literal|0151
block|,
literal|0160
block|,
literal|0161
block|,
literal|0162
block|,
literal|0163
block|,
literal|0164
block|,
literal|0165
block|,
literal|0166
block|,
literal|0167
block|,
literal|0170
block|,
literal|0200
block|,
literal|0212
block|,
literal|0213
block|,
literal|0214
block|,
literal|0215
block|,
literal|0216
block|,
literal|0217
block|,
literal|0220
block|,
literal|0232
block|,
literal|0233
block|,
literal|0234
block|,
literal|0235
block|,
literal|0236
block|,
literal|0237
block|,
literal|0240
block|,
literal|0252
block|,
literal|0253
block|,
literal|0254
block|,
literal|0255
block|,
literal|0256
block|,
literal|0257
block|,
literal|0260
block|,
literal|0261
block|,
literal|0262
block|,
literal|0263
block|,
literal|0264
block|,
literal|0265
block|,
literal|0266
block|,
literal|0267
block|,
literal|0270
block|,
literal|0271
block|,
literal|0272
block|,
literal|0273
block|,
literal|0274
block|,
literal|0275
block|,
literal|0276
block|,
literal|0277
block|,
literal|0312
block|,
literal|0313
block|,
literal|0314
block|,
literal|0315
block|,
literal|0316
block|,
literal|0317
block|,
literal|0332
block|,
literal|0333
block|,
literal|0334
block|,
literal|0335
block|,
literal|0336
block|,
literal|0337
block|,
literal|0352
block|,
literal|0353
block|,
literal|0354
block|,
literal|0355
block|,
literal|0356
block|,
literal|0357
block|,
literal|0372
block|,
literal|0373
block|,
literal|0374
block|,
literal|0375
block|,
literal|0376
block|,
literal|0377
block|, }
decl_stmt|;
end_decl_stmt

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
name|int
function_decl|(
modifier|*
name|conv
function_decl|)
parameter_list|()
function_decl|;
specifier|register
name|char
modifier|*
name|ip
decl_stmt|;
specifier|register
name|c
expr_stmt|;
name|int
name|ebcdic
argument_list|()
decl_stmt|,
name|ibm
argument_list|()
decl_stmt|,
name|ascii
argument_list|()
decl_stmt|,
name|null
argument_list|()
decl_stmt|,
name|cnull
argument_list|()
decl_stmt|,
name|term
argument_list|()
decl_stmt|,
name|block
argument_list|()
decl_stmt|,
name|unblock
argument_list|()
decl_stmt|;
name|int
name|a
decl_stmt|;
name|conv
operator|=
name|null
expr_stmt|;
for|for
control|(
name|c
operator|=
literal|1
init|;
name|c
operator|<
name|argc
condition|;
name|c
operator|++
control|)
block|{
name|string
operator|=
name|argv
index|[
name|c
index|]
expr_stmt|;
if|if
condition|(
name|match
argument_list|(
literal|"ibs="
argument_list|)
condition|)
block|{
name|ibs
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"obs="
argument_list|)
condition|)
block|{
name|obs
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"cbs="
argument_list|)
condition|)
block|{
name|cbs
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"bs="
argument_list|)
condition|)
block|{
name|bs
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"if="
argument_list|)
condition|)
block|{
name|ifile
operator|=
name|string
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"of="
argument_list|)
condition|)
block|{
name|ofile
operator|=
name|string
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"skip="
argument_list|)
condition|)
block|{
name|skip
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"seek="
argument_list|)
condition|)
block|{
name|seekn
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"count="
argument_list|)
condition|)
block|{
name|count
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"files="
argument_list|)
condition|)
block|{
name|files
operator|=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"conv="
argument_list|)
condition|)
block|{
name|cloop
label|:
if|if
condition|(
name|match
argument_list|(
literal|","
argument_list|)
condition|)
goto|goto
name|cloop
goto|;
if|if
condition|(
operator|*
name|string
operator|==
literal|'\0'
condition|)
continue|continue;
if|if
condition|(
name|match
argument_list|(
literal|"ebcdic"
argument_list|)
condition|)
block|{
name|conv
operator|=
name|ebcdic
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"ibm"
argument_list|)
condition|)
block|{
name|conv
operator|=
name|ibm
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"ascii"
argument_list|)
condition|)
block|{
name|conv
operator|=
name|ascii
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"block"
argument_list|)
condition|)
block|{
name|conv
operator|=
name|block
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"unblock"
argument_list|)
condition|)
block|{
name|conv
operator|=
name|unblock
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"lcase"
argument_list|)
condition|)
block|{
name|cflag
operator||=
name|LCASE
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"ucase"
argument_list|)
condition|)
block|{
name|cflag
operator||=
name|UCASE
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"swab"
argument_list|)
condition|)
block|{
name|cflag
operator||=
name|SWAB
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"noerror"
argument_list|)
condition|)
block|{
name|cflag
operator||=
name|NERR
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
if|if
condition|(
name|match
argument_list|(
literal|"sync"
argument_list|)
condition|)
block|{
name|cflag
operator||=
name|SYNC
expr_stmt|;
goto|goto
name|cloop
goto|;
block|}
block|}
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"bad arg: %s\n"
argument_list|,
name|string
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|conv
operator|==
name|null
operator|&&
name|cflag
operator|&
operator|(
name|LCASE
operator||
name|UCASE
operator|)
condition|)
name|conv
operator|=
name|cnull
expr_stmt|;
if|if
condition|(
name|ifile
condition|)
name|ibf
operator|=
name|open
argument_list|(
name|ifile
argument_list|,
literal|0
argument_list|)
expr_stmt|;
else|else
name|ibf
operator|=
name|dup
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|ibf
operator|<
literal|0
condition|)
block|{
name|perror
argument_list|(
name|ifile
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|obf
operator|=
name|ofile
condition|?
name|open
argument_list|(
name|ofile
argument_list|,
name|O_WRONLY
operator||
name|O_CREAT
argument_list|,
literal|0666
argument_list|)
else|:
name|dup
argument_list|(
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|obf
operator|<
literal|0
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"cannot create: %s\n"
argument_list|,
name|ofile
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|bs
condition|)
block|{
name|ibs
operator|=
name|obs
operator|=
name|bs
expr_stmt|;
if|if
condition|(
name|conv
operator|==
name|null
condition|)
name|fflag
operator|++
expr_stmt|;
block|}
if|if
condition|(
name|ibs
operator|==
literal|0
operator|||
name|obs
operator|==
literal|0
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"counts: cannot be zero\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|ibuf
operator|=
name|sbrk
argument_list|(
name|ibs
argument_list|)
expr_stmt|;
if|if
condition|(
name|fflag
condition|)
name|obuf
operator|=
name|ibuf
expr_stmt|;
else|else
name|obuf
operator|=
name|sbrk
argument_list|(
name|obs
argument_list|)
expr_stmt|;
name|sbrk
argument_list|(
literal|64
argument_list|)
expr_stmt|;
comment|/* For good measure */
if|if
condition|(
name|ibuf
operator|==
operator|(
name|char
operator|*
operator|)
operator|-
literal|1
operator|||
name|obuf
operator|==
operator|(
name|char
operator|*
operator|)
operator|-
literal|1
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"not enough memory\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|ibc
operator|=
literal|0
expr_stmt|;
name|obc
operator|=
literal|0
expr_stmt|;
name|cbc
operator|=
literal|0
expr_stmt|;
name|op
operator|=
name|obuf
expr_stmt|;
if|if
condition|(
name|signal
argument_list|(
name|SIGINT
argument_list|,
name|SIG_IGN
argument_list|)
operator|!=
name|SIG_IGN
condition|)
name|signal
argument_list|(
name|SIGINT
argument_list|,
name|term
argument_list|)
expr_stmt|;
while|while
condition|(
name|skip
condition|)
block|{
name|read
argument_list|(
name|ibf
argument_list|,
name|ibuf
argument_list|,
name|ibs
argument_list|)
expr_stmt|;
name|skip
operator|--
expr_stmt|;
block|}
while|while
condition|(
name|seekn
condition|)
block|{
name|lseek
argument_list|(
name|obf
argument_list|,
operator|(
name|long
operator|)
name|obs
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|seekn
operator|--
expr_stmt|;
block|}
name|loop
label|:
if|if
condition|(
name|ibc
operator|--
operator|==
literal|0
condition|)
block|{
name|ibc
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|count
operator|==
literal|0
operator|||
name|nifr
operator|+
name|nipr
operator|!=
name|count
condition|)
block|{
if|if
condition|(
name|cflag
operator|&
operator|(
name|NERR
operator||
name|SYNC
operator|)
condition|)
for|for
control|(
name|ip
operator|=
name|ibuf
operator|+
name|ibs
init|;
name|ip
operator|>
name|ibuf
condition|;
control|)
operator|*
operator|--
name|ip
operator|=
literal|0
expr_stmt|;
name|ibc
operator|=
name|read
argument_list|(
name|ibf
argument_list|,
name|ibuf
argument_list|,
name|ibs
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|ibc
operator|==
operator|-
literal|1
condition|)
block|{
name|perror
argument_list|(
literal|"read"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|cflag
operator|&
name|NERR
operator|)
operator|==
literal|0
condition|)
block|{
name|flsh
argument_list|()
expr_stmt|;
name|term
argument_list|()
expr_stmt|;
block|}
name|ibc
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|c
operator|=
literal|0
init|;
name|c
operator|<
name|ibs
condition|;
name|c
operator|++
control|)
if|if
condition|(
name|ibuf
index|[
name|c
index|]
operator|!=
literal|0
condition|)
name|ibc
operator|=
name|c
expr_stmt|;
name|stats
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
name|ibc
operator|==
literal|0
operator|&&
operator|--
name|files
operator|<=
literal|0
condition|)
block|{
name|flsh
argument_list|()
expr_stmt|;
name|term
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
name|ibc
operator|!=
name|ibs
condition|)
block|{
name|nipr
operator|++
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|SYNC
condition|)
name|ibc
operator|=
name|ibs
expr_stmt|;
block|}
else|else
name|nifr
operator|++
expr_stmt|;
name|ip
operator|=
name|ibuf
expr_stmt|;
name|c
operator|=
name|ibc
operator|>>
literal|1
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|SWAB
operator|&&
name|c
condition|)
do|do
block|{
name|a
operator|=
operator|*
name|ip
operator|++
expr_stmt|;
name|ip
index|[
operator|-
literal|1
index|]
operator|=
operator|*
name|ip
expr_stmt|;
operator|*
name|ip
operator|++
operator|=
name|a
expr_stmt|;
block|}
do|while
condition|(
operator|--
name|c
condition|)
do|;
name|ip
operator|=
name|ibuf
expr_stmt|;
if|if
condition|(
name|fflag
condition|)
block|{
name|obc
operator|=
name|ibc
expr_stmt|;
name|flsh
argument_list|()
expr_stmt|;
name|ibc
operator|=
literal|0
expr_stmt|;
block|}
goto|goto
name|loop
goto|;
block|}
name|c
operator|=
literal|0
expr_stmt|;
name|c
operator||=
operator|*
name|ip
operator|++
expr_stmt|;
name|c
operator|&=
literal|0377
expr_stmt|;
call|(
modifier|*
name|conv
call|)
argument_list|(
name|c
argument_list|)
expr_stmt|;
goto|goto
name|loop
goto|;
block|}
end_function

begin_macro
name|flsh
argument_list|()
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
if|if
condition|(
name|obc
condition|)
block|{
if|if
condition|(
name|obc
operator|==
name|obs
condition|)
name|nofr
operator|++
expr_stmt|;
else|else
name|nopr
operator|++
expr_stmt|;
name|c
operator|=
name|write
argument_list|(
name|obf
argument_list|,
name|obuf
argument_list|,
name|obc
argument_list|)
expr_stmt|;
if|if
condition|(
name|c
operator|!=
name|obc
condition|)
block|{
name|perror
argument_list|(
literal|"write"
argument_list|)
expr_stmt|;
name|term
argument_list|()
expr_stmt|;
block|}
name|obc
operator|=
literal|0
expr_stmt|;
block|}
block|}
end_block

begin_macro
name|match
argument_list|(
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|char
modifier|*
name|cs
decl_stmt|;
name|cs
operator|=
name|string
expr_stmt|;
while|while
condition|(
operator|*
name|cs
operator|++
operator|==
operator|*
name|s
condition|)
if|if
condition|(
operator|*
name|s
operator|++
operator|==
literal|'\0'
condition|)
goto|goto
name|true
goto|;
if|if
condition|(
operator|*
name|s
operator|!=
literal|'\0'
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|true
label|:
name|cs
operator|--
expr_stmt|;
name|string
operator|=
name|cs
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_block

begin_macro
name|number
argument_list|(
argument|big
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|char
modifier|*
name|cs
decl_stmt|;
name|long
name|n
decl_stmt|;
name|cs
operator|=
name|string
expr_stmt|;
name|n
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|*
name|cs
operator|>=
literal|'0'
operator|&&
operator|*
name|cs
operator|<=
literal|'9'
condition|)
name|n
operator|=
name|n
operator|*
literal|10
operator|+
operator|*
name|cs
operator|++
operator|-
literal|'0'
expr_stmt|;
for|for
control|(
init|;
condition|;
control|)
switch|switch
condition|(
operator|*
name|cs
operator|++
condition|)
block|{
case|case
literal|'k'
case|:
name|n
operator|*=
literal|1024
expr_stmt|;
continue|continue;
case|case
literal|'w'
case|:
name|n
operator|*=
sizeof|sizeof
argument_list|(
name|int
argument_list|)
expr_stmt|;
continue|continue;
case|case
literal|'b'
case|:
name|n
operator|*=
literal|512
expr_stmt|;
continue|continue;
case|case
literal|'*'
case|:
case|case
literal|'x'
case|:
name|string
operator|=
name|cs
expr_stmt|;
name|n
operator|*=
name|number
argument_list|(
name|BIG
argument_list|)
expr_stmt|;
case|case
literal|'\0'
case|:
if|if
condition|(
name|n
operator|>=
name|big
operator|||
name|n
operator|<
literal|0
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"dd: argument %ld out of range\n"
argument_list|,
name|n
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
name|n
operator|)
return|;
block|}
comment|/* never gets here */
block|}
end_block

begin_macro
name|cnull
argument_list|(
argument|cc
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
name|c
operator|=
name|cc
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|UCASE
operator|&&
name|c
operator|>=
literal|'a'
operator|&&
name|c
operator|<=
literal|'z'
condition|)
name|c
operator|+=
literal|'A'
operator|-
literal|'a'
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|LCASE
operator|&&
name|c
operator|>=
literal|'A'
operator|&&
name|c
operator|<=
literal|'Z'
condition|)
name|c
operator|+=
literal|'a'
operator|-
literal|'A'
expr_stmt|;
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|null
argument_list|(
argument|c
argument_list|)
end_macro

begin_block
block|{
operator|*
name|op
operator|=
name|c
expr_stmt|;
name|op
operator|++
expr_stmt|;
if|if
condition|(
operator|++
name|obc
operator|>=
name|obs
condition|)
block|{
name|flsh
argument_list|()
expr_stmt|;
name|op
operator|=
name|obuf
expr_stmt|;
block|}
block|}
end_block

begin_macro
name|ascii
argument_list|(
argument|cc
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
name|c
operator|=
name|etoa
index|[
name|cc
index|]
operator|&
literal|0377
expr_stmt|;
if|if
condition|(
name|cbs
operator|==
literal|0
condition|)
block|{
name|cnull
argument_list|(
name|c
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|c
operator|==
literal|' '
condition|)
block|{
name|nspace
operator|++
expr_stmt|;
goto|goto
name|out
goto|;
block|}
while|while
condition|(
name|nspace
operator|>
literal|0
condition|)
block|{
name|null
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
name|nspace
operator|--
expr_stmt|;
block|}
name|cnull
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|out
label|:
if|if
condition|(
operator|++
name|cbc
operator|>=
name|cbs
condition|)
block|{
name|null
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
name|cbc
operator|=
literal|0
expr_stmt|;
name|nspace
operator|=
literal|0
expr_stmt|;
block|}
block|}
end_block

begin_macro
name|unblock
argument_list|(
argument|cc
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
name|c
operator|=
name|cc
operator|&
literal|0377
expr_stmt|;
if|if
condition|(
name|cbs
operator|==
literal|0
condition|)
block|{
name|cnull
argument_list|(
name|c
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|c
operator|==
literal|' '
condition|)
block|{
name|nspace
operator|++
expr_stmt|;
goto|goto
name|out
goto|;
block|}
while|while
condition|(
name|nspace
operator|>
literal|0
condition|)
block|{
name|null
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
name|nspace
operator|--
expr_stmt|;
block|}
name|cnull
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|out
label|:
if|if
condition|(
operator|++
name|cbc
operator|>=
name|cbs
condition|)
block|{
name|null
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
name|cbc
operator|=
literal|0
expr_stmt|;
name|nspace
operator|=
literal|0
expr_stmt|;
block|}
block|}
end_block

begin_macro
name|ebcdic
argument_list|(
argument|cc
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
name|c
operator|=
name|cc
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|UCASE
operator|&&
name|c
operator|>=
literal|'a'
operator|&&
name|c
operator|<=
literal|'z'
condition|)
name|c
operator|+=
literal|'A'
operator|-
literal|'a'
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|LCASE
operator|&&
name|c
operator|>=
literal|'A'
operator|&&
name|c
operator|<=
literal|'Z'
condition|)
name|c
operator|+=
literal|'a'
operator|-
literal|'A'
expr_stmt|;
name|c
operator|=
name|atoe
index|[
name|c
index|]
operator|&
literal|0377
expr_stmt|;
if|if
condition|(
name|cbs
operator|==
literal|0
condition|)
block|{
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|cc
operator|==
literal|'\n'
condition|)
block|{
while|while
condition|(
name|cbc
operator|<
name|cbs
condition|)
block|{
name|null
argument_list|(
name|atoe
index|[
literal|' '
index|]
argument_list|)
expr_stmt|;
name|cbc
operator|++
expr_stmt|;
block|}
name|cbc
operator|=
literal|0
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|cbc
operator|==
name|cbs
condition|)
name|ntrunc
operator|++
expr_stmt|;
name|cbc
operator|++
expr_stmt|;
if|if
condition|(
name|cbc
operator|<=
name|cbs
condition|)
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|ibm
argument_list|(
argument|cc
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
name|c
operator|=
name|cc
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|UCASE
operator|&&
name|c
operator|>=
literal|'a'
operator|&&
name|c
operator|<=
literal|'z'
condition|)
name|c
operator|+=
literal|'A'
operator|-
literal|'a'
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|LCASE
operator|&&
name|c
operator|>=
literal|'A'
operator|&&
name|c
operator|<=
literal|'Z'
condition|)
name|c
operator|+=
literal|'a'
operator|-
literal|'A'
expr_stmt|;
name|c
operator|=
name|atoibm
index|[
name|c
index|]
operator|&
literal|0377
expr_stmt|;
if|if
condition|(
name|cbs
operator|==
literal|0
condition|)
block|{
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|cc
operator|==
literal|'\n'
condition|)
block|{
while|while
condition|(
name|cbc
operator|<
name|cbs
condition|)
block|{
name|null
argument_list|(
name|atoibm
index|[
literal|' '
index|]
argument_list|)
expr_stmt|;
name|cbc
operator|++
expr_stmt|;
block|}
name|cbc
operator|=
literal|0
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|cbc
operator|==
name|cbs
condition|)
name|ntrunc
operator|++
expr_stmt|;
name|cbc
operator|++
expr_stmt|;
if|if
condition|(
name|cbc
operator|<=
name|cbs
condition|)
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|block
argument_list|(
argument|cc
argument_list|)
end_macro

begin_block
block|{
specifier|register
name|c
expr_stmt|;
name|c
operator|=
name|cc
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|UCASE
operator|&&
name|c
operator|>=
literal|'a'
operator|&&
name|c
operator|<=
literal|'z'
condition|)
name|c
operator|+=
literal|'A'
operator|-
literal|'a'
expr_stmt|;
if|if
condition|(
name|cflag
operator|&
name|LCASE
operator|&&
name|c
operator|>=
literal|'A'
operator|&&
name|c
operator|<=
literal|'Z'
condition|)
name|c
operator|+=
literal|'a'
operator|-
literal|'A'
expr_stmt|;
name|c
operator|&=
literal|0377
expr_stmt|;
if|if
condition|(
name|cbs
operator|==
literal|0
condition|)
block|{
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|cc
operator|==
literal|'\n'
condition|)
block|{
while|while
condition|(
name|cbc
operator|<
name|cbs
condition|)
block|{
name|null
argument_list|(
literal|' '
argument_list|)
expr_stmt|;
name|cbc
operator|++
expr_stmt|;
block|}
name|cbc
operator|=
literal|0
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|cbc
operator|==
name|cbs
condition|)
name|ntrunc
operator|++
expr_stmt|;
name|cbc
operator|++
expr_stmt|;
if|if
condition|(
name|cbc
operator|<=
name|cbs
condition|)
name|null
argument_list|(
name|c
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|term
argument_list|()
end_macro

begin_block
block|{
name|stats
argument_list|()
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|stats
argument_list|()
end_macro

begin_block
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%u+%u records in\n"
argument_list|,
name|nifr
argument_list|,
name|nipr
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%u+%u records out\n"
argument_list|,
name|nofr
argument_list|,
name|nopr
argument_list|)
expr_stmt|;
if|if
condition|(
name|ntrunc
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%u truncated records\n"
argument_list|,
name|ntrunc
argument_list|)
expr_stmt|;
block|}
end_block

end_unit

