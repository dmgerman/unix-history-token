begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/***************************************************************************  * This program is Copyright (C) 1986, 1987, 1988 by Jonathan Payne.  JOVE *  * is provided to you without charge, and with no warranty.  You may give  *  * away copies of JOVE, including sources, provided that this notice is    *  * included in all the files.                                              *  ***************************************************************************/
end_comment

begin_include
include|#
directive|include
file|"jove.h"
end_include

begin_include
include|#
directive|include
file|"table.h"
end_include

begin_decl_stmt
name|private
name|Table
modifier|*
name|tables
init|=
name|NIL
decl_stmt|;
end_decl_stmt

begin_function
name|Table
modifier|*
name|make_table
parameter_list|()
block|{
name|Table
modifier|*
name|tab
init|=
operator|(
name|Table
operator|*
operator|)
name|emalloc
argument_list|(
sizeof|sizeof
expr|*
name|tab
argument_list|)
decl_stmt|;
name|tab
operator|->
name|t_next
operator|=
name|tables
expr_stmt|;
name|tables
operator|=
name|tab
expr_stmt|;
name|tab
operator|->
name|t_wordlist
operator|=
name|NIL
expr_stmt|;
return|return
name|tab
return|;
block|}
end_function

begin_function
name|Word
modifier|*
name|word_in_table
parameter_list|(
name|text
parameter_list|,
name|table
parameter_list|)
name|char
modifier|*
name|text
decl_stmt|;
name|Table
modifier|*
name|table
decl_stmt|;
block|{
specifier|register
name|Word
modifier|*
name|w
decl_stmt|;
for|for
control|(
name|w
operator|=
name|table_top
argument_list|(
name|table
argument_list|)
init|;
name|w
operator|!=
name|NIL
condition|;
name|w
operator|=
name|next_word
argument_list|(
name|w
argument_list|)
control|)
if|if
condition|(
name|strcmp
argument_list|(
name|word_text
argument_list|(
name|w
argument_list|)
argument_list|,
name|text
argument_list|)
operator|==
literal|0
condition|)
break|break;
comment|/* already in list */
return|return
name|w
return|;
block|}
end_function

begin_function
name|void
name|add_word
parameter_list|(
name|wname
parameter_list|,
name|table
parameter_list|)
name|char
modifier|*
name|wname
decl_stmt|;
name|Table
modifier|*
name|table
decl_stmt|;
block|{
specifier|register
name|Word
modifier|*
name|w
decl_stmt|;
if|if
condition|(
name|w
operator|=
name|word_in_table
argument_list|(
name|wname
argument_list|,
name|table
argument_list|)
condition|)
return|return;
name|w
operator|=
operator|(
name|Word
operator|*
operator|)
name|emalloc
argument_list|(
sizeof|sizeof
expr|*
name|w
argument_list|)
expr_stmt|;
name|word_text
argument_list|(
name|w
argument_list|)
operator|=
name|wname
expr_stmt|;
name|next_word
argument_list|(
name|w
argument_list|)
operator|=
name|table_top
argument_list|(
name|table
argument_list|)
expr_stmt|;
name|table_top
argument_list|(
name|table
argument_list|)
operator|=
name|w
expr_stmt|;
block|}
end_function

end_unit

