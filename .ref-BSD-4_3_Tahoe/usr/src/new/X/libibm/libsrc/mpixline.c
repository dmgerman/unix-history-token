begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
modifier|*
name|rcsid_mpixline_c
init|=
literal|"$Header: mpixline.c,v 10.1 86/11/19 10:43:05 jg Exp $"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
endif|lint
end_endif

begin_comment
comment|/* mpixline.c - multi pixel wide line drawing routines  *  *	MultiPixelLine	preprocessing routine for multi pixel wide line drawing  *	SolidLine	draws solid lines  *	DashedLine	draws dashed lines  *	PatternedLine	draws patterned lines  *  *  	Author:  *		Scott Bates  *		Brown University  *		IRIS, Box 1946  *      	Providence, RI 02912  *  *  *		Copyright (c) 1986 Brown University  *  * Permission to use, copy, modify and distribute this software and its  * documentation for any purpose and without fee is hereby granted, provided  * that the above copyright notice appear in all copies, and that both  * that copyright notice and this permission notice appear in supporting  * documentation, and that the name of Brown University not be used in  * advertising or publicity pertaining to distribution of the software  * without specific, written prior permission. Brown University makes no  * representations about the suitability of this software for any purpose.  * It is provided "as-is" without express or implied warranty.  */
end_comment

begin_include
include|#
directive|include
file|"private.h"
end_include

begin_include
include|#
directive|include
file|"bitblt.h"
end_include

begin_expr_stmt
name|MultiPixelLine
argument_list|(
name|Line
argument_list|)
specifier|register
name|Blt_Line
operator|*
name|Line
expr_stmt|;
end_expr_stmt

begin_block
block|{
specifier|register
name|Blt
modifier|*
name|blt
init|=
operator|&
name|Line
operator|->
name|blt
decl_stmt|;
ifdef|#
directive|ifdef
name|TRACE_X
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"In MultiPixelLine\n"
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stderr
argument_list|)
expr_stmt|;
endif|#
directive|endif
endif|TRACE_X
ifdef|#
directive|ifdef
name|AED
name|blt
operator|->
name|blt_flags
operator||=
name|BLT_ECHO
expr_stmt|;
endif|#
directive|endif
endif|AED
comment|/* 	 * If the line is a solid horizontal or vertical tile 	 * the destination rectangle. 	 */
if|if
condition|(
name|Line
operator|->
name|DrawMode
operator|==
name|DrawSolidLine
operator|&&
operator|(
name|Line
operator|->
name|StopX
operator|==
name|Line
operator|->
name|StartX
operator|||
name|Line
operator|->
name|StopY
operator|==
name|Line
operator|->
name|StartY
operator|)
condition|)
block|{
comment|/* 		 * Line is a solid horizontal or vertical so handle 		 * this as a tile fill of destination rectangle 		 */
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/* Line is a diagonal */
specifier|register
name|short
name|StartX
init|=
name|Line
operator|->
name|StartX
decl_stmt|;
specifier|register
name|short
name|StartY
init|=
name|Line
operator|->
name|StartY
decl_stmt|;
specifier|register
name|short
name|StopX
init|=
name|Line
operator|->
name|StopX
decl_stmt|;
specifier|register
name|short
name|StopY
init|=
name|Line
operator|->
name|StopY
decl_stmt|;
name|int
name|BrushX
init|=
name|Line
operator|->
name|BrushX
decl_stmt|;
name|int
name|BrushY
init|=
name|Line
operator|->
name|BrushY
decl_stmt|;
name|short
modifier|*
name|Top
decl_stmt|,
modifier|*
name|Left
decl_stmt|,
modifier|*
name|Bottom
decl_stmt|,
modifier|*
name|Right
decl_stmt|;
name|int
name|DeltaX
decl_stmt|,
name|DeltaY
decl_stmt|,
name|SignY
decl_stmt|;
comment|/* 		 * Always draw line from left to right 		 */
if|if
condition|(
name|StopX
operator|<
name|StartX
condition|)
block|{
name|short
name|Temp
decl_stmt|;
name|Temp
operator|=
name|StopX
expr_stmt|;
name|StopX
operator|=
name|StartX
expr_stmt|;
name|StartX
operator|=
name|Temp
expr_stmt|;
name|Temp
operator|=
name|StopY
expr_stmt|;
name|StopY
operator|=
name|StartY
expr_stmt|;
name|StartY
operator|=
name|Temp
expr_stmt|;
block|}
comment|/* 		 * Initialize pointers to destination rectangle 		 */
name|Top
operator|=
operator|&
name|blt
operator|->
name|dst_rect
operator|.
name|origin_y
expr_stmt|;
name|Left
operator|=
operator|&
name|blt
operator|->
name|dst_rect
operator|.
name|origin_x
expr_stmt|;
name|Bottom
operator|=
operator|&
name|blt
operator|->
name|dst_rect
operator|.
name|corner_y
expr_stmt|;
name|Right
operator|=
operator|&
name|blt
operator|->
name|dst_rect
operator|.
name|corner_x
expr_stmt|;
comment|/* 		 * Set destination rectangle to be the first 		 * the point in line 		 */
operator|*
name|Left
operator|=
name|StartX
expr_stmt|;
operator|*
name|Top
operator|=
name|StartY
expr_stmt|;
operator|*
name|Right
operator|=
name|StartX
operator|+
name|Line
operator|->
name|BrushX
expr_stmt|;
operator|*
name|Bottom
operator|=
name|StartY
operator|+
name|Line
operator|->
name|BrushY
expr_stmt|;
comment|/* 		 * Compute X and Y deltas 		 */
name|DeltaX
operator|=
name|StopX
operator|-
name|StartX
expr_stmt|;
name|DeltaY
operator|=
name|StopY
operator|-
name|StartY
expr_stmt|;
comment|/* 		 * Determine vertical drawing direction 		 * and adjust values if required 		 */
if|if
condition|(
name|DeltaY
operator|<
literal|0
condition|)
block|{
name|DeltaY
operator|=
operator|-
name|DeltaY
expr_stmt|;
comment|/* bottom to top */
name|SignY
operator|=
operator|-
literal|1
expr_stmt|;
name|BrushY
operator|=
operator|-
name|BrushY
expr_stmt|;
name|Top
operator|=
operator|&
name|blt
operator|->
name|dst_rect
operator|.
name|corner_y
expr_stmt|;
name|Bottom
operator|=
operator|&
name|blt
operator|->
name|dst_rect
operator|.
name|origin_y
expr_stmt|;
block|}
else|else
block|{
name|SignY
operator|=
literal|1
expr_stmt|;
comment|/* top to bottom */
block|}
comment|/* 		 * Call appropriate line drawing routine 		 */
switch|switch
condition|(
name|Line
operator|->
name|DrawMode
condition|)
block|{
case|case
operator|(
name|DrawSolidLine
operator|)
case|:
name|SolidLine
argument_list|(
name|Line
argument_list|,
name|Top
argument_list|,
name|Left
argument_list|,
name|Bottom
argument_list|,
name|Right
argument_list|,
name|DeltaX
argument_list|,
name|DeltaY
argument_list|,
name|BrushX
argument_list|,
name|BrushY
argument_list|,
name|SignY
argument_list|)
expr_stmt|;
break|break;
case|case
operator|(
name|DrawDashedLine
operator|)
case|:
name|DashedLine
argument_list|(
name|Line
argument_list|,
name|Top
argument_list|,
name|Left
argument_list|,
name|Bottom
argument_list|,
name|Right
argument_list|,
name|DeltaX
argument_list|,
name|DeltaY
argument_list|,
name|BrushX
argument_list|,
name|BrushY
argument_list|,
name|SignY
argument_list|)
expr_stmt|;
break|break;
case|case
operator|(
name|DrawPatternedLine
operator|)
case|:
name|PatternedLine
argument_list|(
name|Line
argument_list|,
name|Top
argument_list|,
name|Left
argument_list|,
name|Bottom
argument_list|,
name|Right
argument_list|,
name|DeltaX
argument_list|,
name|DeltaY
argument_list|,
name|BrushX
argument_list|,
name|BrushY
argument_list|,
name|SignY
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_block

begin_comment
comment|/*  * Draw a solid line  */
end_comment

begin_expr_stmt
specifier|static
name|SolidLine
argument_list|(
argument|Line
argument_list|,
argument|Top
argument_list|,
argument|Left
argument_list|,
argument|Bottom
argument_list|,
argument|Right
argument_list|,
argument|DeltaX
argument_list|,
argument|DeltaY
argument_list|,
argument|BrushX
argument_list|,
argument|BrushY
argument_list|,
argument|SignY
argument_list|)
name|Blt_Line
operator|*
name|Line
expr_stmt|;
end_expr_stmt

begin_decl_stmt
specifier|register
name|short
modifier|*
name|Top
decl_stmt|,
modifier|*
name|Left
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|short
modifier|*
name|Bottom
decl_stmt|,
modifier|*
name|Right
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|DeltaX
decl_stmt|,
name|DeltaY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|BrushX
decl_stmt|,
name|BrushY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|SignY
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|Blt
modifier|*
name|blt
init|=
operator|&
name|Line
operator|->
name|blt
decl_stmt|;
specifier|register
name|BitsLeftToDraw
operator|,
name|Sentinel
expr_stmt|;
ifdef|#
directive|ifdef
name|TRACE_X
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"In SolidLine\n"
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stderr
argument_list|)
expr_stmt|;
endif|#
directive|endif
endif|TRACE_X
comment|/* 	 * draw solid line 	 */
comment|/* line is more horizontal */
if|if
condition|(
name|DeltaX
operator|>
name|DeltaY
condition|)
block|{
name|Sentinel
operator|=
name|DeltaX
operator|>>
literal|1
expr_stmt|;
name|BitsLeftToDraw
operator|=
name|DeltaX
expr_stmt|;
while|while
condition|(
name|BitsLeftToDraw
operator|--
condition|)
block|{
if|if
condition|(
operator|(
name|Sentinel
operator|-=
name|DeltaY
operator|)
operator|<
literal|0
condition|)
block|{
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
operator|*
name|Left
operator|=
operator|*
name|Right
operator|-
name|BrushX
operator|+
literal|1
expr_stmt|;
operator|*
name|Top
operator|+=
name|SignY
expr_stmt|;
operator|*
name|Bottom
operator|+=
name|SignY
expr_stmt|;
name|Sentinel
operator|+=
name|DeltaX
expr_stmt|;
block|}
operator|(
operator|*
name|Right
operator|)
operator|++
expr_stmt|;
block|}
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/* line is more vertical */
name|Sentinel
operator|=
name|DeltaY
operator|>>
literal|1
expr_stmt|;
name|BitsLeftToDraw
operator|=
name|DeltaY
expr_stmt|;
while|while
condition|(
name|BitsLeftToDraw
operator|--
condition|)
block|{
if|if
condition|(
operator|(
name|Sentinel
operator|-=
name|DeltaX
operator|)
operator|<
literal|0
condition|)
block|{
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
operator|*
name|Top
operator|=
operator|*
name|Bottom
operator|-
name|BrushY
operator|+
name|SignY
expr_stmt|;
operator|(
operator|*
name|Left
operator|)
operator|++
expr_stmt|;
operator|(
operator|*
name|Right
operator|)
operator|++
expr_stmt|;
name|Sentinel
operator|+=
name|DeltaY
expr_stmt|;
block|}
operator|*
name|Bottom
operator|+=
name|SignY
expr_stmt|;
block|}
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
block|}
block|}
end_block

begin_comment
comment|/*  * Draw a dashed line  */
end_comment

begin_expr_stmt
specifier|static
name|DashedLine
argument_list|(
argument|Line
argument_list|,
argument|Top
argument_list|,
argument|Left
argument_list|,
argument|Bottom
argument_list|,
argument|Right
argument_list|,
argument|DeltaX
argument_list|,
argument|DeltaY
argument_list|,
argument|BrushX
argument_list|,
argument|BrushY
argument_list|,
argument|SignY
argument_list|)
name|Blt_Line
operator|*
name|Line
expr_stmt|;
end_expr_stmt

begin_decl_stmt
specifier|register
name|short
modifier|*
name|Top
decl_stmt|,
modifier|*
name|Left
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|short
modifier|*
name|Bottom
decl_stmt|,
modifier|*
name|Right
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|DeltaX
decl_stmt|,
name|DeltaY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|BrushX
decl_stmt|,
name|BrushY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|SignY
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|Blt
modifier|*
name|blt
init|=
operator|&
name|Line
operator|->
name|blt
decl_stmt|;
name|u_short
name|PatternFirstBit
init|=
literal|1
operator|<<
operator|(
name|Line
operator|->
name|PatternLength
operator|-
literal|1
operator|)
decl_stmt|;
name|u_short
name|PatternBit
init|=
name|PatternFirstBit
decl_stmt|;
name|u_short
name|Pattern
init|=
name|Line
operator|->
name|Pattern
decl_stmt|;
name|short
name|PatternMultiplier
init|=
name|Line
operator|->
name|PatternMultiplier
decl_stmt|;
specifier|register
name|BitsLeftToDraw
operator|,
name|Sentinel
expr_stmt|;
ifdef|#
directive|ifdef
name|TRACE_X
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"In DashedLine\n"
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stderr
argument_list|)
expr_stmt|;
endif|#
directive|endif
endif|TRACE_X
comment|/* 	 * Draw dashed line 	 */
comment|/* line is more horizontal */
if|if
condition|(
name|DeltaX
operator|>
name|DeltaY
condition|)
block|{
name|Sentinel
operator|=
name|DeltaX
operator|>>
literal|1
expr_stmt|;
name|BitsLeftToDraw
operator|=
name|DeltaX
expr_stmt|;
while|while
condition|(
name|BitsLeftToDraw
operator|--
condition|)
block|{
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
if|if
condition|(
operator|--
name|PatternMultiplier
operator|==
literal|0
condition|)
block|{
name|PatternMultiplier
operator|=
name|Line
operator|->
name|PatternMultiplier
expr_stmt|;
if|if
condition|(
operator|(
name|PatternBit
operator|>>=
literal|1
operator|)
operator|==
literal|0
condition|)
name|PatternBit
operator|=
name|PatternFirstBit
expr_stmt|;
block|}
operator|*
name|Left
operator|=
operator|*
name|Right
operator|-
name|BrushX
operator|+
literal|1
expr_stmt|;
operator|(
operator|*
name|Right
operator|)
operator|++
expr_stmt|;
if|if
condition|(
operator|(
name|Sentinel
operator|-=
name|DeltaY
operator|)
operator|<
literal|0
condition|)
block|{
operator|*
name|Top
operator|+=
name|SignY
expr_stmt|;
operator|*
name|Bottom
operator|+=
name|SignY
expr_stmt|;
name|Sentinel
operator|+=
name|DeltaX
expr_stmt|;
block|}
block|}
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/* line is more vertical */
name|Sentinel
operator|=
name|DeltaY
operator|>>
literal|1
expr_stmt|;
name|BitsLeftToDraw
operator|=
name|DeltaY
expr_stmt|;
while|while
condition|(
name|BitsLeftToDraw
operator|--
condition|)
block|{
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
if|if
condition|(
operator|--
name|PatternMultiplier
operator|==
literal|0
condition|)
block|{
name|PatternMultiplier
operator|=
name|Line
operator|->
name|PatternMultiplier
expr_stmt|;
if|if
condition|(
operator|(
name|PatternBit
operator|>>=
literal|1
operator|)
operator|==
literal|0
condition|)
name|PatternBit
operator|=
name|PatternFirstBit
expr_stmt|;
block|}
operator|*
name|Top
operator|=
operator|*
name|Bottom
operator|-
name|BrushY
operator|+
name|SignY
expr_stmt|;
operator|*
name|Bottom
operator|+=
name|SignY
expr_stmt|;
if|if
condition|(
operator|(
name|Sentinel
operator|-=
name|DeltaX
operator|)
operator|<
literal|0
condition|)
block|{
operator|(
operator|*
name|Left
operator|)
operator|++
expr_stmt|;
operator|(
operator|*
name|Right
operator|)
operator|++
expr_stmt|;
name|Sentinel
operator|+=
name|DeltaY
expr_stmt|;
block|}
block|}
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
block|}
block|}
end_block

begin_comment
comment|/*  * Draw a patterned line  */
end_comment

begin_expr_stmt
specifier|static
name|PatternedLine
argument_list|(
argument|Line
argument_list|,
argument|Top
argument_list|,
argument|Left
argument_list|,
argument|Bottom
argument_list|,
argument|Right
argument_list|,
argument|DeltaX
argument_list|,
argument|DeltaY
argument_list|,
argument|BrushX
argument_list|,
argument|BrushY
argument_list|,
argument|SignY
argument_list|)
name|Blt_Line
operator|*
name|Line
expr_stmt|;
end_expr_stmt

begin_decl_stmt
specifier|register
name|short
modifier|*
name|Top
decl_stmt|,
modifier|*
name|Left
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|short
modifier|*
name|Bottom
decl_stmt|,
modifier|*
name|Right
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|DeltaX
decl_stmt|,
name|DeltaY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|BrushX
decl_stmt|,
name|BrushY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|SignY
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|Blt
modifier|*
name|blt
init|=
operator|&
name|Line
operator|->
name|blt
decl_stmt|;
name|u_short
name|PatternFirstBit
init|=
literal|1
operator|<<
operator|(
name|Line
operator|->
name|PatternLength
operator|-
literal|1
operator|)
decl_stmt|;
name|u_short
name|PatternBit
init|=
name|PatternFirstBit
decl_stmt|;
name|u_short
name|Pattern
init|=
name|Line
operator|->
name|Pattern
decl_stmt|;
name|short
name|PatternMultiplier
init|=
name|Line
operator|->
name|PatternMultiplier
decl_stmt|;
name|Blt_Tile
modifier|*
name|SourceTile
init|=
name|blt
operator|->
name|tile_ptr
decl_stmt|;
name|Blt_Tile
modifier|*
name|AltSourceTile
init|=
name|Line
operator|->
name|AlternateTile
decl_stmt|;
specifier|register
name|BitsLeftToDraw
operator|,
name|Sentinel
expr_stmt|;
ifdef|#
directive|ifdef
name|TRACE_X
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"In PatternedLine\n"
argument_list|)
expr_stmt|;
name|fflush
argument_list|(
name|stderr
argument_list|)
expr_stmt|;
endif|#
directive|endif
endif|TRACE_X
comment|/* 	 * Draw patterned line 	 */
comment|/* line is more horizontal */
if|if
condition|(
name|DeltaX
operator|>
name|DeltaY
condition|)
block|{
name|Sentinel
operator|=
name|DeltaX
operator|>>
literal|1
expr_stmt|;
name|BitsLeftToDraw
operator|=
name|DeltaX
expr_stmt|;
while|while
condition|(
name|BitsLeftToDraw
operator|--
condition|)
block|{
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|blt
operator|->
name|tile_ptr
operator|=
name|SourceTile
expr_stmt|;
else|else
name|blt
operator|->
name|tile_ptr
operator|=
name|AltSourceTile
expr_stmt|;
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
if|if
condition|(
operator|--
name|PatternMultiplier
operator|==
literal|0
condition|)
block|{
name|PatternMultiplier
operator|=
name|Line
operator|->
name|PatternMultiplier
expr_stmt|;
if|if
condition|(
operator|(
name|PatternBit
operator|>>=
literal|1
operator|)
operator|==
literal|0
condition|)
name|PatternBit
operator|=
name|PatternFirstBit
expr_stmt|;
block|}
operator|*
name|Left
operator|=
operator|*
name|Right
operator|-
name|BrushX
operator|+
literal|1
expr_stmt|;
operator|(
operator|*
name|Right
operator|)
operator|++
expr_stmt|;
if|if
condition|(
operator|(
name|Sentinel
operator|-=
name|DeltaY
operator|)
operator|<
literal|0
condition|)
block|{
operator|*
name|Top
operator|+=
name|SignY
expr_stmt|;
operator|*
name|Bottom
operator|+=
name|SignY
expr_stmt|;
name|Sentinel
operator|+=
name|DeltaX
expr_stmt|;
block|}
block|}
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|blt
operator|->
name|tile_ptr
operator|=
name|SourceTile
expr_stmt|;
else|else
name|blt
operator|->
name|tile_ptr
operator|=
name|AltSourceTile
expr_stmt|;
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
name|blt
operator|->
name|tile_ptr
operator|=
name|SourceTile
expr_stmt|;
block|}
else|else
block|{
comment|/* line is more vertical */
name|Sentinel
operator|=
name|DeltaY
operator|>>
literal|1
expr_stmt|;
name|BitsLeftToDraw
operator|=
name|DeltaY
expr_stmt|;
while|while
condition|(
name|BitsLeftToDraw
operator|--
condition|)
block|{
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|blt
operator|->
name|tile_ptr
operator|=
name|SourceTile
expr_stmt|;
else|else
name|blt
operator|->
name|tile_ptr
operator|=
name|AltSourceTile
expr_stmt|;
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
if|if
condition|(
operator|--
name|PatternMultiplier
operator|==
literal|0
condition|)
block|{
name|PatternMultiplier
operator|=
name|Line
operator|->
name|PatternMultiplier
expr_stmt|;
if|if
condition|(
operator|(
name|PatternBit
operator|>>=
literal|1
operator|)
operator|==
literal|0
condition|)
name|PatternBit
operator|=
name|PatternFirstBit
expr_stmt|;
block|}
operator|*
name|Top
operator|=
operator|*
name|Bottom
operator|-
name|BrushY
operator|+
name|SignY
expr_stmt|;
operator|*
name|Bottom
operator|+=
name|SignY
expr_stmt|;
if|if
condition|(
operator|(
name|Sentinel
operator|-=
name|DeltaX
operator|)
operator|<
literal|0
condition|)
block|{
operator|(
operator|*
name|Left
operator|)
operator|++
expr_stmt|;
operator|(
operator|*
name|Right
operator|)
operator|++
expr_stmt|;
name|Sentinel
operator|+=
name|DeltaY
expr_stmt|;
block|}
block|}
if|if
condition|(
name|Pattern
operator|&
name|PatternBit
condition|)
name|blt
operator|->
name|tile_ptr
operator|=
name|SourceTile
expr_stmt|;
else|else
name|blt
operator|->
name|tile_ptr
operator|=
name|AltSourceTile
expr_stmt|;
name|bitblt
argument_list|(
name|blt
argument_list|)
expr_stmt|;
name|blt
operator|->
name|tile_ptr
operator|=
name|SourceTile
expr_stmt|;
block|}
block|}
end_block

end_unit

