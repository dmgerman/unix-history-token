begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
modifier|*
name|rcsid_tile_c
init|=
literal|"$Header: tile.c,v 10.1 86/11/29 13:53:11 jg Rel $"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
endif|lint
end_endif

begin_comment
comment|/*      Copyright 1986 by the University of Utah      Permission to use, copy, modify, and distribute this     software and its documentation for any purpose and without     fee is hereby granted, provided that the above copyright     notice appear in all copies and that both that copyright     notice and this permission notice appear in supporting     documentation, and that the name of the University of Utah     not be used in advertising or publicity pertaining to      distribution of the software without specific, written      prior permission. The University of Utah makes no     representations about the suitability of this software for     any purpose.  It is provided "as is" without express or     implied warranty.      */
end_comment

begin_comment
comment|/* tile.c	Perform a raster operation involving a pattern  *  *	TileFill	Patterns a portion of the screen  *	DrawFilled	Draw a filled generalized line/polygon/combination  *  */
end_comment

begin_comment
comment|/*  *	ToDo:  *		Implement tile fill with xymap  */
end_comment

begin_include
include|#
directive|include
file|"Xapollo.h"
end_include

begin_decl_stmt
specifier|extern
name|boolean
name|borrow_flag
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|gpr_$bitmap_desc_t
name|TileBM
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|old_op
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|status_$t
name|status
decl_stmt|;
end_decl_stmt

begin_expr_stmt
specifier|static
name|tilefill
argument_list|(
argument|tile
argument_list|,
argument|xymask
argument_list|,
argument|dstx
argument_list|,
argument|dsty
argument_list|,
argument|width
argument_list|,
argument|height
argument_list|,
argument|op
argument_list|,
argument|clips
argument_list|,
argument|clipcount
argument_list|,
argument|xoff
argument_list|,
argument|yoff
argument_list|)
name|PIXMAP
operator|*
name|tile
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|BITMAP
modifier|*
name|xymask
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|dstx
decl_stmt|,
name|dsty
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|op
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|CLIP
modifier|*
name|clips
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|clipcount
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|xoff
decl_stmt|,
name|yoff
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|gpr_$position_t
name|dstorg
decl_stmt|;
name|gpr_$window_t
name|cwindow
decl_stmt|;
name|gpr_$window_t
name|srcwin
decl_stmt|;
name|int
name|twidth
init|=
name|tile
operator|->
name|width
decl_stmt|,
name|theight
init|=
name|tile
operator|->
name|height
decl_stmt|;
name|int
name|zmask
decl_stmt|,
name|i
decl_stmt|,
name|j
decl_stmt|;
if|if
condition|(
name|xymask
operator|==
name|NULL
condition|)
block|{
name|cache_tile
argument_list|(
name|tile
argument_list|,
operator|&
name|theight
argument_list|,
operator|&
name|twidth
argument_list|)
expr_stmt|;
name|zmask
operator|=
operator|(
literal|1
operator|<<
name|Screen
operator|.
name|depth
operator|)
operator|-
literal|1
expr_stmt|;
name|set_zmask
argument_list|(
name|zmask
argument_list|)
expr_stmt|;
name|set_op
argument_list|(
literal|3
argument_list|)
expr_stmt|;
name|gpr_$set_fill_value
argument_list|(
operator|(
name|gpr_$pixel_value_t
operator|)
literal|1
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$set_fill_background_value
argument_list|(
operator|(
name|gpr_$pixel_value_t
operator|)
literal|0
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$set_fill_pattern
argument_list|(
name|TileBM
argument_list|,
operator|(
name|short
operator|)
literal|1
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|srcwin
operator|.
name|x_coord
operator|=
name|dstx
expr_stmt|;
name|srcwin
operator|.
name|x_size
operator|=
name|width
expr_stmt|;
name|srcwin
operator|.
name|y_coord
operator|=
name|dsty
expr_stmt|;
name|srcwin
operator|.
name|y_size
operator|=
name|height
expr_stmt|;
do|do
block|{
name|GetNextClip
argument_list|(
name|clips
argument_list|,
name|cwindow
argument_list|)
expr_stmt|;
comment|/*        CheckCursor(cwindow.x_coord, cwindow.y_coord,                       cwindow.x_size, cwindow.y_size);  */
name|CheckCursor
argument_list|(
name|dstx
argument_list|,
name|dsty
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
name|gpr_$set_clip_window
argument_list|(
name|cwindow
argument_list|,
name|status
argument_list|)
expr_stmt|;
comment|/* optimize only absolute case */
if|if
condition|(
operator|(
name|xoff
operator|==
literal|0
operator|)
operator|&&
operator|(
name|yoff
operator|==
literal|0
operator|)
condition|)
name|gpr_$rectangle
argument_list|(
name|srcwin
argument_list|,
name|status
argument_list|)
expr_stmt|;
else|else
block|{
name|gpr_$position_t
name|dstorg
decl_stmt|;
name|srcwin
operator|.
name|x_coord
operator|=
literal|0
expr_stmt|;
name|srcwin
operator|.
name|y_coord
operator|=
literal|0
expr_stmt|;
name|srcwin
operator|.
name|x_size
operator|=
name|twidth
expr_stmt|;
name|srcwin
operator|.
name|y_size
operator|=
name|theight
expr_stmt|;
name|dstorg
operator|.
name|x_coord
operator|=
name|dstx
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|width
condition|;
name|i
operator|+=
name|twidth
control|)
block|{
name|dstorg
operator|.
name|y_coord
operator|=
name|dsty
expr_stmt|;
if|if
condition|(
operator|(
name|dstorg
operator|.
name|x_coord
operator|<=
operator|(
name|cwindow
operator|.
name|x_coord
operator|+
name|cwindow
operator|.
name|x_size
operator|)
operator|)
operator|&&
operator|(
operator|(
name|dstorg
operator|.
name|x_coord
operator|+
name|twidth
operator|)
operator|>=
name|cwindow
operator|.
name|x_coord
operator|)
condition|)
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|height
condition|;
name|j
operator|+=
name|theight
control|)
block|{
if|if
condition|(
operator|(
name|dstorg
operator|.
name|y_coord
operator|<=
operator|(
name|cwindow
operator|.
name|y_coord
operator|+
name|cwindow
operator|.
name|y_size
operator|)
operator|)
operator|&&
operator|(
operator|(
name|dstorg
operator|.
name|y_coord
operator|+
name|theight
operator|)
operator|>=
name|cwindow
operator|.
name|y_coord
operator|)
condition|)
name|gpr_$pixel_blt
argument_list|(
name|TileBM
argument_list|,
name|srcwin
argument_list|,
name|dstorg
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|dstorg
operator|.
name|y_coord
operator|+=
name|theight
expr_stmt|;
block|}
name|dstorg
operator|.
name|x_coord
operator|+=
name|twidth
expr_stmt|;
block|}
block|}
block|}
do|while
condition|(
operator|--
name|clipcount
operator|>
literal|0
condition|)
do|;
name|gpr_$set_fill_pattern
argument_list|(
name|gpr_$nil_bitmap_desc
argument_list|,
operator|(
name|short
operator|)
literal|1
argument_list|,
name|status
argument_list|)
expr_stmt|;
return|return;
block|}
else|else
block|{
comment|/* xymask not implemented yet */
block|}
name|RestoreCursor
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
name|borrow_flag
condition|)
name|gpr_$release_display
argument_list|(
name|status
argument_list|)
expr_stmt|;
block|}
end_block

begin_expr_stmt
specifier|static
name|constfill
argument_list|(
argument|tile
argument_list|,
argument|xymask
argument_list|,
argument|dstx
argument_list|,
argument|dsty
argument_list|,
argument|width
argument_list|,
argument|height
argument_list|,
argument|op
argument_list|,
argument|clips
argument_list|,
argument|clipcount
argument_list|)
name|PIXMAP
operator|*
name|tile
expr_stmt|;
end_expr_stmt

begin_decl_stmt
name|BITMAP
modifier|*
name|xymask
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|dstx
decl_stmt|,
name|dsty
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|op
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|CLIP
modifier|*
name|clips
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|clipcount
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|gpr_$window_t
name|cwindow
decl_stmt|,
name|dstwin
decl_stmt|;
name|int
name|i
decl_stmt|;
name|int
name|data
init|=
operator|(
name|int
operator|)
name|tile
operator|->
name|data
decl_stmt|;
comment|/*  set drawing color based on invert flag ^ tiling value */
name|data
operator|^=
name|PINVERT
argument_list|(
name|tile
argument_list|)
expr_stmt|;
name|gpr_$set_plane_mask
argument_list|(
operator|(
name|gpr_$mask_t
operator|)
name|Screen
operator|.
name|plane_mask
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$set_fill_value
argument_list|(
operator|(
name|gpr_$pixel_value_t
operator|)
name|data
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|set_op
argument_list|(
name|op
argument_list|)
expr_stmt|;
name|dstwin
operator|.
name|x_coord
operator|=
name|dstx
expr_stmt|;
name|dstwin
operator|.
name|x_size
operator|=
name|width
expr_stmt|;
name|dstwin
operator|.
name|y_coord
operator|=
name|dsty
expr_stmt|;
name|dstwin
operator|.
name|y_size
operator|=
name|height
expr_stmt|;
if|if
condition|(
name|xymask
operator|==
name|NULL
condition|)
block|{
do|do
block|{
name|GetNextClip
argument_list|(
name|clips
argument_list|,
name|cwindow
argument_list|)
expr_stmt|;
name|CheckCursor
argument_list|(
name|dstx
argument_list|,
name|dsty
argument_list|,
name|width
argument_list|,
name|height
argument_list|)
expr_stmt|;
comment|/*	CheckCursor(cwindow.x_coord, cwindow.y_coord,                     cwindow.x_size, cwindow.y_size);  */
name|gpr_$set_clip_window
argument_list|(
name|cwindow
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$rectangle
argument_list|(
name|dstwin
argument_list|,
name|status
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
operator|--
name|clipcount
operator|>
literal|0
condition|)
do|;
block|}
else|else
block|{
comment|/* xymask not implemented yet */
block|}
name|RestoreCursor
argument_list|()
expr_stmt|;
block|}
end_block

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_macro
name|TileFill
argument_list|(
argument|tile
argument_list|,
argument|xoff
argument_list|,
argument|yoff
argument_list|,
argument|xymask
argument_list|,
argument|dstx
argument_list|,
argument|dsty
argument_list|,
argument|width
argument_list|,
argument|height
argument_list|,
argument|clips
argument_list|,
argument|clipcount
argument_list|,
argument|func
argument_list|,
argument|zmask
argument_list|)
end_macro

begin_decl_stmt
name|PIXMAP
modifier|*
name|tile
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|BITMAP
modifier|*
name|xymask
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|xoff
decl_stmt|,
name|yoff
decl_stmt|,
name|dstx
decl_stmt|,
name|dsty
decl_stmt|,
name|width
decl_stmt|,
name|height
decl_stmt|,
name|zmask
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|int
name|func
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|CLIP
modifier|*
name|clips
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
operator|(
name|Screen
operator|.
name|depth
operator|==
literal|1
operator|)
operator|&&
operator|!
operator|(
name|zmask
operator|&
literal|1
operator|)
condition|)
return|return;
switch|switch
condition|(
name|PTYPE
argument_list|(
name|tile
argument_list|)
condition|)
block|{
case|case
name|BitmapPixmap
case|:
name|tilefill
argument_list|(
name|tile
argument_list|,
name|xymask
argument_list|,
name|dstx
argument_list|,
name|dsty
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|func
argument_list|,
name|clips
argument_list|,
name|clipcount
argument_list|,
name|xoff
argument_list|,
name|yoff
argument_list|)
expr_stmt|;
break|break;
case|case
name|ConstantPixmap
case|:
name|constfill
argument_list|(
name|tile
argument_list|,
name|xymask
argument_list|,
name|dstx
argument_list|,
name|dsty
argument_list|,
name|width
argument_list|,
name|height
argument_list|,
name|func
argument_list|,
name|clips
argument_list|,
name|clipcount
argument_list|)
expr_stmt|;
break|break;
case|case
name|XYColorPixmap
case|:
comment|/* Not yet implemented */
break|break;
case|case
name|ZColorPixmap
case|:
comment|/* Not yet implemented */
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"TileFill: ZColorPixmap\n"
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_block

begin_comment
comment|/*ARGSUSED*/
end_comment

begin_macro
name|DrawFilled
argument_list|(
argument|verts
argument_list|,
argument|vertcount
argument_list|,
argument|xbase
argument_list|,
argument|ybase
argument_list|,
argument|srcpix
argument_list|,
argument|tile
argument_list|,
argument|xoff
argument_list|,
argument|yoff
argument_list|,
argument|clips
argument_list|,
argument|clipcount
argument_list|,
argument|func
argument_list|,
argument|zmask
argument_list|)
end_macro

begin_decl_stmt
name|Vertex
modifier|*
name|verts
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|PIXMAP
modifier|*
name|tile
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|vertcount
decl_stmt|,
name|xbase
decl_stmt|,
name|ybase
decl_stmt|,
name|srcpix
decl_stmt|,
name|xoff
decl_stmt|,
name|yoff
decl_stmt|,
name|clipcount
decl_stmt|,
name|zmask
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|int
name|func
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|CLIP
modifier|*
name|clips
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|gpr_$window_t
name|cwindow
decl_stmt|;
name|status_$t
name|status
decl_stmt|;
name|short
modifier|*
name|x
decl_stmt|,
modifier|*
name|y
decl_stmt|,
modifier|*
name|oldx
decl_stmt|,
modifier|*
name|oldy
decl_stmt|,
modifier|*
name|savx
decl_stmt|,
modifier|*
name|savy
decl_stmt|;
comment|/*    int data = (int)tile->data; */
name|Vertex
modifier|*
name|v
init|=
name|verts
decl_stmt|;
name|int
name|vc
init|=
name|vertcount
decl_stmt|;
name|x
operator|=
operator|(
name|short
operator|*
operator|)
name|malloc
argument_list|(
name|vertcount
operator|*
literal|2
argument_list|)
expr_stmt|;
name|y
operator|=
operator|(
name|short
operator|*
operator|)
name|malloc
argument_list|(
name|vertcount
operator|*
literal|2
argument_list|)
expr_stmt|;
name|savx
operator|=
name|x
expr_stmt|;
name|savy
operator|=
name|y
expr_stmt|;
do|do
block|{
if|if
condition|(
name|v
operator|->
name|flags
operator|&
name|VertexRelative
condition|)
block|{
operator|*
name|x
operator|=
name|v
operator|->
name|x
operator|+
operator|*
name|oldx
expr_stmt|;
operator|*
name|y
operator|=
name|v
operator|->
name|y
operator|+
operator|*
name|oldy
expr_stmt|;
block|}
else|else
block|{
operator|*
name|x
operator|=
name|v
operator|->
name|x
operator|+
name|xbase
expr_stmt|;
operator|*
name|y
operator|=
name|v
operator|->
name|y
operator|+
name|ybase
expr_stmt|;
block|}
comment|/* XXX - ignore VertexCurved for now */
comment|/* XXX - ignore VertexDrawLastPoint for now */
name|oldx
operator|=
name|x
expr_stmt|;
name|oldy
operator|=
name|y
expr_stmt|;
name|x
operator|++
expr_stmt|;
name|y
operator|++
expr_stmt|;
name|v
operator|++
expr_stmt|;
block|}
do|while
condition|(
operator|--
name|vc
operator|>
literal|0
condition|)
do|;
comment|/*    switch (PTYPE(tile)) {     case BitmapPixmap:         fprintf(stderr,"DrawFilled: BitmapPixmap\n");         return;     case XYColorPixmap:         fprintf(stderr,"DrawFilled: XYColorPixmap\n");         return;     case ZColorPixmap:         fprintf(stderr,"DrawFilled: ZColorPixmap\n");         return;     case ConstantPixmap:         fprintf(stderr,"DrawFilled: ConstantPixmap\n");     	break;                 }     /*  set drawing color based on invert flag ^ tiling value */
comment|/*data ^= PINVERT(tile); */
name|gpr_$set_fill_value
argument_list|(
operator|(
name|gpr_$pixel_value_t
operator|)
name|srcpix
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|set_zmask
argument_list|(
name|zmask
argument_list|)
expr_stmt|;
do|do
block|{
name|x
operator|=
name|savx
expr_stmt|;
name|y
operator|=
name|savy
expr_stmt|;
name|GetNextClip
argument_list|(
name|clips
argument_list|,
name|cwindow
argument_list|)
expr_stmt|;
name|CheckCursor
argument_list|(
name|cwindow
operator|.
name|x_coord
argument_list|,
name|cwindow
operator|.
name|y_coord
argument_list|,
name|cwindow
operator|.
name|x_size
argument_list|,
name|cwindow
operator|.
name|y_size
argument_list|)
expr_stmt|;
name|gpr_$set_clip_window
argument_list|(
name|cwindow
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$start_pgon
argument_list|(
operator|(
name|short
operator|)
operator|*
name|x
argument_list|,
operator|(
name|short
operator|)
operator|*
name|y
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|check_status
argument_list|(
name|status
argument_list|,
literal|"DrawFilled"
argument_list|)
expr_stmt|;
name|gpr_$pgon_polyline
argument_list|(
operator|*
name|x
argument_list|,
operator|*
name|y
argument_list|,
operator|(
name|short
operator|)
name|vertcount
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|check_status
argument_list|(
name|status
argument_list|,
literal|"DrawFilled"
argument_list|)
expr_stmt|;
name|gpr_$close_fill_pgon
argument_list|(
name|status
argument_list|)
expr_stmt|;
name|check_status
argument_list|(
name|status
argument_list|,
literal|"DrawFilled"
argument_list|)
expr_stmt|;
block|}
do|while
condition|(
operator|--
name|clipcount
operator|>
literal|0
condition|)
do|;
name|RestoreCursor
argument_list|()
expr_stmt|;
name|free
argument_list|(
name|x
argument_list|)
expr_stmt|;
name|free
argument_list|(
name|y
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|cache_tile
argument_list|(
argument|tile
argument_list|,
argument|twidth
argument_list|,
argument|theight
argument_list|)
end_macro

begin_decl_stmt
name|PIXMAP
modifier|*
name|tile
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
modifier|*
name|twidth
decl_stmt|,
modifier|*
name|theight
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|gpr_$bitmap_desc_t
name|bm
decl_stmt|;
name|long
name|ptr
decl_stmt|;
name|int
name|line_width
decl_stmt|;
name|status_$t
name|status
decl_stmt|;
name|boolean
name|flag
decl_stmt|;
name|gpr_$window_t
name|srcwin
decl_stmt|;
name|gpr_$position_t
name|dstorg
decl_stmt|;
name|flag
operator|=
name|gpr_$acquire_display
argument_list|(
name|status
argument_list|)
expr_stmt|;
name|gpr_$set_bitmap
argument_list|(
name|TileBM
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$set_raster_op
argument_list|(
operator|(
name|short
operator|)
literal|0
argument_list|,
operator|(
name|short
operator|)
literal|3
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|old_op
operator|=
operator|-
literal|1
expr_stmt|;
name|srcwin
operator|.
name|x_coord
operator|=
literal|0
expr_stmt|;
name|srcwin
operator|.
name|x_size
operator|=
operator|*
name|twidth
expr_stmt|;
name|srcwin
operator|.
name|y_coord
operator|=
literal|0
expr_stmt|;
name|srcwin
operator|.
name|y_size
operator|=
operator|*
name|theight
expr_stmt|;
name|dstorg
operator|.
name|y_coord
operator|=
literal|0
expr_stmt|;
name|dstorg
operator|.
name|x_coord
operator|=
literal|0
expr_stmt|;
name|gpr_$pixel_blt
argument_list|(
name|tile
operator|->
name|data
operator|->
name|data
argument_list|,
name|srcwin
argument_list|,
name|dstorg
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|dstorg
operator|.
name|x_coord
operator|=
operator|*
name|twidth
expr_stmt|;
name|gpr_$pixel_blt
argument_list|(
name|tile
operator|->
name|data
operator|->
name|data
argument_list|,
name|srcwin
argument_list|,
name|dstorg
argument_list|,
name|status
argument_list|)
expr_stmt|;
operator|*
name|twidth
operator|=
operator|*
name|twidth
operator|*
literal|2
expr_stmt|;
name|srcwin
operator|.
name|x_coord
operator|=
literal|0
expr_stmt|;
name|srcwin
operator|.
name|x_size
operator|=
operator|*
name|twidth
expr_stmt|;
name|srcwin
operator|.
name|y_coord
operator|=
literal|0
expr_stmt|;
name|srcwin
operator|.
name|y_size
operator|=
operator|*
name|theight
expr_stmt|;
name|dstorg
operator|.
name|y_coord
operator|=
operator|*
name|theight
expr_stmt|;
name|dstorg
operator|.
name|x_coord
operator|=
literal|0
expr_stmt|;
name|gpr_$pixel_blt
argument_list|(
name|TileBM
argument_list|,
name|srcwin
argument_list|,
name|dstorg
argument_list|,
name|status
argument_list|)
expr_stmt|;
name|gpr_$set_bitmap
argument_list|(
name|Screen
operator|.
name|bm
argument_list|,
name|status
argument_list|)
expr_stmt|;
operator|*
name|theight
operator|=
operator|*
name|theight
operator|*
literal|2
expr_stmt|;
block|}
end_block

end_unit

