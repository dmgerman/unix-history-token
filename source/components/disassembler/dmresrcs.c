begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*******************************************************************************  *  * Module Name: dmresrcs.c - "Small" Resource Descriptor disassembly  *  ******************************************************************************/
end_comment

begin_comment
comment|/*  * Copyright (C) 2000 - 2012, Intel Corp.  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions, and the following disclaimer,  *    without modification.  * 2. Redistributions in binary form must reproduce at minimum a disclaimer  *    substantially similar to the "NO WARRANTY" disclaimer below  *    ("Disclaimer") and any redistribution must be conditioned upon  *    including a substantially similar Disclaimer requirement for further  *    binary redistribution.  * 3. Neither the names of the above-listed copyright holders nor the names  *    of any contributors may be used to endorse or promote products derived  *    from this software without specific prior written permission.  *  * Alternatively, this software may be distributed under the terms of the  * GNU General Public License ("GPL") version 2 as published by the Free  * Software Foundation.  *  * NO WARRANTY  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT  * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR  * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT  * HOLDERS OR CONTRIBUTORS BE LIABLE FOR SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE  * POSSIBILITY OF SUCH DAMAGES.  */
end_comment

begin_include
include|#
directive|include
file|"acpi.h"
end_include

begin_include
include|#
directive|include
file|"accommon.h"
end_include

begin_include
include|#
directive|include
file|"acdisasm.h"
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|ACPI_DISASSEMBLER
end_ifdef

begin_define
define|#
directive|define
name|_COMPONENT
value|ACPI_CA_DEBUGGER
end_define

begin_macro
name|ACPI_MODULE_NAME
argument_list|(
literal|"dbresrcs"
argument_list|)
end_macro

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmIrqDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode a IRQ descriptor, either Irq() or IrqNoFlags()  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmIrqDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"%s ("
argument_list|,
name|AcpiGbl_IrqDecode
index|[
name|ACPI_GET_1BIT_FLAG
argument_list|(
name|Length
argument_list|)
index|]
argument_list|)
expr_stmt|;
comment|/* Decode flags byte if present */
if|if
condition|(
name|Length
operator|&
literal|1
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%s, %s, %s, "
argument_list|,
name|AcpiGbl_HeDecode
index|[
name|ACPI_GET_1BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Irq
operator|.
name|Flags
argument_list|)
index|]
argument_list|,
name|AcpiGbl_LlDecode
index|[
name|ACPI_EXTRACT_1BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Irq
operator|.
name|Flags
argument_list|,
literal|3
argument_list|)
index|]
argument_list|,
name|AcpiGbl_ShrDecode
index|[
name|ACPI_EXTRACT_2BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Irq
operator|.
name|Flags
argument_list|,
literal|4
argument_list|)
index|]
argument_list|)
expr_stmt|;
block|}
comment|/* Insert a descriptor name */
name|AcpiDmDescriptorName
argument_list|()
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|")\n"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmBitList
argument_list|(
name|Resource
operator|->
name|Irq
operator|.
name|IrqMask
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmDmaDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode a DMA descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmDmaDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"DMA (%s, %s, %s, "
argument_list|,
name|AcpiGbl_TypDecode
index|[
name|ACPI_EXTRACT_2BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Dma
operator|.
name|Flags
argument_list|,
literal|5
argument_list|)
index|]
argument_list|,
name|AcpiGbl_BmDecode
index|[
name|ACPI_EXTRACT_1BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Dma
operator|.
name|Flags
argument_list|,
literal|2
argument_list|)
index|]
argument_list|,
name|AcpiGbl_SizDecode
index|[
name|ACPI_GET_2BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Dma
operator|.
name|Flags
argument_list|)
index|]
argument_list|)
expr_stmt|;
comment|/* Insert a descriptor name */
name|AcpiDmDescriptorName
argument_list|()
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|")\n"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmBitList
argument_list|(
name|Resource
operator|->
name|Dma
operator|.
name|DmaChannelMask
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmFixedDmaDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode a FixedDMA descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmFixedDmaDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"FixedDMA (0x%4.4X, 0x%4.4X, "
argument_list|,
name|Resource
operator|->
name|FixedDma
operator|.
name|RequestLines
argument_list|,
name|Resource
operator|->
name|FixedDma
operator|.
name|Channels
argument_list|)
expr_stmt|;
if|if
condition|(
name|Resource
operator|->
name|FixedDma
operator|.
name|Width
operator|<=
literal|5
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%s, "
argument_list|,
name|AcpiGbl_DtsDecode
index|[
name|Resource
operator|->
name|FixedDma
operator|.
name|Width
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%X /* INVALID DMA WIDTH */, "
argument_list|,
name|Resource
operator|->
name|FixedDma
operator|.
name|Width
argument_list|)
expr_stmt|;
block|}
comment|/* Insert a descriptor name */
name|AcpiDmDescriptorName
argument_list|()
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|")\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmIoDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode an IO descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmIoDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"IO (%s,\n"
argument_list|,
name|AcpiGbl_IoDecode
index|[
name|ACPI_GET_1BIT_FLAG
argument_list|(
name|Resource
operator|->
name|Io
operator|.
name|Flags
argument_list|)
index|]
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDumpInteger16
argument_list|(
name|Resource
operator|->
name|Io
operator|.
name|Minimum
argument_list|,
literal|"Range Minimum"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDumpInteger16
argument_list|(
name|Resource
operator|->
name|Io
operator|.
name|Maximum
argument_list|,
literal|"Range Maximum"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDumpInteger8
argument_list|(
name|Resource
operator|->
name|Io
operator|.
name|Alignment
argument_list|,
literal|"Alignment"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDumpInteger8
argument_list|(
name|Resource
operator|->
name|Io
operator|.
name|AddressLength
argument_list|,
literal|"Length"
argument_list|)
expr_stmt|;
comment|/* Insert a descriptor name */
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDescriptorName
argument_list|()
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|")\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmFixedIoDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode a Fixed IO descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmFixedIoDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"FixedIO (\n"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDumpInteger16
argument_list|(
name|Resource
operator|->
name|FixedIo
operator|.
name|Address
argument_list|,
literal|"Address"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDumpInteger8
argument_list|(
name|Resource
operator|->
name|FixedIo
operator|.
name|AddressLength
argument_list|,
literal|"Length"
argument_list|)
expr_stmt|;
comment|/* Insert a descriptor name */
name|AcpiDmIndent
argument_list|(
name|Level
operator|+
literal|1
argument_list|)
expr_stmt|;
name|AcpiDmDescriptorName
argument_list|()
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|")\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmStartDependentDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode a Start Dependendent functions descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmStartDependentDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
if|if
condition|(
name|Length
operator|&
literal|1
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"StartDependentFn (0x%2.2X, 0x%2.2X)\n"
argument_list|,
operator|(
name|UINT32
operator|)
name|ACPI_GET_2BIT_FLAG
argument_list|(
name|Resource
operator|->
name|StartDpf
operator|.
name|Flags
argument_list|)
argument_list|,
operator|(
name|UINT32
operator|)
name|ACPI_EXTRACT_2BIT_FLAG
argument_list|(
name|Resource
operator|->
name|StartDpf
operator|.
name|Flags
argument_list|,
literal|2
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"StartDependentFnNoPri ()\n"
argument_list|)
expr_stmt|;
block|}
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"{\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmEndDependentDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode an End Dependent functions descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmEndDependentDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"}\n"
argument_list|)
expr_stmt|;
name|AcpiDmIndent
argument_list|(
name|Level
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"EndDependentFn ()\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmVendorSmallDescriptor  *  * PARAMETERS:  Resource            - Pointer to the resource descriptor  *              Length              - Length of the descriptor in bytes  *              Level               - Current source code indentation level  *  * RETURN:      None  *  * DESCRIPTION: Decode a Vendor Small Descriptor  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmVendorSmallDescriptor
parameter_list|(
name|AML_RESOURCE
modifier|*
name|Resource
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT32
name|Level
parameter_list|)
block|{
name|AcpiDmVendorCommon
argument_list|(
literal|"Short"
argument_list|,
name|ACPI_ADD_PTR
argument_list|(
name|UINT8
argument_list|,
name|Resource
argument_list|,
sizeof|sizeof
argument_list|(
name|AML_RESOURCE_SMALL_HEADER
argument_list|)
argument_list|)
argument_list|,
name|Length
argument_list|,
name|Level
argument_list|)
expr_stmt|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

end_unit

