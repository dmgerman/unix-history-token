begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/******************************************************************************  *  * Module Name: dmtable - Support for ACPI tables that contain no AML code  *  *****************************************************************************/
end_comment

begin_comment
comment|/******************************************************************************  *  * 1. Copyright Notice  *  * Some or all of this work - Copyright (c) 1999 - 2017, Intel Corp.  * All rights reserved.  *  * 2. License  *  * 2.1. This is your license from Intel Corp. under its intellectual property  * rights. You may have additional license terms from the party that provided  * you this software, covering your right to use that party's intellectual  * property rights.  *  * 2.2. Intel grants, free of charge, to any person ("Licensee") obtaining a  * copy of the source code appearing in this file ("Covered Code") an  * irrevocable, perpetual, worldwide license under Intel's copyrights in the  * base code distributed originally by Intel ("Original Intel Code") to copy,  * make derivatives, distribute, use and display any portion of the Covered  * Code in any form, with the right to sublicense such rights; and  *  * 2.3. Intel grants Licensee a non-exclusive and non-transferable patent  * license (with the right to sublicense), under only those claims of Intel  * patents that are infringed by the Original Intel Code, to make, use, sell,  * offer to sell, and import the Covered Code and derivative works thereof  * solely to the minimum extent necessary to exercise the above copyright  * license, and in no event shall the patent license extend to any additions  * to or modifications of the Original Intel Code. No other license or right  * is granted directly or by implication, estoppel or otherwise;  *  * The above copyright and patent license is granted only if the following  * conditions are met:  *  * 3. Conditions  *  * 3.1. Redistribution of Source with Rights to Further Distribute Source.  * Redistribution of source code of any substantial portion of the Covered  * Code or modification with rights to further distribute source must include  * the above Copyright Notice, the above License, this list of Conditions,  * and the following Disclaimer and Export Compliance provision. In addition,  * Licensee must cause all Covered Code to which Licensee contributes to  * contain a file documenting the changes Licensee made to create that Covered  * Code and the date of any change. Licensee must include in that file the  * documentation of any changes made by any predecessor Licensee. Licensee  * must include a prominent statement that the modification is derived,  * directly or indirectly, from Original Intel Code.  *  * 3.2. Redistribution of Source with no Rights to Further Distribute Source.  * Redistribution of source code of any substantial portion of the Covered  * Code or modification without rights to further distribute source must  * include the following Disclaimer and Export Compliance provision in the  * documentation and/or other materials provided with distribution. In  * addition, Licensee may not authorize further sublicense of source of any  * portion of the Covered Code, and must include terms to the effect that the  * license from Licensee to its licensee is limited to the intellectual  * property embodied in the software Licensee provides to its licensee, and  * not to intellectual property embodied in modifications its licensee may  * make.  *  * 3.3. Redistribution of Executable. Redistribution in executable form of any  * substantial portion of the Covered Code or modification must reproduce the  * above Copyright Notice, and the following Disclaimer and Export Compliance  * provision in the documentation and/or other materials provided with the  * distribution.  *  * 3.4. Intel retains all right, title, and interest in and to the Original  * Intel Code.  *  * 3.5. Neither the name Intel nor any other trademark owned or controlled by  * Intel shall be used in advertising or otherwise to promote the sale, use or  * other dealings in products derived from or relating to the Covered Code  * without prior written authorization from Intel.  *  * 4. Disclaimer and Export Compliance  *  * 4.1. INTEL MAKES NO WARRANTY OF ANY KIND REGARDING ANY SOFTWARE PROVIDED  * HERE. ANY SOFTWARE ORIGINATING FROM INTEL OR DERIVED FROM INTEL SOFTWARE  * IS PROVIDED "AS IS," AND INTEL WILL NOT PROVIDE ANY SUPPORT, ASSISTANCE,  * INSTALLATION, TRAINING OR OTHER SERVICES. INTEL WILL NOT PROVIDE ANY  * UPDATES, ENHANCEMENTS OR EXTENSIONS. INTEL SPECIFICALLY DISCLAIMS ANY  * IMPLIED WARRANTIES OF MERCHANTABILITY, NONINFRINGEMENT AND FITNESS FOR A  * PARTICULAR PURPOSE.  *  * 4.2. IN NO EVENT SHALL INTEL HAVE ANY LIABILITY TO LICENSEE, ITS LICENSEES  * OR ANY OTHER THIRD PARTY, FOR ANY LOST PROFITS, LOST DATA, LOSS OF USE OR  * COSTS OF PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES, OR FOR ANY INDIRECT,  * SPECIAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THIS AGREEMENT, UNDER ANY  * CAUSE OF ACTION OR THEORY OF LIABILITY, AND IRRESPECTIVE OF WHETHER INTEL  * HAS ADVANCE NOTICE OF THE POSSIBILITY OF SUCH DAMAGES. THESE LIMITATIONS  * SHALL APPLY NOTWITHSTANDING THE FAILURE OF THE ESSENTIAL PURPOSE OF ANY  * LIMITED REMEDY.  *  * 4.3. Licensee shall not export, either directly or indirectly, any of this  * software or system incorporating such software without first obtaining any  * required license or other approval from the U. S. Department of Commerce or  * any other agency or department of the United States Government. In the  * event Licensee exports any such software from the United States or  * re-exports any such software from a foreign destination, Licensee shall  * ensure that the distribution and export/re-export of the software is in  * compliance with all laws, regulations, orders, or other restrictions of the  * U.S. Export Administration Regulations. Licensee agrees that neither it nor  * any of its subsidiaries will export/re-export any technical data, process,  * software, or service, directly or indirectly, to any country for which the  * United States government or any agency thereof requires an export license,  * other governmental approval, or letter of assurance, without first obtaining  * such license, approval or letter.  *  *****************************************************************************  *  * Alternatively, you may choose to be licensed under the terms of the  * following license:  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions, and the following disclaimer,  *    without modification.  * 2. Redistributions in binary form must reproduce at minimum a disclaimer  *    substantially similar to the "NO WARRANTY" disclaimer below  *    ("Disclaimer") and any redistribution must be conditioned upon  *    including a substantially similar Disclaimer requirement for further  *    binary redistribution.  * 3. Neither the names of the above-listed copyright holders nor the names  *    of any contributors may be used to endorse or promote products derived  *    from this software without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS  * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT  * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR  * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT  * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,  * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT  * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,  * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY  * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT  * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE  * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *  * Alternatively, you may choose to be licensed under the terms of the  * GNU General Public License ("GPL") version 2 as published by the Free  * Software Foundation.  *  *****************************************************************************/
end_comment

begin_include
include|#
directive|include
file|"acpi.h"
end_include

begin_include
include|#
directive|include
file|"accommon.h"
end_include

begin_include
include|#
directive|include
file|"acdisasm.h"
end_include

begin_include
include|#
directive|include
file|"actables.h"
end_include

begin_include
include|#
directive|include
file|"aslcompiler.h"
end_include

begin_include
include|#
directive|include
file|"dtcompiler.h"
end_include

begin_comment
comment|/* This module used for application-level code only */
end_comment

begin_define
define|#
directive|define
name|_COMPONENT
value|ACPI_CA_DISASSEMBLER
end_define

begin_macro
name|ACPI_MODULE_NAME
argument_list|(
literal|"dmtable"
argument_list|)
end_macro

begin_function_decl
specifier|const
name|AH_TABLE
modifier|*
name|AcpiAhGetTableInfo
parameter_list|(
name|char
modifier|*
name|Signature
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* Common format strings for commented values */
end_comment

begin_define
define|#
directive|define
name|UINT8_FORMAT
value|"%2.2X [%s]\n"
end_define

begin_define
define|#
directive|define
name|UINT16_FORMAT
value|"%4.4X [%s]\n"
end_define

begin_define
define|#
directive|define
name|UINT32_FORMAT
value|"%8.8X [%s]\n"
end_define

begin_define
define|#
directive|define
name|STRING_FORMAT
value|"[%s]\n"
end_define

begin_comment
comment|/* These tables map a subtable type to a description string */
end_comment

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmAsfSubnames
index|[]
init|=
block|{
literal|"ASF Information"
block|,
literal|"ASF Alerts"
block|,
literal|"ASF Remote Control"
block|,
literal|"ASF RMCP Boot Options"
block|,
literal|"ASF Address"
block|,
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmDmarSubnames
index|[]
init|=
block|{
literal|"Hardware Unit Definition"
block|,
literal|"Reserved Memory Region"
block|,
literal|"Root Port ATS Capability"
block|,
literal|"Remapping Hardware Static Affinity"
block|,
literal|"ACPI Namespace Device Declaration"
block|,
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmDmarScope
index|[]
init|=
block|{
literal|"Reserved value"
block|,
literal|"PCI Endpoint Device"
block|,
literal|"PCI Bridge Device"
block|,
literal|"IOAPIC Device"
block|,
literal|"Message-capable HPET Device"
block|,
literal|"Namespace Device"
block|,
literal|"Unknown Scope Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmEinjActions
index|[]
init|=
block|{
literal|"Begin Operation"
block|,
literal|"Get Trigger Table"
block|,
literal|"Set Error Type"
block|,
literal|"Get Error Type"
block|,
literal|"End Operation"
block|,
literal|"Execute Operation"
block|,
literal|"Check Busy Status"
block|,
literal|"Get Command Status"
block|,
literal|"Set Error Type With Address"
block|,
literal|"Get Execute Timings"
block|,
literal|"Unknown Action"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmEinjInstructions
index|[]
init|=
block|{
literal|"Read Register"
block|,
literal|"Read Register Value"
block|,
literal|"Write Register"
block|,
literal|"Write Register Value"
block|,
literal|"Noop"
block|,
literal|"Flush Cacheline"
block|,
literal|"Unknown Instruction"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmErstActions
index|[]
init|=
block|{
literal|"Begin Write Operation"
block|,
literal|"Begin Read Operation"
block|,
literal|"Begin Clear Operation"
block|,
literal|"End Operation"
block|,
literal|"Set Record Offset"
block|,
literal|"Execute Operation"
block|,
literal|"Check Busy Status"
block|,
literal|"Get Command Status"
block|,
literal|"Get Record Identifier"
block|,
literal|"Set Record Identifier"
block|,
literal|"Get Record Count"
block|,
literal|"Begin Dummy Write"
block|,
literal|"Unused/Unknown Action"
block|,
literal|"Get Error Address Range"
block|,
literal|"Get Error Address Length"
block|,
literal|"Get Error Attributes"
block|,
literal|"Execute Timings"
block|,
literal|"Unknown Action"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmErstInstructions
index|[]
init|=
block|{
literal|"Read Register"
block|,
literal|"Read Register Value"
block|,
literal|"Write Register"
block|,
literal|"Write Register Value"
block|,
literal|"Noop"
block|,
literal|"Load Var1"
block|,
literal|"Load Var2"
block|,
literal|"Store Var1"
block|,
literal|"Add"
block|,
literal|"Subtract"
block|,
literal|"Add Value"
block|,
literal|"Subtract Value"
block|,
literal|"Stall"
block|,
literal|"Stall While True"
block|,
literal|"Skip Next If True"
block|,
literal|"GoTo"
block|,
literal|"Set Source Address"
block|,
literal|"Set Destination Address"
block|,
literal|"Move Data"
block|,
literal|"Unknown Instruction"
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmGtdtSubnames
index|[]
init|=
block|{
literal|"Generic Timer Block"
block|,
literal|"Generic Watchdog Timer"
block|,
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmHestSubnames
index|[]
init|=
block|{
literal|"IA-32 Machine Check Exception"
block|,
literal|"IA-32 Corrected Machine Check"
block|,
literal|"IA-32 Non-Maskable Interrupt"
block|,
literal|"Unknown SubTable Type"
block|,
comment|/* 3 - Reserved */
literal|"Unknown SubTable Type"
block|,
comment|/* 4 - Reserved */
literal|"Unknown SubTable Type"
block|,
comment|/* 5 - Reserved */
literal|"PCI Express Root Port AER"
block|,
literal|"PCI Express AER (AER Endpoint)"
block|,
literal|"PCI Express/PCI-X Bridge AER"
block|,
literal|"Generic Hardware Error Source"
block|,
literal|"Generic Hardware Error Source V2"
block|,
literal|"IA-32 Deferred Machine Check"
block|,
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmHestNotifySubnames
index|[]
init|=
block|{
literal|"Polled"
block|,
literal|"External Interrupt"
block|,
literal|"Local Interrupt"
block|,
literal|"SCI"
block|,
literal|"NMI"
block|,
literal|"CMCI"
block|,
comment|/* ACPI 5.0 */
literal|"MCE"
block|,
comment|/* ACPI 5.0 */
literal|"GPIO"
block|,
comment|/* ACPI 6.0 */
literal|"SEA"
block|,
comment|/* ACPI 6.1 */
literal|"SEI"
block|,
comment|/* ACPI 6.1 */
literal|"GSIV"
block|,
comment|/* ACPI 6.1 */
literal|"Software Delegated Exception"
block|,
comment|/* ACPI 6.2 */
literal|"Unknown Notify Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmHmatSubnames
index|[]
init|=
block|{
literal|"Memory Subystem Address Range"
block|,
literal|"System Locality Latency and Bandwidth Information"
block|,
literal|"Memory Side Cache Information"
block|,
literal|"Unknown Structure Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmMadtSubnames
index|[]
init|=
block|{
literal|"Processor Local APIC"
block|,
comment|/* ACPI_MADT_TYPE_LOCAL_APIC */
literal|"I/O APIC"
block|,
comment|/* ACPI_MADT_TYPE_IO_APIC */
literal|"Interrupt Source Override"
block|,
comment|/* ACPI_MADT_TYPE_INTERRUPT_OVERRIDE */
literal|"NMI Source"
block|,
comment|/* ACPI_MADT_TYPE_NMI_SOURCE */
literal|"Local APIC NMI"
block|,
comment|/* ACPI_MADT_TYPE_LOCAL_APIC_NMI */
literal|"Local APIC Address Override"
block|,
comment|/* ACPI_MADT_TYPE_LOCAL_APIC_OVERRIDE */
literal|"I/O SAPIC"
block|,
comment|/* ACPI_MADT_TYPE_IO_SAPIC */
literal|"Local SAPIC"
block|,
comment|/* ACPI_MADT_TYPE_LOCAL_SAPIC */
literal|"Platform Interrupt Sources"
block|,
comment|/* ACPI_MADT_TYPE_INTERRUPT_SOURCE */
literal|"Processor Local x2APIC"
block|,
comment|/* ACPI_MADT_TYPE_LOCAL_X2APIC */
literal|"Local x2APIC NMI"
block|,
comment|/* ACPI_MADT_TYPE_LOCAL_X2APIC_NMI */
literal|"Generic Interrupt Controller"
block|,
comment|/* ACPI_MADT_GENERIC_INTERRUPT */
literal|"Generic Interrupt Distributor"
block|,
comment|/* ACPI_MADT_GENERIC_DISTRIBUTOR */
literal|"Generic MSI Frame"
block|,
comment|/* ACPI_MADT_GENERIC_MSI_FRAME */
literal|"Generic Interrupt Redistributor"
block|,
comment|/* ACPI_MADT_GENERIC_REDISTRIBUTOR */
literal|"Generic Interrupt Translator"
block|,
comment|/* ACPI_MADT_GENERIC_TRANSLATOR */
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmNfitSubnames
index|[]
init|=
block|{
literal|"System Physical Address Range"
block|,
comment|/* ACPI_NFIT_TYPE_SYSTEM_ADDRESS */
literal|"Memory Range Map"
block|,
comment|/* ACPI_NFIT_TYPE_MEMORY_MAP */
literal|"Interleave Info"
block|,
comment|/* ACPI_NFIT_TYPE_INTERLEAVE */
literal|"SMBIOS Information"
block|,
comment|/* ACPI_NFIT_TYPE_SMBIOS */
literal|"NVDIMM Control Region"
block|,
comment|/* ACPI_NFIT_TYPE_CONTROL_REGION */
literal|"NVDIMM Block Data Window Region"
block|,
comment|/* ACPI_NFIT_TYPE_DATA_REGION */
literal|"Flush Hint Address"
block|,
comment|/* ACPI_NFIT_TYPE_FLUSH_ADDRESS */
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmPcctSubnames
index|[]
init|=
block|{
literal|"Generic Communications Subspace"
block|,
comment|/* ACPI_PCCT_TYPE_GENERIC_SUBSPACE */
literal|"HW-Reduced Comm Subspace"
block|,
comment|/* ACPI_PCCT_TYPE_HW_REDUCED_SUBSPACE */
literal|"HW-Reduced Comm Subspace Type2"
block|,
comment|/* ACPI_PCCT_TYPE_HW_REDUCED_SUBSPACE_TYPE2 */
literal|"Extended PCC Master Subspace"
block|,
comment|/* ACPI_PCCT_TYPE_EXT_PCC_MASTER_SUBSPACE */
literal|"Extended PCC Slave Subspace"
block|,
comment|/* ACPI_PCCT_TYPE_EXT_PCC_SLAVE_SUBSPACE */
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmPmttSubnames
index|[]
init|=
block|{
literal|"Socket"
block|,
comment|/* ACPI_PMTT_TYPE_SOCKET */
literal|"Memory Controller"
block|,
comment|/* ACPI_PMTT_TYPE_CONTROLLER */
literal|"Physical Component (DIMM)"
block|,
comment|/* ACPI_PMTT_TYPE_DIMM  */
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmPpttSubnames
index|[]
init|=
block|{
literal|"Processor Hierarchy Node"
block|,
comment|/* ACPI_PPTT_TYPE_PROCESSOR */
literal|"Cache Type"
block|,
comment|/* ACPI_PPTT_TYPE_CACHE */
literal|"ID"
block|,
comment|/* ACPI_PMTT_TYPE_ID  */
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmSratSubnames
index|[]
init|=
block|{
literal|"Processor Local APIC/SAPIC Affinity"
block|,
literal|"Memory Affinity"
block|,
literal|"Processor Local x2APIC Affinity"
block|,
literal|"GICC Affinity"
block|,
literal|"GIC ITS Affinity"
block|,
comment|/* Acpi 6.2 */
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmIvrsSubnames
index|[]
init|=
block|{
literal|"Hardware Definition Block"
block|,
literal|"Memory Definition Block"
block|,
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmLpitSubnames
index|[]
init|=
block|{
literal|"Native C-state Idle Structure"
block|,
literal|"Unknown Subtable Type"
comment|/* Reserved */
block|}
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|ACPI_FADT_PM_RESERVED
value|9
end_define

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmFadtProfiles
index|[]
init|=
block|{
literal|"Unspecified"
block|,
literal|"Desktop"
block|,
literal|"Mobile"
block|,
literal|"Workstation"
block|,
literal|"Enterprise Server"
block|,
literal|"SOHO Server"
block|,
literal|"Appliance PC"
block|,
literal|"Performance Server"
block|,
literal|"Tablet"
block|,
literal|"Unknown Profile Type"
block|}
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|ACPI_GAS_WIDTH_RESERVED
value|5
end_define

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|AcpiDmGasAccessWidth
index|[]
init|=
block|{
literal|"Undefined/Legacy"
block|,
literal|"Byte Access:8"
block|,
literal|"Word Access:16"
block|,
literal|"DWord Access:32"
block|,
literal|"QWord Access:64"
block|,
literal|"Unknown Width Encoding"
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*******************************************************************************  *  * ACPI Table Data, indexed by signature.  *  * Each entry contains: Signature, Table Info, Handler, DtHandler,  *  Template, Description  *  * Simple tables have only a TableInfo structure, complex tables have a  * handler. This table must be NULL terminated. RSDP and FACS are  * special-cased elsewhere.  *  * Note: Any tables added here should be duplicated within AcpiSupportedTables  * in the file common/ahtable.c  *  ******************************************************************************/
end_comment

begin_decl_stmt
specifier|const
name|ACPI_DMTABLE_DATA
name|AcpiDmTableData
index|[]
init|=
block|{
block|{
name|ACPI_SIG_ASF
block|,
name|NULL
block|,
name|AcpiDmDumpAsf
block|,
name|DtCompileAsf
block|,
name|TemplateAsf
block|}
block|,
block|{
name|ACPI_SIG_BERT
block|,
name|AcpiDmTableInfoBert
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateBert
block|}
block|,
block|{
name|ACPI_SIG_BGRT
block|,
name|AcpiDmTableInfoBgrt
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateBgrt
block|}
block|,
block|{
name|ACPI_SIG_BOOT
block|,
name|AcpiDmTableInfoBoot
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateBoot
block|}
block|,
block|{
name|ACPI_SIG_CPEP
block|,
name|NULL
block|,
name|AcpiDmDumpCpep
block|,
name|DtCompileCpep
block|,
name|TemplateCpep
block|}
block|,
block|{
name|ACPI_SIG_CSRT
block|,
name|NULL
block|,
name|AcpiDmDumpCsrt
block|,
name|DtCompileCsrt
block|,
name|TemplateCsrt
block|}
block|,
block|{
name|ACPI_SIG_DBG2
block|,
name|AcpiDmTableInfoDbg2
block|,
name|AcpiDmDumpDbg2
block|,
name|DtCompileDbg2
block|,
name|TemplateDbg2
block|}
block|,
block|{
name|ACPI_SIG_DBGP
block|,
name|AcpiDmTableInfoDbgp
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateDbgp
block|}
block|,
block|{
name|ACPI_SIG_DMAR
block|,
name|NULL
block|,
name|AcpiDmDumpDmar
block|,
name|DtCompileDmar
block|,
name|TemplateDmar
block|}
block|,
block|{
name|ACPI_SIG_DRTM
block|,
name|NULL
block|,
name|AcpiDmDumpDrtm
block|,
name|DtCompileDrtm
block|,
name|TemplateDrtm
block|}
block|,
block|{
name|ACPI_SIG_ECDT
block|,
name|AcpiDmTableInfoEcdt
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateEcdt
block|}
block|,
block|{
name|ACPI_SIG_EINJ
block|,
name|NULL
block|,
name|AcpiDmDumpEinj
block|,
name|DtCompileEinj
block|,
name|TemplateEinj
block|}
block|,
block|{
name|ACPI_SIG_ERST
block|,
name|NULL
block|,
name|AcpiDmDumpErst
block|,
name|DtCompileErst
block|,
name|TemplateErst
block|}
block|,
block|{
name|ACPI_SIG_FADT
block|,
name|NULL
block|,
name|AcpiDmDumpFadt
block|,
name|DtCompileFadt
block|,
name|TemplateFadt
block|}
block|,
block|{
name|ACPI_SIG_FPDT
block|,
name|NULL
block|,
name|AcpiDmDumpFpdt
block|,
name|DtCompileFpdt
block|,
name|TemplateFpdt
block|}
block|,
block|{
name|ACPI_SIG_GTDT
block|,
name|NULL
block|,
name|AcpiDmDumpGtdt
block|,
name|DtCompileGtdt
block|,
name|TemplateGtdt
block|}
block|,
block|{
name|ACPI_SIG_HEST
block|,
name|NULL
block|,
name|AcpiDmDumpHest
block|,
name|DtCompileHest
block|,
name|TemplateHest
block|}
block|,
block|{
name|ACPI_SIG_HMAT
block|,
name|NULL
block|,
name|AcpiDmDumpHmat
block|,
name|DtCompileHmat
block|,
name|TemplateHmat
block|}
block|,
block|{
name|ACPI_SIG_HPET
block|,
name|AcpiDmTableInfoHpet
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateHpet
block|}
block|,
block|{
name|ACPI_SIG_IORT
block|,
name|NULL
block|,
name|AcpiDmDumpIort
block|,
name|DtCompileIort
block|,
name|TemplateIort
block|}
block|,
block|{
name|ACPI_SIG_IVRS
block|,
name|NULL
block|,
name|AcpiDmDumpIvrs
block|,
name|DtCompileIvrs
block|,
name|TemplateIvrs
block|}
block|,
block|{
name|ACPI_SIG_LPIT
block|,
name|NULL
block|,
name|AcpiDmDumpLpit
block|,
name|DtCompileLpit
block|,
name|TemplateLpit
block|}
block|,
block|{
name|ACPI_SIG_MADT
block|,
name|NULL
block|,
name|AcpiDmDumpMadt
block|,
name|DtCompileMadt
block|,
name|TemplateMadt
block|}
block|,
block|{
name|ACPI_SIG_MCFG
block|,
name|NULL
block|,
name|AcpiDmDumpMcfg
block|,
name|DtCompileMcfg
block|,
name|TemplateMcfg
block|}
block|,
block|{
name|ACPI_SIG_MCHI
block|,
name|AcpiDmTableInfoMchi
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateMchi
block|}
block|,
block|{
name|ACPI_SIG_MPST
block|,
name|AcpiDmTableInfoMpst
block|,
name|AcpiDmDumpMpst
block|,
name|DtCompileMpst
block|,
name|TemplateMpst
block|}
block|,
block|{
name|ACPI_SIG_MSCT
block|,
name|NULL
block|,
name|AcpiDmDumpMsct
block|,
name|DtCompileMsct
block|,
name|TemplateMsct
block|}
block|,
block|{
name|ACPI_SIG_MSDM
block|,
name|NULL
block|,
name|AcpiDmDumpSlic
block|,
name|DtCompileSlic
block|,
name|TemplateMsdm
block|}
block|,
block|{
name|ACPI_SIG_MTMR
block|,
name|NULL
block|,
name|AcpiDmDumpMtmr
block|,
name|DtCompileMtmr
block|,
name|TemplateMtmr
block|}
block|,
block|{
name|ACPI_SIG_NFIT
block|,
name|AcpiDmTableInfoNfit
block|,
name|AcpiDmDumpNfit
block|,
name|DtCompileNfit
block|,
name|TemplateNfit
block|}
block|,
block|{
name|ACPI_SIG_PCCT
block|,
name|AcpiDmTableInfoPcct
block|,
name|AcpiDmDumpPcct
block|,
name|DtCompilePcct
block|,
name|TemplatePcct
block|}
block|,
block|{
name|ACPI_SIG_PMTT
block|,
name|NULL
block|,
name|AcpiDmDumpPmtt
block|,
name|DtCompilePmtt
block|,
name|TemplatePmtt
block|}
block|,
block|{
name|ACPI_SIG_PPTT
block|,
name|NULL
block|,
name|AcpiDmDumpPptt
block|,
name|DtCompilePptt
block|,
name|TemplatePptt
block|}
block|,
block|{
name|ACPI_SIG_RASF
block|,
name|AcpiDmTableInfoRasf
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateRasf
block|}
block|,
block|{
name|ACPI_SIG_RSDT
block|,
name|NULL
block|,
name|AcpiDmDumpRsdt
block|,
name|DtCompileRsdt
block|,
name|TemplateRsdt
block|}
block|,
block|{
name|ACPI_SIG_S3PT
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateS3pt
block|}
block|,
block|{
name|ACPI_SIG_SBST
block|,
name|AcpiDmTableInfoSbst
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateSbst
block|}
block|,
block|{
name|ACPI_SIG_SLIC
block|,
name|NULL
block|,
name|AcpiDmDumpSlic
block|,
name|DtCompileSlic
block|,
name|TemplateSlic
block|}
block|,
block|{
name|ACPI_SIG_SLIT
block|,
name|NULL
block|,
name|AcpiDmDumpSlit
block|,
name|DtCompileSlit
block|,
name|TemplateSlit
block|}
block|,
block|{
name|ACPI_SIG_SPCR
block|,
name|AcpiDmTableInfoSpcr
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateSpcr
block|}
block|,
block|{
name|ACPI_SIG_SPMI
block|,
name|AcpiDmTableInfoSpmi
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateSpmi
block|}
block|,
block|{
name|ACPI_SIG_SRAT
block|,
name|NULL
block|,
name|AcpiDmDumpSrat
block|,
name|DtCompileSrat
block|,
name|TemplateSrat
block|}
block|,
block|{
name|ACPI_SIG_STAO
block|,
name|NULL
block|,
name|AcpiDmDumpStao
block|,
name|DtCompileStao
block|,
name|TemplateStao
block|}
block|,
block|{
name|ACPI_SIG_TCPA
block|,
name|NULL
block|,
name|AcpiDmDumpTcpa
block|,
name|DtCompileTcpa
block|,
name|TemplateTcpa
block|}
block|,
block|{
name|ACPI_SIG_TPM2
block|,
name|AcpiDmTableInfoTpm2
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateTpm2
block|}
block|,
block|{
name|ACPI_SIG_UEFI
block|,
name|AcpiDmTableInfoUefi
block|,
name|NULL
block|,
name|DtCompileUefi
block|,
name|TemplateUefi
block|}
block|,
block|{
name|ACPI_SIG_VRTC
block|,
name|AcpiDmTableInfoVrtc
block|,
name|AcpiDmDumpVrtc
block|,
name|DtCompileVrtc
block|,
name|TemplateVrtc
block|}
block|,
block|{
name|ACPI_SIG_WAET
block|,
name|AcpiDmTableInfoWaet
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateWaet
block|}
block|,
block|{
name|ACPI_SIG_WDAT
block|,
name|NULL
block|,
name|AcpiDmDumpWdat
block|,
name|DtCompileWdat
block|,
name|TemplateWdat
block|}
block|,
block|{
name|ACPI_SIG_WDDT
block|,
name|AcpiDmTableInfoWddt
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateWddt
block|}
block|,
block|{
name|ACPI_SIG_WDRT
block|,
name|AcpiDmTableInfoWdrt
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateWdrt
block|}
block|,
block|{
name|ACPI_SIG_WPBT
block|,
name|NULL
block|,
name|AcpiDmDumpWpbt
block|,
name|DtCompileWpbt
block|,
name|TemplateWpbt
block|}
block|,
block|{
name|ACPI_SIG_WSMT
block|,
name|AcpiDmTableInfoWsmt
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateWsmt
block|}
block|,
block|{
name|ACPI_SIG_XENV
block|,
name|AcpiDmTableInfoXenv
block|,
name|NULL
block|,
name|NULL
block|,
name|TemplateXenv
block|}
block|,
block|{
name|ACPI_SIG_XSDT
block|,
name|NULL
block|,
name|AcpiDmDumpXsdt
block|,
name|DtCompileXsdt
block|,
name|TemplateXsdt
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmGenerateChecksum  *  * PARAMETERS:  Table               - Pointer to table to be checksummed  *              Length              - Length of the table  *              OriginalChecksum    - Value of the checksum field  *  * RETURN:      8 bit checksum of buffer  *  * DESCRIPTION: Computes an 8 bit checksum of the table.  *  ******************************************************************************/
end_comment

begin_function
name|UINT8
name|AcpiDmGenerateChecksum
parameter_list|(
name|void
modifier|*
name|Table
parameter_list|,
name|UINT32
name|Length
parameter_list|,
name|UINT8
name|OriginalChecksum
parameter_list|)
block|{
name|UINT8
name|Checksum
decl_stmt|;
comment|/* Sum the entire table as-is */
name|Checksum
operator|=
name|AcpiTbChecksum
argument_list|(
operator|(
name|UINT8
operator|*
operator|)
name|Table
argument_list|,
name|Length
argument_list|)
expr_stmt|;
comment|/* Subtract off the existing checksum value in the table */
name|Checksum
operator|=
call|(
name|UINT8
call|)
argument_list|(
name|Checksum
operator|-
name|OriginalChecksum
argument_list|)
expr_stmt|;
comment|/* Compute the final checksum */
name|Checksum
operator|=
call|(
name|UINT8
call|)
argument_list|(
literal|0
operator|-
name|Checksum
argument_list|)
expr_stmt|;
return|return
operator|(
name|Checksum
operator|)
return|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmGetTableData  *  * PARAMETERS:  Signature           - ACPI signature (4 chars) to match  *  * RETURN:      Pointer to a valid ACPI_DMTABLE_DATA. Null if no match found.  *  * DESCRIPTION: Find a match in the global table of supported ACPI tables  *  ******************************************************************************/
end_comment

begin_function
specifier|const
name|ACPI_DMTABLE_DATA
modifier|*
name|AcpiDmGetTableData
parameter_list|(
name|char
modifier|*
name|Signature
parameter_list|)
block|{
specifier|const
name|ACPI_DMTABLE_DATA
modifier|*
name|Info
decl_stmt|;
for|for
control|(
name|Info
operator|=
name|AcpiDmTableData
init|;
name|Info
operator|->
name|Signature
condition|;
name|Info
operator|++
control|)
block|{
if|if
condition|(
name|ACPI_COMPARE_NAME
argument_list|(
name|Signature
argument_list|,
name|Info
operator|->
name|Signature
argument_list|)
condition|)
block|{
return|return
operator|(
name|Info
operator|)
return|;
block|}
block|}
return|return
operator|(
name|NULL
operator|)
return|;
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmDumpDataTable  *  * PARAMETERS:  Table               - An ACPI table  *  * RETURN:      None.  *  * DESCRIPTION: Format the contents of an ACPI data table (any table other  *              than an SSDT or DSDT that does not contain executable AML code)  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmDumpDataTable
parameter_list|(
name|ACPI_TABLE_HEADER
modifier|*
name|Table
parameter_list|)
block|{
name|ACPI_STATUS
name|Status
decl_stmt|;
specifier|const
name|ACPI_DMTABLE_DATA
modifier|*
name|TableData
decl_stmt|;
name|UINT32
name|Length
decl_stmt|;
comment|/* Ignore tables that contain AML */
if|if
condition|(
name|AcpiUtIsAmlTable
argument_list|(
name|Table
argument_list|)
condition|)
block|{
if|if
condition|(
name|Gbl_VerboseTemplates
condition|)
block|{
comment|/* Dump the raw table data */
name|Length
operator|=
name|Table
operator|->
name|Length
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"\n/*\n%s: Length %d (0x%X)\n\n"
argument_list|,
name|ACPI_RAW_TABLE_DATA_HEADER
argument_list|,
name|Length
argument_list|,
name|Length
argument_list|)
expr_stmt|;
name|AcpiUtDumpBuffer
argument_list|(
name|ACPI_CAST_PTR
argument_list|(
name|UINT8
argument_list|,
name|Table
argument_list|)
argument_list|,
name|Length
argument_list|,
name|DB_BYTE_DISPLAY
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|" */\n"
argument_list|)
expr_stmt|;
block|}
return|return;
block|}
comment|/*      * Handle tables that don't use the common ACPI table header structure.      * Currently, these are the FACS, RSDP, and S3PT.      */
if|if
condition|(
name|ACPI_COMPARE_NAME
argument_list|(
name|Table
operator|->
name|Signature
argument_list|,
name|ACPI_SIG_FACS
argument_list|)
condition|)
block|{
name|Length
operator|=
name|Table
operator|->
name|Length
expr_stmt|;
name|Status
operator|=
name|AcpiDmDumpTable
argument_list|(
name|Length
argument_list|,
literal|0
argument_list|,
name|Table
argument_list|,
literal|0
argument_list|,
name|AcpiDmTableInfoFacs
argument_list|)
expr_stmt|;
if|if
condition|(
name|ACPI_FAILURE
argument_list|(
name|Status
argument_list|)
condition|)
block|{
return|return;
block|}
block|}
elseif|else
if|if
condition|(
name|ACPI_VALIDATE_RSDP_SIG
argument_list|(
name|Table
operator|->
name|Signature
argument_list|)
condition|)
block|{
name|Length
operator|=
name|AcpiDmDumpRsdp
argument_list|(
name|Table
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|ACPI_COMPARE_NAME
argument_list|(
name|Table
operator|->
name|Signature
argument_list|,
name|ACPI_SIG_S3PT
argument_list|)
condition|)
block|{
name|Length
operator|=
name|AcpiDmDumpS3pt
argument_list|(
name|Table
argument_list|)
expr_stmt|;
block|}
else|else
block|{
comment|/*          * All other tables must use the common ACPI table header, dump it now          */
name|Length
operator|=
name|Table
operator|->
name|Length
expr_stmt|;
name|Status
operator|=
name|AcpiDmDumpTable
argument_list|(
name|Length
argument_list|,
literal|0
argument_list|,
name|Table
argument_list|,
literal|0
argument_list|,
name|AcpiDmTableInfoHeader
argument_list|)
expr_stmt|;
if|if
condition|(
name|ACPI_FAILURE
argument_list|(
name|Status
argument_list|)
condition|)
block|{
return|return;
block|}
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
comment|/* Match signature and dispatch appropriately */
name|TableData
operator|=
name|AcpiDmGetTableData
argument_list|(
name|Table
operator|->
name|Signature
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|TableData
condition|)
block|{
if|if
condition|(
operator|!
name|strncmp
argument_list|(
name|Table
operator|->
name|Signature
argument_list|,
literal|"OEM"
argument_list|,
literal|3
argument_list|)
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"\n**** OEM-defined ACPI table [%4.4s], unknown contents\n\n"
argument_list|,
name|Table
operator|->
name|Signature
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"\n**** Unknown ACPI table signature [%4.4s]\n\n"
argument_list|,
name|Table
operator|->
name|Signature
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Unknown ACPI table signature [%4.4s], "
argument_list|,
name|Table
operator|->
name|Signature
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|AcpiGbl_ForceAmlDisassembly
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"decoding ACPI table header only\n"
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"assuming table contains valid AML code\n"
argument_list|)
expr_stmt|;
block|}
block|}
block|}
elseif|else
if|if
condition|(
name|TableData
operator|->
name|TableHandler
condition|)
block|{
comment|/* Complex table, has a handler */
name|TableData
operator|->
name|TableHandler
argument_list|(
name|Table
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|TableData
operator|->
name|TableInfo
condition|)
block|{
comment|/* Simple table, just walk the info table */
name|Status
operator|=
name|AcpiDmDumpTable
argument_list|(
name|Length
argument_list|,
literal|0
argument_list|,
name|Table
argument_list|,
literal|0
argument_list|,
name|TableData
operator|->
name|TableInfo
argument_list|)
expr_stmt|;
if|if
condition|(
name|ACPI_FAILURE
argument_list|(
name|Status
argument_list|)
condition|)
block|{
return|return;
block|}
block|}
block|}
if|if
condition|(
operator|!
name|Gbl_DoTemplates
operator|||
name|Gbl_VerboseTemplates
condition|)
block|{
comment|/* Dump the raw table data */
name|AcpiOsPrintf
argument_list|(
literal|"\n%s: Length %d (0x%X)\n\n"
argument_list|,
name|ACPI_RAW_TABLE_DATA_HEADER
argument_list|,
name|Length
argument_list|,
name|Length
argument_list|)
expr_stmt|;
name|AcpiUtDumpBuffer
argument_list|(
name|ACPI_CAST_PTR
argument_list|(
name|UINT8
argument_list|,
name|Table
argument_list|)
argument_list|,
name|Length
argument_list|,
name|DB_BYTE_DISPLAY
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmLineHeader  *  * PARAMETERS:  Offset              - Current byte offset, from table start  *              ByteLength          - Length of the field in bytes, 0 for flags  *              Name                - Name of this field  *  * RETURN:      None  *  * DESCRIPTION: Utility routines for formatting output lines. Displays the  *              current table offset in hex and decimal, the field length,  *              and the field name.  *  ******************************************************************************/
end_comment

begin_function
name|void
name|AcpiDmLineHeader
parameter_list|(
name|UINT32
name|Offset
parameter_list|,
name|UINT32
name|ByteLength
parameter_list|,
name|char
modifier|*
name|Name
parameter_list|)
block|{
comment|/* Allow a null name for fields that span multiple lines (large buffers) */
if|if
condition|(
operator|!
name|Name
condition|)
block|{
name|Name
operator|=
literal|""
expr_stmt|;
block|}
if|if
condition|(
name|Gbl_DoTemplates
operator|&&
operator|!
name|Gbl_VerboseTemplates
condition|)
comment|/* Terse template */
block|{
if|if
condition|(
name|ByteLength
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"[%.4d] %34s : "
argument_list|,
name|ByteLength
argument_list|,
name|Name
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
operator|*
name|Name
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%41s : "
argument_list|,
name|Name
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%41s   "
argument_list|,
name|Name
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
comment|/* Normal disassembler or verbose template */
block|{
if|if
condition|(
name|ByteLength
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"[%3.3Xh %4.4d% 4d] %28s : "
argument_list|,
name|Offset
argument_list|,
name|Offset
argument_list|,
name|ByteLength
argument_list|,
name|Name
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
operator|*
name|Name
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%44s : "
argument_list|,
name|Name
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%44s   "
argument_list|,
name|Name
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|AcpiDmLineHeader2
parameter_list|(
name|UINT32
name|Offset
parameter_list|,
name|UINT32
name|ByteLength
parameter_list|,
name|char
modifier|*
name|Name
parameter_list|,
name|UINT32
name|Value
parameter_list|)
block|{
if|if
condition|(
name|Gbl_DoTemplates
operator|&&
operator|!
name|Gbl_VerboseTemplates
condition|)
comment|/* Terse template */
block|{
if|if
condition|(
name|ByteLength
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"[%.4d] %30s %3d : "
argument_list|,
name|ByteLength
argument_list|,
name|Name
argument_list|,
name|Value
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%36s % 3d : "
argument_list|,
name|Name
argument_list|,
name|Value
argument_list|)
expr_stmt|;
block|}
block|}
else|else
comment|/* Normal disassembler or verbose template */
block|{
if|if
condition|(
name|ByteLength
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"[%3.3Xh %4.4d %3d] %24s %3d : "
argument_list|,
name|Offset
argument_list|,
name|Offset
argument_list|,
name|ByteLength
argument_list|,
name|Name
argument_list|,
name|Value
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"[%3.3Xh %4.4d   ] %24s %3d : "
argument_list|,
name|Offset
argument_list|,
name|Offset
argument_list|,
name|Name
argument_list|,
name|Value
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_function

begin_comment
comment|/*******************************************************************************  *  * FUNCTION:    AcpiDmDumpTable  *  * PARAMETERS:  TableLength         - Length of the entire ACPI table  *              TableOffset         - Starting offset within the table for this  *                                    sub-descriptor (0 if main table)  *              Table               - The ACPI table  *              SubtableLength      - Length of this sub-descriptor  *              Info                - Info table for this ACPI table  *  * RETURN:      Status  *  * DESCRIPTION: Display ACPI table contents by walking the Info table.  *  * Note: This function must remain in sync with DtGetFieldLength.  *  ******************************************************************************/
end_comment

begin_function
name|ACPI_STATUS
name|AcpiDmDumpTable
parameter_list|(
name|UINT32
name|TableLength
parameter_list|,
name|UINT32
name|TableOffset
parameter_list|,
name|void
modifier|*
name|Table
parameter_list|,
name|UINT32
name|SubtableLength
parameter_list|,
name|ACPI_DMTABLE_INFO
modifier|*
name|Info
parameter_list|)
block|{
name|UINT8
modifier|*
name|Target
decl_stmt|;
name|UINT32
name|CurrentOffset
decl_stmt|;
name|UINT32
name|ByteLength
decl_stmt|;
name|UINT8
name|Temp8
decl_stmt|;
name|UINT16
name|Temp16
decl_stmt|;
name|UINT32
name|Temp32
decl_stmt|;
name|UINT64
name|Value
decl_stmt|;
specifier|const
name|AH_TABLE
modifier|*
name|TableData
decl_stmt|;
specifier|const
name|char
modifier|*
name|Name
decl_stmt|;
name|BOOLEAN
name|LastOutputBlankLine
init|=
name|FALSE
decl_stmt|;
name|ACPI_STATUS
name|Status
decl_stmt|;
name|char
name|RepairedName
index|[
literal|8
index|]
decl_stmt|;
if|if
condition|(
operator|!
name|Info
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"Display not implemented\n"
argument_list|)
expr_stmt|;
return|return
operator|(
name|AE_NOT_IMPLEMENTED
operator|)
return|;
block|}
comment|/* Walk entire Info table; Null name terminates */
for|for
control|(
init|;
name|Info
operator|->
name|Name
condition|;
name|Info
operator|++
control|)
block|{
comment|/*          * Target points to the field within the ACPI Table. CurrentOffset is          * the offset of the field from the start of the main table.          */
name|Target
operator|=
name|ACPI_ADD_PTR
argument_list|(
name|UINT8
argument_list|,
name|Table
argument_list|,
name|Info
operator|->
name|Offset
argument_list|)
expr_stmt|;
name|CurrentOffset
operator|=
name|TableOffset
operator|+
name|Info
operator|->
name|Offset
expr_stmt|;
comment|/* Check for beyond subtable end or (worse) beyond EOT */
if|if
condition|(
name|SubtableLength
operator|&&
operator|(
name|Info
operator|->
name|Offset
operator|>=
name|SubtableLength
operator|)
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"/**** ACPI subtable terminates early - "
literal|"may be older version (dump table) */\n"
argument_list|)
expr_stmt|;
comment|/* Move on to next subtable */
return|return
operator|(
name|AE_OK
operator|)
return|;
block|}
if|if
condition|(
name|CurrentOffset
operator|>=
name|TableLength
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"/**** ACPI table terminates "
literal|"in the middle of a data structure! (dump table) */\n"
argument_list|)
expr_stmt|;
return|return
operator|(
name|AE_BAD_DATA
operator|)
return|;
block|}
comment|/* Generate the byte length for this field */
switch|switch
condition|(
name|Info
operator|->
name|Opcode
condition|)
block|{
case|case
name|ACPI_DMT_UINT8
case|:
case|case
name|ACPI_DMT_CHKSUM
case|:
case|case
name|ACPI_DMT_SPACEID
case|:
case|case
name|ACPI_DMT_ACCWIDTH
case|:
case|case
name|ACPI_DMT_IVRS
case|:
case|case
name|ACPI_DMT_GTDT
case|:
case|case
name|ACPI_DMT_MADT
case|:
case|case
name|ACPI_DMT_PCCT
case|:
case|case
name|ACPI_DMT_PMTT
case|:
case|case
name|ACPI_DMT_PPTT
case|:
case|case
name|ACPI_DMT_SRAT
case|:
case|case
name|ACPI_DMT_ASF
case|:
case|case
name|ACPI_DMT_HESTNTYP
case|:
case|case
name|ACPI_DMT_FADTPM
case|:
case|case
name|ACPI_DMT_EINJACT
case|:
case|case
name|ACPI_DMT_EINJINST
case|:
case|case
name|ACPI_DMT_ERSTACT
case|:
case|case
name|ACPI_DMT_ERSTINST
case|:
case|case
name|ACPI_DMT_DMAR_SCOPE
case|:
name|ByteLength
operator|=
literal|1
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT16
case|:
case|case
name|ACPI_DMT_DMAR
case|:
case|case
name|ACPI_DMT_HEST
case|:
case|case
name|ACPI_DMT_HMAT
case|:
case|case
name|ACPI_DMT_NFIT
case|:
name|ByteLength
operator|=
literal|2
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT24
case|:
name|ByteLength
operator|=
literal|3
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT32
case|:
case|case
name|ACPI_DMT_NAME4
case|:
case|case
name|ACPI_DMT_SIG
case|:
case|case
name|ACPI_DMT_LPIT
case|:
name|ByteLength
operator|=
literal|4
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT40
case|:
name|ByteLength
operator|=
literal|5
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT48
case|:
case|case
name|ACPI_DMT_NAME6
case|:
name|ByteLength
operator|=
literal|6
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT56
case|:
case|case
name|ACPI_DMT_BUF7
case|:
name|ByteLength
operator|=
literal|7
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UINT64
case|:
case|case
name|ACPI_DMT_NAME8
case|:
name|ByteLength
operator|=
literal|8
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_BUF10
case|:
name|ByteLength
operator|=
literal|10
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_BUF12
case|:
name|ByteLength
operator|=
literal|12
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_BUF16
case|:
case|case
name|ACPI_DMT_UUID
case|:
name|ByteLength
operator|=
literal|16
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_BUF128
case|:
name|ByteLength
operator|=
literal|128
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UNICODE
case|:
case|case
name|ACPI_DMT_BUFFER
case|:
case|case
name|ACPI_DMT_RAW_BUFFER
case|:
name|ByteLength
operator|=
name|SubtableLength
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_STRING
case|:
name|ByteLength
operator|=
name|strlen
argument_list|(
name|ACPI_CAST_PTR
argument_list|(
name|char
argument_list|,
name|Target
argument_list|)
argument_list|)
operator|+
literal|1
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_GAS
case|:
if|if
condition|(
operator|!
name|LastOutputBlankLine
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
name|LastOutputBlankLine
operator|=
name|TRUE
expr_stmt|;
block|}
name|ByteLength
operator|=
sizeof|sizeof
argument_list|(
name|ACPI_GENERIC_ADDRESS
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_HESTNTFY
case|:
if|if
condition|(
operator|!
name|LastOutputBlankLine
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
name|LastOutputBlankLine
operator|=
name|TRUE
expr_stmt|;
block|}
name|ByteLength
operator|=
sizeof|sizeof
argument_list|(
name|ACPI_HEST_NOTIFY
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_IORTMEM
case|:
if|if
condition|(
operator|!
name|LastOutputBlankLine
condition|)
block|{
name|LastOutputBlankLine
operator|=
name|FALSE
expr_stmt|;
block|}
name|ByteLength
operator|=
sizeof|sizeof
argument_list|(
name|ACPI_IORT_MEMORY_ACCESS
argument_list|)
expr_stmt|;
break|break;
default|default:
name|ByteLength
operator|=
literal|0
expr_stmt|;
break|break;
block|}
comment|/* Check if we are beyond a subtable, or (worse) beyond EOT */
if|if
condition|(
name|CurrentOffset
operator|+
name|ByteLength
operator|>
name|TableLength
condition|)
block|{
if|if
condition|(
name|SubtableLength
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"/**** ACPI subtable terminates early - "
literal|"may be older version (dump table) */\n"
argument_list|)
expr_stmt|;
comment|/* Move on to next subtable */
return|return
operator|(
name|AE_OK
operator|)
return|;
block|}
name|AcpiOsPrintf
argument_list|(
literal|"/**** ACPI table terminates "
literal|"in the middle of a data structure! */\n"
argument_list|)
expr_stmt|;
return|return
operator|(
name|AE_BAD_DATA
operator|)
return|;
block|}
if|if
condition|(
name|Info
operator|->
name|Opcode
operator|==
name|ACPI_DMT_EXTRA_TEXT
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%s"
argument_list|,
name|Info
operator|->
name|Name
argument_list|)
expr_stmt|;
continue|continue;
block|}
comment|/* Start a new line and decode the opcode */
name|AcpiDmLineHeader
argument_list|(
name|CurrentOffset
argument_list|,
name|ByteLength
argument_list|,
name|Info
operator|->
name|Name
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|Info
operator|->
name|Opcode
condition|)
block|{
comment|/* Single-bit Flag fields. Note: Opcode is the bit position */
case|case
name|ACPI_DMT_FLAG0
case|:
case|case
name|ACPI_DMT_FLAG1
case|:
case|case
name|ACPI_DMT_FLAG2
case|:
case|case
name|ACPI_DMT_FLAG3
case|:
case|case
name|ACPI_DMT_FLAG4
case|:
case|case
name|ACPI_DMT_FLAG5
case|:
case|case
name|ACPI_DMT_FLAG6
case|:
case|case
name|ACPI_DMT_FLAG7
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
name|Target
operator|>>
name|Info
operator|->
name|Opcode
operator|)
operator|&
literal|0x01
argument_list|)
expr_stmt|;
break|break;
comment|/* 2-bit Flag fields */
case|case
name|ACPI_DMT_FLAGS0
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|*
name|Target
operator|&
literal|0x03
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS1
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
name|Target
operator|>>
literal|1
operator|)
operator|&
literal|0x03
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS2
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
name|Target
operator|>>
literal|2
operator|)
operator|&
literal|0x03
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS4
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
name|Target
operator|>>
literal|4
operator|)
operator|&
literal|0x03
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS4_0
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
operator|(
name|UINT32
operator|*
operator|)
name|Target
operator|)
operator|&
literal|0x0F
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS4_4
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
operator|(
name|UINT32
operator|*
operator|)
name|Target
operator|>>
literal|4
operator|)
operator|&
literal|0x0F
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS4_8
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
operator|(
name|UINT32
operator|*
operator|)
name|Target
operator|>>
literal|8
operator|)
operator|&
literal|0x0F
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS4_12
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%1.1X\n"
argument_list|,
operator|(
operator|*
operator|(
name|UINT32
operator|*
operator|)
name|Target
operator|>>
literal|12
operator|)
operator|&
literal|0x0F
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FLAGS16_16
case|:
name|AcpiOsPrintf
argument_list|(
literal|"%4.4X\n"
argument_list|,
operator|(
operator|*
operator|(
name|UINT32
operator|*
operator|)
name|Target
operator|>>
literal|16
operator|)
operator|&
literal|0xFFFF
argument_list|)
expr_stmt|;
break|break;
comment|/* Integer Data Types */
case|case
name|ACPI_DMT_UINT8
case|:
case|case
name|ACPI_DMT_UINT16
case|:
case|case
name|ACPI_DMT_UINT24
case|:
case|case
name|ACPI_DMT_UINT32
case|:
case|case
name|ACPI_DMT_UINT40
case|:
case|case
name|ACPI_DMT_UINT48
case|:
case|case
name|ACPI_DMT_UINT56
case|:
case|case
name|ACPI_DMT_UINT64
case|:
comment|/*              * Dump bytes - high byte first, low byte last.              * Note: All ACPI tables are little-endian.              */
name|Value
operator|=
literal|0
expr_stmt|;
for|for
control|(
name|Temp8
operator|=
operator|(
name|UINT8
operator|)
name|ByteLength
init|;
name|Temp8
operator|>
literal|0
condition|;
name|Temp8
operator|--
control|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%2.2X"
argument_list|,
name|Target
index|[
name|Temp8
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|Value
operator||=
name|Target
index|[
name|Temp8
operator|-
literal|1
index|]
expr_stmt|;
name|Value
operator|<<=
literal|8
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|Value
operator|&&
operator|(
name|Info
operator|->
name|Flags
operator|&
name|DT_DESCRIBES_OPTIONAL
operator|)
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|" [Optional field not present]"
argument_list|)
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_BUF7
case|:
case|case
name|ACPI_DMT_BUF10
case|:
case|case
name|ACPI_DMT_BUF12
case|:
case|case
name|ACPI_DMT_BUF16
case|:
case|case
name|ACPI_DMT_BUF128
case|:
comment|/*              * Buffer: Size depends on the opcode and was set above.              * Each hex byte is separated with a space.              * Multiple lines are separated by line continuation char.              */
for|for
control|(
name|Temp16
operator|=
literal|0
init|;
name|Temp16
operator|<
name|ByteLength
condition|;
name|Temp16
operator|++
control|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"%2.2X"
argument_list|,
name|Target
index|[
name|Temp16
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
call|(
name|UINT32
call|)
argument_list|(
name|Temp16
operator|+
literal|1
argument_list|)
operator|<
name|ByteLength
condition|)
block|{
if|if
condition|(
operator|(
name|Temp16
operator|>
literal|0
operator|)
operator|&&
operator|(
operator|!
operator|(
operator|(
name|Temp16
operator|+
literal|1
operator|)
operator|%
literal|16
operator|)
operator|)
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|" \\\n"
argument_list|)
expr_stmt|;
comment|/* Line continuation */
name|AcpiDmLineHeader
argument_list|(
literal|0
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|" "
argument_list|)
expr_stmt|;
block|}
block|}
block|}
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UUID
case|:
comment|/* Convert 16-byte UUID buffer to 36-byte formatted UUID string */
operator|(
name|void
operator|)
name|AuConvertUuidToString
argument_list|(
operator|(
name|char
operator|*
operator|)
name|Target
argument_list|,
name|MsgBuffer
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"%s\n"
argument_list|,
name|MsgBuffer
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_STRING
case|:
name|AcpiOsPrintf
argument_list|(
literal|"\"%s\"\n"
argument_list|,
name|ACPI_CAST_PTR
argument_list|(
name|char
argument_list|,
name|Target
argument_list|)
argument_list|)
expr_stmt|;
break|break;
comment|/* Fixed length ASCII name fields */
case|case
name|ACPI_DMT_SIG
case|:
name|AcpiUtCheckAndRepairAscii
argument_list|(
name|Target
argument_list|,
name|RepairedName
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"\"%.4s\"    "
argument_list|,
name|RepairedName
argument_list|)
expr_stmt|;
name|TableData
operator|=
name|AcpiAhGetTableInfo
argument_list|(
name|ACPI_CAST_PTR
argument_list|(
name|char
argument_list|,
name|Target
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|TableData
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
name|STRING_FORMAT
argument_list|,
name|TableData
operator|->
name|Description
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
name|ACPI_DMT_NAME4
case|:
name|AcpiUtCheckAndRepairAscii
argument_list|(
name|Target
argument_list|,
name|RepairedName
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"\"%.4s\"\n"
argument_list|,
name|RepairedName
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_NAME6
case|:
name|AcpiUtCheckAndRepairAscii
argument_list|(
name|Target
argument_list|,
name|RepairedName
argument_list|,
literal|6
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"\"%.6s\"\n"
argument_list|,
name|RepairedName
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_NAME8
case|:
name|AcpiUtCheckAndRepairAscii
argument_list|(
name|Target
argument_list|,
name|RepairedName
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|AcpiOsPrintf
argument_list|(
literal|"\"%.8s\"\n"
argument_list|,
name|RepairedName
argument_list|)
expr_stmt|;
break|break;
comment|/* Special Data Types */
case|case
name|ACPI_DMT_CHKSUM
case|:
comment|/* Checksum, display and validate */
name|AcpiOsPrintf
argument_list|(
literal|"%2.2X"
argument_list|,
operator|*
name|Target
argument_list|)
expr_stmt|;
name|Temp8
operator|=
name|AcpiDmGenerateChecksum
argument_list|(
name|Table
argument_list|,
name|ACPI_CAST_PTR
argument_list|(
name|ACPI_TABLE_HEADER
argument_list|,
name|Table
argument_list|)
operator|->
name|Length
argument_list|,
name|ACPI_CAST_PTR
argument_list|(
name|ACPI_TABLE_HEADER
argument_list|,
name|Table
argument_list|)
operator|->
name|Checksum
argument_list|)
expr_stmt|;
if|if
condition|(
name|Temp8
operator|!=
name|ACPI_CAST_PTR
argument_list|(
name|ACPI_TABLE_HEADER
argument_list|,
name|Table
argument_list|)
operator|->
name|Checksum
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"     /* Incorrect checksum, should be %2.2X */"
argument_list|,
name|Temp8
argument_list|)
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_SPACEID
case|:
comment|/* Address Space ID */
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiUtGetRegionName
argument_list|(
operator|*
name|Target
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_ACCWIDTH
case|:
comment|/* Encoded Access Width */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_GAS_WIDTH_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_GAS_WIDTH_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmGasAccessWidth
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_GAS
case|:
comment|/* Generic Address Structure */
name|AcpiOsPrintf
argument_list|(
name|STRING_FORMAT
argument_list|,
literal|"Generic Address Structure"
argument_list|)
expr_stmt|;
name|Status
operator|=
name|AcpiDmDumpTable
argument_list|(
name|TableLength
argument_list|,
name|CurrentOffset
argument_list|,
name|Target
argument_list|,
sizeof|sizeof
argument_list|(
name|ACPI_GENERIC_ADDRESS
argument_list|)
argument_list|,
name|AcpiDmTableInfoGas
argument_list|)
expr_stmt|;
if|if
condition|(
name|ACPI_FAILURE
argument_list|(
name|Status
argument_list|)
condition|)
block|{
return|return
operator|(
name|Status
operator|)
return|;
block|}
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
name|LastOutputBlankLine
operator|=
name|TRUE
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_ASF
case|:
comment|/* ASF subtable types */
name|Temp16
operator|=
call|(
name|UINT16
call|)
argument_list|(
operator|(
operator|*
name|Target
operator|)
operator|&
literal|0x7F
argument_list|)
expr_stmt|;
comment|/* Top bit can be zero or one */
if|if
condition|(
name|Temp16
operator|>
name|ACPI_ASF_TYPE_RESERVED
condition|)
block|{
name|Temp16
operator|=
name|ACPI_ASF_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmAsfSubnames
index|[
name|Temp16
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_DMAR
case|:
comment|/* DMAR subtable types */
name|Temp16
operator|=
name|ACPI_GET16
argument_list|(
name|Target
argument_list|)
expr_stmt|;
if|if
condition|(
name|Temp16
operator|>
name|ACPI_DMAR_TYPE_RESERVED
condition|)
block|{
name|Temp16
operator|=
name|ACPI_DMAR_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT16_FORMAT
argument_list|,
name|ACPI_GET16
argument_list|(
name|Target
argument_list|)
argument_list|,
name|AcpiDmDmarSubnames
index|[
name|Temp16
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_DMAR_SCOPE
case|:
comment|/* DMAR device scope types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_DMAR_SCOPE_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_DMAR_SCOPE_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmDmarScope
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_EINJACT
case|:
comment|/* EINJ Action types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_EINJ_ACTION_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_EINJ_ACTION_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmEinjActions
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_EINJINST
case|:
comment|/* EINJ Instruction types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_EINJ_INSTRUCTION_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_EINJ_INSTRUCTION_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmEinjInstructions
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_ERSTACT
case|:
comment|/* ERST Action types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_ERST_ACTION_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_ERST_ACTION_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmErstActions
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_ERSTINST
case|:
comment|/* ERST Instruction types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_ERST_INSTRUCTION_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_ERST_INSTRUCTION_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmErstInstructions
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_GTDT
case|:
comment|/* GTDT subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_GTDT_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_GTDT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmGtdtSubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_HEST
case|:
comment|/* HEST subtable types */
name|Temp16
operator|=
name|ACPI_GET16
argument_list|(
name|Target
argument_list|)
expr_stmt|;
if|if
condition|(
name|Temp16
operator|>
name|ACPI_HEST_TYPE_RESERVED
condition|)
block|{
name|Temp16
operator|=
name|ACPI_HEST_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT16_FORMAT
argument_list|,
name|ACPI_GET16
argument_list|(
name|Target
argument_list|)
argument_list|,
name|AcpiDmHestSubnames
index|[
name|Temp16
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_HESTNTFY
case|:
name|AcpiOsPrintf
argument_list|(
name|STRING_FORMAT
argument_list|,
literal|"Hardware Error Notification Structure"
argument_list|)
expr_stmt|;
name|Status
operator|=
name|AcpiDmDumpTable
argument_list|(
name|TableLength
argument_list|,
name|CurrentOffset
argument_list|,
name|Target
argument_list|,
sizeof|sizeof
argument_list|(
name|ACPI_HEST_NOTIFY
argument_list|)
argument_list|,
name|AcpiDmTableInfoHestNotify
argument_list|)
expr_stmt|;
if|if
condition|(
name|ACPI_FAILURE
argument_list|(
name|Status
argument_list|)
condition|)
block|{
return|return
operator|(
name|Status
operator|)
return|;
block|}
name|AcpiOsPrintf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
name|LastOutputBlankLine
operator|=
name|TRUE
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_HESTNTYP
case|:
comment|/* HEST Notify types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_HEST_NOTIFY_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_HEST_NOTIFY_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmHestNotifySubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_HMAT
case|:
comment|/* HMAT subtable types */
name|Temp16
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp16
operator|>
name|ACPI_HMAT_TYPE_RESERVED
condition|)
block|{
name|Temp16
operator|=
name|ACPI_HMAT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT16_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmHmatSubnames
index|[
name|Temp16
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_IORTMEM
case|:
name|AcpiOsPrintf
argument_list|(
name|STRING_FORMAT
argument_list|,
literal|"IORT Memory Access Properties"
argument_list|)
expr_stmt|;
name|Status
operator|=
name|AcpiDmDumpTable
argument_list|(
name|TableLength
argument_list|,
name|CurrentOffset
argument_list|,
name|Target
argument_list|,
sizeof|sizeof
argument_list|(
name|ACPI_IORT_MEMORY_ACCESS
argument_list|)
argument_list|,
name|AcpiDmTableInfoIortAcc
argument_list|)
expr_stmt|;
if|if
condition|(
name|ACPI_FAILURE
argument_list|(
name|Status
argument_list|)
condition|)
block|{
return|return
operator|(
name|Status
operator|)
return|;
block|}
name|LastOutputBlankLine
operator|=
name|TRUE
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_MADT
case|:
comment|/* MADT subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_MADT_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_MADT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmMadtSubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_NFIT
case|:
comment|/* NFIT subtable types */
name|Temp16
operator|=
name|ACPI_GET16
argument_list|(
name|Target
argument_list|)
expr_stmt|;
if|if
condition|(
name|Temp16
operator|>
name|ACPI_NFIT_TYPE_RESERVED
condition|)
block|{
name|Temp16
operator|=
name|ACPI_NFIT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT16_FORMAT
argument_list|,
name|ACPI_GET16
argument_list|(
name|Target
argument_list|)
argument_list|,
name|AcpiDmNfitSubnames
index|[
name|Temp16
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_PCCT
case|:
comment|/* PCCT subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_PCCT_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_PCCT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmPcctSubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_PMTT
case|:
comment|/* PMTT subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_PMTT_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_PMTT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmPmttSubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_PPTT
case|:
comment|/* PPTT subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_PPTT_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_PPTT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmPpttSubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_UNICODE
case|:
if|if
condition|(
name|ByteLength
operator|==
literal|0
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"/* Zero-length Data */\n"
argument_list|)
expr_stmt|;
break|break;
block|}
name|AcpiDmDumpUnicode
argument_list|(
name|Table
argument_list|,
name|CurrentOffset
argument_list|,
name|ByteLength
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_RAW_BUFFER
case|:
if|if
condition|(
name|ByteLength
operator|==
literal|0
condition|)
block|{
name|AcpiOsPrintf
argument_list|(
literal|"/* Zero-length Data */\n"
argument_list|)
expr_stmt|;
break|break;
block|}
name|AcpiDmDumpBuffer
argument_list|(
name|Table
argument_list|,
name|CurrentOffset
argument_list|,
name|ByteLength
argument_list|,
name|CurrentOffset
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_SRAT
case|:
comment|/* SRAT subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_SRAT_TYPE_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_SRAT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmSratSubnames
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_FADTPM
case|:
comment|/* FADT Preferred PM Profile names */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
if|if
condition|(
name|Temp8
operator|>
name|ACPI_FADT_PM_RESERVED
condition|)
block|{
name|Temp8
operator|=
name|ACPI_FADT_PM_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|AcpiDmFadtProfiles
index|[
name|Temp8
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_IVRS
case|:
comment|/* IVRS subtable types */
name|Temp8
operator|=
operator|*
name|Target
expr_stmt|;
switch|switch
condition|(
name|Temp8
condition|)
block|{
case|case
name|ACPI_IVRS_TYPE_HARDWARE
case|:
name|Name
operator|=
name|AcpiDmIvrsSubnames
index|[
literal|0
index|]
expr_stmt|;
break|break;
case|case
name|ACPI_IVRS_TYPE_MEMORY1
case|:
case|case
name|ACPI_IVRS_TYPE_MEMORY2
case|:
case|case
name|ACPI_IVRS_TYPE_MEMORY3
case|:
name|Name
operator|=
name|AcpiDmIvrsSubnames
index|[
literal|1
index|]
expr_stmt|;
break|break;
default|default:
name|Name
operator|=
name|AcpiDmIvrsSubnames
index|[
literal|2
index|]
expr_stmt|;
break|break;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT8_FORMAT
argument_list|,
operator|*
name|Target
argument_list|,
name|Name
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_LPIT
case|:
comment|/* LPIT subtable types */
name|Temp32
operator|=
name|ACPI_GET32
argument_list|(
name|Target
argument_list|)
expr_stmt|;
if|if
condition|(
name|Temp32
operator|>
name|ACPI_LPIT_TYPE_RESERVED
condition|)
block|{
name|Temp32
operator|=
name|ACPI_LPIT_TYPE_RESERVED
expr_stmt|;
block|}
name|AcpiOsPrintf
argument_list|(
name|UINT32_FORMAT
argument_list|,
name|ACPI_GET32
argument_list|(
name|Target
argument_list|)
argument_list|,
name|AcpiDmLpitSubnames
index|[
name|Temp32
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
name|ACPI_DMT_EXIT
case|:
return|return
operator|(
name|AE_OK
operator|)
return|;
default|default:
name|ACPI_ERROR
argument_list|(
operator|(
name|AE_INFO
operator|,
literal|"**** Invalid table opcode [0x%X] ****\n"
operator|,
name|Info
operator|->
name|Opcode
operator|)
argument_list|)
expr_stmt|;
return|return
operator|(
name|AE_SUPPORT
operator|)
return|;
block|}
block|}
if|if
condition|(
name|TableOffset
operator|&&
operator|!
name|SubtableLength
condition|)
block|{
comment|/*          * If this table is not the main table, the subtable must have a          * valid length          */
name|AcpiOsPrintf
argument_list|(
literal|"Invalid zero length subtable\n"
argument_list|)
expr_stmt|;
return|return
operator|(
name|AE_BAD_DATA
operator|)
return|;
block|}
return|return
operator|(
name|AE_OK
operator|)
return|;
block|}
end_function

end_unit

