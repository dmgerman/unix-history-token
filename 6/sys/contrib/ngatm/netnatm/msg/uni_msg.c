begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* This file was created automatically  * Source file: $Begemot: libunimsg/atm/msg/msg.def,v 1.3 2003/09/19 11:58:15 hbb Exp $  * $FreeBSD$  */
end_comment

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|_KERNEL
end_ifdef

begin_include
include|#
directive|include
file|<sys/libkern.h>
end_include

begin_else
else|#
directive|else
end_else

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<netnatm/unimsg.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/unistruct.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/unimsglib.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/priv.h>
end_include

begin_include
include|#
directive|include
file|<netnatm/msg/privmsg.c>
end_include

begin_function
specifier|static
name|void
name|print_alerting
parameter_list|(
name|struct
name|uni_alerting
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_alerting
parameter_list|(
name|struct
name|uni_alerting
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|connid
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|report
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_alerting
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_alerting
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_ALERTING
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|report
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_REPORT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_alerting
parameter_list|(
name|struct
name|uni_alerting
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CONNID
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|connid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_REPORT
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|report
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|report
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_alerting
init|=
block|{
literal|0
block|,
literal|"alerting"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_alerting
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_alerting
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_alerting
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_alerting
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_call_proc
parameter_list|(
name|struct
name|uni_call_proc
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_call_proc
parameter_list|(
name|struct
name|uni_call_proc
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|notify
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_call_proc
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_call_proc
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_CALL_PROC
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_call_proc
parameter_list|(
name|struct
name|uni_call_proc
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CONNID
case|:
name|out
operator|->
name|connid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_call_proc
init|=
block|{
literal|0
block|,
literal|"call_proc"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_call_proc
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_call_proc
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_call_proc
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_call_proc
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_connect
parameter_list|(
name|struct
name|uni_connect
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|blli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|conned
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|conned
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|connedsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connedsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|exqos
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|exqos
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|abrsetup
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|abrsetup
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|abradd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|abradd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_connect
parameter_list|(
name|struct
name|uni_connect
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|connid
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|conned
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connedsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|exqos
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|q2932
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|facility
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|abrsetup
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|abradd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|called_soft
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|report
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_connect
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_connect
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_CONNECT
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_AAL
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|blli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_BLLI
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|conned
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|conned
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNED
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connedsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connedsub
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EETD
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_TRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|exqos
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|exqos
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EXQOS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_FACILITY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|abrsetup
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|abrsetup
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_ABRSETUP
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|abradd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|abradd
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_ABRADD
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED_SOFT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|report
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_REPORT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_connect
parameter_list|(
name|struct
name|uni_connect
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_AAL
case|:
name|out
operator|->
name|aal
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|aal
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BLLI
case|:
name|out
operator|->
name|blli
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|blli
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CONNID
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|connid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CONNED
case|:
name|out
operator|->
name|conned
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|conned
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CONNEDSUB
case|:
name|out
operator|->
name|connedsub
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connedsub
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EETD
case|:
name|out
operator|->
name|eetd
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|eetd
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_TRAFFIC
case|:
name|out
operator|->
name|traffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|traffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EXQOS
case|:
name|out
operator|->
name|exqos
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|exqos
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_FACILITY
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|q2932
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|facility
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|facility
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_ABRSETUP
case|:
name|out
operator|->
name|abrsetup
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|abrsetup
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_ABRADD
case|:
name|out
operator|->
name|abradd
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|abradd
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED_SOFT
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|called_soft
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called_soft
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_REPORT
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|report
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|report
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_connect
init|=
block|{
literal|0
block|,
literal|"connect"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_connect
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_connect
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_connect
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_connect
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_connect_ack
parameter_list|(
name|struct
name|uni_connect_ack
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_connect_ack
parameter_list|(
name|struct
name|uni_connect_ack
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_connect_ack
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_connect_ack
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_CONNECT_ACK
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_connect_ack
parameter_list|(
name|struct
name|uni_connect_ack
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_connect_ack
init|=
block|{
literal|0
block|,
literal|"connect_ack"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_connect_ack
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_connect_ack
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_connect_ack
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_connect_ack
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_release
parameter_list|(
name|struct
name|uni_release
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|cause
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|crankback
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_release
parameter_list|(
name|struct
name|uni_release
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|q2932
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|facility
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|crankback
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_release
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_release
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_RELEASE
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|cause
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_FACILITY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|crankback
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CRANKBACK
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_release
parameter_list|(
name|struct
name|uni_release
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CAUSE
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|cause
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|cause
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_FACILITY
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|q2932
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|facility
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|facility
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CRANKBACK
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|crankback
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|crankback
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_release
init|=
block|{
literal|0
block|,
literal|"release"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_release
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_release
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_release
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_release
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_release_compl
parameter_list|(
name|struct
name|uni_release_compl
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|cause
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|crankback
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_release_compl
parameter_list|(
name|struct
name|uni_release_compl
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|crankback
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_release_compl
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_release_compl
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_RELEASE_COMPL
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|cause
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CAUSE
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|crankback
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CRANKBACK
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_release_compl
parameter_list|(
name|struct
name|uni_release_compl
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CAUSE
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|2
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|cause
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|cause
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_GIT
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CRANKBACK
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|crankback
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|crankback
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_release_compl
init|=
block|{
literal|0
block|,
literal|"release_compl"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_release_compl
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_release_compl
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_release_compl
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_release_compl
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_setup
parameter_list|(
name|struct
name|uni_setup
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|bearer
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BEARER
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|bearer
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|bhli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BHLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|bhli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|blli_repeat
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|blli_repeat
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_BLLI
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|blli
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|blli
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|qos
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_QOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|qos
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|scompl
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|scompl
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|atraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|atraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|mintraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|mintraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_callid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_callid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_param
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_PARAM
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_param
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|exqos
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|exqos
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|abrsetup
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|abrsetup
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|abradd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|abradd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|cscope
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CSCOPE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cscope
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|dtl_repeat
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|dtl_repeat
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|dtl
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_DTL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|mdcr
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_MDCR
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|mdcr
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_setup
parameter_list|(
name|struct
name|uni_setup
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BEARER
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|bearer
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BHLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|bhli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|blli_repeat
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_BLLI
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|blli
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_QOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|qos
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|scompl
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|scompl
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|atraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|mintraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|lij_callid
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_callid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|lij_param
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_PARAM
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_param
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|lij_seqno
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|exqos
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|abrsetup
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|abradd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CSCOPE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cscope
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|calling_soft
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|called_soft
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|dtl_repeat
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|dtl_repeat
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|dtl
index|[
name|i
index|]
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_DTL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|report
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_MDCR
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|mdcr
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_setup
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_setup
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_SETUP
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_AAL
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_TRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|bearer
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BEARER
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|bearer
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_BEARER
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|bhli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BHLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|bhli
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_BHLI
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|blli_repeat
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|blli_repeat
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
literal|0x10000000
operator|+
name|UNI_IE_BLLI
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_BLLI
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|blli
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|blli
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_BLLI
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CALLEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CALLINGSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|qos
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_QOS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|qos
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_QOS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EETD
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|scompl
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|scompl
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_SCOMPL
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_TNS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|atraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|atraffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_ATRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|mintraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|mintraffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_MINTRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_callid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_callid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_CALLID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_param
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_PARAM
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_param
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_PARAM
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_SEQNO
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|exqos
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|exqos
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EXQOS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|abrsetup
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|abrsetup
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_ABRSETUP
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|abradd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|abradd
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_ABRADD
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cscope
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CSCOPE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cscope
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CSCOPE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling_soft
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING_SOFT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED_SOFT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|dtl_repeat
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_DTL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|dtl_repeat
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
literal|0x10000000
operator|+
name|UNI_IE_DTL
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|dtl
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_DTL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_DTL
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|report
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_REPORT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|mdcr
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_MDCR
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|mdcr
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_MDCR
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_setup
parameter_list|(
name|struct
name|uni_setup
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_AAL
case|:
name|out
operator|->
name|aal
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|aal
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_TRAFFIC
case|:
name|out
operator|->
name|traffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|traffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BEARER
case|:
name|out
operator|->
name|bearer
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BEARER
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|bearer
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BHLI
case|:
name|out
operator|->
name|bhli
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BHLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|bhli
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BLLI
case|:
if|if
condition|(
name|IE_ISPRESENT
argument_list|(
name|cx
operator|->
name|repeat
argument_list|)
condition|)
name|out
operator|->
name|blli_repeat
operator|=
name|cx
operator|->
name|repeat
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_BLLI
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|blli
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|blli
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|blli
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CALLED
case|:
name|out
operator|->
name|called
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLEDSUB
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CALLING
case|:
name|out
operator|->
name|calling
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLINGSUB
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CONNID
case|:
name|out
operator|->
name|connid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_QOS
case|:
name|out
operator|->
name|qos
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_QOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|qos
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EETD
case|:
name|out
operator|->
name|eetd
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|eetd
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_SCOMPL
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|scompl
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|scompl
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_TNS
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_ATRAFFIC
case|:
name|out
operator|->
name|atraffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|atraffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_MINTRAFFIC
case|:
name|out
operator|->
name|mintraffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|mintraffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_LIJ_CALLID
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|lij_callid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_callid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_LIJ_PARAM
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|lij_param
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_PARAM
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_param
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_LIJ_SEQNO
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|lij_seqno
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_seqno
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EXQOS
case|:
name|out
operator|->
name|exqos
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EXQOS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|exqos
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_ABRSETUP
case|:
name|out
operator|->
name|abrsetup
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_ABRSETUP
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|abrsetup
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_ABRADD
case|:
name|out
operator|->
name|abradd
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_ABRADD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|abradd
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CSCOPE
case|:
name|out
operator|->
name|cscope
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CSCOPE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cscope
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLING_SOFT
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|calling_soft
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling_soft
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED_SOFT
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|called_soft
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called_soft
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_DTL
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
if|if
condition|(
name|IE_ISPRESENT
argument_list|(
name|cx
operator|->
name|repeat
argument_list|)
condition|)
name|out
operator|->
name|dtl_repeat
operator|=
name|cx
operator|->
name|repeat
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|dtl
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|dtl
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_DTL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_REPORT
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|report
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|report
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_MDCR
case|:
name|out
operator|->
name|mdcr
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_MDCR
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|mdcr
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_REPEAT
case|:
name|cx
operator|->
name|repeat
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|cx
operator|->
name|repeat
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_setup
init|=
block|{
literal|0
block|,
literal|"setup"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_setup
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_setup
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_setup
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_setup
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_status
parameter_list|(
name|struct
name|uni_status
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|callstate
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLSTATE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|callstate
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epstate
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPSTATE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epstate
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_status
parameter_list|(
name|struct
name|uni_status
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLSTATE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|callstate
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPSTATE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epstate
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_status
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_status
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_STATUS
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|callstate
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLSTATE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|callstate
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLSTATE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epstate
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPSTATE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epstate
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPSTATE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_status
parameter_list|(
name|struct
name|uni_status
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CALLSTATE
case|:
name|out
operator|->
name|callstate
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLSTATE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|callstate
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CAUSE
case|:
name|out
operator|->
name|cause
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPSTATE
case|:
name|out
operator|->
name|epstate
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPSTATE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epstate
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_status
init|=
block|{
literal|0
block|,
literal|"status"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_status
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_status
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_status
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_status
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_status_enq
parameter_list|(
name|struct
name|uni_status_enq
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_status_enq
parameter_list|(
name|struct
name|uni_status_enq
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_status_enq
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_status_enq
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_STATUS_ENQ
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_status_enq
parameter_list|(
name|struct
name|uni_status_enq
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_status_enq
init|=
block|{
literal|0
block|,
literal|"status_enq"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_status_enq
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_status_enq
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_status_enq
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_status_enq
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_notify
parameter_list|(
name|struct
name|uni_notify
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_notify
parameter_list|(
name|struct
name|uni_notify
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_notify
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_notify
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_NOTIFY
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_notify
parameter_list|(
name|struct
name|uni_notify
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_notify
init|=
block|{
literal|0
block|,
literal|"notify"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_notify
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_notify
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_notify
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_notify
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_restart
parameter_list|(
name|struct
name|uni_restart
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|restart
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_RESTART
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_restart
parameter_list|(
name|struct
name|uni_restart
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_RESTART
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_restart
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_restart
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_RESTART
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|restart
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_RESTART
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_RESTART
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_restart
parameter_list|(
name|struct
name|uni_restart
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CONNID
case|:
name|out
operator|->
name|connid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_RESTART
case|:
name|out
operator|->
name|restart
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_RESTART
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|restart
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_restart
init|=
block|{
literal|0
block|,
literal|"restart"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_restart
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_restart
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_restart
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_restart
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_restart_ack
parameter_list|(
name|struct
name|uni_restart_ack
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|restart
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_RESTART
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_restart_ack
parameter_list|(
name|struct
name|uni_restart_ack
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_RESTART
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_restart_ack
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_restart_ack
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_RESTART_ACK
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|restart
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_RESTART
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|restart
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_RESTART
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_restart_ack
parameter_list|(
name|struct
name|uni_restart_ack
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CONNID
case|:
name|out
operator|->
name|connid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_RESTART
case|:
name|out
operator|->
name|restart
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_RESTART
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|restart
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_restart_ack
init|=
block|{
literal|0
block|,
literal|"restart_ack"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_restart_ack
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_restart_ack
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_restart_ack
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_restart_ack
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_add_party
parameter_list|(
name|struct
name|uni_add_party
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|bhli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BHLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|bhli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|blli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|scompl
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|scompl
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|dtl_repeat
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|dtl_repeat
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|dtl
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_DTL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_add_party
parameter_list|(
name|struct
name|uni_add_party
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BHLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|bhli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|scompl
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|scompl
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|lij_seqno
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|calling_soft
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|called_soft
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|dtl_repeat
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|dtl_repeat
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|dtl
index|[
name|i
index|]
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_DTL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_add_party
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_add_party
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_ADD_PARTY
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_AAL
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|bhli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BHLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|bhli
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_BHLI
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|blli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_BLLI
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CALLEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CALLINGSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|scompl
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|scompl
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_SCOMPL
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_TNS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EETD
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_SEQNO
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling_soft
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING_SOFT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED_SOFT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|dtl_repeat
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_DTL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|dtl_repeat
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
literal|0x10000000
operator|+
name|UNI_IE_DTL
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|dtl
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_DTL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_DTL
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_add_party
parameter_list|(
name|struct
name|uni_add_party
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_AAL
case|:
name|out
operator|->
name|aal
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|aal
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BHLI
case|:
name|out
operator|->
name|bhli
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BHLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|bhli
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BLLI
case|:
name|out
operator|->
name|blli
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|blli
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED
case|:
name|out
operator|->
name|called
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLEDSUB
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CALLING
case|:
name|out
operator|->
name|calling
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLINGSUB
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_SCOMPL
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|scompl
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_SCOMPL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|scompl
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_TNS
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EETD
case|:
name|out
operator|->
name|eetd
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|eetd
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_LIJ_SEQNO
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|lij_seqno
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_seqno
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLING_SOFT
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|calling_soft
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling_soft
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED_SOFT
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|called_soft
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called_soft
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_DTL
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
if|if
condition|(
name|IE_ISPRESENT
argument_list|(
name|cx
operator|->
name|repeat
argument_list|)
condition|)
name|out
operator|->
name|dtl_repeat
operator|=
name|cx
operator|->
name|repeat
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_DTL
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|dtl
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|dtl
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_DTL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|dtl
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_REPEAT
case|:
name|cx
operator|->
name|repeat
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPEAT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|cx
operator|->
name|repeat
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_add_party
init|=
block|{
literal|0
block|,
literal|"add_party"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_add_party
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_add_party
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_add_party
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_add_party
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_add_party_ack
parameter_list|(
name|struct
name|uni_add_party_ack
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|blli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|conned
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|conned
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|connedsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|connedsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_add_party_ack
parameter_list|(
name|struct
name|uni_add_party_ack
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|conned
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|connedsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|called_soft
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_add_party_ack
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_add_party_ack
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_ADD_PARTY_ACK
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|aal
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_AAL
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|aal
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_AAL
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|blli
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_BLLI
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|blli
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_BLLI
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|eetd
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EETD
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|eetd
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EETD
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|conned
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|conned
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNED
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|connedsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|connedsub
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CONNEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called_soft
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called_soft
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED_SOFT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_add_party_ack
parameter_list|(
name|struct
name|uni_add_party_ack
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_AAL
case|:
name|out
operator|->
name|aal
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_AAL
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|aal
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_BLLI
case|:
name|out
operator|->
name|blli
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_BLLI
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|blli
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EETD
case|:
name|out
operator|->
name|eetd
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EETD
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|eetd
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CONNED
case|:
name|out
operator|->
name|conned
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|conned
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CONNEDSUB
case|:
name|out
operator|->
name|connedsub
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CONNEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|connedsub
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CALLED_SOFT
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|called_soft
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED_SOFT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called_soft
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_add_party_ack
init|=
block|{
literal|0
block|,
literal|"add_party_ack"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_add_party_ack
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_add_party_ack
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_add_party_ack
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_add_party_ack
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_party_alerting
parameter_list|(
name|struct
name|uni_party_alerting
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_party_alerting
parameter_list|(
name|struct
name|uni_party_alerting
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_party_alerting
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_party_alerting
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_PARTY_ALERTING
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_party_alerting
parameter_list|(
name|struct
name|uni_party_alerting
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_party_alerting
init|=
block|{
literal|0
block|,
literal|"party_alerting"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_party_alerting
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_party_alerting
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_party_alerting
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_party_alerting
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_add_party_rej
parameter_list|(
name|struct
name|uni_add_party_rej
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|crankback
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_add_party_rej
parameter_list|(
name|struct
name|uni_add_party_rej
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|crankback
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_add_party_rej
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_add_party_rej
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_ADD_PARTY_REJ
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|crankback
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|crankback
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CRANKBACK
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_add_party_rej
parameter_list|(
name|struct
name|uni_add_party_rej
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CAUSE
case|:
name|out
operator|->
name|cause
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CRANKBACK
case|:
if|if
condition|(
operator|!
operator|(
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|crankback
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CRANKBACK
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|crankback
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_add_party_rej
init|=
block|{
literal|0
block|,
literal|"add_party_rej"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_add_party_rej
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_add_party_rej
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_add_party_rej
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_add_party_rej
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_drop_party
parameter_list|(
name|struct
name|uni_drop_party
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_drop_party
parameter_list|(
name|struct
name|uni_drop_party
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_drop_party
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_drop_party
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_DROP_PARTY
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_drop_party
parameter_list|(
name|struct
name|uni_drop_party
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CAUSE
case|:
name|out
operator|->
name|cause
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_drop_party
init|=
block|{
literal|0
block|,
literal|"drop_party"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_drop_party
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_drop_party
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_drop_party
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_drop_party
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_drop_party_ack
parameter_list|(
name|struct
name|uni_drop_party_ack
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_drop_party_ack
parameter_list|(
name|struct
name|uni_drop_party_ack
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
name|ret
operator||=
name|IE_ISPRESENT
argument_list|(
name|m
operator|->
name|uu
argument_list|)
expr_stmt|;
else|else
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_drop_party_ack
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_drop_party_ack
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_DROP_PARTY_ACK
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|uu
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UU
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|uu
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UU
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_drop_party_ack
parameter_list|(
name|struct
name|uni_drop_party_ack
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CAUSE
case|:
name|out
operator|->
name|cause
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UU
case|:
if|if
condition|(
operator|!
operator|(
operator|!
name|cx
operator|->
name|pnni
operator|)
condition|)
return|return
operator|(
name|DEC_ILL
operator|)
return|;
name|out
operator|->
name|uu
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UU
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|uu
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_drop_party_ack
init|=
block|{
literal|0
block|,
literal|"drop_party_ack"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_drop_party_ack
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_drop_party_ack
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_drop_party_ack
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_drop_party_ack
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_leaf_setup_req
parameter_list|(
name|struct
name|uni_leaf_setup_req
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_callid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_callid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_leaf_setup_req
parameter_list|(
name|struct
name|uni_leaf_setup_req
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_callid
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_leaf_setup_req
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_leaf_setup_req
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_LEAF_SETUP_REQ
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_TNS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CALLINGSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_CALLEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_callid
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_callid
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_CALLID
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_SEQNO
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_leaf_setup_req
parameter_list|(
name|struct
name|uni_leaf_setup_req
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_TNS
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CALLING
case|:
name|out
operator|->
name|calling
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLINGSUB
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLINGSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|callingsub
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLINGSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|callingsub
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_CALLED
case|:
name|out
operator|->
name|called
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLEDSUB
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_CALLEDSUB
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|calledsub
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calledsub
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_LIJ_CALLID
case|:
name|out
operator|->
name|lij_callid
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_CALLID
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_callid
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_LIJ_SEQNO
case|:
name|out
operator|->
name|lij_seqno
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_seqno
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_leaf_setup_req
init|=
block|{
literal|0
block|,
literal|"leaf_setup_req"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_leaf_setup_req
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_leaf_setup_req
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_leaf_setup_req
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_leaf_setup_req
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_leaf_setup_fail
parameter_list|(
name|struct
name|uni_leaf_setup_fail
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calledsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_leaf_setup_fail
parameter_list|(
name|struct
name|uni_leaf_setup_fail
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_leaf_setup_fail
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_leaf_setup_fail
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_LEAF_SETUP_FAIL
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calledsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|lij_seqno
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|lij_seqno
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_LIJ_SEQNO
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TNS
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_TNS
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_leaf_setup_fail
parameter_list|(
name|struct
name|uni_leaf_setup_fail
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CAUSE
case|:
name|out
operator|->
name|cause
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED
case|:
name|out
operator|->
name|called
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLEDSUB
case|:
name|out
operator|->
name|calledsub
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calledsub
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_LIJ_SEQNO
case|:
name|out
operator|->
name|lij_seqno
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_LIJ_SEQNO
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|lij_seqno
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_TNS
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_TNS
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|tns
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TNS
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|tns
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_leaf_setup_fail
init|=
block|{
literal|0
block|,
literal|"leaf_setup_fail"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_leaf_setup_fail
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_leaf_setup_fail
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_leaf_setup_fail
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_leaf_setup_fail
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_cobisetup
parameter_list|(
name|struct
name|uni_cobisetup
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calledsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_cobisetup
parameter_list|(
name|struct
name|uni_cobisetup
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_cobisetup
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_cobisetup
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_COBISETUP
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_FACILITY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calledsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_cobisetup
parameter_list|(
name|struct
name|uni_cobisetup
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_FACILITY
case|:
name|out
operator|->
name|facility
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|facility
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED
case|:
name|out
operator|->
name|called
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLEDSUB
case|:
name|out
operator|->
name|calledsub
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calledsub
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLING
case|:
name|out
operator|->
name|calling
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_cobisetup
init|=
block|{
literal|0
block|,
literal|"cobisetup"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_cobisetup
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_cobisetup
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_cobisetup
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_cobisetup
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_facility
parameter_list|(
name|struct
name|uni_facility
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calledsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_facility
parameter_list|(
name|struct
name|uni_facility
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|called
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_facility
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_facility
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_FACILITY
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|facility
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|facility
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_FACILITY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|called
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLED
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|called
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLED
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calledsub
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calledsub
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLEDSUB
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|calling
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CALLING
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|calling
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CALLING
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_facility
parameter_list|(
name|struct
name|uni_facility
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_FACILITY
case|:
name|out
operator|->
name|facility
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_FACILITY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|facility
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLED
case|:
name|out
operator|->
name|called
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLED
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|called
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLEDSUB
case|:
name|out
operator|->
name|calledsub
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLEDSUB
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calledsub
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_CALLING
case|:
name|out
operator|->
name|calling
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CALLING
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|calling
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_facility
init|=
block|{
literal|0
block|,
literal|"facility"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_facility
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_facility
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_facility
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_facility
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_modify_req
parameter_list|(
name|struct
name|uni_modify_req
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|atraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|atraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|mintraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|mintraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_modify_req
parameter_list|(
name|struct
name|uni_modify_req
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|atraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|mintraffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_modify_req
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_modify_req
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_MODIFY_REQ
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_TRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|atraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|atraffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_ATRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|mintraffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|mintraffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_MINTRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_modify_req
parameter_list|(
name|struct
name|uni_modify_req
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_TRAFFIC
case|:
name|out
operator|->
name|traffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|traffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_ATRAFFIC
case|:
name|out
operator|->
name|atraffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_ATRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|atraffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_MINTRAFFIC
case|:
name|out
operator|->
name|mintraffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_MINTRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|mintraffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_modify_req
init|=
block|{
literal|0
block|,
literal|"modify_req"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_modify_req
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_modify_req
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_modify_req
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_modify_req
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_modify_ack
parameter_list|(
name|struct
name|uni_modify_ack
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_modify_ack
parameter_list|(
name|struct
name|uni_modify_ack
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_modify_ack
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_modify_ack
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_MODIFY_ACK
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|report
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_REPORT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|traffic
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|traffic
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_TRAFFIC
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_modify_ack
parameter_list|(
name|struct
name|uni_modify_ack
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_REPORT
case|:
name|out
operator|->
name|report
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|report
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_TRAFFIC
case|:
name|out
operator|->
name|traffic
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_TRAFFIC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|traffic
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_modify_ack
init|=
block|{
literal|0
block|,
literal|"modify_ack"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_modify_ack
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_modify_ack
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_modify_ack
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_modify_ack
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_modify_rej
parameter_list|(
name|struct
name|uni_modify_rej
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_modify_rej
parameter_list|(
name|struct
name|uni_modify_rej
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_modify_rej
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_modify_rej
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_MODIFY_REJ
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|cause
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|cause
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_CAUSE
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_modify_rej
parameter_list|(
name|struct
name|uni_modify_rej
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_CAUSE
case|:
name|out
operator|->
name|cause
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_CAUSE
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|cause
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_modify_rej
init|=
block|{
literal|0
block|,
literal|"modify_rej"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_modify_rej
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_modify_rej
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_modify_rej
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_modify_rej
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_conn_avail
parameter_list|(
name|struct
name|uni_conn_avail
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|msg
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|msg
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_conn_avail
parameter_list|(
name|struct
name|uni_conn_avail
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|u_int
name|i
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
block|{
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|report
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_conn_avail
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_conn_avail
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
name|u_int
name|i
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_CONN_AVAIL
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|notify
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|notify
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_NOTIFY
operator|)
return|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|p
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_GIT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
operator|(
name|i
operator|<<
literal|16
operator|)
operator|+
name|UNI_IE_GIT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|report
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_REPORT
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|report
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_REPORT
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_conn_avail
parameter_list|(
name|struct
name|uni_conn_avail
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|i
decl_stmt|;
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_NOTIFY
case|:
name|out
operator|->
name|notify
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_NOTIFY
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|notify
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_GIT
case|:
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|UNI_NUM_IE_GIT
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|!
name|IE_ISPRESENT
argument_list|(
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|)
condition|)
block|{
name|out
operator|->
name|git
index|[
name|i
index|]
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_GIT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|git
index|[
name|i
index|]
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
block|}
break|break;
case|case
name|UNI_IE_REPORT
case|:
name|out
operator|->
name|report
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_REPORT
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|report
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_conn_avail
init|=
block|{
literal|0
block|,
literal|"conn_avail"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_conn_avail
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_conn_avail
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_conn_avail
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_conn_avail
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|print_unknown
parameter_list|(
name|struct
name|uni_unknown
modifier|*
name|msg
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
if|if
condition|(
name|msg
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
if|if
condition|(
name|msg
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
condition|)
name|uni_print_ie_internal
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|msg
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|check_unknown
parameter_list|(
name|struct
name|uni_unknown
modifier|*
name|m
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|int
name|ret
init|=
literal|0
decl_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
expr_stmt|;
name|ret
operator||=
name|uni_check_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|m
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
expr_stmt|;
return|return
name|ret
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|encode_unknown
parameter_list|(
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|struct
name|uni_unknown
modifier|*
name|p
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
name|u_int
name|mlen
decl_stmt|;
if|if
condition|(
name|uni_encode_msg_hdr
argument_list|(
name|msg
argument_list|,
operator|&
name|p
operator|->
name|hdr
argument_list|,
name|UNI_UNKNOWN
argument_list|,
name|cx
argument_list|,
operator|&
name|mlen
argument_list|)
condition|)
return|return
operator|(
operator|-
literal|2
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|epref
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_EPREF
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|epref
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_EPREF
operator|)
return|;
if|if
condition|(
operator|(
name|p
operator|->
name|unrec
operator|.
name|h
operator|.
name|present
operator|&
name|UNI_IE_PRESENT
operator|)
operator|&&
name|uni_encode_ie
argument_list|(
name|UNI_IE_UNREC
argument_list|,
name|msg
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|p
operator|->
name|unrec
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|UNI_IE_UNREC
operator|)
return|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|0
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|8
expr_stmt|;
name|msg
operator|->
name|b_buf
index|[
name|mlen
operator|+
literal|1
index|]
operator|=
operator|(
operator|(
name|msg
operator|->
name|b_wptr
operator|-
name|msg
operator|->
name|b_rptr
operator|)
operator|-
name|mlen
operator|-
literal|2
operator|)
operator|>>
literal|0
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|decode_unknown
parameter_list|(
name|struct
name|uni_unknown
modifier|*
name|out
parameter_list|,
name|struct
name|uni_msg
modifier|*
name|msg
parameter_list|,
name|enum
name|uni_ietype
name|ie
parameter_list|,
name|struct
name|uni_iehdr
modifier|*
name|hdr
parameter_list|,
name|u_int
name|ielen
parameter_list|,
name|struct
name|unicx
modifier|*
name|cx
parameter_list|)
block|{
switch|switch
condition|(
name|ie
condition|)
block|{
case|case
name|UNI_IE_EPREF
case|:
name|out
operator|->
name|epref
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_EPREF
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|epref
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
case|case
name|UNI_IE_UNREC
case|:
name|out
operator|->
name|unrec
operator|.
name|h
operator|=
operator|*
name|hdr
expr_stmt|;
if|if
condition|(
name|hdr
operator|->
name|present
operator|&
name|UNI_IE_ERROR
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
if|if
condition|(
name|uni_decode_ie_body
argument_list|(
name|UNI_IE_UNREC
argument_list|,
operator|(
expr|union
name|uni_ieall
operator|*
operator|)
operator|&
name|out
operator|->
name|unrec
argument_list|,
name|msg
argument_list|,
name|ielen
argument_list|,
name|cx
argument_list|)
condition|)
return|return
operator|(
name|DEC_ERR
operator|)
return|;
break|break;
default|default:
return|return
operator|(
name|DEC_ILL
operator|)
return|;
block|}
return|return
operator|(
name|DEC_OK
operator|)
return|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|struct
name|msgdecl
name|decl_unknown
init|=
block|{
literal|0
block|,
literal|"unknown"
block|,
operator|(
name|uni_msg_print_f
operator|)
name|print_unknown
block|,
operator|(
name|uni_msg_check_f
operator|)
name|check_unknown
block|,
operator|(
name|uni_msg_encode_f
operator|)
name|encode_unknown
block|,
operator|(
name|uni_msg_decode_f
operator|)
name|decode_unknown
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|const
name|struct
name|msgdecl
modifier|*
name|uni_msgtable
index|[
literal|256
index|]
init|=
block|{
operator|&
name|decl_unknown
block|,
comment|/* 0x00 */
operator|&
name|decl_alerting
block|,
comment|/* 0x01 */
operator|&
name|decl_call_proc
block|,
comment|/* 0x02 */
operator|&
name|decl_unknown
block|,
comment|/* 0x03 */
operator|&
name|decl_unknown
block|,
comment|/* 0x04 */
operator|&
name|decl_setup
block|,
comment|/* 0x05 */
operator|&
name|decl_unknown
block|,
comment|/* 0x06 */
operator|&
name|decl_connect
block|,
comment|/* 0x07 */
operator|&
name|decl_unknown
block|,
comment|/* 0x08 */
operator|&
name|decl_unknown
block|,
comment|/* 0x09 */
operator|&
name|decl_unknown
block|,
comment|/* 0x0a */
operator|&
name|decl_unknown
block|,
comment|/* 0x0b */
operator|&
name|decl_unknown
block|,
comment|/* 0x0c */
operator|&
name|decl_unknown
block|,
comment|/* 0x0d */
operator|&
name|decl_unknown
block|,
comment|/* 0x0e */
operator|&
name|decl_connect_ack
block|,
comment|/* 0x0f */
operator|&
name|decl_unknown
block|,
comment|/* 0x10 */
operator|&
name|decl_unknown
block|,
comment|/* 0x11 */
operator|&
name|decl_unknown
block|,
comment|/* 0x12 */
operator|&
name|decl_unknown
block|,
comment|/* 0x13 */
operator|&
name|decl_unknown
block|,
comment|/* 0x14 */
operator|&
name|decl_cobisetup
block|,
comment|/* 0x15 */
operator|&
name|decl_unknown
block|,
comment|/* 0x16 */
operator|&
name|decl_unknown
block|,
comment|/* 0x17 */
operator|&
name|decl_unknown
block|,
comment|/* 0x18 */
operator|&
name|decl_unknown
block|,
comment|/* 0x19 */
operator|&
name|decl_unknown
block|,
comment|/* 0x1a */
operator|&
name|decl_unknown
block|,
comment|/* 0x1b */
operator|&
name|decl_unknown
block|,
comment|/* 0x1c */
operator|&
name|decl_unknown
block|,
comment|/* 0x1d */
operator|&
name|decl_unknown
block|,
comment|/* 0x1e */
operator|&
name|decl_unknown
block|,
comment|/* 0x1f */
operator|&
name|decl_unknown
block|,
comment|/* 0x20 */
operator|&
name|decl_unknown
block|,
comment|/* 0x21 */
operator|&
name|decl_unknown
block|,
comment|/* 0x22 */
operator|&
name|decl_unknown
block|,
comment|/* 0x23 */
operator|&
name|decl_unknown
block|,
comment|/* 0x24 */
operator|&
name|decl_unknown
block|,
comment|/* 0x25 */
operator|&
name|decl_unknown
block|,
comment|/* 0x26 */
operator|&
name|decl_unknown
block|,
comment|/* 0x27 */
operator|&
name|decl_unknown
block|,
comment|/* 0x28 */
operator|&
name|decl_unknown
block|,
comment|/* 0x29 */
operator|&
name|decl_unknown
block|,
comment|/* 0x2a */
operator|&
name|decl_unknown
block|,
comment|/* 0x2b */
operator|&
name|decl_unknown
block|,
comment|/* 0x2c */
operator|&
name|decl_unknown
block|,
comment|/* 0x2d */
operator|&
name|decl_unknown
block|,
comment|/* 0x2e */
operator|&
name|decl_unknown
block|,
comment|/* 0x2f */
operator|&
name|decl_unknown
block|,
comment|/* 0x30 */
operator|&
name|decl_unknown
block|,
comment|/* 0x31 */
operator|&
name|decl_unknown
block|,
comment|/* 0x32 */
operator|&
name|decl_unknown
block|,
comment|/* 0x33 */
operator|&
name|decl_unknown
block|,
comment|/* 0x34 */
operator|&
name|decl_unknown
block|,
comment|/* 0x35 */
operator|&
name|decl_unknown
block|,
comment|/* 0x36 */
operator|&
name|decl_unknown
block|,
comment|/* 0x37 */
operator|&
name|decl_unknown
block|,
comment|/* 0x38 */
operator|&
name|decl_unknown
block|,
comment|/* 0x39 */
operator|&
name|decl_unknown
block|,
comment|/* 0x3a */
operator|&
name|decl_unknown
block|,
comment|/* 0x3b */
operator|&
name|decl_unknown
block|,
comment|/* 0x3c */
operator|&
name|decl_unknown
block|,
comment|/* 0x3d */
operator|&
name|decl_unknown
block|,
comment|/* 0x3e */
operator|&
name|decl_unknown
block|,
comment|/* 0x3f */
operator|&
name|decl_unknown
block|,
comment|/* 0x40 */
operator|&
name|decl_unknown
block|,
comment|/* 0x41 */
operator|&
name|decl_unknown
block|,
comment|/* 0x42 */
operator|&
name|decl_unknown
block|,
comment|/* 0x43 */
operator|&
name|decl_unknown
block|,
comment|/* 0x44 */
operator|&
name|decl_unknown
block|,
comment|/* 0x45 */
operator|&
name|decl_restart
block|,
comment|/* 0x46 */
operator|&
name|decl_unknown
block|,
comment|/* 0x47 */
operator|&
name|decl_unknown
block|,
comment|/* 0x48 */
operator|&
name|decl_unknown
block|,
comment|/* 0x49 */
operator|&
name|decl_unknown
block|,
comment|/* 0x4a */
operator|&
name|decl_unknown
block|,
comment|/* 0x4b */
operator|&
name|decl_unknown
block|,
comment|/* 0x4c */
operator|&
name|decl_release
block|,
comment|/* 0x4d */
operator|&
name|decl_restart_ack
block|,
comment|/* 0x4e */
operator|&
name|decl_unknown
block|,
comment|/* 0x4f */
operator|&
name|decl_unknown
block|,
comment|/* 0x50 */
operator|&
name|decl_unknown
block|,
comment|/* 0x51 */
operator|&
name|decl_unknown
block|,
comment|/* 0x52 */
operator|&
name|decl_unknown
block|,
comment|/* 0x53 */
operator|&
name|decl_unknown
block|,
comment|/* 0x54 */
operator|&
name|decl_unknown
block|,
comment|/* 0x55 */
operator|&
name|decl_unknown
block|,
comment|/* 0x56 */
operator|&
name|decl_unknown
block|,
comment|/* 0x57 */
operator|&
name|decl_unknown
block|,
comment|/* 0x58 */
operator|&
name|decl_unknown
block|,
comment|/* 0x59 */
operator|&
name|decl_release_compl
block|,
comment|/* 0x5a */
operator|&
name|decl_unknown
block|,
comment|/* 0x5b */
operator|&
name|decl_unknown
block|,
comment|/* 0x5c */
operator|&
name|decl_unknown
block|,
comment|/* 0x5d */
operator|&
name|decl_unknown
block|,
comment|/* 0x5e */
operator|&
name|decl_unknown
block|,
comment|/* 0x5f */
operator|&
name|decl_unknown
block|,
comment|/* 0x60 */
operator|&
name|decl_unknown
block|,
comment|/* 0x61 */
operator|&
name|decl_facility
block|,
comment|/* 0x62 */
operator|&
name|decl_unknown
block|,
comment|/* 0x63 */
operator|&
name|decl_unknown
block|,
comment|/* 0x64 */
operator|&
name|decl_unknown
block|,
comment|/* 0x65 */
operator|&
name|decl_unknown
block|,
comment|/* 0x66 */
operator|&
name|decl_unknown
block|,
comment|/* 0x67 */
operator|&
name|decl_unknown
block|,
comment|/* 0x68 */
operator|&
name|decl_unknown
block|,
comment|/* 0x69 */
operator|&
name|decl_unknown
block|,
comment|/* 0x6a */
operator|&
name|decl_unknown
block|,
comment|/* 0x6b */
operator|&
name|decl_unknown
block|,
comment|/* 0x6c */
operator|&
name|decl_unknown
block|,
comment|/* 0x6d */
operator|&
name|decl_notify
block|,
comment|/* 0x6e */
operator|&
name|decl_unknown
block|,
comment|/* 0x6f */
operator|&
name|decl_unknown
block|,
comment|/* 0x70 */
operator|&
name|decl_unknown
block|,
comment|/* 0x71 */
operator|&
name|decl_unknown
block|,
comment|/* 0x72 */
operator|&
name|decl_unknown
block|,
comment|/* 0x73 */
operator|&
name|decl_unknown
block|,
comment|/* 0x74 */
operator|&
name|decl_status_enq
block|,
comment|/* 0x75 */
operator|&
name|decl_unknown
block|,
comment|/* 0x76 */
operator|&
name|decl_unknown
block|,
comment|/* 0x77 */
operator|&
name|decl_unknown
block|,
comment|/* 0x78 */
operator|&
name|decl_unknown
block|,
comment|/* 0x79 */
operator|&
name|decl_unknown
block|,
comment|/* 0x7a */
operator|&
name|decl_unknown
block|,
comment|/* 0x7b */
operator|&
name|decl_unknown
block|,
comment|/* 0x7c */
operator|&
name|decl_status
block|,
comment|/* 0x7d */
operator|&
name|decl_unknown
block|,
comment|/* 0x7e */
operator|&
name|decl_unknown
block|,
comment|/* 0x7f */
operator|&
name|decl_add_party
block|,
comment|/* 0x80 */
operator|&
name|decl_add_party_ack
block|,
comment|/* 0x81 */
operator|&
name|decl_add_party_rej
block|,
comment|/* 0x82 */
operator|&
name|decl_drop_party
block|,
comment|/* 0x83 */
operator|&
name|decl_drop_party_ack
block|,
comment|/* 0x84 */
operator|&
name|decl_party_alerting
block|,
comment|/* 0x85 */
operator|&
name|decl_unknown
block|,
comment|/* 0x86 */
operator|&
name|decl_unknown
block|,
comment|/* 0x87 */
operator|&
name|decl_modify_req
block|,
comment|/* 0x88 */
operator|&
name|decl_modify_ack
block|,
comment|/* 0x89 */
operator|&
name|decl_modify_rej
block|,
comment|/* 0x8a */
operator|&
name|decl_conn_avail
block|,
comment|/* 0x8b */
operator|&
name|decl_unknown
block|,
comment|/* 0x8c */
operator|&
name|decl_unknown
block|,
comment|/* 0x8d */
operator|&
name|decl_unknown
block|,
comment|/* 0x8e */
operator|&
name|decl_unknown
block|,
comment|/* 0x8f */
operator|&
name|decl_leaf_setup_fail
block|,
comment|/* 0x90 */
operator|&
name|decl_leaf_setup_req
block|,
comment|/* 0x91 */
operator|&
name|decl_unknown
block|,
comment|/* 0x92 */
operator|&
name|decl_unknown
block|,
comment|/* 0x93 */
operator|&
name|decl_unknown
block|,
comment|/* 0x94 */
operator|&
name|decl_unknown
block|,
comment|/* 0x95 */
operator|&
name|decl_unknown
block|,
comment|/* 0x96 */
operator|&
name|decl_unknown
block|,
comment|/* 0x97 */
operator|&
name|decl_unknown
block|,
comment|/* 0x98 */
operator|&
name|decl_unknown
block|,
comment|/* 0x99 */
operator|&
name|decl_unknown
block|,
comment|/* 0x9a */
operator|&
name|decl_unknown
block|,
comment|/* 0x9b */
operator|&
name|decl_unknown
block|,
comment|/* 0x9c */
operator|&
name|decl_unknown
block|,
comment|/* 0x9d */
operator|&
name|decl_unknown
block|,
comment|/* 0x9e */
operator|&
name|decl_unknown
block|,
comment|/* 0x9f */
operator|&
name|decl_unknown
block|,
comment|/* 0xa0 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa1 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa2 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa3 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa4 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa5 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa6 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa7 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa8 */
operator|&
name|decl_unknown
block|,
comment|/* 0xa9 */
operator|&
name|decl_unknown
block|,
comment|/* 0xaa */
operator|&
name|decl_unknown
block|,
comment|/* 0xab */
operator|&
name|decl_unknown
block|,
comment|/* 0xac */
operator|&
name|decl_unknown
block|,
comment|/* 0xad */
operator|&
name|decl_unknown
block|,
comment|/* 0xae */
operator|&
name|decl_unknown
block|,
comment|/* 0xaf */
operator|&
name|decl_unknown
block|,
comment|/* 0xb0 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb1 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb2 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb3 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb4 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb5 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb6 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb7 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb8 */
operator|&
name|decl_unknown
block|,
comment|/* 0xb9 */
operator|&
name|decl_unknown
block|,
comment|/* 0xba */
operator|&
name|decl_unknown
block|,
comment|/* 0xbb */
operator|&
name|decl_unknown
block|,
comment|/* 0xbc */
operator|&
name|decl_unknown
block|,
comment|/* 0xbd */
operator|&
name|decl_unknown
block|,
comment|/* 0xbe */
operator|&
name|decl_unknown
block|,
comment|/* 0xbf */
operator|&
name|decl_unknown
block|,
comment|/* 0xc0 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc1 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc2 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc3 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc4 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc5 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc6 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc7 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc8 */
operator|&
name|decl_unknown
block|,
comment|/* 0xc9 */
operator|&
name|decl_unknown
block|,
comment|/* 0xca */
operator|&
name|decl_unknown
block|,
comment|/* 0xcb */
operator|&
name|decl_unknown
block|,
comment|/* 0xcc */
operator|&
name|decl_unknown
block|,
comment|/* 0xcd */
operator|&
name|decl_unknown
block|,
comment|/* 0xce */
operator|&
name|decl_unknown
block|,
comment|/* 0xcf */
operator|&
name|decl_unknown
block|,
comment|/* 0xd0 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd1 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd2 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd3 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd4 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd5 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd6 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd7 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd8 */
operator|&
name|decl_unknown
block|,
comment|/* 0xd9 */
operator|&
name|decl_unknown
block|,
comment|/* 0xda */
operator|&
name|decl_unknown
block|,
comment|/* 0xdb */
operator|&
name|decl_unknown
block|,
comment|/* 0xdc */
operator|&
name|decl_unknown
block|,
comment|/* 0xdd */
operator|&
name|decl_unknown
block|,
comment|/* 0xde */
operator|&
name|decl_unknown
block|,
comment|/* 0xdf */
operator|&
name|decl_unknown
block|,
comment|/* 0xe0 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe1 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe2 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe3 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe4 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe5 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe6 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe7 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe8 */
operator|&
name|decl_unknown
block|,
comment|/* 0xe9 */
operator|&
name|decl_unknown
block|,
comment|/* 0xea */
operator|&
name|decl_unknown
block|,
comment|/* 0xeb */
operator|&
name|decl_unknown
block|,
comment|/* 0xec */
operator|&
name|decl_unknown
block|,
comment|/* 0xed */
operator|&
name|decl_unknown
block|,
comment|/* 0xee */
operator|&
name|decl_unknown
block|,
comment|/* 0xef */
operator|&
name|decl_unknown
block|,
comment|/* 0xf0 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf1 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf2 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf3 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf4 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf5 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf6 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf7 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf8 */
operator|&
name|decl_unknown
block|,
comment|/* 0xf9 */
operator|&
name|decl_unknown
block|,
comment|/* 0xfa */
operator|&
name|decl_unknown
block|,
comment|/* 0xfb */
operator|&
name|decl_unknown
block|,
comment|/* 0xfc */
operator|&
name|decl_unknown
block|,
comment|/* 0xfd */
operator|&
name|decl_unknown
block|,
comment|/* 0xfe */
operator|&
name|decl_unknown
block|,
comment|/* 0xff */
block|}
decl_stmt|;
end_decl_stmt

end_unit

