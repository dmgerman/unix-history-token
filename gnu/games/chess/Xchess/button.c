begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* This file contains code for X-CHESS.    Copyright (C) 1986 Free Software Foundation, Inc.  This file is part of X-CHESS.  X-CHESS is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY.  No author or distributor accepts responsibility to anyone for the consequences of using it or for whether it serves any particular purpose or works at all, unless he says so in writing.  Refer to the X-CHESS General Public License for full details.  Everyone is granted permission to copy, modify and redistribute X-CHESS, but only under the conditions described in the X-CHESS General Public License.   A copy of this license is supposed to have been given to you along with X-CHESS so you can know your rights and responsibilities.  It should be in a file named COPYING.  Among other things, the copyright notice and this notice must be preserved on all copies.  */
end_comment

begin_comment
comment|/* RCS Info: $Revision: 1.4 $ on $Date: 86/11/26 12:09:41 $  *           $Source: /users/faustus/xchess/RCS/button.c,v $  * Copyright (c) 1986 Wayne A. Christopher, U. C. Berkeley CAD Group  *	Permission is granted to do anything with this code except sell it  *	or remove this message.  *  * Do stuff with the buttons.  * The configuration we're using is:	Draw	Back	Pause  *					Resign	Fwd	Flip  *					Reset	Save	Easy (Switch)  */
end_comment

begin_include
include|#
directive|include
file|"xchess.h"
end_include

begin_typedef
typedef|typedef
enum|enum
name|choice
block|{
name|NOCHOICE
block|,
name|DRAW
block|,
name|RESIGN
block|,
name|REPLAY
block|,
name|SWITCH
block|,
name|FORE
block|,
name|SAVE
block|,
name|STOP
block|,
name|FLIP
block|,
name|RESTART
block|,
name|EASY
block|}
name|choice
typedef|;
end_typedef

begin_struct
specifier|static
struct|struct
name|but
block|{
name|char
modifier|*
name|label
decl_stmt|;
name|int
name|x
decl_stmt|,
name|y
decl_stmt|;
name|int
name|width
decl_stmt|,
name|height
decl_stmt|;
name|choice
name|which
decl_stmt|;
block|}
name|buts
index|[]
init|=
block|{
block|{
literal|"Draw"
block|,
literal|0
block|,
literal|20
block|,
literal|108
block|,
literal|29
block|,
name|DRAW
block|}
block|,
block|{
literal|"Back"
block|,
literal|109
block|,
literal|20
block|,
literal|108
block|,
literal|29
block|,
name|REPLAY
block|}
block|,
block|{
literal|"Pause"
block|,
literal|219
block|,
literal|20
block|,
literal|108
block|,
literal|29
block|,
name|STOP
block|}
block|,
block|{
literal|"Resign"
block|,
literal|0
block|,
literal|50
block|,
literal|108
block|,
literal|29
block|,
name|RESIGN
block|}
block|,
block|{
literal|"Fwd"
block|,
literal|109
block|,
literal|50
block|,
literal|108
block|,
literal|29
block|,
name|FORE
block|}
block|,
block|{
literal|"Flip"
block|,
literal|219
block|,
literal|50
block|,
literal|108
block|,
literal|29
block|,
name|FLIP
block|}
block|,
block|{
literal|"Reset"
block|,
literal|0
block|,
literal|80
block|,
literal|108
block|,
literal|29
block|,
name|RESTART
block|}
block|,
block|{
literal|"Save"
block|,
literal|109
block|,
literal|80
block|,
literal|108
block|,
literal|29
block|,
name|SAVE
block|}
block|,
define|#
directive|define
name|EASY_OFFSET
value|8
block|{
literal|"Switch"
block|,
literal|219
block|,
literal|80
block|,
literal|108
block|,
literal|29
block|,
name|SWITCH
block|}
comment|/*	{ "NoEasy", 219, 80, 108, 29, EASY }*/
block|}
struct|;
end_struct

begin_decl_stmt
specifier|static
name|int
name|easy
init|=
literal|1
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|button_draw
parameter_list|(
name|win
parameter_list|)
name|windata
modifier|*
name|win
decl_stmt|;
block|{
name|int
name|i
decl_stmt|,
name|x
decl_stmt|,
name|numbuts
init|=
sizeof|sizeof
argument_list|(
name|buts
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
expr|struct
name|but
argument_list|)
decl_stmt|;
name|XSetState
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|border
operator|.
name|pixel
argument_list|,
name|WhitePixel
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|GXcopy
argument_list|,
name|AllPlanes
argument_list|)
expr_stmt|;
name|XSetLineAttributes
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|BORDER_WIDTH
argument_list|,
name|LineSolid
argument_list|,
name|CapButt
argument_list|,
name|JoinMiter
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|win
operator|->
name|buttonwin
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|29
argument_list|,
name|BUTTON_WIDTH
argument_list|,
literal|29
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|win
operator|->
name|buttonwin
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
literal|0
argument_list|,
literal|60
argument_list|,
name|BUTTON_WIDTH
argument_list|,
literal|60
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|win
operator|->
name|buttonwin
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
literal|108
argument_list|,
literal|0
argument_list|,
literal|108
argument_list|,
name|BUTTON_HEIGHT
argument_list|)
expr_stmt|;
name|XDrawLine
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|win
operator|->
name|buttonwin
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
literal|219
argument_list|,
literal|0
argument_list|,
literal|219
argument_list|,
name|BUTTON_HEIGHT
argument_list|)
expr_stmt|;
name|XSetFont
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|large
operator|->
name|fid
argument_list|)
expr_stmt|;
name|XSetForeground
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|textcolor
operator|.
name|pixel
argument_list|)
expr_stmt|;
name|XSetBackground
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|textback
operator|.
name|pixel
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|numbuts
condition|;
name|i
operator|++
control|)
block|{
name|x
operator|=
operator|(
name|buts
index|[
name|i
index|]
operator|.
name|width
operator|-
name|XTextWidth
argument_list|(
name|win
operator|->
name|large
argument_list|,
name|buts
index|[
name|i
index|]
operator|.
name|label
argument_list|,
name|strlen
argument_list|(
name|buts
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|)
operator|)
operator|/
literal|2
expr_stmt|;
name|XDrawImageString
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|win
operator|->
name|buttonwin
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|buts
index|[
name|i
index|]
operator|.
name|x
operator|+
name|x
argument_list|,
name|buts
index|[
name|i
index|]
operator|.
name|y
argument_list|,
name|buts
index|[
name|i
index|]
operator|.
name|label
argument_list|,
name|strlen
argument_list|(
name|buts
index|[
name|i
index|]
operator|.
name|label
argument_list|)
argument_list|)
expr_stmt|;
block|}
return|return;
block|}
end_function

begin_function
name|void
name|button_service
parameter_list|(
name|win
parameter_list|,
name|event
parameter_list|)
name|windata
modifier|*
name|win
decl_stmt|;
name|XEvent
modifier|*
name|event
decl_stmt|;
block|{
name|XKeyEvent
modifier|*
name|ev
init|=
operator|&
name|event
operator|->
name|xkey
decl_stmt|;
name|choice
name|c
decl_stmt|;
name|int
name|i
decl_stmt|,
name|numbuts
init|=
sizeof|sizeof
argument_list|(
name|buts
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
expr|struct
name|but
argument_list|)
decl_stmt|;
name|char
modifier|*
name|s
decl_stmt|;
name|ev
operator|->
name|y
operator|+=
literal|15
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|numbuts
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|ev
operator|->
name|x
operator|>=
name|buts
index|[
name|i
index|]
operator|.
name|x
operator|)
operator|&&
operator|(
name|ev
operator|->
name|x
operator|<=
name|buts
index|[
name|i
index|]
operator|.
name|x
operator|+
name|buts
index|[
name|i
index|]
operator|.
name|width
operator|)
operator|&&
operator|(
name|ev
operator|->
name|y
operator|>=
name|buts
index|[
name|i
index|]
operator|.
name|y
operator|)
operator|&&
operator|(
name|ev
operator|->
name|y
operator|<=
name|buts
index|[
name|i
index|]
operator|.
name|y
operator|+
name|buts
index|[
name|i
index|]
operator|.
name|height
operator|)
condition|)
block|{
name|c
operator|=
name|buts
index|[
name|i
index|]
operator|.
name|which
expr_stmt|;
break|break;
block|}
if|if
condition|(
operator|(
name|i
operator|==
name|numbuts
operator|)
operator|||
operator|(
name|c
operator|==
name|NOCHOICE
operator|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Bad choice.\n"
argument_list|,
name|true
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|loading_flag
operator|&&
operator|(
name|c
operator|!=
name|STOP
operator|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"You can only use PAUSE now\n"
argument_list|,
name|true
argument_list|)
expr_stmt|;
return|return;
block|}
switch|switch
condition|(
name|c
condition|)
block|{
case|case
name|DRAW
case|:
if|if
condition|(
operator|!
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Just a sec...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|pop_question
argument_list|(
operator|(
operator|(
name|win
operator|==
name|win1
operator|)
condition|?
name|win2
else|:
name|win1
operator|)
argument_list|,
literal|"The other player wants\nto call the game a draw.\nDo you agree?\n"
argument_list|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"The other player declines the draw\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
name|message_add
argument_list|(
name|win1
argument_list|,
literal|"Draw agreed.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|oneboard
condition|)
name|message_add
argument_list|(
name|win2
argument_list|,
literal|"Draw agreed.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|cleanup
argument_list|(
literal|"Draw agreed."
argument_list|)
expr_stmt|;
break|break;
case|case
name|RESIGN
case|:
if|if
condition|(
operator|!
name|pop_question
argument_list|(
name|win
argument_list|,
literal|"Are you sure\nyou want to resign?"
argument_list|)
condition|)
return|return;
if|if
condition|(
operator|(
name|oneboard
operator|&&
operator|!
name|progflag
operator|)
operator|||
operator|(
name|nexttomove
operator|==
name|win
operator|->
name|color
operator|)
condition|)
block|{
if|if
condition|(
name|nexttomove
operator|==
name|WHITE
condition|)
name|s
operator|=
literal|"White resigns."
expr_stmt|;
else|else
name|s
operator|=
literal|"Black resigns."
expr_stmt|;
if|if
condition|(
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
name|s
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
literal|"\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|message_add
argument_list|(
name|win1
argument_list|,
name|s
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
literal|"\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win2
argument_list|,
name|s
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
literal|"\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
block|}
name|sleep
argument_list|(
literal|5
argument_list|)
expr_stmt|;
name|cleanup
argument_list|(
name|s
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"It's not your turn.\n"
argument_list|,
name|true
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
name|REPLAY
case|:
if|if
condition|(
operator|!
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Just a sec...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|pop_question
argument_list|(
operator|(
operator|(
name|win
operator|==
name|win1
operator|)
condition|?
name|win2
else|:
name|win1
operator|)
argument_list|,
literal|"The other player wants\nto take back his last move.\nDo you let him?\n"
argument_list|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"The other player refuses...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
if|if
condition|(
operator|!
name|moves
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Can't back up...\n"
argument_list|,
name|true
argument_list|)
expr_stmt|;
break|break;
block|}
name|message_add
argument_list|(
name|win1
argument_list|,
literal|"Replaying...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|oneboard
condition|)
name|message_add
argument_list|(
name|win2
argument_list|,
literal|"Replaying...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|replay
argument_list|()
expr_stmt|;
if|if
condition|(
name|progflag
condition|)
name|replay
argument_list|()
expr_stmt|;
break|break;
case|case
name|FORE
case|:
if|if
condition|(
operator|!
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Just a sec...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|pop_question
argument_list|(
operator|(
operator|(
name|win
operator|==
name|win1
operator|)
condition|?
name|win2
else|:
name|win1
operator|)
argument_list|,
literal|"The other player wants\nto do a 'fore'.\nIs that ok with you?\n"
argument_list|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"The other player refuses...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
if|if
condition|(
operator|!
name|foremoves
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Can't go forward...\n"
argument_list|,
name|true
argument_list|)
expr_stmt|;
break|break;
block|}
name|message_add
argument_list|(
name|win1
argument_list|,
literal|"Moving forward...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|oneboard
condition|)
name|message_add
argument_list|(
name|win2
argument_list|,
literal|"Moving forward...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|forward
argument_list|()
expr_stmt|;
break|break;
case|case
name|SWITCH
case|:
name|message_add
argument_list|(
name|win
argument_list|,
literal|"You can't switch yet.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
break|break;
case|case
name|SAVE
case|:
if|if
condition|(
name|saveflag
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Game is already being logged in file '"
argument_list|,
name|true
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
name|record_file
argument_list|,
name|true
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
literal|"'.\n"
argument_list|,
name|true
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Saving game to file '"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
name|record_file
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
literal|"'.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|record_save
argument_list|()
expr_stmt|;
block|}
break|break;
case|case
name|STOP
case|:
if|if
condition|(
name|loading_flag
condition|)
block|{
name|loading_paused
operator|=
operator|(
name|loading_paused
condition|?
name|false
else|:
name|true
operator|)
expr_stmt|;
name|message_add
argument_list|(
name|win
argument_list|,
name|loading_paused
condition|?
literal|"Stopped.\nHit 'Pause' again to restart.\n"
else|:
literal|"Restarted.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|clock_started
condition|)
block|{
if|if
condition|(
operator|!
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Just a sec...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|pop_question
argument_list|(
operator|(
operator|(
name|win
operator|==
name|win1
operator|)
condition|?
name|win2
else|:
name|win1
operator|)
argument_list|,
literal|"The other player wants\nto stop the clock.\nDo you let him?\n"
argument_list|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"The other player refuses to pause.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
name|message_add
argument_list|(
name|win1
argument_list|,
literal|"Clock stopped.\nHit 'Pause' again to restart.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|oneboard
condition|)
name|message_add
argument_list|(
name|win2
argument_list|,
literal|"Clock stopped.\nHit 'Pause' again to restart.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|clock_started
operator|=
name|false
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
operator|!
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Just a sec...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|pop_question
argument_list|(
operator|(
operator|(
name|win
operator|==
name|win1
operator|)
condition|?
name|win2
else|:
name|win1
operator|)
argument_list|,
literal|"The other player wants\nto start the clock again.\nIs that ok?\n"
argument_list|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"The other player refuses to resume.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
name|message_add
argument_list|(
name|win1
argument_list|,
literal|"Clock restarted.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|oneboard
condition|)
name|message_add
argument_list|(
name|win2
argument_list|,
literal|"Clock restarted.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|clock_started
operator|=
name|true
expr_stmt|;
block|}
break|break;
case|case
name|FLIP
case|:
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Flipping window...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|win
operator|->
name|flipped
operator|=
name|win
operator|->
name|flipped
condition|?
name|false
else|:
name|true
expr_stmt|;
name|win_redraw
argument_list|(
name|win
argument_list|,
operator|(
name|XEvent
operator|*
operator|)
name|NULL
argument_list|)
expr_stmt|;
break|break;
case|case
name|RESTART
case|:
if|if
condition|(
operator|!
name|oneboard
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Just a sec...\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|pop_question
argument_list|(
operator|(
operator|(
name|win
operator|==
name|win1
operator|)
condition|?
name|win2
else|:
name|win1
operator|)
argument_list|,
literal|"The other player wants\nto restart the game.\nDo you agree?\n"
argument_list|)
condition|)
block|{
name|message_add
argument_list|(
name|win
argument_list|,
literal|"The other player refuses to reset\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
name|message_add
argument_list|(
name|win
argument_list|,
literal|"Restarting game.\n"
argument_list|,
name|false
argument_list|)
expr_stmt|;
name|restart
argument_list|()
expr_stmt|;
break|break;
case|case
name|EASY
case|:
if|if
condition|(
name|oneboard
condition|)
block|{
name|int
name|x
decl_stmt|;
if|if
condition|(
name|easy
condition|)
name|easy
operator|=
literal|0
expr_stmt|;
else|else
name|easy
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|easy
condition|)
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|label
operator|=
literal|" Easy "
expr_stmt|;
else|else
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|label
operator|=
literal|"NoEasy"
expr_stmt|;
name|program_easy
argument_list|(
name|easy
argument_list|)
expr_stmt|;
name|x
operator|=
operator|(
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|width
operator|-
name|XTextWidth
argument_list|(
name|win
operator|->
name|large
argument_list|,
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|label
argument_list|,
name|strlen
argument_list|(
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|label
argument_list|)
argument_list|)
operator|)
operator|/
literal|2
expr_stmt|;
name|XSetFont
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|large
operator|->
name|fid
argument_list|)
expr_stmt|;
name|XSetForeground
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|textcolor
operator|.
name|pixel
argument_list|)
expr_stmt|;
name|XSetBackground
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|win
operator|->
name|textback
operator|.
name|pixel
argument_list|)
expr_stmt|;
name|XDrawImageString
argument_list|(
name|win
operator|->
name|display
argument_list|,
name|win
operator|->
name|buttonwin
argument_list|,
name|DefaultGC
argument_list|(
name|win
operator|->
name|display
argument_list|,
literal|0
argument_list|)
argument_list|,
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|x
operator|+
name|x
argument_list|,
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|y
argument_list|,
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|label
argument_list|,
name|strlen
argument_list|(
name|buts
index|[
name|EASY_OFFSET
index|]
operator|.
name|label
argument_list|)
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
return|return;
block|}
end_function

end_unit

