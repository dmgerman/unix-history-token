begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_typedef
typedef|typedef
struct|struct
block|{
name|unsigned
modifier|*
name|bits
decl_stmt|;
name|unsigned
name|size
decl_stmt|;
block|}
name|bits_list_type
typedef|;
end_typedef

begin_define
define|#
directive|define
name|BYTEWIDTH
value|8
end_define

begin_define
define|#
directive|define
name|NULL
value|0
end_define

begin_define
define|#
directive|define
name|BITS_BLOCK_SIZE
value|(sizeof (unsigned) * BYTEWIDTH)
end_define

begin_define
define|#
directive|define
name|BITS_BLOCK
parameter_list|(
name|position
parameter_list|)
value|((position) / BITS_BLOCK_SIZE)
end_define

begin_define
define|#
directive|define
name|BITS_MASK
parameter_list|(
name|position
parameter_list|)
value|(1<< ((position) % BITS_BLOCK_SIZE))
end_define

begin_function
specifier|static
name|unsigned
name|init_bits_list
parameter_list|(
name|bits_list_ptr
parameter_list|)
name|bits_list_type
modifier|*
name|bits_list_ptr
decl_stmt|;
block|{
name|bits_list_ptr
operator|->
name|bits
operator|=
name|NULL
expr_stmt|;
name|bits_list_ptr
operator|->
name|bits
operator|=
operator|(
name|unsigned
operator|*
operator|)
name|malloc
argument_list|(
sizeof|sizeof
argument_list|(
name|unsigned
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|bits_list_ptr
operator|->
name|bits
operator|==
name|NULL
condition|)
return|return
literal|0
return|;
name|bits_list_ptr
operator|->
name|bits
index|[
literal|0
index|]
operator|=
operator|(
name|unsigned
operator|)
literal|0
expr_stmt|;
name|bits_list_ptr
operator|->
name|size
operator|=
name|BITS_BLOCK_SIZE
expr_stmt|;
return|return
literal|1
return|;
block|}
end_function

begin_function
name|main
parameter_list|()
block|{
name|bits_list_type
name|dummy
decl_stmt|;
name|bits_list_type
name|dummy_1
decl_stmt|;
name|bits_list_type
name|dummy_2
decl_stmt|;
name|bits_list_type
name|dummy_3
decl_stmt|;
name|init_bits_list
argument_list|(
operator|&
name|dummy
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"init 1\n"
argument_list|)
expr_stmt|;
name|init_bits_list
argument_list|(
operator|&
name|dummy_1
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"init 2\n"
argument_list|)
expr_stmt|;
name|init_bits_list
argument_list|(
operator|&
name|dummy_2
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"init 3\n"
argument_list|)
expr_stmt|;
name|init_bits_list
argument_list|(
operator|&
name|dummy_3
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"init 4\n"
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

