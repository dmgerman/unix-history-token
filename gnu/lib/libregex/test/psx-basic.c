begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* psx-basic.c: Test POSIX basic regular expressions.  */
end_comment

begin_include
include|#
directive|include
file|"test.h"
end_include

begin_function
name|void
name|test_posix_basic
parameter_list|()
block|{
comment|/* Intervals can only match up to RE_DUP_MAX occurences of anything.  */
name|char
name|dup_max_plus_one
index|[
literal|6
index|]
decl_stmt|;
name|sprintf
argument_list|(
name|dup_max_plus_one
argument_list|,
literal|"%d"
argument_list|,
name|RE_DUP_MAX
operator|+
literal|1
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\nStarting POSIX basic tests.\n"
argument_list|)
expr_stmt|;
name|t
operator|=
name|posix_basic_test
expr_stmt|;
name|re_set_syntax
argument_list|(
name|RE_SYNTAX_POSIX_MINIMAL_BASIC
argument_list|)
expr_stmt|;
name|test_posix_generic
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|"\nContinuing POSIX basic tests.\n"
argument_list|)
expr_stmt|;
comment|/* Grouping tests that are not the same.  */
name|test_should_match
operator|=
name|false
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_EPAREN
argument_list|,
name|PARENS_TO_OPS
argument_list|(
literal|"a)"
argument_list|)
argument_list|)
expr_stmt|;
name|test_should_match
operator|=
name|true
expr_stmt|;
comment|/* Special characters.  */
name|MATCH_SELF
argument_list|(
literal|"*"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(*\\)"
argument_list|,
literal|"*"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(^*\\)"
argument_list|,
literal|"*"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"**"
argument_list|,
literal|"***"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"***"
argument_list|,
literal|"****"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"{"
argument_list|)
expr_stmt|;
comment|/* of extended...  */
name|MATCH_SELF
argument_list|(
literal|"()"
argument_list|)
expr_stmt|;
comment|/* also non-Posix.  */
name|MATCH_SELF
argument_list|(
literal|"a+"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"a?"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"a|b"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"a|"
argument_list|)
expr_stmt|;
comment|/* No alternations, */
name|MATCH_SELF
argument_list|(
literal|"|a"
argument_list|)
expr_stmt|;
comment|/* so OK if empty.  */
name|MATCH_SELF
argument_list|(
literal|"a||"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(|a\\)"
argument_list|,
literal|"|a"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a|\\)"
argument_list|,
literal|"a|"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"a\\+"
argument_list|,
literal|"a+"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"a\\?"
argument_list|,
literal|"a?"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"a\\|b"
argument_list|,
literal|"a|b"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"^*"
argument_list|,
literal|"*"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"^+"
argument_list|,
literal|"+"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"^?"
argument_list|,
literal|"?"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"^{"
argument_list|,
literal|"{"
argument_list|)
expr_stmt|;
comment|/* Valid subexpressions                                                  (empty) in basic only.  */
name|test_match
argument_list|(
literal|"\\(\\)"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"a\\(\\)"
argument_list|,
literal|"a"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\)b"
argument_list|,
literal|"b"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"a\\(\\)b"
argument_list|,
literal|"ab"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"a\\(\\)b"
argument_list|,
literal|"ab"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|1
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\)*"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(\\)\\)*"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
comment|/* Valid back references.  */
comment|/* N.B.: back references to subexpressions that include a * are      undefined in the spec.  The tests are in here to see if we handle      the situation consistently, but if it fails any of them, it doesn't      matter.  */
name|test_match
argument_list|(
literal|"\\(\\)\\1"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\)\\1"
argument_list|,
literal|""
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(\\)\\)\\(\\)\\2"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\1"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\1"
argument_list|,
literal|"aa"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\1"
argument_list|,
literal|"xaax"
argument_list|,
literal|1
argument_list|,
literal|3
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\)\\1"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\(b\\)\\2\\1"
argument_list|,
literal|"abba"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)*\\1"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)*\\1"
argument_list|,
literal|"aa"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)*\\1"
argument_list|,
literal|"xaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\2b\\)*"
argument_list|,
literal|"aab"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a\\)\\2b\\)*"
argument_list|,
literal|"aab"
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a\\)\\2b\\)*"
argument_list|,
literal|"xaabx"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*\\)*\\1"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*\\)*\\1"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a*\\)*\\1"
argument_list|,
literal|"aa"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a*\\)*\\1"
argument_list|,
literal|"xaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*\\)*\\1"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*\\)*\\1"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)*\\)*\\1"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(ab*\\)*\\1"
argument_list|,
literal|"abab"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(ab*\\)*\\1"
argument_list|,
literal|"abab"
argument_list|,
literal|0
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(ab*\\)*\\1"
argument_list|,
literal|"xababx"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*\\)ab\\1"
argument_list|,
literal|"aaba"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a*\\)ab\\1"
argument_list|,
literal|"aaba"
argument_list|,
literal|0
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a*\\)ab\\1"
argument_list|,
literal|"xaabax"
argument_list|,
literal|1
argument_list|,
literal|5
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*\\)*ab\\1"
argument_list|,
literal|"aaba"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a*\\)*ab\\1"
argument_list|,
literal|"aaba"
argument_list|,
literal|0
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a*\\)*ab\\1"
argument_list|,
literal|"xaabax"
argument_list|,
literal|1
argument_list|,
literal|5
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2"
argument_list|,
literal|"abb"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2"
argument_list|,
literal|"abb"
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|2
argument_list|,
literal|3
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2"
argument_list|,
literal|"xabbx"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Different from above.  */
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aa"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"xaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aba"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aba"
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"xabax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2"
argument_list|,
literal|"aababa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2"
argument_list|,
literal|"aababa"
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|,
literal|3
argument_list|,
literal|5
argument_list|,
literal|3
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2"
argument_list|,
literal|"xaababax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aabaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aabaa"
argument_list|,
literal|0
argument_list|,
literal|5
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"xaabaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aabbaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"aabbaa"
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|,
literal|0
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"xaabbaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"abaabaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"abaabaa"
argument_list|,
literal|0
argument_list|,
literal|7
argument_list|,
literal|2
argument_list|,
literal|5
argument_list|,
literal|2
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2"
argument_list|,
literal|"xaababaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*a\\2"
argument_list|,
literal|"aabaaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*a\\)*\\2"
argument_list|,
literal|"aabaaa"
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*a\\)*\\2"
argument_list|,
literal|"xaabaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2a"
argument_list|,
literal|"aabaaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2a"
argument_list|,
literal|"aabaaa"
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b*\\)*\\2a"
argument_list|,
literal|"xaabaaax"
argument_list|,
literal|1
argument_list|,
literal|7
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2\\1"
argument_list|,
literal|"abaabaaaab"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2\\1"
argument_list|,
literal|"abaabaaaab"
argument_list|,
literal|0
argument_list|,
literal|10
argument_list|,
literal|2
argument_list|,
literal|5
argument_list|,
literal|2
argument_list|,
literal|4
argument_list|)
expr_stmt|;
comment|/* We are matching the empty string here.  */
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)b\\)*\\2\\1"
argument_list|,
literal|"xabaabaaaabx"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*b\\)\\1"
argument_list|,
literal|"abab"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\1\\1"
argument_list|,
literal|"aaa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\(c\\)d\\)\\1\\2"
argument_list|,
literal|"acdacdc"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\1*"
argument_list|,
literal|"aaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\1*"
argument_list|,
literal|"aaa"
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\1*"
argument_list|,
literal|"xaaax"
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\{1,3\\}b\\1"
argument_list|,
literal|"aba"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\{1,3\\}b\\1"
argument_list|,
literal|"aba"
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\{1,3\\}b\\1"
argument_list|,
literal|"xabax"
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\2\\)*"
argument_list|,
literal|"aaaa"
argument_list|)
expr_stmt|;
comment|/* rms? */
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*b\\)\\2\\)*"
argument_list|,
literal|"bbabab"
argument_list|,
literal|0
argument_list|,
literal|6
argument_list|,
literal|2
argument_list|,
literal|6
argument_list|,
literal|2
argument_list|,
literal|4
argument_list|)
expr_stmt|;
comment|/* rms? */
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\1\\)*"
argument_list|,
literal|"a1a1"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\2\\)\\1"
argument_list|,
literal|"aaaa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)\\2\\)\\1"
argument_list|,
literal|"aaaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)\\2\\)\\1"
argument_list|,
literal|"aaaa"
argument_list|,
literal|0
argument_list|,
literal|4
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(\\(a*\\)\\2\\)\\1"
argument_list|,
literal|"xaaaax"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\{1\\}"
argument_list|,
literal|"{1}"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"^\\{1\\}"
argument_list|,
literal|"{1}"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\1\\{1,2\\}"
argument_list|,
literal|"aaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\1\\{1,2\\}"
argument_list|,
literal|"aaa"
argument_list|,
literal|0
argument_list|,
literal|3
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
literal|"\\(a\\)\\1\\{1,2\\}"
argument_list|,
literal|"xaaax"
argument_list|,
literal|1
argument_list|,
literal|4
argument_list|,
literal|1
argument_list|,
literal|2
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Per POSIX D11.1 p. 109, leftmost longest match.  */
name|test_match
argument_list|(
name|PARENS_TO_OPS
argument_list|(
literal|"(.*).*\\1"
argument_list|)
argument_list|,
literal|"abcabc"
argument_list|)
expr_stmt|;
comment|/* Per POSIX D11.1, p. 125, leftmost longest match.  */
name|test_match
argument_list|(
name|PARENS_TO_OPS
argument_list|(
literal|"(ac*)c*d[ac]*\\1"
argument_list|)
argument_list|,
literal|"acdacaaa"
argument_list|)
expr_stmt|;
name|TEST_REGISTERS
argument_list|(
name|PARENS_TO_OPS
argument_list|(
literal|"(ac*)c*d[ac]*\\1"
argument_list|)
argument_list|,
literal|"acdacaaa"
argument_list|,
literal|0
argument_list|,
literal|8
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/* Anchors become ordinary, sometimes.  */
name|MATCH_SELF
argument_list|(
literal|"a^"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"$a"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"$^"
argument_list|)
expr_stmt|;
name|test_fastmap
argument_list|(
literal|"$a^"
argument_list|,
literal|"$"
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"$^*"
argument_list|,
literal|"$^^"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\($^\\)"
argument_list|,
literal|"$^"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"$*"
argument_list|,
literal|"$$"
argument_list|)
expr_stmt|;
comment|/* xx -- known bug, solution pending test_match ("^^$", "^"); */
name|test_match
argument_list|(
literal|"$\\{0,\\}"
argument_list|,
literal|"$$"
argument_list|)
expr_stmt|;
name|TEST_SEARCH
argument_list|(
literal|"^$*"
argument_list|,
literal|"$$"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|TEST_SEARCH
argument_list|(
literal|"^$\\{0,\\}"
argument_list|,
literal|"$$"
argument_list|,
literal|0
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"2^10"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"$HOME"
argument_list|)
expr_stmt|;
name|MATCH_SELF
argument_list|(
literal|"$1.35"
argument_list|)
expr_stmt|;
comment|/* Basic regular expressions, continued; these don't match their strings.  */
name|test_should_match
operator|=
name|false
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_EESCAPE
argument_list|,
literal|"\\(a\\"
argument_list|)
expr_stmt|;
comment|/* Invalid back references.  */
name|test_match
argument_list|(
literal|"\\(a\\)\\1"
argument_list|,
literal|"ab"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\1\\1"
argument_list|,
literal|"aab"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\(b\\)\\2\\1"
argument_list|,
literal|"abab"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\(c\\)d\\)\\1\\2"
argument_list|,
literal|"acdc"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a*b\\)\\1"
argument_list|,
literal|"abaab"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(a\\)\\1*"
argument_list|,
literal|"aaaaaaaaaab"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\1\\)*"
argument_list|,
literal|"aaa"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_ESUBREG
argument_list|,
literal|"\\1"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_ESUBREG
argument_list|,
literal|"\\(a\\)\\2"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\2\\)*"
argument_list|,
literal|"abaa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\1\\)*"
argument_list|,
literal|"a"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a\\)\\2\\)\\1"
argument_list|,
literal|"abaa"
argument_list|)
expr_stmt|;
name|test_match
argument_list|(
literal|"\\(\\(a*\\)\\2\\)\\1"
argument_list|,
literal|"abaa"
argument_list|)
expr_stmt|;
comment|/* Invalid intervals.  */
name|invalid_pattern
argument_list|(
name|REG_EBRACE
argument_list|,
literal|"a\\{"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_BADBR
argument_list|,
literal|"a\\{-1"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_BADBR
argument_list|,
name|concat
argument_list|(
literal|"a\\{"
argument_list|,
operator|(
name|char
operator|*
operator|)
name|dup_max_plus_one
argument_list|)
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_BADBR
argument_list|,
name|concat
argument_list|(
name|concat
argument_list|(
literal|"a\\{"
argument_list|,
operator|(
name|char
operator|*
operator|)
name|dup_max_plus_one
argument_list|)
argument_list|,
literal|","
argument_list|)
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_BADBR
argument_list|,
literal|"a\\{1,0"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_EBRACE
argument_list|,
literal|"a\\{1"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_EBRACE
argument_list|,
literal|"a\\{0,"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_EBRACE
argument_list|,
literal|"a\\{0,1"
argument_list|)
expr_stmt|;
name|invalid_pattern
argument_list|(
name|REG_EBRACE
argument_list|,
literal|"a\\{0,1}"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\nFinished POSIX basic tests.\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_escape
end_escape

begin_comment
comment|/* Local variables: make-backup-files: t version-control: t trim-versions-without-asking: nil End: */
end_comment

end_unit

