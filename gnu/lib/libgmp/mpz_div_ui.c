begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* mpz_div_ui(quot, dividend, divisor_limb)    -- Divide DIVIDEND by DIVISOR_LIMB and store the result in QUOT.  Copyright (C) 1991, 1992 Free Software Foundation, Inc.  This file is part of the GNU MP Library.  The GNU MP Library is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2, or (at your option) any later version.  The GNU MP Library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with the GNU MP Library; see the file COPYING.  If not, write to the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */
end_comment

begin_include
include|#
directive|include
file|"gmp.h"
end_include

begin_include
include|#
directive|include
file|"gmp-impl.h"
end_include

begin_include
include|#
directive|include
file|"longlong.h"
end_include

begin_function
name|void
ifdef|#
directive|ifdef
name|__STDC__
name|mpz_div_ui
parameter_list|(
name|MP_INT
modifier|*
name|quot
parameter_list|,
specifier|const
name|MP_INT
modifier|*
name|dividend
parameter_list|,
name|unsigned
name|long
name|int
name|divisor_limb
parameter_list|)
else|#
directive|else
function|mpz_div_ui
parameter_list|(
name|quot
parameter_list|,
name|dividend
parameter_list|,
name|divisor_limb
parameter_list|)
name|MP_INT
modifier|*
name|quot
decl_stmt|;
specifier|const
name|MP_INT
modifier|*
name|dividend
decl_stmt|;
name|unsigned
name|long
name|int
name|divisor_limb
decl_stmt|;
endif|#
directive|endif
block|{
name|mp_size
name|sign_dividend
decl_stmt|;
name|mp_size
name|dividend_size
decl_stmt|,
name|quot_size
decl_stmt|;
name|mp_ptr
name|dividend_ptr
decl_stmt|,
name|quot_ptr
decl_stmt|;
name|sign_dividend
operator|=
name|dividend
operator|->
name|size
expr_stmt|;
name|dividend_size
operator|=
name|ABS
argument_list|(
name|dividend
operator|->
name|size
argument_list|)
expr_stmt|;
if|if
condition|(
name|dividend_size
operator|==
literal|0
condition|)
block|{
name|quot
operator|->
name|size
operator|=
literal|0
expr_stmt|;
return|return;
block|}
comment|/* No need for temporary allocation and copying if QUOT == DIVIDEND as      the divisor is just one limb, and thus no intermediate remainders      need to be stored.  */
if|if
condition|(
name|quot
operator|->
name|alloc
operator|<
name|dividend_size
condition|)
name|_mpz_realloc
argument_list|(
name|quot
argument_list|,
name|dividend_size
argument_list|)
expr_stmt|;
name|quot_ptr
operator|=
name|quot
operator|->
name|d
expr_stmt|;
name|dividend_ptr
operator|=
name|dividend
operator|->
name|d
expr_stmt|;
name|mpn_divmod_1
argument_list|(
name|quot_ptr
argument_list|,
name|dividend_ptr
argument_list|,
name|dividend_size
argument_list|,
name|divisor_limb
argument_list|)
expr_stmt|;
comment|/* The quotient is DIVIDEND_SIZE limbs, but the most significant      might be zero.  Set QUOT_SIZE properly. */
name|quot_size
operator|=
name|dividend_size
operator|-
operator|(
name|quot_ptr
index|[
name|dividend_size
operator|-
literal|1
index|]
operator|==
literal|0
operator|)
expr_stmt|;
name|quot
operator|->
name|size
operator|=
name|sign_dividend
operator|>=
literal|0
condition|?
name|quot_size
else|:
operator|-
name|quot_size
expr_stmt|;
block|}
end_function

end_unit

