begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * tree.c  *  * small test-driver for new dialog functionality  *  * Copyright (c) 1998, Anatoly A. Orehovsky  *  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<dialog.h>
end_include

begin_decl_stmt
name|unsigned
name|char
modifier|*
name|names
index|[]
init|=
block|{
literal|"/"
block|,
literal|"/dev"
block|,
literal|"/dev/fd"
block|,
literal|"/tmp"
block|,
literal|"/usr"
block|,
literal|"/var"
block|,
literal|"/home"
block|,
literal|"/stand"
block|,
literal|"/stand/etc"
block|,
literal|"/stand/en_US.ISO8859-1"
block|,
literal|"/stand/info"
block|,
literal|"/stand/info/bin"
block|,
literal|"/stand/info/des"
block|,
literal|"/stand/info/games"
block|,
literal|"/stand/info/manpages"
block|,
literal|"/stand/info/proflibs"
block|,
literal|"/stand/info/dict"
block|,
literal|"/stand/info/info"
block|,
literal|"/stand/info/src"
block|,
literal|"/etc"
block|,
literal|"/etc/gnats"
block|,
literal|"/etc/kerberosIV"
block|,
literal|"/etc/mtree"
block|,
literal|"/etc/namedb"
block|,
literal|"/etc/ppp"
block|,
literal|"/etc/uucp"
block|,
literal|"/etc/sliphome"
block|,
literal|"/proc"
block|,
literal|"/lkm"
block|,
literal|"/mnt"
block|,
literal|"/root"
block|,
literal|"/sbin"
block|,
literal|"/bin"
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|char
modifier|*
name|names1
index|[]
init|=
block|{
literal|"a"
block|,
literal|"a:b"
block|,
literal|"a:b:c"
block|,
literal|"a:d"
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|int
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|unsigned
name|char
modifier|*
name|argv
index|[]
parameter_list|)
block|{
name|int
name|retval
decl_stmt|;
name|unsigned
name|char
modifier|*
name|tresult
decl_stmt|;
name|char
name|comstr
index|[
name|BUFSIZ
index|]
decl_stmt|;
name|init_dialog
argument_list|()
expr_stmt|;
do|do
block|{
name|use_helpline
argument_list|(
literal|"Press OK for listing directory"
argument_list|)
expr_stmt|;
name|retval
operator|=
name|dialog_tree
argument_list|(
name|names
argument_list|,
sizeof|sizeof
argument_list|(
name|names
argument_list|)
operator|/
expr|sizeof
operator|(
name|unsigned
name|char
operator|*
operator|)
operator|-
literal|1
argument_list|,
literal|'/'
argument_list|,
literal|"tree dialog box example"
argument_list|,
literal|"Typical find -x / -type d output"
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
literal|15
argument_list|,
operator|&
name|tresult
argument_list|)
expr_stmt|;
if|if
condition|(
name|retval
condition|)
break|break;
name|use_helpline
argument_list|(
name|NULL
argument_list|)
expr_stmt|;
operator|(
name|void
operator|)
name|snprintf
argument_list|(
name|comstr
argument_list|,
sizeof|sizeof
argument_list|(
name|comstr
argument_list|)
argument_list|,
literal|"ls -CF %s"
argument_list|,
name|tresult
argument_list|)
expr_stmt|;
name|retval
operator|=
name|dialog_prgbox
argument_list|(
name|comstr
argument_list|,
name|comstr
argument_list|,
literal|20
argument_list|,
literal|60
argument_list|,
name|TRUE
argument_list|,
name|TRUE
argument_list|)
expr_stmt|;
name|dialog_clear
argument_list|()
expr_stmt|;
name|retval
operator|=
name|dialog_tree
argument_list|(
name|names1
argument_list|,
sizeof|sizeof
argument_list|(
name|names1
argument_list|)
operator|/
expr|sizeof
operator|(
name|unsigned
name|char
operator|*
operator|)
argument_list|,
literal|':'
argument_list|,
literal|"tree dialog box example"
argument_list|,
literal|"Other tree"
argument_list|,
operator|-
literal|1
argument_list|,
operator|-
literal|1
argument_list|,
literal|5
argument_list|,
operator|&
name|tresult
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|retval
condition|)
block|{
name|dialog_clear
argument_list|()
expr_stmt|;
block|}
block|}
do|while
condition|(
operator|!
name|retval
condition|)
do|;
name|dialog_update
argument_list|()
expr_stmt|;
name|dialog_clear
argument_list|()
expr_stmt|;
name|end_dialog
argument_list|()
expr_stmt|;
name|exit
argument_list|(
name|retval
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

