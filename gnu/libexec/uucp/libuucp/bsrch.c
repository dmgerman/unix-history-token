begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* Copyright (C) 1991 Free Software Foundation, Inc. This file is part of the GNU C Library.  The GNU C Library is free software; you can redistribute it and/or modify it under the terms of the GNU Library General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.  The GNU C Library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Library General Public License for more details.  You should have received a copy of the GNU Library General Public License along with the GNU C Library; see the file COPYING.LIB.  If not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  This file was modified slightly by Ian Lance Taylor, May 1992, for Taylor UUCP.  */
end_comment

begin_include
include|#
directive|include
file|"uucp.h"
end_include

begin_comment
comment|/* Perform a binary search for KEY in BASE which has NMEMB elements    of SIZE bytes each.  The comparisons are done by (*COMPAR)().  */
end_comment

begin_decl_stmt
name|pointer
name|bsearch
argument_list|(
name|key
argument_list|,
name|base
argument_list|,
name|nmemb
argument_list|,
name|size
argument_list|,
name|compar
argument_list|)
decl|register
name|constpointer
name|key
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|constpointer
name|base
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|size_t
name|nmemb
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|register
name|size_t
name|size
decl_stmt|;
end_decl_stmt

begin_expr_stmt
specifier|register
name|int
argument_list|(
argument|*compar
argument_list|)
name|P
argument_list|(
operator|(
name|constpointer
operator|,
name|constpointer
operator|)
argument_list|)
expr_stmt|;
end_expr_stmt

begin_block
block|{
specifier|register
name|size_t
name|l
decl_stmt|,
name|u
decl_stmt|,
name|idx
decl_stmt|;
specifier|register
name|constpointer
name|p
decl_stmt|;
specifier|register
name|int
name|comparison
decl_stmt|;
name|l
operator|=
literal|0
expr_stmt|;
name|u
operator|=
name|nmemb
expr_stmt|;
while|while
condition|(
name|l
operator|<
name|u
condition|)
block|{
name|idx
operator|=
operator|(
name|l
operator|+
name|u
operator|)
operator|/
literal|2
expr_stmt|;
name|p
operator|=
call|(
name|constpointer
call|)
argument_list|(
operator|(
operator|(
specifier|const
name|char
operator|*
operator|)
name|base
operator|)
operator|+
operator|(
name|idx
operator|*
name|size
operator|)
argument_list|)
expr_stmt|;
name|comparison
operator|=
call|(
modifier|*
name|compar
call|)
argument_list|(
name|key
argument_list|,
name|p
argument_list|)
expr_stmt|;
if|if
condition|(
name|comparison
operator|<
literal|0
condition|)
name|u
operator|=
name|idx
expr_stmt|;
elseif|else
if|if
condition|(
name|comparison
operator|>
literal|0
condition|)
name|l
operator|=
name|idx
operator|+
literal|1
expr_stmt|;
else|else
return|return
operator|(
name|pointer
operator|)
name|p
return|;
block|}
return|return
name|NULL
return|;
block|}
end_block

end_unit

