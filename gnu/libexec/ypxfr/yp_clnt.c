begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|<rpc/rpc.h>
end_include

begin_include
include|#
directive|include
file|"yp.h"
end_include

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_comment
comment|/*static char sccsid[] = "from: @(#)yp.x	2.1 88/08/01 4.0 RPCSRC";*/
end_comment

begin_decl_stmt
specifier|static
name|char
name|rcsid
index|[]
init|=
literal|"yp.x,v 1.1 1994/08/04 19:01:55 wollman Exp"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not lint */
end_comment

begin_comment
comment|/* Default timeout can be changed using clnt_control() */
end_comment

begin_decl_stmt
specifier|static
name|struct
name|timeval
name|TIMEOUT
init|=
block|{
literal|25
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|void
modifier|*
name|ypproc_null_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|void
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|char
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_NULL
argument_list|,
name|xdr_void
argument_list|,
name|argp
argument_list|,
name|xdr_void
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|(
name|void
operator|*
operator|)
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|bool_t
modifier|*
name|ypproc_domain_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|domainname
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|bool_t
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_DOMAIN
argument_list|,
name|xdr_domainname
argument_list|,
name|argp
argument_list|,
name|xdr_bool
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|bool_t
modifier|*
name|ypproc_domain_nonack_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|domainname
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|bool_t
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_DOMAIN_NONACK
argument_list|,
name|xdr_domainname
argument_list|,
name|argp
argument_list|,
name|xdr_bool
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_val
modifier|*
name|ypproc_match_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_key
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_val
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_MATCH
argument_list|,
name|xdr_ypreq_key
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_val
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_key_val
modifier|*
name|ypproc_first_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_key
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_key_val
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_FIRST
argument_list|,
name|xdr_ypreq_key
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_key_val
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_key_val
modifier|*
name|ypproc_next_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_key
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_key_val
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_NEXT
argument_list|,
name|xdr_ypreq_key
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_key_val
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_xfr
modifier|*
name|ypproc_xfr_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_xfr
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_xfr
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_XFR
argument_list|,
name|xdr_ypreq_xfr
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_xfr
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|void
modifier|*
name|ypproc_clear_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|void
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|char
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_CLEAR
argument_list|,
name|xdr_void
argument_list|,
name|argp
argument_list|,
name|xdr_void
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|(
name|void
operator|*
operator|)
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_all
modifier|*
name|ypproc_all_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_nokey
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_all
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_ALL
argument_list|,
name|xdr_ypreq_nokey
argument_list|,
name|argp
argument_list|,
name|__xdr_ypresp_all
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_master
modifier|*
name|ypproc_master_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_nokey
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_master
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_MASTER
argument_list|,
name|xdr_ypreq_nokey
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_master
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_order
modifier|*
name|ypproc_order_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypreq_nokey
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_order
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_ORDER
argument_list|,
name|xdr_ypreq_nokey
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_order
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypresp_maplist
modifier|*
name|ypproc_maplist_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|domainname
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypresp_maplist
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPROC_MAPLIST
argument_list|,
name|xdr_domainname
argument_list|,
name|argp
argument_list|,
name|xdr_ypresp_maplist
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|void
modifier|*
name|yppushproc_null_1
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|void
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|char
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPUSHPROC_NULL
argument_list|,
name|xdr_void
argument_list|,
name|argp
argument_list|,
name|xdr_void
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|(
name|void
operator|*
operator|)
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|yppushresp_xfr
modifier|*
name|yppushproc_xfrresp_1
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|void
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|yppushresp_xfr
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPPUSHPROC_XFRRESP
argument_list|,
name|xdr_void
argument_list|,
name|argp
argument_list|,
name|xdr_yppushresp_xfr
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|void
modifier|*
name|ypbindproc_null_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|void
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|char
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPBINDPROC_NULL
argument_list|,
name|xdr_void
argument_list|,
name|argp
argument_list|,
name|xdr_void
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|(
name|void
operator|*
operator|)
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|ypbind_resp
modifier|*
name|ypbindproc_domain_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|domainname
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|ypbind_resp
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPBINDPROC_DOMAIN
argument_list|,
name|xdr_domainname
argument_list|,
name|argp
argument_list|,
name|xdr_ypbind_resp
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|&
name|res
operator|)
return|;
block|}
end_function

begin_function
name|void
modifier|*
name|ypbindproc_setdom_2
parameter_list|(
name|argp
parameter_list|,
name|clnt
parameter_list|)
name|ypbind_setdom
modifier|*
name|argp
decl_stmt|;
name|CLIENT
modifier|*
name|clnt
decl_stmt|;
block|{
specifier|static
name|char
name|res
decl_stmt|;
name|bzero
argument_list|(
operator|(
name|char
operator|*
operator|)
operator|&
name|res
argument_list|,
sizeof|sizeof
argument_list|(
name|res
argument_list|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|clnt_call
argument_list|(
name|clnt
argument_list|,
name|YPBINDPROC_SETDOM
argument_list|,
name|xdr_ypbind_setdom
argument_list|,
name|argp
argument_list|,
name|xdr_void
argument_list|,
operator|&
name|res
argument_list|,
name|TIMEOUT
argument_list|)
operator|!=
name|RPC_SUCCESS
condition|)
block|{
return|return
operator|(
name|NULL
operator|)
return|;
block|}
return|return
operator|(
operator|(
name|void
operator|*
operator|)
operator|&
name|res
operator|)
return|;
block|}
end_function

end_unit

