begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 1991, 1993  *	The Regents of the University of California.  All rights reserved.  *  * The game adventure was originally written in Fortran by Will Crowther  * and Don Woods.  It was later translated to C and enhanced by Jim  * Gillogly.  This code is derived from software contributed to Berkeley  * by Jim Gillogly at The Rand Corporation.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  * 3. All advertising materials mentioning features or use of this software  *    must display the following acknowledgement:  *	This product includes software developed by the University of  *	California, Berkeley and its contributors.  * 4. Neither the name of the University nor the names of its contributors  *    may be used to endorse or promote products derived from this software  *    without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|copyright
index|[]
init|=
literal|"@(#) Copyright (c) 1991, 1993\n\ 	The Regents of the University of California.  All rights reserved.\n"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not lint */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|sccsid
index|[]
init|=
literal|"@(#)main.c	8.1 (Berkeley) 6/2/93"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not lint */
end_comment

begin_comment
comment|/*      Re-coding of advent in C: main program                          */
end_comment

begin_include
include|#
directive|include
file|<sys/file.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"hdr.h"
end_include

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
specifier|extern
name|int
name|errno
decl_stmt|;
specifier|register
name|int
name|i
decl_stmt|;
name|int
name|rval
decl_stmt|,
name|ll
decl_stmt|;
name|struct
name|text
modifier|*
name|kk
decl_stmt|;
extern|extern trapdel(
block|)
function|;
end_function

begin_comment
comment|/* revoke */
end_comment

begin_expr_stmt
name|setgid
argument_list|(
name|getgid
argument_list|()
argument_list|)
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|init
argument_list|()
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* Initialize everything */
end_comment

begin_expr_stmt
name|signal
argument_list|(
literal|2
argument_list|,
name|trapdel
argument_list|)
expr_stmt|;
end_expr_stmt

begin_if
if|if
condition|(
name|argc
operator|>
literal|1
condition|)
comment|/* Restore file specified */
block|{
comment|/* Restart is label 8305 (Fortran) */
name|i
operator|=
name|restore
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
comment|/* See what we've got */
switch|switch
condition|(
name|i
condition|)
block|{
case|case
literal|0
case|:
comment|/* The restore worked fine */
name|yea
operator|=
name|Start
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|k
operator|=
name|null
expr_stmt|;
name|unlink
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
comment|/* Don't re-use the save */
goto|goto
name|l8
goto|;
comment|/* Get where we're going */
case|case
literal|1
case|:
comment|/* Couldn't open it */
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
comment|/* So give up */
case|case
literal|2
case|:
comment|/* Oops -- file was altered */
name|rspeak
argument_list|(
literal|202
argument_list|)
expr_stmt|;
comment|/* You dissolve */
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
comment|/* File could be non-adventure */
block|}
comment|/* So don't unlink it. */
block|}
end_if

begin_expr_stmt
name|startup
argument_list|()
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* prepare for a user           */
end_comment

begin_for
for|for
control|(
init|;
condition|;
control|)
comment|/* main command loop (label 2)  */
block|{
if|if
condition|(
name|newloc
operator|<
literal|9
operator|&&
name|newloc
operator|!=
literal|0
operator|&&
name|closng
condition|)
block|{
name|rspeak
argument_list|(
literal|130
argument_list|)
expr_stmt|;
comment|/* if closing leave only by     */
name|newloc
operator|=
name|loc
expr_stmt|;
comment|/*      main office             */
if|if
condition|(
operator|!
name|panic
condition|)
name|clock2
operator|=
literal|15
expr_stmt|;
name|panic
operator|=
name|TRUE
expr_stmt|;
block|}
name|rval
operator|=
name|fdwarf
argument_list|()
expr_stmt|;
comment|/* dwarf stuff                  */
if|if
condition|(
name|rval
operator|==
literal|99
condition|)
name|die
argument_list|(
literal|99
argument_list|)
expr_stmt|;
name|l2000
label|:
if|if
condition|(
name|loc
operator|==
literal|0
condition|)
name|die
argument_list|(
literal|99
argument_list|)
expr_stmt|;
comment|/* label 2000                   */
name|kk
operator|=
operator|&
name|stext
index|[
name|loc
index|]
expr_stmt|;
if|if
condition|(
operator|(
name|abb
index|[
name|loc
index|]
operator|%
name|abbnum
operator|)
operator|==
literal|0
operator|||
name|kk
operator|->
name|seekadr
operator|==
literal|0
condition|)
name|kk
operator|=
operator|&
name|ltext
index|[
name|loc
index|]
expr_stmt|;
if|if
condition|(
operator|!
name|forced
argument_list|(
name|loc
argument_list|)
operator|&&
name|dark
argument_list|(
literal|0
argument_list|)
condition|)
block|{
if|if
condition|(
name|wzdark
operator|&&
name|pct
argument_list|(
literal|35
argument_list|)
condition|)
block|{
name|die
argument_list|(
literal|90
argument_list|)
expr_stmt|;
goto|goto
name|l2000
goto|;
block|}
name|kk
operator|=
operator|&
name|rtext
index|[
literal|16
index|]
expr_stmt|;
block|}
name|l2001
label|:
if|if
condition|(
name|toting
argument_list|(
name|bear
argument_list|)
condition|)
name|rspeak
argument_list|(
literal|141
argument_list|)
expr_stmt|;
comment|/* 2001                 */
name|speak
argument_list|(
name|kk
argument_list|)
expr_stmt|;
name|k
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|forced
argument_list|(
name|loc
argument_list|)
condition|)
goto|goto
name|l8
goto|;
if|if
condition|(
name|loc
operator|==
literal|33
operator|&&
name|pct
argument_list|(
literal|25
argument_list|)
operator|&&
operator|!
name|closng
condition|)
name|rspeak
argument_list|(
literal|8
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|dark
argument_list|(
literal|0
argument_list|)
condition|)
block|{
name|abb
index|[
name|loc
index|]
operator|++
expr_stmt|;
for|for
control|(
name|i
operator|=
name|atloc
index|[
name|loc
index|]
init|;
name|i
operator|!=
literal|0
condition|;
name|i
operator|=
name|linkx
index|[
name|i
index|]
control|)
comment|/*2004  */
block|{
name|obj
operator|=
name|i
expr_stmt|;
if|if
condition|(
name|obj
operator|>
literal|100
condition|)
name|obj
operator|-=
literal|100
expr_stmt|;
if|if
condition|(
name|obj
operator|==
name|steps
operator|&&
name|toting
argument_list|(
name|nugget
argument_list|)
condition|)
continue|continue;
if|if
condition|(
name|prop
index|[
name|obj
index|]
operator|<
literal|0
condition|)
block|{
if|if
condition|(
name|closed
condition|)
continue|continue;
name|prop
index|[
name|obj
index|]
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|obj
operator|==
name|rug
operator|||
name|obj
operator|==
name|chain
condition|)
name|prop
index|[
name|obj
index|]
operator|=
literal|1
expr_stmt|;
name|tally
operator|--
expr_stmt|;
if|if
condition|(
name|tally
operator|==
name|tally2
operator|&&
name|tally
operator|!=
literal|0
condition|)
if|if
condition|(
name|limit
operator|>
literal|35
condition|)
name|limit
operator|=
literal|35
expr_stmt|;
block|}
name|ll
operator|=
name|prop
index|[
name|obj
index|]
expr_stmt|;
comment|/* 2006         */
if|if
condition|(
name|obj
operator|==
name|steps
operator|&&
name|loc
operator|==
name|fixed
index|[
name|steps
index|]
condition|)
name|ll
operator|=
literal|1
expr_stmt|;
name|pspeak
argument_list|(
name|obj
argument_list|,
name|ll
argument_list|)
expr_stmt|;
block|}
comment|/* 2008 */
goto|goto
name|l2012
goto|;
name|l2009
label|:
name|k
operator|=
literal|54
expr_stmt|;
comment|/* 2009                 */
name|l2010
label|:
name|spk
operator|=
name|k
expr_stmt|;
name|l2011
label|:
name|rspeak
argument_list|(
name|spk
argument_list|)
expr_stmt|;
block|}
name|l2012
label|:
name|verb
operator|=
literal|0
expr_stmt|;
comment|/* 2012                 */
name|obj
operator|=
literal|0
expr_stmt|;
name|l2600
label|:
name|checkhints
argument_list|()
expr_stmt|;
comment|/* to 2600-2602         */
if|if
condition|(
name|closed
condition|)
block|{
if|if
condition|(
name|prop
index|[
name|oyster
index|]
operator|<
literal|0
operator|&&
name|toting
argument_list|(
name|oyster
argument_list|)
condition|)
name|pspeak
argument_list|(
name|oyster
argument_list|,
literal|1
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
literal|100
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|toting
argument_list|(
name|i
argument_list|)
operator|&&
name|prop
index|[
name|i
index|]
operator|<
literal|0
condition|)
comment|/*2604  */
name|prop
index|[
name|i
index|]
operator|=
operator|-
literal|1
operator|-
name|prop
index|[
name|i
index|]
expr_stmt|;
block|}
name|wzdark
operator|=
name|dark
argument_list|(
literal|0
argument_list|)
expr_stmt|;
comment|/* 2605                 */
if|if
condition|(
name|knfloc
operator|>
literal|0
operator|&&
name|knfloc
operator|!=
name|loc
condition|)
name|knfloc
operator|=
literal|1
expr_stmt|;
name|getin
argument_list|(
operator|&
name|wd1
argument_list|,
operator|&
name|wd2
argument_list|)
expr_stmt|;
if|if
condition|(
name|delhit
condition|)
comment|/* user typed a DEL     */
block|{
name|delhit
operator|=
literal|0
expr_stmt|;
comment|/* reset counter        */
name|copystr
argument_list|(
literal|"quit"
argument_list|,
name|wd1
argument_list|)
expr_stmt|;
comment|/* pretend he's quitting*/
operator|*
name|wd2
operator|=
literal|0
expr_stmt|;
block|}
name|l2608
label|:
if|if
condition|(
operator|(
name|foobar
operator|=
operator|-
name|foobar
operator|)
operator|>
literal|0
condition|)
name|foobar
operator|=
literal|0
expr_stmt|;
comment|/* 2608         */
comment|/* should check here for "magic mode"                   */
name|turns
operator|++
expr_stmt|;
if|if
condition|(
name|demo
operator|&&
name|turns
operator|>=
name|SHORT
condition|)
name|done
argument_list|(
literal|1
argument_list|)
expr_stmt|;
comment|/* to 13000     */
if|if
condition|(
name|verb
operator|==
name|say
operator|&&
operator|*
name|wd2
operator|!=
literal|0
condition|)
name|verb
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|verb
operator|==
name|say
condition|)
goto|goto
name|l4090
goto|;
if|if
condition|(
name|tally
operator|==
literal|0
operator|&&
name|loc
operator|>=
literal|15
operator|&&
name|loc
operator|!=
literal|33
condition|)
name|clock1
operator|--
expr_stmt|;
if|if
condition|(
name|clock1
operator|==
literal|0
condition|)
block|{
name|closing
argument_list|()
expr_stmt|;
comment|/* to 10000     */
goto|goto
name|l19999
goto|;
block|}
if|if
condition|(
name|clock1
operator|<
literal|0
condition|)
name|clock2
operator|--
expr_stmt|;
if|if
condition|(
name|clock2
operator|==
literal|0
condition|)
block|{
name|caveclose
argument_list|()
expr_stmt|;
comment|/* to 11000             */
continue|continue;
comment|/* back to 2            */
block|}
if|if
condition|(
name|prop
index|[
name|lamp
index|]
operator|==
literal|1
condition|)
name|limit
operator|--
expr_stmt|;
if|if
condition|(
name|limit
operator|<=
literal|30
operator|&&
name|here
argument_list|(
name|batter
argument_list|)
operator|&&
name|prop
index|[
name|batter
index|]
operator|==
literal|0
operator|&&
name|here
argument_list|(
name|lamp
argument_list|)
condition|)
block|{
name|rspeak
argument_list|(
literal|188
argument_list|)
expr_stmt|;
comment|/* 12000                */
name|prop
index|[
name|batter
index|]
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|toting
argument_list|(
name|batter
argument_list|)
condition|)
name|drop
argument_list|(
name|batter
argument_list|,
name|loc
argument_list|)
expr_stmt|;
name|limit
operator|=
name|limit
operator|+
literal|2500
expr_stmt|;
name|lmwarn
operator|=
name|FALSE
expr_stmt|;
goto|goto
name|l19999
goto|;
block|}
if|if
condition|(
name|limit
operator|==
literal|0
condition|)
block|{
name|limit
operator|=
operator|-
literal|1
expr_stmt|;
comment|/* 12400                */
name|prop
index|[
name|lamp
index|]
operator|=
literal|0
expr_stmt|;
name|rspeak
argument_list|(
literal|184
argument_list|)
expr_stmt|;
goto|goto
name|l19999
goto|;
block|}
if|if
condition|(
name|limit
operator|<
literal|0
operator|&&
name|loc
operator|<=
literal|8
condition|)
block|{
name|rspeak
argument_list|(
literal|185
argument_list|)
expr_stmt|;
comment|/* 12600                */
name|gaveup
operator|=
name|TRUE
expr_stmt|;
name|done
argument_list|(
literal|2
argument_list|)
expr_stmt|;
comment|/* to 20000             */
block|}
if|if
condition|(
name|limit
operator|<=
literal|30
condition|)
block|{
if|if
condition|(
name|lmwarn
operator|||
operator|!
name|here
argument_list|(
name|lamp
argument_list|)
condition|)
goto|goto
name|l19999
goto|;
comment|/*12200*/
name|lmwarn
operator|=
name|TRUE
expr_stmt|;
name|spk
operator|=
literal|187
expr_stmt|;
if|if
condition|(
name|place
index|[
name|batter
index|]
operator|==
literal|0
condition|)
name|spk
operator|=
literal|183
expr_stmt|;
if|if
condition|(
name|prop
index|[
name|batter
index|]
operator|==
literal|1
condition|)
name|spk
operator|=
literal|189
expr_stmt|;
name|rspeak
argument_list|(
name|spk
argument_list|)
expr_stmt|;
block|}
name|l19999
label|:
name|k
operator|=
literal|43
expr_stmt|;
if|if
condition|(
name|liqloc
argument_list|(
name|loc
argument_list|)
operator|==
name|water
condition|)
name|k
operator|=
literal|70
expr_stmt|;
if|if
condition|(
name|weq
argument_list|(
name|wd1
argument_list|,
literal|"enter"
argument_list|)
operator|&&
operator|(
name|weq
argument_list|(
name|wd2
argument_list|,
literal|"strea"
argument_list|)
operator|||
name|weq
argument_list|(
name|wd2
argument_list|,
literal|"water"
argument_list|)
operator|)
condition|)
goto|goto
name|l2010
goto|;
if|if
condition|(
name|weq
argument_list|(
name|wd1
argument_list|,
literal|"enter"
argument_list|)
operator|&&
operator|*
name|wd2
operator|!=
literal|0
condition|)
goto|goto
name|l2800
goto|;
if|if
condition|(
operator|(
operator|!
name|weq
argument_list|(
name|wd1
argument_list|,
literal|"water"
argument_list|)
operator|&&
operator|!
name|weq
argument_list|(
name|wd1
argument_list|,
literal|"oil"
argument_list|)
operator|)
operator|||
operator|(
operator|!
name|weq
argument_list|(
name|wd2
argument_list|,
literal|"plant"
argument_list|)
operator|&&
operator|!
name|weq
argument_list|(
name|wd2
argument_list|,
literal|"door"
argument_list|)
operator|)
condition|)
goto|goto
name|l2610
goto|;
if|if
condition|(
name|at
argument_list|(
name|vocab
argument_list|(
name|wd2
argument_list|,
literal|1
argument_list|)
argument_list|)
condition|)
name|copystr
argument_list|(
literal|"pour"
argument_list|,
name|wd2
argument_list|)
expr_stmt|;
name|l2610
label|:
if|if
condition|(
name|weq
argument_list|(
name|wd1
argument_list|,
literal|"west"
argument_list|)
condition|)
if|if
condition|(
operator|++
name|iwest
operator|==
literal|10
condition|)
name|rspeak
argument_list|(
literal|17
argument_list|)
expr_stmt|;
name|l2630
label|:
name|i
operator|=
name|vocab
argument_list|(
name|wd1
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|i
operator|==
operator|-
literal|1
condition|)
block|{
name|spk
operator|=
literal|60
expr_stmt|;
comment|/* 3000         */
if|if
condition|(
name|pct
argument_list|(
literal|20
argument_list|)
condition|)
name|spk
operator|=
literal|61
expr_stmt|;
if|if
condition|(
name|pct
argument_list|(
literal|20
argument_list|)
condition|)
name|spk
operator|=
literal|13
expr_stmt|;
name|rspeak
argument_list|(
name|spk
argument_list|)
expr_stmt|;
goto|goto
name|l2600
goto|;
block|}
name|k
operator|=
name|i
operator|%
literal|1000
expr_stmt|;
name|kq
operator|=
name|i
operator|/
literal|1000
operator|+
literal|1
expr_stmt|;
switch|switch
condition|(
name|kq
condition|)
block|{
case|case
literal|1
case|:
goto|goto
name|l8
goto|;
case|case
literal|2
case|:
goto|goto
name|l5000
goto|;
case|case
literal|3
case|:
goto|goto
name|l4000
goto|;
case|case
literal|4
case|:
goto|goto
name|l2010
goto|;
default|default:
name|printf
argument_list|(
literal|"Error 22\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
name|l8
label|:
switch|switch
condition|(
name|march
argument_list|()
condition|)
block|{
case|case
literal|2
case|:
continue|continue;
comment|/* i.e. goto l2         */
case|case
literal|99
case|:
switch|switch
condition|(
name|die
argument_list|(
literal|99
argument_list|)
condition|)
block|{
case|case
literal|2000
case|:
goto|goto
name|l2000
goto|;
default|default:
name|bug
argument_list|(
literal|111
argument_list|)
expr_stmt|;
block|}
default|default:
name|bug
argument_list|(
literal|110
argument_list|)
expr_stmt|;
block|}
name|l2800
label|:
name|copystr
argument_list|(
name|wd2
argument_list|,
name|wd1
argument_list|)
expr_stmt|;
operator|*
name|wd2
operator|=
literal|0
expr_stmt|;
goto|goto
name|l2610
goto|;
name|l4000
label|:
name|verb
operator|=
name|k
expr_stmt|;
name|spk
operator|=
name|actspk
index|[
name|verb
index|]
expr_stmt|;
if|if
condition|(
operator|*
name|wd2
operator|!=
literal|0
operator|&&
name|verb
operator|!=
name|say
condition|)
goto|goto
name|l2800
goto|;
if|if
condition|(
name|verb
operator|==
name|say
condition|)
name|obj
operator|=
operator|*
name|wd2
expr_stmt|;
if|if
condition|(
name|obj
operator|!=
literal|0
condition|)
goto|goto
name|l4090
goto|;
name|l4080
label|:
switch|switch
condition|(
name|verb
condition|)
block|{
case|case
literal|1
case|:
comment|/* take = 8010          */
if|if
condition|(
name|atloc
index|[
name|loc
index|]
operator|==
literal|0
operator|||
name|linkx
index|[
name|atloc
index|[
name|loc
index|]
index|]
operator|!=
literal|0
condition|)
goto|goto
name|l8000
goto|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
literal|5
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|dloc
index|[
name|i
index|]
operator|==
name|loc
operator|&&
name|dflag
operator|>=
literal|2
condition|)
goto|goto
name|l8000
goto|;
name|obj
operator|=
name|atloc
index|[
name|loc
index|]
expr_stmt|;
goto|goto
name|l9010
goto|;
case|case
literal|2
case|:
case|case
literal|3
case|:
case|case
literal|9
case|:
comment|/* 8000 : drop,say,wave */
case|case
literal|10
case|:
case|case
literal|16
case|:
case|case
literal|17
case|:
comment|/* calm,rub,toss        */
case|case
literal|19
case|:
case|case
literal|21
case|:
case|case
literal|28
case|:
comment|/* find,feed,break      */
case|case
literal|29
case|:
comment|/* wake                 */
name|l8000
label|:
name|printf
argument_list|(
literal|"%s what?\n"
argument_list|,
name|wd1
argument_list|)
expr_stmt|;
name|obj
operator|=
literal|0
expr_stmt|;
goto|goto
name|l2600
goto|;
case|case
literal|4
case|:
case|case
literal|6
case|:
comment|/* 8040 open,lock       */
name|spk
operator|=
literal|28
expr_stmt|;
if|if
condition|(
name|here
argument_list|(
name|clam
argument_list|)
condition|)
name|obj
operator|=
name|clam
expr_stmt|;
if|if
condition|(
name|here
argument_list|(
name|oyster
argument_list|)
condition|)
name|obj
operator|=
name|oyster
expr_stmt|;
if|if
condition|(
name|at
argument_list|(
name|door
argument_list|)
condition|)
name|obj
operator|=
name|door
expr_stmt|;
if|if
condition|(
name|at
argument_list|(
name|grate
argument_list|)
condition|)
name|obj
operator|=
name|grate
expr_stmt|;
if|if
condition|(
name|obj
operator|!=
literal|0
operator|&&
name|here
argument_list|(
name|chain
argument_list|)
condition|)
goto|goto
name|l8000
goto|;
if|if
condition|(
name|here
argument_list|(
name|chain
argument_list|)
condition|)
name|obj
operator|=
name|chain
expr_stmt|;
if|if
condition|(
name|obj
operator|==
literal|0
condition|)
goto|goto
name|l2011
goto|;
goto|goto
name|l9040
goto|;
case|case
literal|5
case|:
goto|goto
name|l2009
goto|;
comment|/* nothing              */
case|case
literal|7
case|:
goto|goto
name|l9070
goto|;
comment|/* on                   */
case|case
literal|8
case|:
goto|goto
name|l9080
goto|;
comment|/* off                  */
case|case
literal|11
case|:
goto|goto
name|l8000
goto|;
comment|/* walk                 */
case|case
literal|12
case|:
goto|goto
name|l9120
goto|;
comment|/* kill                 */
case|case
literal|13
case|:
goto|goto
name|l9130
goto|;
comment|/* pour                 */
case|case
literal|14
case|:
comment|/* eat: 8140            */
if|if
condition|(
operator|!
name|here
argument_list|(
name|food
argument_list|)
condition|)
goto|goto
name|l8000
goto|;
name|l8142
label|:
name|dstroy
argument_list|(
name|food
argument_list|)
expr_stmt|;
name|spk
operator|=
literal|72
expr_stmt|;
goto|goto
name|l2011
goto|;
case|case
literal|15
case|:
goto|goto
name|l9150
goto|;
comment|/* drink                */
case|case
literal|18
case|:
comment|/* quit: 8180           */
name|gaveup
operator|=
name|yes
argument_list|(
literal|22
argument_list|,
literal|54
argument_list|,
literal|54
argument_list|)
expr_stmt|;
if|if
condition|(
name|gaveup
condition|)
name|done
argument_list|(
literal|2
argument_list|)
expr_stmt|;
comment|/* 8185                 */
goto|goto
name|l2012
goto|;
case|case
literal|20
case|:
comment|/* invent=8200          */
name|spk
operator|=
literal|98
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
literal|100
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|i
operator|!=
name|bear
operator|&&
name|toting
argument_list|(
name|i
argument_list|)
condition|)
block|{
if|if
condition|(
name|spk
operator|==
literal|98
condition|)
name|rspeak
argument_list|(
literal|99
argument_list|)
expr_stmt|;
name|blklin
operator|=
name|FALSE
expr_stmt|;
name|pspeak
argument_list|(
name|i
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|blklin
operator|=
name|TRUE
expr_stmt|;
name|spk
operator|=
literal|0
expr_stmt|;
block|}
block|}
if|if
condition|(
name|toting
argument_list|(
name|bear
argument_list|)
condition|)
name|spk
operator|=
literal|141
expr_stmt|;
goto|goto
name|l2011
goto|;
case|case
literal|22
case|:
goto|goto
name|l9220
goto|;
comment|/* fill                 */
case|case
literal|23
case|:
goto|goto
name|l9230
goto|;
comment|/* blast                */
case|case
literal|24
case|:
comment|/* score: 8240          */
name|scorng
operator|=
name|TRUE
expr_stmt|;
name|printf
argument_list|(
literal|"If you were to quit now, you would score"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" %d out of a possible "
argument_list|,
name|score
argument_list|()
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"%d."
argument_list|,
name|mxscor
argument_list|)
expr_stmt|;
name|scorng
operator|=
name|FALSE
expr_stmt|;
name|gaveup
operator|=
name|yes
argument_list|(
literal|143
argument_list|,
literal|54
argument_list|,
literal|54
argument_list|)
expr_stmt|;
if|if
condition|(
name|gaveup
condition|)
name|done
argument_list|(
literal|2
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
case|case
literal|25
case|:
comment|/* foo: 8250            */
name|k
operator|=
name|vocab
argument_list|(
name|wd1
argument_list|,
literal|3
argument_list|)
expr_stmt|;
name|spk
operator|=
literal|42
expr_stmt|;
if|if
condition|(
name|foobar
operator|==
literal|1
operator|-
name|k
condition|)
goto|goto
name|l8252
goto|;
if|if
condition|(
name|foobar
operator|!=
literal|0
condition|)
name|spk
operator|=
literal|151
expr_stmt|;
goto|goto
name|l2011
goto|;
name|l8252
label|:
name|foobar
operator|=
name|k
expr_stmt|;
if|if
condition|(
name|k
operator|!=
literal|4
condition|)
goto|goto
name|l2009
goto|;
name|foobar
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|place
index|[
name|eggs
index|]
operator|==
name|plac
index|[
name|eggs
index|]
operator|||
operator|(
name|toting
argument_list|(
name|eggs
argument_list|)
operator|&&
name|loc
operator|==
name|plac
index|[
name|eggs
index|]
operator|)
condition|)
goto|goto
name|l2011
goto|;
if|if
condition|(
name|place
index|[
name|eggs
index|]
operator|==
literal|0
operator|&&
name|place
index|[
name|troll
index|]
operator|==
literal|0
operator|&&
name|prop
index|[
name|troll
index|]
operator|==
literal|0
condition|)
name|prop
index|[
name|troll
index|]
operator|=
literal|1
expr_stmt|;
name|k
operator|=
literal|2
expr_stmt|;
if|if
condition|(
name|here
argument_list|(
name|eggs
argument_list|)
condition|)
name|k
operator|=
literal|1
expr_stmt|;
if|if
condition|(
name|loc
operator|==
name|plac
index|[
name|eggs
index|]
condition|)
name|k
operator|=
literal|0
expr_stmt|;
name|move
argument_list|(
name|eggs
argument_list|,
name|plac
index|[
name|eggs
index|]
argument_list|)
expr_stmt|;
name|pspeak
argument_list|(
name|eggs
argument_list|,
name|k
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
case|case
literal|26
case|:
comment|/* brief=8260           */
name|spk
operator|=
literal|156
expr_stmt|;
name|abbnum
operator|=
literal|10000
expr_stmt|;
name|detail
operator|=
literal|3
expr_stmt|;
goto|goto
name|l2011
goto|;
case|case
literal|27
case|:
comment|/* read=8270            */
if|if
condition|(
name|here
argument_list|(
name|magzin
argument_list|)
condition|)
name|obj
operator|=
name|magzin
expr_stmt|;
if|if
condition|(
name|here
argument_list|(
name|tablet
argument_list|)
condition|)
name|obj
operator|=
name|obj
operator|*
literal|100
operator|+
name|tablet
expr_stmt|;
if|if
condition|(
name|here
argument_list|(
name|messag
argument_list|)
condition|)
name|obj
operator|=
name|obj
operator|*
literal|100
operator|+
name|messag
expr_stmt|;
if|if
condition|(
name|closed
operator|&&
name|toting
argument_list|(
name|oyster
argument_list|)
condition|)
name|obj
operator|=
name|oyster
expr_stmt|;
if|if
condition|(
name|obj
operator|>
literal|100
operator|||
name|obj
operator|==
literal|0
operator|||
name|dark
argument_list|(
literal|0
argument_list|)
condition|)
goto|goto
name|l8000
goto|;
goto|goto
name|l9270
goto|;
case|case
literal|30
case|:
comment|/* suspend=8300         */
name|spk
operator|=
literal|201
expr_stmt|;
if|if
condition|(
name|demo
condition|)
goto|goto
name|l2011
goto|;
name|printf
argument_list|(
literal|"I can suspend your adventure for you so"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" you can resume later, but\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"you will have to wait at least"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|" %d minutes before continuing."
argument_list|,
name|latncy
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|yes
argument_list|(
literal|200
argument_list|,
literal|54
argument_list|,
literal|54
argument_list|)
condition|)
goto|goto
name|l2012
goto|;
name|datime
argument_list|(
operator|&
name|saved
argument_list|,
operator|&
name|savet
argument_list|)
expr_stmt|;
name|ciao
argument_list|(
name|argv
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
comment|/* Do we quit? */
continue|continue;
comment|/* Maybe not */
case|case
literal|31
case|:
comment|/* hours=8310           */
name|printf
argument_list|(
literal|"Colossal cave is closed 9am-5pm Mon "
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"through Fri except holidays.\n"
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
default|default:
name|bug
argument_list|(
literal|23
argument_list|)
expr_stmt|;
block|}
name|l4090
label|:
switch|switch
condition|(
name|verb
condition|)
block|{
case|case
literal|1
case|:
comment|/* take = 9010          */
name|l9010
label|:
switch|switch
condition|(
name|trtake
argument_list|()
condition|)
block|{
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
case|case
literal|9220
case|:
goto|goto
name|l9220
goto|;
case|case
literal|2009
case|:
goto|goto
name|l2009
goto|;
case|case
literal|2012
case|:
goto|goto
name|l2012
goto|;
default|default:
name|bug
argument_list|(
literal|102
argument_list|)
expr_stmt|;
block|}
name|l9020
label|:
case|case
literal|2
case|:
comment|/* drop = 9020          */
switch|switch
condition|(
name|trdrop
argument_list|()
condition|)
block|{
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
case|case
literal|19000
case|:
name|done
argument_list|(
literal|3
argument_list|)
expr_stmt|;
case|case
literal|2012
case|:
goto|goto
name|l2012
goto|;
default|default:
name|bug
argument_list|(
literal|105
argument_list|)
expr_stmt|;
block|}
name|l9030
label|:
case|case
literal|3
case|:
switch|switch
condition|(
name|trsay
argument_list|()
condition|)
block|{
case|case
literal|2012
case|:
goto|goto
name|l2012
goto|;
case|case
literal|2630
case|:
goto|goto
name|l2630
goto|;
default|default:
name|bug
argument_list|(
literal|107
argument_list|)
expr_stmt|;
block|}
name|l9040
label|:
case|case
literal|4
case|:
case|case
literal|6
case|:
comment|/* open, close          */
switch|switch
condition|(
name|tropen
argument_list|()
condition|)
block|{
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
case|case
literal|2010
case|:
goto|goto
name|l2010
goto|;
default|default:
name|bug
argument_list|(
literal|106
argument_list|)
expr_stmt|;
block|}
case|case
literal|5
case|:
goto|goto
name|l2009
goto|;
comment|/* nothing              */
case|case
literal|7
case|:
comment|/* on   9070            */
name|l9070
label|:
if|if
condition|(
operator|!
name|here
argument_list|(
name|lamp
argument_list|)
condition|)
goto|goto
name|l2011
goto|;
name|spk
operator|=
literal|184
expr_stmt|;
if|if
condition|(
name|limit
operator|<
literal|0
condition|)
goto|goto
name|l2011
goto|;
name|prop
index|[
name|lamp
index|]
operator|=
literal|1
expr_stmt|;
name|rspeak
argument_list|(
literal|39
argument_list|)
expr_stmt|;
if|if
condition|(
name|wzdark
condition|)
goto|goto
name|l2000
goto|;
goto|goto
name|l2012
goto|;
case|case
literal|8
case|:
comment|/* off                  */
name|l9080
label|:
if|if
condition|(
operator|!
name|here
argument_list|(
name|lamp
argument_list|)
condition|)
goto|goto
name|l2011
goto|;
name|prop
index|[
name|lamp
index|]
operator|=
literal|0
expr_stmt|;
name|rspeak
argument_list|(
literal|40
argument_list|)
expr_stmt|;
if|if
condition|(
name|dark
argument_list|(
literal|0
argument_list|)
condition|)
name|rspeak
argument_list|(
literal|16
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
case|case
literal|9
case|:
comment|/* wave                 */
if|if
condition|(
operator|(
operator|!
name|toting
argument_list|(
name|obj
argument_list|)
operator|)
operator|&&
operator|(
name|obj
operator|!=
name|rod
operator|||
operator|!
name|toting
argument_list|(
name|rod2
argument_list|)
operator|)
condition|)
name|spk
operator|=
literal|29
expr_stmt|;
if|if
condition|(
name|obj
operator|!=
name|rod
operator|||
operator|!
name|at
argument_list|(
name|fissur
argument_list|)
operator|||
operator|!
name|toting
argument_list|(
name|obj
argument_list|)
operator|||
name|closng
condition|)
goto|goto
name|l2011
goto|;
name|prop
index|[
name|fissur
index|]
operator|=
literal|1
operator|-
name|prop
index|[
name|fissur
index|]
expr_stmt|;
name|pspeak
argument_list|(
name|fissur
argument_list|,
literal|2
operator|-
name|prop
index|[
name|fissur
index|]
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
case|case
literal|10
case|:
case|case
literal|11
case|:
case|case
literal|18
case|:
comment|/* calm, walk, quit     */
case|case
literal|24
case|:
case|case
literal|25
case|:
case|case
literal|26
case|:
comment|/* score, foo, brief    */
case|case
literal|30
case|:
case|case
literal|31
case|:
comment|/* suspend, hours       */
goto|goto
name|l2011
goto|;
name|l9120
label|:
case|case
literal|12
case|:
comment|/* kill                 */
switch|switch
condition|(
name|trkill
argument_list|()
condition|)
block|{
case|case
literal|8000
case|:
goto|goto
name|l8000
goto|;
case|case
literal|8
case|:
goto|goto
name|l8
goto|;
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
case|case
literal|2608
case|:
goto|goto
name|l2608
goto|;
case|case
literal|19000
case|:
name|done
argument_list|(
literal|3
argument_list|)
expr_stmt|;
default|default:
name|bug
argument_list|(
literal|112
argument_list|)
expr_stmt|;
block|}
name|l9130
label|:
case|case
literal|13
case|:
comment|/* pour                 */
if|if
condition|(
name|obj
operator|==
name|bottle
operator|||
name|obj
operator|==
literal|0
condition|)
name|obj
operator|=
name|liq
argument_list|(
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|obj
operator|==
literal|0
condition|)
goto|goto
name|l8000
goto|;
if|if
condition|(
operator|!
name|toting
argument_list|(
name|obj
argument_list|)
condition|)
goto|goto
name|l2011
goto|;
name|spk
operator|=
literal|78
expr_stmt|;
if|if
condition|(
name|obj
operator|!=
name|oil
operator|&&
name|obj
operator|!=
name|water
condition|)
goto|goto
name|l2011
goto|;
name|prop
index|[
name|bottle
index|]
operator|=
literal|1
expr_stmt|;
name|place
index|[
name|obj
index|]
operator|=
literal|0
expr_stmt|;
name|spk
operator|=
literal|77
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|at
argument_list|(
name|plant
argument_list|)
operator|||
name|at
argument_list|(
name|door
argument_list|)
operator|)
condition|)
goto|goto
name|l2011
goto|;
if|if
condition|(
name|at
argument_list|(
name|door
argument_list|)
condition|)
block|{
name|prop
index|[
name|door
index|]
operator|=
literal|0
expr_stmt|;
comment|/* 9132                 */
if|if
condition|(
name|obj
operator|==
name|oil
condition|)
name|prop
index|[
name|door
index|]
operator|=
literal|1
expr_stmt|;
name|spk
operator|=
literal|113
operator|+
name|prop
index|[
name|door
index|]
expr_stmt|;
goto|goto
name|l2011
goto|;
block|}
name|spk
operator|=
literal|112
expr_stmt|;
if|if
condition|(
name|obj
operator|!=
name|water
condition|)
goto|goto
name|l2011
goto|;
name|pspeak
argument_list|(
name|plant
argument_list|,
name|prop
index|[
name|plant
index|]
operator|+
literal|1
argument_list|)
expr_stmt|;
name|prop
index|[
name|plant
index|]
operator|=
operator|(
name|prop
index|[
name|plant
index|]
operator|+
literal|2
operator|)
operator|%
literal|6
expr_stmt|;
name|prop
index|[
name|plant2
index|]
operator|=
name|prop
index|[
name|plant
index|]
operator|/
literal|2
expr_stmt|;
name|k
operator|=
name|null
expr_stmt|;
goto|goto
name|l8
goto|;
case|case
literal|14
case|:
comment|/* 9140 - eat           */
if|if
condition|(
name|obj
operator|==
name|food
condition|)
goto|goto
name|l8142
goto|;
if|if
condition|(
name|obj
operator|==
name|bird
operator|||
name|obj
operator|==
name|snake
operator|||
name|obj
operator|==
name|clam
operator|||
name|obj
operator|==
name|oyster
operator|||
name|obj
operator|==
name|dwarf
operator|||
name|obj
operator|==
name|dragon
operator|||
name|obj
operator|==
name|troll
operator|||
name|obj
operator|==
name|bear
condition|)
name|spk
operator|=
literal|71
expr_stmt|;
goto|goto
name|l2011
goto|;
name|l9150
label|:
case|case
literal|15
case|:
comment|/* 9150 - drink         */
if|if
condition|(
name|obj
operator|==
literal|0
operator|&&
name|liqloc
argument_list|(
name|loc
argument_list|)
operator|!=
name|water
operator|&&
operator|(
name|liq
argument_list|(
literal|0
argument_list|)
operator|!=
name|water
operator|||
operator|!
name|here
argument_list|(
name|bottle
argument_list|)
operator|)
condition|)
goto|goto
name|l8000
goto|;
if|if
condition|(
name|obj
operator|!=
literal|0
operator|&&
name|obj
operator|!=
name|water
condition|)
name|spk
operator|=
literal|110
expr_stmt|;
if|if
condition|(
name|spk
operator|==
literal|110
operator|||
name|liq
argument_list|(
literal|0
argument_list|)
operator|!=
name|water
operator|||
operator|!
name|here
argument_list|(
name|bottle
argument_list|)
condition|)
goto|goto
name|l2011
goto|;
name|prop
index|[
name|bottle
index|]
operator|=
literal|1
expr_stmt|;
name|place
index|[
name|water
index|]
operator|=
literal|0
expr_stmt|;
name|spk
operator|=
literal|74
expr_stmt|;
goto|goto
name|l2011
goto|;
case|case
literal|16
case|:
comment|/* 9160: rub            */
if|if
condition|(
name|obj
operator|!=
name|lamp
condition|)
name|spk
operator|=
literal|76
expr_stmt|;
goto|goto
name|l2011
goto|;
case|case
literal|17
case|:
comment|/* 9170: throw          */
switch|switch
condition|(
name|trtoss
argument_list|()
condition|)
block|{
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
case|case
literal|9020
case|:
goto|goto
name|l9020
goto|;
case|case
literal|9120
case|:
goto|goto
name|l9120
goto|;
case|case
literal|8
case|:
goto|goto
name|l8
goto|;
case|case
literal|9210
case|:
goto|goto
name|l9210
goto|;
default|default:
name|bug
argument_list|(
literal|113
argument_list|)
expr_stmt|;
block|}
case|case
literal|19
case|:
case|case
literal|20
case|:
comment|/* 9190: find, invent   */
if|if
condition|(
name|at
argument_list|(
name|obj
argument_list|)
operator|||
operator|(
name|liq
argument_list|(
literal|0
argument_list|)
operator|==
name|obj
operator|&&
name|at
argument_list|(
name|bottle
argument_list|)
operator|)
operator|||
name|k
operator|==
name|liqloc
argument_list|(
name|loc
argument_list|)
condition|)
name|spk
operator|=
literal|94
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
literal|5
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|dloc
index|[
name|i
index|]
operator|==
name|loc
operator|&&
name|dflag
operator|>=
literal|2
operator|&&
name|obj
operator|==
name|dwarf
condition|)
name|spk
operator|=
literal|94
expr_stmt|;
if|if
condition|(
name|closed
condition|)
name|spk
operator|=
literal|138
expr_stmt|;
if|if
condition|(
name|toting
argument_list|(
name|obj
argument_list|)
condition|)
name|spk
operator|=
literal|24
expr_stmt|;
goto|goto
name|l2011
goto|;
name|l9210
label|:
case|case
literal|21
case|:
comment|/* feed                 */
switch|switch
condition|(
name|trfeed
argument_list|()
condition|)
block|{
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
default|default:
name|bug
argument_list|(
literal|114
argument_list|)
expr_stmt|;
block|}
name|l9220
label|:
case|case
literal|22
case|:
comment|/* fill                 */
switch|switch
condition|(
name|trfill
argument_list|()
condition|)
block|{
case|case
literal|2011
case|:
goto|goto
name|l2011
goto|;
case|case
literal|8000
case|:
goto|goto
name|l8000
goto|;
case|case
literal|9020
case|:
goto|goto
name|l9020
goto|;
default|default:
name|bug
argument_list|(
literal|115
argument_list|)
expr_stmt|;
block|}
name|l9230
label|:
case|case
literal|23
case|:
comment|/* blast                */
if|if
condition|(
name|prop
index|[
name|rod2
index|]
operator|<
literal|0
operator|||
operator|!
name|closed
condition|)
goto|goto
name|l2011
goto|;
name|bonus
operator|=
literal|133
expr_stmt|;
if|if
condition|(
name|loc
operator|==
literal|115
condition|)
name|bonus
operator|=
literal|134
expr_stmt|;
if|if
condition|(
name|here
argument_list|(
name|rod2
argument_list|)
condition|)
name|bonus
operator|=
literal|135
expr_stmt|;
name|rspeak
argument_list|(
name|bonus
argument_list|)
expr_stmt|;
name|done
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|l9270
label|:
case|case
literal|27
case|:
comment|/* read                 */
if|if
condition|(
name|dark
argument_list|(
literal|0
argument_list|)
condition|)
goto|goto
name|l5190
goto|;
if|if
condition|(
name|obj
operator|==
name|magzin
condition|)
name|spk
operator|=
literal|190
expr_stmt|;
if|if
condition|(
name|obj
operator|==
name|tablet
condition|)
name|spk
operator|=
literal|196
expr_stmt|;
if|if
condition|(
name|obj
operator|==
name|messag
condition|)
name|spk
operator|=
literal|191
expr_stmt|;
if|if
condition|(
name|obj
operator|==
name|oyster
operator|&&
name|hinted
index|[
literal|2
index|]
operator|&&
name|toting
argument_list|(
name|oyster
argument_list|)
condition|)
name|spk
operator|=
literal|194
expr_stmt|;
if|if
condition|(
name|obj
operator|!=
name|oyster
operator|||
name|hinted
index|[
literal|2
index|]
operator|||
operator|!
name|toting
argument_list|(
name|oyster
argument_list|)
operator|||
operator|!
name|closed
condition|)
goto|goto
name|l2011
goto|;
name|hinted
index|[
literal|2
index|]
operator|=
name|yes
argument_list|(
literal|192
argument_list|,
literal|193
argument_list|,
literal|54
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
name|l9280
label|:
case|case
literal|28
case|:
comment|/* break                */
if|if
condition|(
name|obj
operator|==
name|mirror
condition|)
name|spk
operator|=
literal|148
expr_stmt|;
if|if
condition|(
name|obj
operator|==
name|vase
operator|&&
name|prop
index|[
name|vase
index|]
operator|==
literal|0
condition|)
block|{
name|spk
operator|=
literal|198
expr_stmt|;
if|if
condition|(
name|toting
argument_list|(
name|vase
argument_list|)
condition|)
name|drop
argument_list|(
name|vase
argument_list|,
name|loc
argument_list|)
expr_stmt|;
name|prop
index|[
name|vase
index|]
operator|=
literal|2
expr_stmt|;
name|fixed
index|[
name|vase
index|]
operator|=
operator|-
literal|1
expr_stmt|;
goto|goto
name|l2011
goto|;
block|}
if|if
condition|(
name|obj
operator|!=
name|mirror
operator|||
operator|!
name|closed
condition|)
goto|goto
name|l2011
goto|;
name|rspeak
argument_list|(
literal|197
argument_list|)
expr_stmt|;
name|done
argument_list|(
literal|3
argument_list|)
expr_stmt|;
name|l9290
label|:
case|case
literal|29
case|:
comment|/* wake                 */
if|if
condition|(
name|obj
operator|!=
name|dwarf
operator|||
operator|!
name|closed
condition|)
goto|goto
name|l2011
goto|;
name|rspeak
argument_list|(
literal|199
argument_list|)
expr_stmt|;
name|done
argument_list|(
literal|3
argument_list|)
expr_stmt|;
default|default:
name|bug
argument_list|(
literal|24
argument_list|)
expr_stmt|;
block|}
name|l5000
label|:
name|obj
operator|=
name|k
expr_stmt|;
if|if
condition|(
name|fixed
index|[
name|k
index|]
operator|!=
name|loc
operator|&&
operator|!
name|here
argument_list|(
name|k
argument_list|)
condition|)
goto|goto
name|l5100
goto|;
name|l5010
label|:
if|if
condition|(
operator|*
name|wd2
operator|!=
literal|0
condition|)
goto|goto
name|l2800
goto|;
if|if
condition|(
name|verb
operator|!=
literal|0
condition|)
goto|goto
name|l4090
goto|;
name|printf
argument_list|(
literal|"What do you want to do with the %s?\n"
argument_list|,
name|wd1
argument_list|)
expr_stmt|;
goto|goto
name|l2600
goto|;
name|l5100
label|:
if|if
condition|(
name|k
operator|!=
name|grate
condition|)
goto|goto
name|l5110
goto|;
if|if
condition|(
name|loc
operator|==
literal|1
operator|||
name|loc
operator|==
literal|4
operator|||
name|loc
operator|==
literal|7
condition|)
name|k
operator|=
name|dprssn
expr_stmt|;
if|if
condition|(
name|loc
operator|>
literal|9
operator|&&
name|loc
operator|<
literal|15
condition|)
name|k
operator|=
name|entrnc
expr_stmt|;
if|if
condition|(
name|k
operator|!=
name|grate
condition|)
goto|goto
name|l8
goto|;
name|l5110
label|:
if|if
condition|(
name|k
operator|!=
name|dwarf
condition|)
goto|goto
name|l5120
goto|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<=
literal|5
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|dloc
index|[
name|i
index|]
operator|==
name|loc
operator|&&
name|dflag
operator|>=
literal|2
condition|)
goto|goto
name|l5010
goto|;
name|l5120
label|:
if|if
condition|(
operator|(
name|liq
argument_list|(
literal|0
argument_list|)
operator|==
name|k
operator|&&
name|here
argument_list|(
name|bottle
argument_list|)
operator|)
operator|||
name|k
operator|==
name|liqloc
argument_list|(
name|loc
argument_list|)
condition|)
goto|goto
name|l5010
goto|;
if|if
condition|(
name|obj
operator|!=
name|plant
operator|||
operator|!
name|at
argument_list|(
name|plant2
argument_list|)
operator|||
name|prop
index|[
name|plant2
index|]
operator|==
literal|0
condition|)
goto|goto
name|l5130
goto|;
name|obj
operator|=
name|plant2
expr_stmt|;
goto|goto
name|l5010
goto|;
name|l5130
label|:
if|if
condition|(
name|obj
operator|!=
name|knife
operator|||
name|knfloc
operator|!=
name|loc
condition|)
goto|goto
name|l5140
goto|;
name|knfloc
operator|=
operator|-
literal|1
expr_stmt|;
name|spk
operator|=
literal|116
expr_stmt|;
goto|goto
name|l2011
goto|;
name|l5140
label|:
if|if
condition|(
name|obj
operator|!=
name|rod
operator|||
operator|!
name|here
argument_list|(
name|rod2
argument_list|)
condition|)
goto|goto
name|l5190
goto|;
name|obj
operator|=
name|rod2
expr_stmt|;
goto|goto
name|l5010
goto|;
name|l5190
label|:
if|if
condition|(
operator|(
name|verb
operator|==
name|find
operator|||
name|verb
operator|==
name|invent
operator|)
operator|&&
operator|*
name|wd2
operator|==
literal|0
condition|)
goto|goto
name|l5010
goto|;
name|printf
argument_list|(
literal|"I see no %s here\n"
argument_list|,
name|wd1
argument_list|)
expr_stmt|;
goto|goto
name|l2012
goto|;
block|}
end_for

unit|}
end_unit

