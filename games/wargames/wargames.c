begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Program:	wargames(6)  * Author:	Juli Mallett<jmallett@FreeBSD.org>  * Copyright:	This file is in the public domain.  * Description:  * 	Would you like to play a game?  Or is the game you chose just a practice  * 	in futility...  Based on the original Berkeley shell script, inspired by  * 	the motion picture.  *  * From:	@(#)wargames.sh 8.1 (Berkeley) 5/31/93  */
end_comment

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_expr_stmt
name|__FBSDID
argument_list|(
literal|"$FreeBSD$"
argument_list|)
expr_stmt|;
end_expr_stmt

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/stat.h>
end_include

begin_include
include|#
directive|include
file|<ncurses.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<unistd.h>
end_include

begin_function
name|int
name|main
parameter_list|(
name|void
parameter_list|)
block|{
name|struct
name|stat
name|sb
decl_stmt|;
name|char
name|buffer
index|[
name|MAXPATHLEN
index|]
decl_stmt|;
name|char
modifier|*
name|line
decl_stmt|;
name|size_t
name|len
decl_stmt|;
name|printf
argument_list|(
literal|"Would you like to play a game? "
argument_list|)
expr_stmt|;
name|line
operator|=
name|fgetln
argument_list|(
name|stdin
argument_list|,
operator|&
name|len
argument_list|)
expr_stmt|;
if|if
condition|(
name|line
operator|==
name|NULL
condition|)
block|{
name|err
argument_list|(
literal|1
argument_list|,
literal|"I'm sorry to hear that"
argument_list|)
expr_stmt|;
block|}
name|line
index|[
name|len
operator|-
literal|1
index|]
operator|=
literal|'\0'
expr_stmt|;
name|snprintf
argument_list|(
name|buffer
argument_list|,
sizeof|sizeof
name|buffer
argument_list|,
literal|"/usr/games/%s"
argument_list|,
name|line
argument_list|)
expr_stmt|;
if|if
condition|(
name|stat
argument_list|(
name|buffer
argument_list|,
operator|&
name|sb
argument_list|)
operator|!=
operator|-
literal|1
condition|)
block|{
name|initscr
argument_list|()
expr_stmt|;
name|clear
argument_list|()
expr_stmt|;
name|endwin
argument_list|()
expr_stmt|;
name|execl
argument_list|(
name|buffer
argument_list|,
name|line
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|"Funny, the only way to win is not to play at all.\n"
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

end_unit

