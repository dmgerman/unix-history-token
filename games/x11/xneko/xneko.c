begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 1991, 1993  *	The Regents of the University of California.  All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  * 3. All advertising materials mentioning features or use of this software  *    must display the following acknowledgement:  *	This product includes software developed by the University of  *	California, Berkeley and its contributors.  * 4. Neither the name of the University nor the names of its contributors  *    may be used to endorse or promote products derived from this software  *    without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|copyright
index|[]
init|=
literal|"@(#) Copyright (c) 1991, 1993\n\ 	The Regents of the University of California.  All rights reserved.\n"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not lint */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|sccsid
index|[]
init|=
literal|"@(#)xneko.c	8.1 (Berkeley) 5/31/93"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not lint */
end_comment

begin_comment
comment|/*--------------------------------------------------------------  *  *	xneko  -  X11 G-  *  *			Original Writer: Masayuki Koba  *			Programmed by Masayuki Koba, 1990  *  *--------------------------------------------------------------  *  *!!Introduction:  *  *!!!!K\@(#)xneko.c	8.1m%0%i%`$O Macintosh $N5/31/939%/%"%/%;%5%j!< "neko" $N  *!!F0:n$r X11 $G%^%M$?$b$N$G$9!#  *  *!!!!Macintosh "neko" $N=(0o$J5/31/936%$%s$K7I0U$rI=$7$D$D!"$3$N  *!!@(#)xneko.c	8.1m%0%i%`$r3'$5$s$KJ{$2$^$9!#  *  *--------------------------------------------------------------  *  *!!Special Thanks to  *  *	toshi-w	!D!!Macintosh neko $N>R2p<T  *	shio-m	!D!!!VX11 $N neko $,M_$7$$!*!W$H%?%@$r$3$M$??M  *	disco	!D!!X11 SCCS/s.xneko.c/%K%+%k!&%"8.1P%$%6!<  *  *	HOMY	!D!!/usr/src/games/xneko/SCCS/s.xneko.c0;XE&<T  *	BNS	!D!!J#?t@(#)xneko.c	8.1l!<%sBP1~May 31, 1993C%ADs6!<T  *  *		"xneko"  Presented by Masayuki Koba (masa-k).  *  *--------------------------------------------------------------  *  *!!Manifest:  *  *!!!!K\@(#)xneko.c	8.1m%0%i%`$O Public Domain Software $G$9!#E>:\!&2~NI$O  *!!<+M3$K9T$C$F2<$5$$!#  *  *!!!!$J$*!"86:n<T$O!"K\@(#)xneko.c	8.1m%0%i%`$r;HMQ$9$k$3$H$K$h$C$F@8$8$?  *!!>c32$dITMx1W$K$D$$$F$$$C$5$$@UG$$r;}$A$^$;$s!#  *  *--------------------------------------------------------------  *  *!!Bugs:  *  *!!!!!J#1!KX11 $N .Xdefaults $N@_Dj$r$^$k$C$-$jL5;k$7$F$$$^$9!#  *  *!!!!!J#2!KG-$NF0:n$,;~4V$HF14|$7$F$$$k$?$a!"%^%&%9$N0\F0>pJs  *!!!!!!!!$r%]!<%j%s%0$7$F$$$^$9!#=>$C$F!"%^%&%9$,A4$/F0:n$7$F  *!!!!!!!!$$$J$$;~$OL5BL$J%^%&%9:BI8FI$_<h$j$r9T$C$F$7$^$$$^$9!#  *  *!!!!!J#3!K%&%#%s8.1&$,%"%$%3%s2=$5$l$F$b!"$7$i$s$W$j$GIA2h$7  *!!!!!!!!$D$E$1$^$9!#$3$NItJ,$O!"8=:_$N%&%#%s8.1&$N>uBV$r@(#) xneko.c 8.1@(#)'  *!!!!!!!!70/$7$F!"%"%$%3%s2=$5$l$F$$$k;~$O40A4$K%$s%HBT$A  *!!!!!!!!$K$J$k$h$&$K=q$-JQ$($J$1$l$P$J$j$^$;$s!# ($=$s$J$3$H!"  *!!!!!!!!$G$-$k$N$+$J$!!#X10 $G$O$G$-$^$7$?$,!#)  *  *!!!!!J#4!K%j%5%$%:8e$N%&%#%s8.1&$,6KC<$K>.$5$/$J$C$?;~$NF0:n  *!!!!!!!!$OJ]>Z$G$-$^$;$s!#  *  *!!!!!J#5!KK\Mh$J$i$P3NJ]$7$?%&%#%s8.1&$d Pixmap $O@(#)xneko.c	8.1m%0%i%`  *!!!!!!!!=*N;;~$K2rJ|$9$kI,MW$,$"$j$^$9$,!"K\@(#)xneko.c	8.1m%0%i%`$O$=$N  *!!!!!!!!$X$s$r%5%\$C$F$*$j!"Hs>o$K$*9T57$,0-$/$J$C$F$$$^$9!#  *!!!!!!!!IaDL$O exit() ;~$K%7%9SCCS/s.xneko.c`$,M>J,$J%j%=!<%9$r2rJ|$7$F  *!!!!!!!!$/$l$^$9$,!"#O#S$K/usr/src/games/xneko/SCCS/s.xneko.c0$,$"$k>l9g$O xneko $r2?EY$b5/  *!!!!!!!!F0$9$k$H!"$=$N$&$A%9%o82WNN0h$,ITB-$7$F$7$^$&$3$H$K  *!!!!!!!!$J$k$+$b$7$l$^$;$s!#  *  *!!!!!J#6!K;~4V$KF14|$7$FI,$:IA2h=hM}$r<B9T$9$k$?$a!"0BDj>uBV  *!!!!!!!!$G$b Idle 90 !A 95% $H$J$j!"%7%9SCCS/s.xneko.c`#C#P#U$r 5 !A 10%  *!!!!!!!!Dx>CHq$7$^$9!#!Jxtachos $GD4$Y$^$7$?!#!K  *  *--------------------------------------------------------------  *  *!!System (Machine):  *  *!!!!K\@(#)xneko.c	8.1m%0%i%`$NF0:n$r3NG'$7$?%7%9SCCS/s.xneko.c`9=@.$O0J2<$NDL$j!#  *  *	!&NWS-1750!"NWS-1720 (NEWS)!"NWP-512D  *	!!NEWS-OS 3.2a (UNIX 4.3BSD)!"X11 Release 2  *  *	!&NWS-1750!"NWS-1720 (NEWS)!"NWP-512D  *	!!NEWS-OS 3.3 (UNIX 4.3BSD)!"X11 Release 3  *  *	!&Sun 3!"X11 Release 4  *  *	!&LUNA!"X11 Release 3  *  *	!&DECstation 3100!"ULTRIX!"X11  *  *--------------------------------------------------------------*/
end_comment

begin_include
include|#
directive|include
file|<X11/Xlib.h>
end_include

begin_include
include|#
directive|include
file|<X11/Xutil.h>
end_include

begin_include
include|#
directive|include
file|<X11/keysym.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<stdlib.h>
end_include

begin_include
include|#
directive|include
file|<string.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_include
include|#
directive|include
file|<math.h>
end_include

begin_include
include|#
directive|include
file|<sys/time.h>
end_include

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|rcsid
index|[]
init|=
literal|"$Header: /home/ncvs/src/games/x11/xneko/xneko.c,v 1.2 1995/05/30 03:37:35 rgrimes Exp $"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|char
name|WriterMessage
index|[]
init|=
literal|"xneko: Programmed by Masayuki Koba, 1990"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  *	X11 G- 0C5/31/93^129W18:45:36!%$%k0lMw!'  *  *		"icon.xbm"		!D!!%"%$%3%s  *		"cursor.xbm"		!D!!%+!<%=%k  *		"cursor_mask.xbm"	!D!!%+!<%=%k!J%^%9%/!K  *  *		"space.xbm"		!D!!%9%Z!<%9  *  *		"mati2.xbm"		!D!!BT$A#2  *		"jare2.xbm"		!D!!$8$c$l#2  *		"kaki1.xbm"		!D!!A_$-#1  *		"kaki2.xbm"		!D!!A_$-#2  *		"mati3.xbm"		!D!!BT$A#3!J$"$/$S!K  *		"sleep1.xbm"		!D!!?2$k#1  *		"sleep2.xbm"		!D!!?2$k#2  *  *		"awake.xbm"		!D!!L\3P$a  *  *		"up1.xbm"		!D!!>e#1  *		"up2.xbm"		!D!!>e#2  *		"down1.xbm"		!D!!2<#1  *		"down2.xbm"		!D!!2<#2  *		"left1.xbm"		!D!!:8#1  *		"left2.xbm"		!D!!:8#2  *		"right1.xbm"		!D!!1&#1  *		"right2.xbm"		!D!!1&#2  *		"upleft1.xbm"		!D!!:8>e#1  *		"upleft2.xbm"		!D!!:8>e#2  *		"upright1.xbm"		!D!!1&>e#1  *		"upright2.xbm"		!D!!1&>e#2  *		"dwleft1.xbm"		!D!!:82<#1  *		"dwleft2.xbm"		!D!!:82<#2  *		"dwright1.xbm"		!D!!1&2<#1  *		"dwright2.xbm"		!D!!1&2<#2  *  *		"utogi1.xbm"		!D!!>eKa$.#1  *		"utogi2.xbm"		!D!!>eKa$.#2  *		"dtogi1.xbm"		!D!!2<Ka$.#1  *		"dtogi2.xbm"		!D!!2<Ka$.#2  *		"ltogi1.xbm"		!D!!:8Ka$.#1  *		"ltogi2.xbm"		!D!!:8Ka$.#2  *		"rtogi1.xbm"		!D!!1&Ka$.#1  *		"rtogi2.xbm"		!D!!1&Ka$.#2  *  *	!!$3$l$i$N18:45:36!%$%k$O bitmap %3%^%s%I$GJT=82DG=$G$9!#  *  *		(bitmap size "* 32x32 ... Macintosh ICON resource size.)  *  */
end_comment

begin_include
include|#
directive|include
file|"bitmaps/icon.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/cursor.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/cursor_mask.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/space.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/mati2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/jare2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/kaki1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/kaki2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/mati3.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/sleep1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/sleep2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/awake.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/up1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/up2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/down1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/down2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/left1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/left2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/right1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/right2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/upright1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/upright2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/upleft1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/upleft2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/dwleft1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/dwleft2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/dwright1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/dwright2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/utogi1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/utogi2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/dtogi1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/dtogi2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/ltogi1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/ltogi2.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/rtogi1.xbm"
end_include

begin_include
include|#
directive|include
file|"bitmaps/rtogi2.xbm"
end_include

begin_comment
comment|/*  *	Dj?tDj5A  */
end_comment

begin_define
define|#
directive|define
name|BITMAP_WIDTH
value|32
end_define

begin_comment
comment|/* #1%-%c%i%/%?$NI} (18:45:53/%;%k) */
end_comment

begin_define
define|#
directive|define
name|BITMAP_HEIGHT
value|32
end_define

begin_comment
comment|/* #1%-%c%i%/%?$N9b$5 (18:45:53/%;%k) */
end_comment

begin_define
define|#
directive|define
name|WINDOW_WIDTH
value|320
end_define

begin_comment
comment|/* %&%#%s8.1&$NI} (18:45:53/%;%k) */
end_comment

begin_define
define|#
directive|define
name|WINDOW_HEIGHT
value|256
end_define

begin_comment
comment|/* %&%#%s8.1&$N9b$5 (18:45:53/%;%k) */
end_comment

begin_define
define|#
directive|define
name|DEFAULT_BORDER
value|2
end_define

begin_comment
comment|/* %\!<%@!<%5%$%: */
end_comment

begin_define
define|#
directive|define
name|DEFAULT_WIN_X
value|1
end_define

begin_comment
comment|/* %&%#%s8.1&@8@.#X:BI8 */
end_comment

begin_define
define|#
directive|define
name|DEFAULT_WIN_Y
value|1
end_define

begin_comment
comment|/* %&%#%s8.1&@8@.#Y:BI8 */
end_comment

begin_define
define|#
directive|define
name|AVAIL_KEYBUF
value|255
end_define

begin_define
define|#
directive|define
name|EVENT_MASK1
value|( KeyPressMask | StructureNotifyMask )
end_define

begin_define
define|#
directive|define
name|EVENT_MASK2
value|( KeyPressMask | \ 				  ExposureMask | \ 				  StructureNotifyMask )
end_define

begin_define
define|#
directive|define
name|MAX_TICK
value|9999
end_define

begin_comment
comment|/* Odd Only! */
end_comment

begin_define
define|#
directive|define
name|INTERVAL
value|125000L
end_define

begin_comment
comment|/* %$%s%?!</usr/src/games/xneko/SCCS/s.xneko.ck%?%$%` */
end_comment

begin_define
define|#
directive|define
name|NEKO_SPEED
value|16
end_define

begin_define
define|#
directive|define
name|IDLE_SPACE
value|6
end_define

begin_define
define|#
directive|define
name|NORMAL_STATE
value|1
end_define

begin_define
define|#
directive|define
name|DEBUG_LIST
value|2
end_define

begin_define
define|#
directive|define
name|DEBUG_MOVE
value|3
end_define

begin_comment
comment|/* G-$N>uBVDj?t */
end_comment

begin_define
define|#
directive|define
name|NEKO_STOP
value|0
end_define

begin_comment
comment|/* N)$A;_$^$C$? */
end_comment

begin_define
define|#
directive|define
name|NEKO_JARE
value|1
end_define

begin_comment
comment|/* 4i$r@v$C$F$$$k */
end_comment

begin_define
define|#
directive|define
name|NEKO_KAKI
value|2
end_define

begin_comment
comment|/* F,$rA_$$$F$$$k */
end_comment

begin_define
define|#
directive|define
name|NEKO_AKUBI
value|3
end_define

begin_comment
comment|/* $"$/$S$r$7$F$$$k */
end_comment

begin_define
define|#
directive|define
name|NEKO_SLEEP
value|4
end_define

begin_comment
comment|/* ?2$F$7$^$C$? */
end_comment

begin_define
define|#
directive|define
name|NEKO_AWAKE
value|5
end_define

begin_comment
comment|/* L\$,3P$a$? */
end_comment

begin_define
define|#
directive|define
name|NEKO_U_MOVE
value|6
end_define

begin_comment
comment|/*>e$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_D_MOVE
value|7
end_define

begin_comment
comment|/* 2<$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_L_MOVE
value|8
end_define

begin_comment
comment|/* :8$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_R_MOVE
value|9
end_define

begin_comment
comment|/* 1&$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_UL_MOVE
value|10
end_define

begin_comment
comment|/* :8>e$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_UR_MOVE
value|11
end_define

begin_comment
comment|/* 1&>e$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_DL_MOVE
value|12
end_define

begin_comment
comment|/* :82<$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_DR_MOVE
value|13
end_define

begin_comment
comment|/* 1&2<$K0\F0Cf */
end_comment

begin_define
define|#
directive|define
name|NEKO_U_TOGI
value|14
end_define

begin_comment
comment|/*>e$NJI$r0z$CA_$$$F$$$k */
end_comment

begin_define
define|#
directive|define
name|NEKO_D_TOGI
value|15
end_define

begin_comment
comment|/* 2<$NJI$r0z$CA_$$$F$$$k */
end_comment

begin_define
define|#
directive|define
name|NEKO_L_TOGI
value|16
end_define

begin_comment
comment|/* :8$NJI$r0z$CA_$$$F$$$k */
end_comment

begin_define
define|#
directive|define
name|NEKO_R_TOGI
value|17
end_define

begin_comment
comment|/* 1&$NJI$r0z$CA_$$$F$$$k */
end_comment

begin_comment
comment|/* G-$N%"%K%a!<%7%g%s7+$jJV$72s?t */
end_comment

begin_define
define|#
directive|define
name|NEKO_STOP_TIME
value|4
end_define

begin_define
define|#
directive|define
name|NEKO_JARE_TIME
value|10
end_define

begin_define
define|#
directive|define
name|NEKO_KAKI_TIME
value|4
end_define

begin_define
define|#
directive|define
name|NEKO_AKUBI_TIME
value|3
end_define

begin_define
define|#
directive|define
name|NEKO_AWAKE_TIME
value|3
end_define

begin_define
define|#
directive|define
name|NEKO_TOGI_TIME
value|10
end_define

begin_define
define|#
directive|define
name|PI_PER8
value|((double)3.1415926535/(double)8)
end_define

begin_define
define|#
directive|define
name|DIRNAMELEN
value|255
end_define

begin_comment
comment|/*  *	%0%m!</usr/src/games/xneko/SCCS/s.xneko.ckJQ?t  */
end_comment

begin_decl_stmt
specifier|static
name|char
modifier|*
name|ProgramName
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* %3%^%s%IL>>N */
end_comment

begin_decl_stmt
name|Display
modifier|*
name|theDisplay
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|theScreen
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|int
name|theDepth
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|long
name|theBlackPixel
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|unsigned
name|long
name|theWhitePixel
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Window
name|theWindow
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Cursor
name|theCursor
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|unsigned
name|int
name|WindowWidth
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|unsigned
name|int
name|WindowHeight
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|int
name|WindowPointX
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|int
name|WindowPointY
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|unsigned
name|int
name|BorderWidth
init|=
name|DEFAULT_BORDER
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|long
name|IntervalTime
init|=
name|INTERVAL
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|EventState
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* %$s%H=hM}MQ>uBVJQ?t */
end_comment

begin_decl_stmt
name|int
name|NekoTickCount
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-F0:n%+%&%s%? */
end_comment

begin_decl_stmt
name|int
name|NekoStateCount
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-F10l>uBV%+%&%s%? */
end_comment

begin_decl_stmt
name|int
name|NekoState
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-$N>uBV */
end_comment

begin_decl_stmt
name|int
name|MouseX
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* %^%&%9#X:BI8 */
end_comment

begin_decl_stmt
name|int
name|MouseY
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* %^%&%9#Y:BI8 */
end_comment

begin_decl_stmt
name|int
name|PrevMouseX
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* D>A0$N%^%&%9#X:BI8 */
end_comment

begin_decl_stmt
name|int
name|PrevMouseY
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* D>A0$N%^%&%9#Y:BI8 */
end_comment

begin_decl_stmt
name|int
name|NekoX
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-#X:BI8 */
end_comment

begin_decl_stmt
name|int
name|NekoY
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-#Y:BI8 */
end_comment

begin_decl_stmt
name|int
name|NekoMoveDx
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-0\F05wN%#X */
end_comment

begin_decl_stmt
name|int
name|NekoMoveDy
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-0\F05wN%#Y */
end_comment

begin_decl_stmt
name|int
name|NekoLastX
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-:G=*IA2h#X:BI8 */
end_comment

begin_decl_stmt
name|int
name|NekoLastY
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-:G=*IA2h#Y:BI8 */
end_comment

begin_decl_stmt
name|GC
name|NekoLastGC
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* G-:G=*IA2h GC */
end_comment

begin_decl_stmt
name|double
name|NekoSpeed
init|=
operator|(
name|double
operator|)
name|NEKO_SPEED
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|double
name|SinPiPer8Times3
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* sin( #3&P!?#8 ) */
end_comment

begin_decl_stmt
name|double
name|SinPiPer8
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* sin(&P!?#8 ) */
end_comment

begin_decl_stmt
name|Pixmap
name|SpaceXbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Mati2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Jare2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Kaki1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Kaki2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Mati3Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Sleep1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Sleep2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|AwakeXbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Up1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Up2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Down1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Down2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Left1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Left2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Right1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|Right2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|UpLeft1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|UpLeft2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|UpRight1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|UpRight2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|DownLeft1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|DownLeft2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|DownRight1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|DownRight2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|UpTogi1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|UpTogi2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|DownTogi1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|DownTogi2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|LeftTogi1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|LeftTogi2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|RightTogi1Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|Pixmap
name|RightTogi2Xbm
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|SpaceGC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Mati2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Jare2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Kaki1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Kaki2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Mati3GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Sleep1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Sleep2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|AwakeGC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Up1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Up2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Down1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Down2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Left1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Left2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Right1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|Right2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|UpLeft1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|UpLeft2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|UpRight1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|UpRight2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|DownLeft1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|DownLeft2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|DownRight1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|DownRight2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|UpTogi1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|UpTogi2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|DownTogi1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|DownTogi2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|LeftTogi1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|LeftTogi2GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|RightTogi1GC
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|GC
name|RightTogi2GC
decl_stmt|;
end_decl_stmt

begin_typedef
typedef|typedef
struct|struct
block|{
name|GC
modifier|*
name|GCCreatePtr
decl_stmt|;
name|Pixmap
modifier|*
name|BitmapCreatePtr
decl_stmt|;
name|char
modifier|*
name|PixelPattern
decl_stmt|;
name|unsigned
name|int
name|PixelWidth
decl_stmt|;
name|unsigned
name|int
name|PixelHeight
decl_stmt|;
block|}
name|BitmapGCData
typedef|;
end_typedef

begin_decl_stmt
name|BitmapGCData
name|BitmapGCDataTable
index|[]
init|=
block|{
block|{
operator|&
name|SpaceGC
block|,
operator|&
name|SpaceXbm
block|,
name|space_bits
block|,
name|space_width
block|,
name|space_height
block|}
block|,
block|{
operator|&
name|Mati2GC
block|,
operator|&
name|Mati2Xbm
block|,
name|mati2_bits
block|,
name|mati2_width
block|,
name|mati2_height
block|}
block|,
block|{
operator|&
name|Jare2GC
block|,
operator|&
name|Jare2Xbm
block|,
name|jare2_bits
block|,
name|jare2_width
block|,
name|jare2_height
block|}
block|,
block|{
operator|&
name|Kaki1GC
block|,
operator|&
name|Kaki1Xbm
block|,
name|kaki1_bits
block|,
name|kaki1_width
block|,
name|kaki1_height
block|}
block|,
block|{
operator|&
name|Kaki2GC
block|,
operator|&
name|Kaki2Xbm
block|,
name|kaki2_bits
block|,
name|kaki2_width
block|,
name|kaki2_height
block|}
block|,
block|{
operator|&
name|Mati3GC
block|,
operator|&
name|Mati3Xbm
block|,
name|mati3_bits
block|,
name|mati3_width
block|,
name|mati3_height
block|}
block|,
block|{
operator|&
name|Sleep1GC
block|,
operator|&
name|Sleep1Xbm
block|,
name|sleep1_bits
block|,
name|sleep1_width
block|,
name|sleep1_height
block|}
block|,
block|{
operator|&
name|Sleep2GC
block|,
operator|&
name|Sleep2Xbm
block|,
name|sleep2_bits
block|,
name|sleep2_width
block|,
name|sleep2_height
block|}
block|,
block|{
operator|&
name|AwakeGC
block|,
operator|&
name|AwakeXbm
block|,
name|awake_bits
block|,
name|awake_width
block|,
name|awake_height
block|}
block|,
block|{
operator|&
name|Up1GC
block|,
operator|&
name|Up1Xbm
block|,
name|up1_bits
block|,
name|up1_width
block|,
name|up1_height
block|}
block|,
block|{
operator|&
name|Up2GC
block|,
operator|&
name|Up2Xbm
block|,
name|up2_bits
block|,
name|up2_width
block|,
name|up2_height
block|}
block|,
block|{
operator|&
name|Down1GC
block|,
operator|&
name|Down1Xbm
block|,
name|down1_bits
block|,
name|down1_width
block|,
name|down1_height
block|}
block|,
block|{
operator|&
name|Down2GC
block|,
operator|&
name|Down2Xbm
block|,
name|down2_bits
block|,
name|down2_width
block|,
name|down2_height
block|}
block|,
block|{
operator|&
name|Left1GC
block|,
operator|&
name|Left1Xbm
block|,
name|left1_bits
block|,
name|left1_width
block|,
name|left1_height
block|}
block|,
block|{
operator|&
name|Left2GC
block|,
operator|&
name|Left2Xbm
block|,
name|left2_bits
block|,
name|left2_width
block|,
name|left2_height
block|}
block|,
block|{
operator|&
name|Right1GC
block|,
operator|&
name|Right1Xbm
block|,
name|right1_bits
block|,
name|right1_width
block|,
name|right1_height
block|}
block|,
block|{
operator|&
name|Right2GC
block|,
operator|&
name|Right2Xbm
block|,
name|right2_bits
block|,
name|right2_width
block|,
name|right2_height
block|}
block|,
block|{
operator|&
name|UpLeft1GC
block|,
operator|&
name|UpLeft1Xbm
block|,
name|upleft1_bits
block|,
name|upleft1_width
block|,
name|upleft1_height
block|}
block|,
block|{
operator|&
name|UpLeft2GC
block|,
operator|&
name|UpLeft2Xbm
block|,
name|upleft2_bits
block|,
name|upleft2_width
block|,
name|upleft2_height
block|}
block|,
block|{
operator|&
name|UpRight1GC
block|,
operator|&
name|UpRight1Xbm
block|,
name|upright1_bits
block|,
name|upright1_width
block|,
name|upright1_height
block|}
block|,
block|{
operator|&
name|UpRight2GC
block|,
operator|&
name|UpRight2Xbm
block|,
name|upright2_bits
block|,
name|upright2_width
block|,
name|upright2_height
block|}
block|,
block|{
operator|&
name|DownLeft1GC
block|,
operator|&
name|DownLeft1Xbm
block|,
name|dwleft1_bits
block|,
name|dwleft1_width
block|,
name|dwleft1_height
block|}
block|,
block|{
operator|&
name|DownLeft2GC
block|,
operator|&
name|DownLeft2Xbm
block|,
name|dwleft2_bits
block|,
name|dwleft2_width
block|,
name|dwleft2_height
block|}
block|,
block|{
operator|&
name|DownRight1GC
block|,
operator|&
name|DownRight1Xbm
block|,
name|dwright1_bits
block|,
name|dwright1_width
block|,
name|dwright1_height
block|}
block|,
block|{
operator|&
name|DownRight2GC
block|,
operator|&
name|DownRight2Xbm
block|,
name|dwright2_bits
block|,
name|dwright2_width
block|,
name|dwright2_height
block|}
block|,
block|{
operator|&
name|UpTogi1GC
block|,
operator|&
name|UpTogi1Xbm
block|,
name|utogi1_bits
block|,
name|utogi1_width
block|,
name|utogi1_height
block|}
block|,
block|{
operator|&
name|UpTogi2GC
block|,
operator|&
name|UpTogi2Xbm
block|,
name|utogi2_bits
block|,
name|utogi2_width
block|,
name|utogi2_height
block|}
block|,
block|{
operator|&
name|DownTogi1GC
block|,
operator|&
name|DownTogi1Xbm
block|,
name|dtogi1_bits
block|,
name|dtogi1_width
block|,
name|dtogi1_height
block|}
block|,
block|{
operator|&
name|DownTogi2GC
block|,
operator|&
name|DownTogi2Xbm
block|,
name|dtogi2_bits
block|,
name|dtogi2_width
block|,
name|dtogi2_height
block|}
block|,
block|{
operator|&
name|LeftTogi1GC
block|,
operator|&
name|LeftTogi1Xbm
block|,
name|ltogi1_bits
block|,
name|ltogi1_width
block|,
name|ltogi1_height
block|}
block|,
block|{
operator|&
name|LeftTogi2GC
block|,
operator|&
name|LeftTogi2Xbm
block|,
name|ltogi2_bits
block|,
name|ltogi2_width
block|,
name|ltogi2_height
block|}
block|,
block|{
operator|&
name|RightTogi1GC
block|,
operator|&
name|RightTogi1Xbm
block|,
name|rtogi1_bits
block|,
name|rtogi1_width
block|,
name|rtogi1_height
block|}
block|,
block|{
operator|&
name|RightTogi2GC
block|,
operator|&
name|RightTogi2Xbm
block|,
name|rtogi2_bits
block|,
name|rtogi2_width
block|,
name|rtogi2_height
block|}
block|,
block|{
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|,
name|NULL
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_typedef
typedef|typedef
struct|struct
block|{
name|GC
modifier|*
name|TickEvenGCPtr
decl_stmt|;
name|GC
modifier|*
name|TickOddGCPtr
decl_stmt|;
block|}
name|Animation
typedef|;
end_typedef

begin_decl_stmt
name|Animation
name|AnimationPattern
index|[]
init|=
block|{
block|{
operator|&
name|Mati2GC
block|,
operator|&
name|Mati2GC
block|}
block|,
comment|/* NekoState == NEKO_STOP */
block|{
operator|&
name|Jare2GC
block|,
operator|&
name|Mati2GC
block|}
block|,
comment|/* NekoState == NEKO_JARE */
block|{
operator|&
name|Kaki1GC
block|,
operator|&
name|Kaki2GC
block|}
block|,
comment|/* NekoState == NEKO_KAKI */
block|{
operator|&
name|Mati3GC
block|,
operator|&
name|Mati3GC
block|}
block|,
comment|/* NekoState == NEKO_AKUBI */
block|{
operator|&
name|Sleep1GC
block|,
operator|&
name|Sleep2GC
block|}
block|,
comment|/* NekoState == NEKO_SLEEP */
block|{
operator|&
name|AwakeGC
block|,
operator|&
name|AwakeGC
block|}
block|,
comment|/* NekoState == NEKO_AWAKE */
block|{
operator|&
name|Up1GC
block|,
operator|&
name|Up2GC
block|}
block|,
comment|/* NekoState == NEKO_U_MOVE */
block|{
operator|&
name|Down1GC
block|,
operator|&
name|Down2GC
block|}
block|,
comment|/* NekoState == NEKO_D_MOVE */
block|{
operator|&
name|Left1GC
block|,
operator|&
name|Left2GC
block|}
block|,
comment|/* NekoState == NEKO_L_MOVE */
block|{
operator|&
name|Right1GC
block|,
operator|&
name|Right2GC
block|}
block|,
comment|/* NekoState == NEKO_R_MOVE */
block|{
operator|&
name|UpLeft1GC
block|,
operator|&
name|UpLeft2GC
block|}
block|,
comment|/* NekoState == NEKO_UL_MOVE */
block|{
operator|&
name|UpRight1GC
block|,
operator|&
name|UpRight2GC
block|}
block|,
comment|/* NekoState == NEKO_UR_MOVE */
block|{
operator|&
name|DownLeft1GC
block|,
operator|&
name|DownLeft2GC
block|}
block|,
comment|/* NekoState == NEKO_DL_MOVE */
block|{
operator|&
name|DownRight1GC
block|,
operator|&
name|DownRight2GC
block|}
block|,
comment|/* NekoState == NEKO_DR_MOVE */
block|{
operator|&
name|UpTogi1GC
block|,
operator|&
name|UpTogi2GC
block|}
block|,
comment|/* NekoState == NEKO_U_TOGI */
block|{
operator|&
name|DownTogi1GC
block|,
operator|&
name|DownTogi2GC
block|}
block|,
comment|/* NekoState == NEKO_D_TOGI */
block|{
operator|&
name|LeftTogi1GC
block|,
operator|&
name|LeftTogi2GC
block|}
block|,
comment|/* NekoState == NEKO_L_TOGI */
block|{
operator|&
name|RightTogi1GC
block|,
operator|&
name|RightTogi2GC
block|}
block|,
comment|/* NekoState == NEKO_R_TOGI */
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*--------------------------------------------------------------  *  *	0C5/31/93^504W%G!<%?!&GC =i4|2=  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|InitBitmapAndGCs
parameter_list|()
block|{
name|BitmapGCData
modifier|*
name|BitmapGCDataTablePtr
decl_stmt|;
name|XGCValues
name|theGCValues
decl_stmt|;
name|theGCValues
operator|.
name|function
operator|=
name|GXcopy
expr_stmt|;
name|theGCValues
operator|.
name|foreground
operator|=
name|BlackPixel
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
expr_stmt|;
name|theGCValues
operator|.
name|background
operator|=
name|WhitePixel
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
expr_stmt|;
name|theGCValues
operator|.
name|fill_style
operator|=
name|FillTiled
expr_stmt|;
for|for
control|(
name|BitmapGCDataTablePtr
operator|=
name|BitmapGCDataTable
init|;
name|BitmapGCDataTablePtr
operator|->
name|GCCreatePtr
operator|!=
name|NULL
condition|;
name|BitmapGCDataTablePtr
operator|++
control|)
block|{
operator|*
operator|(
name|BitmapGCDataTablePtr
operator|->
name|BitmapCreatePtr
operator|)
operator|=
name|XCreatePixmapFromBitmapData
argument_list|(
name|theDisplay
argument_list|,
name|RootWindow
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|,
name|BitmapGCDataTablePtr
operator|->
name|PixelPattern
argument_list|,
name|BitmapGCDataTablePtr
operator|->
name|PixelWidth
argument_list|,
name|BitmapGCDataTablePtr
operator|->
name|PixelHeight
argument_list|,
name|BlackPixel
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|,
name|WhitePixel
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|,
name|DefaultDepth
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|)
expr_stmt|;
name|theGCValues
operator|.
name|tile
operator|=
operator|*
operator|(
name|BitmapGCDataTablePtr
operator|->
name|BitmapCreatePtr
operator|)
expr_stmt|;
operator|*
operator|(
name|BitmapGCDataTablePtr
operator|->
name|GCCreatePtr
operator|)
operator|=
name|XCreateGC
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|GCFunction
operator||
name|GCForeground
operator||
name|GCBackground
operator||
name|GCTile
operator||
name|GCFillStyle
argument_list|,
operator|&
name|theGCValues
argument_list|)
expr_stmt|;
block|}
name|XFlush
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	%9%/%j!<%s4D6-=i4|2=  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|InitScreen
parameter_list|(
name|DisplayName
parameter_list|,
name|theGeometry
parameter_list|,
name|TitleName
parameter_list|,
name|iconicState
parameter_list|)
name|char
modifier|*
name|DisplayName
decl_stmt|;
name|char
modifier|*
name|theGeometry
decl_stmt|;
name|char
modifier|*
name|TitleName
decl_stmt|;
name|Bool
name|iconicState
decl_stmt|;
block|{
name|int
name|GeometryStatus
decl_stmt|;
name|XSetWindowAttributes
name|theWindowAttributes
decl_stmt|;
name|XSizeHints
name|theSizeHints
decl_stmt|;
name|unsigned
name|long
name|theWindowMask
decl_stmt|;
name|Pixmap
name|theIconPixmap
decl_stmt|;
name|Pixmap
name|theCursorSource
decl_stmt|;
name|Pixmap
name|theCursorMask
decl_stmt|;
name|XWMHints
name|theWMHints
decl_stmt|;
name|Window
name|theRoot
decl_stmt|;
name|Colormap
name|theColormap
decl_stmt|;
name|XColor
name|theWhiteColor
decl_stmt|,
name|theBlackColor
decl_stmt|,
name|theExactColor
decl_stmt|;
if|if
condition|(
operator|(
name|theDisplay
operator|=
name|XOpenDisplay
argument_list|(
name|DisplayName
argument_list|)
operator|)
operator|==
name|NULL
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: Can't open display"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
if|if
condition|(
name|DisplayName
operator|!=
name|NULL
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|" %s.\n"
argument_list|,
name|DisplayName
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|".\n"
argument_list|)
expr_stmt|;
block|}
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|theScreen
operator|=
name|DefaultScreen
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
name|theDepth
operator|=
name|DefaultDepth
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
expr_stmt|;
name|theBlackPixel
operator|=
name|BlackPixel
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
expr_stmt|;
name|theWhitePixel
operator|=
name|WhitePixel
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
expr_stmt|;
name|GeometryStatus
operator|=
name|XParseGeometry
argument_list|(
name|theGeometry
argument_list|,
operator|&
name|WindowPointX
argument_list|,
operator|&
name|WindowPointY
argument_list|,
operator|&
name|WindowWidth
argument_list|,
operator|&
name|WindowHeight
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|GeometryStatus
operator|&
name|XValue
operator|)
condition|)
block|{
name|WindowPointX
operator|=
name|DEFAULT_WIN_X
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
name|GeometryStatus
operator|&
name|YValue
operator|)
condition|)
block|{
name|WindowPointY
operator|=
name|DEFAULT_WIN_Y
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
name|GeometryStatus
operator|&
name|WidthValue
operator|)
condition|)
block|{
name|WindowWidth
operator|=
name|WINDOW_WIDTH
expr_stmt|;
block|}
if|if
condition|(
operator|!
operator|(
name|GeometryStatus
operator|&
name|HeightValue
operator|)
condition|)
block|{
name|WindowHeight
operator|=
name|WINDOW_HEIGHT
expr_stmt|;
block|}
name|theCursorSource
operator|=
name|XCreateBitmapFromData
argument_list|(
name|theDisplay
argument_list|,
name|RootWindow
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|,
name|cursor_bits
argument_list|,
name|cursor_width
argument_list|,
name|cursor_height
argument_list|)
expr_stmt|;
name|theCursorMask
operator|=
name|XCreateBitmapFromData
argument_list|(
name|theDisplay
argument_list|,
name|RootWindow
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|,
name|cursor_mask_bits
argument_list|,
name|cursor_mask_width
argument_list|,
name|cursor_mask_height
argument_list|)
expr_stmt|;
name|theColormap
operator|=
name|DefaultColormap
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|XAllocNamedColor
argument_list|(
name|theDisplay
argument_list|,
name|theColormap
argument_list|,
literal|"white"
argument_list|,
operator|&
name|theWhiteColor
argument_list|,
operator|&
name|theExactColor
argument_list|)
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: Can't XAllocNamedColor( \"white\" ).\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|!
name|XAllocNamedColor
argument_list|(
name|theDisplay
argument_list|,
name|theColormap
argument_list|,
literal|"black"
argument_list|,
operator|&
name|theBlackColor
argument_list|,
operator|&
name|theExactColor
argument_list|)
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: Can't XAllocNamedColor( \"black\" ).\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|theCursor
operator|=
name|XCreatePixmapCursor
argument_list|(
name|theDisplay
argument_list|,
name|theCursorSource
argument_list|,
name|theCursorMask
argument_list|,
operator|&
name|theBlackColor
argument_list|,
operator|&
name|theWhiteColor
argument_list|,
name|cursor_x_hot
argument_list|,
name|cursor_y_hot
argument_list|)
expr_stmt|;
name|theWindowAttributes
operator|.
name|border_pixel
operator|=
name|theBlackPixel
expr_stmt|;
name|theWindowAttributes
operator|.
name|background_pixel
operator|=
name|theWhitePixel
expr_stmt|;
name|theWindowAttributes
operator|.
name|cursor
operator|=
name|theCursor
expr_stmt|;
name|theWindowAttributes
operator|.
name|override_redirect
operator|=
name|False
expr_stmt|;
name|theWindowMask
operator|=
name|CWBackPixel
operator||
name|CWBorderPixel
operator||
name|CWCursor
operator||
name|CWOverrideRedirect
expr_stmt|;
name|theWindow
operator|=
name|XCreateWindow
argument_list|(
name|theDisplay
argument_list|,
name|RootWindow
argument_list|(
name|theDisplay
argument_list|,
name|theScreen
argument_list|)
argument_list|,
name|WindowPointX
argument_list|,
name|WindowPointY
argument_list|,
name|WindowWidth
argument_list|,
name|WindowHeight
argument_list|,
name|BorderWidth
argument_list|,
name|theDepth
argument_list|,
name|InputOutput
argument_list|,
name|CopyFromParent
argument_list|,
name|theWindowMask
argument_list|,
operator|&
name|theWindowAttributes
argument_list|)
expr_stmt|;
name|theIconPixmap
operator|=
name|XCreateBitmapFromData
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|icon_bits
argument_list|,
name|icon_width
argument_list|,
name|icon_height
argument_list|)
expr_stmt|;
name|theWMHints
operator|.
name|icon_pixmap
operator|=
name|theIconPixmap
expr_stmt|;
if|if
condition|(
name|iconicState
condition|)
block|{
name|theWMHints
operator|.
name|initial_state
operator|=
name|IconicState
expr_stmt|;
block|}
else|else
block|{
name|theWMHints
operator|.
name|initial_state
operator|=
name|NormalState
expr_stmt|;
block|}
name|theWMHints
operator|.
name|flags
operator|=
name|IconPixmapHint
operator||
name|StateHint
expr_stmt|;
name|XSetWMHints
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
operator|&
name|theWMHints
argument_list|)
expr_stmt|;
name|theSizeHints
operator|.
name|flags
operator|=
name|PPosition
operator||
name|PSize
expr_stmt|;
name|theSizeHints
operator|.
name|x
operator|=
name|WindowPointX
expr_stmt|;
name|theSizeHints
operator|.
name|y
operator|=
name|WindowPointY
expr_stmt|;
name|theSizeHints
operator|.
name|width
operator|=
name|WindowWidth
expr_stmt|;
name|theSizeHints
operator|.
name|height
operator|=
name|WindowHeight
expr_stmt|;
name|XSetNormalHints
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
operator|&
name|theSizeHints
argument_list|)
expr_stmt|;
if|if
condition|(
name|strlen
argument_list|(
name|TitleName
argument_list|)
operator|>=
literal|1
condition|)
block|{
name|XStoreName
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|TitleName
argument_list|)
expr_stmt|;
name|XSetIconName
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|TitleName
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|XStoreName
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|XSetIconName
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
block|}
name|XMapWindow
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
name|XGetGeometry
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
operator|&
name|theRoot
argument_list|,
operator|&
name|WindowPointX
argument_list|,
operator|&
name|WindowPointY
argument_list|,
operator|&
name|WindowWidth
argument_list|,
operator|&
name|WindowHeight
argument_list|,
operator|&
name|BorderWidth
argument_list|,
operator|&
name|theDepth
argument_list|)
expr_stmt|;
name|InitBitmapAndGCs
argument_list|()
expr_stmt|;
name|XSelectInput
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|EVENT_MASK1
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	%$%s%?!</usr/src/games/xneko/SCCS/s.xneko.ck  *  *	!!$3$N4X?t$r8F$V$H!"$"$k0lDj$N;~4VJV$C$F$3$J$/$J$k!#G-  *	$NF0:n%?%$%_%s%0D4@0$KMxMQ$9$k$3$H!#  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|Interval
parameter_list|()
block|{
name|pause
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	SCCS/s.xneko.c#728/%+%&%s%H=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|TickCount
parameter_list|()
block|{
if|if
condition|(
operator|++
name|NekoTickCount
operator|>=
name|MAX_TICK
condition|)
block|{
name|NekoTickCount
operator|=
literal|0
expr_stmt|;
block|}
if|if
condition|(
name|NekoTickCount
operator|%
literal|2
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|NekoStateCount
operator|<
name|MAX_TICK
condition|)
block|{
name|NekoStateCount
operator|++
expr_stmt|;
block|}
block|}
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G->uBV@_Dj  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|SetNekoState
parameter_list|(
name|SetValue
parameter_list|)
name|int
name|SetValue
decl_stmt|;
block|{
name|NekoTickCount
operator|=
literal|0
expr_stmt|;
name|NekoStateCount
operator|=
literal|0
expr_stmt|;
name|NekoState
operator|=
name|SetValue
expr_stmt|;
ifdef|#
directive|ifdef
name|DEBUG
switch|switch
condition|(
name|NekoState
condition|)
block|{
case|case
name|NEKO_STOP
case|:
case|case
name|NEKO_JARE
case|:
case|case
name|NEKO_KAKI
case|:
case|case
name|NEKO_AKUBI
case|:
case|case
name|NEKO_SLEEP
case|:
case|case
name|NEKO_U_TOGI
case|:
case|case
name|NEKO_D_TOGI
case|:
case|case
name|NEKO_L_TOGI
case|:
case|case
name|NEKO_R_TOGI
case|:
name|NekoMoveDx
operator|=
name|NekoMoveDy
operator|=
literal|0
expr_stmt|;
break|break;
default|default:
break|break;
block|}
endif|#
directive|endif
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-IA2h=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|DrawNeko
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|DrawGC
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|GC
name|DrawGC
decl_stmt|;
block|{
if|if
condition|(
operator|(
name|x
operator|!=
name|NekoLastX
operator|||
name|y
operator|!=
name|NekoLastY
operator|)
operator|&&
operator|(
name|EventState
operator|!=
name|DEBUG_LIST
operator|)
condition|)
block|{
name|XFillRectangle
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|SpaceGC
argument_list|,
name|NekoLastX
argument_list|,
name|NekoLastY
argument_list|,
name|BITMAP_WIDTH
argument_list|,
name|BITMAP_HEIGHT
argument_list|)
expr_stmt|;
block|}
name|XSetTSOrigin
argument_list|(
name|theDisplay
argument_list|,
name|DrawGC
argument_list|,
name|x
argument_list|,
name|y
argument_list|)
expr_stmt|;
name|XFillRectangle
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|DrawGC
argument_list|,
name|x
argument_list|,
name|y
argument_list|,
name|BITMAP_WIDTH
argument_list|,
name|BITMAP_HEIGHT
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
name|NekoLastX
operator|=
name|x
expr_stmt|;
name|NekoLastY
operator|=
name|y
expr_stmt|;
name|NekoLastGC
operator|=
name|DrawGC
expr_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-:FIA2h=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|RedrawNeko
parameter_list|()
block|{
name|XFillRectangle
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|NekoLastGC
argument_list|,
name|NekoLastX
argument_list|,
name|NekoLastY
argument_list|,
name|BITMAP_WIDTH
argument_list|,
name|BITMAP_HEIGHT
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0\F0J}K!7hDj  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|NekoDirection
parameter_list|()
block|{
name|int
name|NewState
decl_stmt|;
name|double
name|LargeX
decl_stmt|,
name|LargeY
decl_stmt|;
name|double
name|Length
decl_stmt|;
name|double
name|SinTheta
decl_stmt|;
if|if
condition|(
name|NekoMoveDx
operator|==
literal|0
operator|&&
name|NekoMoveDy
operator|==
literal|0
condition|)
block|{
name|NewState
operator|=
name|NEKO_STOP
expr_stmt|;
block|}
else|else
block|{
name|LargeX
operator|=
operator|(
name|double
operator|)
name|NekoMoveDx
expr_stmt|;
name|LargeY
operator|=
call|(
name|double
call|)
argument_list|(
operator|-
name|NekoMoveDy
argument_list|)
expr_stmt|;
name|Length
operator|=
name|sqrt
argument_list|(
name|LargeX
operator|*
name|LargeX
operator|+
name|LargeY
operator|*
name|LargeY
argument_list|)
expr_stmt|;
name|SinTheta
operator|=
name|LargeY
operator|/
name|Length
expr_stmt|;
if|if
condition|(
name|NekoMoveDx
operator|>
literal|0
condition|)
block|{
if|if
condition|(
name|SinTheta
operator|>
name|SinPiPer8Times3
condition|)
block|{
name|NewState
operator|=
name|NEKO_U_MOVE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|SinTheta
operator|<=
name|SinPiPer8Times3
operator|)
operator|&&
operator|(
name|SinTheta
operator|>
name|SinPiPer8
operator|)
condition|)
block|{
name|NewState
operator|=
name|NEKO_UR_MOVE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|SinTheta
operator|<=
name|SinPiPer8
operator|)
operator|&&
operator|(
name|SinTheta
operator|>
operator|-
operator|(
name|SinPiPer8
operator|)
operator|)
condition|)
block|{
name|NewState
operator|=
name|NEKO_R_MOVE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|SinTheta
operator|<=
operator|-
operator|(
name|SinPiPer8
operator|)
operator|)
operator|&&
operator|(
name|SinTheta
operator|>
operator|-
operator|(
name|SinPiPer8Times3
operator|)
operator|)
condition|)
block|{
name|NewState
operator|=
name|NEKO_DR_MOVE
expr_stmt|;
block|}
else|else
block|{
name|NewState
operator|=
name|NEKO_D_MOVE
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|SinTheta
operator|>
name|SinPiPer8Times3
condition|)
block|{
name|NewState
operator|=
name|NEKO_U_MOVE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|SinTheta
operator|<=
name|SinPiPer8Times3
operator|)
operator|&&
operator|(
name|SinTheta
operator|>
name|SinPiPer8
operator|)
condition|)
block|{
name|NewState
operator|=
name|NEKO_UL_MOVE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|SinTheta
operator|<=
name|SinPiPer8
operator|)
operator|&&
operator|(
name|SinTheta
operator|>
operator|-
operator|(
name|SinPiPer8
operator|)
operator|)
condition|)
block|{
name|NewState
operator|=
name|NEKO_L_MOVE
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|SinTheta
operator|<=
operator|-
operator|(
name|SinPiPer8
operator|)
operator|)
operator|&&
operator|(
name|SinTheta
operator|>
operator|-
operator|(
name|SinPiPer8Times3
operator|)
operator|)
condition|)
block|{
name|NewState
operator|=
name|NEKO_DL_MOVE
expr_stmt|;
block|}
else|else
block|{
name|NewState
operator|=
name|NEKO_D_MOVE
expr_stmt|;
block|}
block|}
block|}
if|if
condition|(
name|NekoState
operator|!=
name|NewState
condition|)
block|{
name|SetNekoState
argument_list|(
name|NewState
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-JI$V$D$+$jH=Dj  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|Bool
name|IsWindowOver
parameter_list|()
block|{
name|Bool
name|ReturnValue
init|=
name|False
decl_stmt|;
if|if
condition|(
name|NekoY
operator|<=
literal|0
condition|)
block|{
name|NekoY
operator|=
literal|0
expr_stmt|;
name|ReturnValue
operator|=
name|True
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoY
operator|>=
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
condition|)
block|{
name|NekoY
operator|=
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
expr_stmt|;
name|ReturnValue
operator|=
name|True
expr_stmt|;
block|}
if|if
condition|(
name|NekoX
operator|<=
literal|0
condition|)
block|{
name|NekoX
operator|=
literal|0
expr_stmt|;
name|ReturnValue
operator|=
name|True
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoX
operator|>=
name|WindowWidth
operator|-
name|BITMAP_WIDTH
condition|)
block|{
name|NekoX
operator|=
name|WindowWidth
operator|-
name|BITMAP_WIDTH
expr_stmt|;
name|ReturnValue
operator|=
name|True
expr_stmt|;
block|}
return|return
operator|(
name|ReturnValue
operator|)
return|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0\F0>u67H=Dj  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|Bool
name|IsNekoDontMove
parameter_list|()
block|{
if|if
condition|(
name|NekoX
operator|==
name|NekoLastX
operator|&&
name|NekoY
operator|==
name|NekoLastY
condition|)
block|{
return|return
operator|(
name|True
operator|)
return|;
block|}
else|else
block|{
return|return
operator|(
name|False
operator|)
return|;
block|}
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0\F03+;OH=Dj  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|Bool
name|IsNekoMoveStart
parameter_list|()
block|{
ifndef|#
directive|ifndef
name|DEBUG
if|if
condition|(
operator|(
name|PrevMouseX
operator|>=
name|MouseX
operator|-
name|IDLE_SPACE
operator|&&
name|PrevMouseX
operator|<=
name|MouseX
operator|+
name|IDLE_SPACE
operator|)
operator|&&
operator|(
name|PrevMouseY
operator|>=
name|MouseY
operator|-
name|IDLE_SPACE
operator|&&
name|PrevMouseY
operator|<=
name|MouseY
operator|+
name|IDLE_SPACE
operator|)
condition|)
block|{
return|return
operator|(
name|False
operator|)
return|;
block|}
else|else
block|{
return|return
operator|(
name|True
operator|)
return|;
block|}
else|#
directive|else
if|if
condition|(
name|NekoMoveDx
operator|==
literal|0
operator|&&
name|NekoMoveDy
operator|==
literal|0
condition|)
block|{
return|return
operator|(
name|False
operator|)
return|;
block|}
else|else
block|{
return|return
operator|(
name|True
operator|)
return|;
block|}
endif|#
directive|endif
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0\F0 dx, dy 7W;;  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|CalcDxDy
parameter_list|()
block|{
name|Window
name|QueryRoot
decl_stmt|,
name|QueryChild
decl_stmt|;
name|int
name|AbsoluteX
decl_stmt|,
name|AbsoluteY
decl_stmt|;
name|int
name|RelativeX
decl_stmt|,
name|RelativeY
decl_stmt|;
name|unsigned
name|int
name|ModKeyMask
decl_stmt|;
name|double
name|LargeX
decl_stmt|,
name|LargeY
decl_stmt|;
name|double
name|DoubleLength
decl_stmt|,
name|Length
decl_stmt|;
name|XQueryPointer
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
operator|&
name|QueryRoot
argument_list|,
operator|&
name|QueryChild
argument_list|,
operator|&
name|AbsoluteX
argument_list|,
operator|&
name|AbsoluteY
argument_list|,
operator|&
name|RelativeX
argument_list|,
operator|&
name|RelativeY
argument_list|,
operator|&
name|ModKeyMask
argument_list|)
expr_stmt|;
name|PrevMouseX
operator|=
name|MouseX
expr_stmt|;
name|PrevMouseY
operator|=
name|MouseY
expr_stmt|;
name|MouseX
operator|=
name|RelativeX
expr_stmt|;
name|MouseY
operator|=
name|RelativeY
expr_stmt|;
name|LargeX
operator|=
call|(
name|double
call|)
argument_list|(
name|MouseX
operator|-
name|NekoX
operator|-
name|BITMAP_WIDTH
operator|/
literal|2
argument_list|)
expr_stmt|;
name|LargeY
operator|=
call|(
name|double
call|)
argument_list|(
name|MouseY
operator|-
name|NekoY
operator|-
name|BITMAP_HEIGHT
argument_list|)
expr_stmt|;
name|DoubleLength
operator|=
name|LargeX
operator|*
name|LargeX
operator|+
name|LargeY
operator|*
name|LargeY
expr_stmt|;
if|if
condition|(
name|DoubleLength
operator|!=
operator|(
name|double
operator|)
literal|0
condition|)
block|{
name|Length
operator|=
name|sqrt
argument_list|(
name|DoubleLength
argument_list|)
expr_stmt|;
if|if
condition|(
name|Length
operator|<=
name|NekoSpeed
condition|)
block|{
name|NekoMoveDx
operator|=
operator|(
name|int
operator|)
name|LargeX
expr_stmt|;
name|NekoMoveDy
operator|=
operator|(
name|int
operator|)
name|LargeY
expr_stmt|;
block|}
else|else
block|{
name|NekoMoveDx
operator|=
call|(
name|int
call|)
argument_list|(
operator|(
name|NekoSpeed
operator|*
name|LargeX
operator|)
operator|/
name|Length
argument_list|)
expr_stmt|;
name|NekoMoveDy
operator|=
call|(
name|int
call|)
argument_list|(
operator|(
name|NekoSpeed
operator|*
name|LargeY
operator|)
operator|/
name|Length
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|NekoMoveDx
operator|=
name|NekoMoveDy
operator|=
literal|0
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	F0:n2r@OG-IA2h=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|NekoThinkDraw
parameter_list|()
block|{
ifndef|#
directive|ifndef
name|DEBUG
name|CalcDxDy
argument_list|()
expr_stmt|;
endif|#
directive|endif
if|if
condition|(
name|NekoState
operator|!=
name|NEKO_SLEEP
condition|)
block|{
name|DrawNeko
argument_list|(
name|NekoX
argument_list|,
name|NekoY
argument_list|,
name|NekoTickCount
operator|%
literal|2
operator|==
literal|0
condition|?
operator|*
operator|(
name|AnimationPattern
index|[
name|NekoState
index|]
operator|.
name|TickEvenGCPtr
operator|)
else|:
operator|*
operator|(
name|AnimationPattern
index|[
name|NekoState
index|]
operator|.
name|TickOddGCPtr
operator|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|DrawNeko
argument_list|(
name|NekoX
argument_list|,
name|NekoY
argument_list|,
name|NekoTickCount
operator|%
literal|8
operator|<=
literal|3
condition|?
operator|*
operator|(
name|AnimationPattern
index|[
name|NekoState
index|]
operator|.
name|TickEvenGCPtr
operator|)
else|:
operator|*
operator|(
name|AnimationPattern
index|[
name|NekoState
index|]
operator|.
name|TickOddGCPtr
operator|)
argument_list|)
expr_stmt|;
block|}
name|TickCount
argument_list|()
expr_stmt|;
switch|switch
condition|(
name|NekoState
condition|)
block|{
case|case
name|NEKO_STOP
case|:
if|if
condition|(
name|IsNekoMoveStart
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_AWAKE
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|NekoStateCount
operator|<
name|NEKO_STOP_TIME
condition|)
block|{
break|break;
block|}
if|if
condition|(
name|NekoMoveDx
operator|<
literal|0
operator|&&
name|NekoX
operator|<=
literal|0
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_L_TOGI
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoMoveDx
operator|>
literal|0
operator|&&
name|NekoX
operator|>=
name|WindowWidth
operator|-
name|BITMAP_WIDTH
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_R_TOGI
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoMoveDy
operator|<
literal|0
operator|&&
name|NekoY
operator|<=
literal|0
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_U_TOGI
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoMoveDy
operator|>
literal|0
operator|&&
name|NekoY
operator|>=
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_D_TOGI
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|SetNekoState
argument_list|(
name|NEKO_JARE
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
name|NEKO_JARE
case|:
if|if
condition|(
name|IsNekoMoveStart
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_AWAKE
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|NekoStateCount
operator|<
name|NEKO_JARE_TIME
condition|)
block|{
break|break;
block|}
name|SetNekoState
argument_list|(
name|NEKO_KAKI
argument_list|)
expr_stmt|;
break|break;
case|case
name|NEKO_KAKI
case|:
if|if
condition|(
name|IsNekoMoveStart
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_AWAKE
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|NekoStateCount
operator|<
name|NEKO_KAKI_TIME
condition|)
block|{
break|break;
block|}
name|SetNekoState
argument_list|(
name|NEKO_AKUBI
argument_list|)
expr_stmt|;
break|break;
case|case
name|NEKO_AKUBI
case|:
if|if
condition|(
name|IsNekoMoveStart
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_AWAKE
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|NekoStateCount
operator|<
name|NEKO_AKUBI_TIME
condition|)
block|{
break|break;
block|}
name|SetNekoState
argument_list|(
name|NEKO_SLEEP
argument_list|)
expr_stmt|;
break|break;
case|case
name|NEKO_SLEEP
case|:
if|if
condition|(
name|IsNekoMoveStart
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_AWAKE
argument_list|)
expr_stmt|;
break|break;
block|}
break|break;
case|case
name|NEKO_AWAKE
case|:
if|if
condition|(
name|NekoStateCount
operator|<
name|NEKO_AWAKE_TIME
condition|)
block|{
break|break;
block|}
name|NekoDirection
argument_list|()
expr_stmt|;
comment|/* G-$,F0$/8~$-$r5a$a$k */
break|break;
case|case
name|NEKO_U_MOVE
case|:
case|case
name|NEKO_D_MOVE
case|:
case|case
name|NEKO_L_MOVE
case|:
case|case
name|NEKO_R_MOVE
case|:
case|case
name|NEKO_UL_MOVE
case|:
case|case
name|NEKO_UR_MOVE
case|:
case|case
name|NEKO_DL_MOVE
case|:
case|case
name|NEKO_DR_MOVE
case|:
name|NekoX
operator|+=
name|NekoMoveDx
expr_stmt|;
name|NekoY
operator|+=
name|NekoMoveDy
expr_stmt|;
name|NekoDirection
argument_list|()
expr_stmt|;
if|if
condition|(
name|IsWindowOver
argument_list|()
condition|)
block|{
if|if
condition|(
name|IsNekoDontMove
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_STOP
argument_list|)
expr_stmt|;
block|}
block|}
break|break;
case|case
name|NEKO_U_TOGI
case|:
case|case
name|NEKO_D_TOGI
case|:
case|case
name|NEKO_L_TOGI
case|:
case|case
name|NEKO_R_TOGI
case|:
if|if
condition|(
name|IsNekoMoveStart
argument_list|()
condition|)
block|{
name|SetNekoState
argument_list|(
name|NEKO_AWAKE
argument_list|)
expr_stmt|;
break|break;
block|}
if|if
condition|(
name|NekoStateCount
operator|<
name|NEKO_TOGI_TIME
condition|)
block|{
break|break;
block|}
name|SetNekoState
argument_list|(
name|NEKO_KAKI
argument_list|)
expr_stmt|;
break|break;
default|default:
comment|/* Internal Error */
name|SetNekoState
argument_list|(
name|NEKO_STOP
argument_list|)
expr_stmt|;
break|break;
block|}
name|Interval
argument_list|()
expr_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|DEBUG
end_ifdef

begin_comment
comment|/*--------------------------------------------------------------  *  *	%-%c%i%/%?!<0lMwI=<(!J5/31/93P11500MQ!K  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|DisplayCharacters
parameter_list|()
block|{
name|int
name|Index
decl_stmt|;
name|int
name|x
decl_stmt|,
name|y
decl_stmt|;
for|for
control|(
name|Index
operator|=
literal|0
operator|,
name|x
operator|=
literal|0
operator|,
name|y
operator|=
literal|0
init|;
name|BitmapGCDataTable
index|[
name|Index
index|]
operator|.
name|GCCreatePtr
operator|!=
name|NULL
condition|;
name|Index
operator|++
control|)
block|{
name|DrawNeko
argument_list|(
name|x
argument_list|,
name|y
argument_list|,
operator|*
operator|(
name|BitmapGCDataTable
index|[
name|Index
index|]
operator|.
name|GCCreatePtr
operator|)
argument_list|)
expr_stmt|;
name|XFlush
argument_list|(
name|theDisplay
argument_list|)
expr_stmt|;
name|x
operator|+=
name|BITMAP_WIDTH
expr_stmt|;
if|if
condition|(
name|x
operator|>
name|WindowWidth
operator|-
name|BITMAP_WIDTH
condition|)
block|{
name|x
operator|=
literal|0
expr_stmt|;
name|y
operator|+=
name|BITMAP_HEIGHT
expr_stmt|;
if|if
condition|(
name|y
operator|>
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
condition|)
block|{
break|break;
block|}
block|}
block|}
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* DEBUG */
end_comment

begin_comment
comment|/*--------------------------------------------------------------  *  *	%-!<%$s%H=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|Bool
name|ProcessKeyPress
parameter_list|(
name|theKeyEvent
parameter_list|)
name|XKeyEvent
modifier|*
name|theKeyEvent
decl_stmt|;
block|{
name|int
name|Length
decl_stmt|;
name|int
name|theKeyBufferMaxLen
init|=
name|AVAIL_KEYBUF
decl_stmt|;
name|char
name|theKeyBuffer
index|[
name|AVAIL_KEYBUF
operator|+
literal|1
index|]
decl_stmt|;
name|KeySym
name|theKeySym
decl_stmt|;
name|XComposeStatus
name|theComposeStatus
decl_stmt|;
name|Bool
name|ReturnState
decl_stmt|;
name|ReturnState
operator|=
name|True
expr_stmt|;
name|Length
operator|=
name|XLookupString
argument_list|(
name|theKeyEvent
argument_list|,
name|theKeyBuffer
argument_list|,
name|theKeyBufferMaxLen
argument_list|,
operator|&
name|theKeySym
argument_list|,
operator|&
name|theComposeStatus
argument_list|)
expr_stmt|;
if|if
condition|(
name|Length
operator|>
literal|0
condition|)
block|{
switch|switch
condition|(
name|theKeyBuffer
index|[
literal|0
index|]
condition|)
block|{
case|case
literal|'q'
case|:
case|case
literal|'Q'
case|:
if|if
condition|(
name|theKeyEvent
operator|->
name|state
operator|&
name|Mod1Mask
condition|)
block|{
comment|/* META (Alt) %-!< */
name|ReturnState
operator|=
name|False
expr_stmt|;
block|}
break|break;
default|default:
break|break;
block|}
block|}
ifdef|#
directive|ifdef
name|DEBUG
if|if
condition|(
name|EventState
operator|==
name|DEBUG_MOVE
condition|)
block|{
switch|switch
condition|(
name|theKeySym
condition|)
block|{
case|case
name|XK_KP_1
case|:
name|NekoMoveDx
operator|=
operator|-
call|(
name|int
call|)
argument_list|(
name|NekoSpeed
operator|/
name|sqrt
argument_list|(
operator|(
name|double
operator|)
literal|2
argument_list|)
argument_list|)
expr_stmt|;
name|NekoMoveDy
operator|=
operator|-
name|NekoMoveDx
expr_stmt|;
break|break;
case|case
name|XK_KP_2
case|:
name|NekoMoveDx
operator|=
literal|0
expr_stmt|;
name|NekoMoveDy
operator|=
operator|(
name|int
operator|)
name|NekoSpeed
expr_stmt|;
break|break;
case|case
name|XK_KP_3
case|:
name|NekoMoveDx
operator|=
call|(
name|int
call|)
argument_list|(
name|NekoSpeed
operator|/
name|sqrt
argument_list|(
operator|(
name|double
operator|)
literal|2
argument_list|)
argument_list|)
expr_stmt|;
name|NekoMoveDy
operator|=
name|NekoMoveDx
expr_stmt|;
break|break;
case|case
name|XK_KP_4
case|:
name|NekoMoveDx
operator|=
operator|-
operator|(
name|int
operator|)
name|NekoSpeed
expr_stmt|;
name|NekoMoveDy
operator|=
literal|0
expr_stmt|;
break|break;
case|case
name|XK_KP_5
case|:
name|NekoMoveDx
operator|=
literal|0
expr_stmt|;
name|NekoMoveDy
operator|=
literal|0
expr_stmt|;
break|break;
case|case
name|XK_KP_6
case|:
name|NekoMoveDx
operator|=
operator|(
name|int
operator|)
name|NekoSpeed
expr_stmt|;
name|NekoMoveDy
operator|=
literal|0
expr_stmt|;
break|break;
case|case
name|XK_KP_7
case|:
name|NekoMoveDx
operator|=
operator|-
call|(
name|int
call|)
argument_list|(
name|NekoSpeed
operator|/
name|sqrt
argument_list|(
operator|(
name|double
operator|)
literal|2
argument_list|)
argument_list|)
expr_stmt|;
name|NekoMoveDy
operator|=
name|NekoMoveDx
expr_stmt|;
break|break;
case|case
name|XK_KP_8
case|:
name|NekoMoveDx
operator|=
literal|0
expr_stmt|;
name|NekoMoveDy
operator|=
operator|-
operator|(
name|int
operator|)
name|NekoSpeed
expr_stmt|;
break|break;
case|case
name|XK_KP_9
case|:
name|NekoMoveDx
operator|=
call|(
name|int
call|)
argument_list|(
name|NekoSpeed
operator|/
name|sqrt
argument_list|(
operator|(
name|double
operator|)
literal|2
argument_list|)
argument_list|)
expr_stmt|;
name|NekoMoveDy
operator|=
operator|-
name|NekoMoveDx
expr_stmt|;
break|break;
block|}
block|}
endif|#
directive|endif
return|return
operator|(
name|ReturnState
operator|)
return|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0LCVD4@0  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|NekoAdjust
parameter_list|()
block|{
if|if
condition|(
name|NekoX
operator|<
literal|0
condition|)
block|{
name|NekoX
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoX
operator|>
name|WindowWidth
operator|-
name|BITMAP_WIDTH
condition|)
block|{
name|NekoX
operator|=
name|WindowWidth
operator|-
name|BITMAP_WIDTH
expr_stmt|;
block|}
if|if
condition|(
name|NekoY
operator|<
literal|0
condition|)
block|{
name|NekoY
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|NekoY
operator|>
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
condition|)
block|{
name|NekoY
operator|=
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
expr_stmt|;
block|}
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	%$s%H=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|Bool
name|ProcessEvent
parameter_list|()
block|{
name|XEvent
name|theEvent
decl_stmt|;
name|Bool
name|ContinueState
init|=
name|True
decl_stmt|;
switch|switch
condition|(
name|EventState
condition|)
block|{
case|case
name|NORMAL_STATE
case|:
while|while
condition|(
name|XCheckMaskEvent
argument_list|(
name|theDisplay
argument_list|,
name|EVENT_MASK1
argument_list|,
operator|&
name|theEvent
argument_list|)
condition|)
block|{
switch|switch
condition|(
name|theEvent
operator|.
name|type
condition|)
block|{
case|case
name|ConfigureNotify
case|:
name|WindowWidth
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|width
expr_stmt|;
name|WindowHeight
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|height
expr_stmt|;
name|WindowPointX
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|x
expr_stmt|;
name|WindowPointY
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|y
expr_stmt|;
name|BorderWidth
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|border_width
expr_stmt|;
name|NekoAdjust
argument_list|()
expr_stmt|;
break|break;
case|case
name|Expose
case|:
if|if
condition|(
name|theEvent
operator|.
name|xexpose
operator|.
name|count
operator|==
literal|0
condition|)
block|{
name|RedrawNeko
argument_list|()
expr_stmt|;
block|}
break|break;
case|case
name|MapNotify
case|:
name|RedrawNeko
argument_list|()
expr_stmt|;
break|break;
case|case
name|KeyPress
case|:
name|ContinueState
operator|=
name|ProcessKeyPress
argument_list|(
operator|&
name|theEvent
operator|.
name|xkey
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|ContinueState
condition|)
block|{
return|return
operator|(
name|ContinueState
operator|)
return|;
block|}
break|break;
default|default:
comment|/* Unknown Event */
break|break;
block|}
block|}
break|break;
ifdef|#
directive|ifdef
name|DEBUG
case|case
name|DEBUG_LIST
case|:
name|XNextEvent
argument_list|(
name|theDisplay
argument_list|,
operator|&
name|theEvent
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|theEvent
operator|.
name|type
condition|)
block|{
case|case
name|ConfigureNotify
case|:
name|WindowWidth
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|width
expr_stmt|;
name|WindowHeight
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|height
expr_stmt|;
name|WindowPointX
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|x
expr_stmt|;
name|WindowPointY
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|y
expr_stmt|;
name|BorderWidth
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|border_width
expr_stmt|;
break|break;
case|case
name|Expose
case|:
if|if
condition|(
name|theEvent
operator|.
name|xexpose
operator|.
name|count
operator|==
literal|0
condition|)
block|{
name|DisplayCharacters
argument_list|()
expr_stmt|;
block|}
break|break;
case|case
name|MapNotify
case|:
name|DisplayCharacters
argument_list|()
expr_stmt|;
break|break;
case|case
name|KeyPress
case|:
name|ContinueState
operator|=
name|ProcessKeyPress
argument_list|(
operator|&
name|theEvent
argument_list|)
expr_stmt|;
break|break;
default|default:
comment|/* Unknown Event */
break|break;
block|}
break|break;
case|case
name|DEBUG_MOVE
case|:
while|while
condition|(
name|XCheckMaskEvent
argument_list|(
name|theDisplay
argument_list|,
name|EVENT_MASK1
argument_list|,
operator|&
name|theEvent
argument_list|)
condition|)
block|{
switch|switch
condition|(
name|theEvent
operator|.
name|type
condition|)
block|{
case|case
name|ConfigureNotify
case|:
name|WindowWidth
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|width
expr_stmt|;
name|WindowHeight
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|height
expr_stmt|;
name|WindowPointX
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|x
expr_stmt|;
name|WindowPointY
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|y
expr_stmt|;
name|BorderWidth
operator|=
name|theEvent
operator|.
name|xconfigure
operator|.
name|border_width
expr_stmt|;
name|NekoAdjust
argument_list|()
expr_stmt|;
break|break;
case|case
name|Expose
case|:
if|if
condition|(
name|theEvent
operator|.
name|xexpose
operator|.
name|count
operator|==
literal|0
condition|)
block|{
name|RedrawNeko
argument_list|()
expr_stmt|;
block|}
break|break;
case|case
name|MapNotify
case|:
name|RedrawNeko
argument_list|()
expr_stmt|;
break|break;
case|case
name|KeyPress
case|:
name|ContinueState
operator|=
name|ProcessKeyPress
argument_list|(
operator|&
name|theEvent
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
name|ContinueState
condition|)
block|{
return|return
operator|(
name|ContinueState
operator|)
return|;
block|}
break|break;
default|default:
comment|/* Unknown Event */
break|break;
block|}
block|}
break|break;
endif|#
directive|endif
default|default:
comment|/* Internal Error */
break|break;
block|}
return|return
operator|(
name|ContinueState
operator|)
return|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|ProcessNeko
parameter_list|()
block|{
name|struct
name|itimerval
name|Value
decl_stmt|;
comment|/* 4D6-$N=i4|2= */
name|EventState
operator|=
name|NORMAL_STATE
expr_stmt|;
comment|/* G-$N=i4|2= */
name|NekoX
operator|=
operator|(
name|WindowWidth
operator|-
name|BITMAP_WIDTH
operator|/
literal|2
operator|)
operator|/
literal|2
expr_stmt|;
name|NekoY
operator|=
operator|(
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
operator|/
literal|2
operator|)
operator|/
literal|2
expr_stmt|;
name|NekoLastX
operator|=
name|NekoX
expr_stmt|;
name|NekoLastY
operator|=
name|NekoY
expr_stmt|;
name|SetNekoState
argument_list|(
name|NEKO_STOP
argument_list|)
expr_stmt|;
comment|/* %?%$%^!<@_Dj */
name|timerclear
argument_list|(
operator|&
name|Value
operator|.
name|it_interval
argument_list|)
expr_stmt|;
name|timerclear
argument_list|(
operator|&
name|Value
operator|.
name|it_value
argument_list|)
expr_stmt|;
name|Value
operator|.
name|it_interval
operator|.
name|tv_usec
operator|=
name|IntervalTime
expr_stmt|;
name|Value
operator|.
name|it_value
operator|.
name|tv_usec
operator|=
name|IntervalTime
expr_stmt|;
name|setitimer
argument_list|(
name|ITIMER_REAL
argument_list|,
operator|&
name|Value
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* %a%$%s=hM} */
do|do
block|{
name|NekoThinkDraw
argument_list|()
expr_stmt|;
block|}
do|while
condition|(
name|ProcessEvent
argument_list|()
condition|)
do|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|DEBUG
end_ifdef

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0lMw!J5/31/93P14460MQ!K  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|NekoList
parameter_list|()
block|{
name|EventState
operator|=
name|DEBUG_LIST
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"G-0lMw$rI=<($7$^$9!#(Quit !D Alt-Q)\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|XSelectInput
argument_list|(
name|theDisplay
argument_list|,
name|theWindow
argument_list|,
name|EVENT_MASK2
argument_list|)
expr_stmt|;
while|while
condition|(
name|ProcessEvent
argument_list|()
condition|)
empty_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	G-0\F0SCCS/s.xneko.c9%H!J5/31/93P14670MQ!K  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|NekoMoveTest
parameter_list|()
block|{
name|struct
name|itimerval
name|Value
decl_stmt|;
comment|/* 4D6-$N=i4|2= */
name|EventState
operator|=
name|DEBUG_MOVE
expr_stmt|;
comment|/* G-$N=i4|2= */
name|NekoX
operator|=
operator|(
name|WindowWidth
operator|-
name|BITMAP_WIDTH
operator|/
literal|2
operator|)
operator|/
literal|2
expr_stmt|;
name|NekoY
operator|=
operator|(
name|WindowHeight
operator|-
name|BITMAP_HEIGHT
operator|/
literal|2
operator|)
operator|/
literal|2
expr_stmt|;
name|NekoLastX
operator|=
name|NekoX
expr_stmt|;
name|NekoLastY
operator|=
name|NekoY
expr_stmt|;
name|SetNekoState
argument_list|(
name|NEKO_STOP
argument_list|)
expr_stmt|;
comment|/* %?%$%^!<@_Dj */
name|timerclear
argument_list|(
operator|&
name|Value
operator|.
name|it_interval
argument_list|)
expr_stmt|;
name|timerclear
argument_list|(
operator|&
name|Value
operator|.
name|it_value
argument_list|)
expr_stmt|;
name|Value
operator|.
name|it_interval
operator|.
name|tv_usec
operator|=
name|IntervalTime
expr_stmt|;
name|Value
operator|.
name|it_value
operator|.
name|tv_usec
operator|=
name|IntervalTime
expr_stmt|;
name|setitimer
argument_list|(
name|ITIMER_REAL
argument_list|,
operator|&
name|Value
argument_list|,
literal|0
argument_list|)
expr_stmt|;
comment|/* %a%$%s=hM} */
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"G-$N0\F0SCCS/s.xneko.c9%H$r9T$$$^$9!#(Quit !D Alt-Q)\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\t%-!<May 31, 1993C%I>e$NSCCS/s.xneko.cs%-!<$GG-$r0\F0$5$;$F2<$5$$!#\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\t(M-8z$J%-!<$O#1!A#9$G$9!#)\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
do|do
block|{
name|NekoThinkDraw
argument_list|()
expr_stmt|;
block|}
do|while
condition|(
name|ProcessEvent
argument_list|()
condition|)
do|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	%a%K%e!<=hM}!J5/31/93P15170MQ!K  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|ProcessDebugMenu
parameter_list|()
block|{
name|int
name|UserSelectNo
init|=
literal|0
decl_stmt|;
name|char
name|UserAnswer
index|[
name|BUFSIZ
index|]
decl_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"!Zxneko 5/31/93P15280%a%K%e!<![\n"
argument_list|)
expr_stmt|;
while|while
condition|(
operator|!
operator|(
name|UserSelectNo
operator|>=
literal|1
operator|&&
name|UserSelectNo
operator|<=
literal|2
operator|)
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\t1)!!G-%-%c%i%/%?!<0lMwI=<(\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\t2)!!G-0\F0SCCS/s.xneko.c9%H\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Select: "
argument_list|)
expr_stmt|;
name|fgets
argument_list|(
name|UserAnswer
argument_list|,
sizeof|sizeof
argument_list|(
name|UserAnswer
argument_list|)
argument_list|,
name|stdin
argument_list|)
expr_stmt|;
name|UserSelectNo
operator|=
name|atoi
argument_list|(
name|UserAnswer
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|UserSelectNo
operator|>=
literal|1
operator|&&
name|UserSelectNo
operator|<=
literal|2
operator|)
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"@5$7$$HV9f$rA*Br$7$F2<$5$$!#\n"
argument_list|)
expr_stmt|;
block|}
block|}
switch|switch
condition|(
name|UserSelectNo
condition|)
block|{
case|case
literal|1
case|:
comment|/* G-%-%c%i%/%?!<0lMwI=<( */
name|NekoList
argument_list|()
expr_stmt|;
break|break;
case|case
literal|2
case|:
comment|/* G-0\F0SCCS/s.xneko.c9%H */
name|NekoMoveTest
argument_list|()
expr_stmt|;
break|break;
default|default:
comment|/* Internal Error */
break|break;
block|}
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"SCCS/s.xneko.c9%H=*N;!#\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* DEBUG */
end_comment

begin_comment
comment|/*--------------------------------------------------------------  *  *	SIGALRM %7%0%J%k=hM}  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|NullFunction
parameter_list|()
block|{
comment|/* No Operation */
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	Usage  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|void
name|Usage
parameter_list|()
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Usage: %s [-display<display>] [-geometry<geometry>] \\\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"  [-title<title>] [-name<title>] [-iconic] \\\n"
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"  [-speed<speed>] [-time<time>] [-help]\n"
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	#XMay 31, 1993i%a!<%?I>2A  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|Bool
name|GetArguments
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|,
name|theDisplayName
parameter_list|,
name|theGeometry
parameter_list|,
name|theTitle
parameter_list|,
name|NekoSpeed
parameter_list|,
name|IntervalTime
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
name|argv
index|[]
decl_stmt|;
name|char
modifier|*
name|theDisplayName
decl_stmt|;
name|char
modifier|*
name|theGeometry
decl_stmt|;
name|char
modifier|*
name|theTitle
decl_stmt|;
name|double
modifier|*
name|NekoSpeed
decl_stmt|;
name|long
modifier|*
name|IntervalTime
decl_stmt|;
block|{
name|int
name|ArgCounter
decl_stmt|;
name|Bool
name|iconicState
decl_stmt|;
name|theDisplayName
index|[
literal|0
index|]
operator|=
literal|'\0'
expr_stmt|;
name|theGeometry
index|[
literal|0
index|]
operator|=
literal|'\0'
expr_stmt|;
name|theTitle
index|[
literal|0
index|]
operator|=
literal|'\0'
expr_stmt|;
name|iconicState
operator|=
name|False
expr_stmt|;
for|for
control|(
name|ArgCounter
operator|=
literal|0
init|;
name|ArgCounter
operator|<
name|argc
condition|;
name|ArgCounter
operator|++
control|)
block|{
if|if
condition|(
name|strncmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-h"
argument_list|,
literal|2
argument_list|)
operator|==
literal|0
condition|)
block|{
name|Usage
argument_list|()
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-display"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|ArgCounter
operator|++
expr_stmt|;
if|if
condition|(
name|ArgCounter
operator|<
name|argc
condition|)
block|{
name|strcpy
argument_list|(
name|theDisplayName
argument_list|,
name|argv
index|[
name|ArgCounter
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: -display option error.\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|strncmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-geom"
argument_list|,
literal|5
argument_list|)
operator|==
literal|0
condition|)
block|{
name|ArgCounter
operator|++
expr_stmt|;
if|if
condition|(
name|ArgCounter
operator|<
name|argc
condition|)
block|{
name|strcpy
argument_list|(
name|theGeometry
argument_list|,
name|argv
index|[
name|ArgCounter
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: -geometry option error.\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|(
name|strcmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-title"
argument_list|)
operator|==
literal|0
operator|)
operator|||
operator|(
name|strcmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-name"
argument_list|)
operator|==
literal|0
operator|)
condition|)
block|{
name|ArgCounter
operator|++
expr_stmt|;
if|if
condition|(
name|ArgCounter
operator|<
name|argc
condition|)
block|{
name|strcpy
argument_list|(
name|theTitle
argument_list|,
name|argv
index|[
name|ArgCounter
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: -title option error.\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-iconic"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|iconicState
operator|=
name|True
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-speed"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|ArgCounter
operator|++
expr_stmt|;
if|if
condition|(
name|ArgCounter
operator|<
name|argc
condition|)
block|{
operator|*
name|NekoSpeed
operator|=
name|atof
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: -speed option error.\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|strcmp
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|,
literal|"-time"
argument_list|)
operator|==
literal|0
condition|)
block|{
name|ArgCounter
operator|++
expr_stmt|;
if|if
condition|(
name|ArgCounter
operator|<
name|argc
condition|)
block|{
operator|*
name|IntervalTime
operator|=
name|atol
argument_list|(
name|argv
index|[
name|ArgCounter
index|]
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: -time option error.\n"
argument_list|,
name|ProgramName
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s: Unknown option \"%s\".\n"
argument_list|,
name|ProgramName
argument_list|,
name|argv
index|[
name|ArgCounter
index|]
argument_list|)
expr_stmt|;
name|Usage
argument_list|()
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
if|if
condition|(
name|strlen
argument_list|(
name|theDisplayName
argument_list|)
operator|<
literal|1
condition|)
block|{
name|theDisplayName
operator|=
name|NULL
expr_stmt|;
block|}
if|if
condition|(
name|strlen
argument_list|(
name|theGeometry
argument_list|)
operator|<
literal|1
condition|)
block|{
name|theGeometry
operator|=
name|NULL
expr_stmt|;
block|}
return|return
operator|(
name|iconicState
operator|)
return|;
block|}
end_function

begin_comment
comment|/*--------------------------------------------------------------  *  *	%a%$%s4X?t  *  *--------------------------------------------------------------*/
end_comment

begin_function
name|int
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
name|argv
index|[]
decl_stmt|;
block|{
name|Bool
name|iconicState
decl_stmt|;
name|char
name|theDisplayName
index|[
name|DIRNAMELEN
index|]
decl_stmt|;
name|char
name|theGeometry
index|[
name|DIRNAMELEN
index|]
decl_stmt|;
name|char
name|theTitle
index|[
name|DIRNAMELEN
index|]
decl_stmt|;
name|ProgramName
operator|=
name|argv
index|[
literal|0
index|]
expr_stmt|;
name|argc
operator|--
expr_stmt|;
name|argv
operator|++
expr_stmt|;
name|iconicState
operator|=
name|GetArguments
argument_list|(
name|argc
argument_list|,
name|argv
argument_list|,
name|theDisplayName
argument_list|,
name|theGeometry
argument_list|,
name|theTitle
argument_list|,
operator|&
name|NekoSpeed
argument_list|,
operator|&
name|IntervalTime
argument_list|)
expr_stmt|;
name|InitScreen
argument_list|(
name|theDisplayName
argument_list|,
name|theGeometry
argument_list|,
name|theTitle
argument_list|,
name|iconicState
argument_list|)
expr_stmt|;
name|signal
argument_list|(
name|SIGALRM
argument_list|,
name|NullFunction
argument_list|)
expr_stmt|;
name|SinPiPer8Times3
operator|=
name|sin
argument_list|(
name|PI_PER8
operator|*
operator|(
name|double
operator|)
literal|3
argument_list|)
expr_stmt|;
name|SinPiPer8
operator|=
name|sin
argument_list|(
name|PI_PER8
argument_list|)
expr_stmt|;
ifndef|#
directive|ifndef
name|DEBUG
name|ProcessNeko
argument_list|()
expr_stmt|;
else|#
directive|else
name|ProcessDebugMenu
argument_list|()
expr_stmt|;
endif|#
directive|endif
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

