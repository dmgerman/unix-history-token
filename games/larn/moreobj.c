begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* moreobj.c 		Larn is copyrighted 1986 by Noah Morgan.  * $FreeBSD$  *  *	Routines in this file:  *  *	oaltar()  *	othrone()  *	ochest()  *	ofountain()  */
end_comment

begin_include
include|#
directive|include
file|"header.h"
end_include

begin_function_decl
specifier|static
name|void
name|ohear
parameter_list|()
function_decl|;
end_function_decl

begin_comment
comment|/*  *	******  *	OALTAR  *	******  *  *	subroutine to process an altar object  */
end_comment

begin_macro
name|oaltar
argument_list|()
end_macro

begin_block
block|{
name|unsigned
name|long
name|k
decl_stmt|;
name|lprcat
argument_list|(
literal|"\nDo you (p) pray  (d) desecrate"
argument_list|)
expr_stmt|;
name|iopts
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
while|while
condition|(
literal|1
condition|)
switch|switch
condition|(
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'p'
case|:
name|lprcat
argument_list|(
literal|" pray\nDo you (m) give money or (j) just pray? "
argument_list|)
expr_stmt|;
while|while
condition|(
literal|1
condition|)
switch|switch
condition|(
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'j'
case|:
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|75
condition|)
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|13
argument_list|)
operator|<
literal|4
condition|)
name|ohear
argument_list|()
expr_stmt|;
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|43
argument_list|)
operator|==
literal|10
condition|)
block|{
if|if
condition|(
name|c
index|[
name|WEAR
index|]
condition|)
name|lprcat
argument_list|(
literal|"\nYou feel your armor vibrate for a moment"
argument_list|)
expr_stmt|;
name|enchantarmor
argument_list|()
expr_stmt|;
return|return;
block|}
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|43
argument_list|)
operator|==
literal|10
condition|)
block|{
if|if
condition|(
name|c
index|[
name|WIELD
index|]
condition|)
name|lprcat
argument_list|(
literal|"\nYou feel your weapon vibrate for a moment"
argument_list|)
expr_stmt|;
name|enchweapon
argument_list|()
expr_stmt|;
return|return;
block|}
else|else
name|createmonster
argument_list|(
name|makemonst
argument_list|(
name|level
operator|+
literal|1
argument_list|)
argument_list|)
expr_stmt|;
return|return;
case|case
literal|'m'
case|:
name|lprcat
argument_list|(
literal|"\n\n"
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
literal|1
argument_list|,
literal|24
argument_list|)
expr_stmt|;
name|cltoeoln
argument_list|()
expr_stmt|;
name|cursor
argument_list|(
literal|1
argument_list|,
literal|23
argument_list|)
expr_stmt|;
name|cltoeoln
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"how much do you donate? "
argument_list|)
expr_stmt|;
name|k
operator|=
name|readnum
argument_list|(
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|c
index|[
name|GOLD
index|]
operator|<
name|k
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nYou don't have that much!"
argument_list|)
expr_stmt|;
return|return;
block|}
name|c
index|[
name|GOLD
index|]
operator|-=
name|k
expr_stmt|;
if|if
condition|(
name|k
operator|<
name|c
index|[
name|GOLD
index|]
operator|/
literal|10
operator|||
name|k
operator|<
name|rnd
argument_list|(
literal|50
argument_list|)
condition|)
block|{
name|createmonster
argument_list|(
name|makemonst
argument_list|(
name|level
operator|+
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|c
index|[
name|AGGRAVATE
index|]
operator|+=
literal|200
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|101
argument_list|)
operator|>
literal|50
condition|)
block|{
name|ohear
argument_list|()
expr_stmt|;
return|return;
block|}
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|43
argument_list|)
operator|==
literal|5
condition|)
block|{
if|if
condition|(
name|c
index|[
name|WEAR
index|]
condition|)
name|lprcat
argument_list|(
literal|"\nYou feel your armor vibrate for a moment"
argument_list|)
expr_stmt|;
name|enchantarmor
argument_list|()
expr_stmt|;
return|return;
block|}
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|43
argument_list|)
operator|==
literal|8
condition|)
block|{
if|if
condition|(
name|c
index|[
name|WIELD
index|]
condition|)
name|lprcat
argument_list|(
literal|"\nYou feel your weapon vibrate for a moment"
argument_list|)
expr_stmt|;
name|enchweapon
argument_list|()
expr_stmt|;
return|return;
block|}
else|else
name|lprcat
argument_list|(
literal|"\nThank You."
argument_list|)
expr_stmt|;
name|bottomline
argument_list|()
expr_stmt|;
return|return;
case|case
literal|'\33'
case|:
return|return;
block|}
empty_stmt|;
case|case
literal|'d'
case|:
name|lprcat
argument_list|(
literal|" desecrate"
argument_list|)
expr_stmt|;
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|60
condition|)
block|{
name|createmonster
argument_list|(
name|makemonst
argument_list|(
name|level
operator|+
literal|2
argument_list|)
operator|+
literal|8
argument_list|)
expr_stmt|;
name|c
index|[
name|AGGRAVATE
index|]
operator|+=
literal|2500
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|101
argument_list|)
operator|<
literal|30
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nThe altar crumbles into a pile of dust before your eyes"
argument_list|)
expr_stmt|;
name|forget
argument_list|()
expr_stmt|;
comment|/*	remember to destroy the altar	*/
block|}
else|else
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
return|return;
case|case
literal|'i'
case|:
case|case
literal|'\33'
case|:
name|ignore
argument_list|()
expr_stmt|;
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|30
condition|)
block|{
name|createmonster
argument_list|(
name|makemonst
argument_list|(
name|level
operator|+
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|c
index|[
name|AGGRAVATE
index|]
operator|+=
name|rnd
argument_list|(
literal|450
argument_list|)
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
return|return;
block|}
empty_stmt|;
block|}
block|}
end_block

begin_comment
comment|/* 	function to cast a +3 protection on the player  */
end_comment

begin_function
specifier|static
name|void
name|ohear
parameter_list|()
block|{
name|lprcat
argument_list|(
literal|"\nYou have been heard!"
argument_list|)
expr_stmt|;
if|if
condition|(
name|c
index|[
name|ALTPRO
index|]
operator|==
literal|0
condition|)
name|c
index|[
name|MOREDEFENSES
index|]
operator|+=
literal|3
expr_stmt|;
name|c
index|[
name|ALTPRO
index|]
operator|+=
literal|500
expr_stmt|;
comment|/* protection field */
name|bottomline
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/* 	******* 	OTHRONE 	*******  	subroutine to process a throne object  */
end_comment

begin_macro
name|othrone
argument_list|(
argument|arg
argument_list|)
end_macro

begin_decl_stmt
name|int
name|arg
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|int
name|i
decl_stmt|,
name|k
decl_stmt|;
name|lprcat
argument_list|(
literal|"\nDo you (p) pry off jewels, (s) sit down"
argument_list|)
expr_stmt|;
name|iopts
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
while|while
condition|(
literal|1
condition|)
switch|switch
condition|(
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'p'
case|:
name|lprcat
argument_list|(
literal|" pry off"
argument_list|)
expr_stmt|;
name|k
operator|=
name|rnd
argument_list|(
literal|101
argument_list|)
expr_stmt|;
if|if
condition|(
name|k
operator|<
literal|25
condition|)
block|{
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|rnd
argument_list|(
literal|4
argument_list|)
condition|;
name|i
operator|++
control|)
name|creategem
argument_list|()
expr_stmt|;
comment|/* gems pop off the throne */
name|item
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
name|ODEADTHRONE
expr_stmt|;
name|know
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|k
operator|<
literal|40
operator|&&
name|arg
operator|==
literal|0
condition|)
block|{
name|createmonster
argument_list|(
name|GNOMEKING
argument_list|)
expr_stmt|;
name|item
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
name|OTHRONE2
expr_stmt|;
name|know
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
literal|0
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
return|return;
case|case
literal|'s'
case|:
name|lprcat
argument_list|(
literal|" sit down"
argument_list|)
expr_stmt|;
name|k
operator|=
name|rnd
argument_list|(
literal|101
argument_list|)
expr_stmt|;
if|if
condition|(
name|k
operator|<
literal|30
operator|&&
name|arg
operator|==
literal|0
condition|)
block|{
name|createmonster
argument_list|(
name|GNOMEKING
argument_list|)
expr_stmt|;
name|item
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
name|OTHRONE2
expr_stmt|;
name|know
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|k
operator|<
literal|35
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nZaaaappp!  You've been teleported!\n"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|oteleport
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
return|return;
case|case
literal|'i'
case|:
case|case
literal|'\33'
case|:
name|ignore
argument_list|()
expr_stmt|;
return|return;
block|}
empty_stmt|;
block|}
block|}
end_block

begin_macro
name|odeadthrone
argument_list|()
end_macro

begin_block
block|{
name|int
name|k
decl_stmt|;
name|lprcat
argument_list|(
literal|"\nDo you (s) sit down"
argument_list|)
expr_stmt|;
name|iopts
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
while|while
condition|(
literal|1
condition|)
switch|switch
condition|(
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'s'
case|:
name|lprcat
argument_list|(
literal|" sit down"
argument_list|)
expr_stmt|;
name|k
operator|=
name|rnd
argument_list|(
literal|101
argument_list|)
expr_stmt|;
if|if
condition|(
name|k
operator|<
literal|35
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nZaaaappp!  You've been teleported!\n"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|oteleport
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
return|return;
case|case
literal|'i'
case|:
case|case
literal|'\33'
case|:
name|ignore
argument_list|()
expr_stmt|;
return|return;
block|}
empty_stmt|;
block|}
block|}
end_block

begin_comment
comment|/* 	****** 	OCHEST 	******  	subroutine to process a throne object  */
end_comment

begin_macro
name|ochest
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|,
name|k
decl_stmt|;
name|lprcat
argument_list|(
literal|"\nDo you (t) take it, (o) try to open it"
argument_list|)
expr_stmt|;
name|iopts
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
while|while
condition|(
literal|1
condition|)
switch|switch
condition|(
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'o'
case|:
name|lprcat
argument_list|(
literal|" open it"
argument_list|)
expr_stmt|;
name|k
operator|=
name|rnd
argument_list|(
literal|101
argument_list|)
expr_stmt|;
if|if
condition|(
name|k
operator|<
literal|40
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nThe chest explodes as you open it"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|i
operator|=
name|rnd
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|lastnum
operator|=
literal|281
expr_stmt|;
comment|/* in case he dies */
name|lprintf
argument_list|(
literal|"\nYou suffer %d hit points damage!"
argument_list|,
operator|(
name|long
operator|)
name|i
argument_list|)
expr_stmt|;
name|checkloss
argument_list|(
name|i
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|rnd
argument_list|(
literal|10
argument_list|)
condition|)
comment|/* see if he gets a curse */
block|{
case|case
literal|1
case|:
name|c
index|[
name|ITCHING
index|]
operator|+=
name|rnd
argument_list|(
literal|1000
argument_list|)
operator|+
literal|100
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou feel an irritation spread over your skin!"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|c
index|[
name|CLUMSINESS
index|]
operator|+=
name|rnd
argument_list|(
literal|1600
argument_list|)
operator|+
literal|200
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou begin to lose hand to eye coordination!"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|c
index|[
name|HALFDAM
index|]
operator|+=
name|rnd
argument_list|(
literal|1600
argument_list|)
operator|+
literal|200
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nA sickness engulfs you!"
argument_list|)
expr_stmt|;
break|break;
block|}
empty_stmt|;
name|item
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
name|know
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|69
condition|)
name|creategem
argument_list|()
expr_stmt|;
comment|/* gems from the chest */
name|dropgold
argument_list|(
name|rnd
argument_list|(
literal|110
operator|*
name|iarg
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|+
literal|200
argument_list|)
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|rnd
argument_list|(
literal|4
argument_list|)
condition|;
name|i
operator|++
control|)
name|something
argument_list|(
name|iarg
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|+
literal|2
argument_list|)
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"\nnothing happens"
argument_list|)
expr_stmt|;
return|return;
case|case
literal|'t'
case|:
name|lprcat
argument_list|(
literal|" take"
argument_list|)
expr_stmt|;
if|if
condition|(
name|take
argument_list|(
name|OCHEST
argument_list|,
name|iarg
index|[
name|playerx
index|]
index|[
name|playery
index|]
argument_list|)
operator|==
literal|0
condition|)
name|item
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
name|know
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
literal|0
expr_stmt|;
return|return;
case|case
literal|'i'
case|:
case|case
literal|'\33'
case|:
name|ignore
argument_list|()
expr_stmt|;
return|return;
block|}
empty_stmt|;
block|}
block|}
end_block

begin_comment
comment|/* 	********* 	OFOUNTAIN 	*********  */
end_comment

begin_macro
name|ofountain
argument_list|()
end_macro

begin_block
block|{
name|int
name|x
decl_stmt|;
name|cursors
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nDo you (d) drink, (w) wash yourself"
argument_list|)
expr_stmt|;
name|iopts
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
switch|switch
condition|(
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'d'
case|:
name|lprcat
argument_list|(
literal|"drink"
argument_list|)
expr_stmt|;
if|if
condition|(
name|rnd
argument_list|(
literal|1501
argument_list|)
operator|<
literal|2
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nOops!  You seem to have caught the dreadful sleep!"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|lflush
argument_list|()
expr_stmt|;
name|sleep
argument_list|(
literal|3
argument_list|)
expr_stmt|;
name|died
argument_list|(
literal|280
argument_list|)
expr_stmt|;
return|return;
block|}
name|x
operator|=
name|rnd
argument_list|(
literal|100
argument_list|)
expr_stmt|;
if|if
condition|(
name|x
operator|<
literal|7
condition|)
block|{
name|c
index|[
name|HALFDAM
index|]
operator|+=
literal|200
operator|+
name|rnd
argument_list|(
literal|200
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou feel a sickness coming on"
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|x
operator|<
literal|13
condition|)
name|quaffpotion
argument_list|(
literal|23
argument_list|)
expr_stmt|;
comment|/* see invisible */
elseif|else
if|if
condition|(
name|x
operator|<
literal|45
condition|)
name|lprcat
argument_list|(
literal|"\nnothing seems to have happened"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|3
argument_list|)
operator|!=
literal|2
condition|)
name|fntchange
argument_list|(
literal|1
argument_list|)
expr_stmt|;
comment|/*	change char levels upward	*/
else|else
name|fntchange
argument_list|(
operator|-
literal|1
argument_list|)
expr_stmt|;
comment|/*	change char levels downward	*/
if|if
condition|(
name|rnd
argument_list|(
literal|12
argument_list|)
operator|<
literal|3
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nThe fountains bubbling slowly quiets"
argument_list|)
expr_stmt|;
name|item
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
name|ODEADFOUNTAIN
expr_stmt|;
comment|/* dead fountain */
name|know
index|[
name|playerx
index|]
index|[
name|playery
index|]
operator|=
literal|0
expr_stmt|;
block|}
return|return;
case|case
literal|'\33'
case|:
case|case
literal|'i'
case|:
name|ignore
argument_list|()
expr_stmt|;
return|return;
case|case
literal|'w'
case|:
name|lprcat
argument_list|(
literal|"wash yourself"
argument_list|)
expr_stmt|;
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|11
condition|)
block|{
name|x
operator|=
name|rnd
argument_list|(
operator|(
name|level
operator|<<
literal|2
operator|)
operator|+
literal|2
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"\nOh no!  The water was foul!  You suffer %d hit points!"
argument_list|,
operator|(
name|long
operator|)
name|x
argument_list|)
expr_stmt|;
name|lastnum
operator|=
literal|273
expr_stmt|;
name|losehp
argument_list|(
name|x
argument_list|)
expr_stmt|;
name|bottomline
argument_list|()
expr_stmt|;
name|cursors
argument_list|()
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|29
condition|)
name|lprcat
argument_list|(
literal|"\nYou got the dirt off!"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|31
condition|)
name|lprcat
argument_list|(
literal|"\nThis water seems to be hard water!  The dirt didn't come off!"
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|rnd
argument_list|(
literal|100
argument_list|)
operator|<
literal|34
condition|)
name|createmonster
argument_list|(
name|WATERLORD
argument_list|)
expr_stmt|;
comment|/*	make water lord		*/
else|else
name|lprcat
argument_list|(
literal|"\nnothing seems to have happened"
argument_list|)
expr_stmt|;
return|return;
block|}
block|}
end_block

begin_comment
comment|/* 	*** 	FCH 	***  	subroutine to process an up/down of a character attribute for ofountain  */
end_comment

begin_function
specifier|static
name|void
name|fch
parameter_list|(
name|how
parameter_list|,
name|x
parameter_list|)
name|int
name|how
decl_stmt|;
name|long
modifier|*
name|x
decl_stmt|;
block|{
if|if
condition|(
name|how
operator|<
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|" went down by one!"
argument_list|)
expr_stmt|;
operator|--
operator|(
operator|*
name|x
operator|)
expr_stmt|;
block|}
else|else
block|{
name|lprcat
argument_list|(
literal|" went up by one!"
argument_list|)
expr_stmt|;
operator|(
operator|*
name|x
operator|)
operator|++
expr_stmt|;
block|}
name|bottomline
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/* 	a subroutine to raise or lower character levels 	if x> 0 they are raised   if x< 0 they are lowered  */
end_comment

begin_macro
name|fntchange
argument_list|(
argument|how
argument_list|)
end_macro

begin_decl_stmt
name|int
name|how
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|long
name|j
decl_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|rnd
argument_list|(
literal|9
argument_list|)
condition|)
block|{
case|case
literal|1
case|:
name|lprcat
argument_list|(
literal|"Your strength"
argument_list|)
expr_stmt|;
name|fch
argument_list|(
name|how
argument_list|,
operator|&
name|c
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|lprcat
argument_list|(
literal|"Your intelligence"
argument_list|)
expr_stmt|;
name|fch
argument_list|(
name|how
argument_list|,
operator|&
name|c
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|lprcat
argument_list|(
literal|"Your wisdom"
argument_list|)
expr_stmt|;
name|fch
argument_list|(
name|how
argument_list|,
operator|&
name|c
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
literal|4
case|:
name|lprcat
argument_list|(
literal|"Your constitution"
argument_list|)
expr_stmt|;
name|fch
argument_list|(
name|how
argument_list|,
operator|&
name|c
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
literal|5
case|:
name|lprcat
argument_list|(
literal|"Your dexterity"
argument_list|)
expr_stmt|;
name|fch
argument_list|(
name|how
argument_list|,
operator|&
name|c
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
literal|6
case|:
name|lprcat
argument_list|(
literal|"Your charm"
argument_list|)
expr_stmt|;
name|fch
argument_list|(
name|how
argument_list|,
operator|&
name|c
index|[
literal|5
index|]
argument_list|)
expr_stmt|;
break|break;
case|case
literal|7
case|:
name|j
operator|=
name|rnd
argument_list|(
name|level
operator|+
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|how
operator|<
literal|0
condition|)
block|{
name|lprintf
argument_list|(
literal|"You lose %d hit point"
argument_list|,
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|j
operator|>
literal|1
condition|)
name|lprcat
argument_list|(
literal|"s!"
argument_list|)
expr_stmt|;
else|else
name|lprc
argument_list|(
literal|'!'
argument_list|)
expr_stmt|;
name|losemhp
argument_list|(
operator|(
name|int
operator|)
name|j
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|lprintf
argument_list|(
literal|"You gain %d hit point"
argument_list|,
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|j
operator|>
literal|1
condition|)
name|lprcat
argument_list|(
literal|"s!"
argument_list|)
expr_stmt|;
else|else
name|lprc
argument_list|(
literal|'!'
argument_list|)
expr_stmt|;
name|raisemhp
argument_list|(
operator|(
name|int
operator|)
name|j
argument_list|)
expr_stmt|;
block|}
name|bottomline
argument_list|()
expr_stmt|;
break|break;
case|case
literal|8
case|:
name|j
operator|=
name|rnd
argument_list|(
name|level
operator|+
literal|1
argument_list|)
expr_stmt|;
if|if
condition|(
name|how
operator|>
literal|0
condition|)
block|{
name|lprintf
argument_list|(
literal|"You just gained %d spell"
argument_list|,
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
name|raisemspells
argument_list|(
operator|(
name|int
operator|)
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|j
operator|>
literal|1
condition|)
name|lprcat
argument_list|(
literal|"s!"
argument_list|)
expr_stmt|;
else|else
name|lprc
argument_list|(
literal|'!'
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|lprintf
argument_list|(
literal|"You just lost %d spell"
argument_list|,
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
name|losemspells
argument_list|(
operator|(
name|int
operator|)
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|j
operator|>
literal|1
condition|)
name|lprcat
argument_list|(
literal|"s!"
argument_list|)
expr_stmt|;
else|else
name|lprc
argument_list|(
literal|'!'
argument_list|)
expr_stmt|;
block|}
name|bottomline
argument_list|()
expr_stmt|;
break|break;
case|case
literal|9
case|:
name|j
operator|=
literal|5
operator|*
name|rnd
argument_list|(
operator|(
name|level
operator|+
literal|1
operator|)
operator|*
operator|(
name|level
operator|+
literal|1
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|how
operator|<
literal|0
condition|)
block|{
name|lprintf
argument_list|(
literal|"You just lost %d experience point"
argument_list|,
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|j
operator|>
literal|1
condition|)
name|lprcat
argument_list|(
literal|"s!"
argument_list|)
expr_stmt|;
else|else
name|lprc
argument_list|(
literal|'!'
argument_list|)
expr_stmt|;
name|loseexperience
argument_list|(
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|lprintf
argument_list|(
literal|"You just gained %d experience point"
argument_list|,
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
if|if
condition|(
name|j
operator|>
literal|1
condition|)
name|lprcat
argument_list|(
literal|"s!"
argument_list|)
expr_stmt|;
else|else
name|lprc
argument_list|(
literal|'!'
argument_list|)
expr_stmt|;
name|raiseexperience
argument_list|(
operator|(
name|long
operator|)
name|j
argument_list|)
expr_stmt|;
block|}
break|break;
block|}
name|cursors
argument_list|()
expr_stmt|;
block|}
end_block

end_unit

