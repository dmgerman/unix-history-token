begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 1988 The Regents of the University of California.  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  * 3. All advertising materials mentioning features or use of this software  *    must display the following acknowledgement:  *	This product includes software developed by the University of  *	California, Berkeley and its contributors.  * 4. Neither the name of the University nor the names of its contributors  *    may be used to endorse or promote products derived from this software  *    without specific prior written permission.  *  * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_if
if|#
directive|if
literal|0
end_if

begin_endif
unit|static char sccsid[] = "@(#)store.c	5.4 (Berkeley) 5/13/91";
endif|#
directive|endif
end_endif

begin_decl_stmt
specifier|static
specifier|const
name|char
name|rcsid
index|[]
init|=
literal|"$FreeBSD$"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* not lint */
end_comment

begin_comment
comment|/*	store.c		Larn is copyrighted 1986 by Noah Morgan. */
end_comment

begin_include
include|#
directive|include
file|"header.h"
end_include

begin_decl_stmt
specifier|static
name|int
name|dndcount
init|=
literal|0
decl_stmt|,
name|dnditm
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*	this is the data for the stuff in the dnd store	*/
end_comment

begin_decl_stmt
name|int
name|maxitm
init|=
literal|83
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* number of items in the dnd inventory table	*/
end_comment

begin_decl_stmt
name|struct
name|_itm
name|itm
index|[
literal|90
index|]
init|=
block|{
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|2
block|,
literal|0
block|,
name|OLEATHER
block|,
literal|0
block|,
literal|3
block|}
block|,
block|{
literal|10
block|,
literal|0
block|,
name|OSTUDLEATHER
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|40
block|,
literal|0
block|,
name|ORING
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|85
block|,
literal|0
block|,
name|OCHAIN
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|220
block|,
literal|0
block|,
name|OSPLINT
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|400
block|,
literal|0
block|,
name|OPLATE
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|900
block|,
literal|0
block|,
name|OPLATEARMOR
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|2600
block|,
literal|0
block|,
name|OSSPLATE
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|150
block|,
literal|0
block|,
name|OSHIELD
block|,
literal|0
block|,
literal|1
block|}
block|,
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|2
block|,
literal|0
block|,
name|ODAGGER
block|,
literal|0
block|,
literal|3
block|}
block|,
block|{
literal|20
block|,
literal|0
block|,
name|OSPEAR
block|,
literal|0
block|,
literal|3
block|}
block|,
block|{
literal|80
block|,
literal|0
block|,
name|OFLAIL
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|150
block|,
literal|0
block|,
name|OBATTLEAXE
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|450
block|,
literal|0
block|,
name|OLONGSWORD
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|1000
block|,
literal|0
block|,
name|O2SWORD
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|5000
block|,
literal|0
block|,
name|OSWORD
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|16500
block|,
literal|0
block|,
name|OLANCE
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|6000
block|,
literal|0
block|,
name|OSWORDofSLASHING
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|10000
block|,
literal|0
block|,
name|OHAMMER
block|,
literal|0
block|,
literal|0
block|}
block|,
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|150
block|,
literal|0
block|,
name|OPROTRING
block|,
literal|1
block|,
literal|1
block|}
block|,
block|{
literal|85
block|,
literal|0
block|,
name|OSTRRING
block|,
literal|1
block|,
literal|1
block|}
block|,
block|{
literal|120
block|,
literal|0
block|,
name|ODEXRING
block|,
literal|1
block|,
literal|1
block|}
block|,
block|{
literal|120
block|,
literal|0
block|,
name|OCLEVERRING
block|,
literal|1
block|,
literal|1
block|}
block|,
block|{
literal|180
block|,
literal|0
block|,
name|OENERGYRING
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|125
block|,
literal|0
block|,
name|ODAMRING
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|220
block|,
literal|0
block|,
name|OREGENRING
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|1000
block|,
literal|0
block|,
name|ORINGOFEXTRA
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|280
block|,
literal|0
block|,
name|OBELT
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|400
block|,
literal|0
block|,
name|OAMULET
block|,
literal|0
block|,
literal|1
block|}
block|,
block|{
literal|6500
block|,
literal|0
block|,
name|OORBOFDRAGON
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|5500
block|,
literal|0
block|,
name|OSPIRITSCARAB
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|5000
block|,
literal|0
block|,
name|OCUBEofUNDEAD
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|6000
block|,
literal|0
block|,
name|ONOTHEFT
block|,
literal|0
block|,
literal|0
block|}
block|,
block|{
literal|590
block|,
literal|0
block|,
name|OCHEST
block|,
literal|6
block|,
literal|1
block|}
block|,
block|{
literal|200
block|,
literal|0
block|,
name|OBOOK
block|,
literal|8
block|,
literal|1
block|}
block|,
block|{
literal|10
block|,
literal|0
block|,
name|OCOOKIE
block|,
literal|0
block|,
literal|3
block|}
block|,
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|20
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|0
block|,
literal|6
block|}
block|,
block|{
literal|90
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|1
block|,
literal|5
block|}
block|,
block|{
literal|520
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|2
block|,
literal|1
block|}
block|,
block|{
literal|100
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|3
block|,
literal|2
block|}
block|,
block|{
literal|50
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|4
block|,
literal|2
block|}
block|,
block|{
literal|150
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|5
block|,
literal|2
block|}
block|,
block|{
literal|70
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|6
block|,
literal|1
block|}
block|,
block|{
literal|30
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|7
block|,
literal|7
block|}
block|,
block|{
literal|200
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|8
block|,
literal|1
block|}
block|,
block|{
literal|50
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|9
block|,
literal|1
block|}
block|,
block|{
literal|80
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|10
block|,
literal|1
block|}
block|,
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|30
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|11
block|,
literal|3
block|}
block|,
block|{
literal|20
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|12
block|,
literal|5
block|}
block|,
block|{
literal|40
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|13
block|,
literal|3
block|}
block|,
block|{
literal|35
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|14
block|,
literal|2
block|}
block|,
block|{
literal|520
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|15
block|,
literal|1
block|}
block|,
block|{
literal|90
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|16
block|,
literal|2
block|}
block|,
block|{
literal|200
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|17
block|,
literal|2
block|}
block|,
block|{
literal|220
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|18
block|,
literal|4
block|}
block|,
block|{
literal|80
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|19
block|,
literal|6
block|}
block|,
block|{
literal|370
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|20
block|,
literal|3
block|}
block|,
block|{
literal|50
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|22
block|,
literal|1
block|}
block|,
block|{
literal|150
block|,
name|potionname
block|,
name|OPOTION
block|,
literal|23
block|,
literal|3
block|}
block|,
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|100
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|0
block|,
literal|2
block|}
block|,
block|{
literal|125
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|1
block|,
literal|2
block|}
block|,
block|{
literal|60
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|2
block|,
literal|4
block|}
block|,
block|{
literal|10
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|3
block|,
literal|4
block|}
block|,
block|{
literal|100
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|4
block|,
literal|3
block|}
block|,
block|{
literal|200
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|5
block|,
literal|2
block|}
block|,
block|{
literal|110
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|6
block|,
literal|1
block|}
block|,
block|{
literal|500
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|7
block|,
literal|2
block|}
block|,
block|{
literal|200
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|8
block|,
literal|2
block|}
block|,
block|{
literal|250
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|9
block|,
literal|4
block|}
block|,
block|{
literal|20
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|10
block|,
literal|5
block|}
block|,
block|{
literal|30
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|11
block|,
literal|3
block|}
block|,
comment|/*cost	  memory 	iven name	iven arg   how   gp	 pointer	  iven[]	ivenarg[]  many */
block|{
literal|340
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|12
block|,
literal|1
block|}
block|,
block|{
literal|340
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|13
block|,
literal|1
block|}
block|,
block|{
literal|300
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|14
block|,
literal|2
block|}
block|,
block|{
literal|400
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|15
block|,
literal|2
block|}
block|,
block|{
literal|500
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|16
block|,
literal|2
block|}
block|,
block|{
literal|1000
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|17
block|,
literal|1
block|}
block|,
block|{
literal|500
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|18
block|,
literal|1
block|}
block|,
block|{
literal|340
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|19
block|,
literal|2
block|}
block|,
block|{
literal|220
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|20
block|,
literal|3
block|}
block|,
block|{
literal|3900
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|21
block|,
literal|0
block|}
block|,
block|{
literal|610
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|22
block|,
literal|1
block|}
block|,
block|{
literal|3000
block|,
name|scrollname
block|,
name|OSCROLL
block|,
literal|23
block|,
literal|0
block|}
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* 	function for the dnd store  */
end_comment

begin_macro
name|dnd_2hed
argument_list|()
end_macro

begin_block
block|{
name|lprcat
argument_list|(
literal|"Welcome to the Larn Thrift Shoppe.  We stock many items explorers find useful\n"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" in their adventures.  Feel free to browse to your hearts content.\n"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"Also be advised, if you break 'em, you pay for 'em."
argument_list|)
expr_stmt|;
block|}
end_block

begin_function_decl
specifier|static
name|void
name|dnditem
parameter_list|()
function_decl|;
end_function_decl

begin_macro
name|dnd_hed
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
name|dnditm
init|;
name|i
operator|<
literal|26
operator|+
name|dnditm
condition|;
name|i
operator|++
control|)
name|dnditem
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
literal|50
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"You have "
argument_list|)
expr_stmt|;
block|}
end_block

begin_function
specifier|static
name|void
name|handsfull
parameter_list|()
block|{
name|lprcat
argument_list|(
literal|"\nYou can't carry anything more!"
argument_list|)
expr_stmt|;
name|lflush
argument_list|()
expr_stmt|;
name|nap
argument_list|(
literal|2200
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|outofstock
parameter_list|()
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but we are out of that item."
argument_list|)
expr_stmt|;
name|lflush
argument_list|()
expr_stmt|;
name|nap
argument_list|(
literal|2200
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|nogold
parameter_list|()
block|{
name|lprcat
argument_list|(
literal|"\nYou don't have enough gold to pay for that!"
argument_list|)
expr_stmt|;
name|lflush
argument_list|()
expr_stmt|;
name|nap
argument_list|(
literal|2200
argument_list|)
expr_stmt|;
block|}
end_function

begin_macro
name|dndstore
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|;
name|dnditm
operator|=
literal|0
expr_stmt|;
name|nosignal
operator|=
literal|1
expr_stmt|;
comment|/* disable signals */
name|clear
argument_list|()
expr_stmt|;
name|dnd_2hed
argument_list|()
expr_stmt|;
if|if
condition|(
name|outstanding_taxes
operator|>
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|"\n\nThe Larn Revenue Service has ordered us to not do business with tax evaders.\n"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|lprintf
argument_list|(
literal|"They have also told us that you owe %d gp in back taxes, and as we must\n"
argument_list|,
operator|(
name|long
operator|)
name|outstanding_taxes
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"comply with the law, we cannot serve you at this time.  Soo Sorry.\n"
argument_list|)
expr_stmt|;
name|cursors
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nPress "
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" to leave: "
argument_list|)
expr_stmt|;
name|lflush
argument_list|()
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|i
operator|!=
literal|'\33'
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
name|drawscreen
argument_list|()
expr_stmt|;
name|nosignal
operator|=
literal|0
expr_stmt|;
comment|/* enable signals */
return|return;
block|}
name|dnd_hed
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
name|cursor
argument_list|(
literal|59
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%d gold pieces"
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
name|cltoeoln
argument_list|()
expr_stmt|;
name|cl_dn
argument_list|(
literal|1
argument_list|,
literal|20
argument_list|)
expr_stmt|;
comment|/* erase to eod */
name|lprcat
argument_list|(
literal|"\nEnter your transaction ["
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"space"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" for more, "
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" to leave]? "
argument_list|)
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|(
name|i
operator|<
literal|'a'
operator|||
name|i
operator|>
literal|'z'
operator|)
operator|&&
operator|(
name|i
operator|!=
literal|' '
operator|)
operator|&&
operator|(
name|i
operator|!=
literal|'\33'
operator|)
operator|&&
operator|(
name|i
operator|!=
literal|12
operator|)
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|i
operator|==
literal|12
condition|)
block|{
name|clear
argument_list|()
expr_stmt|;
name|dnd_2hed
argument_list|()
expr_stmt|;
name|dnd_hed
argument_list|()
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|i
operator|==
literal|'\33'
condition|)
block|{
name|drawscreen
argument_list|()
expr_stmt|;
name|nosignal
operator|=
literal|0
expr_stmt|;
comment|/* enable signals */
return|return;
block|}
elseif|else
if|if
condition|(
name|i
operator|==
literal|' '
condition|)
block|{
name|cl_dn
argument_list|(
literal|1
argument_list|,
literal|4
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|dnditm
operator|+=
literal|26
operator|)
operator|>=
name|maxitm
condition|)
name|dnditm
operator|=
literal|0
expr_stmt|;
name|dnd_hed
argument_list|()
expr_stmt|;
block|}
else|else
block|{
comment|/* buy something */
name|lprc
argument_list|(
name|i
argument_list|)
expr_stmt|;
comment|/* echo the byte */
name|i
operator|+=
name|dnditm
operator|-
literal|'a'
expr_stmt|;
if|if
condition|(
name|i
operator|>=
name|maxitm
condition|)
name|outofstock
argument_list|()
expr_stmt|;
elseif|else
if|if
condition|(
name|itm
index|[
name|i
index|]
operator|.
name|qty
operator|<=
literal|0
condition|)
name|outofstock
argument_list|()
expr_stmt|;
elseif|else
if|if
condition|(
name|pocketfull
argument_list|()
condition|)
name|handsfull
argument_list|()
expr_stmt|;
elseif|else
if|if
condition|(
name|c
index|[
name|GOLD
index|]
operator|<
name|itm
index|[
name|i
index|]
operator|.
name|price
operator|*
literal|10
condition|)
name|nogold
argument_list|()
expr_stmt|;
else|else
block|{
if|if
condition|(
name|itm
index|[
name|i
index|]
operator|.
name|mem
operator|!=
literal|0
condition|)
operator|*
name|itm
index|[
name|i
index|]
operator|.
name|mem
index|[
name|itm
index|[
name|i
index|]
operator|.
name|arg
index|]
operator|=
literal|' '
expr_stmt|;
name|c
index|[
name|GOLD
index|]
operator|-=
name|itm
index|[
name|i
index|]
operator|.
name|price
operator|*
literal|10
expr_stmt|;
name|itm
index|[
name|i
index|]
operator|.
name|qty
operator|--
expr_stmt|;
name|take
argument_list|(
name|itm
index|[
name|i
index|]
operator|.
name|obj
argument_list|,
name|itm
index|[
name|i
index|]
operator|.
name|arg
argument_list|)
expr_stmt|;
if|if
condition|(
name|itm
index|[
name|i
index|]
operator|.
name|qty
operator|==
literal|0
condition|)
name|dnditem
argument_list|(
name|i
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|1001
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
end_block

begin_comment
comment|/* 	dnditem(index)  	to print the item list;  used in dndstore() enter with the index into itm  */
end_comment

begin_function
specifier|static
name|void
name|dnditem
parameter_list|(
name|i
parameter_list|)
name|int
name|i
decl_stmt|;
block|{
name|int
name|j
decl_stmt|,
name|k
decl_stmt|;
if|if
condition|(
name|i
operator|>=
name|maxitm
condition|)
return|return;
name|cursor
argument_list|(
operator|(
name|j
operator|=
operator|(
name|i
operator|&
literal|1
operator|)
operator|*
literal|40
operator|+
literal|1
operator|)
argument_list|,
operator|(
name|k
operator|=
operator|(
operator|(
name|i
operator|%
literal|26
operator|)
operator|>>
literal|1
operator|)
operator|+
literal|5
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|itm
index|[
name|i
index|]
operator|.
name|qty
operator|==
literal|0
condition|)
block|{
name|lprintf
argument_list|(
literal|"%39s"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
return|return;
block|}
name|lprintf
argument_list|(
literal|"%c) "
argument_list|,
operator|(
name|i
operator|%
literal|26
operator|)
operator|+
literal|'a'
argument_list|)
expr_stmt|;
if|if
condition|(
name|itm
index|[
name|i
index|]
operator|.
name|obj
operator|==
name|OPOTION
condition|)
block|{
name|lprcat
argument_list|(
literal|"potion of "
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%s"
argument_list|,
operator|&
name|potionname
index|[
name|itm
index|[
name|i
index|]
operator|.
name|arg
index|]
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|itm
index|[
name|i
index|]
operator|.
name|obj
operator|==
name|OSCROLL
condition|)
block|{
name|lprcat
argument_list|(
literal|"scroll of "
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%s"
argument_list|,
operator|&
name|scrollname
index|[
name|itm
index|[
name|i
index|]
operator|.
name|arg
index|]
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
else|else
name|lprintf
argument_list|(
literal|"%s"
argument_list|,
name|objectname
index|[
name|itm
index|[
name|i
index|]
operator|.
name|obj
index|]
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
name|j
operator|+
literal|31
argument_list|,
name|k
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%6d"
argument_list|,
call|(
name|long
call|)
argument_list|(
name|itm
index|[
name|i
index|]
operator|.
name|price
operator|*
literal|10
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

begin_escape
end_escape

begin_comment
comment|/* 	for the college of larn  */
end_comment

begin_decl_stmt
name|char
name|course
index|[
literal|26
index|]
init|=
block|{
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*	the list of courses taken	*/
end_comment

begin_decl_stmt
name|char
name|coursetime
index|[]
init|=
block|{
literal|10
block|,
literal|15
block|,
literal|10
block|,
literal|20
block|,
literal|10
block|,
literal|10
block|,
literal|10
block|,
literal|5
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* 	function to display the header info for the school  */
end_comment

begin_macro
name|sch_hed
argument_list|()
end_macro

begin_block
block|{
name|clear
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"The College of Larn offers the exciting opportunity of higher education to\n"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"all inhabitants of the caves.  Here is a list of the class schedule:\n\n\n"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"\t\t    Course Name \t       Time Needed\n\n"
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|0
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\ta)  Fighters Training I         10 mobuls"
argument_list|)
expr_stmt|;
comment|/*line 7 of crt*/
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|1
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\tb)  Fighters Training II        15 mobuls"
argument_list|)
expr_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|2
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\tc)  Introduction to Wizardry    10 mobuls"
argument_list|)
expr_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|3
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\td)  Applied Wizardry            20 mobuls"
argument_list|)
expr_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|4
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\te)  Behavioral Psychology       10 mobuls"
argument_list|)
expr_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|5
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\tf)  Faith for Today             10 mobuls"
argument_list|)
expr_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|6
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\tg)  Contemporary Dance          10 mobuls"
argument_list|)
expr_stmt|;
name|lprc
argument_list|(
literal|'\n'
argument_list|)
expr_stmt|;
if|if
condition|(
name|course
index|[
literal|7
index|]
operator|==
literal|0
condition|)
name|lprcat
argument_list|(
literal|"\t\th)  History of Larn              5 mobuls"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"\n\n\t\tAll courses cost 250 gold pieces."
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
literal|30
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"You are presently carrying "
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|oschool
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|;
name|long
name|time_used
decl_stmt|;
name|nosignal
operator|=
literal|1
expr_stmt|;
comment|/* disable signals */
name|sch_hed
argument_list|()
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
name|cursor
argument_list|(
literal|57
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%d gold pieces.   "
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
name|cursors
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nWhat is your choice ["
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" to leave] ? "
argument_list|)
expr_stmt|;
name|yrepcount
operator|=
literal|0
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|(
name|i
operator|<
literal|'a'
operator|||
name|i
operator|>
literal|'h'
operator|)
operator|&&
operator|(
name|i
operator|!=
literal|'\33'
operator|)
operator|&&
operator|(
name|i
operator|!=
literal|12
operator|)
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|i
operator|==
literal|12
condition|)
block|{
name|sch_hed
argument_list|()
expr_stmt|;
continue|continue;
block|}
elseif|else
if|if
condition|(
name|i
operator|==
literal|'\33'
condition|)
block|{
name|nosignal
operator|=
literal|0
expr_stmt|;
name|drawscreen
argument_list|()
expr_stmt|;
comment|/* enable signals */
return|return;
block|}
name|lprc
argument_list|(
name|i
argument_list|)
expr_stmt|;
if|if
condition|(
name|c
index|[
name|GOLD
index|]
operator|<
literal|250
condition|)
name|nogold
argument_list|()
expr_stmt|;
elseif|else
if|if
condition|(
name|course
index|[
name|i
operator|-
literal|'a'
index|]
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but that class is filled."
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|1000
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|i
operator|<=
literal|'h'
condition|)
block|{
name|c
index|[
name|GOLD
index|]
operator|-=
literal|250
expr_stmt|;
name|time_used
operator|=
literal|0
expr_stmt|;
switch|switch
condition|(
name|i
condition|)
block|{
case|case
literal|'a'
case|:
name|c
index|[
name|STRENGTH
index|]
operator|+=
literal|2
expr_stmt|;
name|c
index|[
name|CONSTITUTION
index|]
operator|++
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou feel stronger!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|7
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'b'
case|:
if|if
condition|(
name|course
index|[
literal|0
index|]
operator|==
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but this class has a prerequisite of Fighters Training I"
argument_list|)
expr_stmt|;
name|c
index|[
name|GOLD
index|]
operator|+=
literal|250
expr_stmt|;
name|time_used
operator|=
operator|-
literal|10000
expr_stmt|;
break|break;
block|}
name|lprcat
argument_list|(
literal|"\nYou feel much stronger!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|8
argument_list|)
expr_stmt|;
name|c
index|[
name|STRENGTH
index|]
operator|+=
literal|2
expr_stmt|;
name|c
index|[
name|CONSTITUTION
index|]
operator|+=
literal|2
expr_stmt|;
break|break;
case|case
literal|'c'
case|:
name|c
index|[
name|INTELLIGENCE
index|]
operator|+=
literal|2
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nThe task before you now seems more attainable!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|9
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'d'
case|:
if|if
condition|(
name|course
index|[
literal|2
index|]
operator|==
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but this class has a prerequisite of Introduction to Wizardry"
argument_list|)
expr_stmt|;
name|c
index|[
name|GOLD
index|]
operator|+=
literal|250
expr_stmt|;
name|time_used
operator|=
operator|-
literal|10000
expr_stmt|;
break|break;
block|}
name|lprcat
argument_list|(
literal|"\nThe task before you now seems very attainable!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|c
index|[
name|INTELLIGENCE
index|]
operator|+=
literal|2
expr_stmt|;
break|break;
case|case
literal|'e'
case|:
name|c
index|[
name|CHARISMA
index|]
operator|+=
literal|3
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou now feel like a born leader!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|11
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'f'
case|:
name|c
index|[
name|WISDOM
index|]
operator|+=
literal|2
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou now feel more confident that you can find the potion in time!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|12
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'g'
case|:
name|c
index|[
name|DEXTERITY
index|]
operator|+=
literal|3
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYou feel like dancing!"
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|13
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'h'
case|:
name|c
index|[
name|INTELLIGENCE
index|]
operator|++
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYour instructor told you that the Eye of Larn is rumored to be guarded\n"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"by a platinum dragon who possesses psionic abilities. "
argument_list|)
expr_stmt|;
name|cl_line
argument_list|(
literal|16
argument_list|,
literal|14
argument_list|)
expr_stmt|;
break|break;
block|}
name|time_used
operator|+=
name|coursetime
index|[
name|i
operator|-
literal|'a'
index|]
operator|*
literal|100
expr_stmt|;
if|if
condition|(
name|time_used
operator|>
literal|0
condition|)
block|{
name|gtime
operator|+=
name|time_used
expr_stmt|;
name|course
index|[
name|i
operator|-
literal|'a'
index|]
operator|++
expr_stmt|;
comment|/*	remember that he has taken that course	*/
name|c
index|[
name|HP
index|]
operator|=
name|c
index|[
name|HPMAX
index|]
expr_stmt|;
name|c
index|[
name|SPELLS
index|]
operator|=
name|c
index|[
name|SPELLMAX
index|]
expr_stmt|;
comment|/* he regenerated */
if|if
condition|(
name|c
index|[
name|BLINDCOUNT
index|]
condition|)
name|c
index|[
name|BLINDCOUNT
index|]
operator|=
literal|1
expr_stmt|;
comment|/* cure blindness too!  */
if|if
condition|(
name|c
index|[
name|CONFUSE
index|]
condition|)
name|c
index|[
name|CONFUSE
index|]
operator|=
literal|1
expr_stmt|;
comment|/*	end confusion	*/
name|adjtime
argument_list|(
operator|(
name|long
operator|)
name|time_used
argument_list|)
expr_stmt|;
comment|/* adjust parameters for time change */
block|}
name|nap
argument_list|(
literal|1000
argument_list|)
expr_stmt|;
block|}
block|}
block|}
end_block

begin_escape
end_escape

begin_comment
comment|/*  *	for the first national bank of Larn  */
end_comment

begin_decl_stmt
name|int
name|lasttime
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* last time he was in bank */
end_comment

begin_function_decl
specifier|static
name|void
name|banktitle
parameter_list|()
function_decl|;
end_function_decl

begin_macro
name|obank
argument_list|()
end_macro

begin_block
block|{
name|banktitle
argument_list|(
literal|"    Welcome to the First National Bank of Larn."
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|obank2
argument_list|()
end_macro

begin_block
block|{
name|banktitle
argument_list|(
literal|"Welcome to the 5th level branch office of the First National Bank of Larn."
argument_list|)
expr_stmt|;
block|}
end_block

begin_function
specifier|static
name|void
name|banktitle
parameter_list|(
name|str
parameter_list|)
name|char
modifier|*
name|str
decl_stmt|;
block|{
name|nosignal
operator|=
literal|1
expr_stmt|;
comment|/* disable signals */
name|clear
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
name|str
argument_list|)
expr_stmt|;
if|if
condition|(
name|outstanding_taxes
operator|>
literal|0
condition|)
block|{
name|int
name|i
decl_stmt|;
name|lprcat
argument_list|(
literal|"\n\nThe Larn Revenue Service has ordered that your account be frozen until all\n"
argument_list|)
expr_stmt|;
name|beep
argument_list|()
expr_stmt|;
name|lprintf
argument_list|(
literal|"levied taxes have been paid.  They have also told us that you owe %d gp in\n"
argument_list|,
operator|(
name|long
operator|)
name|outstanding_taxes
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"taxes, and we must comply with them. We cannot serve you at this time.  Sorry.\n"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"We suggest you go to the LRS office and pay your taxes.\n"
argument_list|)
expr_stmt|;
name|cursors
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nPress "
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" to leave: "
argument_list|)
expr_stmt|;
name|lflush
argument_list|()
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|i
operator|!=
literal|'\33'
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
name|drawscreen
argument_list|()
expr_stmt|;
name|nosignal
operator|=
literal|0
expr_stmt|;
comment|/* enable signals */
return|return;
block|}
name|lprcat
argument_list|(
literal|"\n\n\tGemstone\t      Appraisal\t\tGemstone\t      Appraisal"
argument_list|)
expr_stmt|;
name|obanksub
argument_list|()
expr_stmt|;
name|nosignal
operator|=
literal|0
expr_stmt|;
comment|/* enable signals */
name|drawscreen
argument_list|()
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  *	function to put interest on your bank account  */
end_comment

begin_macro
name|ointerest
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|;
if|if
condition|(
name|c
index|[
name|BANKACCOUNT
index|]
operator|<
literal|0
condition|)
name|c
index|[
name|BANKACCOUNT
index|]
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|c
index|[
name|BANKACCOUNT
index|]
operator|>
literal|0
operator|)
operator|&&
operator|(
name|c
index|[
name|BANKACCOUNT
index|]
operator|<
literal|500000
operator|)
condition|)
block|{
name|i
operator|=
operator|(
name|gtime
operator|-
name|lasttime
operator|)
operator|/
literal|100
expr_stmt|;
comment|/* # mobuls elapsed */
while|while
condition|(
operator|(
name|i
operator|--
operator|>
literal|0
operator|)
operator|&&
operator|(
name|c
index|[
name|BANKACCOUNT
index|]
operator|<
literal|500000
operator|)
condition|)
name|c
index|[
name|BANKACCOUNT
index|]
operator|+=
name|c
index|[
name|BANKACCOUNT
index|]
operator|/
literal|250
expr_stmt|;
if|if
condition|(
name|c
index|[
name|BANKACCOUNT
index|]
operator|>
literal|500000
condition|)
name|c
index|[
name|BANKACCOUNT
index|]
operator|=
literal|500000
expr_stmt|;
comment|/* interest limit */
block|}
name|lasttime
operator|=
operator|(
name|gtime
operator|/
literal|100
operator|)
operator|*
literal|100
expr_stmt|;
block|}
end_block

begin_decl_stmt
specifier|static
name|short
name|gemorder
index|[
literal|26
index|]
init|=
block|{
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* the reference to screen location for each */
end_comment

begin_decl_stmt
specifier|static
name|long
name|gemvalue
index|[
literal|26
index|]
init|=
block|{
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* the appraisal of the gems */
end_comment

begin_macro
name|obanksub
argument_list|()
end_macro

begin_block
block|{
name|unsigned
name|long
name|amt
decl_stmt|;
name|int
name|i
decl_stmt|,
name|k
decl_stmt|;
name|ointerest
argument_list|()
expr_stmt|;
comment|/* credit any needed interest */
for|for
control|(
name|k
operator|=
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|26
condition|;
name|i
operator|++
control|)
switch|switch
condition|(
name|iven
index|[
name|i
index|]
condition|)
block|{
case|case
name|OLARNEYE
case|:
case|case
name|ODIAMOND
case|:
case|case
name|OEMERALD
case|:
case|case
name|ORUBY
case|:
case|case
name|OSAPPHIRE
case|:
if|if
condition|(
name|iven
index|[
name|i
index|]
operator|==
name|OLARNEYE
condition|)
block|{
name|gemvalue
index|[
name|i
index|]
operator|=
literal|250000
operator|-
operator|(
operator|(
name|gtime
operator|*
literal|7
operator|)
operator|/
literal|100
operator|)
operator|*
literal|100
expr_stmt|;
if|if
condition|(
name|gemvalue
index|[
name|i
index|]
operator|<
literal|50000
condition|)
name|gemvalue
index|[
name|i
index|]
operator|=
literal|50000
expr_stmt|;
block|}
else|else
name|gemvalue
index|[
name|i
index|]
operator|=
operator|(
literal|255
operator|&
name|ivenarg
index|[
name|i
index|]
operator|)
operator|*
literal|100
expr_stmt|;
name|gemorder
index|[
name|i
index|]
operator|=
name|k
expr_stmt|;
name|cursor
argument_list|(
operator|(
name|k
operator|%
literal|2
operator|)
operator|*
literal|40
operator|+
literal|1
argument_list|,
operator|(
name|k
operator|>>
literal|1
operator|)
operator|+
literal|4
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%c) %s"
argument_list|,
name|i
operator|+
literal|'a'
argument_list|,
name|objectname
index|[
name|iven
index|[
name|i
index|]
index|]
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
operator|(
name|k
operator|%
literal|2
operator|)
operator|*
literal|40
operator|+
literal|33
argument_list|,
operator|(
name|k
operator|>>
literal|1
operator|)
operator|+
literal|4
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%5d"
argument_list|,
operator|(
name|long
operator|)
name|gemvalue
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|k
operator|++
expr_stmt|;
block|}
empty_stmt|;
name|cursor
argument_list|(
literal|31
argument_list|,
literal|17
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"You have %8d gold pieces in the bank."
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|BANKACCOUNT
index|]
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
literal|40
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"You have %8d gold pieces"
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|c
index|[
name|BANKACCOUNT
index|]
operator|+
name|c
index|[
name|GOLD
index|]
operator|>=
literal|500000
condition|)
name|lprcat
argument_list|(
literal|"\nNote:  Larndom law states that only deposits under 500,000gp  can earn interest."
argument_list|)
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
name|cl_dn
argument_list|(
literal|1
argument_list|,
literal|20
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nYour wish? [("
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"d"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|") deposit, ("
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"w"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|") withdraw, ("
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"s"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|") sell a stone, or "
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"]  "
argument_list|)
expr_stmt|;
name|yrepcount
operator|=
literal|0
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|i
operator|!=
literal|'d'
operator|&&
name|i
operator|!=
literal|'w'
operator|&&
name|i
operator|!=
literal|'s'
operator|&&
name|i
operator|!=
literal|'\33'
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
switch|switch
condition|(
name|i
condition|)
block|{
case|case
literal|'d'
case|:
name|lprcat
argument_list|(
literal|"deposit\nHow much? "
argument_list|)
expr_stmt|;
name|amt
operator|=
name|readnum
argument_list|(
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|amt
operator|<
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but we can't take negative gold!"
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|2000
argument_list|)
expr_stmt|;
name|amt
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|amt
operator|>
name|c
index|[
name|GOLD
index|]
condition|)
block|{
name|lprcat
argument_list|(
literal|"  You don't have that much."
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|2000
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|c
index|[
name|GOLD
index|]
operator|-=
name|amt
expr_stmt|;
name|c
index|[
name|BANKACCOUNT
index|]
operator|+=
name|amt
expr_stmt|;
block|}
break|break;
case|case
literal|'w'
case|:
name|lprcat
argument_list|(
literal|"withdraw\nHow much? "
argument_list|)
expr_stmt|;
name|amt
operator|=
name|readnum
argument_list|(
operator|(
name|long
operator|)
name|c
index|[
name|BANKACCOUNT
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|amt
operator|<
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but we don't have any negative gold!"
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|2000
argument_list|)
expr_stmt|;
name|amt
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|amt
operator|>
name|c
index|[
name|BANKACCOUNT
index|]
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nYou don't have that much in the bank!"
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|2000
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|c
index|[
name|GOLD
index|]
operator|+=
name|amt
expr_stmt|;
name|c
index|[
name|BANKACCOUNT
index|]
operator|-=
name|amt
expr_stmt|;
block|}
break|break;
case|case
literal|'s'
case|:
name|lprcat
argument_list|(
literal|"\nWhich stone would you like to sell? "
argument_list|)
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|(
name|i
operator|<
literal|'a'
operator|||
name|i
operator|>
literal|'z'
operator|)
operator|&&
name|i
operator|!=
literal|'*'
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|i
operator|==
literal|'*'
condition|)
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|26
condition|;
name|i
operator|++
control|)
block|{
if|if
condition|(
name|gemvalue
index|[
name|i
index|]
condition|)
block|{
name|c
index|[
name|GOLD
index|]
operator|+=
name|gemvalue
index|[
name|i
index|]
expr_stmt|;
name|iven
index|[
name|i
index|]
operator|=
literal|0
expr_stmt|;
name|gemvalue
index|[
name|i
index|]
operator|=
literal|0
expr_stmt|;
name|k
operator|=
name|gemorder
index|[
name|i
index|]
expr_stmt|;
name|cursor
argument_list|(
operator|(
name|k
operator|%
literal|2
operator|)
operator|*
literal|40
operator|+
literal|1
argument_list|,
operator|(
name|k
operator|>>
literal|1
operator|)
operator|+
literal|4
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%39s"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|gemvalue
index|[
name|i
operator|=
name|i
operator|-
literal|'a'
index|]
operator|==
literal|0
condition|)
block|{
name|lprintf
argument_list|(
literal|"\nItem %c is not a gemstone!"
argument_list|,
name|i
operator|+
literal|'a'
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|2000
argument_list|)
expr_stmt|;
break|break;
block|}
name|c
index|[
name|GOLD
index|]
operator|+=
name|gemvalue
index|[
name|i
index|]
expr_stmt|;
name|iven
index|[
name|i
index|]
operator|=
literal|0
expr_stmt|;
name|gemvalue
index|[
name|i
index|]
operator|=
literal|0
expr_stmt|;
name|k
operator|=
name|gemorder
index|[
name|i
index|]
expr_stmt|;
name|cursor
argument_list|(
operator|(
name|k
operator|%
literal|2
operator|)
operator|*
literal|40
operator|+
literal|1
argument_list|,
operator|(
name|k
operator|>>
literal|1
operator|)
operator|+
literal|4
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%39s"
argument_list|,
literal|""
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|'\33'
case|:
return|return;
block|}
empty_stmt|;
name|cursor
argument_list|(
literal|40
argument_list|,
literal|17
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%8d"
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|BANKACCOUNT
index|]
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
literal|49
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|lprintf
argument_list|(
literal|"%8d"
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
block|}
block|}
end_block

begin_comment
comment|/* 	subroutine to appraise any stone for the bank  */
end_comment

begin_macro
name|appraise
argument_list|(
argument|gemstone
argument_list|)
end_macro

begin_decl_stmt
name|int
name|gemstone
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|int
name|j
decl_stmt|,
name|amt
decl_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
literal|26
condition|;
name|j
operator|++
control|)
if|if
condition|(
name|iven
index|[
name|j
index|]
operator|==
name|gemstone
condition|)
block|{
name|lprintf
argument_list|(
literal|"\nI see you have %s"
argument_list|,
name|objectname
index|[
name|gemstone
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|gemstone
operator|==
name|OLARNEYE
condition|)
name|lprcat
argument_list|(
literal|"  I must commend you.  I didn't think\nyou could get it."
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"  Shall I appraise it for you? "
argument_list|)
expr_stmt|;
name|yrepcount
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|getyn
argument_list|()
operator|==
literal|'y'
condition|)
block|{
name|lprcat
argument_list|(
literal|"yes.\n  Just one moment please \n"
argument_list|)
expr_stmt|;
name|nap
argument_list|(
literal|1000
argument_list|)
expr_stmt|;
if|if
condition|(
name|gemstone
operator|==
name|OLARNEYE
condition|)
block|{
name|amt
operator|=
literal|250000
operator|-
operator|(
operator|(
name|gtime
operator|*
literal|7
operator|)
operator|/
literal|100
operator|)
operator|*
literal|100
expr_stmt|;
if|if
condition|(
name|amt
operator|<
literal|50000
condition|)
name|amt
operator|=
literal|50000
expr_stmt|;
block|}
else|else
name|amt
operator|=
operator|(
literal|255
operator|&
name|ivenarg
index|[
name|j
index|]
operator|)
operator|*
literal|100
expr_stmt|;
name|lprintf
argument_list|(
literal|"\nI can see this is an excellent stone, It is worth %d"
argument_list|,
operator|(
name|long
operator|)
name|amt
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"\nWould you like to sell it to us? "
argument_list|)
expr_stmt|;
name|yrepcount
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|getyn
argument_list|()
operator|==
literal|'y'
condition|)
block|{
name|lprcat
argument_list|(
literal|"yes\n"
argument_list|)
expr_stmt|;
name|c
index|[
name|GOLD
index|]
operator|+=
name|amt
expr_stmt|;
name|iven
index|[
name|j
index|]
operator|=
literal|0
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"no thank you.\n"
argument_list|)
expr_stmt|;
if|if
condition|(
name|gemstone
operator|==
name|OLARNEYE
condition|)
name|lprcat
argument_list|(
literal|"It is, of course, your privilege to keep the stone\n"
argument_list|)
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"no\nO. K.\n"
argument_list|)
expr_stmt|;
block|}
block|}
end_block

begin_comment
comment|/* 	function for the trading post  */
end_comment

begin_expr_stmt
specifier|static
name|otradhead
argument_list|()
block|{
name|clear
argument_list|()
block|;
name|lprcat
argument_list|(
literal|"Welcome to the Larn Trading Post.  We buy items that explorers no longer find\n"
argument_list|)
block|;
name|lprcat
argument_list|(
literal|"useful.  Since the condition of the items you bring in is not certain,\n"
argument_list|)
block|;
name|lprcat
argument_list|(
literal|"and we incur great expense in reconditioning the items, we usually pay\n"
argument_list|)
block|;
name|lprcat
argument_list|(
literal|"only 20% of their value were they to be new.  If the items are badly\n"
argument_list|)
block|;
name|lprcat
argument_list|(
literal|"damaged, we will pay only 10% of their new value.\n\n"
argument_list|)
block|; 	}
name|otradepost
argument_list|()
block|{
name|int
name|i
block|,
name|j
block|,
name|value
block|,
name|isub
block|,
name|izarg
block|;
name|dnditm
operator|=
name|dndcount
operator|=
literal|0
block|;
name|nosignal
operator|=
literal|1
block|;
comment|/* disable signals */
name|resetscroll
argument_list|()
block|;
name|otradhead
argument_list|()
block|;
while|while
condition|(
literal|1
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nWhat item do you want to sell to us ["
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"*"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|" for list, or "
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"] ? "
argument_list|)
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|i
operator|>
literal|'z'
operator|||
operator|(
name|i
operator|<
literal|'a'
operator|&&
name|i
operator|!=
literal|'*'
operator|&&
name|i
operator|!=
literal|'\33'
operator|&&
name|i
operator|!=
literal|'.'
operator|)
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|i
operator|==
literal|'\33'
condition|)
block|{
name|setscroll
argument_list|()
expr_stmt|;
name|recalc
argument_list|()
expr_stmt|;
name|drawscreen
argument_list|()
expr_stmt|;
name|nosignal
operator|=
literal|0
expr_stmt|;
comment|/* enable signals */
return|return;
block|}
name|isub
operator|=
name|i
operator|-
literal|'a'
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|j
operator|=
literal|0
expr_stmt|;
end_expr_stmt

begin_if
if|if
condition|(
name|iven
index|[
name|isub
index|]
operator|==
name|OSCROLL
condition|)
if|if
condition|(
name|scrollname
index|[
name|ivenarg
index|[
name|isub
index|]
index|]
index|[
literal|0
index|]
operator|==
literal|0
condition|)
block|{
name|j
operator|=
literal|1
expr_stmt|;
name|cnsitm
argument_list|()
expr_stmt|;
block|}
end_if

begin_comment
comment|/* can't sell unidentified item */
end_comment

begin_if
if|if
condition|(
name|iven
index|[
name|isub
index|]
operator|==
name|OPOTION
condition|)
if|if
condition|(
name|potionname
index|[
name|ivenarg
index|[
name|isub
index|]
index|]
index|[
literal|0
index|]
operator|==
literal|0
condition|)
block|{
name|j
operator|=
literal|1
expr_stmt|;
name|cnsitm
argument_list|()
expr_stmt|;
block|}
end_if

begin_comment
comment|/* can't sell unidentified item */
end_comment

begin_if
if|if
condition|(
operator|!
name|j
condition|)
if|if
condition|(
name|i
operator|==
literal|'*'
condition|)
block|{
name|clear
argument_list|()
expr_stmt|;
name|qshowstr
argument_list|()
expr_stmt|;
name|otradhead
argument_list|()
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|iven
index|[
name|isub
index|]
operator|==
literal|0
condition|)
name|lprintf
argument_list|(
literal|"\nYou don't have item %c!"
argument_list|,
name|isub
operator|+
literal|'a'
argument_list|)
expr_stmt|;
else|else
block|{
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
name|maxitm
condition|;
name|j
operator|++
control|)
if|if
condition|(
operator|(
name|itm
index|[
name|j
index|]
operator|.
name|obj
operator|==
name|iven
index|[
name|isub
index|]
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|ODIAMOND
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|ORUBY
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|OEMERALD
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|OSAPPHIRE
operator|)
condition|)
block|{
name|srcount
operator|=
literal|0
expr_stmt|;
name|show3
argument_list|(
name|isub
argument_list|)
expr_stmt|;
comment|/* show what the item was */
if|if
condition|(
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|ODIAMOND
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|ORUBY
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|OEMERALD
operator|)
operator|||
operator|(
name|iven
index|[
name|isub
index|]
operator|==
name|OSAPPHIRE
operator|)
condition|)
name|value
operator|=
literal|20
operator|*
name|ivenarg
index|[
name|isub
index|]
expr_stmt|;
elseif|else
if|if
condition|(
operator|(
name|itm
index|[
name|j
index|]
operator|.
name|obj
operator|==
name|OSCROLL
operator|)
operator|||
operator|(
name|itm
index|[
name|j
index|]
operator|.
name|obj
operator|==
name|OPOTION
operator|)
condition|)
name|value
operator|=
literal|2
operator|*
name|itm
index|[
name|j
operator|+
name|ivenarg
index|[
name|isub
index|]
index|]
operator|.
name|price
expr_stmt|;
else|else
block|{
name|izarg
operator|=
name|ivenarg
index|[
name|isub
index|]
expr_stmt|;
name|value
operator|=
name|itm
index|[
name|j
index|]
operator|.
name|price
expr_stmt|;
comment|/* appreciate if a +n object */
if|if
condition|(
name|izarg
operator|>=
literal|0
condition|)
name|value
operator|*=
literal|2
expr_stmt|;
while|while
condition|(
operator|(
name|izarg
operator|--
operator|>
literal|0
operator|)
operator|&&
operator|(
operator|(
name|value
operator|=
literal|14
operator|*
operator|(
literal|67
operator|+
name|value
operator|)
operator|/
literal|10
operator|)
operator|<
literal|500000
operator|)
condition|)
empty_stmt|;
block|}
name|lprintf
argument_list|(
literal|"\nItem (%c) is worth %d gold pieces to us.  Do you want to sell it? "
argument_list|,
name|i
argument_list|,
operator|(
name|long
operator|)
name|value
argument_list|)
expr_stmt|;
name|yrepcount
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|getyn
argument_list|()
operator|==
literal|'y'
condition|)
block|{
name|lprcat
argument_list|(
literal|"yes\n"
argument_list|)
expr_stmt|;
name|c
index|[
name|GOLD
index|]
operator|+=
name|value
expr_stmt|;
if|if
condition|(
name|c
index|[
name|WEAR
index|]
operator|==
name|isub
condition|)
name|c
index|[
name|WEAR
index|]
operator|=
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|c
index|[
name|WIELD
index|]
operator|==
name|isub
condition|)
name|c
index|[
name|WIELD
index|]
operator|=
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|c
index|[
name|SHIELD
index|]
operator|==
name|isub
condition|)
name|c
index|[
name|SHIELD
index|]
operator|=
operator|-
literal|1
expr_stmt|;
name|adjustcvalues
argument_list|(
name|iven
index|[
name|isub
index|]
argument_list|,
name|ivenarg
index|[
name|isub
index|]
argument_list|)
expr_stmt|;
name|iven
index|[
name|isub
index|]
operator|=
literal|0
expr_stmt|;
block|}
else|else
name|lprcat
argument_list|(
literal|"no thanks.\n"
argument_list|)
expr_stmt|;
name|j
operator|=
name|maxitm
operator|+
literal|100
expr_stmt|;
comment|/* get out of the inner loop */
block|}
if|if
condition|(
name|j
operator|<=
name|maxitm
operator|+
literal|2
condition|)
name|lprcat
argument_list|(
literal|"\nSo sorry, but we are not authorized to accept that item."
argument_list|)
expr_stmt|;
block|}
end_if

begin_macro
unit|}   }
name|cnsitm
argument_list|()
end_macro

begin_block
block|{
name|lprcat
argument_list|(
literal|"\nSorry, we can't accept unidentified objects."
argument_list|)
expr_stmt|;
block|}
end_block

begin_comment
comment|/*  *	for the Larn Revenue Service  */
end_comment

begin_macro
name|olrs
argument_list|()
end_macro

begin_block
block|{
name|int
name|i
decl_stmt|,
name|first
decl_stmt|;
name|unsigned
name|long
name|amt
decl_stmt|;
name|first
operator|=
name|nosignal
operator|=
literal|1
expr_stmt|;
comment|/* disable signals */
name|clear
argument_list|()
expr_stmt|;
name|resetscroll
argument_list|()
expr_stmt|;
name|cursor
argument_list|(
literal|1
argument_list|,
literal|4
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"Welcome to the Larn Revenue Service district office.  How can we help you?"
argument_list|)
expr_stmt|;
while|while
condition|(
literal|1
condition|)
block|{
if|if
condition|(
name|first
condition|)
block|{
name|first
operator|=
literal|0
expr_stmt|;
goto|goto
name|nxt
goto|;
block|}
name|cursors
argument_list|()
expr_stmt|;
name|lprcat
argument_list|(
literal|"\n\nYour wish? [("
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"p"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|") pay taxes, or "
argument_list|)
expr_stmt|;
name|standout
argument_list|(
literal|"escape"
argument_list|)
expr_stmt|;
name|lprcat
argument_list|(
literal|"]  "
argument_list|)
expr_stmt|;
name|yrepcount
operator|=
literal|0
expr_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|i
operator|!=
literal|'p'
operator|&&
name|i
operator|!=
literal|'\33'
condition|)
name|i
operator|=
name|getchar
argument_list|()
expr_stmt|;
switch|switch
condition|(
name|i
condition|)
block|{
case|case
literal|'p'
case|:
name|lprcat
argument_list|(
literal|"pay taxes\nHow much? "
argument_list|)
expr_stmt|;
name|amt
operator|=
name|readnum
argument_list|(
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
if|if
condition|(
name|amt
operator|<
literal|0
condition|)
block|{
name|lprcat
argument_list|(
literal|"\nSorry, but we can't take negative gold\n"
argument_list|)
expr_stmt|;
name|amt
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|amt
operator|>
name|c
index|[
name|GOLD
index|]
condition|)
name|lprcat
argument_list|(
literal|"  You don't have that much.\n"
argument_list|)
expr_stmt|;
else|else
name|c
index|[
name|GOLD
index|]
operator|-=
name|paytaxes
argument_list|(
operator|(
name|long
operator|)
name|amt
argument_list|)
expr_stmt|;
break|break;
case|case
literal|'\33'
case|:
name|nosignal
operator|=
literal|0
expr_stmt|;
comment|/* enable signals */
name|setscroll
argument_list|()
expr_stmt|;
name|drawscreen
argument_list|()
expr_stmt|;
return|return;
block|}
empty_stmt|;
name|nxt
label|:
name|cursor
argument_list|(
literal|1
argument_list|,
literal|6
argument_list|)
expr_stmt|;
if|if
condition|(
name|outstanding_taxes
operator|>
literal|0
condition|)
name|lprintf
argument_list|(
literal|"You presently owe %d gp in taxes.  "
argument_list|,
operator|(
name|long
operator|)
name|outstanding_taxes
argument_list|)
expr_stmt|;
else|else
name|lprcat
argument_list|(
literal|"You do not owe us any taxes.           "
argument_list|)
expr_stmt|;
name|cursor
argument_list|(
literal|1
argument_list|,
literal|8
argument_list|)
expr_stmt|;
if|if
condition|(
name|c
index|[
name|GOLD
index|]
operator|>
literal|0
condition|)
name|lprintf
argument_list|(
literal|"You have %6d gp.    "
argument_list|,
operator|(
name|long
operator|)
name|c
index|[
name|GOLD
index|]
argument_list|)
expr_stmt|;
else|else
name|lprcat
argument_list|(
literal|"You have no gold pieces.  "
argument_list|)
expr_stmt|;
block|}
block|}
end_block

end_unit

