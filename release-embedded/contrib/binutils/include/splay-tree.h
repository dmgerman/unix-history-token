begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* A splay-tree datatype.      Copyright 1998, 1999, 2000, 2002 Free Software Foundation, Inc.    Contributed by Mark Mitchell (mark@markmitchell.com).  This file is part of GCC.     GCC is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2, or (at your option) any later version.  GCC is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with GCC; see the file COPYING.  If not, write to the Free Software Foundation, 51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.  */
end_comment

begin_comment
comment|/* For an easily readable description of splay-trees, see:       Lewis, Harry R. and Denenberg, Larry.  Data Structures and Their      Algorithms.  Harper-Collins, Inc.  1991.       The major feature of splay trees is that all basic tree operations    are amortized O(log n) time for a tree with n nodes.  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|_SPLAY_TREE_H
end_ifndef

begin_define
define|#
directive|define
name|_SPLAY_TREE_H
end_define

begin_ifdef
ifdef|#
directive|ifdef
name|__cplusplus
end_ifdef

begin_extern
extern|extern
literal|"C"
block|{
endif|#
directive|endif
comment|/* __cplusplus */
include|#
directive|include
file|"ansidecl.h"
ifndef|#
directive|ifndef
name|GTY
define|#
directive|define
name|GTY
parameter_list|(
name|X
parameter_list|)
endif|#
directive|endif
comment|/* Use typedefs for the key and data types to facilitate changing    these types, if necessary.  These types should be sufficiently wide    that any pointer or scalar can be cast to these types, and then    cast back, without loss of precision.  */
typedef|typedef
name|unsigned
name|long
name|int
name|splay_tree_key
typedef|;
typedef|typedef
name|unsigned
name|long
name|int
name|splay_tree_value
typedef|;
comment|/* Forward declaration for a node in the tree.  */
typedef|typedef
name|struct
name|splay_tree_node_s
modifier|*
name|splay_tree_node
typedef|;
comment|/* The type of a function which compares two splay-tree keys.  The    function should return values as for qsort.  */
typedef|typedef
name|int
function_decl|(
modifier|*
name|splay_tree_compare_fn
function_decl|)
parameter_list|(
name|splay_tree_key
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
comment|/* The type of a function used to deallocate any resources associated    with the key.  */
typedef|typedef
name|void
function_decl|(
modifier|*
name|splay_tree_delete_key_fn
function_decl|)
parameter_list|(
name|splay_tree_key
parameter_list|)
function_decl|;
comment|/* The type of a function used to deallocate any resources associated    with the value.  */
typedef|typedef
name|void
function_decl|(
modifier|*
name|splay_tree_delete_value_fn
function_decl|)
parameter_list|(
name|splay_tree_value
parameter_list|)
function_decl|;
comment|/* The type of a function used to iterate over the tree.  */
typedef|typedef
name|int
function_decl|(
modifier|*
name|splay_tree_foreach_fn
function_decl|)
parameter_list|(
name|splay_tree_node
parameter_list|,
name|void
modifier|*
parameter_list|)
function_decl|;
comment|/* The type of a function used to allocate memory for tree root and    node structures.  The first argument is the number of bytes needed;    the second is a data pointer the splay tree functions pass through    to the allocator.  This function must never return zero.  */
typedef|typedef
name|void
modifier|*
function_decl|(
modifier|*
name|splay_tree_allocate_fn
function_decl|)
parameter_list|(
name|int
parameter_list|,
name|void
modifier|*
parameter_list|)
function_decl|;
comment|/* The type of a function used to free memory allocated using the    corresponding splay_tree_allocate_fn.  The first argument is the    memory to be freed; the latter is a data pointer the splay tree    functions pass through to the freer.  */
typedef|typedef
name|void
function_decl|(
modifier|*
name|splay_tree_deallocate_fn
function_decl|)
parameter_list|(
name|void
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|)
function_decl|;
comment|/* The nodes in the splay tree.  */
name|struct
name|splay_tree_node_s
name|GTY
argument_list|(
operator|(
operator|)
argument_list|)
block|{
comment|/* The key.  */
name|splay_tree_key
name|GTY
argument_list|(
operator|(
name|use_param1
operator|)
argument_list|)
name|key
decl_stmt|;
comment|/* The value.  */
name|splay_tree_value
name|GTY
argument_list|(
operator|(
name|use_param2
operator|)
argument_list|)
name|value
decl_stmt|;
comment|/* The left and right children, respectively.  */
name|splay_tree_node
name|GTY
argument_list|(
operator|(
name|use_params
operator|)
argument_list|)
name|left
decl_stmt|;
name|splay_tree_node
name|GTY
argument_list|(
operator|(
name|use_params
operator|)
argument_list|)
name|right
decl_stmt|;
block|}
empty_stmt|;
comment|/* The splay tree itself.  */
name|struct
name|splay_tree_s
name|GTY
argument_list|(
operator|(
operator|)
argument_list|)
block|{
comment|/* The root of the tree.  */
name|splay_tree_node
name|GTY
argument_list|(
operator|(
name|use_params
operator|)
argument_list|)
name|root
decl_stmt|;
comment|/* The comparision function.  */
name|splay_tree_compare_fn
name|comp
decl_stmt|;
comment|/* The deallocate-key function.  NULL if no cleanup is necessary.  */
name|splay_tree_delete_key_fn
name|delete_key
decl_stmt|;
comment|/* The deallocate-value function.  NULL if no cleanup is necessary.  */
name|splay_tree_delete_value_fn
name|delete_value
decl_stmt|;
comment|/* Allocate/free functions, and a data pointer to pass to them.  */
name|splay_tree_allocate_fn
name|allocate
decl_stmt|;
name|splay_tree_deallocate_fn
name|deallocate
decl_stmt|;
name|void
modifier|*
name|GTY
argument_list|(
operator|(
name|skip
operator|)
argument_list|)
name|allocate_data
decl_stmt|;
block|}
empty_stmt|;
typedef|typedef
name|struct
name|splay_tree_s
modifier|*
name|splay_tree
typedef|;
specifier|extern
name|splay_tree
name|splay_tree_new
parameter_list|(
name|splay_tree_compare_fn
parameter_list|,
name|splay_tree_delete_key_fn
parameter_list|,
name|splay_tree_delete_value_fn
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree
name|splay_tree_new_with_allocator
parameter_list|(
name|splay_tree_compare_fn
parameter_list|,
name|splay_tree_delete_key_fn
parameter_list|,
name|splay_tree_delete_value_fn
parameter_list|,
name|splay_tree_allocate_fn
parameter_list|,
name|splay_tree_deallocate_fn
parameter_list|,
name|void
modifier|*
parameter_list|)
function_decl|;
specifier|extern
name|void
name|splay_tree_delete
parameter_list|(
name|splay_tree
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree_node
name|splay_tree_insert
parameter_list|(
name|splay_tree
parameter_list|,
name|splay_tree_key
parameter_list|,
name|splay_tree_value
parameter_list|)
function_decl|;
specifier|extern
name|void
name|splay_tree_remove
parameter_list|(
name|splay_tree
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree_node
name|splay_tree_lookup
parameter_list|(
name|splay_tree
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree_node
name|splay_tree_predecessor
parameter_list|(
name|splay_tree
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree_node
name|splay_tree_successor
parameter_list|(
name|splay_tree
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree_node
name|splay_tree_max
parameter_list|(
name|splay_tree
parameter_list|)
function_decl|;
specifier|extern
name|splay_tree_node
name|splay_tree_min
parameter_list|(
name|splay_tree
parameter_list|)
function_decl|;
specifier|extern
name|int
name|splay_tree_foreach
parameter_list|(
name|splay_tree
parameter_list|,
name|splay_tree_foreach_fn
parameter_list|,
name|void
modifier|*
parameter_list|)
function_decl|;
specifier|extern
name|int
name|splay_tree_compare_ints
parameter_list|(
name|splay_tree_key
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
specifier|extern
name|int
name|splay_tree_compare_pointers
parameter_list|(
name|splay_tree_key
parameter_list|,
name|splay_tree_key
parameter_list|)
function_decl|;
ifdef|#
directive|ifdef
name|__cplusplus
block|}
end_extern

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* __cplusplus */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* _SPLAY_TREE_H */
end_comment

end_unit

