begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Contributed to 386bsd 0.1 and later versions  *  *	Copyright 1992 by Holger Veit  *	May be freely used with Bill Jolitz's port of   *	386bsd and may be included in a 386bsd collection  *	as long as binary and source are available and reproduce the above  *	copyright.  *  *	You may freely modify this code and contribute improvements based  *	on this code as long as you don't claim to be the original author.  *	Commercial use of this source requires permittance of the copyright   *	holder. A general license for 386bsd will override this restriction.  *  *	Use at your own risk. The copyright holder or any person who makes  *	this code available for the public (administrators of public archives  *	for instance) are not responsible for any harm to hardware or software  *	that might happen due to wrong application or program faults.  *  * You must have the codrv-0.1.1 or later driver in the same package   * generated into the 386bsd kernel, otherwise this program does not work.  *  *	@(#)xc_fns.c	1.0 (386bsd contribution) 01/10/93  */
end_comment

begin_comment
comment|/* these are EXPERIMENTAL routines to replace the standard str* functions  * These functions work with the XCHAR data type.  * note that still the problem of the NULL byte exists  *  * This is not intended to be a proposal for multibyte characters.  *  */
end_comment

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<sys/ioctl.h>
end_include

begin_include
include|#
directive|include
file|<sys/ioctl_pc.h>
end_include

begin_function
name|XCHAR
modifier|*
name|XC_strcpy
parameter_list|(
name|XCHAR
modifier|*
name|t
parameter_list|,
name|XCHAR
modifier|*
name|f
parameter_list|)
block|{
name|XCHAR
modifier|*
name|p
init|=
name|t
decl_stmt|;
while|while
condition|(
operator|*
name|t
operator|++
operator|=
operator|*
name|f
operator|++
condition|)
empty_stmt|;
return|return
name|p
return|;
block|}
end_function

begin_function
name|XCHAR
modifier|*
name|XC_strncpy
parameter_list|(
name|XCHAR
modifier|*
name|t
parameter_list|,
name|XCHAR
modifier|*
name|f
parameter_list|,
name|int
name|n
parameter_list|)
block|{
name|XCHAR
modifier|*
name|p
init|=
name|t
decl_stmt|;
while|while
condition|(
name|n
operator|>
literal|0
condition|)
block|{
operator|*
name|t
operator|++
operator|=
operator|*
name|f
operator|++
operator|,
name|n
operator|--
expr_stmt|;
block|}
return|return
name|p
return|;
block|}
end_function

begin_function
name|int
name|XC_strlen
parameter_list|(
name|XCHAR
modifier|*
name|s
parameter_list|)
block|{
name|int
name|i
init|=
literal|0
decl_stmt|;
while|while
condition|(
operator|!
operator|*
name|s
operator|++
condition|)
name|i
operator|++
expr_stmt|;
return|return
name|i
return|;
block|}
end_function

begin_function
name|XCHAR
modifier|*
name|XC_char2XCHAR
parameter_list|(
name|XCHAR
modifier|*
name|t
parameter_list|,
name|char
modifier|*
name|f
parameter_list|,
name|int
name|n
parameter_list|)
block|{
while|while
condition|(
name|n
operator|>=
literal|0
condition|)
block|{
operator|*
name|t
operator|++
operator|=
operator|(
name|XCHAR
operator|)
operator|*
name|f
expr_stmt|;
name|f
operator|++
expr_stmt|;
name|n
operator|--
expr_stmt|;
block|}
return|return
name|t
return|;
block|}
end_function

begin_function
name|XCHAR
modifier|*
name|XC_strcat
parameter_list|(
name|XCHAR
modifier|*
name|t
parameter_list|,
name|XCHAR
modifier|*
name|f
parameter_list|)
block|{
name|XCHAR
modifier|*
name|p
init|=
name|t
decl_stmt|;
while|while
condition|(
operator|!
operator|*
name|t
condition|)
name|t
operator|++
expr_stmt|;
while|while
condition|(
operator|*
name|t
operator|++
operator|=
operator|*
name|f
operator|++
condition|)
empty_stmt|;
return|return
name|p
return|;
block|}
end_function

end_unit

