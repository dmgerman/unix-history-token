begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * HISTORY  * $Log: scsi_tape.h,v $  * Revision 1.2  1993/01/26  18:39:08  julian  * add the 'write protected' bit in the device status struct.  *  * Revision 1.1  1992/09/26  22:10:21  julian  * Initial revision  *  *  * PATCHES MAGIC                LEVEL   PATCH THAT GOT US HERE  * --------------------         -----   ----------------------  * CURRENT PATCH LEVEL:         1       00098  * --------------------         -----   ----------------------  *  * 16 Feb 93	Julian Elischer		ADDED for SCSI system  *   */
end_comment

begin_comment
comment|/*  * SCSI tape interface description  */
end_comment

begin_comment
comment|/*  * Written by Julian Elischer (julian@tfs.com)  * for TRW Financial Systems.  *  * TRW Financial Systems, in accordance with their agreement with Carnegie  * Mellon University, makes this software available to CMU to distribute  * or use in any manner that they see fit as long as this message is kept with   * the software. For this reason TFS also grants any other persons or  * organisations permission to use or modify this software.  *  * TFS supplies this software to be publicly redistributed  * on the understanding that TFS is not responsible for the correct  * functioning of this software in any circumstances.  *  */
end_comment

begin_comment
comment|/*  * Ported to run under 386BSD by Julian Elischer (julian@tfs.com) Sept 1992  */
end_comment

begin_comment
comment|/*  * SCSI command format  */
end_comment

begin_struct
struct|struct
name|scsi_rw_tape
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|fixed
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|4
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|len
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
name|rw_tape
struct|;
end_struct

begin_struct
struct|struct
name|scsi_space
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|code
range|:
literal|2
decl_stmt|;
name|u_char
label|:
literal|3
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|number
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
name|space
struct|;
end_struct

begin_define
define|#
directive|define
name|SP_BLKS
value|0
end_define

begin_define
define|#
directive|define
name|SP_FILEMARKS
value|1
end_define

begin_define
define|#
directive|define
name|SP_SEQ_FILEMARKS
value|2
end_define

begin_define
define|#
directive|define
name|SP_EOM
value|3
end_define

begin_struct
struct|struct
name|scsi_write_filemarks
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|number
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
name|write_filemarks
struct|;
end_struct

begin_struct
struct|struct
name|scsi_rewind
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|immed
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|4
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
name|rewind
struct|;
end_struct

begin_struct
struct|struct
name|scsi_load
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
name|immed
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|4
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|2
index|]
decl_stmt|;
name|u_char
name|load
range|:
literal|1
decl_stmt|;
name|u_char
name|reten
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
name|load
struct|;
end_struct

begin_define
define|#
directive|define
name|LD_UNLOAD
value|0
end_define

begin_define
define|#
directive|define
name|LD_LOAD
value|1
end_define

begin_struct
struct|struct
name|scsi_blk_limits
block|{
name|u_char
name|op_code
decl_stmt|;
name|u_char
label|:
literal|5
expr_stmt|;
name|u_char
name|lun
range|:
literal|3
decl_stmt|;
name|u_char
name|unused
index|[
literal|3
index|]
decl_stmt|;
name|u_char
name|link
range|:
literal|1
decl_stmt|;
name|u_char
name|flag
range|:
literal|1
decl_stmt|;
name|u_char
label|:
literal|6
expr_stmt|;
block|}
name|blk_limits
struct|;
end_struct

begin_comment
comment|/*  * Opcodes  */
end_comment

begin_define
define|#
directive|define
name|REWIND
value|0x01
end_define

begin_define
define|#
directive|define
name|READ_BLK_LIMITS
value|0x05
end_define

begin_define
define|#
directive|define
name|READ_COMMAND_TAPE
value|0x08
end_define

begin_define
define|#
directive|define
name|WRITE_COMMAND_TAPE
value|0x0a
end_define

begin_define
define|#
directive|define
name|WRITE_FILEMARKS
value|0x10
end_define

begin_define
define|#
directive|define
name|SPACE
value|0x11
end_define

begin_define
define|#
directive|define
name|LOAD_UNLOAD
value|0x1b
end_define

begin_comment
comment|/* same as above */
end_comment

begin_struct
struct|struct
name|scsi_blk_limits_data
block|{
name|u_char
name|reserved
decl_stmt|;
name|u_char
name|max_length_2
decl_stmt|;
comment|/* Most significant */
name|u_char
name|max_length_1
decl_stmt|;
name|u_char
name|max_length_0
decl_stmt|;
comment|/* Least significant */
name|u_char
name|min_length_1
decl_stmt|;
comment|/* Most significant */
name|u_char
name|min_length_0
decl_stmt|;
comment|/* Least significant */
block|}
struct|;
end_struct

begin_struct
struct|struct
name|scsi_mode_header_tape
block|{
name|u_char
name|data_length
decl_stmt|;
comment|/* Sense data length */
name|u_char
name|medium_type
decl_stmt|;
name|u_char
name|speed
range|:
literal|4
decl_stmt|;
name|u_char
name|buf_mode
range|:
literal|3
decl_stmt|;
name|u_char
name|write_protected
range|:
literal|1
decl_stmt|;
name|u_char
name|blk_desc_len
decl_stmt|;
block|}
struct|;
end_struct

begin_define
define|#
directive|define
name|QIC_120
value|0x0f
end_define

begin_define
define|#
directive|define
name|QIC_150
value|0x10
end_define

begin_define
define|#
directive|define
name|QIC_320
value|0x11
end_define

begin_define
define|#
directive|define
name|QIC_525
value|0x11
end_define

begin_define
define|#
directive|define
name|QIC_1320
value|0x12
end_define

end_unit

