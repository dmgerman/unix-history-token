begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1988 University of Utah.  * Copyright (c) 1982, 1990 The Regents of the University of California.  * All rights reserved.  *  * This code is derived from software contributed to Berkeley by  * the Systems Programming Group of the University of Utah Computer  * Science Department.  *  * %sccs.include.redist.c%  *  * from: Utah $Hdr: rd_compat.c 1.1 92/12/21$  *  *	@(#)rd_compat.c	7.2 (Berkeley) %G%  */
end_comment

begin_comment
comment|/*  * Compatibility for CS80 disks without disklabels.  */
end_comment

begin_include
include|#
directive|include
file|"rd.h"
end_include

begin_if
if|#
directive|if
name|NRD
operator|>
literal|0
end_if

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<sys/disklabel.h>
end_include

begin_include
include|#
directive|include
file|<hp/dev/device.h>
end_include

begin_include
include|#
directive|include
file|<hp300/dev/rdreg.h>
end_include

begin_include
include|#
directive|include
file|<hp300/dev/rdvar.h>
end_include

begin_comment
comment|/*  * CS/80 partitions.  We reserve the first cylinder for a LIF  * style boot directory (the 8k allowed in the BSD filesystem  * is just way too small).  This boot area is outside of all but  * the C partition.  This implies that you cannot use the C   * partition on a bootable disk since the filesystem would overlay  * the boot area.  You must use the A partition.  *  * These maps support four basic layouts:  *  *	A/B/G:   This is the "traditional" setup for a bootable disk.  *	         A is the root partition, B the swap, and G a user partition.  *	A/D/H:   This is a setup for bootable systems requiring more swap  *		 (e.g. those who use HPCL).  It has A as the root, D as a  *		 larger swap, and H as a smaller user partition.  *	A/D/E/F: Similar to A/D/H with E and F breaking H into two partitions.  *		 E could be used for /usr and F for users.  *	C:       This gives a single, non-bootable, large user filesystem.  *	         Good for second drives on a machine (e.g. /usr/src).  */
end_comment

begin_struct
struct|struct
name|size
block|{
name|daddr_t
name|nblocks
decl_stmt|;
name|int
name|cyloff
decl_stmt|;
block|}
name|rd7945A_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|15904
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 142 */
name|RDSZ
argument_list|(
literal|20160
argument_list|)
block|,
literal|143
block|,
comment|/* B=cyl 143 thru 322 */
name|RDSZ
argument_list|(
literal|108416
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 967 */
name|RDSZ
argument_list|(
literal|40320
argument_list|)
block|,
literal|143
block|,
comment|/* D=cyl 143 thru 502 */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* E=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* F=<undefined> */
name|RDSZ
argument_list|(
literal|72240
argument_list|)
block|,
literal|323
block|,
comment|/* G=cyl 323 thru 967 */
name|RDSZ
argument_list|(
literal|52080
argument_list|)
block|,
literal|503
block|,
comment|/* H=cyl 503 thru 967 */
block|}
struct|,
name|rd9134D_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|15936
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 166 */
name|RDSZ
argument_list|(
literal|13056
argument_list|)
block|,
literal|167
block|,
comment|/* B=cyl 167 thru 302 */
name|RDSZ
argument_list|(
literal|29088
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 302 */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* D=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* E=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* F=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* G=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* H=<undefined> */
block|}
struct|,
name|rd9122S_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* A=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* B=<undefined> */
name|RDSZ
argument_list|(
literal|1232
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 76 */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* D=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* E=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* F=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* G=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* H=<undefined> */
block|}
struct|,
name|rd7912P_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|15904
argument_list|)
block|,
literal|0
block|,
comment|/* A=cyl 1 thru 71 */
name|RDSZ
argument_list|(
literal|22400
argument_list|)
block|,
literal|72
block|,
comment|/* B=cyl 72 thru 171 */
name|RDSZ
argument_list|(
literal|128128
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 571 */
name|RDSZ
argument_list|(
literal|42560
argument_list|)
block|,
literal|72
block|,
comment|/* D=cyl 72 thru 261 */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|292
block|,
comment|/* E=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|542
block|,
comment|/* F=<undefined> */
name|RDSZ
argument_list|(
literal|89600
argument_list|)
block|,
literal|172
block|,
comment|/* G=cyl 221 thru 571 */
name|RDSZ
argument_list|(
literal|69440
argument_list|)
block|,
literal|262
block|,
comment|/* H=cyl 262 thru 571 */
block|}
struct|,
name|rd7914P_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|15904
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 71 */
name|RDSZ
argument_list|(
literal|40320
argument_list|)
block|,
literal|72
block|,
comment|/* B=cyl 72 thru 251 */
name|RDSZ
argument_list|(
literal|258048
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1151 */
name|RDSZ
argument_list|(
literal|64960
argument_list|)
block|,
literal|72
block|,
comment|/* D=cyl 72 thru 361 */
name|RDSZ
argument_list|(
literal|98560
argument_list|)
block|,
literal|362
block|,
comment|/* E=cyl 362 thru 801 */
name|RDSZ
argument_list|(
literal|78400
argument_list|)
block|,
literal|802
block|,
comment|/* F=cyl 802 thru 1151 */
name|RDSZ
argument_list|(
literal|201600
argument_list|)
block|,
literal|252
block|,
comment|/* G=cyl 221 thru 1151 */
name|RDSZ
argument_list|(
literal|176960
argument_list|)
block|,
literal|362
block|,
comment|/* H=cyl 362 thru 1151 */
block|}
struct|,
name|rd7933H_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16146
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 27 */
name|RDSZ
argument_list|(
literal|66976
argument_list|)
block|,
literal|28
block|,
comment|/* B=cyl 28 thru 139 */
name|RDSZ
argument_list|(
literal|789958
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1320 */
name|RDSZ
argument_list|(
literal|16146
argument_list|)
block|,
literal|140
block|,
comment|/* D=cyl 140 thru 166 */
name|RDSZ
argument_list|(
literal|165646
argument_list|)
block|,
literal|167
block|,
comment|/* E=cyl 167 thru 443 */
name|RDSZ
argument_list|(
literal|165646
argument_list|)
block|,
literal|444
block|,
comment|/* F=cyl 444 thru 720 */
name|RDSZ
argument_list|(
literal|706238
argument_list|)
block|,
literal|140
block|,
comment|/* G=cyl 140 thru 1320 */
name|RDSZ
argument_list|(
literal|358800
argument_list|)
block|,
literal|721
block|,
comment|/* H=cyl 721 thru 1320 */
block|}
struct|,
name|rd9134L_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|15920
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 199 */
name|RDSZ
argument_list|(
literal|20000
argument_list|)
block|,
literal|200
block|,
comment|/* B=cyl 200 thru 449 */
name|RDSZ
argument_list|(
literal|77840
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 972 */
name|RDSZ
argument_list|(
literal|32000
argument_list|)
block|,
literal|200
block|,
comment|/* D=cyl 200 thru 599 */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* E=<undefined> */
name|RDSZ
argument_list|(
literal|0
argument_list|)
block|,
literal|0
block|,
comment|/* F=<undefined> */
name|RDSZ
argument_list|(
literal|41840
argument_list|)
block|,
literal|450
block|,
comment|/* G=cyl 450 thru 972 */
name|RDSZ
argument_list|(
literal|29840
argument_list|)
block|,
literal|600
block|,
comment|/* H=cyl 600 thru 972 */
block|}
struct|,
name|rd7957A_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16016
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 104 */
name|RDSZ
argument_list|(
literal|24640
argument_list|)
block|,
literal|105
block|,
comment|/* B=cyl 105 thru 264 */
name|RDSZ
argument_list|(
literal|159544
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1035 */
name|RDSZ
argument_list|(
literal|42350
argument_list|)
block|,
literal|105
block|,
comment|/* D=cyl 105 thru 379 */
name|RDSZ
argument_list|(
literal|54824
argument_list|)
block|,
literal|380
block|,
comment|/* E=cyl 380 thru 735 */
name|RDSZ
argument_list|(
literal|46200
argument_list|)
block|,
literal|736
block|,
comment|/* F=cyl 736 thru 1035 */
name|RDSZ
argument_list|(
literal|118734
argument_list|)
block|,
literal|265
block|,
comment|/* G=cyl 265 thru 1035 */
name|RDSZ
argument_list|(
literal|101024
argument_list|)
block|,
literal|380
block|,
comment|/* H=cyl 380 thru 1035 */
block|}
struct|,
name|rd7958A_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16128
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 64 */
name|RDSZ
argument_list|(
literal|32256
argument_list|)
block|,
literal|65
block|,
comment|/* B=cyl 65 thru 192 */
name|RDSZ
argument_list|(
literal|255276
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1012 */
name|RDSZ
argument_list|(
literal|48384
argument_list|)
block|,
literal|65
block|,
comment|/* D=cyl 65 thru 256 */
name|RDSZ
argument_list|(
literal|100800
argument_list|)
block|,
literal|257
block|,
comment|/* E=cyl 257 thru 656 */
name|RDSZ
argument_list|(
literal|89712
argument_list|)
block|,
literal|657
block|,
comment|/* F=cyl 657 thru 1012 */
name|RDSZ
argument_list|(
literal|206640
argument_list|)
block|,
literal|193
block|,
comment|/* G=cyl 193 thru 1012 */
name|RDSZ
argument_list|(
literal|190512
argument_list|)
block|,
literal|257
block|,
comment|/* H=cyl 257 thru 1012 */
block|}
struct|,
name|rd7957B_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16002
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 127 */
name|RDSZ
argument_list|(
literal|32760
argument_list|)
block|,
literal|128
block|,
comment|/* B=cyl 128 thru 387 */
name|RDSZ
argument_list|(
literal|159894
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1268 */
name|RDSZ
argument_list|(
literal|49140
argument_list|)
block|,
literal|128
block|,
comment|/* D=cyl 128 thru 517 */
name|RDSZ
argument_list|(
literal|50400
argument_list|)
block|,
literal|518
block|,
comment|/* E=cyl 518 thru 917 */
name|RDSZ
argument_list|(
literal|44226
argument_list|)
block|,
literal|918
block|,
comment|/* F=cyl 918 thru 1268 */
name|RDSZ
argument_list|(
literal|111006
argument_list|)
block|,
literal|388
block|,
comment|/* G=cyl 388 thru 1268 */
name|RDSZ
argument_list|(
literal|94626
argument_list|)
block|,
literal|518
block|,
comment|/* H=cyl 518 thru 1268 */
block|}
struct|,
name|rd7958B_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16254
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 43 */
name|RDSZ
argument_list|(
literal|32886
argument_list|)
block|,
literal|44
block|,
comment|/* B=cyl 44 thru 130 */
name|RDSZ
argument_list|(
literal|297108
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 785 */
name|RDSZ
argument_list|(
literal|49140
argument_list|)
block|,
literal|44
block|,
comment|/* D=cyl 44 thru 173 */
name|RDSZ
argument_list|(
literal|121716
argument_list|)
block|,
literal|174
block|,
comment|/* E=cyl 174 thru 495 */
name|RDSZ
argument_list|(
literal|109620
argument_list|)
block|,
literal|496
block|,
comment|/* F=cyl 496 thru 785 */
name|RDSZ
argument_list|(
literal|247590
argument_list|)
block|,
literal|131
block|,
comment|/* G=cyl 131 thru 785 */
name|RDSZ
argument_list|(
literal|231336
argument_list|)
block|,
literal|174
block|,
comment|/* H=cyl 174 thru 785 */
block|}
struct|,
name|rd7959B_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16254
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 43 */
name|RDSZ
argument_list|(
literal|49140
argument_list|)
block|,
literal|44
block|,
comment|/* B=cyl 44 thru 173 */
name|RDSZ
argument_list|(
literal|594216
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1571 */
name|RDSZ
argument_list|(
literal|65772
argument_list|)
block|,
literal|44
block|,
comment|/* D=cyl 44 thru 217 */
name|RDSZ
argument_list|(
literal|303912
argument_list|)
block|,
literal|218
block|,
comment|/* E=cyl 218 thru 1021 */
name|RDSZ
argument_list|(
literal|207900
argument_list|)
block|,
literal|1022
block|,
comment|/* F=cyl 1022 thru 1571 */
name|RDSZ
argument_list|(
literal|528444
argument_list|)
block|,
literal|174
block|,
comment|/* G=cyl 174 thru 1571 */
name|RDSZ
argument_list|(
literal|511812
argument_list|)
block|,
literal|218
block|,
comment|/* H=cyl 218 thru 1571 */
block|}
struct|,
name|rd2200A_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16272
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 36 */
name|RDSZ
argument_list|(
literal|49720
argument_list|)
block|,
literal|37
block|,
comment|/* B=cyl 37 thru 146 */
name|RDSZ
argument_list|(
literal|654948
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1448 */
name|RDSZ
argument_list|(
literal|65992
argument_list|)
block|,
literal|37
block|,
comment|/* D=cyl 37 thru 182 */
name|RDSZ
argument_list|(
literal|304648
argument_list|)
block|,
literal|183
block|,
comment|/* E=cyl 183 thru 856 */
name|RDSZ
argument_list|(
literal|267584
argument_list|)
block|,
literal|857
block|,
comment|/* F=cyl 857 thru 1448 */
name|RDSZ
argument_list|(
literal|588504
argument_list|)
block|,
literal|147
block|,
comment|/* G=cyl 147 thru 1448 */
name|RDSZ
argument_list|(
literal|572232
argument_list|)
block|,
literal|183
block|,
comment|/* H=cyl 183 thru 1448 */
block|}
struct|,
name|rd2203A_sizes
index|[
literal|8
index|]
init|=
block|{
comment|/* modelled after the 7937; i.e. bogus */
name|RDSZ
argument_list|(
literal|16272
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 18 */
name|RDSZ
argument_list|(
literal|67800
argument_list|)
block|,
literal|19
block|,
comment|/* B=cyl 19 thru 93 */
name|RDSZ
argument_list|(
literal|1309896
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 1448 */
name|RDSZ
argument_list|(
literal|16272
argument_list|)
block|,
literal|94
block|,
comment|/* D=cyl 19 thru 111 */
name|RDSZ
argument_list|(
literal|305552
argument_list|)
block|,
literal|112
block|,
comment|/* E=cyl 112 thru 449 */
name|RDSZ
argument_list|(
literal|305552
argument_list|)
block|,
literal|450
block|,
comment|/* F=cyl 450 thru 787 */
name|RDSZ
argument_list|(
literal|1224920
argument_list|)
block|,
literal|94
block|,
comment|/* G=cyl 94 thru 1448 */
name|RDSZ
argument_list|(
literal|597544
argument_list|)
block|,
literal|788
block|,
comment|/* H=cyl 788 thru 1448 */
block|}
struct|,
name|rd7936H_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|16359
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 19 */
name|RDSZ
argument_list|(
literal|67158
argument_list|)
block|,
literal|20
block|,
comment|/* B=cyl 20 thru 97 */
name|RDSZ
argument_list|(
literal|600978
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 697 */
name|RDSZ
argument_list|(
literal|16359
argument_list|)
block|,
literal|98
block|,
comment|/* D=cyl 98 thru 116 */
name|RDSZ
argument_list|(
literal|120540
argument_list|)
block|,
literal|117
block|,
comment|/* E=cyl 117 thru 256 */
name|RDSZ
argument_list|(
literal|120540
argument_list|)
block|,
literal|256
block|,
comment|/* F=cyl 256 thru 396 */
name|RDSZ
argument_list|(
literal|516600
argument_list|)
block|,
literal|98
block|,
comment|/* G=cyl 98 thru 697 */
name|RDSZ
argument_list|(
literal|259161
argument_list|)
block|,
literal|397
block|,
comment|/* H=cyl 397 thru 697 */
block|}
struct|,
name|rd7937H_sizes
index|[
literal|8
index|]
init|=
block|{
name|RDSZ
argument_list|(
literal|15990
argument_list|)
block|,
literal|1
block|,
comment|/* A=cyl 1 thru 10 */
name|RDSZ
argument_list|(
literal|67158
argument_list|)
block|,
literal|11
block|,
comment|/* B=cyl 11 thru 52 */
name|RDSZ
argument_list|(
literal|1116102
argument_list|)
block|,
literal|0
block|,
comment|/* C=cyl 0 thru 697 */
name|RDSZ
argument_list|(
literal|124722
argument_list|)
block|,
literal|53
block|,
comment|/* D=cyl 53 thru 130 */
name|RDSZ
argument_list|(
literal|163098
argument_list|)
block|,
literal|131
block|,
comment|/* E=cyl 131 thru 232 */
name|RDSZ
argument_list|(
literal|287820
argument_list|)
block|,
literal|233
block|,
comment|/* F=cyl 233 thru 412 */
name|RDSZ
argument_list|(
literal|1031355
argument_list|)
block|,
literal|53
block|,
comment|/* G=cyl 53 thru 697 */
name|RDSZ
argument_list|(
literal|455715
argument_list|)
block|,
literal|413
block|,
comment|/* H=cyl 413 thru 697 */
block|}
struct|;
end_struct

begin_comment
comment|/*  * Indexed the same as rdidentinfo array.  */
end_comment

begin_struct
struct|struct
name|rdcompatinfo
block|{
name|int
name|nbpt
decl_stmt|;
comment|/* DEV_BSIZE blocks per track */
name|int
name|ntpc
decl_stmt|;
comment|/* tracks per cylinder */
name|int
name|ncyl
decl_stmt|;
comment|/* cylinders per unit */
name|struct
name|size
modifier|*
name|sizes
decl_stmt|;
comment|/* partition info */
block|}
name|rdcompatinfo
index|[]
init|=
block|{
name|NRD7945ABPT
block|,
name|NRD7945ATRK
block|,
literal|968
block|,
name|rd7945A_sizes
block|,
name|NRD9134DBPT
block|,
name|NRD9134DTRK
block|,
literal|303
block|,
name|rd9134D_sizes
block|,
name|NRD9122SBPT
block|,
name|NRD9122STRK
block|,
literal|77
block|,
name|rd9122S_sizes
block|,
name|NRD7912PBPT
block|,
name|NRD7912PTRK
block|,
literal|572
block|,
name|rd7912P_sizes
block|,
name|NRD7914PBPT
block|,
name|NRD7914PTRK
block|,
literal|1152
block|,
name|rd7914P_sizes
block|,
name|NRD7958ABPT
block|,
name|NRD7958ATRK
block|,
literal|1013
block|,
name|rd7958A_sizes
block|,
name|NRD7957ABPT
block|,
name|NRD7957ATRK
block|,
literal|1036
block|,
name|rd7957A_sizes
block|,
name|NRD7933HBPT
block|,
name|NRD7933HTRK
block|,
literal|1321
block|,
name|rd7933H_sizes
block|,
name|NRD9134LBPT
block|,
name|NRD9134LTRK
block|,
literal|973
block|,
name|rd9134L_sizes
block|,
name|NRD7936HBPT
block|,
name|NRD7936HTRK
block|,
literal|698
block|,
name|rd7936H_sizes
block|,
name|NRD7937HBPT
block|,
name|NRD7937HTRK
block|,
literal|698
block|,
name|rd7937H_sizes
block|,
name|NRD7914PBPT
block|,
name|NRD7914PTRK
block|,
literal|1152
block|,
name|rd7914P_sizes
block|,
name|NRD7945ABPT
block|,
name|NRD7945ATRK
block|,
literal|968
block|,
name|rd7945A_sizes
block|,
name|NRD9122SBPT
block|,
name|NRD9122STRK
block|,
literal|77
block|,
name|rd9122S_sizes
block|,
name|NRD7957BBPT
block|,
name|NRD7957BTRK
block|,
literal|1269
block|,
name|rd7957B_sizes
block|,
name|NRD7958BBPT
block|,
name|NRD7958BTRK
block|,
literal|786
block|,
name|rd7958B_sizes
block|,
name|NRD7959BBPT
block|,
name|NRD7959BTRK
block|,
literal|1572
block|,
name|rd7959B_sizes
block|,
name|NRD2200ABPT
block|,
name|NRD2200ATRK
block|,
literal|1449
block|,
name|rd2200A_sizes
block|,
name|NRD2203ABPT
block|,
name|NRD2203ATRK
block|,
literal|1449
block|,
name|rd2203A_sizes
block|, }
struct|;
end_struct

begin_decl_stmt
name|int
name|nrdcompatinfo
init|=
sizeof|sizeof
argument_list|(
name|rdcompatinfo
argument_list|)
operator|/
sizeof|sizeof
argument_list|(
name|rdcompatinfo
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|struct
name|rd_softc
name|rd_softc
index|[]
decl_stmt|;
end_decl_stmt

begin_macro
name|rdmakedisklabel
argument_list|(
argument|unit
argument_list|,
argument|lp
argument_list|)
end_macro

begin_decl_stmt
name|int
name|unit
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|disklabel
modifier|*
name|lp
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|struct
name|rd_softc
modifier|*
name|rs
init|=
operator|&
name|rd_softc
index|[
name|unit
index|]
decl_stmt|;
specifier|register
name|struct
name|rdcompatinfo
modifier|*
name|ci
init|=
operator|&
name|rdcompatinfo
index|[
name|rs
operator|->
name|sc_type
index|]
decl_stmt|;
specifier|register
name|struct
name|partition
modifier|*
name|pi
decl_stmt|;
specifier|register
name|int
name|dcount
decl_stmt|;
name|lp
operator|->
name|d_nsectors
operator|=
name|ci
operator|->
name|nbpt
expr_stmt|;
name|lp
operator|->
name|d_ntracks
operator|=
name|ci
operator|->
name|ntpc
expr_stmt|;
name|lp
operator|->
name|d_ncylinders
operator|=
name|ci
operator|->
name|ncyl
expr_stmt|;
name|lp
operator|->
name|d_secpercyl
operator|=
name|ci
operator|->
name|nbpt
operator|*
name|ci
operator|->
name|ntpc
expr_stmt|;
name|lp
operator|->
name|d_secperunit
operator|=
name|lp
operator|->
name|d_secpercyl
operator|*
name|ci
operator|->
name|ncyl
expr_stmt|;
name|lp
operator|->
name|d_rpm
operator|=
literal|3600
expr_stmt|;
name|lp
operator|->
name|d_interleave
operator|=
literal|1
expr_stmt|;
name|lp
operator|->
name|d_npartitions
operator|=
literal|8
expr_stmt|;
name|pi
operator|=
name|lp
operator|->
name|d_partitions
expr_stmt|;
for|for
control|(
name|dcount
operator|=
literal|0
init|;
name|dcount
operator|<
name|lp
operator|->
name|d_npartitions
condition|;
name|dcount
operator|++
control|)
block|{
name|pi
operator|->
name|p_size
operator|=
name|ci
operator|->
name|sizes
index|[
name|dcount
index|]
operator|.
name|nblocks
expr_stmt|;
name|pi
operator|->
name|p_offset
operator|=
name|ci
operator|->
name|sizes
index|[
name|dcount
index|]
operator|.
name|cyloff
operator|*
name|lp
operator|->
name|d_secpercyl
expr_stmt|;
name|pi
operator|->
name|p_fsize
operator|=
literal|1024
expr_stmt|;
if|if
condition|(
name|dcount
operator|==
literal|1
operator|||
name|dcount
operator|==
literal|3
condition|)
name|pi
operator|->
name|p_fstype
operator|=
name|FS_SWAP
expr_stmt|;
elseif|else
if|if
condition|(
name|dcount
operator|==
literal|2
condition|)
name|pi
operator|->
name|p_fstype
operator|=
name|FS_BOOT
expr_stmt|;
else|else
name|pi
operator|->
name|p_fstype
operator|=
name|FS_BSDFFS
expr_stmt|;
name|pi
operator|->
name|p_frag
operator|=
literal|8
expr_stmt|;
name|pi
operator|++
expr_stmt|;
block|}
block|}
end_block

begin_endif
endif|#
directive|endif
end_endif

end_unit

