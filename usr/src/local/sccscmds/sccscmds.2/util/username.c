begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_decl_stmt
specifier|static
name|char
name|Sccsid
index|[]
init|=
literal|"@(#)username.c	1.2	%G%"
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* 	Gets user's login name. 	Note that the argument must be an integer. 	Returns pointer to login name on success, 	pointer to string representation of used ID on failure.  	Remembers user ID and login name for subsequent calls. */
end_comment

begin_expr_stmt
name|username
argument_list|(
name|uid
argument_list|)
specifier|register
name|int
name|uid
expr_stmt|;
end_expr_stmt

begin_block
block|{
name|char
name|pw
index|[
literal|200
index|]
decl_stmt|;
specifier|static
name|int
name|ouid
decl_stmt|;
specifier|static
name|char
name|lnam
index|[
literal|9
index|]
decl_stmt|,
modifier|*
name|lptr
decl_stmt|;
specifier|register
name|int
name|i
decl_stmt|;
if|if
condition|(
name|ouid
operator|!=
name|uid
operator|||
name|ouid
operator|==
literal|0
condition|)
block|{
if|if
condition|(
name|getpw
argument_list|(
name|uid
argument_list|,
name|pw
argument_list|)
condition|)
name|sprintf
argument_list|(
name|lnam
argument_list|,
literal|"%d"
argument_list|,
name|uid
argument_list|)
expr_stmt|;
else|else
block|{
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|8
condition|;
name|i
operator|++
control|)
if|if
condition|(
operator|(
name|lnam
index|[
name|i
index|]
operator|=
name|pw
index|[
name|i
index|]
operator|)
operator|==
literal|':'
condition|)
break|break;
name|lnam
index|[
name|i
index|]
operator|=
literal|'\0'
expr_stmt|;
block|}
name|lptr
operator|=
name|lnam
expr_stmt|;
name|ouid
operator|=
name|uid
expr_stmt|;
block|}
return|return
operator|(
name|lptr
operator|)
return|;
block|}
end_block

end_unit

