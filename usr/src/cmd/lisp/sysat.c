begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"global.h"
end_include

begin_include
include|#
directive|include
file|"lfuncs.h"
end_include

begin_define
define|#
directive|define
name|MK
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|z
parameter_list|)
value|mfun(x,y,z)
end_define

begin_define
define|#
directive|define
name|FIDDLE
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|,
name|c
parameter_list|,
name|d
parameter_list|)
value|a->clb=newdot(); (a->clb->car=newint())->i=b->i; \ 	a->clb->cdr=newdot(); (a->clb->cdr->car=newint())->i=c->i; \ 	a->clb->cdr->cdr=newdot(); (a->clb->cdr->cdr->car=newint())->i=d; \ 	b = a->clb->car; c = a->clb->cdr->car; \ 	copval(a,a->clb); a->clb = nil;
end_define

begin_define
define|#
directive|define
name|cforget
parameter_list|(
name|x
parameter_list|)
value|protect(x); Lforget(); unprot();
end_define

begin_comment
comment|/*  The following array serves as the temporary counters of the items	*/
end_comment

begin_comment
comment|/*  and pages used in each space.					*/
end_comment

begin_decl_stmt
name|long
name|int
name|tint
index|[
literal|18
index|]
init|=
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|long
name|int
name|tgcthresh
init|=
literal|15
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|initflag
init|=
name|TRUE
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  starts off TRUE to indicate unsafe to gc  */
end_comment

begin_define
define|#
directive|define
name|PAGE_LIMIT
value|3800
end_define

begin_extern
extern|extern Iaddstat(
end_extern

begin_empty_stmt
unit|)
empty_stmt|;
end_empty_stmt

begin_macro
name|makevals
argument_list|()
end_macro

begin_block
block|{
name|lispval
name|temp
decl_stmt|;
comment|/*  system list structure and atoms are initialized.  */
comment|/*  Before any lisp data can be created, the space usage */
comment|/*  counters must be set up, temporarily in array tint.  */
name|atom_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|0
index|]
expr_stmt|;
name|atom_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|1
index|]
expr_stmt|;
name|str_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|2
index|]
expr_stmt|;
name|str_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|3
index|]
expr_stmt|;
name|int_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|4
index|]
expr_stmt|;
name|int_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|5
index|]
expr_stmt|;
name|dtpr_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|6
index|]
expr_stmt|;
name|dtpr_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|7
index|]
expr_stmt|;
name|doub_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|8
index|]
expr_stmt|;
name|doub_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|9
index|]
expr_stmt|;
name|sdot_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|10
index|]
expr_stmt|;
name|sdot_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|11
index|]
expr_stmt|;
name|array_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|12
index|]
expr_stmt|;
name|array_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|13
index|]
expr_stmt|;
name|val_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|14
index|]
expr_stmt|;
name|val_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|15
index|]
expr_stmt|;
name|funct_items
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|16
index|]
expr_stmt|;
name|funct_pages
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tint
index|[
literal|17
index|]
expr_stmt|;
comment|/*  This also applies to the garbage collection threshhold  */
name|gcthresh
operator|=
operator|(
name|lispval
operator|)
operator|&
name|tgcthresh
expr_stmt|;
comment|/*  Now we commence constructing system lisp structures.  */
comment|/*  nil is a special case, constructed especially at location zero  */
name|hasht
index|[
literal|'n'
operator|^
literal|'i'
operator|^
literal|'l'
index|]
operator|=
operator|(
expr|struct
name|atom
operator|*
operator|)
name|nil
expr_stmt|;
name|atom_name
operator|=
name|matom
argument_list|(
literal|"symbol"
argument_list|)
expr_stmt|;
name|str_name
operator|=
name|matom
argument_list|(
literal|"string"
argument_list|)
expr_stmt|;
name|int_name
operator|=
name|matom
argument_list|(
literal|"fixnum"
argument_list|)
expr_stmt|;
name|dtpr_name
operator|=
name|matom
argument_list|(
literal|"list"
argument_list|)
expr_stmt|;
name|doub_name
operator|=
name|matom
argument_list|(
literal|"flonum"
argument_list|)
expr_stmt|;
name|sdot_name
operator|=
name|matom
argument_list|(
literal|"bignum"
argument_list|)
expr_stmt|;
name|array_name
operator|=
name|matom
argument_list|(
literal|"array"
argument_list|)
expr_stmt|;
name|val_name
operator|=
name|matom
argument_list|(
literal|"value"
argument_list|)
expr_stmt|;
name|funct_name
operator|=
name|matom
argument_list|(
literal|"binary"
argument_list|)
expr_stmt|;
comment|/*  set up the name stack as an array of pointers */
name|lbot
operator|=
name|orgnp
operator|=
name|np
operator|=
operator|(
operator|(
expr|struct
name|argent
operator|*
operator|)
name|csegment
argument_list|(
name|val_name
argument_list|,
name|NAMESIZE
argument_list|)
operator|)
expr_stmt|;
name|nplim
operator|=
name|orgnp
operator|+
name|NAMESIZE
operator|-
literal|5
expr_stmt|;
name|temp
operator|=
name|matom
argument_list|(
literal|"namestack"
argument_list|)
expr_stmt|;
name|nstack
operator|=
name|temp
operator|->
name|fnbnd
operator|=
name|newarray
argument_list|()
expr_stmt|;
name|nstack
operator|->
name|data
operator|=
operator|(
name|char
operator|*
operator|)
operator|(
name|np
operator|)
expr_stmt|;
operator|(
name|nstack
operator|->
name|length
operator|=
name|newint
argument_list|()
operator|)
operator|->
name|i
operator|=
name|NAMESIZE
expr_stmt|;
operator|(
name|nstack
operator|->
name|delta
operator|=
name|newint
argument_list|()
operator|)
operator|->
name|i
operator|=
sizeof|sizeof
argument_list|(
expr|struct
name|argent
argument_list|)
expr_stmt|;
comment|/* set up the binding stack as an array of dotted pairs */
name|orgbnp
operator|=
name|bnp
operator|=
operator|(
operator|(
expr|struct
name|nament
operator|*
operator|)
name|csegment
argument_list|(
name|dtpr_name
argument_list|,
name|NAMESIZE
argument_list|)
operator|)
expr_stmt|;
name|bnplim
operator|=
name|orgbnp
operator|+
name|NAMESIZE
operator|-
literal|5
expr_stmt|;
name|temp
operator|=
name|matom
argument_list|(
literal|"bindstack"
argument_list|)
expr_stmt|;
name|bstack
operator|=
name|temp
operator|->
name|fnbnd
operator|=
name|newarray
argument_list|()
expr_stmt|;
name|bstack
operator|->
name|data
operator|=
operator|(
name|char
operator|*
operator|)
operator|(
name|bnp
operator|)
expr_stmt|;
operator|(
name|bstack
operator|->
name|length
operator|=
name|newint
argument_list|()
operator|)
operator|->
name|i
operator|=
name|NAMESIZE
expr_stmt|;
operator|(
name|nstack
operator|->
name|delta
operator|=
name|newint
argument_list|()
operator|)
operator|->
name|i
operator|=
sizeof|sizeof
argument_list|(
expr|struct
name|nament
argument_list|)
expr_stmt|;
comment|/* more atoms */
name|tatom
operator|=
name|matom
argument_list|(
literal|"t"
argument_list|)
expr_stmt|;
name|tatom
operator|->
name|clb
operator|=
name|tatom
expr_stmt|;
name|lambda
operator|=
name|matom
argument_list|(
literal|"lambda"
argument_list|)
expr_stmt|;
name|nlambda
operator|=
name|matom
argument_list|(
literal|"nlambda"
argument_list|)
expr_stmt|;
name|macro
operator|=
name|matom
argument_list|(
literal|"macro"
argument_list|)
expr_stmt|;
name|ibase
operator|=
name|matom
argument_list|(
literal|"ibase"
argument_list|)
expr_stmt|;
comment|/* base for input conversion */
name|ibase
operator|->
name|clb
operator|=
name|inewint
argument_list|(
literal|10
argument_list|)
expr_stmt|;
name|Vpiport
operator|=
name|matom
argument_list|(
literal|"piport"
argument_list|)
expr_stmt|;
name|Vpiport
operator|->
name|clb
operator|=
name|P
argument_list|(
name|piport
operator|=
name|stdin
argument_list|)
expr_stmt|;
comment|/* standard input */
name|Vpoport
operator|=
name|matom
argument_list|(
literal|"poport"
argument_list|)
expr_stmt|;
name|Vpoport
operator|->
name|clb
operator|=
name|P
argument_list|(
name|poport
operator|=
name|stdout
argument_list|)
expr_stmt|;
comment|/* stand. output */
name|matom
argument_list|(
literal|"errport"
argument_list|)
operator|->
name|clb
operator|=
operator|(
name|P
argument_list|(
name|errport
operator|=
name|stderr
argument_list|)
operator|)
expr_stmt|;
comment|/* stand. err. */
operator|(
name|Vreadtable
operator|=
name|matom
argument_list|(
literal|"readtable"
argument_list|)
operator|)
operator|->
name|clb
operator|=
name|Imkrtab
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|strtab
operator|=
name|Imkrtab
argument_list|(
literal|0
argument_list|)
expr_stmt|;
comment|/*  The following atoms are used as tokens by the reader  */
name|perda
operator|=
name|matom
argument_list|(
literal|"."
argument_list|)
expr_stmt|;
name|lpara
operator|=
name|matom
argument_list|(
literal|"("
argument_list|)
expr_stmt|;
name|rpara
operator|=
name|matom
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
name|lbkta
operator|=
name|matom
argument_list|(
literal|"["
argument_list|)
expr_stmt|;
name|rbkta
operator|=
name|matom
argument_list|(
literal|"]"
argument_list|)
expr_stmt|;
name|snqta
operator|=
name|matom
argument_list|(
literal|"'"
argument_list|)
expr_stmt|;
name|exclpa
operator|=
name|matom
argument_list|(
literal|"!"
argument_list|)
expr_stmt|;
operator|(
name|Eofa
operator|=
name|matom
argument_list|(
literal|"eof"
argument_list|)
operator|)
operator|->
name|clb
operator|=
name|eofa
expr_stmt|;
name|cara
operator|=
name|MK
argument_list|(
literal|"car"
argument_list|,
name|Lcar
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|cdra
operator|=
name|MK
argument_list|(
literal|"cdr"
argument_list|,
name|Lcdr
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/*  The following few atoms have values the reader tokens.  */
comment|/*  Perhaps this is a kludge which should be abandoned.  */
comment|/*  On the other hand, perhaps it is an inspiration.	*/
name|matom
argument_list|(
literal|"perd"
argument_list|)
operator|->
name|clb
operator|=
name|perda
expr_stmt|;
name|matom
argument_list|(
literal|"lpar"
argument_list|)
operator|->
name|clb
operator|=
name|lpara
expr_stmt|;
name|matom
argument_list|(
literal|"rpar"
argument_list|)
operator|->
name|clb
operator|=
name|rpara
expr_stmt|;
name|matom
argument_list|(
literal|"lbkt"
argument_list|)
operator|->
name|clb
operator|=
name|lbkta
expr_stmt|;
name|matom
argument_list|(
literal|"rbkt"
argument_list|)
operator|->
name|clb
operator|=
name|rbkta
expr_stmt|;
name|noptop
operator|=
name|matom
argument_list|(
literal|"noptop"
argument_list|)
expr_stmt|;
comment|/*  atoms used in connection with comments.  */
name|commta
operator|=
name|matom
argument_list|(
literal|"comment"
argument_list|)
expr_stmt|;
name|rcomms
operator|=
name|matom
argument_list|(
literal|"readcomments"
argument_list|)
expr_stmt|;
comment|/*  the following atoms are used for lexprs */
name|lexpr_atom
operator|=
name|matom
argument_list|(
literal|"last lexpr binding\7"
argument_list|)
expr_stmt|;
name|lexpr
operator|=
name|matom
argument_list|(
literal|"lexpr"
argument_list|)
expr_stmt|;
name|sysa
operator|=
name|matom
argument_list|(
literal|"sys"
argument_list|)
expr_stmt|;
name|plima
operator|=
name|matom
argument_list|(
literal|"pagelimit"
argument_list|)
expr_stmt|;
comment|/*  max number of pages  */
name|Veval
operator|=
name|MK
argument_list|(
literal|"eval"
argument_list|,
name|Leval
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"asin"
argument_list|,
name|Lasin
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"acos"
argument_list|,
name|Lacos
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"atan"
argument_list|,
name|Latan
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cos"
argument_list|,
name|Lcos
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"sin"
argument_list|,
name|Lsin
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"sqrt"
argument_list|,
name|Lsqrt
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"exp"
argument_list|,
name|Lexp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"log"
argument_list|,
name|Llog
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"random"
argument_list|,
name|Lrandom
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"atom"
argument_list|,
name|Latom
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"apply"
argument_list|,
name|Lapply
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"funcall"
argument_list|,
name|Lfuncal
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"return"
argument_list|,
name|Lreturn
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"retbrk"
argument_list|,
name|Lretbrk
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cont"
argument_list|,
name|Lreturn
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cons"
argument_list|,
name|Lcons
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"scons"
argument_list|,
name|Lscons
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cadr"
argument_list|,
name|Lcadr
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"caar"
argument_list|,
name|Lcaar
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cddr"
argument_list|,
name|Lc02r
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"caddr"
argument_list|,
name|Lc12r
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cdddr"
argument_list|,
name|Lc03r
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cadddr"
argument_list|,
name|Lc13r
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cddddr"
argument_list|,
name|Lc04r
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"caddddr"
argument_list|,
name|Lc14r
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"nthelem"
argument_list|,
name|Lnthelem
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"eq"
argument_list|,
name|Leq
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"equal"
argument_list|,
name|Lequal
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"numberp"
argument_list|,
name|Lnumberp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"dtpr"
argument_list|,
name|Ldtpr
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"bcdp"
argument_list|,
name|Lbcdp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"portp"
argument_list|,
name|Lportp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"arrayp"
argument_list|,
name|Larrayp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"valuep"
argument_list|,
name|Lvaluep
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"get_pname"
argument_list|,
name|Lpname
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"arrayref"
argument_list|,
name|Larrayref
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"marray"
argument_list|,
name|Lmarray
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getlength"
argument_list|,
name|Lgetl
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"putlength"
argument_list|,
name|Lputl
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getaccess"
argument_list|,
name|Lgeta
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"putaccess"
argument_list|,
name|Lputa
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getdelta"
argument_list|,
name|Lgetdel
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"putdelta"
argument_list|,
name|Lputdel
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getaux"
argument_list|,
name|Lgetaux
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"putaux"
argument_list|,
name|Lputaux
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"mfunction"
argument_list|,
name|Lmfunction
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getentry"
argument_list|,
name|Lgetentry
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getdisc"
argument_list|,
name|Lgetdisc
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"segment"
argument_list|,
name|Lsegment
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"rplaca"
argument_list|,
name|Lrplaca
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"rplacd"
argument_list|,
name|Lrplacd
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"set"
argument_list|,
name|Lset
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"replace"
argument_list|,
name|Lreplace
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"infile"
argument_list|,
name|Linfile
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"outfile"
argument_list|,
name|Loutfile
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"terpr"
argument_list|,
name|Lterpr
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"print"
argument_list|,
name|Lprint
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"close"
argument_list|,
name|Lclose
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"patom"
argument_list|,
name|Lpatom
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"pntlen"
argument_list|,
name|Lpntlen
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"read"
argument_list|,
name|Lread
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"ratom"
argument_list|,
name|Lratom
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"readc"
argument_list|,
name|Lreadc
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"implode"
argument_list|,
name|Limplode
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"maknam"
argument_list|,
name|Lmaknam
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"concat"
argument_list|,
name|Lconcat
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"uconcat"
argument_list|,
name|Luconcat
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"putprop"
argument_list|,
name|Lputprop
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"get"
argument_list|,
name|Lget
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getd"
argument_list|,
name|Lgetd
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"putd"
argument_list|,
name|Lputd
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"prog"
argument_list|,
name|Nprog
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|quota
operator|=
name|MK
argument_list|(
literal|"quote"
argument_list|,
name|Nquote
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"function"
argument_list|,
name|Nfunction
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"go"
argument_list|,
name|Ngo
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"*catch"
argument_list|,
name|Ncatch
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"errset"
argument_list|,
name|Nerrset
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"status"
argument_list|,
name|Nstatus
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"sstatus"
argument_list|,
name|Nsstatus
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"err"
argument_list|,
name|Lerr
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"*throw"
argument_list|,
name|Nthrow
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* this is a lambda now !! */
name|MK
argument_list|(
literal|"reset"
argument_list|,
name|Nreset
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"break"
argument_list|,
name|Nbreak
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"exit"
argument_list|,
name|Lexit
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"def"
argument_list|,
name|Ndef
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"null"
argument_list|,
name|Lnull
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"and"
argument_list|,
name|Nand
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"or"
argument_list|,
name|Nor
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"setq"
argument_list|,
name|Nsetq
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cond"
argument_list|,
name|Ncond
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"list"
argument_list|,
name|Llist
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"load"
argument_list|,
name|Lload
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"nwritn"
argument_list|,
name|Lnwritn
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"process"
argument_list|,
name|Nprocess
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
comment|/*  execute a shell command  */
name|MK
argument_list|(
literal|"allocate"
argument_list|,
name|Lalloc
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/*  allocate a page  */
name|MK
argument_list|(
literal|"sizeof"
argument_list|,
name|Lsizeof
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/*  size of one item of a data type  */
name|MK
argument_list|(
literal|"dumplisp"
argument_list|,
name|Ndumpli
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
comment|/*  save the world  */
name|MK
argument_list|(
literal|"top-level"
argument_list|,
name|Ntpl
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
comment|/*  top level eval-print read loop  */
name|startup
operator|=
name|matom
argument_list|(
literal|"startup"
argument_list|)
expr_stmt|;
comment|/*  used by save and restore  */
name|MK
argument_list|(
literal|"mapcar"
argument_list|,
name|Lmapcar
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"maplist"
argument_list|,
name|Lmaplist
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"mapcan"
argument_list|,
name|Lmapcan
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"mapcon"
argument_list|,
name|Lmapcon
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"assq"
argument_list|,
name|Lassq
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"mapc"
argument_list|,
name|Lmapc
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"map"
argument_list|,
name|Lmap
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"flatsize"
argument_list|,
name|Lflatsi
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"alphalessp"
argument_list|,
name|Lalfalp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"drain"
argument_list|,
name|Ldrain
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"killcopy"
argument_list|,
name|Lkilcopy
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/*  forks aand aborts for adb */
name|MK
argument_list|(
literal|"opval"
argument_list|,
name|Lopval
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/*  sets and retrieves system variables  */
name|MK
argument_list|(
literal|"ncons"
argument_list|,
name|Lncons
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|sysa
operator|=
name|matom
argument_list|(
literal|"sys"
argument_list|)
expr_stmt|;
comment|/*  sys indicator for system variables  */
name|MK
argument_list|(
literal|"remob"
argument_list|,
name|Lforget
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/*  function to take atom out of hash table  */
name|splice
operator|=
name|matom
argument_list|(
literal|"splicing"
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"not"
argument_list|,
name|Lnull
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"plus"
argument_list|,
name|Ladd
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"add"
argument_list|,
name|Ladd
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"times"
argument_list|,
name|Ltimes
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"difference"
argument_list|,
name|Lsub
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"quotient"
argument_list|,
name|Lquo
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"mod"
argument_list|,
name|Lmod
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"minus"
argument_list|,
name|Lminus
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"absval"
argument_list|,
name|Labsval
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"add1"
argument_list|,
name|Ladd1
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"sub1"
argument_list|,
name|Lsub1
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"greaterp"
argument_list|,
name|Lgreaterp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"lessp"
argument_list|,
name|Llessp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"zerop"
argument_list|,
name|Lzerop
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"minusp"
argument_list|,
name|Lnegp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"onep"
argument_list|,
name|Lonep
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"sum"
argument_list|,
name|Ladd
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"product"
argument_list|,
name|Ltimes
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"do"
argument_list|,
name|Ndo
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"progv"
argument_list|,
name|Nprogv
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"progn"
argument_list|,
name|Nprogn
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"prog2"
argument_list|,
name|Nprog2
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"oblist"
argument_list|,
name|Loblist
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"baktrace"
argument_list|,
name|Lbaktra
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"tyi"
argument_list|,
name|Ltyi
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"tyipeek"
argument_list|,
name|Ltyipeek
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"tyo"
argument_list|,
name|Ltyo
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"setsyntax"
argument_list|,
name|Lsetsyn
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"makereadtable"
argument_list|,
name|Lmakertbl
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"zapline"
argument_list|,
name|Lzaplin
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"aexplode"
argument_list|,
name|Lexplda
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"aexplodec"
argument_list|,
name|Lexpldc
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"aexploden"
argument_list|,
name|Lexpldn
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"argv"
argument_list|,
name|Largv
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"arg"
argument_list|,
name|Larg
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"showstack"
argument_list|,
name|Lshostk
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"resetio"
argument_list|,
name|Nreseti
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"chdir"
argument_list|,
name|Lchdir
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"ascii"
argument_list|,
name|Lascii
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"boole"
argument_list|,
name|Lboole
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"type"
argument_list|,
name|Ltype
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* returns type-name of argument */
name|MK
argument_list|(
literal|"fix"
argument_list|,
name|Lfix
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"float"
argument_list|,
name|Lfloat
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"fact"
argument_list|,
name|Lfact
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"cpy1"
argument_list|,
name|Lcpy1
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"Divide"
argument_list|,
name|LDivide
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"Emuldiv"
argument_list|,
name|LEmuldiv
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"readlist"
argument_list|,
name|Lreadli
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"plist"
argument_list|,
name|Lplist
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* gives the plist of an atom */
name|MK
argument_list|(
literal|"setplist"
argument_list|,
name|Lsetpli
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* get plist of an atom  */
name|MK
argument_list|(
literal|"eval-when"
argument_list|,
name|Nevwhen
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"syscall"
argument_list|,
name|Nsyscall
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"ptime"
argument_list|,
name|Lptime
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* return process user time */
comment|/* 	MK("fork",Lfork,lambda); 	MK("wait",Lwait,lambda); 	MK("pipe",Lpipe,lambda); 	MK("fdopen",Lfdopen,lambda); 	MK("exece",Lexece,lambda);  */
name|MK
argument_list|(
literal|"gensym"
argument_list|,
name|Lgensym
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"remprop"
argument_list|,
name|Lremprop
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"bcdad"
argument_list|,
name|Lbcdad
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"symbolp"
argument_list|,
name|Lsymbolp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"stringp"
argument_list|,
name|Lstringp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"rematom"
argument_list|,
name|Lrematom
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"prname"
argument_list|,
name|Lprname
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"getenv"
argument_list|,
name|Lgetenv
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"makunbound"
argument_list|,
name|Lmakunb
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"haipart"
argument_list|,
name|Lhaipar
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"haulong"
argument_list|,
name|Lhau
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"signal"
argument_list|,
name|Lsignal
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
name|MK
argument_list|(
literal|"fasl"
argument_list|,
name|Lfasl
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* read in compiled file */
name|MK
argument_list|(
literal|"bind"
argument_list|,
name|Lbind
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* like fasl but for functions 					   loaded in when the lisp system 					   was constructed by ld */
name|MK
argument_list|(
literal|"boundp"
argument_list|,
name|Lboundp
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* tells if an atom is bound */
name|MK
argument_list|(
literal|"fake"
argument_list|,
name|Lfake
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* makes a fake lisp pointer */
name|MK
argument_list|(
literal|"od"
argument_list|,
name|Lod
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* dumps info */
name|MK
argument_list|(
literal|"what"
argument_list|,
name|Lwhat
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* converts a pointer to an integer */
name|MK
argument_list|(
literal|"pv%"
argument_list|,
name|Lpolyev
argument_list|,
name|lambda
argument_list|)
expr_stmt|;
comment|/* polynomial evaluation instruction */
name|odform
operator|=
name|matom
argument_list|(
literal|"odformat"
argument_list|)
expr_stmt|;
comment|/* format for printf's used in od */
name|rdrsdot
operator|=
name|newsdot
argument_list|()
expr_stmt|;
comment|/* used in io conversions of bignums */
name|rdrint
operator|=
name|newint
argument_list|()
expr_stmt|;
comment|/* used as a temporary integer */
operator|(
name|nilplist
operator|=
name|newdot
argument_list|()
operator|)
operator|->
name|cdr
operator|=
name|newdot
argument_list|()
expr_stmt|;
comment|/* used as property list for nil, 					   since nil will eventually be put at 					   0 (consequently in text and not 					   writable) */
comment|/* error variables */
operator|(
name|Vererr
operator|=
name|matom
argument_list|(
literal|"ER%err"
argument_list|)
operator|)
operator|->
name|clb
operator|=
name|nil
expr_stmt|;
operator|(
name|Vertpl
operator|=
name|matom
argument_list|(
literal|"ER%tpl"
argument_list|)
operator|)
operator|->
name|clb
operator|=
name|nil
expr_stmt|;
operator|(
name|Verall
operator|=
name|matom
argument_list|(
literal|"ER%all"
argument_list|)
operator|)
operator|->
name|clb
operator|=
name|nil
expr_stmt|;
operator|(
name|Vermisc
operator|=
name|matom
argument_list|(
literal|"ER%misc"
argument_list|)
operator|)
operator|->
name|clb
operator|=
name|nil
expr_stmt|;
operator|(
name|Vlerall
operator|=
name|newdot
argument_list|()
operator|)
operator|->
name|car
operator|=
name|Verall
expr_stmt|;
comment|/* list (ER%all) */
comment|/* set up the initial status list */
name|stlist
operator|=
name|nil
expr_stmt|;
comment|/* initially nil */
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"features"
argument_list|)
argument_list|,
name|ST_READ
argument_list|,
name|ST_NO
argument_list|,
name|nil
argument_list|)
expr_stmt|;
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"feature"
argument_list|)
argument_list|,
name|ST_FEATR
argument_list|,
name|ST_FEATW
argument_list|,
name|nil
argument_list|)
expr_stmt|;
name|Isstatus
argument_list|(
name|matom
argument_list|(
literal|"feature"
argument_list|)
argument_list|,
name|matom
argument_list|(
literal|"franz"
argument_list|)
argument_list|)
expr_stmt|;
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"nofeature"
argument_list|)
argument_list|,
name|ST_NFETR
argument_list|,
name|ST_NFETW
argument_list|,
name|nil
argument_list|)
expr_stmt|;
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"syntax"
argument_list|)
argument_list|,
name|ST_SYNT
argument_list|,
name|ST_NO
argument_list|,
name|nil
argument_list|)
expr_stmt|;
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"uctolc"
argument_list|)
argument_list|,
name|ST_READ
argument_list|,
name|ST_TOLC
argument_list|,
name|nil
argument_list|)
expr_stmt|;
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"dumpcore"
argument_list|)
argument_list|,
name|ST_READ
argument_list|,
name|ST_CORE
argument_list|,
name|nil
argument_list|)
expr_stmt|;
name|Isstatus
argument_list|(
name|matom
argument_list|(
literal|"dumpcore"
argument_list|)
argument_list|,
name|nil
argument_list|)
expr_stmt|;
comment|/*set up signals*/
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"chainatom"
argument_list|)
argument_list|,
name|ST_RINTB
argument_list|,
name|ST_INTB
argument_list|,
name|inewint
argument_list|(
literal|0
argument_list|)
argument_list|)
expr_stmt|;
name|Iaddstat
argument_list|(
name|matom
argument_list|(
literal|"dumpmode"
argument_list|)
argument_list|,
name|ST_DMPR
argument_list|,
name|ST_DMPW
argument_list|,
name|nil
argument_list|)
expr_stmt|;
comment|/* garbage collector things */
name|MK
argument_list|(
literal|"gc"
argument_list|,
name|Ngc
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
name|gcafter
operator|=
name|MK
argument_list|(
literal|"gcafter"
argument_list|,
name|Ngcafter
argument_list|,
name|nlambda
argument_list|)
expr_stmt|;
comment|/* garbage collection wind-up */
name|gcport
operator|=
name|matom
argument_list|(
literal|"gcport"
argument_list|)
expr_stmt|;
comment|/* port for gc dumping */
name|gccheck
operator|=
name|matom
argument_list|(
literal|"gccheck"
argument_list|)
expr_stmt|;
comment|/* flag for checking during gc */
name|gcdis
operator|=
name|matom
argument_list|(
literal|"gcdisable"
argument_list|)
expr_stmt|;
comment|/* option for disabling the gc */
name|gcload
operator|=
name|matom
argument_list|(
literal|"gcload"
argument_list|)
expr_stmt|;
comment|/* option for gc while loading */
name|loading
operator|=
name|matom
argument_list|(
literal|"loading"
argument_list|)
expr_stmt|;
comment|/* flag--in loader if = t  */
name|noautot
operator|=
name|matom
argument_list|(
literal|"noautotrace"
argument_list|)
expr_stmt|;
comment|/* option to inhibit auto-trace */
operator|(
name|gcthresh
operator|=
name|newint
argument_list|()
operator|)
operator|->
name|i
operator|=
name|tgcthresh
expr_stmt|;
name|gccall1
operator|=
name|newdot
argument_list|()
expr_stmt|;
name|gccall2
operator|=
name|newdot
argument_list|()
expr_stmt|;
comment|/* used to call gcafter */
name|gccall1
operator|->
name|car
operator|=
name|gcafter
expr_stmt|;
comment|/* start constructing a form for eval */
name|arrayst
operator|=
name|mstr
argument_list|(
literal|"ARRAY"
argument_list|)
expr_stmt|;
comment|/* array marker in name stack */
name|bcdst
operator|=
name|mstr
argument_list|(
literal|"BINARY"
argument_list|)
expr_stmt|;
comment|/* binary function marker */
name|listst
operator|=
name|mstr
argument_list|(
literal|"INTERPRETED"
argument_list|)
expr_stmt|;
comment|/* interpreted function marker */
name|macrost
operator|=
name|mstr
argument_list|(
literal|"MACRO"
argument_list|)
expr_stmt|;
comment|/* macro marker */
name|protst
operator|=
name|mstr
argument_list|(
literal|"PROTECTED"
argument_list|)
expr_stmt|;
comment|/* protection marker */
name|badst
operator|=
name|mstr
argument_list|(
literal|"BADPTR"
argument_list|)
expr_stmt|;
comment|/* bad pointer marker */
name|argst
operator|=
name|mstr
argument_list|(
literal|"ARGST"
argument_list|)
expr_stmt|;
comment|/* argument marker */
comment|/* type names */
name|FIDDLE
argument_list|(
name|atom_name
argument_list|,
name|atom_items
argument_list|,
name|atom_pages
argument_list|,
name|ATOMSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|str_name
argument_list|,
name|str_items
argument_list|,
name|str_pages
argument_list|,
name|STRSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|int_name
argument_list|,
name|int_items
argument_list|,
name|int_pages
argument_list|,
name|INTSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|dtpr_name
argument_list|,
name|dtpr_items
argument_list|,
name|dtpr_pages
argument_list|,
name|DTPRSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|doub_name
argument_list|,
name|doub_items
argument_list|,
name|doub_pages
argument_list|,
name|DOUBSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|sdot_name
argument_list|,
name|sdot_items
argument_list|,
name|sdot_pages
argument_list|,
name|SDOTSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|array_name
argument_list|,
name|array_items
argument_list|,
name|array_pages
argument_list|,
name|ARRAYSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|val_name
argument_list|,
name|val_items
argument_list|,
name|val_pages
argument_list|,
name|VALSPP
argument_list|)
expr_stmt|;
name|FIDDLE
argument_list|(
name|funct_name
argument_list|,
name|funct_items
argument_list|,
name|funct_pages
argument_list|,
name|BCDSPP
argument_list|)
expr_stmt|;
operator|(
name|plimit
operator|=
name|newint
argument_list|()
operator|)
operator|->
name|i
operator|=
name|PAGE_LIMIT
expr_stmt|;
name|copval
argument_list|(
name|plima
argument_list|,
name|plimit
argument_list|)
expr_stmt|;
comment|/*  default value  */
comment|/* the following atom is used when reading caar, cdar, etc. */
name|xatom
operator|=
name|matom
argument_list|(
literal|"??"
argument_list|)
expr_stmt|;
comment|/*  now it is OK to collect garbage  */
name|initflag
operator|=
name|FALSE
expr_stmt|;
block|}
end_block

begin_comment
comment|/*  matom("name")  ******************************************************/
end_comment

begin_comment
comment|/*									*/
end_comment

begin_comment
comment|/*  simulates an atom being read in from the reader and returns a	*/
end_comment

begin_comment
comment|/*  pointer to it.							*/
end_comment

begin_comment
comment|/*									*/
end_comment

begin_comment
comment|/*  BEWARE:  if an atom becomes "truly worthless" and is collected,	*/
end_comment

begin_comment
comment|/*  the pointer becomes obsolete.					*/
end_comment

begin_comment
comment|/*									*/
end_comment

begin_function
name|lispval
name|matom
parameter_list|(
name|string
parameter_list|)
name|char
modifier|*
name|string
decl_stmt|;
block|{
name|strcpy
argument_list|(
name|strbuf
argument_list|,
name|string
argument_list|)
expr_stmt|;
return|return
operator|(
name|getatom
argument_list|()
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  mstr  ***************************************************************/
end_comment

begin_comment
comment|/*									*/
end_comment

begin_comment
comment|/*  Makes a string.  Uses matom.					*/
end_comment

begin_comment
comment|/*  Not the most efficient but will do until the string from the code	*/
end_comment

begin_comment
comment|/*  itself can be used as a lispval.					*/
end_comment

begin_function
name|lispval
name|mstr
parameter_list|(
name|string
parameter_list|)
name|char
modifier|*
name|string
decl_stmt|;
block|{
return|return
operator|(
call|(
name|lispval
call|)
argument_list|(
name|inewstr
argument_list|(
name|string
argument_list|)
argument_list|)
operator|)
return|;
block|}
end_function

begin_comment
comment|/*  mfun("name",entry)  *************************************************/
end_comment

begin_comment
comment|/*									*/
end_comment

begin_comment
comment|/*  Same as matom, but entry point to c code is associated with		*/
end_comment

begin_comment
comment|/*  "name" as function binding.						*/
end_comment

begin_comment
comment|/*  A pointer to the atom is returned.					*/
end_comment

begin_comment
comment|/*									*/
end_comment

begin_decl_stmt
name|lispval
name|mfun
argument_list|(
name|string
argument_list|,
name|entry
argument_list|,
name|discip
argument_list|)
name|char
modifier|*
name|string
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|lispval
argument_list|(
operator|*
name|entry
argument_list|)
argument_list|()
decl_stmt|,
name|discip
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|lispval
name|v
decl_stmt|;
name|v
operator|=
name|matom
argument_list|(
name|string
argument_list|)
expr_stmt|;
name|v
operator|->
name|fnbnd
operator|=
name|newfunct
argument_list|()
expr_stmt|;
name|v
operator|->
name|fnbnd
operator|->
name|entry
operator|=
name|entry
expr_stmt|;
name|v
operator|->
name|fnbnd
operator|->
name|discipline
operator|=
name|discip
expr_stmt|;
return|return
operator|(
name|v
operator|)
return|;
block|}
end_block

end_unit

