begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/***************************************************************************  * This program is Copyright (C) 1986, 1987, 1988 by Jonathan Payne.  JOVE *  * is provided to you without charge, and with no warranty.  You may give  *  * away copies of JOVE, including sources, provided that this notice is    *  * included in all the files.                                              *  ***************************************************************************/
end_comment

begin_comment
comment|/* some utility functions, as macros, to be included by jove.h */
end_comment

begin_decl_stmt
specifier|extern
name|char
name|key_strokes
index|[
literal|100
index|]
decl_stmt|,
modifier|*
name|keys_p
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|ModCount
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|init_strokes
parameter_list|()
value|{ keys_p = key_strokes; *keys_p = '\0'; }
end_define

begin_define
define|#
directive|define
name|add_stroke
parameter_list|(
name|c
parameter_list|)
value|{ \ 	if (keys_p<&key_strokes[sizeof (key_strokes) - 1]) { \ 		*keys_p++ = (c); \ 		*keys_p = '\0'; \ 	} \ }
end_define

begin_define
define|#
directive|define
name|IsModified
parameter_list|(
name|b
parameter_list|)
value|((b)->b_modified)
end_define

begin_define
define|#
directive|define
name|SavLine
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|)
value|((a)->l_dline = putline((b)))
end_define

begin_define
define|#
directive|define
name|SetLine
parameter_list|(
name|line
parameter_list|)
value|DotTo((line), 0)
end_define

begin_define
define|#
directive|define
name|bobp
parameter_list|()
value|(firstp(curline)&& bolp())
end_define

begin_define
define|#
directive|define
name|bolp
parameter_list|()
value|(curchar == 0)
end_define

begin_define
define|#
directive|define
name|eobp
parameter_list|()
value|(lastp(curline)&& eolp())
end_define

begin_define
define|#
directive|define
name|eolp
parameter_list|()
value|(linebuf[curchar] == '\0')
end_define

begin_define
define|#
directive|define
name|firstp
parameter_list|(
name|line
parameter_list|)
value|((line) == curbuf->b_first)
end_define

begin_define
define|#
directive|define
name|getDOT
parameter_list|()
value|getline(curline->l_dline, linebuf)
end_define

begin_define
define|#
directive|define
name|lastp
parameter_list|(
name|line
parameter_list|)
value|((line) == curbuf->b_last)
end_define

begin_decl_stmt
specifier|extern
name|UnivPtr
name|emalloc
name|proto
argument_list|(
operator|(
name|size_t
name|size
operator|)
argument_list|)
decl_stmt|,
name|erealloc
name|proto
argument_list|(
operator|(
name|UnivPtr
name|ptr
operator|,
name|size_t
name|size
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|IOerr
name|proto
argument_list|(
operator|(
name|char
operator|*
name|err
operator|,
name|char
operator|*
name|file
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|StrIndex
name|proto
argument_list|(
operator|(
name|int
name|dir
operator|,
name|char
operator|*
name|buf
operator|,
name|int
name|charpos
operator|,
name|int
name|what
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|basename
name|proto
argument_list|(
operator|(
name|char
operator|*
name|f
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|copystr
name|proto
argument_list|(
operator|(
name|char
operator|*
name|str
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|filename
name|proto
argument_list|(
operator|(
expr|struct
name|buffer
operator|*
name|b
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|get_time
name|proto
argument_list|(
operator|(
name|time_t
operator|*
name|timep
operator|,
name|char
operator|*
name|buf
operator|,
name|int
name|from
operator|,
name|int
name|to
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|itoa
name|proto
argument_list|(
operator|(
name|int
name|num
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|lcontents
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|line
operator|)
argument_list|)
decl_stmt|,
modifier|*
name|ltobuf
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|line
operator|,
name|char
operator|*
name|buf
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|LineDist
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|nextp
operator|,
expr|struct
name|line
operator|*
name|endp
operator|)
argument_list|)
decl_stmt|,
name|TwoBlank
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|casecmp
name|proto
argument_list|(
operator|(
name|char
operator|*
name|s1
operator|,
name|char
operator|*
name|s2
operator|)
argument_list|)
decl_stmt|,
name|casencmp
name|proto
argument_list|(
operator|(
name|char
operator|*
name|s1
operator|,
name|char
operator|*
name|s2
operator|,
name|size_t
name|n
operator|)
argument_list|)
decl_stmt|,
name|inorder
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|nextp
operator|,
name|int
name|char1
operator|,
expr|struct
name|line
operator|*
name|endp
operator|,
name|int
name|char2
operator|)
argument_list|)
decl_stmt|,
name|length
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|line
operator|)
argument_list|)
decl_stmt|,
name|max
name|proto
argument_list|(
operator|(
name|int
name|a
operator|,
name|int
name|b
operator|)
argument_list|)
decl_stmt|,
name|min
name|proto
argument_list|(
operator|(
name|int
name|a
operator|,
name|int
name|b
operator|)
argument_list|)
decl_stmt|,
name|numcomp
name|proto
argument_list|(
operator|(
name|char
operator|*
name|s1
operator|,
name|char
operator|*
name|s2
operator|)
argument_list|)
decl_stmt|,
name|pnt_line
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|waitchar
name|proto
argument_list|(
operator|(
name|int
operator|*
name|slow
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|bool
name|blnkp
name|proto
argument_list|(
operator|(
name|char
operator|*
name|buf
operator|)
argument_list|)
decl_stmt|,
name|within_indent
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|fixorder
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
operator|*
name|line1
operator|,
name|int
operator|*
name|char1
operator|,
expr|struct
name|line
operator|*
operator|*
name|line2
operator|,
name|int
operator|*
name|char2
operator|)
argument_list|)
decl_stmt|,
name|inlist
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|first
operator|,
expr|struct
name|line
operator|*
name|what
operator|)
argument_list|)
decl_stmt|,
name|sindex
name|proto
argument_list|(
operator|(
name|char
operator|*
name|pattern
operator|,
name|char
operator|*
name|string
operator|)
argument_list|)
decl_stmt|,
name|ModBufs
name|proto
argument_list|(
operator|(
name|bool
name|allp
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|void
name|DOTsave
name|proto
argument_list|(
operator|(
expr|struct
name|position
operator|*
name|buf
operator|)
argument_list|)
decl_stmt|,
name|DotTo
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|line
operator|,
name|int
name|col
operator|)
argument_list|)
decl_stmt|,
name|ExecCmd
name|proto
argument_list|(
operator|(
expr|struct
name|data_obj
operator|*
name|cp
operator|)
argument_list|)
decl_stmt|,
name|PushPntp
name|proto
argument_list|(
operator|(
expr|struct
name|line
operator|*
name|line
operator|)
argument_list|)
decl_stmt|,
name|SetDot
name|proto
argument_list|(
operator|(
expr|struct
name|position
operator|*
name|bp
operator|)
argument_list|)
decl_stmt|,
name|ToFirst
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|ToLast
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|ins_c
name|proto
argument_list|(
operator|(
name|int
name|c
operator|,
name|char
operator|*
name|buf
operator|,
name|int
name|atchar
operator|,
name|int
name|num
operator|,
name|int
name|max
operator|)
argument_list|)
decl_stmt|,
name|len_error
name|proto
argument_list|(
operator|(
name|int
name|flag
operator|)
argument_list|)
decl_stmt|,
name|linecopy
name|proto
argument_list|(
operator|(
name|char
operator|*
name|onto
operator|,
name|int
name|atchar
operator|,
name|char
operator|*
name|from
operator|)
argument_list|)
decl_stmt|,
name|make_argv
name|proto
argument_list|(
operator|(
name|char
operator|*
operator|*
name|argv
operator|,
name|char
operator|*
name|ap
operator|)
argument_list|)
decl_stmt|,
name|modify
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|SitFor
name|proto
argument_list|(
operator|(
name|int
name|delay
operator|)
argument_list|)
decl_stmt|,
name|null_ncpy
name|proto
argument_list|(
operator|(
name|char
operator|*
name|to
operator|,
name|char
operator|*
name|from
operator|,
name|size_t
name|n
operator|)
argument_list|)
decl_stmt|,
ifdef|#
directive|ifdef
name|UNIX
name|dopipe
name|proto
argument_list|(
operator|(
name|int
operator|*
name|p
operator|)
argument_list|)
decl_stmt|,
name|pipeclose
name|proto
argument_list|(
operator|(
name|int
operator|*
name|p
operator|)
argument_list|)
decl_stmt|,
endif|#
directive|endif
name|pop_env
name|proto
argument_list|(
operator|(
name|jmp_buf
operator|)
argument_list|)
decl_stmt|,
name|push_env
name|proto
argument_list|(
operator|(
name|jmp_buf
operator|)
argument_list|)
decl_stmt|,
name|to_word
name|proto
argument_list|(
operator|(
name|int
name|dir
operator|)
argument_list|)
decl_stmt|,
name|unmodify
name|proto
argument_list|(
operator|(
name|void
operator|)
argument_list|)
decl_stmt|,
name|pp_key_strokes
name|proto
argument_list|(
operator|(
name|char
operator|*
name|buffer
operator|,
name|size_t
name|size
operator|)
argument_list|)
decl_stmt|;
end_decl_stmt

end_unit

