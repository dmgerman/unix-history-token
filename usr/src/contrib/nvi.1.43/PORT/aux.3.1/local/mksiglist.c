begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* mksignames.c -- Create and write an array of signal names. */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_if
if|#
directive|if
operator|!
name|defined
argument_list|(
name|NSIG
argument_list|)
end_if

begin_define
define|#
directive|define
name|NSIG
value|64
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|int
name|main
parameter_list|()
block|{
name|char
modifier|*
name|signal_names
index|[
name|NSIG
index|]
decl_stmt|;
name|char
modifier|*
name|signal_descs
index|[
name|NSIG
index|]
decl_stmt|;
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
name|NSIG
condition|;
name|i
operator|++
control|)
name|signal_descs
index|[
name|i
index|]
operator|=
name|signal_names
index|[
name|i
index|]
operator|=
operator|(
name|char
operator|*
operator|)
name|NULL
expr_stmt|;
comment|/* `signal' 0 is what we do on exit. */
name|signal_names
index|[
literal|0
index|]
operator|=
literal|"EXIT"
expr_stmt|;
name|signal_descs
index|[
literal|0
index|]
operator|=
literal|"Exit"
expr_stmt|;
comment|/* Place signal names which can be aliases for more common signal      names first.  This allows (for example) SIGEMT to overwrite SIGGRANT. */
if|#
directive|if
name|defined
argument_list|(
name|SIGGRANT
argument_list|)
name|signal_names
index|[
name|SIGGRANT
index|]
operator|=
literal|"SIGGRANT"
expr_stmt|;
name|signal_descs
index|[
name|SIGGRANT
index|]
operator|=
literal|"HFT monitor mode granted"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGRETRACT
argument_list|)
name|signal_names
index|[
name|SIGRETRACT
index|]
operator|=
literal|"SIGRETRACT"
expr_stmt|;
name|signal_descs
index|[
name|SIGRETRACT
index|]
operator|=
literal|"HFT monitor mode retracted"
operator|!
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGHUP
argument_list|)
name|signal_names
index|[
name|SIGHUP
index|]
operator|=
literal|"SIGHUP"
expr_stmt|;
name|signal_descs
index|[
name|SIGHUP
index|]
operator|=
literal|"Hangup"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGINT
argument_list|)
name|signal_names
index|[
name|SIGINT
index|]
operator|=
literal|"SIGINT"
expr_stmt|;
name|signal_descs
index|[
name|SIGINT
index|]
operator|=
literal|"Interrupt"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGQUIT
argument_list|)
name|signal_names
index|[
name|SIGQUIT
index|]
operator|=
literal|"SIGQUIT"
expr_stmt|;
name|signal_descs
index|[
name|SIGQUIT
index|]
operator|=
literal|"Quit"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGILL
argument_list|)
name|signal_names
index|[
name|SIGILL
index|]
operator|=
literal|"SIGILL"
expr_stmt|;
name|signal_descs
index|[
name|SIGILL
index|]
operator|=
literal|"Illegal instruction"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGTRAP
argument_list|)
name|signal_names
index|[
name|SIGTRAP
index|]
operator|=
literal|"SIGTRAP"
expr_stmt|;
name|signal_descs
index|[
name|SIGTRAP
index|]
operator|=
literal|"Trace/BPT trap"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGIOT
argument_list|)
name|signal_names
index|[
name|SIGIOT
index|]
operator|=
literal|"SIGIOT"
expr_stmt|;
name|signal_descs
index|[
name|SIGIOT
index|]
operator|=
literal|"IOT trap"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGABRT
argument_list|)
name|signal_names
index|[
name|SIGABRT
index|]
operator|=
literal|"SIGABRT"
expr_stmt|;
name|signal_descs
index|[
name|SIGABRT
index|]
operator|=
literal|"Abort"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGEMT
argument_list|)
name|signal_names
index|[
name|SIGEMT
index|]
operator|=
literal|"SIGEMT"
expr_stmt|;
name|signal_descs
index|[
name|SIGEMT
index|]
operator|=
literal|"EMT trap"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGFPE
argument_list|)
name|signal_names
index|[
name|SIGFPE
index|]
operator|=
literal|"SIGFPE"
expr_stmt|;
name|signal_descs
index|[
name|SIGFPE
index|]
operator|=
literal|"Floating point exception"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGKILL
argument_list|)
name|signal_names
index|[
name|SIGKILL
index|]
operator|=
literal|"SIGKILL"
expr_stmt|;
name|signal_descs
index|[
name|SIGKILL
index|]
operator|=
literal|"Killed"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGBUS
argument_list|)
name|signal_names
index|[
name|SIGBUS
index|]
operator|=
literal|"SIGBUS"
expr_stmt|;
name|signal_descs
index|[
name|SIGBUS
index|]
operator|=
literal|"Bus error"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGSEGV
argument_list|)
name|signal_names
index|[
name|SIGSEGV
index|]
operator|=
literal|"SIGSEGV"
expr_stmt|;
name|signal_descs
index|[
name|SIGSEGV
index|]
operator|=
literal|"Segmentation violation"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGSYS
argument_list|)
name|signal_names
index|[
name|SIGSYS
index|]
operator|=
literal|"SIGSYS"
expr_stmt|;
name|signal_descs
index|[
name|SIGSYS
index|]
operator|=
literal|"Bad system call"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGPIPE
argument_list|)
name|signal_names
index|[
name|SIGPIPE
index|]
operator|=
literal|"SIGPIPE"
expr_stmt|;
name|signal_descs
index|[
name|SIGPIPE
index|]
operator|=
literal|"Broken pipe"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGALRM
argument_list|)
name|signal_names
index|[
name|SIGALRM
index|]
operator|=
literal|"SIGALRM"
expr_stmt|;
name|signal_descs
index|[
name|SIGALRM
index|]
operator|=
literal|"Alarm clock"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGTERM
argument_list|)
name|signal_names
index|[
name|SIGTERM
index|]
operator|=
literal|"SIGTERM"
expr_stmt|;
name|signal_descs
index|[
name|SIGTERM
index|]
operator|=
literal|"Terminated"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGCLD
argument_list|)
name|signal_names
index|[
name|SIGCLD
index|]
operator|=
literal|"SIGCLD"
expr_stmt|;
name|signal_descs
index|[
name|SIGCLD
index|]
operator|=
literal|"Child exited or stopped"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGPWR
argument_list|)
name|signal_names
index|[
name|SIGPWR
index|]
operator|=
literal|"SIGPWR"
expr_stmt|;
name|signal_descs
index|[
name|SIGPWR
index|]
operator|=
literal|"Power failure imminent"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGPOLL
argument_list|)
name|signal_names
index|[
name|SIGPOLL
index|]
operator|=
literal|"SIGPOLL"
expr_stmt|;
name|signal_descs
index|[
name|SIGPOLL
index|]
operator|=
literal|"I/O possible"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGURG
argument_list|)
name|signal_names
index|[
name|SIGURG
index|]
operator|=
literal|"SIGURG"
expr_stmt|;
name|signal_descs
index|[
name|SIGURG
index|]
operator|=
literal|"Urgent I/O condition"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGSTOP
argument_list|)
name|signal_names
index|[
name|SIGSTOP
index|]
operator|=
literal|"SIGSTOP"
expr_stmt|;
name|signal_descs
index|[
name|SIGSTOP
index|]
operator|=
literal|"Stopped"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGTSTP
argument_list|)
name|signal_names
index|[
name|SIGTSTP
index|]
operator|=
literal|"SIGTSTP"
expr_stmt|;
name|signal_descs
index|[
name|SIGTSTP
index|]
operator|=
literal|"Suspended"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGCONT
argument_list|)
name|signal_names
index|[
name|SIGCONT
index|]
operator|=
literal|"SIGCONT"
expr_stmt|;
name|signal_descs
index|[
name|SIGCONT
index|]
operator|=
literal|"Continued"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGCHLD
argument_list|)
name|signal_names
index|[
name|SIGCHLD
index|]
operator|=
literal|"SIGCHLD"
expr_stmt|;
name|signal_descs
index|[
name|SIGCHLD
index|]
operator|=
literal|"Child exited or stopped"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGTTIN
argument_list|)
name|signal_names
index|[
name|SIGTTIN
index|]
operator|=
literal|"SIGTTIN"
expr_stmt|;
name|signal_descs
index|[
name|SIGTTIN
index|]
operator|=
literal|"Stopped (tty input)"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGTTOU
argument_list|)
name|signal_names
index|[
name|SIGTTOU
index|]
operator|=
literal|"SIGTTOU"
expr_stmt|;
name|signal_descs
index|[
name|SIGTTOU
index|]
operator|=
literal|"Stopped (tty output)"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGIO
argument_list|)
name|signal_names
index|[
name|SIGIO
index|]
operator|=
literal|"SIGIO"
expr_stmt|;
name|signal_descs
index|[
name|SIGIO
index|]
operator|=
literal|"I/O possible"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGXCPU
argument_list|)
name|signal_names
index|[
name|SIGXCPU
index|]
operator|=
literal|"SIGXCPU"
expr_stmt|;
name|signal_descs
index|[
name|SIGXCPU
index|]
operator|=
literal|"CPU time limit exceeded"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGXFSZ
argument_list|)
name|signal_names
index|[
name|SIGXFSZ
index|]
operator|=
literal|"SIGXFSZ"
expr_stmt|;
name|signal_descs
index|[
name|SIGXFSZ
index|]
operator|=
literal|"File size limit exceeded"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGVTALRM
argument_list|)
name|signal_names
index|[
name|SIGVTALRM
index|]
operator|=
literal|"SIGVTALRM"
expr_stmt|;
name|signal_descs
index|[
name|SIGVTALRM
index|]
operator|=
literal|"Alarm (virtual)"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGPROF
argument_list|)
name|signal_names
index|[
name|SIGPROF
index|]
operator|=
literal|"SIGPROF"
expr_stmt|;
name|signal_descs
index|[
name|SIGPROF
index|]
operator|=
literal|"Alarm (profile)"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGWINCH
argument_list|)
name|signal_names
index|[
name|SIGWINCH
index|]
operator|=
literal|"SIGWINCH"
expr_stmt|;
name|signal_descs
index|[
name|SIGWINCH
index|]
operator|=
literal|"Window changed"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGLOST
argument_list|)
name|signal_names
index|[
name|SIGLOST
index|]
operator|=
literal|"SIGLOST"
expr_stmt|;
name|signal_descs
index|[
name|SIGLOST
index|]
operator|=
literal|"Record lock"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGUSR1
argument_list|)
name|signal_names
index|[
name|SIGUSR1
index|]
operator|=
literal|"SIGUSR1"
expr_stmt|;
name|signal_descs
index|[
name|SIGUSR1
index|]
operator|=
literal|"User signal 1"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGUSR2
argument_list|)
name|signal_names
index|[
name|SIGUSR2
index|]
operator|=
literal|"SIGUSR2"
expr_stmt|;
name|signal_descs
index|[
name|SIGUSR2
index|]
operator|=
literal|"User signal 2"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGMSG
argument_list|)
name|signal_names
index|[
name|SIGMSG
index|]
operator|=
literal|"SIGMSG"
expr_stmt|;
name|signal_descs
index|[
name|SIGMSG
index|]
operator|=
literal|"HFT input data pending"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGDANGER
argument_list|)
name|signal_names
index|[
name|SIGDANGER
index|]
operator|=
literal|"SIGDANGER"
expr_stmt|;
name|signal_descs
index|[
name|SIGDANGER
index|]
operator|=
literal|"System crash imminent"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGMIGRATE
argument_list|)
name|signal_names
index|[
name|SIGMIGRATE
index|]
operator|=
literal|"SIGMIGRATE"
expr_stmt|;
name|signal_descs
index|[
name|SIGMIGRATE
index|]
operator|=
literal|"Migrate process to another CPU"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGPRE
argument_list|)
name|signal_names
index|[
name|SIGPRE
index|]
operator|=
literal|"SIGPRE"
expr_stmt|;
name|signal_descs
index|[
name|SIGPRE
index|]
operator|=
literal|"Programming error"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGSOUND
argument_list|)
name|signal_names
index|[
name|SIGSOUND
index|]
operator|=
literal|"SIGSOUND"
expr_stmt|;
name|signal_descs
index|[
name|SIGSOUND
index|]
operator|=
literal|"HFT sound sequence completed"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGSAK
argument_list|)
name|signal_names
index|[
name|SIGSAK
index|]
operator|=
literal|"SIGSAK"
expr_stmt|;
name|signal_descs
index|[
name|SIGSAK
index|]
operator|=
literal|"Secure Attention Key"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGWINDOW
argument_list|)
name|signal_names
index|[
name|SIGWINDOW
index|]
operator|=
literal|"SIGWINDOW"
expr_stmt|;
endif|#
directive|endif
if|#
directive|if
name|defined
argument_list|(
name|SIGDIL
argument_list|)
name|signal_names
index|[
name|SIGDIL
index|]
operator|=
literal|"SIGDIL"
expr_stmt|;
endif|#
directive|endif
name|printf
argument_list|(
literal|"/* This file was generated automatically */\n\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"#include<sys/cdefs.h>\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"#include<signal.h>\n\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"const char *const sys_signame[NSIG+1] = {\n"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|NSIG
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|signal_names
index|[
name|i
index|]
operator|==
operator|(
name|char
operator|*
operator|)
name|NULL
condition|)
name|printf
argument_list|(
literal|"    \"SIGJUNK(%d)\",\n"
argument_list|,
name|i
argument_list|)
expr_stmt|;
else|else
name|printf
argument_list|(
literal|"    \"%s\",\n"
argument_list|,
name|signal_names
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"    (char *)0\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"};\n\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"const char *const sys_siglist[NSIG+1] = {\n"
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|NSIG
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|signal_descs
index|[
name|i
index|]
operator|==
operator|(
name|char
operator|*
operator|)
name|NULL
condition|)
name|printf
argument_list|(
literal|"    \"Unknown signal %d\",\n"
argument_list|,
name|i
argument_list|)
expr_stmt|;
else|else
name|printf
argument_list|(
literal|"    \"%s\",\n"
argument_list|,
name|signal_descs
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"    (char *)0\n"
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"};\n"
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

end_unit

