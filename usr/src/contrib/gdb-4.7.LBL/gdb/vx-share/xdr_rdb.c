begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* xdr_rdb.c  - xdr routines for Remote Debug interface to VxWorks  */
end_comment

begin_comment
comment|/* Copyright 1992 Free Software Foundation, Inc.     This code was donated by Wind River Systems, Inc. */
end_comment

begin_comment
comment|/* modification history -------------------- 01a,21mar90,llk  created using modification 01d of xdr_dbx.c. */
end_comment

begin_comment
comment|/* DESCRIPTION This module contains the eXternal Data Representation (XDR) routines for the RDB interface for VxWorks. */
end_comment

begin_include
include|#
directive|include
file|"vxWorks.h"
end_include

begin_include
include|#
directive|include
file|<rpc/rpc.h>
end_include

begin_include
include|#
directive|include
file|"xdr_rdb.h"
end_include

begin_comment
comment|/* forward declarations */
end_comment

begin_function
name|bool_t
name|xdr_arg_type
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|arg_type
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_enum
argument_list|(
name|xdrs
argument_list|,
operator|(
name|enum_t
operator|*
operator|)
name|objp
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_function
name|bool_t
name|xdr_arg_value
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|arg_value
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_arg_type
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|type
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
switch|switch
condition|(
name|objp
operator|->
name|type
condition|)
block|{
case|case
name|T_BYTE
case|:
if|if
condition|(
operator|!
name|xdr_char
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|arg_value_u
operator|.
name|v_byte
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
break|break;
case|case
name|T_WORD
case|:
if|if
condition|(
operator|!
name|xdr_short
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|arg_value_u
operator|.
name|v_word
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
break|break;
case|case
name|T_INT
case|:
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|arg_value_u
operator|.
name|v_int
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
break|break;
case|case
name|T_FLOAT
case|:
if|if
condition|(
operator|!
name|xdr_float
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|arg_value_u
operator|.
name|v_fp
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
break|break;
case|case
name|T_DOUBLE
case|:
if|if
condition|(
operator|!
name|xdr_double
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|arg_value_u
operator|.
name|v_dp
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
break|break;
case|case
name|T_UNKNOWN
case|:
break|break;
block|}
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_function
name|bool_t
name|xdr_func_call
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|func_call
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|func_addr
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
if|if
condition|(
operator|!
name|xdr_array
argument_list|(
name|xdrs
argument_list|,
operator|(
name|char
operator|*
operator|*
operator|)
operator|&
name|objp
operator|->
name|args
operator|.
name|args_val
argument_list|,
operator|(
name|u_int
operator|*
operator|)
operator|&
name|objp
operator|->
name|args
operator|.
name|args_len
argument_list|,
name|MAX_FUNC_ARGS
argument_list|,
sizeof|sizeof
argument_list|(
name|arg_value
argument_list|)
argument_list|,
name|xdr_arg_value
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_function
name|bool_t
name|xdr_arg_one
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|arg_one
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_string
argument_list|(
name|xdrs
argument_list|,
name|objp
argument_list|,
name|MAX_ARG_LEN
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_function
name|bool_t
name|xdr_arg_array
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|arg_array
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_array
argument_list|(
name|xdrs
argument_list|,
operator|(
name|char
operator|*
operator|*
operator|)
operator|&
name|objp
operator|->
name|arg_array_val
argument_list|,
operator|(
name|u_int
operator|*
operator|)
operator|&
name|objp
operator|->
name|arg_array_len
argument_list|,
name|MAX_ARG_CNT
argument_list|,
sizeof|sizeof
argument_list|(
name|arg_one
argument_list|)
argument_list|,
name|xdr_arg_one
argument_list|)
condition|)
block|{
return|return
operator|(
name|FALSE
operator|)
return|;
block|}
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_comment
comment|/********************************************************************* * * xdr_EVENT_TYPE - * */
end_comment

begin_function
name|bool_t
name|xdr_EVENT_TYPE
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|EVENT_TYPE
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_enum
argument_list|(
name|xdrs
argument_list|,
operator|(
name|enum_t
operator|*
operator|)
name|objp
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_comment
comment|/********************************************************************* * * xdr_RDB_EVENT - * */
end_comment

begin_function
name|bool_t
name|xdr_RDB_EVENT
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|RDB_EVENT
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|status
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|taskId
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_EVENT_TYPE
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|eventType
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|sigType
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_comment
comment|/********************************************************************* * * xdr_TASK_START - * */
end_comment

begin_function
name|bool_t
name|xdr_TASK_START
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|TASK_START
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|status
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|pid
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_comment
comment|/********************************************************************* * * xdr_SYMBOL_ADDR - * */
end_comment

begin_function
name|bool_t
name|xdr_SYMBOL_ADDR
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|SYMBOL_ADDR
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|status
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_u_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|addr
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

begin_comment
comment|/********************************************************************* * * xdr_SOURCE_STEP - * */
end_comment

begin_function
name|bool_t
name|xdr_SOURCE_STEP
parameter_list|(
name|xdrs
parameter_list|,
name|objp
parameter_list|)
name|XDR
modifier|*
name|xdrs
decl_stmt|;
name|SOURCE_STEP
modifier|*
name|objp
decl_stmt|;
block|{
if|if
condition|(
operator|!
name|xdr_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|taskId
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_u_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|startAddr
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
if|if
condition|(
operator|!
name|xdr_u_int
argument_list|(
name|xdrs
argument_list|,
operator|&
name|objp
operator|->
name|endAddr
argument_list|)
condition|)
return|return
operator|(
name|FALSE
operator|)
return|;
return|return
operator|(
name|TRUE
operator|)
return|;
block|}
end_function

end_unit

