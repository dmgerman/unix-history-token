begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* $XConsortium: PixFormats.c,v 1.5 91/02/01 16:33:23 gildea Exp $ */
end_comment

begin_comment
comment|/* Copyright 1989 Massachusetts Institute of Technology */
end_comment

begin_comment
comment|/* Permission to use, copy, modify, distribute, and sell this software and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation, and that the name of M.I.T. not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  M.I.T. makes no representations about the suitability of this software for any purpose.  It is provided "as is" without express or implied warranty. */
end_comment

begin_include
include|#
directive|include
file|"Xlibint.h"
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_comment
comment|/*  * XListPixmapFormats - return info from connection setup  */
end_comment

begin_function
name|XPixmapFormatValues
modifier|*
name|XListPixmapFormats
parameter_list|(
name|dpy
parameter_list|,
name|count
parameter_list|)
name|Display
modifier|*
name|dpy
decl_stmt|;
name|int
modifier|*
name|count
decl_stmt|;
comment|/* RETURN */
block|{
name|XPixmapFormatValues
modifier|*
name|formats
init|=
operator|(
name|XPixmapFormatValues
operator|*
operator|)
name|Xmalloc
argument_list|(
call|(
name|unsigned
call|)
argument_list|(
name|dpy
operator|->
name|nformats
operator|*
sizeof|sizeof
argument_list|(
name|XPixmapFormatValues
argument_list|)
argument_list|)
argument_list|)
decl_stmt|;
if|if
condition|(
name|formats
condition|)
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|XPixmapFormatValues
modifier|*
name|f
decl_stmt|;
specifier|register
name|ScreenFormat
modifier|*
name|sf
decl_stmt|;
comment|/* 	 * copy data from internal Xlib data structure in display 	 */
for|for
control|(
name|i
operator|=
name|dpy
operator|->
name|nformats
operator|,
name|f
operator|=
name|formats
operator|,
name|sf
operator|=
name|dpy
operator|->
name|pixmap_format
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
operator|,
name|f
operator|++
operator|,
name|sf
operator|++
control|)
block|{
name|f
operator|->
name|depth
operator|=
name|sf
operator|->
name|depth
expr_stmt|;
name|f
operator|->
name|bits_per_pixel
operator|=
name|sf
operator|->
name|bits_per_pixel
expr_stmt|;
name|f
operator|->
name|scanline_pad
operator|=
name|sf
operator|->
name|scanline_pad
expr_stmt|;
block|}
operator|*
name|count
operator|=
name|dpy
operator|->
name|nformats
expr_stmt|;
block|}
return|return
name|formats
return|;
block|}
end_function

end_unit

