begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * $XConsortium: XEvToWire.c,v 11.19 91/01/06 11:45:24 rws Exp $  */
end_comment

begin_comment
comment|/* Copyright    Massachusetts Institute of Technology    1985, 1986, 1987 */
end_comment

begin_comment
comment|/* Permission to use, copy, modify, distribute, and sell this software and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation, and that the name of M.I.T. not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  M.I.T. makes no representations about the suitability of this software for any purpose.  It is provided "as is" without express or implied warranty. */
end_comment

begin_comment
comment|/*  *	XEvToWire.c - Internal support routines for the C subroutine  *	interface library (Xlib) to the X Window System Protocol V11.0.  */
end_comment

begin_define
define|#
directive|define
name|NEED_EVENTS
end_define

begin_define
define|#
directive|define
name|NEED_REPLIES
end_define

begin_include
include|#
directive|include
file|"Xlibint.h"
end_include

begin_comment
comment|/*  * reformat a wire event into an XEvent structure of the right type.  */
end_comment

begin_function
name|Status
name|_XEventToWire
parameter_list|(
name|dpy
parameter_list|,
name|re
parameter_list|,
name|event
parameter_list|)
specifier|register
name|Display
modifier|*
name|dpy
decl_stmt|;
comment|/* pointer to display structure */
specifier|register
name|XEvent
modifier|*
name|re
decl_stmt|;
comment|/* pointer to where event should be reformatted */
specifier|register
name|xEvent
modifier|*
name|event
decl_stmt|;
comment|/* wire protocol event */
block|{
switch|switch
condition|(
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|type
operator|=
name|re
operator|->
name|type
condition|)
block|{
case|case
name|KeyPress
case|:
case|case
name|KeyRelease
case|:
block|{
specifier|register
name|XKeyEvent
modifier|*
name|ev
init|=
operator|(
name|XKeyEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|root
operator|=
name|ev
operator|->
name|root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|event
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|child
operator|=
name|ev
operator|->
name|subwindow
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|eventX
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|eventY
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|rootX
operator|=
name|ev
operator|->
name|x_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|rootY
operator|=
name|ev
operator|->
name|y_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|sameScreen
operator|=
name|ev
operator|->
name|same_screen
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|keycode
expr_stmt|;
block|}
break|break;
case|case
name|ButtonPress
case|:
case|case
name|ButtonRelease
case|:
block|{
specifier|register
name|XButtonEvent
modifier|*
name|ev
init|=
operator|(
name|XButtonEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|root
operator|=
name|ev
operator|->
name|root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|event
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|child
operator|=
name|ev
operator|->
name|subwindow
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|eventX
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|eventY
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|rootX
operator|=
name|ev
operator|->
name|x_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|rootY
operator|=
name|ev
operator|->
name|y_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|sameScreen
operator|=
name|ev
operator|->
name|same_screen
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|button
expr_stmt|;
block|}
break|break;
case|case
name|MotionNotify
case|:
block|{
specifier|register
name|XMotionEvent
modifier|*
name|ev
init|=
operator|(
name|XMotionEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|root
operator|=
name|ev
operator|->
name|root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|event
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|child
operator|=
name|ev
operator|->
name|subwindow
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|eventX
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|eventY
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|rootX
operator|=
name|ev
operator|->
name|x_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|rootY
operator|=
name|ev
operator|->
name|y_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|keyButtonPointer
operator|.
name|sameScreen
operator|=
name|ev
operator|->
name|same_screen
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|is_hint
expr_stmt|;
block|}
break|break;
case|case
name|EnterNotify
case|:
case|case
name|LeaveNotify
case|:
block|{
specifier|register
name|XCrossingEvent
modifier|*
name|ev
init|=
operator|(
name|XCrossingEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|root
operator|=
name|ev
operator|->
name|root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|event
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|child
operator|=
name|ev
operator|->
name|subwindow
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|eventX
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|eventY
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|rootX
operator|=
name|ev
operator|->
name|x_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|rootY
operator|=
name|ev
operator|->
name|y_root
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|mode
operator|=
name|ev
operator|->
name|mode
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|flags
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|ev
operator|->
name|same_screen
condition|)
block|{
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|flags
operator||=
name|ELFlagSameScreen
expr_stmt|;
block|}
if|if
condition|(
name|ev
operator|->
name|focus
condition|)
block|{
name|event
operator|->
name|u
operator|.
name|enterLeave
operator|.
name|flags
operator||=
name|ELFlagFocus
expr_stmt|;
block|}
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|detail
expr_stmt|;
block|}
break|break;
case|case
name|FocusIn
case|:
case|case
name|FocusOut
case|:
block|{
specifier|register
name|XFocusChangeEvent
modifier|*
name|ev
init|=
operator|(
name|XFocusChangeEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|focus
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|focus
operator|.
name|mode
operator|=
name|ev
operator|->
name|mode
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|detail
expr_stmt|;
block|}
break|break;
case|case
name|KeymapNotify
case|:
block|{
specifier|register
name|XKeymapEvent
modifier|*
name|ev
init|=
operator|(
name|XKeymapEvent
operator|*
operator|)
name|re
decl_stmt|;
name|bcopy
argument_list|(
operator|&
name|ev
operator|->
name|key_vector
index|[
literal|1
index|]
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|(
operator|(
operator|(
name|xKeymapEvent
operator|*
operator|)
name|event
operator|)
operator|->
name|map
operator|)
argument_list|,
sizeof|sizeof
argument_list|(
operator|(
operator|(
name|xKeymapEvent
operator|*
operator|)
name|event
operator|)
operator|->
name|map
argument_list|)
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
name|Expose
case|:
block|{
specifier|register
name|XExposeEvent
modifier|*
name|ev
init|=
operator|(
name|XExposeEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|expose
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|expose
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|expose
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|expose
operator|.
name|width
operator|=
name|ev
operator|->
name|width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|expose
operator|.
name|height
operator|=
name|ev
operator|->
name|height
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|expose
operator|.
name|count
operator|=
name|ev
operator|->
name|count
expr_stmt|;
block|}
break|break;
case|case
name|GraphicsExpose
case|:
block|{
specifier|register
name|XGraphicsExposeEvent
modifier|*
name|ev
init|=
operator|(
name|XGraphicsExposeEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|drawable
operator|=
name|ev
operator|->
name|drawable
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|width
operator|=
name|ev
operator|->
name|width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|height
operator|=
name|ev
operator|->
name|height
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|count
operator|=
name|ev
operator|->
name|count
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|majorEvent
operator|=
name|ev
operator|->
name|major_code
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|graphicsExposure
operator|.
name|minorEvent
operator|=
name|ev
operator|->
name|minor_code
expr_stmt|;
block|}
break|break;
case|case
name|NoExpose
case|:
block|{
specifier|register
name|XNoExposeEvent
modifier|*
name|ev
init|=
operator|(
name|XNoExposeEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|noExposure
operator|.
name|drawable
operator|=
name|ev
operator|->
name|drawable
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|noExposure
operator|.
name|majorEvent
operator|=
name|ev
operator|->
name|major_code
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|noExposure
operator|.
name|minorEvent
operator|=
name|ev
operator|->
name|minor_code
expr_stmt|;
block|}
break|break;
case|case
name|VisibilityNotify
case|:
block|{
specifier|register
name|XVisibilityEvent
modifier|*
name|ev
init|=
operator|(
name|XVisibilityEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|visibility
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|visibility
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
block|}
break|break;
case|case
name|CreateNotify
case|:
block|{
specifier|register
name|XCreateWindowEvent
modifier|*
name|ev
init|=
operator|(
name|XCreateWindowEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|parent
operator|=
name|ev
operator|->
name|parent
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|width
operator|=
name|ev
operator|->
name|width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|height
operator|=
name|ev
operator|->
name|height
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|borderWidth
operator|=
name|ev
operator|->
name|border_width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|createNotify
operator|.
name|override
operator|=
name|ev
operator|->
name|override_redirect
expr_stmt|;
block|}
break|break;
case|case
name|DestroyNotify
case|:
block|{
specifier|register
name|XDestroyWindowEvent
modifier|*
name|ev
init|=
operator|(
name|XDestroyWindowEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|destroyNotify
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|destroyNotify
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
block|}
break|break;
case|case
name|UnmapNotify
case|:
block|{
specifier|register
name|XUnmapEvent
modifier|*
name|ev
init|=
operator|(
name|XUnmapEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|unmapNotify
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|unmapNotify
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|unmapNotify
operator|.
name|fromConfigure
operator|=
name|ev
operator|->
name|from_configure
expr_stmt|;
block|}
break|break;
case|case
name|MapNotify
case|:
block|{
specifier|register
name|XMapEvent
modifier|*
name|ev
init|=
operator|(
name|XMapEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|mapNotify
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|mapNotify
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|mapNotify
operator|.
name|override
operator|=
name|ev
operator|->
name|override_redirect
expr_stmt|;
block|}
break|break;
case|case
name|MapRequest
case|:
block|{
specifier|register
name|XMapRequestEvent
modifier|*
name|ev
init|=
operator|(
name|XMapRequestEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|mapRequest
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|mapRequest
operator|.
name|parent
operator|=
name|ev
operator|->
name|parent
expr_stmt|;
block|}
break|break;
case|case
name|ReparentNotify
case|:
block|{
specifier|register
name|XReparentEvent
modifier|*
name|ev
init|=
operator|(
name|XReparentEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|reparent
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|reparent
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|reparent
operator|.
name|parent
operator|=
name|ev
operator|->
name|parent
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|reparent
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|reparent
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|reparent
operator|.
name|override
operator|=
name|ev
operator|->
name|override_redirect
expr_stmt|;
block|}
break|break;
case|case
name|ConfigureNotify
case|:
block|{
specifier|register
name|XConfigureEvent
modifier|*
name|ev
init|=
operator|(
name|XConfigureEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|aboveSibling
operator|=
name|ev
operator|->
name|above
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|width
operator|=
name|ev
operator|->
name|width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|height
operator|=
name|ev
operator|->
name|height
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|borderWidth
operator|=
name|ev
operator|->
name|border_width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureNotify
operator|.
name|override
operator|=
name|ev
operator|->
name|override_redirect
expr_stmt|;
block|}
break|break;
case|case
name|ConfigureRequest
case|:
block|{
specifier|register
name|XConfigureRequestEvent
modifier|*
name|ev
init|=
operator|(
name|XConfigureRequestEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|parent
operator|=
name|ev
operator|->
name|parent
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|sibling
operator|=
name|ev
operator|->
name|above
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|width
operator|=
name|ev
operator|->
name|width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|height
operator|=
name|ev
operator|->
name|height
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|borderWidth
operator|=
name|ev
operator|->
name|border_width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|configureRequest
operator|.
name|valueMask
operator|=
name|ev
operator|->
name|value_mask
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|detail
expr_stmt|;
block|}
break|break;
case|case
name|GravityNotify
case|:
block|{
specifier|register
name|XGravityEvent
modifier|*
name|ev
init|=
operator|(
name|XGravityEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|gravity
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|gravity
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|gravity
operator|.
name|x
operator|=
name|ev
operator|->
name|x
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|gravity
operator|.
name|y
operator|=
name|ev
operator|->
name|y
expr_stmt|;
block|}
break|break;
case|case
name|ResizeRequest
case|:
block|{
specifier|register
name|XResizeRequestEvent
modifier|*
name|ev
init|=
operator|(
name|XResizeRequestEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|resizeRequest
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|resizeRequest
operator|.
name|width
operator|=
name|ev
operator|->
name|width
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|resizeRequest
operator|.
name|height
operator|=
name|ev
operator|->
name|height
expr_stmt|;
block|}
break|break;
case|case
name|CirculateNotify
case|:
block|{
specifier|register
name|XCirculateEvent
modifier|*
name|ev
init|=
operator|(
name|XCirculateEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|circulate
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|circulate
operator|.
name|event
operator|=
name|ev
operator|->
name|event
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|circulate
operator|.
name|place
operator|=
name|ev
operator|->
name|place
expr_stmt|;
block|}
break|break;
case|case
name|CirculateRequest
case|:
block|{
specifier|register
name|XCirculateRequestEvent
modifier|*
name|ev
init|=
operator|(
name|XCirculateRequestEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|circulate
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|circulate
operator|.
name|event
operator|=
name|ev
operator|->
name|parent
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|circulate
operator|.
name|place
operator|=
name|ev
operator|->
name|place
expr_stmt|;
block|}
break|break;
case|case
name|PropertyNotify
case|:
block|{
specifier|register
name|XPropertyEvent
modifier|*
name|ev
init|=
operator|(
name|XPropertyEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|property
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|property
operator|.
name|atom
operator|=
name|ev
operator|->
name|atom
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|property
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|property
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
block|}
break|break;
case|case
name|SelectionClear
case|:
block|{
specifier|register
name|XSelectionClearEvent
modifier|*
name|ev
init|=
operator|(
name|XSelectionClearEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionClear
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionClear
operator|.
name|atom
operator|=
name|ev
operator|->
name|selection
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionClear
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
block|}
break|break;
case|case
name|SelectionRequest
case|:
block|{
specifier|register
name|XSelectionRequestEvent
modifier|*
name|ev
init|=
operator|(
name|XSelectionRequestEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionRequest
operator|.
name|owner
operator|=
name|ev
operator|->
name|owner
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionRequest
operator|.
name|requestor
operator|=
name|ev
operator|->
name|requestor
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionRequest
operator|.
name|selection
operator|=
name|ev
operator|->
name|selection
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionRequest
operator|.
name|target
operator|=
name|ev
operator|->
name|target
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionRequest
operator|.
name|property
operator|=
name|ev
operator|->
name|property
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionRequest
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
block|}
break|break;
case|case
name|SelectionNotify
case|:
block|{
specifier|register
name|XSelectionEvent
modifier|*
name|ev
init|=
operator|(
name|XSelectionEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionNotify
operator|.
name|requestor
operator|=
name|ev
operator|->
name|requestor
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionNotify
operator|.
name|selection
operator|=
name|ev
operator|->
name|selection
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionNotify
operator|.
name|target
operator|=
name|ev
operator|->
name|target
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionNotify
operator|.
name|property
operator|=
name|ev
operator|->
name|property
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|selectionNotify
operator|.
name|time
operator|=
name|ev
operator|->
name|time
expr_stmt|;
block|}
break|break;
case|case
name|ColormapNotify
case|:
block|{
specifier|register
name|XColormapEvent
modifier|*
name|ev
init|=
operator|(
name|XColormapEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|colormap
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|colormap
operator|.
name|colormap
operator|=
name|ev
operator|->
name|colormap
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|colormap
operator|.
name|new
operator|=
name|ev
operator|->
name|new
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|colormap
operator|.
name|state
operator|=
name|ev
operator|->
name|state
expr_stmt|;
block|}
break|break;
case|case
name|ClientMessage
case|:
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|XClientMessageEvent
modifier|*
name|ev
init|=
operator|(
name|XClientMessageEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|window
operator|=
name|ev
operator|->
name|window
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|u
operator|.
name|detail
operator|=
name|ev
operator|->
name|format
expr_stmt|;
switch|switch
condition|(
name|ev
operator|->
name|format
condition|)
block|{
case|case
literal|8
case|:
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|b
operator|.
name|type
operator|=
name|ev
operator|->
name|message_type
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|20
condition|;
name|i
operator|++
control|)
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|b
operator|.
name|bytes
index|[
name|i
index|]
operator|=
name|ev
operator|->
name|data
operator|.
name|b
index|[
name|i
index|]
expr_stmt|;
break|break;
case|case
literal|16
case|:
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|type
operator|=
name|ev
operator|->
name|message_type
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts0
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|0
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts1
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|1
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts2
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|2
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts3
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|3
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts4
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|4
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts5
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|5
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts6
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|6
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts7
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|7
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts8
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|8
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|s
operator|.
name|shorts9
operator|=
name|ev
operator|->
name|data
operator|.
name|s
index|[
literal|9
index|]
expr_stmt|;
break|break;
case|case
literal|32
case|:
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|l
operator|.
name|type
operator|=
name|ev
operator|->
name|message_type
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|l
operator|.
name|longs0
operator|=
name|ev
operator|->
name|data
operator|.
name|l
index|[
literal|0
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|l
operator|.
name|longs1
operator|=
name|ev
operator|->
name|data
operator|.
name|l
index|[
literal|1
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|l
operator|.
name|longs2
operator|=
name|ev
operator|->
name|data
operator|.
name|l
index|[
literal|2
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|l
operator|.
name|longs3
operator|=
name|ev
operator|->
name|data
operator|.
name|l
index|[
literal|3
index|]
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|clientMessage
operator|.
name|u
operator|.
name|l
operator|.
name|longs4
operator|=
name|ev
operator|->
name|data
operator|.
name|l
index|[
literal|4
index|]
expr_stmt|;
break|break;
default|default:
comment|/* client passing bogus data, let server complain */
break|break;
block|}
block|}
break|break;
case|case
name|MappingNotify
case|:
block|{
specifier|register
name|XMappingEvent
modifier|*
name|ev
init|=
operator|(
name|XMappingEvent
operator|*
operator|)
name|re
decl_stmt|;
name|event
operator|->
name|u
operator|.
name|mappingNotify
operator|.
name|firstKeyCode
operator|=
name|ev
operator|->
name|first_keycode
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|mappingNotify
operator|.
name|request
operator|=
name|ev
operator|->
name|request
expr_stmt|;
name|event
operator|->
name|u
operator|.
name|mappingNotify
operator|.
name|count
operator|=
name|ev
operator|->
name|count
expr_stmt|;
block|}
break|break;
default|default:
return|return
operator|(
name|_XUnknownNativeEvent
argument_list|(
name|dpy
argument_list|,
name|re
argument_list|,
name|event
argument_list|)
operator|)
return|;
block|}
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_function

end_unit

