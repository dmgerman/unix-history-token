begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* $XConsortium: XmbWMProps.c,v 1.4 91/06/19 19:38:43 rws Exp $ */
end_comment

begin_comment
comment|/*  Copyright 1991 by the Massachusetts Institute of Technology  Permission to use, copy, modify, distribute, and sell this software and its documentation for any purpose is hereby granted without fee, provided that the above copyright notice appear in all copies and that both that copyright notice and this permission notice appear in supporting documentation, and that the name of M.I.T. not be used in advertising or publicity pertaining to distribution of the software without specific, written prior permission.  M.I.T. makes no representations about the suitability of this software for any purpose.  It is provided "as is" without express or implied warranty.  */
end_comment

begin_include
include|#
directive|include
file|<X11/Xlibint.h>
end_include

begin_include
include|#
directive|include
file|<X11/Xutil.h>
end_include

begin_include
include|#
directive|include
file|<X11/Xatom.h>
end_include

begin_include
include|#
directive|include
file|<X11/Xlocale.h>
end_include

begin_if
if|#
directive|if
name|NeedFunctionPrototypes
end_if

begin_function
name|void
name|XmbSetWMProperties
parameter_list|(
name|Display
modifier|*
name|dpy
parameter_list|,
name|Window
name|w
parameter_list|,
name|_Xconst
name|char
modifier|*
name|windowName
parameter_list|,
name|_Xconst
name|char
modifier|*
name|iconName
parameter_list|,
name|char
modifier|*
modifier|*
name|argv
parameter_list|,
name|int
name|argc
parameter_list|,
name|XSizeHints
modifier|*
name|sizeHints
parameter_list|,
name|XWMHints
modifier|*
name|wmHints
parameter_list|,
name|XClassHint
modifier|*
name|classHints
parameter_list|)
else|#
directive|else
function|void XmbSetWMProperties
parameter_list|(
name|dpy
parameter_list|,
name|w
parameter_list|,
name|windowName
parameter_list|,
name|iconName
parameter_list|,
name|argv
parameter_list|,
name|argc
parameter_list|,
name|sizeHints
parameter_list|,
name|wmHints
parameter_list|,
name|classHints
parameter_list|)
name|Display
modifier|*
name|dpy
decl_stmt|;
name|Window
name|w
decl_stmt|;
comment|/* window to decorate */
name|char
modifier|*
name|windowName
decl_stmt|;
comment|/* name of application */
name|char
modifier|*
name|iconName
decl_stmt|;
comment|/* name string for icon */
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
comment|/* command line */
name|int
name|argc
decl_stmt|;
comment|/* size of command line */
name|XSizeHints
modifier|*
name|sizeHints
decl_stmt|;
comment|/* size hints for window in its normal state */
name|XWMHints
modifier|*
name|wmHints
decl_stmt|;
comment|/* miscelaneous window manager hints */
name|XClassHint
modifier|*
name|classHints
decl_stmt|;
comment|/* resource name and class */
endif|#
directive|endif
block|{
name|XTextProperty
name|wname
decl_stmt|,
name|iname
decl_stmt|;
name|XTextProperty
modifier|*
name|wprop
init|=
name|NULL
decl_stmt|;
name|XTextProperty
modifier|*
name|iprop
init|=
name|NULL
decl_stmt|;
name|char
modifier|*
name|locale
decl_stmt|;
if|if
condition|(
name|windowName
operator|&&
name|XmbTextListToTextProperty
argument_list|(
name|dpy
argument_list|,
operator|(
name|char
operator|*
operator|*
operator|)
operator|&
name|windowName
argument_list|,
literal|1
argument_list|,
name|XStdICCTextStyle
argument_list|,
operator|&
name|wname
argument_list|)
operator|>=
name|Success
condition|)
name|wprop
operator|=
operator|&
name|wname
expr_stmt|;
if|if
condition|(
name|iconName
operator|&&
name|XmbTextListToTextProperty
argument_list|(
name|dpy
argument_list|,
operator|(
name|char
operator|*
operator|*
operator|)
operator|&
name|iconName
argument_list|,
literal|1
argument_list|,
name|XStdICCTextStyle
argument_list|,
operator|&
name|iname
argument_list|)
operator|>=
name|Success
condition|)
name|iprop
operator|=
operator|&
name|iname
expr_stmt|;
name|XSetWMProperties
argument_list|(
name|dpy
argument_list|,
name|w
argument_list|,
name|wprop
argument_list|,
name|iprop
argument_list|,
name|argv
argument_list|,
name|argc
argument_list|,
name|sizeHints
argument_list|,
name|wmHints
argument_list|,
name|classHints
argument_list|)
expr_stmt|;
if|if
condition|(
name|wprop
condition|)
name|Xfree
argument_list|(
operator|(
name|char
operator|*
operator|)
name|wname
operator|.
name|value
argument_list|)
expr_stmt|;
if|if
condition|(
name|iprop
condition|)
name|Xfree
argument_list|(
operator|(
name|char
operator|*
operator|)
name|iname
operator|.
name|value
argument_list|)
expr_stmt|;
name|locale
operator|=
name|setlocale
argument_list|(
name|LC_CTYPE
argument_list|,
operator|(
name|char
operator|*
operator|)
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
name|locale
condition|)
name|XChangeProperty
argument_list|(
name|dpy
argument_list|,
name|w
argument_list|,
name|XInternAtom
argument_list|(
name|dpy
argument_list|,
literal|"WM_LOCALE_NAME"
argument_list|,
name|False
argument_list|)
argument_list|,
name|XA_STRING
argument_list|,
literal|8
argument_list|,
name|PropModeReplace
argument_list|,
operator|(
name|unsigned
name|char
operator|*
operator|)
name|locale
argument_list|,
name|strlen
argument_list|(
name|locale
argument_list|)
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

