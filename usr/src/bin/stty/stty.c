begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_decl_stmt
specifier|static
name|char
modifier|*
name|sccsid
init|=
literal|"@(#)stty.c	4.11 (Berkeley) %G%"
decl_stmt|;
end_decl_stmt

begin_comment
comment|/*  * set teletype modes  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<sgtty.h>
end_include

begin_struct
struct|struct
block|{
name|char
modifier|*
name|string
decl_stmt|;
name|int
name|speed
decl_stmt|;
block|}
name|speeds
index|[]
init|=
block|{
block|{
literal|"0"
block|,
name|B0
block|}
block|,
block|{
literal|"50"
block|,
name|B50
block|}
block|,
block|{
literal|"75"
block|,
name|B75
block|}
block|,
block|{
literal|"110"
block|,
name|B110
block|}
block|,
block|{
literal|"134"
block|,
name|B134
block|}
block|,
block|{
literal|"134.5"
block|,
name|B134
block|}
block|,
block|{
literal|"150"
block|,
name|B150
block|}
block|,
block|{
literal|"200"
block|,
name|B200
block|}
block|,
block|{
literal|"300"
block|,
name|B300
block|}
block|,
block|{
literal|"600"
block|,
name|B600
block|}
block|,
block|{
literal|"1200"
block|,
name|B1200
block|}
block|,
block|{
literal|"1800"
block|,
name|B1800
block|}
block|,
block|{
literal|"2400"
block|,
name|B2400
block|}
block|,
block|{
literal|"4800"
block|,
name|B4800
block|}
block|,
block|{
literal|"9600"
block|,
name|B9600
block|}
block|,
block|{
literal|"exta"
block|,
name|EXTA
block|}
block|,
block|{
literal|"19200"
block|,
name|EXTA
block|}
block|,
block|{
literal|"extb"
block|,
name|EXTB
block|}
block|,
block|{
literal|"38400"
block|,
name|EXTB
block|}
block|,
block|{
literal|0
block|}
block|, }
struct|;
end_struct

begin_struct
struct|struct
block|{
name|char
modifier|*
name|string
decl_stmt|;
name|long
name|set
decl_stmt|;
name|long
name|reset
decl_stmt|;
block|}
name|modes
index|[]
init|=
block|{
block|{
literal|"even"
block|,
name|EVENP
block|,
literal|0
block|}
block|,
block|{
literal|"-even"
block|,
literal|0
block|,
name|EVENP
block|}
block|,
block|{
literal|"odd"
block|,
name|ODDP
block|,
literal|0
block|}
block|,
block|{
literal|"-odd"
block|,
literal|0
block|,
name|ODDP
block|}
block|,
block|{
literal|"raw"
block|,
name|RAW
block|,
literal|0
block|}
block|,
block|{
literal|"-raw"
block|,
literal|0
block|,
name|RAW
block|}
block|,
block|{
literal|"cooked"
block|,
literal|0
block|,
name|RAW
block|}
block|,
block|{
literal|"-nl"
block|,
name|CRMOD
block|,
literal|0
block|}
block|,
block|{
literal|"nl"
block|,
literal|0
block|,
name|CRMOD
block|}
block|,
block|{
literal|"echo"
block|,
name|ECHO
block|,
literal|0
block|}
block|,
block|{
literal|"-echo"
block|,
literal|0
block|,
name|ECHO
block|}
block|,
block|{
literal|"LCASE"
block|,
name|LCASE
block|,
literal|0
block|}
block|,
block|{
literal|"lcase"
block|,
name|LCASE
block|,
literal|0
block|}
block|,
block|{
literal|"-LCASE"
block|,
literal|0
block|,
name|LCASE
block|}
block|,
block|{
literal|"-lcase"
block|,
literal|0
block|,
name|LCASE
block|}
block|,
block|{
literal|"-tabs"
block|,
name|XTABS
block|,
literal|0
block|}
block|,
block|{
literal|"tabs"
block|,
literal|0
block|,
name|XTABS
block|}
block|,
block|{
literal|"tandem"
block|,
name|TANDEM
block|,
literal|0
block|}
block|,
block|{
literal|"-tandem"
block|,
literal|0
block|,
name|TANDEM
block|}
block|,
block|{
literal|"cbreak"
block|,
name|CBREAK
block|,
literal|0
block|}
block|,
block|{
literal|"-cbreak"
block|,
literal|0
block|,
name|CBREAK
block|}
block|,
block|{
literal|"cr0"
block|,
name|CR0
block|,
name|CR3
block|}
block|,
block|{
literal|"cr1"
block|,
name|CR1
block|,
name|CR3
block|}
block|,
block|{
literal|"cr2"
block|,
name|CR2
block|,
name|CR3
block|}
block|,
block|{
literal|"cr3"
block|,
name|CR3
block|,
name|CR3
block|}
block|,
block|{
literal|"tab0"
block|,
name|TAB0
block|,
name|XTABS
block|}
block|,
block|{
literal|"tab1"
block|,
name|TAB1
block|,
name|XTABS
block|}
block|,
block|{
literal|"tab2"
block|,
name|TAB2
block|,
name|XTABS
block|}
block|,
block|{
literal|"nl0"
block|,
name|NL0
block|,
name|NL3
block|}
block|,
block|{
literal|"nl1"
block|,
name|NL1
block|,
name|NL3
block|}
block|,
block|{
literal|"nl2"
block|,
name|NL2
block|,
name|NL3
block|}
block|,
block|{
literal|"nl3"
block|,
name|NL3
block|,
name|NL3
block|}
block|,
block|{
literal|"ff0"
block|,
name|FF0
block|,
name|FF1
block|}
block|,
block|{
literal|"ff1"
block|,
name|FF1
block|,
name|FF1
block|}
block|,
block|{
literal|"bs0"
block|,
name|BS0
block|,
name|BS1
block|}
block|,
block|{
literal|"bs1"
block|,
name|BS1
block|,
name|BS1
block|}
block|,
block|{
literal|"33"
block|,
name|CR1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"tty33"
block|,
name|CR1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"37"
block|,
name|FF1
operator|+
name|CR2
operator|+
name|TAB1
operator|+
name|NL1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"tty37"
block|,
name|FF1
operator|+
name|CR2
operator|+
name|TAB1
operator|+
name|NL1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"05"
block|,
name|NL2
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"vt05"
block|,
name|NL2
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"tn"
block|,
name|CR1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"tn300"
block|,
name|CR1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"ti"
block|,
name|CR2
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"ti700"
block|,
name|CR2
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"tek"
block|,
name|FF1
block|,
name|ALLDELAY
block|}
block|,
block|{
literal|"crtbs"
block|,
name|CRTBS
block|,
name|PRTERA
block|}
block|,
block|{
literal|"-crtbs"
block|,
literal|0
block|,
name|CRTBS
block|}
block|,
block|{
literal|"prterase"
block|,
name|PRTERA
block|,
name|CRTBS
operator|+
name|CRTKIL
operator|+
name|CRTERA
block|}
block|,
block|{
literal|"-prterase"
block|,
literal|0
block|,
name|PRTERA
block|}
block|,
block|{
literal|"crterase"
block|,
name|CRTERA
block|,
name|PRTERA
block|}
block|,
block|{
literal|"-crterase"
block|,
literal|0
block|,
name|CRTERA
block|}
block|,
block|{
literal|"crtkill"
block|,
name|CRTKIL
block|,
name|PRTERA
block|}
block|,
block|{
literal|"-crtkill"
block|,
literal|0
block|,
name|CRTKIL
block|}
block|,
block|{
literal|"tilde"
block|,
name|TILDE
block|,
literal|0
block|}
block|,
block|{
literal|"-tilde"
block|,
literal|0
block|,
name|TILDE
block|}
block|,
block|{
literal|"mdmbuf"
block|,
name|MDMBUF
block|,
literal|0
block|}
block|,
block|{
literal|"-mdmbuf"
block|,
literal|0
block|,
name|MDMBUF
block|}
block|,
block|{
literal|"litout"
block|,
name|LITOUT
block|,
literal|0
block|}
block|,
block|{
literal|"-litout"
block|,
literal|0
block|,
name|LITOUT
block|}
block|,
block|{
literal|"tostop"
block|,
name|TOSTOP
block|,
literal|0
block|}
block|,
block|{
literal|"-tostop"
block|,
literal|0
block|,
name|TOSTOP
block|}
block|,
block|{
literal|"flusho"
block|,
name|FLUSHO
block|,
literal|0
block|}
block|,
block|{
literal|"-flusho"
block|,
literal|0
block|,
name|FLUSHO
block|}
block|,
block|{
literal|"nohang"
block|,
name|NOHANG
block|,
literal|0
block|}
block|,
block|{
literal|"-nohang"
block|,
literal|0
block|,
name|NOHANG
block|}
block|,
ifdef|#
directive|ifdef
name|notdef
block|{
literal|"etxack"
block|,
name|ETXACK
block|,
literal|0
block|}
block|,
block|{
literal|"-etxack"
block|,
literal|0
block|,
name|ETXACK
block|}
block|,
endif|#
directive|endif
block|{
literal|"ctlecho"
block|,
name|CTLECH
block|,
literal|0
block|}
block|,
block|{
literal|"-ctlecho"
block|,
literal|0
block|,
name|CTLECH
block|}
block|,
block|{
literal|"pendin"
block|,
name|PENDIN
block|,
literal|0
block|}
block|,
block|{
literal|"-pendin"
block|,
literal|0
block|,
name|PENDIN
block|}
block|,
block|{
literal|"decctlq"
block|,
name|DECCTQ
block|,
literal|0
block|}
block|,
block|{
literal|"-decctlq"
block|,
literal|0
block|,
name|DECCTQ
block|}
block|,
block|{
literal|"noflsh"
block|,
name|NOFLSH
block|,
literal|0
block|}
block|,
block|{
literal|"-noflsh"
block|,
literal|0
block|,
name|NOFLSH
block|}
block|,
block|{
literal|0
block|}
block|, }
struct|;
end_struct

begin_decl_stmt
name|struct
name|ttychars
name|tc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|sgttyb
name|sb
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|long
name|flags
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|oldisc
decl_stmt|,
name|ldisc
decl_stmt|;
end_decl_stmt

begin_struct
struct|struct
name|special
block|{
name|char
modifier|*
name|name
decl_stmt|;
name|char
modifier|*
name|cp
decl_stmt|;
name|char
name|def
decl_stmt|;
block|}
name|special
index|[]
init|=
block|{
block|{
literal|"erase"
block|,
operator|&
name|tc
operator|.
name|tc_erase
block|,
name|CERASE
block|}
block|,
block|{
literal|"kill"
block|,
operator|&
name|tc
operator|.
name|tc_kill
block|,
name|CKILL
block|}
block|,
block|{
literal|"intr"
block|,
operator|&
name|tc
operator|.
name|tc_intrc
block|,
name|CINTR
block|}
block|,
block|{
literal|"quit"
block|,
operator|&
name|tc
operator|.
name|tc_quitc
block|,
name|CQUIT
block|}
block|,
block|{
literal|"start"
block|,
operator|&
name|tc
operator|.
name|tc_startc
block|,
name|CSTART
block|}
block|,
block|{
literal|"stop"
block|,
operator|&
name|tc
operator|.
name|tc_stopc
block|,
name|CSTOP
block|}
block|,
block|{
literal|"eof"
block|,
operator|&
name|tc
operator|.
name|tc_eofc
block|,
name|CEOF
block|}
block|,
block|{
literal|"brk"
block|,
operator|&
name|tc
operator|.
name|tc_brkc
block|,
name|CBRK
block|}
block|,
block|{
literal|"susp"
block|,
operator|&
name|tc
operator|.
name|tc_suspc
block|,
name|CSUSP
block|}
block|,
block|{
literal|"dsusp"
block|,
operator|&
name|tc
operator|.
name|tc_dsuspc
block|,
name|CDSUSP
block|}
block|,
block|{
literal|"rprnt"
block|,
operator|&
name|tc
operator|.
name|tc_rprntc
block|,
name|CRPRNT
block|}
block|,
block|{
literal|"flush"
block|,
operator|&
name|tc
operator|.
name|tc_flushc
block|,
name|CFLUSH
block|}
block|,
block|{
literal|"werase"
block|,
operator|&
name|tc
operator|.
name|tc_werasc
block|,
name|CWERASE
block|}
block|,
block|{
literal|"lnext"
block|,
operator|&
name|tc
operator|.
name|tc_lnextc
block|,
name|CLNEXT
block|}
block|,
literal|0
block|}
struct|;
end_struct

begin_decl_stmt
name|char
modifier|*
name|arg
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|argc
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
end_decl_stmt

begin_function
name|main
parameter_list|(
name|iargc
parameter_list|,
name|iargv
parameter_list|)
name|int
name|iargc
decl_stmt|;
name|char
modifier|*
name|iargv
index|[]
decl_stmt|;
block|{
name|int
name|i
decl_stmt|;
specifier|register
name|struct
name|special
modifier|*
name|sp
decl_stmt|;
name|char
name|obuf
index|[
name|BUFSIZ
index|]
decl_stmt|;
name|setbuf
argument_list|(
name|stderr
argument_list|,
name|obuf
argument_list|)
expr_stmt|;
name|argc
operator|=
name|iargc
expr_stmt|;
name|argv
operator|=
name|iargv
expr_stmt|;
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCCGET
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|&
name|tc
argument_list|)
expr_stmt|;
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCGET
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|&
name|flags
argument_list|)
expr_stmt|;
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCGETD
argument_list|,
operator|&
name|ldisc
argument_list|)
expr_stmt|;
ifndef|#
directive|ifndef
name|notdef
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCGETP
argument_list|,
operator|(
name|char
operator|*
operator|)
operator|&
name|sb
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|oldisc
operator|=
name|ldisc
expr_stmt|;
if|if
condition|(
name|argc
operator|==
literal|1
condition|)
block|{
name|prmodes
argument_list|(
literal|0
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|argc
operator|==
literal|2
operator|&&
operator|!
name|strcmp
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|,
literal|"all"
argument_list|)
condition|)
block|{
name|prmodes
argument_list|(
literal|1
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|argc
operator|==
literal|2
operator|&&
operator|!
name|strcmp
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|,
literal|"everything"
argument_list|)
condition|)
block|{
name|prmodes
argument_list|(
literal|2
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|--
name|argc
operator|>
literal|0
condition|)
block|{
name|arg
operator|=
operator|*
operator|++
name|argv
expr_stmt|;
if|if
condition|(
name|eq
argument_list|(
literal|"ek"
argument_list|)
condition|)
block|{
name|tc
operator|.
name|tc_erase
operator|=
literal|'#'
expr_stmt|;
name|tc
operator|.
name|tc_kill
operator|=
literal|'@'
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"new"
argument_list|)
condition|)
block|{
name|ldisc
operator|=
name|NTTYDISC
expr_stmt|;
if|if
condition|(
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCSETD
argument_list|,
operator|&
name|ldisc
argument_list|)
operator|<
literal|0
condition|)
name|perror
argument_list|(
literal|"ioctl"
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"newcrt"
argument_list|)
condition|)
block|{
name|ldisc
operator|=
name|NTTYDISC
expr_stmt|;
name|flags
operator|&=
operator|~
name|PRTERA
expr_stmt|;
name|flags
operator||=
name|CRTBS
operator||
name|CTLECH
expr_stmt|;
if|if
condition|(
name|sb
operator|.
name|sg_ospeed
operator|>=
name|B1200
condition|)
name|flags
operator||=
name|CRTERA
operator||
name|CRTKIL
expr_stmt|;
if|if
condition|(
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCSETD
argument_list|,
operator|&
name|ldisc
argument_list|)
operator|<
literal|0
condition|)
name|perror
argument_list|(
literal|"ioctl"
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"crt"
argument_list|)
condition|)
block|{
name|flags
operator|&=
operator|~
name|PRTERA
expr_stmt|;
name|flags
operator||=
name|CRTBS
operator||
name|CTLECH
expr_stmt|;
if|if
condition|(
name|sb
operator|.
name|sg_ospeed
operator|>=
name|B1200
condition|)
name|flags
operator||=
name|CRTERA
operator||
name|CRTKIL
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"old"
argument_list|)
condition|)
block|{
name|ldisc
operator|=
name|OTTYDISC
expr_stmt|;
if|if
condition|(
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCSETD
argument_list|,
operator|&
name|ldisc
argument_list|)
operator|<
literal|0
condition|)
name|perror
argument_list|(
literal|"ioctl"
argument_list|)
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"dec"
argument_list|)
condition|)
block|{
name|tc
operator|.
name|tc_erase
operator|=
literal|0177
expr_stmt|;
name|tc
operator|.
name|tc_kill
operator|=
name|CTRL
argument_list|(
name|u
argument_list|)
expr_stmt|;
name|tc
operator|.
name|tc_intrc
operator|=
name|CTRL
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|ldisc
operator|=
name|NTTYDISC
expr_stmt|;
name|flags
operator|&=
operator|~
name|PRTERA
expr_stmt|;
name|flags
operator||=
name|CRTBS
operator||
name|CTLECH
operator||
name|DECCTQ
expr_stmt|;
if|if
condition|(
name|sb
operator|.
name|sg_ospeed
operator|>=
name|B1200
condition|)
name|flags
operator||=
name|CRTERA
operator||
name|CRTKIL
expr_stmt|;
if|if
condition|(
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCSETD
argument_list|,
operator|&
name|ldisc
argument_list|)
operator|<
literal|0
condition|)
name|perror
argument_list|(
literal|"ioctl"
argument_list|)
expr_stmt|;
continue|continue;
block|}
for|for
control|(
name|sp
operator|=
name|special
init|;
name|sp
operator|->
name|name
condition|;
name|sp
operator|++
control|)
if|if
condition|(
name|eq
argument_list|(
name|sp
operator|->
name|name
argument_list|)
condition|)
block|{
if|if
condition|(
operator|--
name|argc
operator|==
literal|0
condition|)
goto|goto
name|done
goto|;
if|if
condition|(
operator|*
operator|*
operator|++
name|argv
operator|==
literal|'u'
condition|)
operator|*
name|sp
operator|->
name|cp
operator|=
literal|0377
expr_stmt|;
elseif|else
if|if
condition|(
operator|*
operator|*
name|argv
operator|==
literal|'^'
condition|)
operator|*
name|sp
operator|->
name|cp
operator|=
operator|(
operator|(
operator|*
name|argv
operator|)
index|[
literal|1
index|]
operator|==
literal|'?'
operator|)
condition|?
literal|0177
else|:
operator|(
operator|*
name|argv
operator|)
index|[
literal|1
index|]
operator|&
literal|037
expr_stmt|;
else|else
operator|*
name|sp
operator|->
name|cp
operator|=
operator|*
operator|*
name|argv
expr_stmt|;
goto|goto
name|cont
goto|;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"gspeed"
argument_list|)
condition|)
block|{
name|sb
operator|.
name|sg_ispeed
operator|=
name|B300
expr_stmt|;
name|sb
operator|.
name|sg_ospeed
operator|=
name|B9600
expr_stmt|;
continue|continue;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"hup"
argument_list|)
condition|)
block|{
if|if
condition|(
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCHPCL
argument_list|,
name|NULL
argument_list|)
operator|<
literal|0
condition|)
name|perror
argument_list|(
literal|"ioctl"
argument_list|)
expr_stmt|;
continue|continue;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|speeds
index|[
name|i
index|]
operator|.
name|string
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|eq
argument_list|(
name|speeds
index|[
name|i
index|]
operator|.
name|string
argument_list|)
condition|)
block|{
name|sb
operator|.
name|sg_ispeed
operator|=
name|sb
operator|.
name|sg_ospeed
operator|=
name|speeds
index|[
name|i
index|]
operator|.
name|speed
expr_stmt|;
goto|goto
name|cont
goto|;
block|}
if|if
condition|(
name|eq
argument_list|(
literal|"speed"
argument_list|)
condition|)
block|{
name|int
name|fd
init|=
name|open
argument_list|(
literal|"/dev/tty"
argument_list|,
literal|0
argument_list|)
decl_stmt|;
if|if
condition|(
name|fd
operator|<
literal|0
condition|)
block|{
name|perror
argument_list|(
literal|"open"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|ioctl
argument_list|(
name|fd
argument_list|,
name|TIOCGETP
argument_list|,
operator|&
name|sb
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|speeds
index|[
name|i
index|]
operator|.
name|string
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|sb
operator|.
name|sg_ospeed
operator|==
name|speeds
index|[
name|i
index|]
operator|.
name|speed
condition|)
block|{
name|printf
argument_list|(
literal|"%s\n"
argument_list|,
name|speeds
index|[
name|i
index|]
operator|.
name|string
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|"unknown\n"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
literal|0
init|;
name|modes
index|[
name|i
index|]
operator|.
name|string
condition|;
name|i
operator|++
control|)
if|if
condition|(
name|eq
argument_list|(
name|modes
index|[
name|i
index|]
operator|.
name|string
argument_list|)
condition|)
block|{
name|flags
operator|&=
operator|~
name|modes
index|[
name|i
index|]
operator|.
name|reset
expr_stmt|;
name|flags
operator||=
name|modes
index|[
name|i
index|]
operator|.
name|set
expr_stmt|;
block|}
if|if
condition|(
name|arg
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"unknown mode: %s\n"
argument_list|,
name|arg
argument_list|)
expr_stmt|;
name|cont
label|:
empty_stmt|;
block|}
name|done
label|:
ifndef|#
directive|ifndef
name|notdef
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCSETN
argument_list|,
operator|&
name|sb
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCSET
argument_list|,
operator|&
name|flags
argument_list|)
expr_stmt|;
name|ioctl
argument_list|(
literal|1
argument_list|,
name|TIOCCSET
argument_list|,
operator|&
name|tc
argument_list|)
expr_stmt|;
block|}
end_function

begin_macro
name|eq
argument_list|(
argument|string
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|string
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|int
name|i
decl_stmt|;
if|if
condition|(
operator|!
name|arg
condition|)
return|return
operator|(
literal|0
operator|)
return|;
name|i
operator|=
literal|0
expr_stmt|;
name|loop
label|:
if|if
condition|(
name|arg
index|[
name|i
index|]
operator|!=
name|string
index|[
name|i
index|]
condition|)
return|return
operator|(
literal|0
operator|)
return|;
if|if
condition|(
name|arg
index|[
name|i
operator|++
index|]
operator|!=
literal|'\0'
condition|)
goto|goto
name|loop
goto|;
name|arg
operator|=
literal|0
expr_stmt|;
return|return
operator|(
literal|1
operator|)
return|;
block|}
end_block

begin_macro
name|prmodes
argument_list|(
argument|all
argument_list|)
end_macro

begin_decl_stmt
name|int
name|all
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|m
expr_stmt|;
name|int
name|any
decl_stmt|;
if|if
condition|(
name|ldisc
operator|==
name|NETLDISC
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"net discipline, "
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|ldisc
operator|==
name|NTTYDISC
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"new tty, "
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|all
operator|==
literal|2
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"old tty, "
argument_list|)
expr_stmt|;
if|if
condition|(
name|sb
operator|.
name|sg_ispeed
operator|!=
name|sb
operator|.
name|sg_ospeed
condition|)
block|{
name|prspeed
argument_list|(
literal|"input speed "
argument_list|,
name|sb
operator|.
name|sg_ispeed
argument_list|)
expr_stmt|;
name|prspeed
argument_list|(
literal|"output speed "
argument_list|,
name|sb
operator|.
name|sg_ospeed
argument_list|)
expr_stmt|;
block|}
else|else
name|prspeed
argument_list|(
literal|"speed "
argument_list|,
name|sb
operator|.
name|sg_ispeed
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
name|all
operator|==
literal|2
condition|?
literal|"\n"
else|:
literal|"; "
argument_list|)
expr_stmt|;
name|m
operator|=
name|flags
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
operator|(
name|m
operator|&
operator|(
name|EVENP
operator||
name|ODDP
operator|)
operator|)
operator|!=
operator|(
name|EVENP
operator||
name|ODDP
operator|)
condition|)
block|{
if|if
condition|(
name|m
operator|&
name|EVENP
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"even "
argument_list|)
expr_stmt|;
if|if
condition|(
name|m
operator|&
name|ODDP
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"odd "
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|RAW
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-raw "
operator|+
operator|(
operator|(
name|m
operator|&
name|RAW
operator|)
operator|!=
literal|0
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
operator|(
name|m
operator|&
name|CRMOD
operator|)
operator|==
literal|0
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-nl "
operator|+
operator|(
operator|(
name|m
operator|&
name|CRMOD
operator|)
operator|==
literal|0
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
operator|(
name|m
operator|&
name|ECHO
operator|)
operator|==
literal|0
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-echo "
operator|+
operator|(
operator|(
name|m
operator|&
name|ECHO
operator|)
operator|!=
literal|0
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|LCASE
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-lcase "
operator|+
operator|(
operator|(
name|m
operator|&
name|LCASE
operator|)
operator|!=
literal|0
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|TANDEM
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-tandem "
operator|+
operator|(
operator|(
name|m
operator|&
name|TANDEM
operator|)
operator|!=
literal|0
operator|)
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-tabs "
operator|+
operator|(
operator|(
name|m
operator|&
name|XTABS
operator|)
operator|!=
name|XTABS
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|CBREAK
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"-cbreak "
operator|+
operator|(
operator|(
name|m
operator|&
name|CBREAK
operator|)
operator|!=
literal|0
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|NLDELAY
condition|)
name|delay
argument_list|(
operator|(
name|m
operator|&
name|NLDELAY
operator|)
operator|/
name|NL1
argument_list|,
literal|"nl"
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|m
operator|&
name|TBDELAY
operator|)
operator|!=
name|XTABS
condition|)
name|delay
argument_list|(
operator|(
name|m
operator|&
name|TBDELAY
operator|)
operator|/
name|TAB1
argument_list|,
literal|"tab"
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|CRDELAY
condition|)
name|delay
argument_list|(
operator|(
name|m
operator|&
name|CRDELAY
operator|)
operator|/
name|CR1
argument_list|,
literal|"cr"
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|VTDELAY
condition|)
name|delay
argument_list|(
operator|(
name|m
operator|&
name|VTDELAY
operator|)
operator|/
name|FF1
argument_list|,
literal|"ff"
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
operator|||
name|m
operator|&
name|BSDELAY
condition|)
name|delay
argument_list|(
operator|(
name|m
operator|&
name|BSDELAY
operator|)
operator|/
name|BS1
argument_list|,
literal|"bs"
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
define|#
directive|define
name|lpit
parameter_list|(
name|what
parameter_list|,
name|str
parameter_list|)
define|\
value|if (all == 2 || flags&what) { \ 		fprintf(stderr,str + ((flags&what) != 0)); any++; \ 	}
if|if
condition|(
name|ldisc
operator|==
name|NTTYDISC
condition|)
block|{
name|int
name|newcrt
init|=
operator|(
name|flags
operator|&
operator|(
name|CTLECH
operator||
name|CRTBS
operator|)
operator|)
operator|==
operator|(
name|CTLECH
operator||
name|CRTBS
operator|)
operator|&&
operator|(
name|flags
operator|&
operator|(
name|CRTERA
operator||
name|CRTKIL
operator|)
operator|)
operator|==
operator|(
operator|(
name|sb
operator|.
name|sg_ospeed
operator|>
name|B300
operator|)
condition|?
name|CRTERA
operator||
name|CRTKIL
else|:
literal|0
operator|)
decl_stmt|;
if|if
condition|(
name|newcrt
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
name|all
operator|!=
literal|2
condition|?
literal|"crt "
else|:
literal|"crt: (crtbs crterase crtkill ctlecho) "
argument_list|)
expr_stmt|;
name|any
operator|++
expr_stmt|;
block|}
else|else
block|{
name|lpit
argument_list|(
name|CRTBS
argument_list|,
literal|"-crtbs "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|CRTERA
argument_list|,
literal|"-crterase "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|CRTKIL
argument_list|,
literal|"-crtkill "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|CTLECH
argument_list|,
literal|"-ctlecho "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|PRTERA
argument_list|,
literal|"-prterase "
argument_list|)
expr_stmt|;
block|}
name|lpit
argument_list|(
name|TOSTOP
argument_list|,
literal|"-tostop "
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
operator|==
literal|2
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|any
operator|=
literal|0
expr_stmt|;
block|}
name|lpit
argument_list|(
name|TILDE
argument_list|,
literal|"-tilde "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|FLUSHO
argument_list|,
literal|"-flusho "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|MDMBUF
argument_list|,
literal|"-mdmbuf "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|LITOUT
argument_list|,
literal|"-litout "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|NOHANG
argument_list|,
literal|"-nohang "
argument_list|)
expr_stmt|;
if|if
condition|(
name|any
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
name|any
operator|=
literal|0
expr_stmt|;
block|}
ifdef|#
directive|ifdef
name|notdef
name|lpit
argument_list|(
name|ETXACK
argument_list|,
literal|"-etxack "
argument_list|)
expr_stmt|;
endif|#
directive|endif
name|lpit
argument_list|(
name|PENDIN
argument_list|,
literal|"-pendin "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|DECCTQ
argument_list|,
literal|"-decctlq "
argument_list|)
expr_stmt|;
name|lpit
argument_list|(
name|NOFLSH
argument_list|,
literal|"-noflsh "
argument_list|)
expr_stmt|;
if|if
condition|(
name|any
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|!
name|all
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
if|if
condition|(
name|all
condition|)
block|{
switch|switch
condition|(
name|ldisc
condition|)
block|{
case|case
literal|0
case|:
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\ erase  kill   intr   quit   stop   eof\ \n"
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_erase
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_kill
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_intrc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_quitc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_stopc
argument_list|,
name|tc
operator|.
name|tc_startc
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_eofc
argument_list|,
name|tc
operator|.
name|tc_brkc
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
break|break;
case|case
name|NTTYDISC
case|:
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\ erase  kill   werase rprnt  flush  lnext  susp   intr   quit   stop   eof\ \n"
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_erase
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_kill
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_werasc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_rprntc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_flushc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_lnextc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_suspc
argument_list|,
name|tc
operator|.
name|tc_dsuspc
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_intrc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_quitc
argument_list|,
operator|-
literal|1
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_stopc
argument_list|,
name|tc
operator|.
name|tc_startc
argument_list|)
expr_stmt|;
name|pcol
argument_list|(
name|tc
operator|.
name|tc_eofc
argument_list|,
name|tc
operator|.
name|tc_brkc
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
elseif|else
if|if
condition|(
name|ldisc
operator|!=
name|NETLDISC
condition|)
block|{
specifier|register
name|struct
name|special
modifier|*
name|sp
decl_stmt|;
name|int
name|first
init|=
literal|1
decl_stmt|;
for|for
control|(
name|sp
operator|=
name|special
init|;
name|sp
operator|->
name|name
condition|;
name|sp
operator|++
control|)
block|{
if|if
condition|(
operator|(
operator|*
name|sp
operator|->
name|cp
operator|&
literal|0377
operator|)
operator|!=
operator|(
name|sp
operator|->
name|def
operator|&
literal|0377
operator|)
condition|)
block|{
name|pit
argument_list|(
operator|*
name|sp
operator|->
name|cp
argument_list|,
name|sp
operator|->
name|name
argument_list|,
name|first
condition|?
literal|""
else|:
literal|", "
argument_list|)
expr_stmt|;
name|first
operator|=
literal|0
expr_stmt|;
block|}
empty_stmt|;
if|if
condition|(
name|sp
operator|->
name|cp
operator|==
operator|&
name|tc
operator|.
name|tc_brkc
operator|&&
name|ldisc
operator|==
literal|0
condition|)
break|break;
block|}
if|if
condition|(
name|first
operator|==
literal|0
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"\n"
argument_list|)
expr_stmt|;
block|}
block|}
end_block

begin_macro
name|pcol
argument_list|(
argument|ch1
argument_list|,
argument|ch2
argument_list|)
end_macro

begin_decl_stmt
name|int
name|ch1
decl_stmt|,
name|ch2
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|int
name|nout
init|=
literal|0
decl_stmt|;
name|ch1
operator|&=
literal|0377
expr_stmt|;
name|ch2
operator|&=
literal|0377
expr_stmt|;
if|if
condition|(
name|ch1
operator|==
name|ch2
condition|)
name|ch2
operator|=
literal|0377
expr_stmt|;
for|for
control|(
init|;
name|ch1
operator|!=
literal|0377
operator|||
name|ch2
operator|!=
literal|0377
condition|;
name|ch1
operator|=
name|ch2
operator|,
name|ch2
operator|=
literal|0377
control|)
block|{
if|if
condition|(
name|ch1
operator|==
literal|0377
condition|)
continue|continue;
if|if
condition|(
name|ch1
operator|&
literal|0200
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"M-"
argument_list|)
expr_stmt|;
name|nout
operator|+=
literal|2
expr_stmt|;
name|ch1
operator|&=
operator|~
literal|0200
expr_stmt|;
block|}
if|if
condition|(
name|ch1
operator|==
literal|0177
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"^"
argument_list|)
expr_stmt|;
name|nout
operator|++
expr_stmt|;
name|ch1
operator|=
literal|'?'
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|ch1
operator|<
literal|' '
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"^"
argument_list|)
expr_stmt|;
name|nout
operator|++
expr_stmt|;
name|ch1
operator|+=
literal|'@'
expr_stmt|;
block|}
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%c"
argument_list|,
name|ch1
argument_list|)
expr_stmt|;
name|nout
operator|++
expr_stmt|;
if|if
condition|(
name|ch2
operator|!=
literal|0377
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"/"
argument_list|)
expr_stmt|;
name|nout
operator|++
expr_stmt|;
block|}
block|}
while|while
condition|(
name|nout
operator|<
literal|7
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|" "
argument_list|)
expr_stmt|;
name|nout
operator|++
expr_stmt|;
block|}
block|}
end_block

begin_macro
name|pit
argument_list|(
argument|what
argument_list|,
argument|itsname
argument_list|,
argument|sep
argument_list|)
end_macro

begin_decl_stmt
name|unsigned
name|what
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|itsname
decl_stmt|,
modifier|*
name|sep
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|what
operator|&=
literal|0377
expr_stmt|;
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s%s"
argument_list|,
name|sep
argument_list|,
name|itsname
argument_list|)
expr_stmt|;
if|if
condition|(
name|what
operator|==
literal|0377
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"<undef>"
argument_list|)
expr_stmt|;
return|return;
block|}
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|" = "
argument_list|)
expr_stmt|;
if|if
condition|(
name|what
operator|&
literal|0200
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"M-"
argument_list|)
expr_stmt|;
name|what
operator|&=
operator|~
literal|0200
expr_stmt|;
block|}
if|if
condition|(
name|what
operator|==
literal|0177
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"^"
argument_list|)
expr_stmt|;
name|what
operator|=
literal|'?'
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|what
operator|<
literal|' '
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"^"
argument_list|)
expr_stmt|;
name|what
operator|+=
literal|'@'
expr_stmt|;
block|}
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%c"
argument_list|,
name|what
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|delay
argument_list|(
argument|m
argument_list|,
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|s
decl_stmt|;
end_decl_stmt

begin_block
block|{
if|if
condition|(
name|m
condition|)
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s%d "
argument_list|,
name|s
argument_list|,
name|m
argument_list|)
expr_stmt|;
block|}
end_block

begin_decl_stmt
name|int
name|speed
index|[]
init|=
block|{
literal|0
block|,
literal|50
block|,
literal|75
block|,
literal|110
block|,
literal|134
block|,
literal|150
block|,
literal|200
block|,
literal|300
block|,
literal|600
block|,
literal|1200
block|,
literal|1800
block|,
literal|2400
block|,
literal|4800
block|,
literal|9600
block|,
literal|19200
block|,
literal|38400
block|}
decl_stmt|;
end_decl_stmt

begin_macro
name|prspeed
argument_list|(
argument|c
argument_list|,
argument|s
argument_list|)
end_macro

begin_decl_stmt
name|char
modifier|*
name|c
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"%s%d baud"
argument_list|,
name|c
argument_list|,
name|speed
index|[
name|s
index|]
argument_list|)
expr_stmt|;
block|}
end_block

end_unit

