begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"defs"
end_include

begin_include
include|#
directive|include
file|"tokdefs"
end_include

begin_macro
name|kwinit
argument_list|()
end_macro

begin_block
block|{
struct|struct
name|key
block|{
name|char
modifier|*
name|keyn
decl_stmt|;
name|int
name|keyval
decl_stmt|;
block|}
modifier|*
name|p
struct|;
specifier|static
name|struct
name|key
name|keys
index|[]
init|=
block|{
literal|"common"
block|,
name|COMMON
block|,
literal|"internal"
block|,
name|INTERNAL
block|,
literal|"external"
block|,
name|EXTERNAL
block|,
literal|"automatic"
block|,
name|AUTOMATIC
block|,
literal|"static"
block|,
name|STATIC
block|,
literal|"value"
block|,
name|VALUE
block|,
literal|"procedure"
block|,
name|PROCEDURE
block|,
literal|"blockdata"
block|,
name|BLOCKDATA
block|,
literal|"subroutine"
block|,
name|PROCEDURE
comment|/* NB */
block|,
literal|"function"
block|,
name|PROCEDURE
comment|/* NB */
block|,
literal|"option"
block|,
name|OPTION
block|,
literal|"include"
block|,
name|INCLUDE
block|,
literal|"define"
block|,
name|DEFINE
block|,
literal|"end"
block|,
name|END
block|,
literal|"integer"
block|,
name|INTEGER
block|,
literal|"real"
block|,
name|REAL
block|,
literal|"complex"
block|,
name|COMPLEX
block|,
literal|"logical"
block|,
name|LOGICAL
block|,
literal|"character"
block|,
name|CHARACTER
block|,
literal|"struct"
block|,
name|STRUCT
block|,
literal|"field"
block|,
name|FIELD
block|,
literal|"array"
block|,
name|ARRAY
block|,
literal|"dimension"
block|,
name|DIMENSION
block|,
literal|"long"
block|,
name|LONG
block|,
literal|"short"
block|,
name|SHORT
block|,
literal|"initial"
block|,
name|INITIAL
block|,
literal|"equivalence"
block|,
name|EQUIVALENCE
block|,
literal|"implicit"
block|,
name|IMPLICIT
block|,
literal|"debug"
block|,
name|DEBUG
block|,
literal|"if"
block|,
name|IF
block|,
literal|"else"
block|,
name|ELSE
block|,
literal|"while"
block|,
name|WHILE
block|,
literal|"until"
block|,
name|UNTIL
block|,
literal|"repeat"
block|,
name|REPEAT
block|,
literal|"do"
block|,
name|DO
block|,
literal|"for"
block|,
name|FOR
block|,
literal|"switch"
block|,
name|SWITCH
block|,
literal|"select"
block|,
name|SWITCH
block|,
literal|"case"
block|,
name|CASE
block|,
literal|"default"
block|,
name|DEFAULT
block|,
literal|"go"
block|,
name|GO
block|,
literal|"goto"
block|,
name|GOTO
block|,
literal|"break"
block|,
name|BREAK
block|,
literal|"exit"
block|,
name|EXIT
block|,
literal|"next"
block|,
name|NEXT
block|,
literal|"return"
block|,
name|RETURN
block|,
literal|"continue"
block|,
name|CONTINUE
block|,
literal|"call"
block|,
name|CALL
block|,
literal|"double"
block|,
name|DOUBLE
block|,
literal|"precision"
block|,
name|PRECISION
block|,
literal|"doubleprecision"
block|,
name|DOUBLEPRECISION
block|,
literal|"sizeof"
block|,
name|SIZEOF
block|,
literal|"lengthof"
block|,
name|LENGTHOF
block|,
literal|"read"
block|,
name|READ
block|,
literal|"write"
block|,
name|WRITE
block|,
literal|"readbin"
block|,
name|READBIN
block|,
literal|"writebin"
block|,
name|WRITEBIN
block|,
literal|"true"
block|,
name|TRUE
block|,
literal|"false"
block|,
name|FALSE
block|,
literal|0
block|,
literal|0
block|}
decl_stmt|;
for|for
control|(
name|p
operator|=
name|keys
init|;
name|p
operator|->
name|keyn
condition|;
operator|++
name|p
control|)
name|mkkeywd
argument_list|(
name|p
operator|->
name|keyn
argument_list|,
name|p
operator|->
name|keyval
argument_list|)
expr_stmt|;
block|}
end_block

begin_escape
end_escape

begin_macro
name|geninit
argument_list|()
end_macro

begin_block
block|{
struct|struct
name|gen
block|{
name|char
modifier|*
name|genn
decl_stmt|;
name|int
name|restype
decl_stmt|;
name|char
modifier|*
name|specn
decl_stmt|;
name|int
name|argtype
decl_stmt|;
block|}
modifier|*
name|p
struct|;
specifier|static
name|struct
name|gen
name|gens
index|[]
init|=
block|{
literal|"abs"
block|,
name|TYINT
block|,
literal|"iabs"
block|,
name|TYINT
block|,
literal|"abs"
block|,
name|TYREAL
block|,
literal|"abs"
block|,
name|TYREAL
block|,
literal|"abs"
block|,
name|TYLREAL
block|,
literal|"dabs"
block|,
name|TYLREAL
block|,
literal|"abs"
block|,
name|TYCOMPLEX
block|,
literal|"cabs"
block|,
name|TYREAL
block|,
literal|"sin"
block|,
name|TYREAL
block|,
literal|"sin"
block|,
name|TYREAL
block|,
literal|"sin"
block|,
name|TYLREAL
block|,
literal|"dsin"
block|,
name|TYLREAL
block|,
literal|"sin"
block|,
name|TYCOMPLEX
block|,
literal|"csin"
block|,
name|TYCOMPLEX
block|,
literal|"cos"
block|,
name|TYREAL
block|,
literal|"cos"
block|,
name|TYREAL
block|,
literal|"cos"
block|,
name|TYLREAL
block|,
literal|"dcos"
block|,
name|TYLREAL
block|,
literal|"cos"
block|,
name|TYCOMPLEX
block|,
literal|"ccos"
block|,
name|TYCOMPLEX
block|,
literal|"atan"
block|,
name|TYREAL
block|,
literal|"atan"
block|,
name|TYREAL
block|,
literal|"atan"
block|,
name|TYLREAL
block|,
literal|"datan"
block|,
name|TYLREAL
block|,
literal|"atan2"
block|,
name|TYREAL
block|,
literal|"atan2"
block|,
name|TYREAL
block|,
literal|"atan2"
block|,
name|TYLREAL
block|,
literal|"datan2"
block|,
name|TYLREAL
block|,
literal|"sqrt"
block|,
name|TYREAL
block|,
literal|"sqrt"
block|,
name|TYREAL
block|,
literal|"sqrt"
block|,
name|TYLREAL
block|,
literal|"dsqrt"
block|,
name|TYLREAL
block|,
literal|"sqrt"
block|,
name|TYCOMPLEX
block|,
literal|"csqrt"
block|,
name|TYCOMPLEX
block|,
literal|"log"
block|,
name|TYREAL
block|,
literal|"alog"
block|,
name|TYREAL
block|,
literal|"log"
block|,
name|TYLREAL
block|,
literal|"dlog"
block|,
name|TYLREAL
block|,
literal|"log"
block|,
name|TYCOMPLEX
block|,
literal|"clog"
block|,
name|TYCOMPLEX
block|,
literal|"log10"
block|,
name|TYREAL
block|,
literal|"alog10"
block|,
name|TYREAL
block|,
literal|"log10"
block|,
name|TYLREAL
block|,
literal|"dlog10"
block|,
name|TYLREAL
block|,
literal|"exp"
block|,
name|TYREAL
block|,
literal|"exp"
block|,
name|TYREAL
block|,
literal|"exp"
block|,
name|TYLREAL
block|,
literal|"dexp"
block|,
name|TYLREAL
block|,
literal|"exp"
block|,
name|TYCOMPLEX
block|,
literal|"cexp"
block|,
name|TYCOMPLEX
block|,
literal|"int"
block|,
name|TYREAL
block|,
literal|"int"
block|,
name|TYINT
block|,
literal|"int"
block|,
name|TYLREAL
block|,
literal|"idint"
block|,
name|TYINT
block|,
literal|"mod"
block|,
name|TYINT
block|,
literal|"mod"
block|,
name|TYINT
block|,
literal|"mod"
block|,
name|TYREAL
block|,
literal|"amod"
block|,
name|TYREAL
block|,
literal|"mod"
block|,
name|TYLREAL
block|,
literal|"dmod"
block|,
name|TYLREAL
block|,
literal|"min"
block|,
name|TYINT
block|,
literal|"min0"
block|,
name|TYINT
block|,
literal|"min"
block|,
name|TYREAL
block|,
literal|"amin1"
block|,
name|TYREAL
block|,
literal|"min"
block|,
name|TYLREAL
block|,
literal|"dmin1"
block|,
name|TYLREAL
block|,
literal|"max"
block|,
name|TYINT
block|,
literal|"max0"
block|,
name|TYINT
block|,
literal|"max"
block|,
name|TYREAL
block|,
literal|"amax1"
block|,
name|TYREAL
block|,
literal|"max"
block|,
name|TYLREAL
block|,
literal|"dmax1"
block|,
name|TYLREAL
block|,
literal|"sign"
block|,
name|TYREAL
block|,
literal|"sign"
block|,
name|TYREAL
block|,
literal|"sign"
block|,
name|TYINT
block|,
literal|"isign"
block|,
name|TYINT
block|,
literal|"sign"
block|,
name|TYLREAL
block|,
literal|"dsign"
block|,
name|TYLREAL
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|}
decl_stmt|;
for|for
control|(
name|p
operator|=
name|gens
init|;
name|p
operator|->
name|genn
condition|;
operator|++
name|p
control|)
name|mkgeneric
argument_list|(
name|p
operator|->
name|genn
argument_list|,
name|p
operator|->
name|restype
argument_list|,
name|p
operator|->
name|specn
argument_list|,
name|p
operator|->
name|argtype
argument_list|)
expr_stmt|;
block|}
end_block

begin_escape
end_escape

begin_macro
name|knowninit
argument_list|()
end_macro

begin_block
block|{
struct|struct
name|known
block|{
name|char
modifier|*
name|knownn
decl_stmt|;
name|int
name|knowntype
decl_stmt|;
block|}
modifier|*
name|p
struct|;
specifier|static
name|struct
name|known
name|knowns
index|[ ]
init|=
block|{
literal|"abs"
block|,
name|TYREAL
block|,
literal|"iabs"
block|,
name|TYINT
block|,
literal|"dabs"
block|,
name|TYLREAL
block|,
literal|"aint"
block|,
name|TYREAL
block|,
literal|"int"
block|,
name|TYINT
block|,
literal|"idint"
block|,
name|TYINT
block|,
literal|"amod"
block|,
name|TYREAL
block|,
literal|"mod"
block|,
name|TYINT
block|,
literal|"amax0"
block|,
name|TYREAL
block|,
literal|"amax1"
block|,
name|TYREAL
block|,
literal|"max0"
block|,
name|TYINT
block|,
literal|"max1"
block|,
name|TYINT
block|,
literal|"dmax1"
block|,
name|TYLREAL
block|,
literal|"amin0"
block|,
name|TYREAL
block|,
literal|"amin1"
block|,
name|TYREAL
block|,
literal|"min0"
block|,
name|TYINT
block|,
literal|"min1"
block|,
name|TYINT
block|,
literal|"dmin1"
block|,
name|TYLREAL
block|,
literal|"float"
block|,
name|TYREAL
block|,
literal|"ifix"
block|,
name|TYINT
block|,
literal|"sign"
block|,
name|TYREAL
block|,
literal|"isign"
block|,
name|TYINT
block|,
literal|"dsign"
block|,
name|TYLREAL
block|,
literal|"dim"
block|,
name|TYREAL
block|,
literal|"idim"
block|,
name|TYINT
block|,
literal|"sngl"
block|,
name|TYREAL
block|,
literal|"real"
block|,
name|TYREAL
block|,
literal|"aimag"
block|,
name|TYREAL
block|,
literal|"dble"
block|,
name|TYLREAL
block|,
literal|"cmplx"
block|,
name|TYCOMPLEX
block|,
literal|"conjg"
block|,
name|TYCOMPLEX
block|,
literal|"exp"
block|,
name|TYREAL
block|,
literal|"dexp"
block|,
name|TYLREAL
block|,
literal|"cexp"
block|,
name|TYCOMPLEX
block|,
literal|"alog"
block|,
name|TYREAL
block|,
literal|"dlog"
block|,
name|TYLREAL
block|,
literal|"clog"
block|,
name|TYCOMPLEX
block|,
literal|"alog10"
block|,
name|TYREAL
block|,
literal|"dlog10"
block|,
name|TYLREAL
block|,
literal|"sin"
block|,
name|TYREAL
block|,
literal|"dsin"
block|,
name|TYLREAL
block|,
literal|"csin"
block|,
name|TYCOMPLEX
block|,
literal|"cos"
block|,
name|TYREAL
block|,
literal|"dcos"
block|,
name|TYLREAL
block|,
literal|"ccos"
block|,
name|TYCOMPLEX
block|,
literal|"tanh"
block|,
name|TYREAL
block|,
literal|"sqrt"
block|,
name|TYREAL
block|,
literal|"dsqrt"
block|,
name|TYLREAL
block|,
literal|"csqrt"
block|,
name|TYCOMPLEX
block|,
literal|"atan"
block|,
name|TYREAL
block|,
literal|"datan"
block|,
name|TYLREAL
block|,
literal|"atan2"
block|,
name|TYREAL
block|,
literal|"datan2"
block|,
name|TYLREAL
block|,
literal|"dmod"
block|,
name|TYLREAL
block|,
literal|"cabs"
block|,
name|TYREAL
block|,
literal|0
block|,
literal|0
block|}
decl_stmt|;
for|for
control|(
name|p
operator|=
name|knowns
init|;
name|p
operator|->
name|knownn
condition|;
operator|++
name|p
control|)
name|mkknown
argument_list|(
name|p
operator|->
name|knownn
argument_list|,
name|p
operator|->
name|knowntype
argument_list|)
expr_stmt|;
block|}
end_block

end_unit

