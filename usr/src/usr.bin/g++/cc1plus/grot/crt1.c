begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* This file provides the startup routine for files loaded with    the -A option of GNU ld.  When a program makes a call to the    initial address of code incrementally loaded, it expects that the    first function laid out in the object files loaded will    be the function called.  In GNU C++, we slip crt1.o in front of    the object files the user specifies, so that we can call any needed    global constructors, and set up calls for global destructors.    Control is then passed to the first routine that the user specified.  */
end_comment

begin_typedef
typedef|typedef
struct|struct
name|set_vector
block|{
name|unsigned
name|int
name|length
decl_stmt|;
name|unsigned
name|int
name|vector
index|[
literal|1
index|]
decl_stmt|;
block|}
name|set_vector
typedef|;
end_typedef

begin_comment
comment|/*		********  WARNING ********     Note that the address of _incstart() should be the start     of text space.      Michael Tiemann, Stanford University.  */
end_comment

begin_decl_stmt
specifier|extern
name|set_vector
name|__CTOR_LIST__
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|set_vector
name|__DTOR_LIST__
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|set_vector
modifier|*
name|__dlp
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|int
name|__dli
decl_stmt|;
end_decl_stmt

begin_function_decl
name|void
function_decl|(
modifier|*
name|_initfn
function_decl|)
parameter_list|()
init|=
literal|0
function_decl|;
end_function_decl

begin_function
specifier|static
name|void
name|_incstart
parameter_list|()
block|{
specifier|register
name|void
function_decl|(
modifier|*
modifier|*
name|ppf
function_decl|)
parameter_list|()
init|=
operator|(
name|void
argument_list|(
operator|*
operator|*
argument_list|)
operator|(
operator|)
operator|)
name|__CTOR_LIST__
operator|.
name|vector
function_decl|;
name|int
name|i
decl_stmt|,
name|len
init|=
name|__CTOR_LIST__
operator|.
name|length
decl_stmt|;
name|__dli
operator|=
name|__DTOR_LIST__
operator|.
name|length
expr_stmt|;
name|__DTOR_LIST__
operator|.
name|vector
index|[
name|__dli
index|]
operator|=
operator|(
name|int
operator|)
name|__dlp
expr_stmt|;
name|__dlp
operator|=
operator|&
name|__DTOR_LIST__
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|len
condition|;
name|i
operator|++
control|)
call|(
modifier|*
name|ppf
index|[
name|i
index|]
call|)
argument_list|()
expr_stmt|;
call|(
modifier|*
name|_initfn
call|)
argument_list|()
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|int
name|_end_crt1
parameter_list|()
block|{ }
end_function

end_unit

