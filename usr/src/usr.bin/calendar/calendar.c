begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_decl_stmt
specifier|static
name|char
modifier|*
name|sccsid
init|=
literal|"@(#)calendar.c	4.4 (Berkeley) 83/07/03"
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* /usr/lib/calendar produces an egrep -f file    that will select today's and tomorrow's    calendar entries, with special weekend provisions     used by calendar command */
end_comment

begin_include
include|#
directive|include
file|<sys/time.h>
end_include

begin_define
define|#
directive|define
name|DAY
value|(3600*24L)
end_define

begin_decl_stmt
name|char
modifier|*
name|month
index|[]
init|=
block|{
literal|"[Jj]an"
block|,
literal|"[Ff]eb"
block|,
literal|"[Mm]ar"
block|,
literal|"[Aa]pr"
block|,
literal|"[Mm]ay"
block|,
literal|"[Jj]un"
block|,
literal|"[Jj]ul"
block|,
literal|"[Aa]ug"
block|,
literal|"[Ss]ep"
block|,
literal|"[Oo]ct"
block|,
literal|"[Nn]ov"
block|,
literal|"[Dd]ec"
block|}
decl_stmt|;
end_decl_stmt

begin_function_decl
name|struct
name|tm
modifier|*
name|localtime
parameter_list|()
function_decl|;
end_function_decl

begin_macro
name|tprint
argument_list|(
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|long
name|t
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|struct
name|tm
modifier|*
name|tm
decl_stmt|;
name|tm
operator|=
name|localtime
argument_list|(
operator|&
name|t
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"(^|[ (,;])((%s[^ ]* *|(0%d|%d)/)0*%d)([^0123456789]|$)\n"
argument_list|,
name|month
index|[
name|tm
operator|->
name|tm_mon
index|]
argument_list|,
name|tm
operator|->
name|tm_mon
operator|+
literal|1
argument_list|,
name|tm
operator|->
name|tm_mon
operator|+
literal|1
argument_list|,
name|tm
operator|->
name|tm_mday
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"(^|[ (,;])((\\* *)0*%d)([^0123456789]|$)\n"
argument_list|,
name|tm
operator|->
name|tm_mday
argument_list|)
expr_stmt|;
block|}
end_block

begin_function
name|main
parameter_list|()
block|{
name|long
name|t
decl_stmt|;
name|time
argument_list|(
operator|&
name|t
argument_list|)
expr_stmt|;
name|tprint
argument_list|(
name|t
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|localtime
argument_list|(
operator|&
name|t
argument_list|)
operator|->
name|tm_wday
condition|)
block|{
case|case
literal|5
case|:
name|t
operator|+=
name|DAY
expr_stmt|;
name|tprint
argument_list|(
name|t
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|t
operator|+=
name|DAY
expr_stmt|;
name|tprint
argument_list|(
name|t
argument_list|)
expr_stmt|;
default|default:
name|t
operator|+=
name|DAY
expr_stmt|;
name|tprint
argument_list|(
name|t
argument_list|)
expr_stmt|;
block|}
block|}
end_function

end_unit

