begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1992 The Regents of the University of California.  * All rights reserved.  *  * This code is derived from software contributed to Berkeley by  * Sony Corp. and Kazumasa Utashiro of Software Research Associates, Inc.  *  * %sccs.include.redist.c%  *  * from: $Hdr: fbbm_lcdm.c,v 4.300 91/06/09 06:33:38 root Rel41 $ SONY  *  *	@(#)fbbm_lcdm.c	7.4 (Berkeley) %G%  */
end_comment

begin_comment
comment|/*  * LCD frame buffer driver  */
end_comment

begin_include
include|#
directive|include
file|"lfbm.h"
end_include

begin_if
if|#
directive|if
name|NLFBM
operator|>
literal|0
end_if

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<news3400/iop/framebuf.h>
end_include

begin_include
include|#
directive|include
file|<news3400/iop/fbreg.h>
end_include

begin_include
include|#
directive|include
file|<news3400/fb/fbdefs.h>
end_include

begin_function_decl
specifier|extern
name|int
name|nofunc
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|error
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|ext_fnt24_addr
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|ext_fnt_addr
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|short
name|zero
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|unsigned
name|int
name|mfbmask32
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|unsigned
name|int
name|mfbrmask32
index|[]
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|NOP
value|for (j = 0; j< 40; j++)
end_define

begin_ifdef
ifdef|#
directive|ifdef
name|news3200
end_ifdef

begin_define
define|#
directive|define
name|LCD_PORT
value|(volatile unsigned long *)(0xb0000000)
end_define

begin_define
define|#
directive|define
name|DIMMER_PORT
value|(volatile unsigned long *)(0xb0100000)
end_define

begin_define
define|#
directive|define
name|LCD_CRTC
value|(volatile unsigned char *)(0xbff60000)
end_define

begin_define
define|#
directive|define
name|KROM_START
value|(char *)(0x90000000)
end_define

begin_define
define|#
directive|define
name|VRAM_START
value|(unsigned long *)(0x90200000)
end_define

begin_define
define|#
directive|define
name|VRAM_WIDTH
value|(1120/32)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_function
name|void
name|lfbmattach
parameter_list|(
name|i
parameter_list|)
block|{
comment|/* temporary hack for pseudo-device initialization */
empty_stmt|;
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|news3200
end_ifdef

begin_function
specifier|static
name|caddr_t
name|fblfbm_Krom_addr
parameter_list|(
name|fb
parameter_list|,
name|c
parameter_list|,
name|sr
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|int
name|c
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|tmp
decl_stmt|;
specifier|static
name|int
name|tmpfnt
index|[
literal|24
index|]
decl_stmt|;
if|if
condition|(
operator|(
name|c
operator|>=
literal|0x20
operator|)
operator|&&
operator|(
name|c
operator|<=
literal|0x7e
operator|)
condition|)
block|{
comment|/* 		 * ASCII char 		 */
name|c
operator|-=
literal|' '
expr_stmt|;
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x1f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0xe0
operator|)
operator|<<
literal|2
operator|)
operator|)
operator|<<
literal|7
expr_stmt|;
name|tmp
operator|=
operator|(
name|u_short
operator|*
operator|)
operator|(
name|fb
operator|->
name|Krom_base
operator|+
operator|(
name|c
operator|+
operator|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|?
literal|0
else|:
literal|96
operator|)
operator|)
operator|*
literal|2
operator|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|c
operator|>=
literal|0xa1
operator|)
operator|&&
operator|(
name|c
operator|<=
literal|0xdf
operator|)
condition|)
block|{
comment|/* 		 * KANA char 		 */
if|if
condition|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|)
name|tmp
operator|=
operator|(
name|u_short
operator|*
operator|)
name|ext_fnt24_addr
index|[
name|c
operator|+
literal|64
index|]
expr_stmt|;
else|else
name|tmp
operator|=
operator|(
name|u_short
operator|*
operator|)
name|ext_fnt_addr
index|[
name|c
operator|+
literal|64
index|]
expr_stmt|;
block|}
elseif|else
if|if
condition|(
operator|(
name|c
operator|>=
literal|0x2020
operator|)
operator|&&
operator|(
name|c
operator|<=
literal|0x7e7e
operator|)
condition|)
block|{
comment|/* 		 * KANJI char 		 */
switch|switch
condition|(
name|c
operator|&
literal|0x7000
condition|)
block|{
case|case
literal|0x2000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x1f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x60
operator|)
operator|<<
literal|5
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x700
operator|)
operator|>>
literal|1
operator|)
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
case|case
literal|0x3000
case|:
case|case
literal|0x4000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x7f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0xf00
operator|)
operator|>>
literal|1
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x4000
operator|)
operator|>>
literal|3
operator|)
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
case|case
literal|0x5000
case|:
case|case
literal|0x6000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x7f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0xf00
operator|)
operator|>>
literal|1
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x2000
operator|)
operator|>>
literal|2
operator|)
operator||
literal|0x1000
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
case|case
literal|0x7000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x1f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x60
operator|)
operator|<<
literal|5
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x700
operator|)
operator|>>
literal|1
operator|)
operator||
literal|0x1000
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
block|}
name|tmp
operator|=
operator|(
name|u_short
operator|*
operator|)
operator|(
name|fb
operator|->
name|Krom_base
operator|+
operator|(
name|c
operator|+
operator|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|?
literal|0
else|:
literal|96
operator|)
operator|)
operator|*
literal|2
operator|)
expr_stmt|;
block|}
else|else
block|{
comment|/* 		 * UNKNOWN char 		 */
return|return
operator|(
operator|(
name|caddr_t
operator|)
name|zero
operator|)
return|;
block|}
if|if
condition|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|)
block|{
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|24
condition|;
name|i
operator|++
control|)
block|{
name|tmpfnt
index|[
name|i
index|]
operator|=
operator|(
operator|*
name|tmp
operator|<<
literal|16
operator|)
operator||
operator|*
operator|(
name|tmp
operator|+
literal|2
operator|)
expr_stmt|;
name|tmp
operator|+=
literal|4
expr_stmt|;
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|16
condition|;
name|i
operator|++
control|)
block|{
name|tmpfnt
index|[
name|i
index|]
operator|=
operator|(
operator|*
name|tmp
operator|<<
literal|16
operator|)
operator||
operator|*
operator|(
name|tmp
operator|+
literal|2
operator|)
expr_stmt|;
name|tmp
operator|+=
literal|4
expr_stmt|;
block|}
block|}
return|return
operator|(
operator|(
name|caddr_t
operator|)
name|tmpfnt
operator|)
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* news3200 */
end_comment

begin_function
specifier|static
name|int
name|fblfbm_set_dimmer
parameter_list|(
name|fb
parameter_list|,
name|dim
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|int
name|dim
decl_stmt|;
block|{
name|int
name|s
decl_stmt|;
name|fb
operator|->
name|status_flag
operator|=
name|dim
condition|?
literal|0xf1
else|:
literal|0xf0
expr_stmt|;
ifdef|#
directive|ifdef
name|news3200
operator|*
name|DIMMER_PORT
operator|=
name|fb
operator|->
name|status_flag
expr_stmt|;
endif|#
directive|endif
return|return
operator|(
name|FB_ROK
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|fblfbm_get_dimmer
parameter_list|(
name|fb
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
block|{
return|return
operator|(
name|fb
operator|->
name|status_flag
operator|&
literal|0x1
operator|)
return|;
block|}
end_function

begin_function
name|int
name|fblfbm_get_pixel
parameter_list|(
name|fb
parameter_list|,
name|pixel
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|int
name|pixel
decl_stmt|;
block|{
return|return
operator|(
name|pixel
operator|)
return|;
block|}
end_function

begin_function
name|int
name|fblfbm_get_page
parameter_list|(
name|fb
parameter_list|,
name|off
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|off_t
name|off
decl_stmt|;
block|{
if|if
condition|(
name|off
operator|<
literal|1120
operator|/
literal|8
operator|*
literal|930
condition|)
block|{
comment|/* X/8 * Y */
ifdef|#
directive|ifdef
name|news3200
return|return
operator|(
operator|(
operator|(
name|unsigned
name|int
operator|)
literal|0x10200000
operator|+
name|off
operator|)
operator|>>
name|PGSHIFT
operator|)
return|;
endif|#
directive|endif
block|}
else|else
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
end_function

begin_function
name|int
name|fblfbm_probe
parameter_list|(
name|unit
parameter_list|)
name|int
name|unit
decl_stmt|;
block|{
ifdef|#
directive|ifdef
name|news3200
if|if
condition|(
name|unit
operator|<
name|NLFBM
condition|)
block|{
if|if
condition|(
name|badaddr
argument_list|(
literal|0xbff50000
argument_list|,
literal|1
argument_list|)
condition|)
return|return
literal|0
return|;
else|else
block|{
if|if
condition|(
operator|*
operator|(
specifier|volatile
name|u_char
operator|*
operator|)
operator|(
literal|0xbff50000
operator|)
operator|==
literal|0xff
condition|)
return|return
name|FB_LCDM
return|;
else|else
return|return
literal|0
return|;
block|}
block|}
endif|#
directive|endif
comment|/* news3200 */
return|return
literal|0
return|;
block|}
end_function

begin_function_decl
name|void
name|fbmem_rop_init
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_copy
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_winit
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_write
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_read
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_cinit
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_clear
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_vect
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_dot
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|struct
name|fbdev_ops
name|fblfbm_ops
init|=
block|{
name|fbmem_rop_init
block|,
comment|/* (*fb_rop_init)() */
name|fbmem_rop_copy
block|,
comment|/* (*fb_rop_copy)() */
name|fbmem_rop_winit
block|,
comment|/* (*fb_rop_winit)() */
name|fbmem_rop_write
block|,
comment|/* (*fb_rop_write)() */
name|fbmem_rop_read
block|,
comment|/* (*fb_rop_read)() */
name|fbmem_rop_cinit
block|,
comment|/* (*fb_rop_cinit)() */
name|fbmem_rop_clear
block|,
comment|/* (*fb_rop_clear)() */
name|fbmem_rop_vect
block|,
comment|/* (*fb_rop_vect)() */
name|fbmem_rop_dot
block|,
comment|/* (*fb_rop_dot)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
comment|/* (*fb_rop_fillscan)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|error
block|,
comment|/* (*fb_rop_wait)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|error
block|,
comment|/* (*fb_rop_reset)() */
name|fblfbm_Krom_addr
block|,
comment|/* *(*fb_Krom_addr)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|error
block|,
comment|/* (*fb_init_palette)() */
name|error
block|,
comment|/* (*fb_set_palette)() */
name|error
block|,
comment|/* (*fb_get_palette)() */
name|fblfbm_get_pixel
block|,
comment|/* (*fb_get_pixel)() */
name|fblfbm_set_dimmer
block|,
comment|/* (*fb_set_dimmer)() */
name|fblfbm_get_dimmer
block|,
comment|/* (*fb_get_dimmer)() */
name|nofunc
block|,
comment|/* (*fb_open)() */
name|nofunc
block|,
comment|/* (*fb_close)() */
name|nofunc
block|,
comment|/* (*fb_ioctl)() */
name|fblfbm_get_page
block|,
comment|/* (*fb_get_page)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
comment|/* (*fb_cursor_set)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
comment|/* (*fb_cursor_on)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
comment|/* (*fb_cursor_off)() */
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
comment|/* (*fb_cursor_move)() */
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|char
name|lctc_data
index|[]
init|=
block|{
literal|0
block|,
literal|47
block|,
literal|1
block|,
literal|35
block|,
literal|9
block|,
literal|0
block|,
literal|10
block|,
literal|0
block|,
literal|11
block|,
literal|0
block|,
literal|12
block|,
literal|0
block|,
literal|13
block|,
literal|0
block|,
literal|14
block|,
literal|0
block|,
literal|15
block|,
literal|0
block|,
literal|18
block|,
literal|35
block|,
literal|19
block|,
literal|0x01
block|,
literal|20
block|,
literal|0x85
block|,
literal|21
block|,
literal|0
block|,
literal|22
block|,
literal|0x10
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|mfbdev
name|fblcd
init|=
block|{
operator|(
name|caddr_t
operator|)
name|VRAM_START
block|,
name|VRAM_WIDTH
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|fblfbm_setup
parameter_list|(
name|fb
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
specifier|volatile
name|unsigned
name|char
modifier|*
name|lctreg
init|=
name|LCD_CRTC
decl_stmt|;
if|if
condition|(
name|fb
operator|->
name|type
condition|)
block|{
name|fb
operator|->
name|Mono
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Colorwidth
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|fbNplane
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|planemask
operator|=
literal|0x1
expr_stmt|;
name|fb
operator|->
name|Dimmer
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|extent
operator|.
name|x
operator|=
literal|1120
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|extent
operator|.
name|y
operator|=
literal|930
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|extent
operator|.
name|x
operator|=
literal|1120
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|extent
operator|.
name|y
operator|=
literal|780
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|type
operator|=
name|BM_MEM
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|depth
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|width
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|extent
operator|.
name|x
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|extent
operator|.
name|y
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|type
operator|=
name|BM_MEM
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|depth
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|width
operator|=
literal|2
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|extent
operator|.
name|x
operator|=
literal|32
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|extent
operator|.
name|y
operator|=
literal|32
expr_stmt|;
name|fb
operator|->
name|Krom_base
operator|=
name|KROM_START
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent0
operator|.
name|x
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent0
operator|.
name|y
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent1
operator|.
name|x
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent1
operator|.
name|y
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|font_w
operator|=
literal|12
expr_stmt|;
name|fb
operator|->
name|font_h
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|char_w
operator|=
literal|12
expr_stmt|;
name|fb
operator|->
name|char_h
operator|=
literal|26
expr_stmt|;
name|fb
operator|->
name|scr_w
operator|=
literal|1120
expr_stmt|;
name|fb
operator|->
name|scr_h
operator|=
literal|780
expr_stmt|;
name|fb
operator|->
name|ch_pos
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|ul_pos
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|x_offset
operator|=
operator|(
literal|1120
operator|-
operator|(
literal|80
operator|*
literal|12
operator|)
operator|)
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|y_offset
operator|=
operator|(
literal|780
operator|-
operator|(
literal|29
operator|*
literal|26
operator|)
operator|)
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|rit_m
operator|=
literal|80
expr_stmt|;
name|fb
operator|->
name|btm_m
operator|=
literal|29
expr_stmt|;
name|fb
operator|->
name|cursorSet
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|cursorVis
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|cursorShow
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|cursorP
operator|.
name|x
operator|=
literal|1120
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|cursorP
operator|.
name|y
operator|=
literal|780
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|status_flag
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|run_flag
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|hard_cursor
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|fbbm_op
operator|=
operator|&
name|fblfbm_ops
expr_stmt|;
name|fb
operator|->
name|private
operator|=
operator|(
name|caddr_t
operator|)
operator|&
name|fblcd
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|28
condition|;
name|i
operator|++
control|)
operator|*
name|lctreg
operator|++
operator|=
name|lctc_data
index|[
name|i
index|]
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|500000
condition|;
name|i
operator|++
control|)
empty_stmt|;
operator|*
name|LCD_PORT
operator|=
literal|1
expr_stmt|;
block|}
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* NLFBM> 0 */
end_comment

end_unit

