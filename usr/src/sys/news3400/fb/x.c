begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1992 The Regents of the University of California.  * All rights reserved.  *  * This code is derived from software contributed to Berkeley by  * Sony Corp. and Kazumasa Utashiro of Software Research Associates, Inc.  *  * %sccs.include.redist.c%  *  * from: $Hdr: fb_mfbs.c,v 4.300 91/06/27 20:42:43 root Rel41 $ SONY  *  *	@(#)x.c	5.1 (Berkeley) %G%  */
end_comment

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<news3400/iop/framebuf.h>
end_include

begin_include
include|#
directive|include
file|<news3400/iop/fbreg.h>
end_include

begin_include
include|#
directive|include
file|<news3400/fb/fbdefs.h>
end_include

begin_decl_stmt
name|u_short
name|mfbstarttab16
index|[
literal|16
index|]
init|=
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x7FFF
operator|)
block|,
operator|(
literal|0x3FFF
operator|)
block|,
operator|(
literal|0x1FFF
operator|)
block|,
operator|(
literal|0x0FFF
operator|)
block|,
operator|(
literal|0x07FF
operator|)
block|,
operator|(
literal|0x03FF
operator|)
block|,
operator|(
literal|0x01FF
operator|)
block|,
operator|(
literal|0x00FF
operator|)
block|,
operator|(
literal|0x007F
operator|)
block|,
operator|(
literal|0x003F
operator|)
block|,
operator|(
literal|0x001F
operator|)
block|,
operator|(
literal|0x000F
operator|)
block|,
operator|(
literal|0x0007
operator|)
block|,
operator|(
literal|0x0003
operator|)
block|,
operator|(
literal|0x0001
operator|)
block|,     }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_short
name|mfbendtab16
index|[
literal|16
index|]
init|=
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x8000
operator|)
block|,
operator|(
literal|0xC000
operator|)
block|,
operator|(
literal|0xE000
operator|)
block|,
operator|(
literal|0xF000
operator|)
block|,
operator|(
literal|0xF800
operator|)
block|,
operator|(
literal|0xFC00
operator|)
block|,
operator|(
literal|0xFE00
operator|)
block|,
operator|(
literal|0xFF00
operator|)
block|,
operator|(
literal|0xFF80
operator|)
block|,
operator|(
literal|0xFFC0
operator|)
block|,
operator|(
literal|0xFFE0
operator|)
block|,
operator|(
literal|0xFFF0
operator|)
block|,
operator|(
literal|0xFFF8
operator|)
block|,
operator|(
literal|0xFFFC
operator|)
block|,
operator|(
literal|0xFFFE
operator|)
block|,     }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_short
name|mfbpartmasks16
index|[
literal|16
index|]
index|[
literal|16
index|]
init|=
block|{
block|{
operator|(
literal|0xFFFF
operator|)
block|,
operator|(
literal|0x8000
operator|)
block|,
operator|(
literal|0xC000
operator|)
block|,
operator|(
literal|0xE000
operator|)
block|,
operator|(
literal|0xF000
operator|)
block|,
operator|(
literal|0xF800
operator|)
block|,
operator|(
literal|0xFC00
operator|)
block|,
operator|(
literal|0xFE00
operator|)
block|,
operator|(
literal|0xFF00
operator|)
block|,
operator|(
literal|0xFF80
operator|)
block|,
operator|(
literal|0xFFC0
operator|)
block|,
operator|(
literal|0xFFE0
operator|)
block|,
operator|(
literal|0xFFF0
operator|)
block|,
operator|(
literal|0xFFF8
operator|)
block|,
operator|(
literal|0xFFFC
operator|)
block|,
operator|(
literal|0xFFFE
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x4000
operator|)
block|,
operator|(
literal|0x6000
operator|)
block|,
operator|(
literal|0x7000
operator|)
block|,
operator|(
literal|0x7800
operator|)
block|,
operator|(
literal|0x7C00
operator|)
block|,
operator|(
literal|0x7E00
operator|)
block|,
operator|(
literal|0x7F00
operator|)
block|,
operator|(
literal|0x7F80
operator|)
block|,
operator|(
literal|0x7FC0
operator|)
block|,
operator|(
literal|0x7FE0
operator|)
block|,
operator|(
literal|0x7FF0
operator|)
block|,
operator|(
literal|0x7FF8
operator|)
block|,
operator|(
literal|0x7FFC
operator|)
block|,
operator|(
literal|0x7FFE
operator|)
block|,
operator|(
literal|0x7FFF
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x2000
operator|)
block|,
operator|(
literal|0x3000
operator|)
block|,
operator|(
literal|0x3800
operator|)
block|,
operator|(
literal|0x3C00
operator|)
block|,
operator|(
literal|0x3E00
operator|)
block|,
operator|(
literal|0x3F00
operator|)
block|,
operator|(
literal|0x3F80
operator|)
block|,
operator|(
literal|0x3FC0
operator|)
block|,
operator|(
literal|0x3FE0
operator|)
block|,
operator|(
literal|0x3FF0
operator|)
block|,
operator|(
literal|0x3FF8
operator|)
block|,
operator|(
literal|0x3FFC
operator|)
block|,
operator|(
literal|0x3FFE
operator|)
block|,
operator|(
literal|0x3FFF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x1000
operator|)
block|,
operator|(
literal|0x1800
operator|)
block|,
operator|(
literal|0x1C00
operator|)
block|,
operator|(
literal|0x1E00
operator|)
block|,
operator|(
literal|0x1F00
operator|)
block|,
operator|(
literal|0x1F80
operator|)
block|,
operator|(
literal|0x1FC0
operator|)
block|,
operator|(
literal|0x1FE0
operator|)
block|,
operator|(
literal|0x1FF0
operator|)
block|,
operator|(
literal|0x1FF8
operator|)
block|,
operator|(
literal|0x1FFC
operator|)
block|,
operator|(
literal|0x1FFE
operator|)
block|,
operator|(
literal|0x1FFF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0800
operator|)
block|,
operator|(
literal|0x0C00
operator|)
block|,
operator|(
literal|0x0E00
operator|)
block|,
operator|(
literal|0x0F00
operator|)
block|,
operator|(
literal|0x0F80
operator|)
block|,
operator|(
literal|0x0FC0
operator|)
block|,
operator|(
literal|0x0FE0
operator|)
block|,
operator|(
literal|0x0FF0
operator|)
block|,
operator|(
literal|0x0FF8
operator|)
block|,
operator|(
literal|0x0FFC
operator|)
block|,
operator|(
literal|0x0FFE
operator|)
block|,
operator|(
literal|0x0FFF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0400
operator|)
block|,
operator|(
literal|0x0600
operator|)
block|,
operator|(
literal|0x0700
operator|)
block|,
operator|(
literal|0x0780
operator|)
block|,
operator|(
literal|0x07C0
operator|)
block|,
operator|(
literal|0x07E0
operator|)
block|,
operator|(
literal|0x07F0
operator|)
block|,
operator|(
literal|0x07F8
operator|)
block|,
operator|(
literal|0x07FC
operator|)
block|,
operator|(
literal|0x07FE
operator|)
block|,
operator|(
literal|0x07FF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0200
operator|)
block|,
operator|(
literal|0x0300
operator|)
block|,
operator|(
literal|0x0380
operator|)
block|,
operator|(
literal|0x03C0
operator|)
block|,
operator|(
literal|0x03E0
operator|)
block|,
operator|(
literal|0x03F0
operator|)
block|,
operator|(
literal|0x03F8
operator|)
block|,
operator|(
literal|0x03FC
operator|)
block|,
operator|(
literal|0x03FE
operator|)
block|,
operator|(
literal|0x03FF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0100
operator|)
block|,
operator|(
literal|0x0180
operator|)
block|,
operator|(
literal|0x01C0
operator|)
block|,
operator|(
literal|0x01E0
operator|)
block|,
operator|(
literal|0x01F0
operator|)
block|,
operator|(
literal|0x01F8
operator|)
block|,
operator|(
literal|0x01FC
operator|)
block|,
operator|(
literal|0x01FE
operator|)
block|,
operator|(
literal|0x01FF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0080
operator|)
block|,
operator|(
literal|0x00C0
operator|)
block|,
operator|(
literal|0x00E0
operator|)
block|,
operator|(
literal|0x00F0
operator|)
block|,
operator|(
literal|0x00F8
operator|)
block|,
operator|(
literal|0x00FC
operator|)
block|,
operator|(
literal|0x00FE
operator|)
block|,
operator|(
literal|0x00FF
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0040
operator|)
block|,
operator|(
literal|0x0060
operator|)
block|,
operator|(
literal|0x0070
operator|)
block|,
operator|(
literal|0x0078
operator|)
block|,
operator|(
literal|0x007C
operator|)
block|,
operator|(
literal|0x007E
operator|)
block|,
operator|(
literal|0x007F
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0020
operator|)
block|,
operator|(
literal|0x0030
operator|)
block|,
operator|(
literal|0x0038
operator|)
block|,
operator|(
literal|0x003C
operator|)
block|,
operator|(
literal|0x003E
operator|)
block|,
operator|(
literal|0x003F
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0010
operator|)
block|,
operator|(
literal|0x0018
operator|)
block|,
operator|(
literal|0x001C
operator|)
block|,
operator|(
literal|0x001E
operator|)
block|,
operator|(
literal|0x001F
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0008
operator|)
block|,
operator|(
literal|0x000C
operator|)
block|,
operator|(
literal|0x000E
operator|)
block|,
operator|(
literal|0x000F
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0004
operator|)
block|,
operator|(
literal|0x0006
operator|)
block|,
operator|(
literal|0x0007
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0002
operator|)
block|,
operator|(
literal|0x0003
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|,
block|{
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0001
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|,
operator|(
literal|0x0000
operator|)
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_short
name|mfbmask16
index|[
literal|16
index|]
init|=
block|{
operator|(
literal|1
operator|<<
literal|15
operator|)
block|,
operator|(
literal|1
operator|<<
literal|14
operator|)
block|,
operator|(
literal|1
operator|<<
literal|13
operator|)
block|,
operator|(
literal|1
operator|<<
literal|12
operator|)
block|,
operator|(
literal|1
operator|<<
literal|11
operator|)
block|,
operator|(
literal|1
operator|<<
literal|10
operator|)
block|,
operator|(
literal|1
operator|<<
literal|9
operator|)
block|,
operator|(
literal|1
operator|<<
literal|8
operator|)
block|,
operator|(
literal|1
operator|<<
literal|7
operator|)
block|,
operator|(
literal|1
operator|<<
literal|6
operator|)
block|,
operator|(
literal|1
operator|<<
literal|5
operator|)
block|,
operator|(
literal|1
operator|<<
literal|4
operator|)
block|,
operator|(
literal|1
operator|<<
literal|3
operator|)
block|,
operator|(
literal|1
operator|<<
literal|2
operator|)
block|,
operator|(
literal|1
operator|<<
literal|1
operator|)
block|,
operator|(
literal|1
operator|<<
literal|0
operator|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_short
name|mfbrmask16
index|[
literal|16
index|]
init|=
block|{
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|15
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|14
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|13
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|12
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|11
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|10
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|9
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|8
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|7
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|6
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|5
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|4
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|3
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|2
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|1
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|0
operator|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_int
name|mfbstarttab32
index|[
literal|32
index|]
init|=
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x7FFFFFFF
operator|)
block|,
operator|(
literal|0x3FFFFFFF
operator|)
block|,
operator|(
literal|0x1FFFFFFF
operator|)
block|,
operator|(
literal|0x0FFFFFFF
operator|)
block|,
operator|(
literal|0x07FFFFFF
operator|)
block|,
operator|(
literal|0x03FFFFFF
operator|)
block|,
operator|(
literal|0x01FFFFFF
operator|)
block|,
operator|(
literal|0x00FFFFFF
operator|)
block|,
operator|(
literal|0x007FFFFF
operator|)
block|,
operator|(
literal|0x003FFFFF
operator|)
block|,
operator|(
literal|0x001FFFFF
operator|)
block|,
operator|(
literal|0x000FFFFF
operator|)
block|,
operator|(
literal|0x0007FFFF
operator|)
block|,
operator|(
literal|0x0003FFFF
operator|)
block|,
operator|(
literal|0x0001FFFF
operator|)
block|,
operator|(
literal|0x0000FFFF
operator|)
block|,
operator|(
literal|0x00007FFF
operator|)
block|,
operator|(
literal|0x00003FFF
operator|)
block|,
operator|(
literal|0x00001FFF
operator|)
block|,
operator|(
literal|0x00000FFF
operator|)
block|,
operator|(
literal|0x000007FF
operator|)
block|,
operator|(
literal|0x000003FF
operator|)
block|,
operator|(
literal|0x000001FF
operator|)
block|,
operator|(
literal|0x000000FF
operator|)
block|,
operator|(
literal|0x0000007F
operator|)
block|,
operator|(
literal|0x0000003F
operator|)
block|,
operator|(
literal|0x0000001F
operator|)
block|,
operator|(
literal|0x0000000F
operator|)
block|,
operator|(
literal|0x00000007
operator|)
block|,
operator|(
literal|0x00000003
operator|)
block|,
operator|(
literal|0x00000001
operator|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_int
name|mfbendtab32
index|[
literal|32
index|]
init|=
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x80000000
operator|)
block|,
operator|(
literal|0xC0000000
operator|)
block|,
operator|(
literal|0xE0000000
operator|)
block|,
operator|(
literal|0xF0000000
operator|)
block|,
operator|(
literal|0xF8000000
operator|)
block|,
operator|(
literal|0xFC000000
operator|)
block|,
operator|(
literal|0xFE000000
operator|)
block|,
operator|(
literal|0xFF000000
operator|)
block|,
operator|(
literal|0xFF800000
operator|)
block|,
operator|(
literal|0xFFC00000
operator|)
block|,
operator|(
literal|0xFFE00000
operator|)
block|,
operator|(
literal|0xFFF00000
operator|)
block|,
operator|(
literal|0xFFF80000
operator|)
block|,
operator|(
literal|0xFFFC0000
operator|)
block|,
operator|(
literal|0xFFFE0000
operator|)
block|,
operator|(
literal|0xFFFF0000
operator|)
block|,
operator|(
literal|0xFFFF8000
operator|)
block|,
operator|(
literal|0xFFFFC000
operator|)
block|,
operator|(
literal|0xFFFFE000
operator|)
block|,
operator|(
literal|0xFFFFF000
operator|)
block|,
operator|(
literal|0xFFFFF800
operator|)
block|,
operator|(
literal|0xFFFFFC00
operator|)
block|,
operator|(
literal|0xFFFFFE00
operator|)
block|,
operator|(
literal|0xFFFFFF00
operator|)
block|,
operator|(
literal|0xFFFFFF80
operator|)
block|,
operator|(
literal|0xFFFFFFC0
operator|)
block|,
operator|(
literal|0xFFFFFFE0
operator|)
block|,
operator|(
literal|0xFFFFFFF0
operator|)
block|,
operator|(
literal|0xFFFFFFF8
operator|)
block|,
operator|(
literal|0xFFFFFFFC
operator|)
block|,
operator|(
literal|0xFFFFFFFE
operator|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_int
name|mfbpartmasks32
index|[
literal|32
index|]
index|[
literal|32
index|]
init|=
block|{
block|{
operator|(
literal|0xFFFFFFFF
operator|)
block|,
operator|(
literal|0x80000000
operator|)
block|,
operator|(
literal|0xC0000000
operator|)
block|,
operator|(
literal|0xE0000000
operator|)
block|,
operator|(
literal|0xF0000000
operator|)
block|,
operator|(
literal|0xF8000000
operator|)
block|,
operator|(
literal|0xFC000000
operator|)
block|,
operator|(
literal|0xFE000000
operator|)
block|,
operator|(
literal|0xFF000000
operator|)
block|,
operator|(
literal|0xFF800000
operator|)
block|,
operator|(
literal|0xFFC00000
operator|)
block|,
operator|(
literal|0xFFE00000
operator|)
block|,
operator|(
literal|0xFFF00000
operator|)
block|,
operator|(
literal|0xFFF80000
operator|)
block|,
operator|(
literal|0xFFFC0000
operator|)
block|,
operator|(
literal|0xFFFE0000
operator|)
block|,
operator|(
literal|0xFFFF0000
operator|)
block|,
operator|(
literal|0xFFFF8000
operator|)
block|,
operator|(
literal|0xFFFFC000
operator|)
block|,
operator|(
literal|0xFFFFE000
operator|)
block|,
operator|(
literal|0xFFFFF000
operator|)
block|,
operator|(
literal|0xFFFFF800
operator|)
block|,
operator|(
literal|0xFFFFFC00
operator|)
block|,
operator|(
literal|0xFFFFFE00
operator|)
block|,
operator|(
literal|0xFFFFFF00
operator|)
block|,
operator|(
literal|0xFFFFFF80
operator|)
block|,
operator|(
literal|0xFFFFFFC0
operator|)
block|,
operator|(
literal|0xFFFFFFE0
operator|)
block|,
operator|(
literal|0xFFFFFFF0
operator|)
block|,
operator|(
literal|0xFFFFFFF8
operator|)
block|,
operator|(
literal|0xFFFFFFFC
operator|)
block|,
operator|(
literal|0xFFFFFFFE
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x40000000
operator|)
block|,
operator|(
literal|0x60000000
operator|)
block|,
operator|(
literal|0x70000000
operator|)
block|,
operator|(
literal|0x78000000
operator|)
block|,
operator|(
literal|0x7C000000
operator|)
block|,
operator|(
literal|0x7E000000
operator|)
block|,
operator|(
literal|0x7F000000
operator|)
block|,
operator|(
literal|0x7F800000
operator|)
block|,
operator|(
literal|0x7FC00000
operator|)
block|,
operator|(
literal|0x7FE00000
operator|)
block|,
operator|(
literal|0x7FF00000
operator|)
block|,
operator|(
literal|0x7FF80000
operator|)
block|,
operator|(
literal|0x7FFC0000
operator|)
block|,
operator|(
literal|0x7FFE0000
operator|)
block|,
operator|(
literal|0x7FFF0000
operator|)
block|,
operator|(
literal|0x7FFF8000
operator|)
block|,
operator|(
literal|0x7FFFC000
operator|)
block|,
operator|(
literal|0x7FFFE000
operator|)
block|,
operator|(
literal|0x7FFFF000
operator|)
block|,
operator|(
literal|0x7FFFF800
operator|)
block|,
operator|(
literal|0x7FFFFC00
operator|)
block|,
operator|(
literal|0x7FFFFE00
operator|)
block|,
operator|(
literal|0x7FFFFF00
operator|)
block|,
operator|(
literal|0x7FFFFF80
operator|)
block|,
operator|(
literal|0x7FFFFFC0
operator|)
block|,
operator|(
literal|0x7FFFFFE0
operator|)
block|,
operator|(
literal|0x7FFFFFF0
operator|)
block|,
operator|(
literal|0x7FFFFFF8
operator|)
block|,
operator|(
literal|0x7FFFFFFC
operator|)
block|,
operator|(
literal|0x7FFFFFFE
operator|)
block|,
operator|(
literal|0x7FFFFFFF
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x20000000
operator|)
block|,
operator|(
literal|0x30000000
operator|)
block|,
operator|(
literal|0x38000000
operator|)
block|,
operator|(
literal|0x3C000000
operator|)
block|,
operator|(
literal|0x3E000000
operator|)
block|,
operator|(
literal|0x3F000000
operator|)
block|,
operator|(
literal|0x3F800000
operator|)
block|,
operator|(
literal|0x3FC00000
operator|)
block|,
operator|(
literal|0x3FE00000
operator|)
block|,
operator|(
literal|0x3FF00000
operator|)
block|,
operator|(
literal|0x3FF80000
operator|)
block|,
operator|(
literal|0x3FFC0000
operator|)
block|,
operator|(
literal|0x3FFE0000
operator|)
block|,
operator|(
literal|0x3FFF0000
operator|)
block|,
operator|(
literal|0x3FFF8000
operator|)
block|,
operator|(
literal|0x3FFFC000
operator|)
block|,
operator|(
literal|0x3FFFE000
operator|)
block|,
operator|(
literal|0x3FFFF000
operator|)
block|,
operator|(
literal|0x3FFFF800
operator|)
block|,
operator|(
literal|0x3FFFFC00
operator|)
block|,
operator|(
literal|0x3FFFFE00
operator|)
block|,
operator|(
literal|0x3FFFFF00
operator|)
block|,
operator|(
literal|0x3FFFFF80
operator|)
block|,
operator|(
literal|0x3FFFFFC0
operator|)
block|,
operator|(
literal|0x3FFFFFE0
operator|)
block|,
operator|(
literal|0x3FFFFFF0
operator|)
block|,
operator|(
literal|0x3FFFFFF8
operator|)
block|,
operator|(
literal|0x3FFFFFFC
operator|)
block|,
operator|(
literal|0x3FFFFFFE
operator|)
block|,
operator|(
literal|0x3FFFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x10000000
operator|)
block|,
operator|(
literal|0x18000000
operator|)
block|,
operator|(
literal|0x1C000000
operator|)
block|,
operator|(
literal|0x1E000000
operator|)
block|,
operator|(
literal|0x1F000000
operator|)
block|,
operator|(
literal|0x1F800000
operator|)
block|,
operator|(
literal|0x1FC00000
operator|)
block|,
operator|(
literal|0x1FE00000
operator|)
block|,
operator|(
literal|0x1FF00000
operator|)
block|,
operator|(
literal|0x1FF80000
operator|)
block|,
operator|(
literal|0x1FFC0000
operator|)
block|,
operator|(
literal|0x1FFE0000
operator|)
block|,
operator|(
literal|0x1FFF0000
operator|)
block|,
operator|(
literal|0x1FFF8000
operator|)
block|,
operator|(
literal|0x1FFFC000
operator|)
block|,
operator|(
literal|0x1FFFE000
operator|)
block|,
operator|(
literal|0x1FFFF000
operator|)
block|,
operator|(
literal|0x1FFFF800
operator|)
block|,
operator|(
literal|0x1FFFFC00
operator|)
block|,
operator|(
literal|0x1FFFFE00
operator|)
block|,
operator|(
literal|0x1FFFFF00
operator|)
block|,
operator|(
literal|0x1FFFFF80
operator|)
block|,
operator|(
literal|0x1FFFFFC0
operator|)
block|,
operator|(
literal|0x1FFFFFE0
operator|)
block|,
operator|(
literal|0x1FFFFFF0
operator|)
block|,
operator|(
literal|0x1FFFFFF8
operator|)
block|,
operator|(
literal|0x1FFFFFFC
operator|)
block|,
operator|(
literal|0x1FFFFFFE
operator|)
block|,
operator|(
literal|0x1FFFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x08000000
operator|)
block|,
operator|(
literal|0x0C000000
operator|)
block|,
operator|(
literal|0x0E000000
operator|)
block|,
operator|(
literal|0x0F000000
operator|)
block|,
operator|(
literal|0x0F800000
operator|)
block|,
operator|(
literal|0x0FC00000
operator|)
block|,
operator|(
literal|0x0FE00000
operator|)
block|,
operator|(
literal|0x0FF00000
operator|)
block|,
operator|(
literal|0x0FF80000
operator|)
block|,
operator|(
literal|0x0FFC0000
operator|)
block|,
operator|(
literal|0x0FFE0000
operator|)
block|,
operator|(
literal|0x0FFF0000
operator|)
block|,
operator|(
literal|0x0FFF8000
operator|)
block|,
operator|(
literal|0x0FFFC000
operator|)
block|,
operator|(
literal|0x0FFFE000
operator|)
block|,
operator|(
literal|0x0FFFF000
operator|)
block|,
operator|(
literal|0x0FFFF800
operator|)
block|,
operator|(
literal|0x0FFFFC00
operator|)
block|,
operator|(
literal|0x0FFFFE00
operator|)
block|,
operator|(
literal|0x0FFFFF00
operator|)
block|,
operator|(
literal|0x0FFFFF80
operator|)
block|,
operator|(
literal|0x0FFFFFC0
operator|)
block|,
operator|(
literal|0x0FFFFFE0
operator|)
block|,
operator|(
literal|0x0FFFFFF0
operator|)
block|,
operator|(
literal|0x0FFFFFF8
operator|)
block|,
operator|(
literal|0x0FFFFFFC
operator|)
block|,
operator|(
literal|0x0FFFFFFE
operator|)
block|,
operator|(
literal|0x0FFFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x04000000
operator|)
block|,
operator|(
literal|0x06000000
operator|)
block|,
operator|(
literal|0x07000000
operator|)
block|,
operator|(
literal|0x07800000
operator|)
block|,
operator|(
literal|0x07C00000
operator|)
block|,
operator|(
literal|0x07E00000
operator|)
block|,
operator|(
literal|0x07F00000
operator|)
block|,
operator|(
literal|0x07F80000
operator|)
block|,
operator|(
literal|0x07FC0000
operator|)
block|,
operator|(
literal|0x07FE0000
operator|)
block|,
operator|(
literal|0x07FF0000
operator|)
block|,
operator|(
literal|0x07FF8000
operator|)
block|,
operator|(
literal|0x07FFC000
operator|)
block|,
operator|(
literal|0x07FFE000
operator|)
block|,
operator|(
literal|0x07FFF000
operator|)
block|,
operator|(
literal|0x07FFF800
operator|)
block|,
operator|(
literal|0x07FFFC00
operator|)
block|,
operator|(
literal|0x07FFFE00
operator|)
block|,
operator|(
literal|0x07FFFF00
operator|)
block|,
operator|(
literal|0x07FFFF80
operator|)
block|,
operator|(
literal|0x07FFFFC0
operator|)
block|,
operator|(
literal|0x07FFFFE0
operator|)
block|,
operator|(
literal|0x07FFFFF0
operator|)
block|,
operator|(
literal|0x07FFFFF8
operator|)
block|,
operator|(
literal|0x07FFFFFC
operator|)
block|,
operator|(
literal|0x07FFFFFE
operator|)
block|,
operator|(
literal|0x07FFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x02000000
operator|)
block|,
operator|(
literal|0x03000000
operator|)
block|,
operator|(
literal|0x03800000
operator|)
block|,
operator|(
literal|0x03C00000
operator|)
block|,
operator|(
literal|0x03E00000
operator|)
block|,
operator|(
literal|0x03F00000
operator|)
block|,
operator|(
literal|0x03F80000
operator|)
block|,
operator|(
literal|0x03FC0000
operator|)
block|,
operator|(
literal|0x03FE0000
operator|)
block|,
operator|(
literal|0x03FF0000
operator|)
block|,
operator|(
literal|0x03FF8000
operator|)
block|,
operator|(
literal|0x03FFC000
operator|)
block|,
operator|(
literal|0x03FFE000
operator|)
block|,
operator|(
literal|0x03FFF000
operator|)
block|,
operator|(
literal|0x03FFF800
operator|)
block|,
operator|(
literal|0x03FFFC00
operator|)
block|,
operator|(
literal|0x03FFFE00
operator|)
block|,
operator|(
literal|0x03FFFF00
operator|)
block|,
operator|(
literal|0x03FFFF80
operator|)
block|,
operator|(
literal|0x03FFFFC0
operator|)
block|,
operator|(
literal|0x03FFFFE0
operator|)
block|,
operator|(
literal|0x03FFFFF0
operator|)
block|,
operator|(
literal|0x03FFFFF8
operator|)
block|,
operator|(
literal|0x03FFFFFC
operator|)
block|,
operator|(
literal|0x03FFFFFE
operator|)
block|,
operator|(
literal|0x03FFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x01000000
operator|)
block|,
operator|(
literal|0x01800000
operator|)
block|,
operator|(
literal|0x01C00000
operator|)
block|,
operator|(
literal|0x01E00000
operator|)
block|,
operator|(
literal|0x01F00000
operator|)
block|,
operator|(
literal|0x01F80000
operator|)
block|,
operator|(
literal|0x01FC0000
operator|)
block|,
operator|(
literal|0x01FE0000
operator|)
block|,
operator|(
literal|0x01FF0000
operator|)
block|,
operator|(
literal|0x01FF8000
operator|)
block|,
operator|(
literal|0x01FFC000
operator|)
block|,
operator|(
literal|0x01FFE000
operator|)
block|,
operator|(
literal|0x01FFF000
operator|)
block|,
operator|(
literal|0x01FFF800
operator|)
block|,
operator|(
literal|0x01FFFC00
operator|)
block|,
operator|(
literal|0x01FFFE00
operator|)
block|,
operator|(
literal|0x01FFFF00
operator|)
block|,
operator|(
literal|0x01FFFF80
operator|)
block|,
operator|(
literal|0x01FFFFC0
operator|)
block|,
operator|(
literal|0x01FFFFE0
operator|)
block|,
operator|(
literal|0x01FFFFF0
operator|)
block|,
operator|(
literal|0x01FFFFF8
operator|)
block|,
operator|(
literal|0x01FFFFFC
operator|)
block|,
operator|(
literal|0x01FFFFFE
operator|)
block|,
operator|(
literal|0x01FFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00800000
operator|)
block|,
operator|(
literal|0x00C00000
operator|)
block|,
operator|(
literal|0x00E00000
operator|)
block|,
operator|(
literal|0x00F00000
operator|)
block|,
operator|(
literal|0x00F80000
operator|)
block|,
operator|(
literal|0x00FC0000
operator|)
block|,
operator|(
literal|0x00FE0000
operator|)
block|,
operator|(
literal|0x00FF0000
operator|)
block|,
operator|(
literal|0x00FF8000
operator|)
block|,
operator|(
literal|0x00FFC000
operator|)
block|,
operator|(
literal|0x00FFE000
operator|)
block|,
operator|(
literal|0x00FFF000
operator|)
block|,
operator|(
literal|0x00FFF800
operator|)
block|,
operator|(
literal|0x00FFFC00
operator|)
block|,
operator|(
literal|0x00FFFE00
operator|)
block|,
operator|(
literal|0x00FFFF00
operator|)
block|,
operator|(
literal|0x00FFFF80
operator|)
block|,
operator|(
literal|0x00FFFFC0
operator|)
block|,
operator|(
literal|0x00FFFFE0
operator|)
block|,
operator|(
literal|0x00FFFFF0
operator|)
block|,
operator|(
literal|0x00FFFFF8
operator|)
block|,
operator|(
literal|0x00FFFFFC
operator|)
block|,
operator|(
literal|0x00FFFFFE
operator|)
block|,
operator|(
literal|0x00FFFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00400000
operator|)
block|,
operator|(
literal|0x00600000
operator|)
block|,
operator|(
literal|0x00700000
operator|)
block|,
operator|(
literal|0x00780000
operator|)
block|,
operator|(
literal|0x007C0000
operator|)
block|,
operator|(
literal|0x007E0000
operator|)
block|,
operator|(
literal|0x007F0000
operator|)
block|,
operator|(
literal|0x007F8000
operator|)
block|,
operator|(
literal|0x007FC000
operator|)
block|,
operator|(
literal|0x007FE000
operator|)
block|,
operator|(
literal|0x007FF000
operator|)
block|,
operator|(
literal|0x007FF800
operator|)
block|,
operator|(
literal|0x007FFC00
operator|)
block|,
operator|(
literal|0x007FFE00
operator|)
block|,
operator|(
literal|0x007FFF00
operator|)
block|,
operator|(
literal|0x007FFF80
operator|)
block|,
operator|(
literal|0x007FFFC0
operator|)
block|,
operator|(
literal|0x007FFFE0
operator|)
block|,
operator|(
literal|0x007FFFF0
operator|)
block|,
operator|(
literal|0x007FFFF8
operator|)
block|,
operator|(
literal|0x007FFFFC
operator|)
block|,
operator|(
literal|0x007FFFFE
operator|)
block|,
operator|(
literal|0x007FFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00200000
operator|)
block|,
operator|(
literal|0x00300000
operator|)
block|,
operator|(
literal|0x00380000
operator|)
block|,
operator|(
literal|0x003C0000
operator|)
block|,
operator|(
literal|0x003E0000
operator|)
block|,
operator|(
literal|0x003F0000
operator|)
block|,
operator|(
literal|0x003F8000
operator|)
block|,
operator|(
literal|0x003FC000
operator|)
block|,
operator|(
literal|0x003FE000
operator|)
block|,
operator|(
literal|0x003FF000
operator|)
block|,
operator|(
literal|0x003FF800
operator|)
block|,
operator|(
literal|0x003FFC00
operator|)
block|,
operator|(
literal|0x003FFE00
operator|)
block|,
operator|(
literal|0x003FFF00
operator|)
block|,
operator|(
literal|0x003FFF80
operator|)
block|,
operator|(
literal|0x003FFFC0
operator|)
block|,
operator|(
literal|0x003FFFE0
operator|)
block|,
operator|(
literal|0x003FFFF0
operator|)
block|,
operator|(
literal|0x003FFFF8
operator|)
block|,
operator|(
literal|0x003FFFFC
operator|)
block|,
operator|(
literal|0x003FFFFE
operator|)
block|,
operator|(
literal|0x003FFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00100000
operator|)
block|,
operator|(
literal|0x00180000
operator|)
block|,
operator|(
literal|0x001C0000
operator|)
block|,
operator|(
literal|0x001E0000
operator|)
block|,
operator|(
literal|0x001F0000
operator|)
block|,
operator|(
literal|0x001F8000
operator|)
block|,
operator|(
literal|0x001FC000
operator|)
block|,
operator|(
literal|0x001FE000
operator|)
block|,
operator|(
literal|0x001FF000
operator|)
block|,
operator|(
literal|0x001FF800
operator|)
block|,
operator|(
literal|0x001FFC00
operator|)
block|,
operator|(
literal|0x001FFE00
operator|)
block|,
operator|(
literal|0x001FFF00
operator|)
block|,
operator|(
literal|0x001FFF80
operator|)
block|,
operator|(
literal|0x001FFFC0
operator|)
block|,
operator|(
literal|0x001FFFE0
operator|)
block|,
operator|(
literal|0x001FFFF0
operator|)
block|,
operator|(
literal|0x001FFFF8
operator|)
block|,
operator|(
literal|0x001FFFFC
operator|)
block|,
operator|(
literal|0x001FFFFE
operator|)
block|,
operator|(
literal|0x001FFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00080000
operator|)
block|,
operator|(
literal|0x000C0000
operator|)
block|,
operator|(
literal|0x000E0000
operator|)
block|,
operator|(
literal|0x000F0000
operator|)
block|,
operator|(
literal|0x000F8000
operator|)
block|,
operator|(
literal|0x000FC000
operator|)
block|,
operator|(
literal|0x000FE000
operator|)
block|,
operator|(
literal|0x000FF000
operator|)
block|,
operator|(
literal|0x000FF800
operator|)
block|,
operator|(
literal|0x000FFC00
operator|)
block|,
operator|(
literal|0x000FFE00
operator|)
block|,
operator|(
literal|0x000FFF00
operator|)
block|,
operator|(
literal|0x000FFF80
operator|)
block|,
operator|(
literal|0x000FFFC0
operator|)
block|,
operator|(
literal|0x000FFFE0
operator|)
block|,
operator|(
literal|0x000FFFF0
operator|)
block|,
operator|(
literal|0x000FFFF8
operator|)
block|,
operator|(
literal|0x000FFFFC
operator|)
block|,
operator|(
literal|0x000FFFFE
operator|)
block|,
operator|(
literal|0x000FFFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00040000
operator|)
block|,
operator|(
literal|0x00060000
operator|)
block|,
operator|(
literal|0x00070000
operator|)
block|,
operator|(
literal|0x00078000
operator|)
block|,
operator|(
literal|0x0007C000
operator|)
block|,
operator|(
literal|0x0007E000
operator|)
block|,
operator|(
literal|0x0007F000
operator|)
block|,
operator|(
literal|0x0007F800
operator|)
block|,
operator|(
literal|0x0007FC00
operator|)
block|,
operator|(
literal|0x0007FE00
operator|)
block|,
operator|(
literal|0x0007FF00
operator|)
block|,
operator|(
literal|0x0007FF80
operator|)
block|,
operator|(
literal|0x0007FFC0
operator|)
block|,
operator|(
literal|0x0007FFE0
operator|)
block|,
operator|(
literal|0x0007FFF0
operator|)
block|,
operator|(
literal|0x0007FFF8
operator|)
block|,
operator|(
literal|0x0007FFFC
operator|)
block|,
operator|(
literal|0x0007FFFE
operator|)
block|,
operator|(
literal|0x0007FFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00020000
operator|)
block|,
operator|(
literal|0x00030000
operator|)
block|,
operator|(
literal|0x00038000
operator|)
block|,
operator|(
literal|0x0003C000
operator|)
block|,
operator|(
literal|0x0003E000
operator|)
block|,
operator|(
literal|0x0003F000
operator|)
block|,
operator|(
literal|0x0003F800
operator|)
block|,
operator|(
literal|0x0003FC00
operator|)
block|,
operator|(
literal|0x0003FE00
operator|)
block|,
operator|(
literal|0x0003FF00
operator|)
block|,
operator|(
literal|0x0003FF80
operator|)
block|,
operator|(
literal|0x0003FFC0
operator|)
block|,
operator|(
literal|0x0003FFE0
operator|)
block|,
operator|(
literal|0x0003FFF0
operator|)
block|,
operator|(
literal|0x0003FFF8
operator|)
block|,
operator|(
literal|0x0003FFFC
operator|)
block|,
operator|(
literal|0x0003FFFE
operator|)
block|,
operator|(
literal|0x0003FFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00010000
operator|)
block|,
operator|(
literal|0x00018000
operator|)
block|,
operator|(
literal|0x0001C000
operator|)
block|,
operator|(
literal|0x0001E000
operator|)
block|,
operator|(
literal|0x0001F000
operator|)
block|,
operator|(
literal|0x0001F800
operator|)
block|,
operator|(
literal|0x0001FC00
operator|)
block|,
operator|(
literal|0x0001FE00
operator|)
block|,
operator|(
literal|0x0001FF00
operator|)
block|,
operator|(
literal|0x0001FF80
operator|)
block|,
operator|(
literal|0x0001FFC0
operator|)
block|,
operator|(
literal|0x0001FFE0
operator|)
block|,
operator|(
literal|0x0001FFF0
operator|)
block|,
operator|(
literal|0x0001FFF8
operator|)
block|,
operator|(
literal|0x0001FFFC
operator|)
block|,
operator|(
literal|0x0001FFFE
operator|)
block|,
operator|(
literal|0x0001FFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00008000
operator|)
block|,
operator|(
literal|0x0000C000
operator|)
block|,
operator|(
literal|0x0000E000
operator|)
block|,
operator|(
literal|0x0000F000
operator|)
block|,
operator|(
literal|0x0000F800
operator|)
block|,
operator|(
literal|0x0000FC00
operator|)
block|,
operator|(
literal|0x0000FE00
operator|)
block|,
operator|(
literal|0x0000FF00
operator|)
block|,
operator|(
literal|0x0000FF80
operator|)
block|,
operator|(
literal|0x0000FFC0
operator|)
block|,
operator|(
literal|0x0000FFE0
operator|)
block|,
operator|(
literal|0x0000FFF0
operator|)
block|,
operator|(
literal|0x0000FFF8
operator|)
block|,
operator|(
literal|0x0000FFFC
operator|)
block|,
operator|(
literal|0x0000FFFE
operator|)
block|,
operator|(
literal|0x0000FFFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00004000
operator|)
block|,
operator|(
literal|0x00006000
operator|)
block|,
operator|(
literal|0x00007000
operator|)
block|,
operator|(
literal|0x00007800
operator|)
block|,
operator|(
literal|0x00007C00
operator|)
block|,
operator|(
literal|0x00007E00
operator|)
block|,
operator|(
literal|0x00007F00
operator|)
block|,
operator|(
literal|0x00007F80
operator|)
block|,
operator|(
literal|0x00007FC0
operator|)
block|,
operator|(
literal|0x00007FE0
operator|)
block|,
operator|(
literal|0x00007FF0
operator|)
block|,
operator|(
literal|0x00007FF8
operator|)
block|,
operator|(
literal|0x00007FFC
operator|)
block|,
operator|(
literal|0x00007FFE
operator|)
block|,
operator|(
literal|0x00007FFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00002000
operator|)
block|,
operator|(
literal|0x00003000
operator|)
block|,
operator|(
literal|0x00003800
operator|)
block|,
operator|(
literal|0x00003C00
operator|)
block|,
operator|(
literal|0x00003E00
operator|)
block|,
operator|(
literal|0x00003F00
operator|)
block|,
operator|(
literal|0x00003F80
operator|)
block|,
operator|(
literal|0x00003FC0
operator|)
block|,
operator|(
literal|0x00003FE0
operator|)
block|,
operator|(
literal|0x00003FF0
operator|)
block|,
operator|(
literal|0x00003FF8
operator|)
block|,
operator|(
literal|0x00003FFC
operator|)
block|,
operator|(
literal|0x00003FFE
operator|)
block|,
operator|(
literal|0x00003FFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00001000
operator|)
block|,
operator|(
literal|0x00001800
operator|)
block|,
operator|(
literal|0x00001C00
operator|)
block|,
operator|(
literal|0x00001E00
operator|)
block|,
operator|(
literal|0x00001F00
operator|)
block|,
operator|(
literal|0x00001F80
operator|)
block|,
operator|(
literal|0x00001FC0
operator|)
block|,
operator|(
literal|0x00001FE0
operator|)
block|,
operator|(
literal|0x00001FF0
operator|)
block|,
operator|(
literal|0x00001FF8
operator|)
block|,
operator|(
literal|0x00001FFC
operator|)
block|,
operator|(
literal|0x00001FFE
operator|)
block|,
operator|(
literal|0x00001FFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000800
operator|)
block|,
operator|(
literal|0x00000C00
operator|)
block|,
operator|(
literal|0x00000E00
operator|)
block|,
operator|(
literal|0x00000F00
operator|)
block|,
operator|(
literal|0x00000F80
operator|)
block|,
operator|(
literal|0x00000FC0
operator|)
block|,
operator|(
literal|0x00000FE0
operator|)
block|,
operator|(
literal|0x00000FF0
operator|)
block|,
operator|(
literal|0x00000FF8
operator|)
block|,
operator|(
literal|0x00000FFC
operator|)
block|,
operator|(
literal|0x00000FFE
operator|)
block|,
operator|(
literal|0x00000FFF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000400
operator|)
block|,
operator|(
literal|0x00000600
operator|)
block|,
operator|(
literal|0x00000700
operator|)
block|,
operator|(
literal|0x00000780
operator|)
block|,
operator|(
literal|0x000007C0
operator|)
block|,
operator|(
literal|0x000007E0
operator|)
block|,
operator|(
literal|0x000007F0
operator|)
block|,
operator|(
literal|0x000007F8
operator|)
block|,
operator|(
literal|0x000007FC
operator|)
block|,
operator|(
literal|0x000007FE
operator|)
block|,
operator|(
literal|0x000007FF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000200
operator|)
block|,
operator|(
literal|0x00000300
operator|)
block|,
operator|(
literal|0x00000380
operator|)
block|,
operator|(
literal|0x000003C0
operator|)
block|,
operator|(
literal|0x000003E0
operator|)
block|,
operator|(
literal|0x000003F0
operator|)
block|,
operator|(
literal|0x000003F8
operator|)
block|,
operator|(
literal|0x000003FC
operator|)
block|,
operator|(
literal|0x000003FE
operator|)
block|,
operator|(
literal|0x000003FF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000100
operator|)
block|,
operator|(
literal|0x00000180
operator|)
block|,
operator|(
literal|0x000001C0
operator|)
block|,
operator|(
literal|0x000001E0
operator|)
block|,
operator|(
literal|0x000001F0
operator|)
block|,
operator|(
literal|0x000001F8
operator|)
block|,
operator|(
literal|0x000001FC
operator|)
block|,
operator|(
literal|0x000001FE
operator|)
block|,
operator|(
literal|0x000001FF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000080
operator|)
block|,
operator|(
literal|0x000000C0
operator|)
block|,
operator|(
literal|0x000000E0
operator|)
block|,
operator|(
literal|0x000000F0
operator|)
block|,
operator|(
literal|0x000000F8
operator|)
block|,
operator|(
literal|0x000000FC
operator|)
block|,
operator|(
literal|0x000000FE
operator|)
block|,
operator|(
literal|0x000000FF
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000040
operator|)
block|,
operator|(
literal|0x00000060
operator|)
block|,
operator|(
literal|0x00000070
operator|)
block|,
operator|(
literal|0x00000078
operator|)
block|,
operator|(
literal|0x0000007C
operator|)
block|,
operator|(
literal|0x0000007E
operator|)
block|,
operator|(
literal|0x0000007F
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000020
operator|)
block|,
operator|(
literal|0x00000030
operator|)
block|,
operator|(
literal|0x00000038
operator|)
block|,
operator|(
literal|0x0000003C
operator|)
block|,
operator|(
literal|0x0000003E
operator|)
block|,
operator|(
literal|0x0000003F
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000010
operator|)
block|,
operator|(
literal|0x00000018
operator|)
block|,
operator|(
literal|0x0000001C
operator|)
block|,
operator|(
literal|0x0000001E
operator|)
block|,
operator|(
literal|0x0000001F
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000008
operator|)
block|,
operator|(
literal|0x0000000C
operator|)
block|,
operator|(
literal|0x0000000E
operator|)
block|,
operator|(
literal|0x0000000F
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000004
operator|)
block|,
operator|(
literal|0x00000006
operator|)
block|,
operator|(
literal|0x00000007
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000002
operator|)
block|,
operator|(
literal|0x00000003
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|,
block|{
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000001
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|,
operator|(
literal|0x00000000
operator|)
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_int
name|mfbmask32
index|[
literal|32
index|]
init|=
block|{
operator|(
literal|1
operator|<<
literal|31
operator|)
block|,
operator|(
literal|1
operator|<<
literal|30
operator|)
block|,
operator|(
literal|1
operator|<<
literal|29
operator|)
block|,
operator|(
literal|1
operator|<<
literal|28
operator|)
block|,
operator|(
literal|1
operator|<<
literal|27
operator|)
block|,
operator|(
literal|1
operator|<<
literal|26
operator|)
block|,
operator|(
literal|1
operator|<<
literal|25
operator|)
block|,
operator|(
literal|1
operator|<<
literal|24
operator|)
block|,
operator|(
literal|1
operator|<<
literal|23
operator|)
block|,
operator|(
literal|1
operator|<<
literal|22
operator|)
block|,
operator|(
literal|1
operator|<<
literal|21
operator|)
block|,
operator|(
literal|1
operator|<<
literal|20
operator|)
block|,
operator|(
literal|1
operator|<<
literal|19
operator|)
block|,
operator|(
literal|1
operator|<<
literal|18
operator|)
block|,
operator|(
literal|1
operator|<<
literal|17
operator|)
block|,
operator|(
literal|1
operator|<<
literal|16
operator|)
block|,
operator|(
literal|1
operator|<<
literal|15
operator|)
block|,
operator|(
literal|1
operator|<<
literal|14
operator|)
block|,
operator|(
literal|1
operator|<<
literal|13
operator|)
block|,
operator|(
literal|1
operator|<<
literal|12
operator|)
block|,
operator|(
literal|1
operator|<<
literal|11
operator|)
block|,
operator|(
literal|1
operator|<<
literal|10
operator|)
block|,
operator|(
literal|1
operator|<<
literal|9
operator|)
block|,
operator|(
literal|1
operator|<<
literal|8
operator|)
block|,
operator|(
literal|1
operator|<<
literal|7
operator|)
block|,
operator|(
literal|1
operator|<<
literal|6
operator|)
block|,
operator|(
literal|1
operator|<<
literal|5
operator|)
block|,
operator|(
literal|1
operator|<<
literal|4
operator|)
block|,
operator|(
literal|1
operator|<<
literal|3
operator|)
block|,
operator|(
literal|1
operator|<<
literal|2
operator|)
block|,
operator|(
literal|1
operator|<<
literal|1
operator|)
block|,
operator|(
literal|1
operator|<<
literal|0
operator|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|u_int
name|mfbrmask32
index|[
literal|32
index|]
init|=
block|{
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|31
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|30
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|29
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|28
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|27
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|26
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|25
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|24
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|23
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|22
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|21
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|20
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|19
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|18
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|17
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|16
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|15
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|14
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|13
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|12
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|11
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|10
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|9
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|8
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|7
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|6
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|5
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|4
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|3
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|2
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|1
operator|)
block|,
literal|0xffffffff
operator|^
operator|(
literal|1
operator|<<
literal|0
operator|)
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|mergeRopRec
name|mergeRopBits
index|[
literal|16
index|]
init|=
block|{
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* BF_0		0 */
operator|~
literal|0
block|,
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* BF_SDA	src& dst */
operator|~
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
comment|/* BF_SDIA	src& ~dst */
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
comment|/* BF_S		src */
operator|~
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* BF_SIDA	~src& dst */
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
literal|0
block|,
comment|/* BF_D		dst */
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
comment|/* BF_SDX	src ^ dst */
operator|~
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
comment|/* BF_SDO	src | dst */
operator|~
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_SDOI	~(src | dst) */
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_SDXI	~(src ^ dst) */
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_DI	~dst */
operator|~
literal|0
block|,
operator|~
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_SDIO	src | ~dst */
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_SI	~src */
operator|~
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_SIDO	~src | dst */
operator|~
literal|0
block|,
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_SDAI	~(src& dst) */
literal|0
block|,
literal|0
block|,
literal|0
block|,
operator|~
literal|0
block|,
comment|/* BF_1		1 */
block|}
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|Duff
parameter_list|(
name|counter
parameter_list|,
name|block
parameter_list|)
value|{ \ 	switch (counter& 7) { \ 	case 7: { block; } \ 	case 6: { block; } \ 	case 5: { block; } \ 	case 4: { block; } \ 	case 3: { block; } \ 	case 2: { block; } \ 	case 1: { block; } \ 	case 0:; \ 	} \ 	while ((counter -= 8)>= 0) { \ 		{ block; } \ 		{ block; } \ 		{ block; } \ 		{ block; } \ 		{ block; } \ 		{ block; } \ 		{ block; } \ 		{ block; } \ 	} \ }
end_define

begin_ifdef
ifdef|#
directive|ifdef
name|mc68020
end_ifdef

begin_define
define|#
directive|define
name|Duff_plus
parameter_list|(
name|n
parameter_list|,
name|dst
parameter_list|,
name|src
parameter_list|,
name|op
parameter_list|)
value|{ \ 	switch ((n)& 7) { \ 	case 7: \ 		*(dst)++ op *(src)++; \ 	case 6: \ 		*(dst)++ op *(src)++; \ 	case 5: \ 		*(dst)++ op *(src)++; \ 	case 4: \ 		*(dst)++ op *(src)++; \ 	case 3: \ 		*(dst)++ op *(src)++; \ 	case 2: \ 		*(dst)++ op *(src)++; \ 	case 1: \ 		*(dst)++ op *(src)++; \ 	} \ 	while (((n) -= 8)>= 0) { \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 		*(dst)++ op *(src)++; \ 	} \ } \  #define Duff_minus(n, dst, src, op) { \ 	switch ((n)& 7) { \ 	case 7: \ 		*--(dst) op *--(src); \ 	case 6: \ 		*--(dst) op *--(src); \ 	case 5: \ 		*--(dst) op *--(src); \ 	case 4: \ 		*--(dst) op *--(src); \ 	case 3: \ 		*--(dst) op *--(src); \ 	case 2: \ 		*--(dst) op *--(src); \ 	case 1: \ 		*--(dst) op *--(src); \ 	} \ 	while (((n) -= 8)>= 0) { \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 		*--(dst) op *--(src); \ 	} \ }
end_define

begin_define
define|#
directive|define
name|Duff_shift_plus
parameter_list|(
name|n
parameter_list|,
name|dst
parameter_list|,
name|src
parameter_list|,
name|op
parameter_list|)
value|{ \ 	switch ((n)& 3) { \ 	case 3: \ 		bits = *(src)++; \ 		*(dst)++ op (bits1<< leftShift) | (bits>> rightShift); \ 	case 2: \ 		bits1 = *(src)++; \ 		*(dst)++ op (bits<< leftShift) | (bits1>> rightShift); \ 	case 1: \ 		bits = *(src)++; \ 		*(dst)++ op (bits1<< leftShift) | (bits>> rightShift); \ 	} \ 	while (((n) -= 4)>= 0) { \ 		bits1 = *(src)++; \ 		*(dst)++ op (bits<< leftShift) | (bits1>> rightShift); \ 		bits = *(src)++; \ 		*(dst)++ op (bits1<< leftShift) | (bits>> rightShift); \ 		bits1 = *(src)++; \ 		*(dst)++ op (bits<< leftShift) | (bits1>> rightShift); \ 		bits = *(src)++; \ 		*(dst)++ op (bits1<< leftShift) | (bits>> rightShift); \ 	} \ }
end_define

begin_define
define|#
directive|define
name|Duff_shift_minus
parameter_list|(
name|n
parameter_list|,
name|dst
parameter_list|,
name|src
parameter_list|,
name|op
parameter_list|)
value|{ \ 	switch ((n)& 3) { \ 	case 3: \ 		bits = *--(src); \ 		*--(dst) op ((bits1>> rightShift) | (bits<< leftShift)); \ 	case 2: \ 		bits1 = *--(src); \ 		*--(dst) op ((bits>> rightShift) | (bits1<< leftShift)); \ 	case 1: \ 		bits = *--(src); \ 		*--(dst) op ((bits1>> rightShift) | (bits<< leftShift)); \ 	} \ 	while (((n) -= 4)>= 0) { \ 		bits1 = *--(src); \ 		*--(dst) op ((bits>> rightShift) | (bits1<< leftShift)); \ 		bits = *--(src); \ 		*--(dst) op ((bits1>> rightShift) | (bits<< leftShift)); \ 		bits1 = *--(src); \ 		*--(dst) op ((bits>> rightShift) | (bits1<< leftShift)); \ 		bits = *--(src); \ 		*--(dst) op ((bits1>> rightShift) | (bits<< leftShift)); \ 	} \ }
end_define

begin_define
define|#
directive|define
name|Duff_single
parameter_list|(
name|nlw
parameter_list|,
name|addr
parameter_list|,
name|op
parameter_list|)
value|{ \ 	switch ((nlw)& 7) { \ 	case 7: \ 		*(addr)++ op ; \ 	case 6: \ 		*(addr)++ op ; \ 	case 5: \ 		*(addr)++ op ; \ 	case 4: \ 		*(addr)++ op ; \ 	case 3: \ 		*(addr)++ op ; \ 	case 2: \ 		*(addr)++ op ; \ 	case 1: \ 		*(addr)++ op ; \ 	} \ 	while (((nlw) -= 8)>= 0) { \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 		*(addr)++ op ; \ 	} \ }
end_define

begin_else
else|#
directive|else
end_else

begin_comment
comment|/* mc68020 */
end_comment

begin_define
define|#
directive|define
name|Duff_plus
parameter_list|(
name|n
parameter_list|,
name|dst
parameter_list|,
name|src
parameter_list|,
name|op
parameter_list|)
value|{ \ 	(src) += (n)& 7; \ 	(dst) += (n)& 7; \ 	switch ((n)& 7) { \ 	case 7: \ 		(dst)[-7] op (src)[-7]; \ 	case 6: \ 		(dst)[-6] op (src)[-6]; \ 	case 5: \ 		(dst)[-5] op (src)[-5]; \ 	case 4: \ 		(dst)[-4] op (src)[-4]; \ 	case 3: \ 		(dst)[-3] op (src)[-3]; \ 	case 2: \ 		(dst)[-2] op (src)[-2]; \ 	case 1: \ 		(dst)[-1] op (src)[-1]; \ 	} \ 	while (((n) -= 8)>= 0) { \ 		(dst) += 8; \ 		(src) += 8; \ 		(dst)[-8] op (src)[-8]; \ 		(dst)[-7] op (src)[-7]; \ 		(dst)[-6] op (src)[-6]; \ 		(dst)[-5] op (src)[-5]; \ 		(dst)[-4] op (src)[-4]; \ 		(dst)[-3] op (src)[-3]; \ 		(dst)[-2] op (src)[-2]; \ 		(dst)[-1] op (src)[-1]; \ 	} \ } \  #define Duff_minus(n, dst, src, op) { \ 	(src) -= (n)& 7; \ 	(dst) -= (n)& 7; \ 	switch ((n)& 7) { \ 	case 7: \ 		(dst)[7-1] op (src)[7-1]; \ 	case 6: \ 		(dst)[6-1] op (src)[6-1]; \ 	case 5: \ 		(dst)[5-1] op (src)[5-1]; \ 	case 4: \ 		(dst)[4-1] op (src)[4-1]; \ 	case 3: \ 		(dst)[3-1] op (src)[3-1]; \ 	case 2: \ 		(dst)[2-1] op (src)[2-1]; \ 	case 1: \ 		(dst)[1-1] op (src)[1-1]; \ 	} \ 	while (((n) -= 8)>= 0) { \ 		(dst) -= 8; \ 		(src) -= 8; \ 		(dst)[8-1] op (src)[8-1]; \ 		(dst)[7-1] op (src)[7-1]; \ 		(dst)[6-1] op (src)[6-1]; \ 		(dst)[5-1] op (src)[5-1]; \ 		(dst)[4-1] op (src)[4-1]; \ 		(dst)[3-1] op (src)[3-1]; \ 		(dst)[2-1] op (src)[2-1]; \ 		(dst)[1-1] op (src)[1-1]; \ 	} \ }
end_define

begin_define
define|#
directive|define
name|Duff_shift_plus
parameter_list|(
name|n
parameter_list|,
name|dst
parameter_list|,
name|src
parameter_list|,
name|op
parameter_list|)
value|{ \ 	(src) += (n)& 7; \ 	(dst) += (n)& 7; \ 	switch ((n)& 7) { \ 	case 7: \ 		bits = (src)[-7]; \ 		(dst)[-7] op (bits1<< leftShift) | (bits>> rightShift); \ 	case 6: \ 		bits1 = (src)[-6]; \ 		(dst)[-6] op (bits<< leftShift) | (bits1>> rightShift); \ 	case 5: \ 		bits = (src)[-5]; \ 		(dst)[-5] op (bits1<< leftShift) | (bits>> rightShift); \ 	case 4: \ 		bits1 = (src)[-4]; \ 		(dst)[-4] op (bits<< leftShift) | (bits1>> rightShift); \ 	case 3: \ 		bits = (src)[-3]; \ 		(dst)[-3] op (bits1<< leftShift) | (bits>> rightShift); \ 	case 2: \ 		bits1 = (src)[-2]; \ 		(dst)[-2] op (bits<< leftShift) | (bits1>> rightShift); \ 	case 1: \ 		bits = (src)[-1]; \ 		(dst)[-1] op (bits1<< leftShift) | (bits>> rightShift); \ 	} \ 	while (((n) -= 8)>= 0) { \ 		(dst) += 8; \ 		(src) += 8; \ 		bits1 = (src)[-8]; \ 		(dst)[-8] op (bits<< leftShift) | (bits1>> rightShift); \ 		bits = (src)[-7]; \ 		(dst)[-7] op (bits1<< leftShift) | (bits>> rightShift); \ 		bits1 = (src)[-6]; \ 		(dst)[-6] op (bits<< leftShift) | (bits1>> rightShift); \ 		bits = (src)[-5]; \ 		(dst)[-5] op (bits1<< leftShift) | (bits>> rightShift); \ 		bits1 = (src)[-4]; \ 		(dst)[-4] op (bits<< leftShift) | (bits1>> rightShift); \ 		bits = (src)[-3]; \ 		(dst)[-3] op (bits1<< leftShift) | (bits>> rightShift); \ 		bits1 = (src)[-2]; \ 		(dst)[-2] op (bits<< leftShift) | (bits1>> rightShift); \ 		bits = (src)[-1]; \ 		(dst)[-1] op (bits1<< leftShift) | (bits>> rightShift); \ 	} \ }
end_define

begin_define
define|#
directive|define
name|Duff_shift_minus
parameter_list|(
name|n
parameter_list|,
name|dst
parameter_list|,
name|src
parameter_list|,
name|op
parameter_list|)
value|{ \ 	(src) -= (n)& 7; \ 	(dst) -= (n)& 7; \ 	switch ((n)& 7) { \ 	case 7: \ 		bits = (src)[7-1]; \ 		(dst)[7-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 	case 6: \ 		bits1 = (src)[6-1]; \ 		(dst)[6-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 	case 5: \ 		bits = (src)[5-1]; \ 		(dst)[5-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 	case 4: \ 		bits1 = (src)[4-1]; \ 		(dst)[4-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 	case 3: \ 		bits = (src)[3-1]; \ 		(dst)[3-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 	case 2: \ 		bits1 = (src)[2-1]; \ 		(dst)[2-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 	case 1: \ 		bits = (src)[1-1]; \ 		(dst)[1-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 	} \ 	while (((n) -= 8)>= 0) { \ 		(dst) -= 8; \ 		(src) -= 8; \ 		bits1 = (src)[8-1]; \ 		(dst)[8-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 		bits = (src)[7-1]; \ 		(dst)[7-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 		bits1 = (src)[6-1]; \ 		(dst)[6-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 		bits = (src)[5-1]; \ 		(dst)[5-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 		bits1 = (src)[4-1]; \ 		(dst)[4-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 		bits = (src)[3-1]; \ 		(dst)[3-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 		bits1 = (src)[2-1]; \ 		(dst)[2-1] op ((bits>> rightShift) | (bits1<< leftShift)); \ 		bits = (src)[1-1]; \ 		(dst)[1-1] op ((bits1>> rightShift) | (bits<< leftShift)); \ 	} \ }
end_define

begin_define
define|#
directive|define
name|Duff_single
parameter_list|(
name|nlw
parameter_list|,
name|addr
parameter_list|,
name|op
parameter_list|)
value|{ \ 	(addr) += (nlw)& 7; \ 	switch ((nlw)& 7) { \ 	case 7: \ 		(addr)[-7] op; \ 	case 6: \ 		(addr)[-6] op; \ 	case 5: \ 		(addr)[-5] op; \ 	case 4: \ 		(addr)[-4] op; \ 	case 3: \ 		(addr)[-3] op; \ 	case 2: \ 		(addr)[-2] op; \ 	case 1: \ 		(addr)[-1] op; \ 	} \ 	while (((nlw) -= 8)>= 0) { \ 		(addr) += 8; \ 		(addr)[-8] op; \ 		(addr)[-7] op; \ 		(addr)[-6] op; \ 		(addr)[-5] op; \ 		(addr)[-4] op; \ 		(addr)[-3] op; \ 		(addr)[-2] op; \ 		(addr)[-1] op; \ 	} \ }
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* mc68020 */
end_comment

begin_function
name|void
name|mfb_copy_area32
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_int
modifier|*
name|addrSrc
decl_stmt|;
name|u_int
modifier|*
name|addrDst
decl_stmt|;
name|u_int
name|widthSrc
decl_stmt|;
name|u_int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_int
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_int
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_int
name|bits
decl_stmt|;
name|u_int
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|+
name|w
operator|<=
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
name|psrc
operator|++
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
name|endmask
operator|<<
name|rightShift
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|pdst
operator|--
expr_stmt|;
name|psrc
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|--
name|pdst
expr_stmt|;
operator|--
name|psrc
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
name|pdst
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|--
name|pdst
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_copyinv_area32
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_int
modifier|*
name|addrSrc
decl_stmt|;
name|u_int
modifier|*
name|addrDst
decl_stmt|;
name|int
name|widthSrc
decl_stmt|;
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_int
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_int
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_int
name|bits
decl_stmt|;
name|u_int
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|+
name|w
operator|<=
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
name|psrc
operator|++
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
name|endmask
operator|<<
name|rightShift
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|pdst
operator|--
expr_stmt|;
name|psrc
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|--
name|pdst
expr_stmt|;
operator|--
name|psrc
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
name|pdst
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|--
name|pdst
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_or_area32
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_int
modifier|*
name|addrSrc
decl_stmt|;
name|u_int
modifier|*
name|addrDst
decl_stmt|;
name|int
name|widthSrc
decl_stmt|;
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_int
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_int
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_int
name|bits
decl_stmt|;
name|u_int
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|+
name|w
operator|<=
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|++
operator||=
operator|*
name|psrc
operator|++
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator||=
operator|*
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|++
operator||=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
name|endmask
operator|<<
name|rightShift
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator||=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator||=
operator|*
operator|--
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator||=
operator|*
operator|--
name|psrc
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
operator|*
operator|--
name|pdst
operator||=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|*
operator|--
name|pdst
operator||=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_xor_area32
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_int
modifier|*
name|addrSrc
decl_stmt|;
name|u_int
modifier|*
name|addrDst
decl_stmt|;
name|int
name|widthSrc
decl_stmt|;
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_int
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_int
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_int
name|bits
decl_stmt|;
name|u_int
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|+
name|w
operator|<=
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|++
operator|^=
operator|*
name|psrc
operator|++
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|^=
operator|*
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|++
operator|^=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
name|endmask
operator|<<
name|rightShift
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator|^=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator|^=
operator|*
operator|--
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator|^=
operator|*
operator|--
name|psrc
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
operator|*
operator|--
name|pdst
operator|^=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|*
operator|--
name|pdst
operator|^=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_general_area32
parameter_list|(
name|func
parameter_list|,
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|int
name|func
decl_stmt|;
name|u_int
modifier|*
name|addrSrc
decl_stmt|;
name|u_int
modifier|*
name|addrDst
decl_stmt|;
name|int
name|widthSrc
decl_stmt|;
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_int
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_int
name|bits
decl_stmt|;
name|u_int
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
name|u_int
name|_ca1
decl_stmt|,
name|_cx1
decl_stmt|,
name|_ca2
decl_stmt|,
name|_cx2
decl_stmt|;
name|u_int
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
name|_ca1
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|ca1
expr_stmt|;
name|_cx1
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|cx1
expr_stmt|;
name|_ca2
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|ca2
expr_stmt|;
name|_cx2
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|cx2
expr_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|+
name|w
operator|<=
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|dp
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0x1f
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
name|psrc
operator|++
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
name|Duff
argument_list|(
argument|nl
argument_list|,
argument|*pdst = DoMergeRop(*psrc, *pdst); 					  psrc++; pdst++
argument_list|)
empty_stmt|;
else|#
directive|else
comment|/* mc68020 */
name|psrc
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|7
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|6
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|5
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|4
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|3
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|2
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|+=
literal|8
expr_stmt|;
name|psrc
operator|+=
literal|8
expr_stmt|;
name|pdst
index|[
operator|-
literal|8
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|8
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|8
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|7
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|6
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|5
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|4
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|3
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|2
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|psrc
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|7
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|6
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|5
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|4
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|3
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|2
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|+=
literal|8
expr_stmt|;
name|psrc
operator|+=
literal|8
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|8
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|8
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|8
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|7
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|6
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|5
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|4
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|3
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|2
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
name|endmask
operator|<<
name|rightShift
condition|)
block|{
name|bits
operator|=
operator|*
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
block|}
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0x1f
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|5
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|pdst
operator|--
expr_stmt|;
name|psrc
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
name|Duff
argument_list|(
argument|nl
argument_list|,
argument|pdst--; psrc--;  					  *pdst = DoMergeRop(*psrc, *pdst)
argument_list|)
empty_stmt|;
else|#
directive|else
comment|/* mc68020 */
name|psrc
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|-=
literal|8
expr_stmt|;
name|psrc
operator|-=
literal|8
expr_stmt|;
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|8
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
name|startmask
condition|)
block|{
operator|--
name|pdst
expr_stmt|;
operator|--
name|psrc
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|32
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|32
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
name|pdst
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|psrc
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|bits
operator|=
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|bits1
operator|=
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|bits
operator|=
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|bits1
operator|=
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|bits
operator|=
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|bits1
operator|=
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|bits
operator|=
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|-=
literal|8
expr_stmt|;
name|psrc
operator|-=
literal|8
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|8
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
block|}
operator|--
name|pdst
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_clr_area32
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|w
parameter_list|,
name|h
parameter_list|,
name|addr
parameter_list|,
name|nlwidth
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|w
decl_stmt|;
specifier|register
name|int
name|h
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|nlwidth
decl_stmt|;
block|{
specifier|register
name|u_int
name|startmask
decl_stmt|;
name|u_int
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlw
decl_stmt|,
name|nlwExtra
decl_stmt|;
name|int
name|nlwMiddle
decl_stmt|;
name|int
name|startoff
decl_stmt|,
name|endoff
decl_stmt|;
name|addr
operator|+=
operator|(
name|y
operator|*
name|nlwidth
operator|+
operator|(
name|x
operator|>>
literal|5
operator|)
operator|)
expr_stmt|;
name|startoff
operator|=
name|x
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|startoff
operator|)
operator|+
name|w
operator|)
operator|<
literal|32
condition|)
block|{
name|startmask
operator|=
operator|~
name|mfbpartmasks32
index|[
name|startoff
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	lsl.l	#2,d4");
name|Duff
argument_list|(
argument|h
argument_list|,
argument|asm(
literal|"	and.l	d6,(a5)"
argument|); 			asm(
literal|"	adda.l	d4,a5"
argument|)
argument_list|)
else|#
directive|else
comment|/* mc68020 */
name|Duff
argument_list|(
argument|h
argument_list|,
argument|*addr&= startmask; addr += nlwExtra
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
return|return;
block|}
name|endoff
operator|=
operator|(
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
name|startoff
condition|)
block|{
name|startmask
operator|=
operator|~
name|mfbstarttab32
index|[
name|startoff
index|]
expr_stmt|;
name|nlwMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|startoff
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|endoff
condition|)
block|{
name|endmask
operator|=
operator|~
name|mfbendtab32
index|[
name|endoff
index|]
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|&=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
expr_stmt|;
operator|*
name|addr
operator|&=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|&=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
name|nlwMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
expr_stmt|;
if|if
condition|(
name|endoff
condition|)
block|{
name|endmask
operator|=
operator|~
name|mfbendtab32
index|[
name|endoff
index|]
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
expr_stmt|;
operator|*
name|addr
operator|&=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_inv_area32
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|w
parameter_list|,
name|h
parameter_list|,
name|addr
parameter_list|,
name|nlwidth
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|w
decl_stmt|;
specifier|register
name|int
name|h
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|nlwidth
decl_stmt|;
block|{
specifier|register
name|u_int
name|startmask
decl_stmt|;
name|u_int
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlw
decl_stmt|,
name|nlwExtra
decl_stmt|;
name|int
name|nlwMiddle
decl_stmt|;
name|int
name|startoff
decl_stmt|,
name|endoff
decl_stmt|;
name|addr
operator|+=
operator|(
name|y
operator|*
name|nlwidth
operator|+
operator|(
name|x
operator|>>
literal|5
operator|)
operator|)
expr_stmt|;
name|startoff
operator|=
name|x
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|startoff
operator|)
operator|+
name|w
operator|)
operator|<
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|startoff
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	lsl.l	#2,d4");
name|Duff
argument_list|(
argument|h
argument_list|,
argument|asm(
literal|"	eor.l	d6,(a5)"
argument|); 			asm(
literal|"	adda.l	d4,a5"
argument|)
argument_list|)
else|#
directive|else
comment|/* mc68020 */
name|Duff
argument_list|(
argument|h
argument_list|,
argument|*addr ^= startmask; addr += nlwExtra
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
return|return;
block|}
name|endoff
operator|=
operator|(
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
name|startoff
condition|)
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|startoff
index|]
expr_stmt|;
name|nlwMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|startoff
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|endoff
condition|)
block|{
name|endmask
operator|=
name|mfbendtab32
index|[
name|endoff
index|]
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|^=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
expr_stmt|;
operator|*
name|addr
operator|^=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|^=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
name|nlwMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
expr_stmt|;
if|if
condition|(
name|endoff
condition|)
block|{
name|endmask
operator|=
name|mfbendtab32
index|[
name|endoff
index|]
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
expr_stmt|;
operator|*
name|addr
operator|^=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_set_area32
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|w
parameter_list|,
name|h
parameter_list|,
name|addr
parameter_list|,
name|nlwidth
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|w
decl_stmt|;
specifier|register
name|int
name|h
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|nlwidth
decl_stmt|;
block|{
specifier|register
name|u_int
name|startmask
decl_stmt|;
name|u_int
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlw
decl_stmt|,
name|nlwExtra
decl_stmt|;
name|int
name|nlwMiddle
decl_stmt|;
name|int
name|startoff
decl_stmt|,
name|endoff
decl_stmt|;
name|addr
operator|+=
operator|(
name|y
operator|*
name|nlwidth
operator|+
operator|(
name|x
operator|>>
literal|5
operator|)
operator|)
expr_stmt|;
name|startoff
operator|=
name|x
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|startoff
operator|)
operator|+
name|w
operator|)
operator|<
literal|32
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks32
index|[
name|startoff
index|]
index|[
name|w
operator|&
literal|0x1f
index|]
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	lsl.l	#2,d4");
name|Duff
argument_list|(
argument|h
argument_list|,
argument|asm(
literal|"	or.l	d6,(a5)"
argument|); 			asm(
literal|"	adda.l	d4,a5"
argument|)
argument_list|)
else|#
directive|else
comment|/* mc68020 */
name|Duff
argument_list|(
argument|h
argument_list|,
argument|*addr |= startmask; addr += nlwExtra
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
return|return;
block|}
name|endoff
operator|=
operator|(
name|x
operator|+
name|w
operator|)
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
name|startoff
condition|)
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|startoff
index|]
expr_stmt|;
name|nlwMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|32
operator|-
operator|(
name|startoff
operator|)
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|endoff
condition|)
block|{
name|endmask
operator|=
name|mfbendtab32
index|[
name|endoff
index|]
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator||=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
expr_stmt|;
operator|*
name|addr
operator||=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator||=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
name|nlwMiddle
operator|=
name|w
operator|>>
literal|5
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
expr_stmt|;
if|if
condition|(
name|endoff
condition|)
block|{
name|endmask
operator|=
name|mfbendtab32
index|[
name|endoff
index|]
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
expr_stmt|;
operator|*
name|addr
operator||=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_copy_area16
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
name|u_short
modifier|*
name|addrDst
decl_stmt|;
name|u_int
name|widthSrc
decl_stmt|;
name|u_int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_short
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_short
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_short
name|bits
decl_stmt|;
name|u_short
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|<=
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
name|psrc
operator|++
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
operator|(
name|endmask
operator|<<
name|rightShift
operator|)
operator|&
literal|0xffff
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|pdst
operator|--
expr_stmt|;
name|psrc
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|--
name|pdst
expr_stmt|;
operator|--
name|psrc
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
name|pdst
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|--
name|pdst
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_copyinv_area16
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
name|u_short
modifier|*
name|addrDst
decl_stmt|;
specifier|register
name|int
name|widthSrc
decl_stmt|;
specifier|register
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_short
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_short
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_short
name|bits
decl_stmt|;
name|u_short
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|<=
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0xf
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
name|psrc
operator|++
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
operator|(
name|endmask
operator|<<
name|rightShift
operator|)
operator|&
literal|0xffff
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|pdst
operator|--
expr_stmt|;
name|psrc
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|--
name|pdst
expr_stmt|;
operator|--
name|psrc
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
operator|*
name|psrc
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
name|pdst
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|endmask
operator||
operator|~
name|bits1
operator|&
name|endmask
operator|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|=
operator|~
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|--
name|pdst
expr_stmt|;
operator|*
name|pdst
operator|=
operator|(
operator|*
name|pdst
operator|&
operator|~
name|startmask
operator||
operator|~
name|bits1
operator|&
name|startmask
operator|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_or_area16
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
name|u_short
modifier|*
name|addrDst
decl_stmt|;
specifier|register
name|int
name|widthSrc
decl_stmt|;
specifier|register
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_short
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_short
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_short
name|bits
decl_stmt|;
name|u_short
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|<=
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|++
operator||=
operator|*
name|psrc
operator|++
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator||=
operator|*
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|++
operator||=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
operator|(
name|endmask
operator|<<
name|rightShift
operator|)
operator|&
literal|0xffff
condition|)
block|{
name|bits1
operator||=
operator|*
name|psrc
operator|>>
name|rightShift
expr_stmt|;
block|}
operator|*
name|pdst
operator||=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator||=
operator|*
operator|--
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator||=
operator|*
operator|--
name|psrc
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
operator|*
operator|--
name|pdst
operator||=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator||=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
expr_stmt|;
block|}
operator|*
operator|--
name|pdst
operator||=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_xor_area16
parameter_list|(
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
name|u_short
modifier|*
name|addrDst
decl_stmt|;
name|int
name|widthSrc
decl_stmt|;
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_short
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
name|u_short
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_short
name|bits
decl_stmt|;
name|u_short
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|<=
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|++
operator|^=
operator|*
name|psrc
operator|++
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|^=
operator|*
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|++
operator|^=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_plus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
operator|(
name|endmask
operator|<<
name|rightShift
operator|)
operator|&
literal|0xffff
condition|)
block|{
name|bits1
operator||=
operator|(
operator|*
name|psrc
operator|>>
name|rightShift
operator|)
expr_stmt|;
block|}
operator|*
name|pdst
operator|^=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator|^=
operator|*
operator|--
name|psrc
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|Duff_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
operator|--
name|pdst
operator|^=
operator|*
operator|--
name|psrc
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
operator|*
operator|--
name|pdst
operator|^=
name|bits1
operator|&
name|endmask
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|Duff_shift_minus
argument_list|(
name|nl
argument_list|,
name|pdst
argument_list|,
name|psrc
argument_list|,
operator|^=
argument_list|)
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits1
operator||=
operator|(
operator|*
operator|--
name|psrc
operator|<<
name|leftShift
operator|)
expr_stmt|;
block|}
operator|*
operator|--
name|pdst
operator|^=
name|bits1
operator|&
name|startmask
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_general_area16
parameter_list|(
name|func
parameter_list|,
name|addrSrc
parameter_list|,
name|addrDst
parameter_list|,
name|widthSrc
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|int
name|func
decl_stmt|;
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
name|u_short
modifier|*
name|addrDst
decl_stmt|;
name|int
name|widthSrc
decl_stmt|;
name|int
name|widthDst
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_short
modifier|*
name|psrcLine
decl_stmt|,
modifier|*
name|psrc
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|pdstLine
decl_stmt|,
modifier|*
name|pdst
decl_stmt|;
specifier|register
name|int
name|leftShift
decl_stmt|,
name|rightShift
decl_stmt|;
name|u_short
name|bits
decl_stmt|;
name|u_short
name|bits1
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|;
name|u_short
name|_ca1
decl_stmt|,
name|_cx1
decl_stmt|,
name|_ca2
decl_stmt|,
name|_cx2
decl_stmt|;
name|u_short
name|startmask
decl_stmt|,
name|endmask
decl_stmt|;
name|int
name|w
decl_stmt|,
name|h
decl_stmt|;
name|int
name|xdir
decl_stmt|,
name|ydir
decl_stmt|;
specifier|register
name|int
name|nlMiddle
decl_stmt|;
name|int
name|xoffSrc
decl_stmt|,
name|xoffDst
decl_stmt|;
name|_ca1
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|ca1
expr_stmt|;
name|_cx1
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|cx1
expr_stmt|;
name|_ca2
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|ca2
expr_stmt|;
name|_cx2
operator|=
name|mergeRopBits
index|[
name|func
index|]
operator|.
name|cx2
expr_stmt|;
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|<
name|dp
operator|->
name|y
condition|)
block|{
name|ydir
operator|=
operator|-
literal|1
expr_stmt|;
name|widthSrc
operator|=
operator|-
name|widthSrc
expr_stmt|;
name|widthDst
operator|=
operator|-
name|widthDst
expr_stmt|;
block|}
else|else
block|{
name|ydir
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|<
name|dp
operator|->
name|x
condition|)
block|{
name|xdir
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|xdir
operator|=
literal|1
expr_stmt|;
block|}
name|w
operator|=
name|sr
operator|->
name|extent
operator|.
name|x
expr_stmt|;
name|h
operator|=
name|sr
operator|->
name|extent
operator|.
name|y
expr_stmt|;
if|if
condition|(
name|ydir
operator|==
operator|-
literal|1
condition|)
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
operator|(
name|dp
operator|->
name|y
operator|+
name|h
operator|-
literal|1
operator|)
operator|*
operator|-
name|widthDst
operator|)
expr_stmt|;
block|}
else|else
block|{
name|psrcLine
operator|=
name|addrSrc
operator|+
operator|(
name|sr
operator|->
name|origin
operator|.
name|y
operator|*
name|widthSrc
operator|)
expr_stmt|;
name|pdstLine
operator|=
name|addrDst
operator|+
operator|(
name|dp
operator|->
name|y
operator|*
name|widthDst
operator|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|<=
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
literal|0
expr_stmt|;
name|nlMiddle
operator|=
literal|0
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|dp
operator|->
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|dp
operator|->
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
block|}
if|if
condition|(
name|xdir
operator|==
literal|1
condition|)
block|{
name|xoffSrc
operator|=
name|sr
operator|->
name|origin
operator|.
name|x
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
name|dp
operator|->
name|x
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
name|dp
operator|->
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
name|psrcLine
operator|+=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|>>
literal|4
operator|)
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
name|psrc
operator|++
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|psrc
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|7
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|6
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|5
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|4
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|3
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|2
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|+=
literal|8
expr_stmt|;
name|psrc
operator|+=
literal|8
expr_stmt|;
name|pdst
index|[
operator|-
literal|8
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|8
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|8
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|7
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|6
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|5
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|4
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|3
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|2
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|endmask
condition|)
block|{
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
else|else
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|>
name|xoffDst
condition|)
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
name|bits
operator|=
operator|*
name|psrc
operator|++
expr_stmt|;
name|bits1
operator||=
name|bits
operator|>>
name|rightShift
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
name|pdst
operator|++
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|psrc
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|+=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|7
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|6
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|5
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|4
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|3
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|2
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|bits
operator|=
name|psrc
index|[
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|+=
literal|8
expr_stmt|;
name|psrc
operator|+=
literal|8
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|8
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|8
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|8
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|7
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|7
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|7
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|6
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|6
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|6
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|5
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|5
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|5
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|4
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|4
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|4
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|3
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|3
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|3
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
operator|-
literal|2
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|2
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|2
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator||
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|<<
name|leftShift
expr_stmt|;
if|if
condition|(
operator|(
name|endmask
operator|<<
name|rightShift
operator|)
operator|&
literal|0xffff
condition|)
block|{
name|bits
operator|=
operator|*
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
block|}
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
name|xoffSrc
operator|=
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|xoffDst
operator|=
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|&
literal|0xf
expr_stmt|;
name|pdstLine
operator|+=
operator|(
operator|(
name|dp
operator|->
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
name|psrcLine
operator|+=
operator|(
operator|(
name|sr
operator|->
name|origin
operator|.
name|x
operator|+
name|w
operator|-
literal|1
operator|)
operator|>>
literal|4
operator|)
operator|+
literal|1
expr_stmt|;
if|if
condition|(
name|xoffSrc
operator|==
name|xoffDst
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|pdst
operator|--
expr_stmt|;
name|psrc
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|psrc
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|-=
literal|8
expr_stmt|;
name|psrc
operator|-=
literal|8
expr_stmt|;
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|8
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|startmask
condition|)
block|{
operator|--
name|pdst
expr_stmt|;
operator|--
name|psrc
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
operator|*
name|psrc
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
block|{
name|rightShift
operator|=
name|xoffDst
operator|-
name|xoffSrc
expr_stmt|;
name|leftShift
operator|=
literal|16
operator|-
name|rightShift
expr_stmt|;
block|}
else|else
block|{
name|leftShift
operator|=
name|xoffSrc
operator|-
name|xoffDst
expr_stmt|;
name|rightShift
operator|=
literal|16
operator|-
name|leftShift
expr_stmt|;
block|}
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|psrc
operator|=
name|psrcLine
expr_stmt|;
name|pdst
operator|=
name|pdstLine
expr_stmt|;
name|psrcLine
operator|+=
name|widthSrc
expr_stmt|;
name|pdstLine
operator|+=
name|widthDst
expr_stmt|;
name|bits
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|xoffDst
operator|>
name|xoffSrc
condition|)
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
block|{
name|bits1
operator|=
name|bits
operator|>>
name|rightShift
expr_stmt|;
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
name|pdst
operator|--
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|endmask
argument_list|)
expr_stmt|;
block|}
name|nl
operator|=
name|nlMiddle
expr_stmt|;
name|bits1
operator|=
name|bits
expr_stmt|;
name|psrc
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
name|pdst
operator|-=
name|nl
operator|&
literal|7
expr_stmt|;
switch|switch
condition|(
name|nl
operator|&
literal|7
condition|)
block|{
case|case
literal|7
case|:
name|bits
operator|=
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|6
case|:
name|bits1
operator|=
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|5
case|:
name|bits
operator|=
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|4
case|:
name|bits1
operator|=
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|3
case|:
name|bits
operator|=
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|2
case|:
name|bits1
operator|=
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
case|case
literal|1
case|:
name|bits
operator|=
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|nl
operator|-=
literal|8
operator|)
operator|>=
literal|0
condition|)
block|{
name|pdst
operator|-=
literal|8
expr_stmt|;
name|psrc
operator|-=
literal|8
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|8
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|8
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|7
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|7
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|6
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|6
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|5
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|5
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|4
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|4
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|3
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|3
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits1
operator|=
name|psrc
index|[
literal|2
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits1
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|2
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
name|bits
operator|=
name|psrc
index|[
literal|1
operator|-
literal|1
index|]
expr_stmt|;
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
operator|=
name|DoMergeRop
argument_list|(
operator|(
operator|(
name|bits1
operator|>>
name|rightShift
operator|)
operator||
operator|(
name|bits
operator|<<
name|leftShift
operator|)
operator|)
argument_list|,
name|pdst
index|[
literal|1
operator|-
literal|1
index|]
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|startmask
condition|)
block|{
name|bits1
operator|=
operator|(
name|bits
operator|>>
name|rightShift
operator|)
expr_stmt|;
if|if
condition|(
name|startmask
operator|>>
name|leftShift
condition|)
block|{
name|bits
operator|=
operator|*
operator|--
name|psrc
expr_stmt|;
name|bits1
operator||=
operator|(
name|bits
operator|<<
name|leftShift
operator|)
expr_stmt|;
block|}
operator|--
name|pdst
expr_stmt|;
operator|*
name|pdst
operator|=
name|DoMergeRopMask
argument_list|(
name|bits1
argument_list|,
operator|*
name|pdst
argument_list|,
name|startmask
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_clr_area16
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|w
parameter_list|,
name|h
parameter_list|,
name|addr
parameter_list|,
name|nlwidth
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|w
decl_stmt|;
specifier|register
name|int
name|h
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|addr
decl_stmt|;
name|int
name|nlwidth
decl_stmt|;
block|{
specifier|register
name|u_short
name|startmask
decl_stmt|;
name|u_short
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlw
decl_stmt|,
name|nlwExtra
decl_stmt|;
name|int
name|nlwMiddle
decl_stmt|;
name|addr
operator|+=
operator|(
name|y
operator|*
name|nlwidth
operator|+
operator|(
name|x
operator|>>
literal|4
operator|)
operator|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|)
operator|<
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
expr_stmt|;
name|Duff
argument_list|(
argument|h
argument_list|,
argument|*addr&= ~startmask; addr += nlwExtra
argument_list|)
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlwMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlwMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
expr_stmt|;
if|if
condition|(
name|startmask
operator|&&
name|endmask
condition|)
block|{
name|startmask
operator|^=
operator|~
literal|0
expr_stmt|;
name|endmask
operator|^=
operator|~
literal|0
expr_stmt|;
name|nlwExtra
operator|-=
literal|1
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|&=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
operator|*
name|addr
operator|&=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|startmask
operator|&&
operator|!
name|endmask
condition|)
block|{
name|startmask
operator|^=
operator|~
literal|0
expr_stmt|;
name|nlwExtra
operator|-=
literal|1
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|&=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
argument|nlw
argument_list|,
argument|addr
argument_list|,
argument|=
literal|0
argument_list|)
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|startmask
operator|&&
name|endmask
condition|)
block|{
name|endmask
operator|^=
operator|~
literal|0
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
operator|*
name|addr
operator|&=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
argument|nlw
argument_list|,
argument|addr
argument_list|,
argument|=
literal|0
argument_list|)
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_inv_area16
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|w
parameter_list|,
name|h
parameter_list|,
name|addr
parameter_list|,
name|nlwidth
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|w
decl_stmt|;
specifier|register
name|int
name|h
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|addr
decl_stmt|;
name|int
name|nlwidth
decl_stmt|;
block|{
specifier|register
name|u_short
name|startmask
decl_stmt|;
name|u_short
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlw
decl_stmt|,
name|nlwExtra
decl_stmt|;
name|int
name|nlwMiddle
decl_stmt|;
name|addr
operator|+=
operator|(
name|y
operator|*
name|nlwidth
operator|+
operator|(
name|x
operator|>>
literal|4
operator|)
operator|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|)
operator|<
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
expr_stmt|;
name|Duff
argument_list|(
argument|h
argument_list|,
argument|*addr ^= startmask; addr += nlwExtra
argument_list|)
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlwMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlwMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
expr_stmt|;
if|if
condition|(
name|startmask
operator|&&
name|endmask
condition|)
block|{
name|nlwExtra
operator|-=
literal|1
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|^=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
operator|*
name|addr
operator|^=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|startmask
operator|&&
operator|!
name|endmask
condition|)
block|{
name|nlwExtra
operator|-=
literal|1
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator|^=
name|startmask
expr_stmt|;
name|Duff_single
argument_list|(
argument|nlw
argument_list|,
argument|addr
argument_list|,
argument|^= ~
literal|0
argument_list|)
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|startmask
operator|&&
name|endmask
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
operator|*
name|addr
operator|^=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
name|Duff_single
argument_list|(
argument|nlw
argument_list|,
argument|addr
argument_list|,
argument|^= ~
literal|0
argument_list|)
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_set_area16
parameter_list|(
name|x
parameter_list|,
name|y
parameter_list|,
name|w
parameter_list|,
name|h
parameter_list|,
name|addr
parameter_list|,
name|nlwidth
parameter_list|)
name|int
name|x
decl_stmt|;
name|int
name|y
decl_stmt|;
name|int
name|w
decl_stmt|;
specifier|register
name|int
name|h
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|addr
decl_stmt|;
name|int
name|nlwidth
decl_stmt|;
block|{
specifier|register
name|u_short
name|startmask
decl_stmt|;
name|u_short
name|endmask
decl_stmt|;
specifier|register
name|int
name|nlw
decl_stmt|,
name|nlwExtra
decl_stmt|;
name|int
name|nlwMiddle
decl_stmt|;
name|addr
operator|+=
operator|(
name|y
operator|*
name|nlwidth
operator|+
operator|(
name|x
operator|>>
literal|4
operator|)
operator|)
expr_stmt|;
if|if
condition|(
operator|(
operator|(
name|x
operator|&
literal|0xf
operator|)
operator|+
name|w
operator|)
operator|<
literal|16
condition|)
block|{
name|startmask
operator|=
name|mfbpartmasks16
index|[
name|x
operator|&
literal|0xf
index|]
index|[
name|w
operator|&
literal|0xf
index|]
expr_stmt|;
name|nlwExtra
operator|=
name|nlwidth
expr_stmt|;
name|Duff
argument_list|(
argument|h
argument_list|,
argument|*addr |= startmask; addr += nlwExtra
argument_list|)
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab16
index|[
name|x
operator|&
literal|0xf
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab16
index|[
operator|(
name|x
operator|+
name|w
operator|)
operator|&
literal|0xf
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nlwMiddle
operator|=
operator|(
name|w
operator|-
operator|(
literal|16
operator|-
operator|(
name|x
operator|&
literal|0xf
operator|)
operator|)
operator|)
operator|>>
literal|4
expr_stmt|;
block|}
else|else
block|{
name|nlwMiddle
operator|=
name|w
operator|>>
literal|4
expr_stmt|;
block|}
name|nlwExtra
operator|=
name|nlwidth
operator|-
name|nlwMiddle
expr_stmt|;
if|if
condition|(
name|startmask
operator|&&
name|endmask
condition|)
block|{
name|nlwExtra
operator|-=
literal|1
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator||=
name|startmask
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm(" move.w #-1,d3");
name|Duff
argument_list|(
argument|nlw
argument_list|,
argument|asm(
literal|" move.w d3,(a5)+"
argument|)
argument_list|)
else|#
directive|else
comment|/* mc68020 */
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
operator|*
name|addr
operator||=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
name|startmask
operator|&&
operator|!
name|endmask
condition|)
block|{
name|nlwExtra
operator|-=
literal|1
expr_stmt|;
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
operator|*
name|addr
operator|++
operator||=
name|startmask
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm(" move.w #-1,d3");
name|Duff
argument_list|(
name|nlw
argument_list|,
name|asm
argument_list|(
literal|" move.w d3,(a5)+"
argument_list|)
argument_list|)
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
name|Duff_single
argument_list|(
argument|nlw
argument_list|,
argument|addr
argument_list|,
argument|= ~
literal|0
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
elseif|else
if|if
condition|(
operator|!
name|startmask
operator|&&
name|endmask
condition|)
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm(" move.w #-1,d3");
name|Duff
argument_list|(
name|nlw
argument_list|,
name|asm
argument_list|(
literal|" move.w d3,(a5)+"
argument_list|)
argument_list|)
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
name|Duff_single
argument_list|(
name|nlw
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
operator|*
name|addr
operator||=
name|endmask
expr_stmt|;
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|h
operator|--
condition|)
block|{
name|nlw
operator|=
name|nlwMiddle
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm(" move.w #-1,d3");
name|Duff
argument_list|(
name|nlw
argument_list|,
name|asm
argument_list|(
literal|" move.w d3,(a5)+"
argument_list|)
argument_list|)
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
name|Duff_single
argument_list|(
argument|nlw
argument_list|,
argument|addr
argument_list|,
argument|= ~
literal|0
argument_list|)
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|nlwExtra
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_function
name|void
name|mfb_clrvvector32
parameter_list|(
name|addr
parameter_list|,
name|nlwidth
parameter_list|,
name|x
parameter_list|,
name|len
parameter_list|,
name|lpf
parameter_list|)
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|nlwidth
decl_stmt|;
specifier|register
name|int
name|x
decl_stmt|;
specifier|register
name|int
name|len
decl_stmt|;
block|{
specifier|register
name|u_int
name|bitmask
decl_stmt|;
if|if
condition|(
name|len
operator|<
literal|0
condition|)
block|{
name|nlwidth
operator|=
operator|-
name|nlwidth
expr_stmt|;
name|len
operator|=
operator|-
name|len
expr_stmt|;
block|}
if|if
condition|(
name|lpf
condition|)
name|len
operator|++
expr_stmt|;
name|addr
operator|+=
operator|(
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|bitmask
operator|=
name|mfbrmask32
index|[
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|Duff
argument_list|(
argument|len
argument_list|,
argument|*addr&= bitmask; addr += nlwidth
argument_list|)
block|}
end_function

begin_function
name|void
name|mfb_clrhvector32
parameter_list|(
name|addr
parameter_list|,
name|x
parameter_list|,
name|len
parameter_list|,
name|lpf
parameter_list|)
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|x
decl_stmt|;
name|int
name|len
decl_stmt|;
name|int
name|lpf
decl_stmt|;
block|{
specifier|register
name|u_int
name|startmask
decl_stmt|;
specifier|register
name|u_int
name|endmask
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|,
name|off
decl_stmt|;
if|if
condition|(
name|len
operator|<
literal|0
condition|)
block|{
name|x
operator|+=
name|len
expr_stmt|;
name|len
operator|=
operator|-
name|len
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
block|{
name|len
operator|++
expr_stmt|;
block|}
else|else
block|{
name|x
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|lpf
condition|)
block|{
name|len
operator|++
expr_stmt|;
block|}
block|}
name|addr
operator|+=
operator|(
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|off
operator|=
name|x
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
name|off
operator|+
name|len
operator|<
literal|32
condition|)
block|{
operator|*
name|addr
operator|&=
operator|~
name|mfbpartmasks32
index|[
name|off
index|]
index|[
name|len
operator|&
literal|0x1f
index|]
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|off
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|x
operator|+
name|len
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nl
operator|=
operator|(
name|len
operator|-
operator|(
literal|32
operator|-
name|off
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
operator|*
name|addr
operator|++
operator|&=
operator|~
name|startmask
expr_stmt|;
block|}
else|else
name|nl
operator|=
name|len
operator|>>
literal|5
expr_stmt|;
name|Duff_single
argument_list|(
name|nl
argument_list|,
name|addr
argument_list|,
operator|=
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
operator|*
name|addr
operator|&=
operator|~
name|endmask
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|mfb_clrvector32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p0
parameter_list|,
name|p1
parameter_list|,
name|lpf
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p0
decl_stmt|,
decl|*
name|p1
decl_stmt|;
end_function

begin_decl_stmt
name|int
name|lpf
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* if 0, don't draw last point */
end_comment

begin_block
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|int
name|lim
decl_stmt|;
ifdef|#
directive|ifdef
name|mc68020
specifier|register
name|int
name|x
init|=
name|p0
operator|->
name|x
decl_stmt|;
else|#
directive|else
comment|/* mc68020 */
specifier|register
name|u_int
name|bit
decl_stmt|,
name|leftbit
decl_stmt|,
name|rightbit
decl_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
name|int
name|ddx
decl_stmt|;
name|int
name|dx
init|=
name|p1
operator|->
name|x
operator|-
name|p0
operator|->
name|x
decl_stmt|;
name|int
name|dy
init|=
name|p1
operator|->
name|y
operator|-
name|p0
operator|->
name|y
decl_stmt|;
name|int
name|s
decl_stmt|,
name|d
decl_stmt|,
name|c
decl_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|y
operator|*
name|ddy
operator|)
expr_stmt|;
if|if
condition|(
name|dx
operator|==
literal|0
condition|)
block|{
name|mfb_clrvvector32
argument_list|(
name|addr
argument_list|,
name|ddy
argument_list|,
name|p0
operator|->
name|x
argument_list|,
name|dy
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|dy
operator|==
literal|0
condition|)
block|{
name|mfb_clrhvector32
argument_list|(
name|addr
argument_list|,
name|p0
operator|->
name|x
argument_list|,
name|dx
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|dx
operator|<
literal|0
condition|)
block|{
name|ddx
operator|=
operator|-
literal|1
expr_stmt|;
name|dx
operator|=
operator|-
name|dx
expr_stmt|;
block|}
else|else
block|{
name|ddx
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|dy
operator|<
literal|0
condition|)
block|{
name|dy
operator|=
operator|-
name|dy
expr_stmt|;
name|ddy
operator|=
operator|-
name|ddy
expr_stmt|;
block|}
ifndef|#
directive|ifndef
name|mc68020
name|bit
operator|=
name|mfbmask32
index|[
name|p0
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|leftbit
operator|=
name|mfbmask32
index|[
literal|0
index|]
expr_stmt|;
name|rightbit
operator|=
name|mfbmask32
index|[
literal|31
index|]
expr_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
name|dx
operator|>
name|dy
condition|)
block|{
comment|/* case x */
name|lim
operator|=
name|dx
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dx
expr_stmt|;
name|d
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
if|if
condition|(
name|ddx
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfclr	(a5){d4:1}");
name|x
operator|++
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|&=
operator|~
name|bit
expr_stmt|;
name|bit
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|leftbit
expr_stmt|;
name|addr
operator|++
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfclr	(a5){d4:1}");
name|x
operator|--
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|&=
operator|~
name|bit
expr_stmt|;
name|bit
operator|<<=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|rightbit
expr_stmt|;
name|addr
operator|--
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
comment|/* case y */
name|lim
operator|=
name|dy
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dy
expr_stmt|;
name|d
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
if|if
condition|(
name|ddx
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfclr	(a5){d4:1}");
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|++
expr_stmt|;
block|}
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|&=
operator|~
name|bit
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|bit
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|leftbit
expr_stmt|;
name|addr
operator|++
expr_stmt|;
block|}
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfclr	(a5){d4:1}");
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|--
expr_stmt|;
block|}
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|&=
operator|~
name|bit
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|bit
operator|<<=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|rightbit
expr_stmt|;
name|addr
operator|--
expr_stmt|;
block|}
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
block|}
end_block

begin_function
name|void
name|mfb_invvvector32
parameter_list|(
name|addr
parameter_list|,
name|nlwidth
parameter_list|,
name|x
parameter_list|,
name|len
parameter_list|,
name|lpf
parameter_list|)
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|nlwidth
decl_stmt|;
specifier|register
name|int
name|x
decl_stmt|;
specifier|register
name|int
name|len
decl_stmt|;
block|{
specifier|register
name|u_int
name|bitmask
decl_stmt|;
if|if
condition|(
name|len
operator|<
literal|0
condition|)
block|{
name|nlwidth
operator|=
operator|-
name|nlwidth
expr_stmt|;
name|len
operator|=
operator|-
name|len
expr_stmt|;
block|}
if|if
condition|(
name|lpf
condition|)
name|len
operator|++
expr_stmt|;
name|addr
operator|+=
operator|(
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|bitmask
operator|=
name|mfbmask32
index|[
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|Duff
argument_list|(
argument|len
argument_list|,
argument|*addr ^= bitmask; addr += nlwidth
argument_list|)
block|}
end_function

begin_function
name|void
name|mfb_invhvector32
parameter_list|(
name|addr
parameter_list|,
name|x
parameter_list|,
name|len
parameter_list|,
name|lpf
parameter_list|)
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|x
decl_stmt|;
name|int
name|len
decl_stmt|;
name|int
name|lpf
decl_stmt|;
block|{
specifier|register
name|u_int
name|startmask
decl_stmt|;
specifier|register
name|u_int
name|endmask
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|,
name|off
decl_stmt|;
if|if
condition|(
name|len
operator|<
literal|0
condition|)
block|{
name|x
operator|+=
name|len
expr_stmt|;
name|len
operator|=
operator|-
name|len
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
block|{
name|len
operator|++
expr_stmt|;
block|}
else|else
block|{
name|x
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|lpf
condition|)
block|{
name|len
operator|++
expr_stmt|;
block|}
block|}
name|addr
operator|+=
operator|(
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|off
operator|=
name|x
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
name|off
operator|+
name|len
operator|<
literal|32
condition|)
block|{
operator|*
name|addr
operator|^=
name|mfbpartmasks32
index|[
name|off
index|]
index|[
name|len
operator|&
literal|0x1f
index|]
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|off
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|x
operator|+
name|len
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nl
operator|=
operator|(
name|len
operator|-
operator|(
literal|32
operator|-
name|off
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
operator|*
name|addr
operator|++
operator|^=
name|startmask
expr_stmt|;
block|}
else|else
name|nl
operator|=
name|len
operator|>>
literal|5
expr_stmt|;
name|Duff_single
argument_list|(
name|nl
argument_list|,
name|addr
argument_list|,
operator|^=
operator|~
literal|0
argument_list|)
expr_stmt|;
if|if
condition|(
name|endmask
condition|)
operator|*
name|addr
operator|^=
name|endmask
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|mfb_invvector32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p0
parameter_list|,
name|p1
parameter_list|,
name|lpf
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p0
decl_stmt|,
decl|*
name|p1
decl_stmt|;
end_function

begin_decl_stmt
name|int
name|lpf
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* if 0, don't draw last point */
end_comment

begin_block
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|int
name|lim
decl_stmt|;
ifdef|#
directive|ifdef
name|mc68020
specifier|register
name|int
name|x
init|=
name|p0
operator|->
name|x
decl_stmt|;
else|#
directive|else
comment|/* mc68020 */
specifier|register
name|u_int
name|bit
decl_stmt|,
name|leftbit
decl_stmt|,
name|rightbit
decl_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
name|int
name|ddx
decl_stmt|;
name|int
name|dx
init|=
name|p1
operator|->
name|x
operator|-
name|p0
operator|->
name|x
decl_stmt|;
name|int
name|dy
init|=
name|p1
operator|->
name|y
operator|-
name|p0
operator|->
name|y
decl_stmt|;
name|int
name|s
decl_stmt|,
name|d
decl_stmt|,
name|c
decl_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|y
operator|*
name|ddy
operator|)
expr_stmt|;
if|if
condition|(
name|dx
operator|==
literal|0
condition|)
block|{
name|mfb_invvvector32
argument_list|(
name|addr
argument_list|,
name|ddy
argument_list|,
name|p0
operator|->
name|x
argument_list|,
name|dy
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|dy
operator|==
literal|0
condition|)
block|{
name|mfb_invhvector32
argument_list|(
name|addr
argument_list|,
name|p0
operator|->
name|x
argument_list|,
name|dx
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|dx
operator|<
literal|0
condition|)
block|{
name|dx
operator|=
operator|-
name|dx
expr_stmt|;
name|ddx
operator|=
operator|-
literal|1
expr_stmt|;
block|}
else|else
block|{
name|ddx
operator|=
literal|1
expr_stmt|;
block|}
if|if
condition|(
name|dy
operator|<
literal|0
condition|)
block|{
name|dy
operator|=
operator|-
name|dy
expr_stmt|;
name|ddy
operator|=
operator|-
name|ddy
expr_stmt|;
block|}
ifndef|#
directive|ifndef
name|mc68020
name|bit
operator|=
name|mfbmask32
index|[
name|p0
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|leftbit
operator|=
name|mfbmask32
index|[
literal|0
index|]
expr_stmt|;
name|rightbit
operator|=
name|mfbmask32
index|[
literal|31
index|]
expr_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
name|dx
operator|>
name|dy
condition|)
block|{
comment|/* case x */
name|lim
operator|=
name|dx
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dx
expr_stmt|;
name|d
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
if|if
condition|(
name|ddx
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfchg	(a5){d4:1}");
name|x
operator|++
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|^=
name|bit
expr_stmt|;
name|bit
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|leftbit
expr_stmt|;
name|addr
operator|++
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfchg	(a5){d4:1}");
name|x
operator|--
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|^=
name|bit
expr_stmt|;
name|bit
operator|<<=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|rightbit
expr_stmt|;
name|addr
operator|--
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
comment|/* case y */
name|lim
operator|=
name|dy
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dy
expr_stmt|;
name|d
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
if|if
condition|(
name|ddx
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfchg	(a5){d4:1}");
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|++
expr_stmt|;
block|}
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|^=
name|bit
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|bit
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|leftbit
expr_stmt|;
name|addr
operator|++
expr_stmt|;
block|}
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfchg	(a5){d4:1}");
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|--
expr_stmt|;
block|}
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator|^=
name|bit
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|bit
operator|<<=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|rightbit
expr_stmt|;
name|addr
operator|--
expr_stmt|;
block|}
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
block|}
end_block

begin_function
name|void
name|mfb_setvvector32
parameter_list|(
name|addr
parameter_list|,
name|nlwidth
parameter_list|,
name|x
parameter_list|,
name|len
parameter_list|,
name|lpf
parameter_list|)
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|nlwidth
decl_stmt|;
specifier|register
name|int
name|x
decl_stmt|;
specifier|register
name|int
name|len
decl_stmt|;
block|{
specifier|register
name|u_int
name|bitmask
decl_stmt|;
if|if
condition|(
name|len
operator|<
literal|0
condition|)
block|{
name|nlwidth
operator|=
operator|-
name|nlwidth
expr_stmt|;
name|len
operator|=
operator|-
name|len
expr_stmt|;
block|}
if|if
condition|(
name|lpf
condition|)
name|len
operator|++
expr_stmt|;
name|addr
operator|+=
operator|(
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|bitmask
operator|=
name|mfbmask32
index|[
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|Duff
argument_list|(
argument|len
argument_list|,
argument|*addr |= bitmask; addr += nlwidth
argument_list|)
block|}
end_function

begin_function
name|void
name|mfb_sethvector32
parameter_list|(
name|addr
parameter_list|,
name|x
parameter_list|,
name|len
parameter_list|,
name|lpf
parameter_list|)
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|x
decl_stmt|;
name|int
name|len
decl_stmt|;
name|int
name|lpf
decl_stmt|;
block|{
specifier|register
name|u_int
name|startmask
decl_stmt|;
specifier|register
name|u_int
name|endmask
decl_stmt|;
specifier|register
name|int
name|nl
decl_stmt|,
name|off
decl_stmt|;
if|if
condition|(
name|len
operator|<
literal|0
condition|)
block|{
name|x
operator|+=
name|len
expr_stmt|;
name|len
operator|=
operator|-
name|len
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
block|{
name|len
operator|++
expr_stmt|;
block|}
else|else
block|{
name|x
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|lpf
condition|)
block|{
name|len
operator|++
expr_stmt|;
block|}
block|}
name|addr
operator|+=
operator|(
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
name|off
operator|=
name|x
operator|&
literal|0x1f
expr_stmt|;
if|if
condition|(
name|off
operator|+
name|len
operator|<
literal|32
condition|)
block|{
operator|*
name|addr
operator||=
name|mfbpartmasks32
index|[
name|off
index|]
index|[
name|len
operator|&
literal|0x1f
index|]
expr_stmt|;
block|}
else|else
block|{
name|startmask
operator|=
name|mfbstarttab32
index|[
name|off
index|]
expr_stmt|;
name|endmask
operator|=
name|mfbendtab32
index|[
operator|(
name|x
operator|+
name|len
operator|)
operator|&
literal|0x1f
index|]
expr_stmt|;
if|if
condition|(
name|startmask
condition|)
block|{
name|nl
operator|=
operator|(
name|len
operator|-
operator|(
literal|32
operator|-
name|off
operator|)
operator|)
operator|>>
literal|5
expr_stmt|;
operator|*
name|addr
operator|++
operator||=
name|startmask
expr_stmt|;
block|}
else|else
name|nl
operator|=
name|len
operator|>>
literal|5
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
empty_stmt|;
asm|asm(" move.l #-1,d3");
name|Duff
argument_list|(
argument|nl
argument_list|,
argument|asm(
literal|" move.l d3,(a5)+"
argument|)
argument_list|)
else|#
directive|else
comment|/* mc68020 */
name|Duff_single
argument_list|(
name|nl
argument_list|,
name|addr
argument_list|,
operator|=
operator|~
literal|0
argument_list|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
name|endmask
condition|)
operator|*
name|addr
operator||=
name|endmask
expr_stmt|;
block|}
block|}
end_function

begin_function
name|void
name|mfb_setvector32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p0
parameter_list|,
name|p1
parameter_list|,
name|lpf
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p0
decl_stmt|,
decl|*
name|p1
decl_stmt|;
end_function

begin_decl_stmt
name|int
name|lpf
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* if 0, don't draw last point */
end_comment

begin_block
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|int
name|lim
decl_stmt|;
ifdef|#
directive|ifdef
name|mc68020
specifier|register
name|int
name|x
init|=
name|p0
operator|->
name|x
decl_stmt|;
else|#
directive|else
comment|/* mc68020 */
specifier|register
name|u_int
name|bit
decl_stmt|,
name|leftbit
decl_stmt|,
name|rightbit
decl_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
name|int
name|ddx
decl_stmt|;
name|int
name|dx
init|=
name|p1
operator|->
name|x
operator|-
name|p0
operator|->
name|x
decl_stmt|;
name|int
name|dy
init|=
name|p1
operator|->
name|y
operator|-
name|p0
operator|->
name|y
decl_stmt|;
name|int
name|s
decl_stmt|,
name|d
decl_stmt|,
name|c
decl_stmt|;
name|ddx
operator|=
literal|1
expr_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|y
operator|*
name|ddy
operator|)
expr_stmt|;
if|if
condition|(
name|dx
operator|==
literal|0
condition|)
block|{
name|mfb_setvvector32
argument_list|(
name|addr
argument_list|,
name|ddy
argument_list|,
name|p0
operator|->
name|x
argument_list|,
name|dy
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|dy
operator|==
literal|0
condition|)
block|{
name|mfb_sethvector32
argument_list|(
name|addr
argument_list|,
name|p0
operator|->
name|x
argument_list|,
name|dx
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
return|return;
block|}
if|if
condition|(
name|dx
operator|<
literal|0
condition|)
block|{
name|dx
operator|=
operator|-
name|dx
expr_stmt|;
name|ddx
operator|=
operator|-
name|ddx
expr_stmt|;
block|}
if|if
condition|(
name|dy
operator|<
literal|0
condition|)
block|{
name|dy
operator|=
operator|-
name|dy
expr_stmt|;
name|ddy
operator|=
operator|-
name|ddy
expr_stmt|;
block|}
ifndef|#
directive|ifndef
name|mc68020
name|bit
operator|=
name|mfbmask32
index|[
name|p0
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
name|leftbit
operator|=
name|mfbmask32
index|[
literal|0
index|]
expr_stmt|;
name|rightbit
operator|=
name|mfbmask32
index|[
literal|31
index|]
expr_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
name|dx
operator|>
name|dy
condition|)
block|{
comment|/* case x */
name|lim
operator|=
name|dx
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dx
expr_stmt|;
name|d
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
if|if
condition|(
name|ddx
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfset	(a5){d4:1}");
name|x
operator|++
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator||=
name|bit
expr_stmt|;
name|bit
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|leftbit
expr_stmt|;
name|addr
operator|++
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfset	(a5){d4:1}");
name|x
operator|--
expr_stmt|;
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator||=
name|bit
expr_stmt|;
name|bit
operator|<<=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|rightbit
expr_stmt|;
name|addr
operator|--
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
comment|/* case y */
name|lim
operator|=
name|dy
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dy
expr_stmt|;
name|d
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
if|if
condition|(
name|ddx
operator|>
literal|0
condition|)
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfset	(a5){d4:1}");
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|++
expr_stmt|;
block|}
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator||=
name|bit
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|bit
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|leftbit
expr_stmt|;
name|addr
operator|++
expr_stmt|;
block|}
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
else|else
block|{
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	bfset	(a5){d4:1}");
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|--
expr_stmt|;
block|}
else|#
directive|else
comment|/* mc68020 */
operator|*
name|addr
operator||=
name|bit
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|bit
operator|<<=
literal|1
expr_stmt|;
if|if
condition|(
operator|!
name|bit
condition|)
block|{
name|bit
operator|=
name|rightbit
expr_stmt|;
name|addr
operator|--
expr_stmt|;
block|}
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
block|}
block|}
end_block

begin_function
name|void
name|mfb_point
parameter_list|(
name|p
parameter_list|,
name|x
parameter_list|,
name|s
parameter_list|,
name|f
parameter_list|)
specifier|register
name|u_int
modifier|*
name|p
decl_stmt|;
specifier|register
name|int
name|x
decl_stmt|;
specifier|register
name|u_int
name|s
decl_stmt|;
specifier|register
name|char
modifier|*
name|f
decl_stmt|;
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	andi.l	#31, d7");
asm|asm("	move.l	d7,d0");
asm|asm("	neg.l	d7");
asm|asm("	addi.l	#31, d7");
asm|asm("	move.l	(a5), d1");
asm|asm("	lsr.l	d7, d1");
asm|asm("	andi.l	#1, d1");
asm|asm("	andi.l	#1, d6");
asm|asm("	lsl.l	#1, d6");
asm|asm("	or.l	d6, d1");
asm|asm("	neg.l	d1");
asm|asm("	addq.l	#3, d1");
asm|asm("	btst.b	d1, (a4)");
asm|asm("	beq	bcl");
asm|asm("	bfset	(a5){d0:1}");
asm|asm("	bra	bend");
asm|asm("bcl:	bfclr	(a5){d0:1}");
asm|asm("bend:	");
else|#
directive|else
comment|/* mc68020 */
name|x
operator|=
literal|31
operator|-
operator|(
name|x
operator|&
literal|31
operator|)
expr_stmt|;
if|if
condition|(
operator|(
literal|1
operator|<<
operator|(
literal|3
operator|-
operator|(
operator|(
operator|(
name|s
operator|&
literal|1
operator|)
operator|<<
literal|1
operator|)
operator||
operator|(
operator|(
operator|*
name|p
operator|>>
name|x
operator|)
operator|&
literal|1
operator|)
operator|)
operator|)
operator|)
operator|&
operator|*
name|f
condition|)
operator|*
name|p
operator||=
operator|(
literal|1
operator|<<
name|x
operator|)
expr_stmt|;
else|else
operator|*
name|p
operator|&=
operator|~
operator|(
literal|1
operator|<<
name|x
operator|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
block|}
end_function

begin_function
name|void
name|mfb_vector32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p0
parameter_list|,
name|p1
parameter_list|,
name|lpf
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|u_int
modifier|*
name|addr
decl_stmt|;
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p0
decl_stmt|,
decl|*
name|p1
decl_stmt|;
end_function

begin_decl_stmt
name|int
name|lpf
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* if 0, don't draw last point */
end_comment

begin_block
block|{
specifier|register
name|char
modifier|*
name|fp
init|=
name|fb
operator|->
name|funcvec
decl_stmt|;
specifier|register
name|int
name|x
init|=
name|p0
operator|->
name|x
decl_stmt|;
specifier|register
name|u_int
name|pat
init|=
name|fb
operator|->
name|pat
decl_stmt|;
name|int
name|lim
decl_stmt|;
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
name|int
name|ddx
decl_stmt|;
name|int
name|s
decl_stmt|,
name|d
decl_stmt|,
name|c
decl_stmt|;
name|int
name|dx
init|=
name|p1
operator|->
name|x
operator|-
name|x
decl_stmt|;
name|int
name|dy
init|=
name|p1
operator|->
name|y
operator|-
name|p0
operator|->
name|y
decl_stmt|;
name|ddx
operator|=
literal|1
expr_stmt|;
name|addr
operator|+=
operator|(
name|p0
operator|->
name|y
operator|*
name|ddy
operator|)
expr_stmt|;
if|if
condition|(
name|dx
operator|==
literal|0
condition|)
block|{
name|ddx
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|dx
operator|<
literal|0
condition|)
block|{
name|dx
operator|=
operator|-
name|dx
expr_stmt|;
name|ddx
operator|=
operator|-
name|ddx
expr_stmt|;
block|}
if|if
condition|(
name|dy
operator|==
literal|0
condition|)
name|ddy
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
name|dy
operator|<
literal|0
condition|)
block|{
name|dy
operator|=
operator|-
name|dy
expr_stmt|;
name|ddy
operator|=
operator|-
name|ddy
expr_stmt|;
block|}
if|if
condition|(
name|dx
operator|>
name|dy
condition|)
block|{
comment|/* case x */
name|lim
operator|=
name|dx
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dx
expr_stmt|;
name|d
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm(" rol.l	#1, d6 ");
else|#
directive|else
comment|/* mc68020 */
name|pat
operator|=
operator|(
name|pat
operator|<<
literal|1
operator|)
operator||
operator|(
operator|(
name|pat
operator|&
literal|0x80000000
operator|)
condition|?
literal|1
else|:
literal|0
operator|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
name|mfb_point
argument_list|(
name|addr
operator|+
operator|(
name|x
operator|>>
literal|5
operator|)
argument_list|,
name|x
argument_list|,
name|pat
argument_list|,
name|fp
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
name|x
operator|+=
name|ddx
expr_stmt|;
block|}
block|}
else|else
block|{
comment|/* case y */
name|lim
operator|=
name|dy
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
name|lim
operator|++
expr_stmt|;
name|s
operator|=
operator|-
name|dy
expr_stmt|;
name|d
operator|=
name|dy
operator|<<
literal|1
expr_stmt|;
name|c
operator|=
name|dx
operator|<<
literal|1
expr_stmt|;
for|for
control|(
name|i
operator|=
name|lim
init|;
name|i
operator|>
literal|0
condition|;
name|i
operator|--
control|)
block|{
ifdef|#
directive|ifdef
name|mc68020
asm|asm(" rol.l	#1, d6 ");
else|#
directive|else
comment|/* mc68020 */
name|pat
operator|=
operator|(
name|pat
operator|<<
literal|1
operator|)
operator||
operator|(
operator|(
name|pat
operator|&
literal|0x80000000
operator|)
condition|?
literal|1
else|:
literal|0
operator|)
expr_stmt|;
endif|#
directive|endif
comment|/* mc68020 */
name|mfb_point
argument_list|(
name|addr
operator|+
operator|(
name|x
operator|>>
literal|5
operator|)
argument_list|,
name|x
argument_list|,
name|pat
argument_list|,
name|fp
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
name|s
operator|+=
name|c
operator|)
operator|>=
literal|0
condition|)
block|{
name|s
operator|-=
name|d
expr_stmt|;
name|x
operator|+=
name|ddx
expr_stmt|;
block|}
name|addr
operator|+=
name|ddy
expr_stmt|;
block|}
block|}
comment|/* rotate pattern */
name|pat
operator|=
name|fb
operator|->
name|pat
expr_stmt|;
ifdef|#
directive|ifdef
name|mc68020
asm|asm("	move.l	(-8, fp), d0");
asm|asm("	andi.l	#31, d0");
asm|asm("	rol.l	d0, d6");
else|#
directive|else
comment|/* mc68020 */
block|{
specifier|register
name|int
name|tmp
decl_stmt|;
name|tmp
operator|=
name|lim
operator|&
literal|31
expr_stmt|;
name|pat
operator|=
operator|(
name|pat
operator|<<
name|tmp
operator|)
operator||
operator|(
name|pat
operator|>>
operator|(
literal|32
operator|-
name|tmp
operator|)
operator|)
expr_stmt|;
block|}
endif|#
directive|endif
comment|/* mc68020 */
name|fb
operator|->
name|pat
operator|=
name|pat
expr_stmt|;
block|}
end_block

begin_function
name|void
name|mem_to_mem
parameter_list|(
name|func
parameter_list|,
name|mapSrc
parameter_list|,
name|offSrc
parameter_list|,
name|widthSrc
parameter_list|,
name|mapDst
parameter_list|,
name|offDst
parameter_list|,
name|widthDst
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|)
name|int
name|func
decl_stmt|;
name|struct
name|fb_map
modifier|*
name|mapSrc
decl_stmt|;
name|int
name|offSrc
decl_stmt|;
name|u_int
name|widthSrc
decl_stmt|;
name|struct
name|fb_map
modifier|*
name|mapDst
decl_stmt|;
name|int
name|offDst
decl_stmt|;
name|u_int
name|widthDst
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
specifier|register
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
specifier|register
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
specifier|register
name|u_short
modifier|*
name|addrDst
decl_stmt|;
name|addrSrc
operator|=
operator|(
name|u_short
operator|*
operator|)
name|TypeAt
argument_list|(
name|mapSrc
argument_list|,
name|offSrc
argument_list|)
expr_stmt|;
name|addrDst
operator|=
operator|(
name|u_short
operator|*
operator|)
name|TypeAt
argument_list|(
name|mapDst
argument_list|,
name|offDst
argument_list|)
expr_stmt|;
if|if
condition|(
operator|(
operator|!
operator|(
operator|(
name|u_int
operator|)
name|addrSrc
operator|&
literal|3
operator|)
operator|&&
operator|!
operator|(
name|widthSrc
operator|&
literal|1
operator|)
operator|)
operator|&&
operator|(
operator|!
operator|(
operator|(
name|u_int
operator|)
name|addrDst
operator|&
literal|3
operator|)
operator|&&
operator|!
operator|(
name|widthDst
operator|&
literal|1
operator|)
operator|)
condition|)
block|{
switch|switch
condition|(
name|func
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area32
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
operator|/
literal|2
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area32
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
operator|/
literal|2
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area32
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
operator|/
literal|2
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area32
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
operator|/
literal|2
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area32
argument_list|(
name|func
argument_list|,
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
operator|/
literal|2
argument_list|,
name|widthDst
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|func
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area16
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|widthDst
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area16
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
argument_list|,
name|widthDst
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area16
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
argument_list|,
name|widthDst
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area16
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
argument_list|,
name|widthDst
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area16
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|widthDst
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area16
argument_list|(
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
argument_list|,
name|widthDst
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area16
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|widthDst
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area16
argument_list|(
name|func
argument_list|,
name|addrSrc
argument_list|,
name|addrDst
argument_list|,
name|widthSrc
argument_list|,
name|widthDst
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_function
name|void
name|mem_clear
parameter_list|(
name|func
parameter_list|,
name|map
parameter_list|,
name|offset
parameter_list|,
name|width
parameter_list|,
name|dr
parameter_list|,
name|mode
parameter_list|)
specifier|register
name|int
name|func
decl_stmt|;
name|struct
name|fb_map
modifier|*
name|map
decl_stmt|;
name|int
name|offset
decl_stmt|;
name|u_int
name|width
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|dr
decl_stmt|;
name|int
name|mode
decl_stmt|;
block|{
name|u_short
modifier|*
name|addr
decl_stmt|;
if|if
condition|(
operator|!
name|mode
condition|)
name|func
operator|>>=
literal|2
expr_stmt|;
name|func
operator|&=
literal|0x3
expr_stmt|;
name|addr
operator|=
operator|(
name|u_short
operator|*
operator|)
name|TypeAt
argument_list|(
name|map
argument_list|,
name|offset
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|(
name|u_int
operator|)
name|addr
operator|&
literal|3
operator|)
operator|&&
operator|!
operator|(
name|width
operator|&
literal|1
operator|)
condition|)
block|{
switch|switch
condition|(
name|func
condition|)
block|{
case|case
literal|0
case|:
name|mfb_clr_area32
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addr
argument_list|,
name|width
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|mfb_inv_area32
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addr
argument_list|,
name|width
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|mfb_set_area32
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addr
argument_list|,
name|width
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|func
condition|)
block|{
case|case
literal|0
case|:
name|mfb_clr_area16
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addr
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|mfb_inv_area16
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addr
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|mfb_set_area16
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addr
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|CPU_SINGLE
end_ifdef

begin_define
define|#
directive|define
name|VRAM_START
parameter_list|(
name|fb
parameter_list|)
value|(((struct mfbdev *)(fb)->private)->vram_start)
end_define

begin_define
define|#
directive|define
name|VRAM_WIDTH
parameter_list|(
name|fb
parameter_list|)
value|(((struct mfbdev *)(fb)->private)->vram_width)
end_define

begin_macro
name|fbmem_rop_init
argument_list|(
argument|fb
argument_list|,
argument|func
argument_list|)
end_macro

begin_decl_stmt
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
modifier|*
name|func
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|fb
operator|->
name|func
operator|=
operator|*
name|func
expr_stmt|;
block|}
end_block

begin_function
name|void
name|fbmem_rop_winit
parameter_list|(
name|fb
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
block|{ }
end_function

begin_function
name|void
name|fbmem_rop_copy
parameter_list|(
name|fb
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|,
name|mode
parameter_list|,
name|wmask
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
specifier|register
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
block|{
if|if
condition|(
operator|!
operator|(
name|wmask
operator|&
literal|1
operator|)
condition|)
block|{
return|return;
block|}
switch|switch
condition|(
name|fb
operator|->
name|func
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area32
argument_list|(
name|fb
operator|->
name|func
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_function

begin_function
name|void
name|fbmem_rop_read
parameter_list|(
name|fb
parameter_list|,
name|map
parameter_list|,
name|offset
parameter_list|,
name|width
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|,
name|rplane
parameter_list|,
name|wplane
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|struct
name|fb_map
modifier|*
name|map
decl_stmt|;
name|u_int
name|offset
decl_stmt|;
name|u_int
name|width
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
specifier|register
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
name|int
name|rplane
decl_stmt|;
name|int
name|wplane
decl_stmt|;
block|{
specifier|register
name|u_short
modifier|*
name|addrDst
decl_stmt|;
name|addrDst
operator|=
operator|(
name|u_short
operator|*
operator|)
name|TypeAt
argument_list|(
name|map
argument_list|,
name|offset
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
operator|(
name|u_int
operator|)
name|addrDst
operator|&
literal|3
operator|)
operator|&&
operator|!
operator|(
name|width
operator|&
literal|1
operator|)
condition|)
block|{
switch|switch
condition|(
name|fb
operator|->
name|funcvec
index|[
name|wplane
index|]
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|width
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|width
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area32
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|width
operator|/
literal|2
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area32
argument_list|(
name|fb
operator|->
name|funcvec
index|[
name|wplane
index|]
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|fb
operator|->
name|funcvec
index|[
name|wplane
index|]
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area16
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area16
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|width
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area16
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|width
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area16
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|width
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area16
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area16
argument_list|(
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|width
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area16
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|addrDst
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area16
argument_list|(
name|fb
operator|->
name|funcvec
index|[
name|wplane
index|]
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|addrDst
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|width
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_function
name|void
name|fbmem_rop_write
parameter_list|(
name|fb
parameter_list|,
name|map
parameter_list|,
name|offset
parameter_list|,
name|width
parameter_list|,
name|sr
parameter_list|,
name|dp
parameter_list|,
name|wmask
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|struct
name|fb_map
modifier|*
name|map
decl_stmt|;
name|int
name|offset
decl_stmt|;
name|u_int
name|width
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|sr
decl_stmt|;
comment|/* source rectangle */
specifier|register
name|lPoint
modifier|*
name|dp
decl_stmt|;
comment|/* destination point */
name|int
name|wmask
decl_stmt|;
block|{
specifier|register
name|u_short
modifier|*
name|addrSrc
decl_stmt|;
name|addrSrc
operator|=
operator|(
name|u_short
operator|*
operator|)
name|TypeAt
argument_list|(
name|map
argument_list|,
name|offset
argument_list|)
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|wmask
operator|&
literal|1
operator|)
condition|)
block|{
return|return;
block|}
if|if
condition|(
operator|!
operator|(
operator|(
name|u_int
operator|)
name|addrSrc
operator|&
literal|3
operator|)
operator|&&
operator|!
operator|(
name|width
operator|&
literal|1
operator|)
condition|)
block|{
switch|switch
condition|(
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area32
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area32
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area32
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area32
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area32
argument_list|(
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
argument_list|,
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
operator|/
literal|2
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
else|else
block|{
switch|switch
condition|(
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
condition|)
block|{
case|case
name|BF_0
case|:
name|mfb_clr_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_S
case|:
name|mfb_copy_area16
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_D
case|:
break|break;
case|case
name|BF_SDX
case|:
name|mfb_xor_area16
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SDO
case|:
name|mfb_or_area16
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_DI
case|:
name|mfb_inv_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_SI
case|:
name|mfb_copyinv_area16
argument_list|(
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
case|case
name|BF_1
case|:
name|mfb_set_area32
argument_list|(
name|dp
operator|->
name|x
argument_list|,
name|dp
operator|->
name|y
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|sr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
default|default:
name|mfb_general_area16
argument_list|(
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
argument_list|,
name|addrSrc
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|width
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
operator|*
literal|2
argument_list|,
name|sr
argument_list|,
name|dp
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
block|}
end_function

begin_function
name|void
name|fbmem_rop_cinit
parameter_list|(
name|fb
parameter_list|,
name|wplane
parameter_list|,
name|sw
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
block|{
name|fb
operator|->
name|Pmask
operator|=
name|wplane
expr_stmt|;
name|fb
operator|->
name|Mode
operator|=
name|sw
expr_stmt|;
block|}
end_function

begin_function
name|void
name|fbmem_rop_clear
parameter_list|(
name|fb
parameter_list|,
name|dr
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|dr
decl_stmt|;
block|{
specifier|register
name|int
name|func
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|fb
operator|->
name|Pmask
operator|&
literal|1
operator|)
condition|)
block|{
return|return;
block|}
name|func
operator|=
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
expr_stmt|;
if|if
condition|(
operator|!
name|fb
operator|->
name|Mode
condition|)
name|func
operator|>>=
literal|2
expr_stmt|;
name|func
operator|&=
literal|3
expr_stmt|;
switch|switch
condition|(
name|func
condition|)
block|{
case|case
literal|0
case|:
name|mfb_clr_area32
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|mfb_inv_area32
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|mfb_set_area32
argument_list|(
name|dr
operator|->
name|origin
operator|.
name|x
argument_list|,
name|dr
operator|->
name|origin
operator|.
name|y
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|x
argument_list|,
name|dr
operator|->
name|extent
operator|.
name|y
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|)
expr_stmt|;
break|break;
block|}
block|}
end_function

begin_function
name|void
name|fbmem_rop_vect
parameter_list|(
name|fb
parameter_list|,
name|clip
parameter_list|,
name|ropf
parameter_list|,
name|forc
parameter_list|,
name|auxc
parameter_list|,
name|transp
parameter_list|,
name|wplane
parameter_list|,
name|np
parameter_list|,
name|ps
parameter_list|,
name|lptn
parameter_list|,
name|lpf
parameter_list|,
name|joint
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|lRectangle
modifier|*
name|clip
decl_stmt|;
name|int
name|ropf
decl_stmt|,
name|forc
decl_stmt|,
name|auxc
decl_stmt|,
name|transp
decl_stmt|;
specifier|register
name|int
name|np
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|ps
decl_stmt|;
specifier|register
name|u_int
name|lptn
decl_stmt|;
block|{
name|lPoint
name|p0
decl_stmt|,
name|p1
decl_stmt|;
specifier|register
name|void
function_decl|(
modifier|*
name|line_func
function_decl|)
parameter_list|()
function_decl|;
specifier|register
name|int
name|func
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|wplane
operator|&
literal|1
operator|)
condition|)
return|return;
name|linerop
argument_list|(
name|fb
argument_list|,
name|ropf
argument_list|,
name|forc
argument_list|,
name|auxc
argument_list|,
name|transp
argument_list|)
expr_stmt|;
name|func
operator|=
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
expr_stmt|;
if|if
condition|(
name|lptn
operator|==
literal|0xffffffff
operator|||
name|lptn
operator|==
literal|0
condition|)
block|{
if|if
condition|(
operator|!
name|lptn
condition|)
name|func
operator|>>=
literal|2
expr_stmt|;
switch|switch
condition|(
name|func
operator|&
literal|3
condition|)
block|{
case|case
literal|0
case|:
name|line_func
operator|=
name|mfb_clrvector32
expr_stmt|;
break|break;
case|case
literal|1
case|:
return|return;
case|case
literal|2
case|:
name|line_func
operator|=
name|mfb_invvector32
expr_stmt|;
break|break;
default|default:
name|line_func
operator|=
name|mfb_setvector32
expr_stmt|;
break|break;
block|}
block|}
else|else
name|line_func
operator|=
name|mfb_vector32
expr_stmt|;
if|if
condition|(
name|joint
condition|)
block|{
name|fb
operator|->
name|pat
operator|=
name|lptn
expr_stmt|;
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|np
operator|--
expr_stmt|;
if|if
condition|(
name|clip
condition|)
block|{
while|while
condition|(
operator|--
name|np
operator|>
literal|0
condition|)
block|{
name|p1
operator|=
operator|*
name|ps
expr_stmt|;
if|if
condition|(
name|lineclip
argument_list|(
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|clip
argument_list|)
condition|)
block|{
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|ps
operator|->
name|x
operator|!=
name|p1
operator|.
name|x
operator|||
name|ps
operator|->
name|y
operator|!=
name|p1
operator|.
name|y
argument_list|)
expr_stmt|;
block|}
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
block|}
name|p1
operator|=
operator|*
name|ps
expr_stmt|;
if|if
condition|(
name|lineclip
argument_list|(
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|clip
argument_list|)
condition|)
block|{
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|ps
operator|->
name|x
operator|!=
name|p1
operator|.
name|x
operator|||
name|ps
operator|->
name|y
operator|!=
name|p1
operator|.
name|y
operator|||
name|lpf
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
operator|--
name|np
operator|>
literal|0
condition|)
block|{
name|p1
operator|=
operator|*
name|ps
expr_stmt|;
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
block|}
name|p1
operator|=
operator|*
name|ps
expr_stmt|;
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|lpf
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|np
operator|>>=
literal|1
expr_stmt|;
if|if
condition|(
name|lpf
condition|)
block|{
if|if
condition|(
name|clip
condition|)
block|{
while|while
condition|(
operator|--
name|np
operator|>=
literal|0
condition|)
block|{
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|p1
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|fb
operator|->
name|pat
operator|=
name|lptn
expr_stmt|;
if|if
condition|(
name|lineclip
argument_list|(
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|clip
argument_list|)
condition|)
block|{
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
while|while
condition|(
operator|--
name|np
operator|>=
literal|0
condition|)
block|{
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|p1
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|fb
operator|->
name|pat
operator|=
name|lptn
expr_stmt|;
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
literal|1
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|clip
condition|)
block|{
while|while
condition|(
operator|--
name|np
operator|>=
literal|0
condition|)
block|{
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|p1
operator|=
operator|*
name|ps
expr_stmt|;
name|fb
operator|->
name|pat
operator|=
name|lptn
expr_stmt|;
if|if
condition|(
name|lineclip
argument_list|(
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|clip
argument_list|)
condition|)
block|{
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
name|ps
operator|->
name|x
operator|!=
name|p1
operator|.
name|x
operator|||
name|ps
operator|->
name|y
operator|!=
name|p1
operator|.
name|y
argument_list|)
expr_stmt|;
block|}
name|ps
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
operator|--
name|np
operator|>=
literal|0
condition|)
block|{
name|p0
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|p1
operator|=
operator|*
name|ps
operator|++
expr_stmt|;
name|fb
operator|->
name|pat
operator|=
name|lptn
expr_stmt|;
call|(
modifier|*
name|line_func
call|)
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
operator|&
name|p0
argument_list|,
operator|&
name|p1
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
end_function

begin_define
define|#
directive|define
name|mfb_clrdot32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p
parameter_list|)
define|\
value|{ *((u_int *)addr + (p->y * ddy) + (p->x>> 5))&= mfbrmask32[p->x& 0x1f]; }
end_define

begin_define
define|#
directive|define
name|mfb_invdot32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p
parameter_list|)
define|\
value|{ *((u_int *)addr + (p->y * ddy) + (p->x>> 5)) ^= mfbmask32[p->x& 0x1f]; }
end_define

begin_define
define|#
directive|define
name|mfb_setdot32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p
parameter_list|)
define|\
value|{ *((u_int *)addr + (p->y * ddy) + (p->x>> 5)) |= mfbmask32[p->x& 0x1f]; }
end_define

begin_function
name|void
name|fbmem_rop_dot_BF_clr
parameter_list|(
name|fb
parameter_list|,
name|clip
parameter_list|,
name|np
parameter_list|,
name|ps
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|lRectangle
modifier|*
name|clip
decl_stmt|;
specifier|register
name|int
name|np
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|ps
decl_stmt|;
block|{
specifier|register
name|int
name|x0
decl_stmt|,
name|y0
decl_stmt|,
name|x1
decl_stmt|,
name|y1
decl_stmt|;
if|if
condition|(
name|clip
condition|)
block|{
name|x0
operator|=
name|clip
operator|->
name|origin
operator|.
name|x
expr_stmt|;
name|y0
operator|=
name|clip
operator|->
name|origin
operator|.
name|y
expr_stmt|;
name|x1
operator|=
name|x0
operator|+
name|clip
operator|->
name|extent
operator|.
name|x
operator|-
literal|1
expr_stmt|;
name|y1
operator|=
name|y0
operator|+
name|clip
operator|->
name|extent
operator|.
name|y
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|x1
operator|<=
literal|0
operator|||
name|y1
operator|<=
literal|0
condition|)
return|return;
while|while
condition|(
name|np
operator|--
operator|>
literal|0
condition|)
block|{
if|if
condition|(
operator|(
name|ps
operator|->
name|x
operator|>=
name|x0
operator|)
operator|&&
operator|(
name|ps
operator|->
name|y
operator|>=
name|y0
operator|)
operator|&&
operator|(
name|ps
operator|->
name|x
operator|<=
name|x1
operator|)
operator|&&
operator|(
name|ps
operator|->
name|y
operator|<=
name|y1
operator|)
condition|)
name|mfb_clrdot32
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|ps
argument_list|)
expr_stmt|;
name|ps
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|np
operator|--
operator|>
literal|0
condition|)
block|{
name|mfb_clrdot32
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|ps
argument_list|)
expr_stmt|;
name|ps
operator|++
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
name|fbmem_rop_dot_BF_inv
parameter_list|(
name|fb
parameter_list|,
name|clip
parameter_list|,
name|np
parameter_list|,
name|ps
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|lRectangle
modifier|*
name|clip
decl_stmt|;
specifier|register
name|int
name|np
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|ps
decl_stmt|;
block|{
specifier|register
name|int
name|x0
decl_stmt|,
name|y0
decl_stmt|,
name|x1
decl_stmt|,
name|y1
decl_stmt|;
if|if
condition|(
name|clip
condition|)
block|{
name|x0
operator|=
name|clip
operator|->
name|origin
operator|.
name|x
expr_stmt|;
name|y0
operator|=
name|clip
operator|->
name|origin
operator|.
name|y
expr_stmt|;
name|x1
operator|=
name|x0
operator|+
name|clip
operator|->
name|extent
operator|.
name|x
operator|-
literal|1
expr_stmt|;
name|y1
operator|=
name|y0
operator|+
name|clip
operator|->
name|extent
operator|.
name|y
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|x1
operator|<=
literal|0
operator|||
name|y1
operator|<=
literal|0
condition|)
return|return;
while|while
condition|(
name|np
operator|--
operator|>
literal|0
condition|)
block|{
if|if
condition|(
operator|(
name|ps
operator|->
name|x
operator|>=
name|x0
operator|)
operator|&&
operator|(
name|ps
operator|->
name|y
operator|>=
name|y0
operator|)
operator|&&
operator|(
name|ps
operator|->
name|x
operator|<=
name|x1
operator|)
operator|&&
operator|(
name|ps
operator|->
name|y
operator|<=
name|y1
operator|)
condition|)
name|mfb_invdot32
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|ps
argument_list|)
expr_stmt|;
name|ps
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|np
operator|--
operator|>
literal|0
condition|)
block|{
name|mfb_invdot32
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|ps
argument_list|)
expr_stmt|;
name|ps
operator|++
expr_stmt|;
block|}
block|}
block|}
end_function

begin_function
name|void
name|fbmem_rop_dot
parameter_list|(
name|fb
parameter_list|,
name|clip
parameter_list|,
name|ropf
parameter_list|,
name|forc
parameter_list|,
name|auxc
parameter_list|,
name|transp
parameter_list|,
name|wplane
parameter_list|,
name|np
parameter_list|,
name|ps
parameter_list|)
specifier|register
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|lRectangle
modifier|*
name|clip
decl_stmt|;
name|int
name|ropf
decl_stmt|,
name|forc
decl_stmt|,
name|auxc
decl_stmt|,
name|transp
decl_stmt|;
specifier|register
name|int
name|np
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|ps
decl_stmt|;
block|{
specifier|register
name|int
name|x0
decl_stmt|,
name|y0
decl_stmt|,
name|x1
decl_stmt|,
name|y1
decl_stmt|;
if|if
condition|(
operator|!
operator|(
name|wplane
operator|&
literal|1
operator|)
condition|)
return|return;
name|linerop
argument_list|(
name|fb
argument_list|,
name|ropf
argument_list|,
name|forc
argument_list|,
name|auxc
argument_list|,
name|transp
argument_list|)
expr_stmt|;
switch|switch
condition|(
name|fb
operator|->
name|funcvec
index|[
literal|0
index|]
operator|&
literal|3
condition|)
block|{
case|case
literal|1
case|:
break|break;
case|case
literal|0
case|:
name|fbmem_rop_dot_BF_clr
argument_list|(
name|fb
argument_list|,
name|clip
argument_list|,
name|np
argument_list|,
name|ps
argument_list|)
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|fbmem_rop_dot_BF_inv
argument_list|(
name|fb
argument_list|,
name|clip
argument_list|,
name|np
argument_list|,
name|ps
argument_list|)
expr_stmt|;
break|break;
default|default:
if|if
condition|(
name|clip
condition|)
block|{
name|x0
operator|=
name|clip
operator|->
name|origin
operator|.
name|x
expr_stmt|;
name|y0
operator|=
name|clip
operator|->
name|origin
operator|.
name|y
expr_stmt|;
name|x1
operator|=
name|x0
operator|+
name|clip
operator|->
name|extent
operator|.
name|x
operator|-
literal|1
expr_stmt|;
name|y1
operator|=
name|y0
operator|+
name|clip
operator|->
name|extent
operator|.
name|y
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|x1
operator|<=
literal|0
operator|||
name|y1
operator|<=
literal|0
condition|)
return|return;
while|while
condition|(
name|np
operator|--
operator|>
literal|0
condition|)
block|{
if|if
condition|(
operator|(
name|ps
operator|->
name|x
operator|>=
name|x0
operator|)
operator|&&
operator|(
name|ps
operator|->
name|y
operator|>=
name|y0
operator|)
operator|&&
operator|(
name|ps
operator|->
name|x
operator|<=
name|x1
operator|)
operator|&&
operator|(
name|ps
operator|->
name|y
operator|<=
name|y1
operator|)
condition|)
name|mfb_setdot32
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|ps
argument_list|)
expr_stmt|;
name|ps
operator|++
expr_stmt|;
block|}
block|}
else|else
block|{
while|while
condition|(
name|np
operator|--
operator|>
literal|0
condition|)
block|{
name|mfb_setdot32
argument_list|(
name|fb
argument_list|,
name|VRAM_START
argument_list|(
name|fb
argument_list|)
argument_list|,
name|VRAM_WIDTH
argument_list|(
name|fb
argument_list|)
argument_list|,
name|ps
argument_list|)
expr_stmt|;
name|ps
operator|++
expr_stmt|;
block|}
block|}
block|}
block|}
end_function

begin_ifdef
ifdef|#
directive|ifdef
name|notdef
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|mfb_clrdot32
end_ifndef

begin_function
name|void
name|mfb_clrdot32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|unsigned
name|int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p
decl_stmt|;
block|{
name|addr
operator|+=
operator|(
name|p
operator|->
name|y
operator|*
name|ddy
operator|)
operator|+
operator|(
name|p
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
operator|*
name|addr
operator|&=
name|mfbrmask32
index|[
name|p
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* ! mfb_clrdot32 */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|mfb_invdot32
end_ifndef

begin_function
name|void
name|mfb_invdot32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|unsigned
name|int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p
decl_stmt|;
block|{
name|addr
operator|+=
operator|(
name|p
operator|->
name|y
operator|*
name|ddy
operator|)
operator|+
operator|(
name|p
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
operator|*
name|addr
operator|^=
name|mfbmask32
index|[
name|p
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* ! mfb_invdot32 */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|mfb_setdot32
end_ifndef

begin_function
name|void
name|mfb_setdot32
parameter_list|(
name|fb
parameter_list|,
name|addr
parameter_list|,
name|ddy
parameter_list|,
name|p
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|unsigned
name|int
modifier|*
name|addr
decl_stmt|;
specifier|register
name|int
name|ddy
decl_stmt|;
specifier|register
name|lPoint
modifier|*
name|p
decl_stmt|;
block|{
name|addr
operator|+=
operator|(
name|p
operator|->
name|y
operator|*
name|ddy
operator|)
operator|+
operator|(
name|p
operator|->
name|x
operator|>>
literal|5
operator|)
expr_stmt|;
operator|*
name|addr
operator||=
name|mfbmask32
index|[
name|p
operator|->
name|x
operator|&
literal|0x1f
index|]
expr_stmt|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* ! mfb_setdot32 */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* CPU_SINGLE */
end_comment

end_unit

