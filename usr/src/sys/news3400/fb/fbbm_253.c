begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1992 The Regents of the University of California.  * All rights reserved.  *  * This code is derived from software contributed to Berkeley by  * Sony Corp. and Kazumasa Utashiro of Software Research Associates, Inc.  *  * %sccs.include.redist.c%  *  * from: $Hdr: fbbm_253.c,v 4.300 91/06/09 06:33:12 root Rel41 $ SONY;  *  *	@(#)fbbm_253.c	7.5 (Berkeley) %G%  */
end_comment

begin_comment
comment|/*  * NWB-253 frame buffer driver  */
end_comment

begin_include
include|#
directive|include
file|"nwb253.h"
end_include

begin_if
if|#
directive|if
name|NNWB253
operator|>
literal|0
end_if

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<news3400/iop/framebuf.h>
end_include

begin_include
include|#
directive|include
file|<news3400/iop/fbreg.h>
end_include

begin_include
include|#
directive|include
file|<news3400/fb/fbdefs.h>
end_include

begin_function_decl
specifier|extern
name|int
name|error
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|nofunc
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|ext_fnt24_addr
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|char
modifier|*
name|ext_fnt_addr
index|[]
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|extern
name|short
name|zero
index|[]
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|NOP
value|{ int j; for (j = 0; j< 40; j++); }
end_define

begin_define
define|#
directive|define
name|VRAM_START
value|(unsigned int *)(0x88000000)
end_define

begin_define
define|#
directive|define
name|VRAM_WIDTH
value|(2048/32)
end_define

begin_function
name|void
name|nwb253attach
parameter_list|(
name|i
parameter_list|)
block|{
comment|/* temporary hack for pseudo-device initialization */
empty_stmt|;
block|}
end_function

begin_function
specifier|static
name|caddr_t
name|fb253_Krom_addr
parameter_list|(
name|fb
parameter_list|,
name|c
parameter_list|,
name|sr
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|int
name|c
decl_stmt|;
name|lRectangle
modifier|*
name|sr
decl_stmt|;
block|{
name|unsigned
name|int
name|cvcode16
parameter_list|()
function_decl|;
if|if
condition|(
operator|(
name|c
operator|>=
literal|0x20
operator|)
operator|&&
operator|(
name|c
operator|<=
literal|0x7e
operator|)
condition|)
block|{
comment|/* 		 * ASCII char 		 */
name|c
operator|-=
literal|' '
expr_stmt|;
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x1f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0xe0
operator|)
operator|<<
literal|2
operator|)
operator|)
operator|<<
literal|7
expr_stmt|;
return|return
call|(
name|caddr_t
call|)
argument_list|(
name|c
operator|+
name|fb
operator|->
name|Krom_base
operator|+
operator|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|?
literal|0
else|:
literal|96
operator|)
argument_list|)
return|;
block|}
elseif|else
if|if
condition|(
operator|(
name|c
operator|>=
literal|0xa1
operator|)
operator|&&
operator|(
name|c
operator|<=
literal|0xdf
operator|)
condition|)
block|{
comment|/* 		 * KANA char 		 */
if|if
condition|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|)
return|return
operator|(
operator|(
name|caddr_t
operator|)
name|ext_fnt24_addr
index|[
name|c
operator|+
literal|64
index|]
operator|)
return|;
else|else
return|return
operator|(
operator|(
name|caddr_t
operator|)
name|ext_fnt_addr
index|[
name|c
operator|+
literal|64
index|]
operator|)
return|;
block|}
elseif|else
if|if
condition|(
operator|(
name|c
operator|>=
literal|0x2020
operator|)
operator|&&
operator|(
name|c
operator|<=
literal|0x7e7e
operator|)
condition|)
block|{
comment|/* 		 * KANJI char 		 */
switch|switch
condition|(
name|c
operator|&
literal|0x7000
condition|)
block|{
case|case
literal|0x2000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x1f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x60
operator|)
operator|<<
literal|5
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x700
operator|)
operator|>>
literal|1
operator|)
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
case|case
literal|0x3000
case|:
case|case
literal|0x4000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x7f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0xf00
operator|)
operator|>>
literal|1
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x4000
operator|)
operator|>>
literal|3
operator|)
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
case|case
literal|0x5000
case|:
case|case
literal|0x6000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x7f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0xf00
operator|)
operator|>>
literal|1
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x2000
operator|)
operator|>>
literal|2
operator|)
operator||
literal|0x1000
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
case|case
literal|0x7000
case|:
name|c
operator|=
operator|(
operator|(
name|c
operator|&
literal|0x1f
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x60
operator|)
operator|<<
literal|5
operator|)
operator||
operator|(
operator|(
name|c
operator|&
literal|0x700
operator|)
operator|>>
literal|1
operator|)
operator||
literal|0x1000
operator|)
operator|<<
literal|7
expr_stmt|;
break|break;
block|}
return|return
call|(
name|caddr_t
call|)
argument_list|(
name|c
operator|+
name|fb
operator|->
name|Krom_base
operator|+
operator|(
name|sr
operator|->
name|extent
operator|.
name|y
operator|>
literal|16
condition|?
literal|0
else|:
literal|96
operator|)
argument_list|)
return|;
block|}
else|else
block|{
comment|/* 		 * UNKNOWN char 		 */
return|return
operator|(
name|caddr_t
operator|)
name|zero
return|;
block|}
block|}
end_function

begin_function
specifier|static
name|int
name|fb253_set_dimmer
parameter_list|(
name|fb
parameter_list|,
name|dim
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|int
name|dim
decl_stmt|;
block|{
name|int
name|s
decl_stmt|;
name|fb
operator|->
name|status_flag
operator|=
operator|(
name|fb
operator|->
name|status_flag
operator|&
literal|0xf3
operator|)
operator||
operator|(
operator|(
name|dim
operator|&
literal|3
operator|)
operator|<<
literal|2
operator|)
expr_stmt|;
operator|*
operator|(
specifier|volatile
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
operator|=
name|fb
operator|->
name|status_flag
expr_stmt|;
return|return
operator|(
name|FB_ROK
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|fb253_get_dimmer
parameter_list|(
name|fb
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
block|{
name|int
name|dim
decl_stmt|;
name|dim
operator|=
operator|(
name|fb
operator|->
name|status_flag
operator|>>
literal|2
operator|)
operator|&
literal|3
expr_stmt|;
return|return
operator|(
name|dim
operator|)
return|;
block|}
end_function

begin_function
name|int
name|fb253_get_pixel
parameter_list|(
name|fb
parameter_list|,
name|pixel
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
specifier|register
name|int
name|pixel
decl_stmt|;
block|{
return|return
operator|(
name|pixel
operator|)
return|;
block|}
end_function

begin_macro
name|fb253_ioctl
argument_list|(
argument|fb
argument_list|,
argument|cmd
argument_list|,
argument|data
argument_list|)
end_macro

begin_decl_stmt
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
name|cmd
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|int
modifier|*
name|data
decl_stmt|;
end_decl_stmt

begin_block
block|{
specifier|register
name|int
name|result
init|=
literal|0
decl_stmt|;
switch|switch
condition|(
name|cmd
condition|)
block|{
case|case
name|FB_INTCHECK
case|:
if|if
condition|(
operator|*
operator|(
specifier|volatile
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
operator|&
literal|0x08
condition|)
name|result
operator||=
name|FB_INT_VSYNC
expr_stmt|;
break|break;
case|case
name|FB_INTENABLE
case|:
if|if
condition|(
operator|*
name|data
operator|&
name|FB_INT_VSYNC
condition|)
block|{
name|fb
operator|->
name|status_flag
operator||=
literal|1
expr_stmt|;
operator|*
operator|(
specifier|volatile
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
operator|=
name|fb
operator|->
name|status_flag
expr_stmt|;
name|WB_FLUSH
expr_stmt|;
block|}
break|break;
case|case
name|FB_INTCLEAR
case|:
if|if
condition|(
operator|*
name|data
operator|&
name|FB_INT_VSYNC
condition|)
block|{
name|fb
operator|->
name|status_flag
operator|&=
operator|~
literal|1
expr_stmt|;
operator|*
operator|(
specifier|volatile
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
operator|=
name|fb
operator|->
name|status_flag
expr_stmt|;
name|WB_FLUSH
expr_stmt|;
block|}
break|break;
case|case
name|FB_STATUSCHECK
case|:
break|break;
default|default:
name|result
operator|=
operator|-
literal|1
expr_stmt|;
block|}
return|return
operator|(
name|result
operator|)
return|;
block|}
end_block

begin_function
name|int
name|fb253_get_page
parameter_list|(
name|fb
parameter_list|,
name|off
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|off_t
name|off
decl_stmt|;
block|{
if|if
condition|(
name|off
operator|<
literal|2048
operator|/
literal|8
operator|*
literal|2048
condition|)
comment|/* X/8 * Y */
return|return
operator|(
operator|(
operator|(
name|unsigned
name|int
operator|)
literal|0x8000000
operator|+
name|off
operator|)
operator|>>
name|PGSHIFT
operator|)
return|;
else|else
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
end_function

begin_function
name|int
name|fb253_probe
parameter_list|(
name|unit
parameter_list|)
name|int
name|unit
decl_stmt|;
block|{
if|if
condition|(
name|unit
operator|>=
name|NNWB253
condition|)
return|return
literal|0
return|;
if|if
condition|(
name|badaddr
argument_list|(
literal|0xb8ff0000
argument_list|,
literal|2
argument_list|)
operator|||
name|badaddr
argument_list|(
literal|0xb8e00000
argument_list|,
literal|2
argument_list|)
condition|)
return|return
literal|0
return|;
if|if
condition|(
operator|(
operator|*
operator|(
specifier|volatile
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
operator|&
literal|7
operator|)
operator|==
literal|4
condition|)
return|return
name|FB_NWB253
return|;
return|return
literal|0
return|;
block|}
end_function

begin_function_decl
name|void
name|fbmem_rop_init
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_copy
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_winit
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_write
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_read
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_cinit
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_clear
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_vect
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|void
name|fbmem_rop_dot
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
specifier|static
name|struct
name|fbdev_ops
name|fb253_ops
init|=
block|{
name|fbmem_rop_init
block|,
name|fbmem_rop_copy
block|,
name|fbmem_rop_winit
block|,
name|fbmem_rop_write
block|,
name|fbmem_rop_read
block|,
name|fbmem_rop_cinit
block|,
name|fbmem_rop_clear
block|,
name|fbmem_rop_vect
block|,
name|fbmem_rop_dot
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|error
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|error
block|,
name|fb253_Krom_addr
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|error
block|,
name|error
block|,
name|error
block|,
name|fb253_get_pixel
block|,
name|fb253_set_dimmer
block|,
name|fb253_get_dimmer
block|,
name|nofunc
block|,
name|nofunc
block|,
name|fb253_ioctl
block|,
name|fb253_get_page
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|,
operator|(
name|void
argument_list|(
operator|*
argument_list|)
argument_list|()
operator|)
name|nofunc
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
name|nwp512_data1
index|[]
init|=
block|{
literal|0x00
block|,
literal|0x44
block|,
literal|0x01
block|,
literal|0x33
block|,
literal|0x02
block|,
literal|0x3c
block|,
literal|0x03
block|,
literal|0x38
block|,
literal|0x04
block|,
literal|0x84
block|,
literal|0x05
block|,
literal|0x03
block|,
literal|0x06
block|,
literal|0x80
block|,
literal|0x07
block|,
literal|0x80
block|,
literal|0x08
block|,
literal|0x10
block|,
literal|0x09
block|,
literal|0x07
block|,
literal|0x0a
block|,
literal|0x20
block|,
literal|0x0c
block|,
literal|0x00
block|,
literal|0x0d
block|,
literal|0x00
block|,
literal|0x1b
block|,
literal|0x03
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
name|nwp512_data2
index|[]
init|=
block|{
literal|0x1e
block|,
literal|0x08
block|,
literal|0x20
block|,
literal|0x08
block|,
literal|0x21
block|,
literal|0x0d
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
name|nwp518_data1
index|[]
init|=
block|{
literal|0x00
block|,
literal|0x52
block|,
literal|0x01
block|,
literal|0x40
block|,
literal|0x02
block|,
literal|0x4a
block|,
literal|0x03
block|,
literal|0x49
block|,
literal|0x04
block|,
literal|0x63
block|,
literal|0x05
block|,
literal|0x02
block|,
literal|0x06
block|,
literal|0x60
block|,
literal|0x07
block|,
literal|0x60
block|,
literal|0x08
block|,
literal|0x10
block|,
literal|0x09
block|,
literal|0x07
block|,
literal|0x0a
block|,
literal|0x20
block|,
literal|0x0c
block|,
literal|0x00
block|,
literal|0x0d
block|,
literal|0x00
block|,
literal|0x1b
block|,
literal|0x04
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
name|nwp518_data2
index|[]
init|=
block|{
literal|0x1e
block|,
literal|0x08
block|,
literal|0x20
block|,
literal|0x00
block|,
literal|0x21
block|,
literal|0x00
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
name|nwe501_data1
index|[]
init|=
block|{
literal|0x00
block|,
literal|0x4b
block|,
literal|0x01
block|,
literal|0x40
block|,
literal|0x02
block|,
literal|0x4a
block|,
literal|0x03
block|,
literal|0x43
block|,
literal|0x04
block|,
literal|0x64
block|,
literal|0x05
block|,
literal|0x02
block|,
literal|0x06
block|,
literal|0x60
block|,
literal|0x07
block|,
literal|0x60
block|,
literal|0x08
block|,
literal|0x10
block|,
literal|0x09
block|,
literal|0x07
block|,
literal|0x0a
block|,
literal|0x20
block|,
literal|0x0c
block|,
literal|0x00
block|,
literal|0x0d
block|,
literal|0x00
block|,
literal|0x1b
block|,
literal|0x04
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
name|nwe501_data2
index|[]
init|=
block|{
literal|0x1e
block|,
literal|0x08
block|,
literal|0x20
block|,
literal|0x00
block|,
literal|0x21
block|,
literal|0x00
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
specifier|static
name|u_short
modifier|*
name|crtc_data
index|[
literal|3
index|]
index|[
literal|2
index|]
init|=
block|{
name|nwp512_data1
block|,
name|nwp512_data2
block|,
name|nwp518_data1
block|,
name|nwp518_data2
block|,
name|nwe501_data1
block|,
name|nwe501_data2
block|, }
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|fb253_init
parameter_list|(
name|fb
parameter_list|,
name|id
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
name|int
name|id
decl_stmt|;
block|{
specifier|register
name|int
name|i
decl_stmt|;
specifier|register
specifier|volatile
name|u_short
modifier|*
name|ctlreg
init|=
operator|(
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
decl_stmt|;
specifier|register
specifier|volatile
name|u_short
modifier|*
name|crtreg
init|=
operator|(
name|u_short
operator|*
operator|)
operator|(
literal|0xb8fe0000
operator|)
decl_stmt|;
specifier|register
specifier|volatile
name|u_short
modifier|*
name|p
decl_stmt|;
name|u_short
name|dummy
decl_stmt|;
operator|*
name|ctlreg
operator|=
literal|0
expr_stmt|;
comment|/* stop crtc */
name|NOP
expr_stmt|;
comment|/* initialize crtc without R3{0,1,2} */
name|p
operator|=
name|crtc_data
index|[
name|id
index|]
index|[
literal|0
index|]
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|28
condition|;
name|i
operator|++
control|)
block|{
operator|*
name|crtreg
operator|++
operator|=
operator|*
name|p
operator|++
expr_stmt|;
name|NOP
expr_stmt|;
block|}
operator|*
name|ctlreg
operator|=
literal|0x02
expr_stmt|;
comment|/* start crtc */
name|NOP
expr_stmt|;
comment|/* set crtc control reg */
name|p
operator|=
name|crtc_data
index|[
name|id
index|]
index|[
literal|1
index|]
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|6
condition|;
name|i
operator|++
control|)
block|{
operator|*
name|crtreg
operator|++
operator|=
operator|*
name|p
operator|++
expr_stmt|;
name|NOP
expr_stmt|;
block|}
block|}
end_function

begin_decl_stmt
name|struct
name|mfbdev
name|fb253
init|=
block|{
operator|(
name|caddr_t
operator|)
name|VRAM_START
block|,
name|VRAM_WIDTH
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|fb253_setup
parameter_list|(
name|fb
parameter_list|)
name|struct
name|fbdev
modifier|*
name|fb
decl_stmt|;
block|{
name|int
name|id
decl_stmt|;
if|if
condition|(
name|fb
operator|->
name|type
condition|)
block|{
name|fb
operator|->
name|Mono
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Colorwidth
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|fbNplane
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|planemask
operator|=
literal|0x1
expr_stmt|;
name|fb
operator|->
name|Dimmer
operator|=
literal|1
expr_stmt|;
name|id
operator|=
operator|(
operator|(
operator|*
operator|(
specifier|volatile
name|u_short
operator|*
operator|)
operator|(
literal|0xb8ff0000
operator|)
operator|)
operator|>>
literal|8
operator|)
operator|&
literal|0xf
expr_stmt|;
switch|switch
condition|(
name|id
condition|)
block|{
case|case
literal|0
case|:
name|fb
operator|->
name|FrameRect
operator|.
name|extent
operator|.
name|x
operator|=
literal|2048
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|extent
operator|.
name|y
operator|=
literal|2048
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|extent
operator|.
name|x
operator|=
literal|816
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|extent
operator|.
name|y
operator|=
literal|1024
expr_stmt|;
name|fb
operator|->
name|cursorP
operator|.
name|x
operator|=
literal|816
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|cursorP
operator|.
name|y
operator|=
literal|1024
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|font_w
operator|=
literal|8
expr_stmt|;
name|fb
operator|->
name|font_h
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|char_w
operator|=
literal|10
expr_stmt|;
name|fb
operator|->
name|char_h
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|scr_w
operator|=
literal|816
expr_stmt|;
name|fb
operator|->
name|scr_h
operator|=
literal|1024
expr_stmt|;
name|fb
operator|->
name|ch_pos
operator|=
literal|5
expr_stmt|;
name|fb
operator|->
name|ul_pos
operator|=
literal|22
expr_stmt|;
name|fb
operator|->
name|x_offset
operator|=
literal|8
expr_stmt|;
name|fb
operator|->
name|y_offset
operator|=
literal|8
expr_stmt|;
name|fb
operator|->
name|rit_m
operator|=
literal|80
expr_stmt|;
name|fb
operator|->
name|btm_m
operator|=
literal|42
expr_stmt|;
break|break;
case|case
literal|1
case|:
case|case
literal|2
case|:
name|fb
operator|->
name|FrameRect
operator|.
name|extent
operator|.
name|x
operator|=
literal|2048
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|extent
operator|.
name|y
operator|=
literal|2048
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|extent
operator|.
name|x
operator|=
literal|1024
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|extent
operator|.
name|y
operator|=
literal|768
expr_stmt|;
name|fb
operator|->
name|cursorP
operator|.
name|x
operator|=
literal|1024
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|cursorP
operator|.
name|y
operator|=
literal|768
operator|/
literal|2
expr_stmt|;
name|fb
operator|->
name|font_w
operator|=
literal|8
expr_stmt|;
name|fb
operator|->
name|font_h
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|char_w
operator|=
literal|12
expr_stmt|;
name|fb
operator|->
name|char_h
operator|=
literal|22
expr_stmt|;
name|fb
operator|->
name|scr_w
operator|=
literal|1024
expr_stmt|;
name|fb
operator|->
name|scr_h
operator|=
literal|768
expr_stmt|;
name|fb
operator|->
name|ch_pos
operator|=
literal|2
expr_stmt|;
name|fb
operator|->
name|ul_pos
operator|=
literal|20
expr_stmt|;
name|fb
operator|->
name|x_offset
operator|=
literal|32
expr_stmt|;
name|fb
operator|->
name|y_offset
operator|=
literal|21
expr_stmt|;
name|fb
operator|->
name|rit_m
operator|=
literal|80
expr_stmt|;
name|fb
operator|->
name|btm_m
operator|=
literal|33
expr_stmt|;
break|break;
block|}
name|fb
operator|->
name|FrameRect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|FrameRect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|VisRect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|type
operator|=
name|BM_MEM
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|depth
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|width
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|extent
operator|.
name|x
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_BM0
operator|.
name|rect
operator|.
name|extent
operator|.
name|y
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|type
operator|=
name|BM_MEM
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|depth
operator|=
literal|1
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|width
operator|=
literal|2
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|origin
operator|.
name|x
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|origin
operator|.
name|y
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|extent
operator|.
name|x
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|Krom_BM1
operator|.
name|rect
operator|.
name|extent
operator|.
name|y
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|Krom_base
operator|=
operator|(
name|char
operator|*
operator|)
operator|(
literal|0xb8e00000
operator|)
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent0
operator|.
name|x
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent0
operator|.
name|y
operator|=
literal|16
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent1
operator|.
name|x
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|Krom_font_extent1
operator|.
name|y
operator|=
literal|24
expr_stmt|;
name|fb
operator|->
name|cursorSet
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|cursorVis
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|cursorShow
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|status_flag
operator|=
literal|2
expr_stmt|;
name|fb
operator|->
name|run_flag
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|hard_cursor
operator|=
literal|0
expr_stmt|;
name|fb
operator|->
name|fbbm_op
operator|=
operator|&
name|fb253_ops
expr_stmt|;
name|fb
operator|->
name|private
operator|=
operator|(
name|caddr_t
operator|)
operator|&
name|fb253
expr_stmt|;
name|fb253_init
argument_list|(
name|fb
argument_list|,
name|id
argument_list|)
expr_stmt|;
block|}
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* NNWB253> 0 */
end_comment

end_unit

