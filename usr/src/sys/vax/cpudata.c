begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1982, 1986, 1988 Regents of the University of California.  * All rights reserved.  The Berkeley software License Agreement  * specifies the terms and conditions for redistribution.  *  *	@(#)cpudata.c	7.4 (Berkeley) 7/9/88  */
end_comment

begin_include
include|#
directive|include
file|"pte.h"
end_include

begin_include
include|#
directive|include
file|"param.h"
end_include

begin_include
include|#
directive|include
file|"cpu.h"
end_include

begin_include
include|#
directive|include
file|"nexus.h"
end_include

begin_include
include|#
directive|include
file|"ioa.h"
end_include

begin_include
include|#
directive|include
file|"../vaxbi/bireg.h"
end_include

begin_include
include|#
directive|include
file|"../vaxuba/ubareg.h"
end_include

begin_comment
comment|/*  * Initialization of per-cpu data structures.  */
end_comment

begin_comment
comment|/*  * These are the (fixed) physical addresses of the  * unibus memory for each of the possible unibus adapters.  * Note that on some machines the unibus memory addresses  * are actually indexed by the unibus adapter type code.  */
end_comment

begin_if
if|#
directive|if
name|VAX8600
end_if

begin_decl_stmt
name|caddr_t
name|umaddr8600a
index|[
literal|4
index|]
init|=
block|{
operator|(
name|caddr_t
operator|)
name|UMEMA8600
argument_list|(
literal|0
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEMA8600
argument_list|(
literal|1
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEMA8600
argument_list|(
literal|2
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEMA8600
argument_list|(
literal|3
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|caddr_t
name|umaddr8600b
index|[
literal|4
index|]
init|=
block|{
operator|(
name|caddr_t
operator|)
name|UMEMB8600
argument_list|(
literal|0
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEMB8600
argument_list|(
literal|1
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEMB8600
argument_list|(
literal|2
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEMB8600
argument_list|(
literal|3
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX780
end_if

begin_decl_stmt
name|caddr_t
name|umaddr780
index|[
literal|4
index|]
init|=
block|{
operator|(
name|caddr_t
operator|)
name|UMEM780
argument_list|(
literal|0
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEM780
argument_list|(
literal|1
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEM780
argument_list|(
literal|2
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEM780
argument_list|(
literal|3
argument_list|)
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX750
end_if

begin_decl_stmt
name|caddr_t
name|umaddr750
index|[
literal|2
index|]
init|=
block|{
operator|(
name|caddr_t
operator|)
name|UMEM750
argument_list|(
literal|0
argument_list|)
block|,
operator|(
name|caddr_t
operator|)
name|UMEM750
argument_list|(
literal|1
argument_list|)
block|, }
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX730
end_if

begin_decl_stmt
name|caddr_t
name|umaddr730
index|[
literal|1
index|]
init|=
block|{
operator|(
name|caddr_t
operator|)
name|UMEM730
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  * Information to patch around the stupidity of configuration  * registers not returning types on some of the processors.  */
end_comment

begin_if
if|#
directive|if
name|VAX750
end_if

begin_decl_stmt
name|short
name|nexty750
index|[
name|NNEX750
index|]
init|=
block|{
name|NEX_MEM16
block|,
name|NEX_MEM16
block|,
name|NEX_MEM16
block|,
name|NEX_MEM16
block|,
name|NEX_MBA
block|,
name|NEX_MBA
block|,
name|NEX_MBA
block|,
name|NEX_MBA
block|,
name|NEX_UBA0
block|,
name|NEX_UBA1
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX730
end_if

begin_decl_stmt
name|short
name|nexty730
index|[
name|NNEX730
index|]
init|=
block|{
name|NEX_MEM16
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|,
name|NEX_ANY
block|, }
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX8800
end_if

begin_comment
comment|/* I think this is how the thing is shaped: */
end_comment

begin_decl_stmt
name|struct
name|bibus
name|bi8800
index|[]
init|=
block|{
block|{
name|BI_BASE
argument_list|(
literal|0
argument_list|)
block|}
block|,
block|{
name|BI_BASE
argument_list|(
literal|1
argument_list|)
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io8800
init|=
block|{
block|{
name|IO_BIA
block|,
name|somewhere
block|,
name|somesize
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|bi8800
index|[
literal|0
index|]
block|}
block|,
block|{
name|IO_BIA
block|,
name|somewhere
block|,
name|somesize
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|bi8800
index|[
literal|1
index|]
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* but you will have to make it work yourself (sorry) */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX8600
end_if

begin_decl_stmt
name|struct
name|nexusconnect
name|sbi8600
index|[]
init|=
block|{
block|{
name|NNEX8600
block|,
name|NEXA8600
block|,
name|DW780
block|,
name|NBDP8600
block|,
name|umaddr8600a
block|,
literal|0
block|}
block|,
block|{
name|NNEX8600
block|,
name|NEXB8600
block|,
name|DW780
block|,
name|NBDP8600
block|,
name|umaddr8600b
block|,
literal|0
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io8600
index|[]
init|=
block|{
block|{
name|IO_ABUS
block|,
name|IOA8600
argument_list|(
literal|0
argument_list|)
block|,
name|IOAMAPSIZ
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|sbi8600
index|[
literal|0
index|]
block|}
block|,
block|{
name|IO_ABUS
block|,
name|IOA8600
argument_list|(
literal|1
argument_list|)
block|,
name|IOAMAPSIZ
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|sbi8600
index|[
literal|1
index|]
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX8200
end_if

begin_comment
comment|/* BEWARE, this is all limited to one BI for now */
end_comment

begin_decl_stmt
name|struct
name|bibus
name|bi8200
index|[]
init|=
block|{
block|{
name|BI_BASE
argument_list|(
literal|0
argument_list|)
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io8200
index|[]
init|=
block|{
block|{
name|IO_BI
block|,
literal|0
block|,
literal|0
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|bi8200
index|[
literal|0
index|]
block|}
block|, }
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX780
end_if

begin_decl_stmt
name|struct
name|nexusconnect
name|sbi780
init|=
block|{
name|NNEX780
block|,
name|NEX780
block|,
name|DW780
block|,
name|NBDP780
block|,
name|umaddr780
block|,
literal|0
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io780
index|[]
init|=
block|{
name|IO_SBI780
block|,
literal|0
block|,
literal|0
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|sbi780
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX750
end_if

begin_decl_stmt
name|struct
name|nexusconnect
name|cmi750
init|=
block|{
name|NNEX750
block|,
name|NEX750
block|,
name|DW750
block|,
name|NBDP750
block|,
name|umaddr750
block|,
name|nexty750
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io750
index|[]
init|=
block|{
name|IO_CMI750
block|,
literal|0
block|,
literal|0
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|cmi750
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX730
end_if

begin_decl_stmt
name|struct
name|nexusconnect
name|xxx730
init|=
block|{
name|NNEX730
block|,
name|NEX730
block|,
name|DW730
block|,
name|NBDP730
block|,
name|umaddr730
block|,
name|nexty730
block|, }
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io730
index|[]
init|=
block|{
name|IO_XXX730
block|,
literal|0
block|,
literal|0
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|xxx730
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX630
end_if

begin_decl_stmt
name|struct
name|qbus
name|qbus630
init|=
block|{
name|QBA
block|,
name|QBAPAGES
block|,
name|QBAMAP630
block|,
operator|(
name|caddr_t
operator|)
name|QMEM630
block|,
operator|(
name|caddr_t
operator|)
name|QIOPAGE630
block|}
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|iobus
name|io630
index|[]
init|=
block|{
name|IO_QBUS
block|,
literal|0
block|,
literal|0
block|,
operator|(
name|caddr_t
operator|)
operator|&
name|qbus630
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  * Clock info  */
end_comment

begin_if
if|#
directive|if
name|VAX8600
operator|||
name|VAX780
operator|||
name|VAX750
operator|||
name|VAX730
end_if

begin_decl_stmt
name|int
name|vaxstd_clkstartrt
argument_list|()
decl_stmt|,
name|vaxstd_clkread
argument_list|()
decl_stmt|,
name|vaxstd_clkwrite
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|clockops
name|vaxstd_clockops
init|=
block|{
name|vaxstd_clkstartrt
block|,
name|vaxstd_clkread
block|,
name|vaxstd_clkwrite
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX8200
end_if

begin_decl_stmt
name|int
name|vaxstd_clkstartrt
argument_list|()
decl_stmt|,
name|ka820_clkread
argument_list|()
decl_stmt|,
name|ka820_clkwrite
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|clockops
name|ka820_clockops
init|=
block|{
name|vaxstd_clkstartrt
block|,
name|ka820_clkread
block|,
name|ka820_clkwrite
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX630
end_if

begin_decl_stmt
name|int
name|ka630_clkstartrt
argument_list|()
decl_stmt|,
name|ka630_clkread
argument_list|()
decl_stmt|,
name|ka630_clkwrite
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|clockops
name|ka630_clockops
init|=
block|{
name|ka630_clkstartrt
block|,
name|ka630_clkread
block|,
name|ka630_clkwrite
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/*  * CPU dependent routines.  */
end_comment

begin_if
if|#
directive|if
name|VAX8600
end_if

begin_decl_stmt
name|int
name|ka860_memenable
argument_list|()
decl_stmt|,
name|ka860_memerr
argument_list|()
decl_stmt|,
name|ka860_mchk
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|cpuops
name|ka860_ops
init|=
block|{
operator|&
name|vaxstd_clockops
block|,
name|ka860_memenable
block|,
name|ka860_memerr
block|,
name|ka860_mchk
block|,
name|NULL
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX8200
end_if

begin_decl_stmt
name|int
name|ka820_memenable
argument_list|()
decl_stmt|,
name|ka820_memerr
argument_list|()
decl_stmt|,
name|ka820_mchk
argument_list|()
decl_stmt|,
name|ka820_init
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|cpuops
name|ka820_ops
init|=
block|{
operator|&
name|ka820_clockops
block|,
name|ka820_memenable
block|,
name|ka820_memerr
block|,
name|ka820_mchk
block|,
name|ka820_init
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX780
end_if

begin_decl_stmt
name|int
name|ka780_memenable
argument_list|()
decl_stmt|,
name|ka780_memerr
argument_list|()
decl_stmt|,
name|ka780_mchk
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|cpuops
name|ka780_ops
init|=
block|{
operator|&
name|vaxstd_clockops
block|,
name|ka780_memenable
block|,
name|ka780_memerr
block|,
name|ka780_mchk
block|,
name|NULL
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX750
end_if

begin_decl_stmt
name|int
name|ka750_memenable
argument_list|()
decl_stmt|,
name|ka750_memerr
argument_list|()
decl_stmt|,
name|ka750_mchk
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|cpuops
name|ka750_ops
init|=
block|{
operator|&
name|vaxstd_clockops
block|,
name|ka750_memenable
block|,
name|ka750_memerr
block|,
name|ka750_mchk
block|,
name|NULL
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX730
end_if

begin_decl_stmt
name|int
name|ka730_memenable
argument_list|()
decl_stmt|,
name|ka730_memerr
argument_list|()
decl_stmt|,
name|ka730_mchk
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|cpuops
name|ka730_ops
init|=
block|{
operator|&
name|vaxstd_clockops
block|,
name|ka730_memenable
block|,
name|ka730_memerr
block|,
name|ka730_mchk
block|,
name|NULL
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_if
if|#
directive|if
name|VAX630
end_if

begin_decl_stmt
name|int
name|ka630_memnop
argument_list|()
decl_stmt|,
name|ka630_mchk
argument_list|()
decl_stmt|,
name|ka630_init
argument_list|()
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|struct
name|cpuops
name|ka630_ops
init|=
block|{
operator|&
name|ka630_clockops
block|,
name|ka630_memnop
block|,
name|ka630_memnop
block|,
name|ka630_mchk
block|,
name|ka630_init
block|}
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_decl_stmt
name|struct
name|percpu
name|percpu
index|[]
init|=
block|{
if|#
directive|if
name|VAX8600
block|{
name|VAX_8600
block|,
literal|6
block|,
literal|2
block|,
name|io8600
block|,
operator|&
name|ka860_ops
block|}
block|,
endif|#
directive|endif
if|#
directive|if
name|VAX8200
block|{
name|VAX_8200
block|,
literal|2
block|,
literal|1
block|,
name|io8200
block|,
operator|&
name|ka820_ops
block|}
block|,
endif|#
directive|endif
if|#
directive|if
name|VAX780
block|{
name|VAX_780
block|,
literal|2
block|,
literal|1
block|,
name|io780
block|,
operator|&
name|ka780_ops
block|}
block|,
endif|#
directive|endif
if|#
directive|if
name|VAX750
block|{
name|VAX_750
block|,
literal|1
block|,
literal|1
block|,
name|io750
block|,
operator|&
name|ka750_ops
block|}
block|,
endif|#
directive|endif
if|#
directive|if
name|VAX730
block|{
name|VAX_730
block|,
literal|1
block|,
literal|1
block|,
name|io730
block|,
operator|&
name|ka730_ops
block|}
block|,
endif|#
directive|endif
if|#
directive|if
name|VAX630
block|{
name|VAX_630
block|,
literal|2
block|,
literal|1
block|,
name|io630
block|,
operator|&
name|ka630_ops
block|}
block|,
endif|#
directive|endif
literal|0
block|, }
decl_stmt|;
end_decl_stmt

end_unit

