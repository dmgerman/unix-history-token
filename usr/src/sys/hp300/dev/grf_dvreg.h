begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*  * Copyright (c) 1988 University of Utah.  * Copyright (c) 1990, 1993  *	The Regents of the University of California.  All rights reserved.  *  * This code is derived from software contributed to Berkeley by  * the Systems Programming Group of the University of Utah Computer  * Science Department.  *  * %sccs.include.redist.c%  *  * from: Utah $Hdr: grf_dvreg.h 1.5 92/01/21$  *  *	@(#)grf_dvreg.h	8.1 (Berkeley) %G%  */
end_comment

begin_include
include|#
directive|include
file|<hp/dev/iotypes.h>
end_include

begin_comment
comment|/* XXX */
end_comment

begin_comment
comment|/*  * Map of the DaVinci frame buffer controller chip in memory ...  */
end_comment

begin_define
define|#
directive|define
name|db_waitbusy
parameter_list|(
name|regaddr
parameter_list|)
define|\
value|while (((struct dvboxfb *)(regaddr))->wbusy || \ 	       ((struct dvboxfb *)(regaddr))->as_busy) DELAY(100)
end_define

begin_struct
struct|struct
name|rgb
block|{
name|u_char
label|:
literal|8
operator|,
operator|:
literal|8
operator|,
operator|:
literal|8
expr_stmt|;
name|vu_char
name|red
decl_stmt|;
name|u_char
label|:
literal|8
operator|,
operator|:
literal|8
operator|,
operator|:
literal|8
expr_stmt|;
name|vu_char
name|green
decl_stmt|;
name|u_char
label|:
literal|8
operator|,
operator|:
literal|8
operator|,
operator|:
literal|8
expr_stmt|;
name|vu_char
name|blue
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|dvboxfb
block|{
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|reset
decl_stmt|;
comment|/* reset register		0x01 */
name|u_char
name|fb_address
decl_stmt|;
comment|/* frame buffer address 	0x02 */
name|vu_char
name|interrupt
decl_stmt|;
comment|/* interrupt register		0x03 */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|fbwmsb
decl_stmt|;
comment|/* frame buffer width MSB	0x05 */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|fbwlsb
decl_stmt|;
comment|/* frame buffer width MSB	0x07 */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|fbhmsb
decl_stmt|;
comment|/* frame buffer height MSB	0x09 */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|fbhlsb
decl_stmt|;
comment|/* frame buffer height MSB	0x0b */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|dwmsb
decl_stmt|;
comment|/* display width MSB		0x0d */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|dwlsb
decl_stmt|;
comment|/* display width MSB		0x0f */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|dhmsb
decl_stmt|;
comment|/* display height MSB		0x11 */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|dhlsb
decl_stmt|;
comment|/* display height MSB		0x13 */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|fbid
decl_stmt|;
comment|/* frame buffer id		0x15 */
name|u_char
name|f1
index|[
literal|0x47
index|]
decl_stmt|;
name|vu_char
name|fbomsb
decl_stmt|;
comment|/* frame buffer offset MSB	0x5d */
name|u_char
label|:
literal|8
expr_stmt|;
name|vu_char
name|fbolsb
decl_stmt|;
comment|/* frame buffer offset LSB	0x5f */
name|u_char
name|f2
index|[
literal|16359
index|]
decl_stmt|;
name|vu_char
name|wbusy
decl_stmt|;
comment|/* Window move in progress    0x4047 */
name|u_char
name|f3
index|[
literal|0x405b
operator|-
literal|0x4047
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|as_busy
decl_stmt|;
comment|/* Scan accessing frame buf.  0x405B */
name|u_char
name|f4
index|[
literal|0x4090
operator|-
literal|0x405b
operator|-
literal|1
index|]
decl_stmt|;
name|vu_int
name|fbwen
decl_stmt|;
comment|/* Frame buffer write enable  0x4090 */
name|u_char
name|f5
index|[
literal|0x409f
operator|-
literal|0x4090
operator|-
literal|4
index|]
decl_stmt|;
name|vu_char
name|wmove
decl_stmt|;
comment|/* Initiate window move.      0x409F */
name|u_char
name|f6
index|[
literal|0x40b3
operator|-
literal|0x409f
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|fold
decl_stmt|;
comment|/* Byte/longword per pixel    0x40B3 */
name|u_char
name|f7
index|[
literal|0x40b7
operator|-
literal|0x40b3
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|opwen
decl_stmt|;
comment|/* Overlay plane write enable 0x40B7 */
name|u_char
name|f8
index|[
literal|0x40bf
operator|-
literal|0x40b7
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|drive
decl_stmt|;
comment|/* Select FB vs. Overlay.     0x40BF */
name|u_char
name|f8a
index|[
literal|0x40cb
operator|-
literal|0x40bf
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|zconfig
decl_stmt|;
comment|/* Z buffer configuration     0x40CB */
name|u_char
name|f8b
index|[
literal|0x40cf
operator|-
literal|0x40cb
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|alt_rr
decl_stmt|;
comment|/* Alternate replacement rule 0x40CF */
name|u_char
name|f8c
index|[
literal|0x40d3
operator|-
literal|0x40cf
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|zrr
decl_stmt|;
comment|/* Z replacement rule	      0x40D3 */
name|u_char
name|f9
index|[
literal|0x40d7
operator|-
literal|0x40d3
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|en_scan
decl_stmt|;
comment|/* Enable scan DTACK.	      0x40D7 */
name|u_char
name|f10
index|[
literal|0x40ef
operator|-
literal|0x40d7
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|rep_rule
decl_stmt|;
comment|/* Replacement rule	      0x40EF */
name|u_char
name|f11
index|[
literal|0x40f2
operator|-
literal|0x40ef
operator|-
literal|1
index|]
decl_stmt|;
name|vu_short
name|source_x
decl_stmt|;
comment|/* Window source X origin     0x40F2 */
name|u_char
name|f12
index|[
literal|0x40f6
operator|-
literal|0x40f2
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|source_y
decl_stmt|;
comment|/* Window source Y origin     0x40F6 */
name|u_char
name|f13
index|[
literal|0x40fa
operator|-
literal|0x40f6
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|dest_x
decl_stmt|;
comment|/* Window dest X origin       0x40FA */
name|u_char
name|f14
index|[
literal|0x40fe
operator|-
literal|0x40fa
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|dest_y
decl_stmt|;
comment|/* Window dest Y origin       0x40FE */
name|u_char
name|f15
index|[
literal|0x4102
operator|-
literal|0x40fe
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|wwidth
decl_stmt|;
comment|/* Window width		      0x4102 */
name|u_char
name|f16
index|[
literal|0x4106
operator|-
literal|0x4102
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|wheight
decl_stmt|;
comment|/* Window height	      0x4106 */
name|u_char
name|f17
index|[
literal|0x6003
operator|-
literal|0x4106
operator|-
literal|2
index|]
decl_stmt|;
name|vu_char
name|cmapbank
decl_stmt|;
comment|/* Bank select (0 or 1)       0x6003 */
name|u_char
name|f18
index|[
literal|0x6007
operator|-
literal|0x6003
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|dispen
decl_stmt|;
comment|/* Display enable	      0x6007 */
name|u_char
name|f18a
index|[
literal|0x600B
operator|-
literal|0x6007
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|fbvenp
decl_stmt|;
comment|/* Frame buffer video enable  0x600B */
name|u_char
name|f18b
index|[
literal|0x6017
operator|-
literal|0x600B
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|fbvens
decl_stmt|;
comment|/* fbvenp blink counterpart   0x6017 */
name|u_char
name|f19
index|[
literal|0x6023
operator|-
literal|0x6017
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|vdrive
decl_stmt|;
comment|/* Video display mode	      0x6023 */
name|u_char
name|f20
index|[
literal|0x6083
operator|-
literal|0x6023
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|panxh
decl_stmt|;
comment|/* Pan display in X (high)    0x6083 */
name|u_char
name|f21
index|[
literal|0x6087
operator|-
literal|0x6083
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|panxl
decl_stmt|;
comment|/* Pan display in X (low)     0x6087 */
name|u_char
name|f22
index|[
literal|0x608b
operator|-
literal|0x6087
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|panyh
decl_stmt|;
comment|/* Pan display in Y (high)    0x608B */
name|u_char
name|f23
index|[
literal|0x608f
operator|-
literal|0x608b
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|panyl
decl_stmt|;
comment|/* Pan display in Y (low)     0x608F */
name|u_char
name|f24
index|[
literal|0x6093
operator|-
literal|0x608f
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|zoom
decl_stmt|;
comment|/* Zoom factor		      0x6093 */
name|u_char
name|f25
index|[
literal|0x6097
operator|-
literal|0x6093
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|pz_trig
decl_stmt|;
comment|/* Pan& zoom trigger	      0x6097 */
name|u_char
name|f26
index|[
literal|0x609b
operator|-
literal|0x6097
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|ovly0p
decl_stmt|;
comment|/* Overlay 0 primary map      0x609B */
name|u_char
name|f27
index|[
literal|0x609f
operator|-
literal|0x609b
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|ovly1p
decl_stmt|;
comment|/* Overlay 1 primary map      0x609F */
name|u_char
name|f28
index|[
literal|0x60a3
operator|-
literal|0x609f
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|ovly0s
decl_stmt|;
comment|/* Overlay 0 secondary map    0x60A3 */
name|u_char
name|f29
index|[
literal|0x60a7
operator|-
literal|0x60a3
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|ovly1s
decl_stmt|;
comment|/* Overlay 1 secondary map    0x60A7 */
name|u_char
name|f30
index|[
literal|0x60ab
operator|-
literal|0x60a7
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|opvenp
decl_stmt|;
comment|/* Overlay video enable	      0x60AB */
name|u_char
name|f31
index|[
literal|0x60af
operator|-
literal|0x60ab
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|opvens
decl_stmt|;
comment|/* Overlay blink enable	      0x60AF */
name|u_char
name|f32
index|[
literal|0x60b3
operator|-
literal|0x60af
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|fv_trig
decl_stmt|;
comment|/* Trigger control registers  0x60B3 */
name|u_char
name|f33
index|[
literal|0x60b7
operator|-
literal|0x60b3
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|cdwidth
decl_stmt|;
comment|/* Iris cdwidth timing reg.   0x60B7 */
name|u_char
name|f34
index|[
literal|0x60bb
operator|-
literal|0x60b7
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|chstart
decl_stmt|;
comment|/* Iris chstart timing reg.   0x60BB */
name|u_char
name|f35
index|[
literal|0x60bf
operator|-
literal|0x60bb
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|cvwidth
decl_stmt|;
comment|/* Iris cvwidth timing reg.   0x60BF */
name|u_char
name|f36
index|[
literal|0x6100
operator|-
literal|0x60bf
operator|-
literal|1
index|]
decl_stmt|;
name|struct
name|rgb
name|rgb
index|[
literal|8
index|]
decl_stmt|;
comment|/* overlay color map */
name|u_char
name|f37
index|[
literal|0x6403
operator|-
literal|0x6100
operator|-
sizeof|sizeof
argument_list|(
expr|struct
name|rgb
argument_list|)
operator|*
literal|8
index|]
decl_stmt|;
name|vu_char
name|red0
decl_stmt|;
name|u_char
name|f38
index|[
literal|0x6803
operator|-
literal|0x6403
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|green0
decl_stmt|;
name|u_char
name|f39
index|[
literal|0x6c03
operator|-
literal|0x6803
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|blue0
decl_stmt|;
name|u_char
name|f40
index|[
literal|0x7403
operator|-
literal|0x6c03
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|red1
decl_stmt|;
name|u_char
name|f41
index|[
literal|0x7803
operator|-
literal|0x7403
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|green1
decl_stmt|;
name|u_char
name|f42
index|[
literal|0x7c03
operator|-
literal|0x7803
operator|-
literal|1
index|]
decl_stmt|;
name|vu_char
name|blue1
decl_stmt|;
name|u_char
name|f43
index|[
literal|0x8012
operator|-
literal|0x7c03
operator|-
literal|1
index|]
decl_stmt|;
name|vu_short
name|status1
decl_stmt|;
comment|/* Master Status register     0x8012 */
name|u_char
name|f44
index|[
literal|0xC226
operator|-
literal|0x8012
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|trans
decl_stmt|;
comment|/* Transparency		      0xC226 */
name|u_char
name|f45
index|[
literal|0xC23E
operator|-
literal|0xC226
operator|-
literal|2
index|]
decl_stmt|;
name|vu_short
name|pstop
decl_stmt|;
comment|/* Pace value control	      0xc23e */
block|}
struct|;
end_struct

end_unit

