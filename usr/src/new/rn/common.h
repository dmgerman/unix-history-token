begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* $Header: common.h,v 4.3.1.4 86/10/31 15:46:09 lwall Exp $  *   * $Log:	common.h,v $  * Revision 4.3.1.4  86/10/31  15:46:09  lwall  * Expanded maximum number of .newsrc lines for net reorganization.  *   * Revision 4.3.1.3  85/05/23  17:19:32  lwall  * Now allows 'r' and 'f' on null articles.  *   * Revision 4.3.1.2  85/05/13  09:30:39  lwall  * Added CUSTOMLINES option.  *   * Revision 4.3.1.1  85/05/10  11:32:04  lwall  * Branch for patches.  *   * Revision 4.3  85/05/01  11:37:11  lwall  * Baseline for release with 4.3bsd.  *   */
end_comment

begin_include
include|#
directive|include
file|"config.h"
end_include

begin_comment
comment|/* generated by installation script */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|WHOAMI
end_ifdef

begin_include
include|#
directive|include
file|<whoami.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<sys/stat.h>
end_include

begin_include
include|#
directive|include
file|<ctype.h>
end_include

begin_ifndef
ifndef|#
directive|ifndef
name|isalnum
end_ifndef

begin_define
define|#
directive|define
name|isalnum
parameter_list|(
name|c
parameter_list|)
value|(isalpha(c) || isdigit(c))
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_include
include|#
directive|include
file|<errno.h>
end_include

begin_include
include|#
directive|include
file|<signal.h>
end_include

begin_ifdef
ifdef|#
directive|ifdef
name|IOCTL
end_ifdef

begin_include
include|#
directive|include
file|<sys/ioctl.h>
end_include

begin_endif
endif|#
directive|endif
endif|IOCTL
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FCNTL
end_ifdef

begin_include
include|#
directive|include
file|<fcntl.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|TERMIO
end_ifdef

begin_include
include|#
directive|include
file|<termio.h>
end_include

begin_else
else|#
directive|else
end_else

begin_include
include|#
directive|include
file|<sgtty.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|GETPWENT
end_ifdef

begin_include
include|#
directive|include
file|<pwd.h>
end_include

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|BITSPERBYTE
value|8
end_define

begin_define
define|#
directive|define
name|LBUFLEN
value|512
end_define

begin_comment
comment|/* line buffer length */
end_comment

begin_comment
comment|/* (don't worry, .newsrc lines can exceed this) */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|pdp11
end_ifdef

begin_define
define|#
directive|define
name|CBUFLEN
value|256
end_define

begin_comment
comment|/* command buffer length */
end_comment

begin_define
define|#
directive|define
name|PUSHSIZE
value|128
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|CBUFLEN
value|512
end_define

begin_comment
comment|/* command buffer length */
end_comment

begin_define
define|#
directive|define
name|PUSHSIZE
value|256
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|pdp11
end_ifdef

begin_define
define|#
directive|define
name|MAXFILENAME
value|128
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MAXFILENAME
value|512
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|LONGKEY
value|15
end_define

begin_comment
comment|/* longest keyword: currently "posting-version" */
end_comment

begin_define
define|#
directive|define
name|FINISHCMD
value|0177
end_define

begin_comment
comment|/* some handy defs */
end_comment

begin_define
define|#
directive|define
name|bool
value|char
end_define

begin_define
define|#
directive|define
name|TRUE
value|(1)
end_define

begin_define
define|#
directive|define
name|FALSE
value|(0)
end_define

begin_define
define|#
directive|define
name|Null
parameter_list|(
name|t
parameter_list|)
value|((t)0)
end_define

begin_define
define|#
directive|define
name|Nullch
value|Null(char *)
end_define

begin_define
define|#
directive|define
name|Nullfp
value|Null(FILE *)
end_define

begin_define
define|#
directive|define
name|Ctl
parameter_list|(
name|ch
parameter_list|)
value|(ch& 037)
end_define

begin_define
define|#
directive|define
name|strNE
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|)
value|(strcmp(s1,s2))
end_define

begin_define
define|#
directive|define
name|strEQ
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|)
value|(!strcmp(s1,s2))
end_define

begin_define
define|#
directive|define
name|strnNE
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|,
name|l
parameter_list|)
value|(strncmp(s1,s2,l))
end_define

begin_define
define|#
directive|define
name|strnEQ
parameter_list|(
name|s1
parameter_list|,
name|s2
parameter_list|,
name|l
parameter_list|)
value|(!strncmp(s1,s2,l))
end_define

begin_comment
comment|/* Things we can figure out ourselves */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|SIGTSTP
end_ifdef

begin_define
define|#
directive|define
name|BERKELEY
end_define

begin_comment
comment|/* include job control signals? */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|SIGPROF
end_ifdef

begin_define
define|#
directive|define
name|BSD42
end_define

begin_comment
comment|/* do we have Berkeley 4.2? */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|FIONREAD
end_ifdef

begin_define
define|#
directive|define
name|PENDING
end_define

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|O_NDELAY
end_ifdef

begin_define
define|#
directive|define
name|PENDING
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|EUNICE
end_ifdef

begin_define
define|#
directive|define
name|LINKART
end_define

begin_comment
comment|/* add 1 level of possible indirection */
end_comment

begin_define
define|#
directive|define
name|UNLINK
parameter_list|(
name|victim
parameter_list|)
value|while (!unlink(victim))
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|UNLINK
parameter_list|(
name|victim
parameter_list|)
value|unlink(victim)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* Valid substitutions for strings marked with % comment are:  *	%a	Current article number  *	%A	Full name of current article (%P/%c/%a)  *		(if LINKART defined, is the name of the real article)  *	%b	Destination of a save command, a mailbox or command  *	%B	The byte offset to the beginning of the article for saves  *		with or without the header  *	%c	Current newsgroup, directory form  *	%C	Current newsgroup, dot form  *	%d	%P/%c  *	%D	Old Distribution: line  *	%f	Old From: line or Reply-To: line  *	%F	Newsgroups to followup to from Newsgroups: and Followup-To:  *	%h	Name of header file to pass to mail or news poster  *	%H	Host name (yours)  *	%i	Old Message-I.D.: line, with<>  *	%I	Inclusion indicator  *	%l	News administrator login name  *	%L	Login name (yours)  *	%M	Number of articles markd with M  *	%n	Newsgroups from source article  *	%N	Full name (yours)  *	%o	Organization (yours)  *	%O	Original working directory (where you ran rn from)  *	%p	Your private news directory (-d switch)  *	%P	Public news spool directory (SPOOLDIR)  *	%r	Last reference (parent article id)  *	%R	New references list  *	%s	Subject, with all Re's and (nf)'s stripped off  *	%S	Subject, with one Re stripped off  *	%t	New To: line derived from From: and Reply-To (Internet always)  *	%T	New To: line derived from Path:  *	%u	Number of unread articles  *	%U	Number of unread articles disregarding current article  *	%x	News library directory, usually /usr/lib/news  *	%X	Rn library directory, usually %x/rn  *	%z	Size of current article in bytes.  *	%~	Home directory  *	%.	Directory containing . files  *	%$	current process number  *	%{name} Environment variable "name".  %{name-default} form allowed.  *	%[name]	Header line beginning with "Name: ", without "Name: "   *	%"prompt"  *		Print prompt and insert what is typed.  *	%`command`  *		Insert output of command.  *	%(test_text=pattern?if_text:else_text)  *		Substitute if_text if test_text matches pattern, otherwise  *		substitute else_text.  Use != for negated match.  *		% substitutions are done on test_text, if_text, and else_text.  *		(Note: %() only works if CONDSUB defined.)  *	%digit	Substitute the text matched by the nth bracket in the last  *		pattern that had brackets.  %0 matches the last bracket  *		matched, in case you had alternatives.  *  *	Put ^ in the middle to capitalize the first letter: %^C = Net.jokes  *	Put _ in the middle to capitalize last component: %_c = net/Jokes  *  *	~ interpretation in filename expansion happens after % expansion, so  *	you could put ~%{NEWSLOGNAME-news} and it will expand correctly.  */
end_comment

begin_comment
comment|/* *** System Dependent Stuff *** */
end_comment

begin_comment
comment|/* NOTE: many of these are defined in the config.h file */
end_comment

begin_comment
comment|/* name of organization */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ORGNAME
end_ifndef

begin_define
define|#
directive|define
name|ORGNAME
value|"ACME Widget Company, Widget Falls, Southern North Dakota"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|MBOXCHAR
end_ifndef

begin_define
define|#
directive|define
name|MBOXCHAR
value|'F'
end_define

begin_comment
comment|/* how to recognize a mailbox by 1st char */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|ROOTID
end_ifndef

begin_define
define|#
directive|define
name|ROOTID
value|0
end_define

begin_comment
comment|/* uid of superuser */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|NORMSIG
end_ifdef

begin_define
define|#
directive|define
name|sigset
value|signal
end_define

begin_define
define|#
directive|define
name|sigignore
parameter_list|(
name|sig
parameter_list|)
value|signal(sig,SIG_IGN)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|LOGDIRFIELD
end_ifndef

begin_define
define|#
directive|define
name|LOGDIRFIELD
value|6
end_define

begin_comment
comment|/* Which field (origin 1) is the */
end_comment

begin_comment
comment|/* login directory in /etc/passwd? */
end_comment

begin_comment
comment|/* (If it is not kept in passwd, */
end_comment

begin_comment
comment|/* but getpwnam() returns it, */
end_comment

begin_comment
comment|/* define the symbol GETPWENT) */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|GCOSFIELD
end_ifndef

begin_define
define|#
directive|define
name|GCOSFIELD
value|5
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|NEGCHAR
end_ifndef

begin_define
define|#
directive|define
name|NEGCHAR
value|'!'
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* Space conservation section */
end_comment

begin_comment
comment|/* To save D space, cut down size of MAXRCLINE, NGMAX, VARYSIZE. */
end_comment

begin_define
define|#
directive|define
name|MAXRCLINE
value|1000
end_define

begin_comment
comment|/* number of lines allowed in .newsrc */
end_comment

begin_comment
comment|/* several parallel arrays affected. */
end_comment

begin_comment
comment|/* (You can have more lines in the active file, */
end_comment

begin_comment
comment|/* just not in the .newsrc) */
end_comment

begin_define
define|#
directive|define
name|HASHSIZ
value|1103
end_define

begin_comment
comment|/* should be prime, and at least MAXRCLINE + 10% */
end_comment

begin_define
define|#
directive|define
name|NGMAX
value|100
end_define

begin_comment
comment|/* number of newsgroups allowed on command line */
end_comment

begin_comment
comment|/* undefine ONLY symbol to disable "only" feature */
end_comment

begin_define
define|#
directive|define
name|VARYSIZE
value|256
end_define

begin_comment
comment|/* this makes a block 1024 bytes long in DECville */
end_comment

begin_comment
comment|/* (used by virtual array routines) */
end_comment

begin_comment
comment|/* Undefine any of the following features to save both I and D space */
end_comment

begin_comment
comment|/* In general, earlier ones are easier to get along without */
end_comment

begin_comment
comment|/* Pdp11's without split I and D may have to undefine them all */
end_comment

begin_define
define|#
directive|define
name|DEBUGGING
end_define

begin_comment
comment|/* include debugging code */
end_comment

begin_define
define|#
directive|define
name|CUSTOMLINES
end_define

begin_comment
comment|/* include code for HIDELINE and PAGESTOP */
end_comment

begin_define
define|#
directive|define
name|PUSHBACK
end_define

begin_comment
comment|/* macros and keymaps using pushback buffer */
end_comment

begin_define
define|#
directive|define
name|SPEEDOVERMEM
end_define

begin_comment
comment|/* use more memory to run faster */
end_comment

begin_define
define|#
directive|define
name|WORDERASE
end_define

begin_comment
comment|/* enable ^W to erase a word */
end_comment

begin_define
define|#
directive|define
name|MAILCALL
end_define

begin_comment
comment|/* check periodically for mail */
end_comment

begin_define
define|#
directive|define
name|CLEAREOL
end_define

begin_comment
comment|/* use clear to end-of-line instead of clear screen */
end_comment

begin_define
define|#
directive|define
name|NOFIREWORKS
end_define

begin_comment
comment|/* keep whole screen from flashing on certain */
end_comment

begin_comment
comment|/* terminals such as older Televideos */
end_comment

begin_define
define|#
directive|define
name|VERIFY
end_define

begin_comment
comment|/* echo the command they just typed */
end_comment

begin_define
define|#
directive|define
name|HASHNG
end_define

begin_comment
comment|/* hash newsgroup lines for fast lookup-- */
end_comment

begin_comment
comment|/* linear search used if not defined */
end_comment

begin_define
define|#
directive|define
name|CONDSUB
end_define

begin_comment
comment|/* allow %(cond?text:text) */
end_comment

begin_define
define|#
directive|define
name|BACKTICK
end_define

begin_comment
comment|/* allow %`command` */
end_comment

begin_define
define|#
directive|define
name|PROMPTTTY
end_define

begin_comment
comment|/* allow %"prompt" */
end_comment

begin_define
define|#
directive|define
name|ULSMARTS
end_define

begin_comment
comment|/* catch _^H in text and do underlining */
end_comment

begin_define
define|#
directive|define
name|TERMMOD
end_define

begin_comment
comment|/* allow terminal type modifier on switches */
end_comment

begin_define
define|#
directive|define
name|BAUDMOD
end_define

begin_comment
comment|/* allow baudrate modifier on switches */
end_comment

begin_define
define|#
directive|define
name|GETLOGIN
end_define

begin_comment
comment|/* use getlogin() routine as backup to environment */
end_comment

begin_comment
comment|/* variables USER or LOGNAME */
end_comment

begin_define
define|#
directive|define
name|ORGFILE
end_define

begin_comment
comment|/* if organization begins with /, look up in file */
end_comment

begin_define
define|#
directive|define
name|TILDENAME
end_define

begin_comment
comment|/* allow ~logname expansion */
end_comment

begin_define
define|#
directive|define
name|SETENV
end_define

begin_comment
comment|/* allow command line environment variable setting */
end_comment

begin_define
define|#
directive|define
name|GETWD
end_define

begin_comment
comment|/* use our getwd() instead of piped in pwd */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|BSD42
end_ifndef

begin_comment
comment|/* 4.2 sites should just use groups for this */
end_comment

begin_define
define|#
directive|define
name|SETUIDGID
end_define

begin_comment
comment|/* substitute eaccess() for access() so that rn */
end_comment

begin_comment
comment|/* can run setuid or setgid */
end_comment

begin_comment
comment|/* if not setuid or setgid, you don't need it */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|MAKEDIR
end_define

begin_comment
comment|/* use our makedir() instead of shell script */
end_comment

begin_define
define|#
directive|define
name|MEMHELP
end_define

begin_comment
comment|/* keep help messages in memory */
end_comment

begin_define
define|#
directive|define
name|VERBOSE
end_define

begin_comment
comment|/* compile in more informative messages */
end_comment

begin_define
define|#
directive|define
name|TERSE
end_define

begin_comment
comment|/* compile in shorter messages */
end_comment

begin_comment
comment|/* (Note: both VERBOSE and TERSE can be defined; -t 			 * sets terse mode.  One or the other MUST be defined. 			 */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|pdp11
end_ifndef

begin_define
define|#
directive|define
name|CACHESUBJ
end_define

begin_comment
comment|/* cache subject lines in memory */
end_comment

begin_comment
comment|/* without this ^N still works but runs really slow */
end_comment

begin_comment
comment|/* but you save lots and lots of D space */
end_comment

begin_define
define|#
directive|define
name|CACHEFIRST
end_define

begin_comment
comment|/* keep absolute first article numbers in memory */
end_comment

begin_comment
comment|/* cost: about 2k */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|ROTATION
end_define

begin_comment
comment|/* enable x, X and ^X commands to work */
end_comment

begin_define
define|#
directive|define
name|DELBOGUS
end_define

begin_comment
comment|/* ask if bogus newsgroups should be deleted */
end_comment

begin_define
define|#
directive|define
name|RELOCATE
end_define

begin_comment
comment|/* allow newsgroup rearranging */
end_comment

begin_define
define|#
directive|define
name|ESCSUBS
end_define

begin_comment
comment|/* escape substitutions in multi-character commands */
end_comment

begin_define
define|#
directive|define
name|DELAYMARK
end_define

begin_comment
comment|/* allow articles to be temporarily marked as read */
end_comment

begin_comment
comment|/* until exit from current newsgroup or Y command */
end_comment

begin_define
define|#
directive|define
name|MCHASE
end_define

begin_comment
comment|/* unmark xrefed articles on m or M */
end_comment

begin_define
define|#
directive|define
name|MUNGHEADER
end_define

begin_comment
comment|/* allow alternate header formatting via */
end_comment

begin_comment
comment|/* environment variable ALTHEADER (not impl) */
end_comment

begin_define
define|#
directive|define
name|ASYNC_PARSE
end_define

begin_comment
comment|/* allow parsing headers asyncronously to reading */
end_comment

begin_comment
comment|/* used by MCHASE and MUNGHEADER */
end_comment

begin_define
define|#
directive|define
name|FINDNEWNG
end_define

begin_comment
comment|/* check for new newsgroups on startup */
end_comment

begin_define
define|#
directive|define
name|FASTNEW
end_define

begin_comment
comment|/* do optimizations on FINDNEWNG for faster startup */
end_comment

begin_comment
comment|/* (this optimization can make occasional mistakes */
end_comment

begin_comment
comment|/* if a group is removed and another group of the */
end_comment

begin_comment
comment|/* same length is added, and if no softpointers are */
end_comment

begin_comment
comment|/* affected by said change.) */
end_comment

begin_define
define|#
directive|define
name|INNERSEARCH
end_define

begin_comment
comment|/* search command 'g' with article */
end_comment

begin_define
define|#
directive|define
name|CATCHUP
end_define

begin_comment
comment|/* catchup command at newsgroup level */
end_comment

begin_define
define|#
directive|define
name|NGSEARCH
end_define

begin_comment
comment|/* newsgroup pattern matching */
end_comment

begin_define
define|#
directive|define
name|ONLY
end_define

begin_comment
comment|/* newsgroup restrictions by pattern */
end_comment

begin_define
define|#
directive|define
name|KILLFILES
end_define

begin_comment
comment|/* automatic article killer files */
end_comment

begin_define
define|#
directive|define
name|ARTSEARCH
end_define

begin_comment
comment|/* pattern searches among articles */
end_comment

begin_comment
comment|/* /, ?, ^N, ^P, k, K */
end_comment

begin_comment
comment|/* some dependencies among options */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ARTSEARCH
end_ifndef

begin_undef
undef|#
directive|undef
name|KILLFILES
end_undef

begin_undef
undef|#
directive|undef
name|INNERSEARCH
end_undef

begin_undef
undef|#
directive|undef
name|CACHESUBJ
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|DELAYMARK
end_ifndef

begin_ifndef
ifndef|#
directive|ifndef
name|MCHASE
end_ifndef

begin_ifndef
ifndef|#
directive|ifndef
name|MUNGHEADER
end_ifndef

begin_undef
undef|#
directive|undef
name|ASYNC_PARSE
end_undef

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SETUIDGID
end_ifndef

begin_define
define|#
directive|define
name|eaccess
value|access
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|ONLY
end_ifdef

begin_comment
comment|/* idiot lint doesn't grok #if */
end_comment

begin_define
define|#
directive|define
name|NGSORONLY
end_define

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|NGSEARCH
end_ifdef

begin_define
define|#
directive|define
name|NGSORONLY
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|VERBOSE
end_ifdef

begin_ifdef
ifdef|#
directive|ifdef
name|TERSE
end_ifdef

begin_define
define|#
directive|define
name|IF
parameter_list|(
name|c
parameter_list|)
value|if (c)
end_define

begin_define
define|#
directive|define
name|ELSE
value|else
end_define

begin_else
else|#
directive|else
else|!TERSE
end_else

begin_define
define|#
directive|define
name|IF
parameter_list|(
name|c
parameter_list|)
end_define

begin_define
define|#
directive|define
name|ELSE
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
else|!VERBOSE
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|TERSE
end_ifndef

begin_define
define|#
directive|define
name|TERSE
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|IF
parameter_list|(
name|c
parameter_list|)
value|"IF" outside of VERBOSE???
end_define

begin_define
define|#
directive|define
name|ELSE
value|"ELSE" outside of VERBOSE???
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|DEBUGGING
end_ifdef

begin_define
define|#
directive|define
name|assert
parameter_list|(
name|ex
parameter_list|)
value|{if (!(ex)){fprintf(stderr,"Assertion failed: file %s, line %d\n", __FILE__, __LINE__);sig_catcher(0);}}
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|assert
parameter_list|(
name|ex
parameter_list|)
value|;
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|SPEEDOVERMEM
end_ifdef

begin_define
define|#
directive|define
name|OFFSET
parameter_list|(
name|x
parameter_list|)
value|(x)
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|OFFSET
parameter_list|(
name|x
parameter_list|)
value|((x)-absfirst)
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* If you're strapped for space use the help messages in shell scripts */
end_comment

begin_comment
comment|/* if {NG,ART,PAGER,SUBS}HELP is undefined, help messages are in memory */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|MEMHELP
end_ifdef

begin_comment
comment|/* undef MEMHELP above to get them all as sh scripts */
end_comment

begin_undef
undef|#
directive|undef
name|NGHELP
end_undef

begin_undef
undef|#
directive|undef
name|ARTHELP
end_undef

begin_undef
undef|#
directive|undef
name|PAGERHELP
end_undef

begin_undef
undef|#
directive|undef
name|SUBSHELP
end_undef

begin_else
else|#
directive|else
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|NGHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NGHELP
value|"%X/ng.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|ARTHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|ARTHELP
value|"%X/art.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|PAGERHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|PAGERHELP
value|"%X/pager.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SUBSHELP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SUBSHELP
value|"%X/subs.help"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|CLEAREOL
end_ifdef

begin_define
define|#
directive|define
name|TCSIZE
value|512
end_define

begin_comment
comment|/* capacity for termcap strings */
end_comment

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|pdp11
end_ifdef

begin_define
define|#
directive|define
name|TCSIZE
value|256
end_define

begin_comment
comment|/* capacity for termcap strings */
end_comment

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|TCSIZE
value|512
end_define

begin_comment
comment|/* capacity for termcap srings */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* Additional ideas:  *	Make the do_newsgroup() routine a separate process.  *	Keep .newsrc on disk instead of in memory.  *	Overlays, if you have them.  *	Get a bigger machine.  */
end_comment

begin_comment
comment|/* End of Space Conservation Section */
end_comment

begin_comment
comment|/* More System Dependencies */
end_comment

begin_comment
comment|/* news library */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LIB
end_ifndef

begin_comment
comment|/* ~ and %l only ("~%l" is permissable) */
end_comment

begin_define
define|#
directive|define
name|LIB
value|"/usr/lib/news"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* path to private executables */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RNLIB
end_ifndef

begin_comment
comment|/* ~, %x and %l only */
end_comment

begin_define
define|#
directive|define
name|RNLIB
value|"%x/rn"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* system-wide RNINIT switches */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|GLOBINIT
end_ifndef

begin_define
define|#
directive|define
name|GLOBINIT
value|"%X/INIT"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* where to find news files */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SPOOL
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SPOOL
value|"/usr/spool/news"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* file containing list of active newsgroups and max article numbers */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ACTIVE
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|ACTIVE
value|"%x/active"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of history file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|ARTFILE
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|ARTFILE
value|"%x/history"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to setup a new .newsrc */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSETUP
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSETUP
value|"newsetup"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to display a list of un-subscribed-to newsgroups */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSGROUPS
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSGROUPS
value|"newsgroups"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* preferred shell for use in doshell routine */
end_comment

begin_comment
comment|/*  ksh or sh would be okay here */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|PREFSHELL
end_ifndef

begin_define
define|#
directive|define
name|PREFSHELL
value|"/bin/csh"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* path to fastest starting shell */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SH
end_ifndef

begin_define
define|#
directive|define
name|SH
value|"/bin/sh"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* path to default editor */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|DEFEDITOR
end_ifndef

begin_define
define|#
directive|define
name|DEFEDITOR
value|"/usr/ucb/vi"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of macro file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RNMACRO
end_ifndef

begin_ifdef
ifdef|#
directive|ifdef
name|PUSHBACK
end_ifdef

begin_define
define|#
directive|define
name|RNMACRO
value|"%./.rnmac"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of full name */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|FULLNAMEFILE
end_ifndef

begin_ifndef
ifndef|#
directive|ifndef
name|PASSNAMES
end_ifndef

begin_define
define|#
directive|define
name|FULLNAMEFILE
value|"%./.fullname"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* virtual array file name template */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|VARYNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|VARYNAME
value|"/tmp/rnvary.%$"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* file to pass header to followup article poster */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|HEADNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|HEADNAME
value|"%./.rnhead"
end_define

begin_comment
comment|/* or alternately #define HEADNAME "/tmp/rnhead.%$" */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|MAKEDIR
end_ifndef

begin_comment
comment|/* shell script to make n-deep subdirectories */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|DIRMAKER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|DIRMAKER
value|"%X/makedir"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* location of newsrc file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RCNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RCNAME
value|"%./.newsrc"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* temporary newsrc file in case we crash while writing out */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RCTNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RCTNAME
value|"%./.newnewsrc"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* newsrc file at the beginning of this session */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RCBNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RCBNAME
value|"%./.oldnewsrc"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* if existent, contains process number of current or crashed rn */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LOCKNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|LOCKNAME
value|"%./.rnlock"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* information from last invocation of rn */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|LASTNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|LASTNAME
value|"%./.rnlast"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* file with soft pointers into the active file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|SOFTNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SOFTNAME
value|"%./.rnsoft"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* list of article numbers to mark as unread later (see M and Y cmmands) */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|RNDELNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|RNDELNAME
value|"%./.rndelay"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* a motd-like file for rn */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSNEWSNAME
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSNEWSNAME
value|"%X/newsnews"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to send a reply */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MAILPOSTER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|MAILPOSTER
value|"Rnmail -h %h"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|INTERNET
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|MAILHEADER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %t\nSubject: Re: %S\nNewsgroups: %n\nIn-Reply-To: %i\n%(%[references]!=^$?References\\: %[references]\n)Organization: %o\nCc: \nBcc: \n\n"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %t\nSubject: Re: %S\nNewsgroups: %n\nIn-Reply-To: %i\nReferences: %[references]\nCc: \nBcc: \n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|MAILHEADER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %T\nSubject: %(%i=^$?:Re: %S\nNewsgroups: %n\nIn-Reply-To: %i)\n%(%[references]!=^$?References\\: %[references]\n)Organization: %o\nCc: \nBcc: \n\n"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MAILHEADER
value|"To: %T\nSubject: Re: %S\nNewsgroups: %n\nIn-Reply-To: %i\nReferences: %[references]\nCc: \nBcc: \n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|YOUSAID
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|YOUSAID
value|"In article %i you write:"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* command to submit a followup article */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSPOSTER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NEWSPOSTER
value|"Pnews -h %h"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|NEWSHEADER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|NEWSHEADER
value|"Newsgroups: %(%F=^$?%C:%F)\nSubject: %(%S=^$?%\"\n\nSubject: \":Re: %S)\nSummary: \nExpires: \n%(%R=^$?:References: %R\n)Sender: \nReply-To: %L@%H.UUCP (%N)\nFollowup-To: \nDistribution: %(%i=^$?%\"Distribution: \":%D)\nOrganization: %o\nKeywords: %[keywords]\n\n"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|NEWSHEADER
value|"Newsgroups: %F\nSubject: Re: %S\nSummary: \nExpires: \nReferences: %R\nSender: \nReply-To: %L@%H.UUCP (%N)\nFollowup-To: \nDistribution: %D\nOrganization: %o\nKeywords: %[keywords]\n\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|ATTRIBUTION
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|ATTRIBUTION
value|"In article %i %f writes:"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|PIPESAVER
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|PIPESAVER
value|"%(%B=^0$?<%A:tail +%Bc %A |) %b"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|PIPESAVER
value|"tail +%Bc %A | %b"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|NORMSAVER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|NORMSAVER
value|"%X/norm.saver %A %P %c %a %B %C \"%b\""
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|MBOXSAVER
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|MININACT
end_ifdef

begin_comment
comment|/* 2.10.2 site? */
end_comment

begin_define
define|#
directive|define
name|MBOXSAVER
value|"%X/mbox.saver %A %P %c %a %B %C \"%b\" \"From %T %`date`\""
end_define

begin_else
else|#
directive|else
end_else

begin_ifdef
ifdef|#
directive|ifdef
name|CONDSUB
end_ifdef

begin_define
define|#
directive|define
name|MBOXSAVER
value|"%X/mbox.saver %A %P %c %a %B %C \"%b\" \"From %T %(%[date]=^\\(\\w*\\), \\(\\w*\\)-\\(\\w*\\)-\\(\\w*\\) \\([^ ]*\\)?%1 %3 %(%2=..?%2: %2) %5 19%4)\""
end_define

begin_comment
comment|/* header munging with a vengeance */
end_comment

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|MBOXSAVER
value|"%X/mbox.saver %A %P %c %a %B %C \"%b\" \"From %T %[posted]\""
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|MKDIRS
end_ifdef

begin_ifndef
ifndef|#
directive|ifndef
name|SAVEDIR
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SAVEDIR
value|"%p/%c"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SAVENAME
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|SAVENAME
value|"%a"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_else
else|#
directive|else
end_else

begin_ifndef
ifndef|#
directive|ifndef
name|SAVEDIR
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|SAVEDIR
value|"%p"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|SAVENAME
end_ifndef

begin_comment
comment|/* % */
end_comment

begin_define
define|#
directive|define
name|SAVENAME
value|"%^C"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|KILLGLOBAL
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|KILLGLOBAL
value|"%p/KILL"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifndef
ifndef|#
directive|ifndef
name|KILLLOCAL
end_ifndef

begin_comment
comment|/* % and ~ */
end_comment

begin_define
define|#
directive|define
name|KILLLOCAL
value|"%p/%c/KILL"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how to cancel an article */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|CANCEL
end_ifndef

begin_ifdef
ifdef|#
directive|ifdef
name|MININACT
end_ifdef

begin_comment
comment|/* 2.10.2 ? */
end_comment

begin_define
define|#
directive|define
name|CANCEL
value|"%x/inews -h< %h"
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|CANCEL
value|"inews -h< %h"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* how to cancel an article, continued */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|CANCELHEADER
end_ifndef

begin_define
define|#
directive|define
name|CANCELHEADER
value|"Newsgroups: %n\nSubject: cmsg cancel %i\nReferences: %R\nReply-To: %L@%H.UUCP (%N)\nDistribution: %D\nOrganization: %o\n"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* where to find the mail file */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|MAILFILE
end_ifndef

begin_define
define|#
directive|define
name|MAILFILE
value|"/usr/spool/mail/%L"
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* some important types */
end_comment

begin_typedef
typedef|typedef
name|int
name|NG_NUM
typedef|;
end_typedef

begin_comment
comment|/* newsgroup number */
end_comment

begin_typedef
typedef|typedef
name|long
name|ART_NUM
typedef|;
end_typedef

begin_comment
comment|/* article number */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|pdp11
end_ifdef

begin_typedef
typedef|typedef
name|short
name|ART_UNREAD
typedef|;
end_typedef

begin_comment
comment|/* ordinarily this should be long */
end_comment

begin_comment
comment|/* like ART_NUM, but assuming that */
end_comment

begin_comment
comment|/* we stay less than 32767 articles */
end_comment

begin_comment
comment|/* behind saves a lot of space. */
end_comment

begin_comment
comment|/* NOTE: do not make unsigned. */
end_comment

begin_else
else|#
directive|else
end_else

begin_typedef
typedef|typedef
name|long
name|ART_UNREAD
typedef|;
end_typedef

begin_endif
endif|#
directive|endif
end_endif

begin_typedef
typedef|typedef
name|long
name|ART_POS
typedef|;
end_typedef

begin_comment
comment|/* char position in article file */
end_comment

begin_typedef
typedef|typedef
name|int
name|ART_LINE
typedef|;
end_typedef

begin_comment
comment|/* line position in article file */
end_comment

begin_typedef
typedef|typedef
name|short
name|ACT_POS
typedef|;
end_typedef

begin_comment
comment|/* char position in active file */
end_comment

begin_typedef
typedef|typedef
name|unsigned
name|int
name|MEM_SIZE
typedef|;
end_typedef

begin_comment
comment|/* for passing to malloc */
end_comment

begin_comment
comment|/* *** end of the machine dependent stuff *** */
end_comment

begin_comment
comment|/* GLOBAL THINGS */
end_comment

begin_comment
comment|/* file statistics area */
end_comment

begin_decl_stmt
name|EXT
name|struct
name|stat
name|filestat
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* various things of type char */
end_comment

begin_function_decl
name|char
modifier|*
name|index
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|rindex
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|getenv
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|strcat
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|strcpy
parameter_list|()
function_decl|;
end_function_decl

begin_function_decl
name|char
modifier|*
name|sprintf
parameter_list|()
function_decl|;
end_function_decl

begin_decl_stmt
name|EXT
name|char
name|buf
index|[
name|LBUFLEN
operator|+
literal|1
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* general purpose line buffer */
end_comment

begin_decl_stmt
name|EXT
name|char
name|cmd_buf
index|[
name|CBUFLEN
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* buffer for formatting system commands */
end_comment

begin_decl_stmt
name|EXT
name|char
modifier|*
name|indstr
name|INIT
argument_list|(
literal|">"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* indent for old article embedded in followup */
end_comment

begin_function_decl
name|EXT
name|char
modifier|*
name|cwd
name|INIT
parameter_list|(
name|Nullch
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* current working directory */
end_comment

begin_function_decl
name|EXT
name|char
modifier|*
name|dfltcmd
name|INIT
parameter_list|(
name|Nullch
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* 1st char is default command */
end_comment

begin_comment
comment|/* switches */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|DEBUGGING
end_ifdef

begin_decl_stmt
name|EXT
name|int
name|debug
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -D */
end_comment

begin_define
define|#
directive|define
name|DEB_INNERSRCH
value|32
end_define

begin_define
define|#
directive|define
name|DEB_FILEXP
value|64
end_define

begin_define
define|#
directive|define
name|DEB_HASH
value|128
end_define

begin_define
define|#
directive|define
name|DEB_XREF_MARKER
value|256
end_define

begin_define
define|#
directive|define
name|DEB_CTLAREA_BITMAP
value|512
end_define

begin_define
define|#
directive|define
name|DEB_SOFT_POINTERS
value|1024
end_define

begin_define
define|#
directive|define
name|DEB_NEWSRC_LINE
value|2048
end_define

begin_define
define|#
directive|define
name|DEB_SEARCH_AHEAD
value|4096
end_define

begin_define
define|#
directive|define
name|DEB_CHECKPOINTING
value|8192
end_define

begin_define
define|#
directive|define
name|DEB_FEED_XREF
value|16384
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|ARTSEARCH
end_ifdef

begin_decl_stmt
name|EXT
name|int
name|scanon
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -S */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_function_decl
name|EXT
name|bool
name|mbox_always
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -M */
end_comment

begin_function_decl
name|EXT
name|bool
name|norm_always
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -N */
end_comment

begin_function_decl
name|EXT
name|bool
name|checkflag
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -c */
end_comment

begin_function_decl
name|EXT
name|bool
name|suppress_cn
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -s */
end_comment

begin_decl_stmt
name|EXT
name|int
name|countdown
name|INIT
argument_list|(
literal|5
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* how many lines to list before invoking -s */
end_comment

begin_function_decl
name|EXT
name|bool
name|muck_up_clear
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -loco */
end_comment

begin_function_decl
name|EXT
name|bool
name|erase_screen
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -e */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|CLEAREOL
end_ifdef

begin_function_decl
name|EXT
name|bool
name|can_home_clear
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* fancy -e -- PWP */
end_comment

begin_endif
endif|#
directive|endif
endif|CLEAREOL
end_endif

begin_function_decl
name|EXT
name|bool
name|findlast
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -r */
end_comment

begin_function_decl
name|EXT
name|bool
name|typeahead
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -T */
end_comment

begin_ifdef
ifdef|#
directive|ifdef
name|VERBOSE
end_ifdef

begin_ifdef
ifdef|#
directive|ifdef
name|TERSE
end_ifdef

begin_function_decl
name|EXT
name|bool
name|verbose
name|INIT
parameter_list|(
name|TRUE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* +t */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|VERIFY
end_ifdef

begin_function_decl
name|EXT
name|bool
name|verify
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -v */
end_comment

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|NOMARKING
value|0
end_define

begin_define
define|#
directive|define
name|STANDOUT
value|1
end_define

begin_define
define|#
directive|define
name|UNDERLINE
value|2
end_define

begin_function_decl
name|EXT
name|int
name|marking
name|INIT
parameter_list|(
name|NOMARKING
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* -m */
end_comment

begin_decl_stmt
name|EXT
name|ART_LINE
name|initlines
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* -i */
end_comment

begin_comment
comment|/* miscellania */
end_comment

begin_decl_stmt
name|long
name|atol
argument_list|()
decl_stmt|,
name|fseek
argument_list|()
decl_stmt|,
name|ftell
argument_list|()
decl_stmt|;
end_decl_stmt

begin_function_decl
name|EXT
name|bool
name|in_ng
name|INIT
parameter_list|(
name|FALSE
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* current state of rn */
end_comment

begin_decl_stmt
name|EXT
name|char
name|mode
name|INIT
argument_list|(
literal|'i'
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* current state of rn */
end_comment

begin_function_decl
name|EXT
name|FILE
modifier|*
name|tmpfp
name|INIT
parameter_list|(
name|Nullfp
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|/* scratch fp used for .rnlock, .rnlast, etc. */
end_comment

begin_decl_stmt
name|EXT
name|NG_NUM
name|nextrcline
name|INIT
argument_list|(
literal|0
argument_list|)
decl_stmt|;
end_decl_stmt

begin_comment
comment|/* 1st unused slot in rcline array */
end_comment

begin_comment
comment|/* startup to avoid checking twice in a row */
end_comment

begin_extern
extern|extern errno;
end_extern

begin_comment
comment|/* Factored strings */
end_comment

begin_decl_stmt
name|EXT
name|char
name|nullstr
index|[]
name|INIT
argument_list|(
literal|""
argument_list|)
decl_stmt|;
end_decl_stmt

begin_function_decl
name|EXT
name|char
name|sh
index|[]
name|INIT
parameter_list|(
name|SH
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|EXT
name|char
name|defeditor
index|[]
name|INIT
parameter_list|(
name|DEFEDITOR
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
name|EXT
name|char
name|hforhelp
index|[]
name|INIT
argument_list|(
literal|"Type h for help.\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|STRICTCR
end_ifdef

begin_decl_stmt
name|EXT
name|char
name|badcr
index|[]
name|INIT
argument_list|(
literal|"\nUnnecessary CR ignored.\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_decl_stmt
name|EXT
name|char
name|readerr
index|[]
name|INIT
argument_list|(
literal|"rn read error"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|unsubto
index|[]
name|INIT
argument_list|(
literal|"\n\nUnsubscribed to newsgroup %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|cantopen
index|[]
name|INIT
argument_list|(
literal|"Can't open %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|EXT
name|char
name|cantcreate
index|[]
name|INIT
argument_list|(
literal|"Can't create %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_ifdef
ifdef|#
directive|ifdef
name|VERBOSE
end_ifdef

begin_decl_stmt
name|EXT
name|char
name|nocd
index|[]
name|INIT
argument_list|(
literal|"Can't chdir to directory %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_else
else|#
directive|else
end_else

begin_decl_stmt
name|EXT
name|char
name|nocd
index|[]
name|INIT
argument_list|(
literal|"Can't find %s\n"
argument_list|)
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|NOLINEBUF
end_ifdef

begin_define
define|#
directive|define
name|FLUSH
value|,fflush(stdout)
end_define

begin_else
else|#
directive|else
end_else

begin_define
define|#
directive|define
name|FLUSH
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_ifdef
ifdef|#
directive|ifdef
name|lint
end_ifdef

begin_undef
undef|#
directive|undef
name|FLUSH
end_undef

begin_define
define|#
directive|define
name|FLUSH
end_define

begin_undef
undef|#
directive|undef
name|putchar
end_undef

begin_define
define|#
directive|define
name|putchar
parameter_list|(
name|c
parameter_list|)
end_define

begin_endif
endif|#
directive|endif
end_endif

end_unit

