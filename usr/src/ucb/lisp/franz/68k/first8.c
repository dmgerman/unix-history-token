begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_decl_stmt
name|char
name|code
index|[
literal|256
index|]
decl_stmt|;
end_decl_stmt

begin_define
define|#
directive|define
name|FIRST
value|3
end_define

begin_define
define|#
directive|define
name|FOLLOW
value|2
end_define

begin_define
define|#
directive|define
name|ZERO
value|6
end_define

begin_define
define|#
directive|define
name|next
parameter_list|()
value|(((c = getc(si))==EOF)? exit(0):0)
end_define

begin_define
define|#
directive|define
name|copy
parameter_list|()
value|putc(c,so)
end_define

begin_define
define|#
directive|define
name|type
parameter_list|()
value|code[(unsigned char)c]
end_define

begin_macro
name|init
argument_list|()
end_macro

begin_block
block|{
name|doit
argument_list|(
name|FIRST
argument_list|,
literal|"ABCDEFGHIJKLMNOPQRSTUVWXYZ_"
argument_list|)
expr_stmt|;
name|doit
argument_list|(
name|FIRST
argument_list|,
literal|"0abcdefghijklmnopqrstuvwxyz_"
argument_list|)
expr_stmt|;
name|doit
argument_list|(
name|FOLLOW
argument_list|,
literal|"123456789"
argument_list|)
expr_stmt|;
block|}
end_block

begin_expr_stmt
name|doit
argument_list|(
name|act
argument_list|,
name|list
argument_list|)
specifier|register
name|unsigned
name|char
operator|*
name|list
expr_stmt|;
end_expr_stmt

begin_block
block|{
while|while
condition|(
operator|*
name|list
condition|)
block|{
name|code
index|[
operator|*
name|list
operator|++
index|]
operator|=
name|act
expr_stmt|;
block|}
block|}
end_block

begin_function
name|main
parameter_list|( )
block|{
specifier|register
name|FILE
modifier|*
name|si
init|=
name|stdin
decl_stmt|,
modifier|*
name|so
init|=
name|stdout
decl_stmt|;
specifier|register
name|c
operator|,
name|count
expr_stmt|;
name|init
argument_list|()
expr_stmt|;
name|copying
label|:
do|do
block|{
name|next
argument_list|()
expr_stmt|;
name|copy
argument_list|()
expr_stmt|;
block|}
do|while
condition|(
name|type
argument_list|()
operator|!=
name|FIRST
condition|)
do|;
name|hexnum
label|:
if|if
condition|(
name|c
operator|==
literal|'0'
condition|)
block|{
name|next
argument_list|()
expr_stmt|;
if|if
condition|(
name|c
operator|==
literal|'X'
operator|||
name|c
operator|==
literal|'x'
condition|)
block|{
do|do
block|{
name|copy
argument_list|()
expr_stmt|;
name|next
argument_list|()
expr_stmt|;
block|}
do|while
condition|(
name|index
argument_list|(
literal|"0123456789abcdefABCDEF"
argument_list|,
name|c
operator|&
literal|0x7f
argument_list|)
operator|>
literal|0
condition|)
do|;
block|}
name|ungetc
argument_list|(
name|c
argument_list|,
name|si
argument_list|)
expr_stmt|;
goto|goto
name|copying
goto|;
block|}
name|counting
label|:
for|for
control|(
name|count
operator|=
literal|0
init|;
name|count
operator|<
literal|7
condition|;
name|count
operator|++
control|)
block|{
name|next
argument_list|()
expr_stmt|;
name|copy
argument_list|()
expr_stmt|;
if|if
condition|(
operator|!
operator|(
name|type
argument_list|()
operator|&
name|FOLLOW
operator|)
condition|)
goto|goto
name|copying
goto|;
block|}
name|squelch
label|:
do|do
block|{
name|next
argument_list|()
expr_stmt|;
block|}
do|while
condition|(
name|type
argument_list|()
operator|&
name|FOLLOW
condition|)
do|;
name|copy
argument_list|()
expr_stmt|;
goto|goto
name|copying
goto|;
block|}
end_function

end_unit

