begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|sccsid
index|[]
init|=
literal|"	dofloat.c	4.2	84/05/05	"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* From Lou Salkind: compat/RCS/dofloat.c,v 1.2 84/01/31 13:33:53 */
end_comment

begin_comment
comment|/*  * Partial PDP-11 floating-point simulator.  Always in double mode,  * chop mode.  All arithmetic done in double-precision. Storing longs  * into or taking longs from general registers doesn't work.  * Overflow is never detected.  */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_define
define|#
directive|define
name|TRUE
value|1
end_define

begin_define
define|#
directive|define
name|FALSE
value|0
end_define

begin_define
define|#
directive|define
name|ABSD
value|0170600
end_define

begin_define
define|#
directive|define
name|ADDD
value|0172000
end_define

begin_define
define|#
directive|define
name|CFCC
value|0170000
end_define

begin_define
define|#
directive|define
name|CLRD
value|0170400
end_define

begin_define
define|#
directive|define
name|CMPD
value|0173400
end_define

begin_define
define|#
directive|define
name|DIVD
value|0174400
end_define

begin_define
define|#
directive|define
name|LDCFD
value|0177400
end_define

begin_define
define|#
directive|define
name|LDCLD
value|0177000
end_define

begin_define
define|#
directive|define
name|LDD
value|0172400
end_define

begin_define
define|#
directive|define
name|LDEXP
value|0176400
end_define

begin_define
define|#
directive|define
name|MODD
value|0171400
end_define

begin_define
define|#
directive|define
name|MULD
value|0171000
end_define

begin_define
define|#
directive|define
name|NEGD
value|0170700
end_define

begin_define
define|#
directive|define
name|SETD
value|0170011
end_define

begin_define
define|#
directive|define
name|SETI
value|0170002
end_define

begin_define
define|#
directive|define
name|SETL
value|0170012
end_define

begin_define
define|#
directive|define
name|STCDL
value|0175400
end_define

begin_define
define|#
directive|define
name|STCDF
value|0176000
end_define

begin_define
define|#
directive|define
name|STD
value|0174000
end_define

begin_define
define|#
directive|define
name|STEXP
value|0175000
end_define

begin_define
define|#
directive|define
name|SUBD
value|0173000
end_define

begin_define
define|#
directive|define
name|TSTD
value|0170500
end_define

begin_struct
specifier|static
struct|struct
block|{
name|unsigned
name|fc
range|:
literal|1
decl_stmt|;
name|unsigned
name|fv
range|:
literal|1
decl_stmt|;
name|unsigned
name|fz
range|:
literal|1
decl_stmt|;
name|unsigned
name|fn
range|:
literal|1
decl_stmt|;
name|unsigned
name|fmm
range|:
literal|1
decl_stmt|;
name|unsigned
name|ft
range|:
literal|1
decl_stmt|;
name|unsigned
name|fl
range|:
literal|1
decl_stmt|;
name|unsigned
name|fd
range|:
literal|1
decl_stmt|;
block|}
name|fps
init|=
name|FALSE
struct|;
end_struct

begin_define
define|#
directive|define
name|FZ
value|fps.fz
end_define

begin_define
define|#
directive|define
name|FN
value|fps.fn
end_define

begin_define
define|#
directive|define
name|FL
value|fps.fl
end_define

begin_define
define|#
directive|define
name|FD
value|fps.fd
end_define

begin_define
define|#
directive|define
name|LMODE
value|FL
end_define

begin_define
define|#
directive|define
name|IMODE
value|(!LMODE)
end_define

begin_decl_stmt
specifier|static
name|double
name|fregs
index|[
literal|6
index|]
decl_stmt|;
end_decl_stmt

begin_macro
name|dofloat
argument_list|(
argument|instr
argument_list|)
end_macro

begin_decl_stmt
name|unsigned
name|int
name|instr
decl_stmt|;
end_decl_stmt

begin_block
block|{
name|int
name|mode
decl_stmt|,
name|reg
decl_stmt|,
name|ac
decl_stmt|;
name|unsigned
name|short
modifier|*
name|x
decl_stmt|,
modifier|*
name|resolve
argument_list|()
decl_stmt|;
define|#
directive|define
name|DOUBLE
value|(*((double *)x))
define|#
directive|define
name|FLOAT
value|(*(float *)x)
define|#
directive|define
name|LONG
value|(*(long *)x)
define|#
directive|define
name|SHORT
value|(*(short *)x)
define|#
directive|define
name|GETDOUBLE
value|(x = resolve(mode, reg, 8, TRUE))
define|#
directive|define
name|GETFLOAT
value|(x = resolve(mode, reg, 4, TRUE))
define|#
directive|define
name|GETLONG
value|(x = resolve(mode, reg, 4, FALSE))
define|#
directive|define
name|GETSHORT
value|(x = resolve(mode, reg, 2, FALSE))
define|#
directive|define
name|FREG
value|fregs[ac]
name|double
name|temp
decl_stmt|;
union|union
block|{
name|double
name|d
decl_stmt|;
name|short
name|s
decl_stmt|;
block|}
name|bits
union|;
switch|switch
condition|(
name|instr
operator|&
literal|0170000
condition|)
block|{
case|case
literal|0170000
case|:
break|break;
default|default:
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Unrecognized instr in dofloat %0o\n"
argument_list|,
name|instr
argument_list|)
expr_stmt|;
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
switch|switch
condition|(
name|instr
operator|&
literal|07000
condition|)
block|{
case|case
literal|0
case|:
switch|switch
condition|(
name|instr
operator|&
literal|0700
condition|)
block|{
case|case
literal|0
case|:
switch|switch
condition|(
name|instr
condition|)
block|{
case|case
name|CFCC
case|:
name|psl
operator|&=
operator|~
literal|017
expr_stmt|;
if|if
condition|(
name|FN
condition|)
block|{
name|psl
operator||=
literal|010
expr_stmt|;
block|}
if|if
condition|(
name|FZ
condition|)
block|{
name|psl
operator||=
literal|04
expr_stmt|;
block|}
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|SETD
case|:
name|FD
operator|=
name|TRUE
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|SETI
case|:
name|FL
operator|=
name|FALSE
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|SETL
case|:
name|FL
operator|=
name|TRUE
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Unrecognized instr in dofloat %0o\n"
argument_list|,
name|instr
argument_list|)
expr_stmt|;
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
default|default:
break|break;
block|}
name|mode
operator|=
operator|(
name|instr
operator|&
literal|070
operator|)
operator|>>
literal|3
expr_stmt|;
name|reg
operator|=
name|instr
operator|&
literal|07
expr_stmt|;
switch|switch
condition|(
name|instr
operator|&
literal|0177700
condition|)
block|{
case|case
name|ABSD
case|:
name|GETDOUBLE
expr_stmt|;
if|if
condition|(
name|DOUBLE
operator|<
literal|0.0
condition|)
block|{
name|DOUBLE
operator|=
operator|-
name|DOUBLE
expr_stmt|;
block|}
name|FZ
operator|=
operator|(
name|DOUBLE
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|DOUBLE
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|CLRD
case|:
name|GETDOUBLE
expr_stmt|;
name|DOUBLE
operator|=
literal|0.0
expr_stmt|;
name|FZ
operator|=
name|TRUE
expr_stmt|;
name|FN
operator|=
name|FALSE
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|NEGD
case|:
name|GETDOUBLE
expr_stmt|;
name|DOUBLE
operator|=
operator|-
name|DOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|DOUBLE
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|DOUBLE
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|TSTD
case|:
name|GETDOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|DOUBLE
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|DOUBLE
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Unrecognized instr in dofloat %0o\n"
argument_list|,
name|instr
argument_list|)
expr_stmt|;
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
default|default:
break|break;
block|}
name|ac
operator|=
operator|(
name|instr
operator|&
literal|0300
operator|)
operator|>>
literal|6
expr_stmt|;
name|mode
operator|=
operator|(
name|instr
operator|&
literal|070
operator|)
operator|>>
literal|3
expr_stmt|;
name|reg
operator|=
name|instr
operator|&
literal|07
expr_stmt|;
switch|switch
condition|(
name|instr
operator|&
literal|0177400
condition|)
block|{
case|case
name|ADDD
case|:
name|GETDOUBLE
expr_stmt|;
name|FREG
operator|+=
name|DOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|CMPD
case|:
name|GETDOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|DOUBLE
operator|==
name|FREG
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|DOUBLE
operator|<
name|FREG
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|DIVD
case|:
name|GETDOUBLE
expr_stmt|;
name|FREG
operator|/=
name|DOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|LDCFD
case|:
name|GETFLOAT
expr_stmt|;
name|FREG
operator|=
name|FLOAT
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|LDCLD
case|:
if|if
condition|(
name|IMODE
condition|)
block|{
name|GETSHORT
expr_stmt|;
name|FREG
operator|=
name|SHORT
expr_stmt|;
block|}
else|else
block|{
name|GETLONG
expr_stmt|;
name|FREG
operator|=
name|fliplong
argument_list|(
name|LONG
argument_list|)
expr_stmt|;
block|}
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|LDD
case|:
name|GETDOUBLE
expr_stmt|;
name|FREG
operator|=
name|DOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|LDEXP
case|:
name|GETSHORT
expr_stmt|;
name|bits
operator|.
name|d
operator|=
name|FREG
expr_stmt|;
name|bits
operator|.
name|s
operator|&=
operator|~
literal|077600
expr_stmt|;
name|bits
operator|.
name|s
operator||=
operator|(
name|SHORT
operator|+
literal|0200
operator|)
operator|<<
literal|7
expr_stmt|;
name|FREG
operator|=
name|bits
operator|.
name|d
expr_stmt|;
name|FZ
operator|=
operator|(
name|SHORT
operator|==
literal|0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|MODD
case|:
name|GETDOUBLE
expr_stmt|;
name|temp
operator|=
name|FREG
operator|*
name|DOUBLE
expr_stmt|;
name|fregs
index|[
name|ac
operator||
literal|1
index|]
operator|=
operator|(
name|long
operator|)
name|temp
expr_stmt|;
name|FREG
operator|=
name|temp
operator|-
operator|(
name|long
operator|)
name|temp
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|MULD
case|:
name|GETDOUBLE
expr_stmt|;
name|FREG
operator|=
name|FREG
operator|*
name|DOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|STCDF
case|:
name|GETFLOAT
expr_stmt|;
name|FLOAT
operator|=
name|FREG
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|STCDL
case|:
if|if
condition|(
name|IMODE
condition|)
block|{
name|GETSHORT
expr_stmt|;
name|SHORT
operator|=
name|FREG
expr_stmt|;
name|psl
operator|&=
operator|~
literal|017
expr_stmt|;
if|if
condition|(
name|SHORT
operator|==
literal|0
condition|)
block|{
name|psl
operator||=
literal|04
expr_stmt|;
block|}
if|if
condition|(
name|SHORT
operator|<
literal|0
condition|)
block|{
name|psl
operator||=
literal|010
expr_stmt|;
block|}
block|}
else|else
block|{
name|GETLONG
expr_stmt|;
name|LONG
operator|=
name|fliplong
argument_list|(
operator|(
name|long
operator|)
name|FREG
argument_list|)
expr_stmt|;
name|psl
operator|&=
operator|~
literal|017
expr_stmt|;
if|if
condition|(
name|fliplong
argument_list|(
name|LONG
argument_list|)
operator|==
literal|0
condition|)
block|{
name|psl
operator||=
literal|04
expr_stmt|;
block|}
if|if
condition|(
name|fliplong
argument_list|(
name|LONG
argument_list|)
operator|<
literal|0
condition|)
block|{
name|psl
operator||=
literal|010
expr_stmt|;
block|}
block|}
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|STD
case|:
name|GETDOUBLE
expr_stmt|;
name|DOUBLE
operator|=
name|FREG
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|STEXP
case|:
name|GETSHORT
expr_stmt|;
name|bits
operator|.
name|d
operator|=
name|FREG
expr_stmt|;
name|SHORT
operator|=
operator|(
operator|(
name|bits
operator|.
name|s
operator|&
literal|077600
operator|)
operator|>>
literal|7
operator|)
operator|-
literal|0200
expr_stmt|;
name|FZ
operator|=
operator|(
name|SHORT
operator|==
literal|0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|SHORT
operator|<
literal|0
operator|)
expr_stmt|;
name|psl
operator|&=
operator|~
literal|017
expr_stmt|;
if|if
condition|(
name|FZ
condition|)
block|{
name|psl
operator||=
literal|04
expr_stmt|;
block|}
if|if
condition|(
name|FN
condition|)
block|{
name|psl
operator||=
literal|010
expr_stmt|;
block|}
return|return
operator|(
literal|0
operator|)
return|;
case|case
name|SUBD
case|:
name|GETDOUBLE
expr_stmt|;
name|FREG
operator|-=
name|DOUBLE
expr_stmt|;
name|FZ
operator|=
operator|(
name|FREG
operator|==
literal|0.0
operator|)
expr_stmt|;
name|FN
operator|=
operator|(
name|FREG
operator|<
literal|0.0
operator|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
default|default:
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Unrecognized instr in dofloat %0o\n"
argument_list|,
name|instr
argument_list|)
expr_stmt|;
return|return
operator|(
operator|-
literal|1
operator|)
return|;
block|}
block|}
end_block

begin_function
name|unsigned
name|short
modifier|*
name|resolve
parameter_list|(
name|mode
parameter_list|,
name|reg
parameter_list|,
name|bytes
parameter_list|,
name|floating
parameter_list|)
block|{
specifier|static
name|unsigned
name|short
modifier|*
name|x
decl_stmt|;
specifier|static
union|union
block|{
name|double
name|d
decl_stmt|;
name|unsigned
name|short
name|s
decl_stmt|;
block|}
name|bits
union|;
switch|switch
condition|(
name|mode
condition|)
block|{
case|case
literal|0
case|:
if|if
condition|(
name|floating
condition|)
block|{
if|if
condition|(
name|bytes
operator|!=
literal|8
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Bad length in dofloat\n"
argument_list|)
expr_stmt|;
return|return
operator|(
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|-
literal|1
operator|)
return|;
block|}
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|&
name|fregs
index|[
name|reg
index|]
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|bytes
operator|!=
literal|2
condition|)
block|{
name|fprintf
argument_list|(
name|stderr
argument_list|,
literal|"Bad length in dofloat\n"
argument_list|)
expr_stmt|;
return|return
operator|(
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|-
literal|1
operator|)
return|;
block|}
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|&
name|regs
index|[
name|reg
index|]
expr_stmt|;
block|}
break|break;
case|case
literal|1
case|:
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
name|reg
index|]
expr_stmt|;
break|break;
case|case
literal|2
case|:
if|if
condition|(
name|reg
operator|==
literal|7
operator|&&
name|floating
condition|)
block|{
name|bits
operator|.
name|d
operator|=
literal|0.0
expr_stmt|;
name|bits
operator|.
name|s
operator|=
operator|*
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
literal|7
index|]
expr_stmt|;
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|&
name|bits
expr_stmt|;
name|regs
index|[
literal|7
index|]
operator|+=
literal|2
expr_stmt|;
name|pc
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
literal|7
index|]
expr_stmt|;
block|}
else|else
block|{
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
name|reg
index|]
expr_stmt|;
name|regs
index|[
name|reg
index|]
operator|+=
name|bytes
expr_stmt|;
if|if
condition|(
name|reg
operator|==
literal|7
condition|)
block|{
if|if
condition|(
name|bytes
operator|!=
literal|2
condition|)
block|{
return|return
operator|(
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|-
literal|1
operator|)
return|;
block|}
name|pc
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
literal|7
index|]
expr_stmt|;
block|}
block|}
break|break;
case|case
literal|3
case|:
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
name|reg
index|]
expr_stmt|;
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|*
name|x
expr_stmt|;
name|regs
index|[
name|reg
index|]
operator|+=
literal|2
expr_stmt|;
if|if
condition|(
name|reg
operator|==
literal|7
condition|)
block|{
name|pc
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
literal|7
index|]
expr_stmt|;
block|}
break|break;
case|case
literal|4
case|:
name|regs
index|[
name|reg
index|]
operator|-=
name|bytes
expr_stmt|;
if|if
condition|(
name|reg
operator|==
literal|7
condition|)
block|{
name|pc
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
literal|7
index|]
expr_stmt|;
block|}
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
name|reg
index|]
expr_stmt|;
break|break;
case|case
literal|5
case|:
name|regs
index|[
name|reg
index|]
operator|-=
literal|2
expr_stmt|;
if|if
condition|(
name|reg
operator|==
literal|7
condition|)
block|{
name|pc
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
literal|7
index|]
expr_stmt|;
block|}
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
name|regs
index|[
name|reg
index|]
expr_stmt|;
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|*
name|x
expr_stmt|;
break|break;
case|case
literal|6
case|:
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
call|(
name|unsigned
name|short
call|)
argument_list|(
name|regs
index|[
name|reg
index|]
operator|+
operator|*
operator|(
name|pc
operator|++
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|reg
operator|==
literal|7
condition|)
block|{
operator|++
name|x
expr_stmt|;
block|}
break|break;
case|case
literal|7
case|:
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
call|(
name|unsigned
name|short
call|)
argument_list|(
name|regs
index|[
name|reg
index|]
operator|+
operator|*
operator|(
name|pc
operator|++
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|reg
operator|==
literal|7
condition|)
block|{
operator|++
name|x
expr_stmt|;
block|}
name|x
operator|=
operator|(
name|unsigned
name|short
operator|*
operator|)
operator|*
name|x
expr_stmt|;
break|break;
block|}
return|return
operator|(
name|x
operator|)
return|;
block|}
end_function

begin_function
name|long
name|fliplong
parameter_list|(
name|l
parameter_list|)
name|long
name|l
decl_stmt|;
block|{
union|union
block|{
name|long
name|l
decl_stmt|;
name|short
name|s
index|[
literal|2
index|]
decl_stmt|;
block|}
name|bits
index|[
literal|2
index|]
union|;
name|bits
index|[
literal|0
index|]
operator|.
name|l
operator|=
name|l
expr_stmt|;
name|bits
index|[
literal|1
index|]
operator|.
name|s
index|[
literal|1
index|]
operator|=
name|bits
index|[
literal|0
index|]
operator|.
name|s
index|[
literal|0
index|]
expr_stmt|;
name|bits
index|[
literal|1
index|]
operator|.
name|s
index|[
literal|0
index|]
operator|=
name|bits
index|[
literal|0
index|]
operator|.
name|s
index|[
literal|1
index|]
expr_stmt|;
return|return
operator|(
name|bits
index|[
literal|1
index|]
operator|.
name|l
operator|)
return|;
block|}
end_function

end_unit

