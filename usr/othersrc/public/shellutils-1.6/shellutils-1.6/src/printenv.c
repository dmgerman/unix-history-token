begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* printenv -- print all or part of environment    Copyright (C) 1989, 1991 Free Software Foundation.     This program is free software; you can redistribute it and/or modify    it under the terms of the GNU General Public License as published by    the Free Software Foundation; either version 2, or (at your option)    any later version.     This program is distributed in the hope that it will be useful,    but WITHOUT ANY WARRANTY; without even the implied warranty of    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the    GNU General Public License for more details.     You should have received a copy of the GNU General Public License    along with this program; if not, write to the Free Software    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.  */
end_comment

begin_comment
comment|/* Usage: printenv [variable...]     If no arguments are given, print the entire environment.    If one or more variable names are given, print the value of    each one that is set, and nothing for ones that are not set.     Exit status:    0 if all variables specified were found    1 if not     David MacKenzie and Richard Mlynarik */
end_comment

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|"system.h"
end_include

begin_decl_stmt
specifier|extern
name|char
modifier|*
modifier|*
name|environ
decl_stmt|;
end_decl_stmt

begin_function
name|void
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argc
decl_stmt|;
name|char
modifier|*
modifier|*
name|argv
decl_stmt|;
block|{
name|char
modifier|*
modifier|*
name|env
decl_stmt|;
name|char
modifier|*
name|ep
decl_stmt|,
modifier|*
name|ap
decl_stmt|;
name|int
name|i
decl_stmt|;
name|int
name|matches
init|=
literal|0
decl_stmt|;
if|if
condition|(
name|argc
operator|==
literal|1
condition|)
block|{
for|for
control|(
name|env
operator|=
name|environ
init|;
operator|*
name|env
condition|;
operator|++
name|env
control|)
name|puts
argument_list|(
operator|*
name|env
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|0
argument_list|)
expr_stmt|;
block|}
for|for
control|(
name|i
operator|=
literal|1
init|;
name|i
operator|<
name|argc
condition|;
operator|++
name|i
control|)
block|{
for|for
control|(
name|env
operator|=
name|environ
init|;
operator|*
name|env
condition|;
operator|++
name|env
control|)
block|{
name|ep
operator|=
operator|*
name|env
expr_stmt|;
name|ap
operator|=
name|argv
index|[
name|i
index|]
expr_stmt|;
while|while
condition|(
operator|*
name|ep
operator|!=
literal|'\0'
operator|&&
operator|*
name|ap
operator|!=
literal|'\0'
operator|&&
operator|*
name|ep
operator|++
operator|==
operator|*
name|ap
operator|++
condition|)
if|if
condition|(
operator|*
name|ep
operator|==
literal|'='
operator|&&
operator|*
name|ap
operator|==
literal|'\0'
condition|)
block|{
name|puts
argument_list|(
name|ep
operator|+
literal|1
argument_list|)
expr_stmt|;
operator|++
name|matches
expr_stmt|;
break|break;
block|}
block|}
block|}
name|exit
argument_list|(
name|matches
operator|!=
name|argc
operator|-
literal|1
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

