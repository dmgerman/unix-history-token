begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file   CompareMem() implementation.    The following BaseMemoryLib instances contain the same copy of this file:     BaseMemoryLib     BaseMemoryLibMmx     BaseMemoryLibSse2     BaseMemoryLibRepStr     BaseMemoryLibOptDxe     BaseMemoryLibOptPei     PeiMemoryLib     UefiMemoryLib  Copyright (c) 2006 - 2010, Intel Corporation. All rights reserved.<BR> This program and the accompanying materials are licensed and made available under the terms and conditions of the BSD License which accompanies this distribution.  The full text of the license may be found at http://opensource.org/licenses/bsd-license.php  THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.  **/
end_comment

begin_include
include|#
directive|include
file|"MemLibInternals.h"
end_include

begin_comment
comment|/**   Compares the contents of two buffers.    This function compares Length bytes of SourceBuffer to Length bytes of DestinationBuffer.   If all Length bytes of the two buffers are identical, then 0 is returned.  Otherwise, the   value returned is the first mismatched byte in SourceBuffer subtracted from the first   mismatched byte in DestinationBuffer.      If Length> 0 and DestinationBuffer is NULL, then ASSERT().   If Length> 0 and SourceBuffer is NULL, then ASSERT().   If Length is greater than (MAX_ADDRESS - DestinationBuffer + 1), then ASSERT().   If Length is greater than (MAX_ADDRESS - SourceBuffer + 1), then ASSERT().    @param  DestinationBuffer The pointer to the destination buffer to compare.   @param  SourceBuffer      The pointer to the source buffer to compare.   @param  Length            The number of bytes to compare.    @return 0                 All Length bytes of the two buffers are identical.   @retval Non-zero          The first mismatched byte in SourceBuffer subtracted from the first                             mismatched byte in DestinationBuffer.                              **/
end_comment

begin_function
name|INTN
name|EFIAPI
name|CompareMem
parameter_list|(
name|IN
name|CONST
name|VOID
modifier|*
name|DestinationBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|SourceBuffer
parameter_list|,
name|IN
name|UINTN
name|Length
parameter_list|)
block|{
if|if
condition|(
name|Length
operator|==
literal|0
operator|||
name|DestinationBuffer
operator|==
name|SourceBuffer
condition|)
block|{
return|return
literal|0
return|;
block|}
name|ASSERT
argument_list|(
name|DestinationBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SourceBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|(
name|Length
operator|-
literal|1
operator|)
operator|<=
operator|(
name|MAX_ADDRESS
operator|-
operator|(
name|UINTN
operator|)
name|DestinationBuffer
operator|)
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|(
name|Length
operator|-
literal|1
operator|)
operator|<=
operator|(
name|MAX_ADDRESS
operator|-
operator|(
name|UINTN
operator|)
name|SourceBuffer
operator|)
argument_list|)
expr_stmt|;
return|return
name|InternalMemCompareMem
argument_list|(
name|DestinationBuffer
argument_list|,
name|SourceBuffer
argument_list|,
name|Length
argument_list|)
return|;
block|}
end_function

end_unit

