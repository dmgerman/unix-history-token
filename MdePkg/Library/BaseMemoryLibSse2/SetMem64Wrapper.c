begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file   SetMem64() implementation.    The following BaseMemoryLib instances contain the same copy of this file:     BaseMemoryLib     BaseMemoryLibMmx     BaseMemoryLibSse2     BaseMemoryLibRepStr     BaseMemoryLibOptDxe     BaseMemoryLibOptPei     PeiMemoryLib     UefiMemoryLib    Copyright (c) 2006 - 2010, Intel Corporation. All rights reserved.<BR>   This program and the accompanying materials   are licensed and made available under the terms and conditions of the BSD License   which accompanies this distribution.  The full text of the license may be found at   http://opensource.org/licenses/bsd-license.php.    THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS,   WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.  **/
end_comment

begin_include
include|#
directive|include
file|"MemLibInternals.h"
end_include

begin_comment
comment|/**   Fills a target buffer with a 64-bit value, and returns the target buffer.    This function fills Length bytes of Buffer with the 64-bit value specified by   Value, and returns Buffer. Value is repeated every 64-bits in for Length   bytes of Buffer.    If Length> 0 and Buffer is NULL, then ASSERT().   If Length is greater than (MAX_ADDRESS - Buffer + 1), then ASSERT().   If Buffer is not aligned on a 64-bit boundary, then ASSERT().   If Length is not aligned on a 64-bit boundary, then ASSERT().    @param  Buffer  The pointer to the target buffer to fill.   @param  Length  The number of bytes in Buffer to fill.   @param  Value   The value with which to fill Length bytes of Buffer.    @return Buffer.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|SetMem64
parameter_list|(
name|OUT
name|VOID
modifier|*
name|Buffer
parameter_list|,
name|IN
name|UINTN
name|Length
parameter_list|,
name|IN
name|UINT64
name|Value
parameter_list|)
block|{
if|if
condition|(
name|Length
operator|==
literal|0
condition|)
block|{
return|return
name|Buffer
return|;
block|}
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|(
name|Length
operator|-
literal|1
operator|)
operator|<=
operator|(
name|MAX_ADDRESS
operator|-
operator|(
name|UINTN
operator|)
name|Buffer
operator|)
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|(
operator|(
operator|(
name|UINTN
operator|)
name|Buffer
operator|)
operator|&
operator|(
sizeof|sizeof
argument_list|(
name|Value
argument_list|)
operator|-
literal|1
operator|)
operator|)
operator|==
literal|0
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|(
name|Length
operator|&
operator|(
sizeof|sizeof
argument_list|(
name|Value
argument_list|)
operator|-
literal|1
operator|)
operator|)
operator|==
literal|0
argument_list|)
expr_stmt|;
return|return
name|InternalMemSetMem64
argument_list|(
name|Buffer
argument_list|,
name|Length
operator|/
sizeof|sizeof
argument_list|(
name|Value
argument_list|)
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

end_unit

