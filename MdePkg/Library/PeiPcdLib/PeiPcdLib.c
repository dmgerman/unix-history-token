begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file Implementation of PcdLib class library for PEI phase.  Copyright (c) 2006 - 2016, Intel Corporation. All rights reserved.<BR> This program and the accompanying materials                           are licensed and made available under the terms and conditions of the BSD License          which accompanies this distribution.  The full text of the license may be found at         http://opensource.org/licenses/bsd-license.php                                                                                                                                        THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS,                      WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.                **/
end_comment

begin_include
include|#
directive|include
file|<PiPei.h>
end_include

begin_include
include|#
directive|include
file|<Ppi/Pcd.h>
end_include

begin_include
include|#
directive|include
file|<Ppi/PiPcd.h>
end_include

begin_include
include|#
directive|include
file|<Ppi/PcdInfo.h>
end_include

begin_include
include|#
directive|include
file|<Ppi/PiPcdInfo.h>
end_include

begin_include
include|#
directive|include
file|<Library/PeiServicesLib.h>
end_include

begin_include
include|#
directive|include
file|<Library/PcdLib.h>
end_include

begin_include
include|#
directive|include
file|<Library/DebugLib.h>
end_include

begin_include
include|#
directive|include
file|<Library/BaseMemoryLib.h>
end_include

begin_comment
comment|/**   Retrieve the PCD_PPI pointer.    This function is to locate PCD_PPI PPI via PeiService.    If fail to locate PCD_PPI, then ASSERT_EFI_ERROR().      @retval PCD_PPI * The pointer to the PCD_PPI.  **/
end_comment

begin_function
name|PCD_PPI
modifier|*
name|GetPcdPpiPointer
parameter_list|(
name|VOID
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|PCD_PPI
modifier|*
name|PcdPpi
decl_stmt|;
name|Status
operator|=
name|PeiServicesLocatePpi
argument_list|(
operator|&
name|gPcdPpiGuid
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|(
name|VOID
operator|*
operator|*
operator|)
operator|&
name|PcdPpi
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|PcdPpi
return|;
block|}
end_function

begin_comment
comment|/**   Retrieve the pointer of EFI_PEI_PCD_PPI defined in PI 1.2 Vol 3.    This function is to locate EFI_PEI_PCD_PPI PPI via PeiService.    If fail to locate EFI_PEI_PCD_PPI, then ASSERT_EFI_ERROR().      @retval EFI_PEI_PCD_PPI * The pointer to the EFI_PEI_PCD_PPI.  **/
end_comment

begin_function
name|EFI_PEI_PCD_PPI
modifier|*
name|GetPiPcdPpiPointer
parameter_list|(
name|VOID
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|EFI_PEI_PCD_PPI
modifier|*
name|PiPcdPpi
decl_stmt|;
name|Status
operator|=
name|PeiServicesLocatePpi
argument_list|(
operator|&
name|gEfiPeiPcdPpiGuid
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|(
name|VOID
operator|*
operator|*
operator|)
operator|&
name|PiPcdPpi
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|PiPcdPpi
return|;
block|}
end_function

begin_comment
comment|/**   Retrieve the GET_PCD_INFO_PPI pointer.    This function is to locate GET_PCD_INFO_PPI PPI via PeiService.    If fail to locate GET_PCD_INFO_PPI, then ASSERT_EFI_ERROR().    @retval GET_PCD_INFO_PPI * The pointer to the GET_PCD_INFO_PPI.  **/
end_comment

begin_function
name|GET_PCD_INFO_PPI
modifier|*
name|GetPcdInfoPpiPointer
parameter_list|(
name|VOID
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|GET_PCD_INFO_PPI
modifier|*
name|PcdInfoPpi
decl_stmt|;
name|Status
operator|=
name|PeiServicesLocatePpi
argument_list|(
operator|&
name|gGetPcdInfoPpiGuid
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|(
name|VOID
operator|*
operator|*
operator|)
operator|&
name|PcdInfoPpi
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|PcdInfoPpi
return|;
block|}
end_function

begin_comment
comment|/**   Retrieve the pointer of EFI_GET_PCD_INFO_PPI defined in PI 1.2.1 Vol 3.    This function is to locate EFI_GET_PCD_INFO_PPI PPI via PeiService.    If fail to locate EFI_GET_PCD_INFO_PPI, then ASSERT_EFI_ERROR().    @retval EFI_GET_PCD_INFO_PPI * The pointer to the EFI_GET_PCD_INFO_PPI.  **/
end_comment

begin_function
name|EFI_GET_PCD_INFO_PPI
modifier|*
name|GetPiPcdInfoPpiPointer
parameter_list|(
name|VOID
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|EFI_GET_PCD_INFO_PPI
modifier|*
name|PiPcdInfoPpi
decl_stmt|;
name|Status
operator|=
name|PeiServicesLocatePpi
argument_list|(
operator|&
name|gEfiGetPcdInfoPpiGuid
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
operator|(
name|VOID
operator|*
operator|*
operator|)
operator|&
name|PiPcdInfoPpi
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|PiPcdInfoPpi
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which SKU support can be established in the PCD infrastructure.    Sets the current SKU in the PCD database to the value specified by SkuId.  SkuId is returned.    @param  SkuId   The SKU value that will be used when the PCD service retrieves                    and sets values associated with a PCD token.    @return  Return the SKU ID that just be set.  **/
end_comment

begin_function
name|UINTN
name|EFIAPI
name|LibPcdSetSku
parameter_list|(
name|IN
name|UINTN
name|SkuId
parameter_list|)
block|{
name|GetPiPcdPpiPointer
argument_list|()
operator|->
name|SetSku
argument_list|(
name|SkuId
argument_list|)
expr_stmt|;
return|return
name|SkuId
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the 8-bit value for the token specified by TokenNumber.     @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the 8-bit value for the token specified by TokenNumber.   **/
end_comment

begin_function
name|UINT8
name|EFIAPI
name|LibPcdGet8
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get8
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the 16-bit value for the token specified by TokenNumber.     @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the 16-bit value for the token specified by TokenNumber.   **/
end_comment

begin_function
name|UINT16
name|EFIAPI
name|LibPcdGet16
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get16
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the 32-bit value for the token specified by TokenNumber.     @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the 32-bit value for the token specified by TokenNumber.  **/
end_comment

begin_function
name|UINT32
name|EFIAPI
name|LibPcdGet32
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get32
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the 64-bit value for the token specified by TokenNumber.    @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the 64-bit value for the token specified by TokenNumber.  **/
end_comment

begin_function
name|UINT64
name|EFIAPI
name|LibPcdGet64
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get64
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the pointer to the buffer of the token specified by TokenNumber.    @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the pointer to the token specified by TokenNumber.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|LibPcdGetPtr
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetPtr
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the Boolean value of the token specified by TokenNumber.     @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the Boolean value of the token specified by TokenNumber.   **/
end_comment

begin_function
name|BOOLEAN
name|EFIAPI
name|LibPcdGetBool
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetBool
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve the size of a given PCD token.    @param[in]  TokenNumber The PCD token number to retrieve a current value for.    @return Returns the size of the token specified by TokenNumber.   **/
end_comment

begin_function
name|UINTN
name|EFIAPI
name|LibPcdGetSize
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetSize
argument_list|(
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the 8-bit value for the token specified by TokenNumber and Guid.      If Guid is NULL, then ASSERT().     @param[in]  Guid         The pointer to a 128-bit unique value that designates                             which namespace to retrieve a value from.   @param[in]  TokenNumber  The PCD token number to retrieve a current value for.    @return Return the UINT8.  **/
end_comment

begin_function
name|UINT8
name|EFIAPI
name|LibPcdGetEx8
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get8
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.    Returns the 16-bit value for the token specified by TokenNumber and Guid.      If Guid is NULL, then ASSERT().     @param[in]  Guid         The pointer to a 128-bit unique value that designates                             which namespace to retrieve a value from.   @param[in]  TokenNumber  The PCD token number to retrieve a current value for.    @return Return the UINT16.  **/
end_comment

begin_function
name|UINT16
name|EFIAPI
name|LibPcdGetEx16
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get16
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   Returns the 32-bit value for the token specified by TokenNumber and Guid.   If Guid is NULL, then ASSERT().     @param[in]  Guid         The pointer to a 128-bit unique value that designates                             which namespace to retrieve a value from.   @param[in]  TokenNumber  The PCD token number to retrieve a current value for.    @return Return the UINT32.  **/
end_comment

begin_function
name|UINT32
name|EFIAPI
name|LibPcdGetEx32
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get32
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the 64-bit value for the token specified by TokenNumber and Guid.      If Guid is NULL, then ASSERT().     @param[in]  Guid          The pointer to a 128-bit unique value that designates                              which namespace to retrieve a value from.   @param[in]  TokenNumber   The PCD token number to retrieve a current value for.    @return Return the UINT64.  **/
end_comment

begin_function
name|UINT64
name|EFIAPI
name|LibPcdGetEx64
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Get64
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the pointer to the buffer of token specified by TokenNumber and Guid.      If Guid is NULL, then ASSERT().     @param[in]  Guid          The pointer to a 128-bit unique value that designates                              which namespace to retrieve a value from.   @param[in]  TokenNumber   The PCD token number to retrieve a current value for.    @return Return the VOID* pointer.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|LibPcdGetExPtr
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetPtr
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve a value for a given PCD token.      Returns the Boolean value of the token specified by TokenNumber and Guid.       If Guid is NULL, then ASSERT().     @param[in]  Guid          The pointer to a 128-bit unique value that designates                              which namespace to retrieve a value from.   @param[in]  TokenNumber   The PCD token number to retrieve a current value for.    @return Return the BOOLEAN.  **/
end_comment

begin_function
name|BOOLEAN
name|EFIAPI
name|LibPcdGetExBool
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetBool
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to retrieve the size of a given PCD token.      Returns the size of the token specified by TokenNumber and Guid.       If Guid is NULL, then ASSERT().     @param[in]  Guid          The pointer to a 128-bit unique value that designates                              which namespace to retrieve a value from.   @param[in]  TokenNumber   The PCD token number to retrieve a current value for.    @return Return the size.  **/
end_comment

begin_function
name|UINTN
name|EFIAPI
name|LibPcdGetExSize
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetSize
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|)
return|;
block|}
end_function

begin_ifndef
ifndef|#
directive|ifndef
name|DISABLE_NEW_DEPRECATED_INTERFACES
end_ifndef

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 8-bit value for the token specified by TokenNumber    to the value specified by Value.  Value is returned.    @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 8-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT8
name|EFIAPI
name|LibPcdSet8
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT8
name|Value
parameter_list|)
block|{
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set8
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 16-bit value for the token specified by TokenNumber    to the value specified by Value.  Value is returned.    @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 16-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT16
name|EFIAPI
name|LibPcdSet16
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT16
name|Value
parameter_list|)
block|{
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set16
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 32-bit value for the token specified by TokenNumber    to the value specified by Value.  Value is returned.    @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 32-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT32
name|EFIAPI
name|LibPcdSet32
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT32
name|Value
parameter_list|)
block|{
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set32
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 64-bit value for the token specified by TokenNumber    to the value specified by Value.  Value is returned.    @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 64-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT64
name|EFIAPI
name|LibPcdSet64
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT64
name|Value
parameter_list|)
block|{
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set64
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets a buffer for the token specified by TokenNumber to the value    specified by Buffer and SizeOfBuffer.  Buffer is returned.     If SizeOfBuffer is greater than the maximum size support by TokenNumber,    then set SizeOfBuffer to the maximum size supported by TokenNumber and    return NULL to indicate that the set operation was not actually performed.    If SizeOfBuffer is set to MAX_ADDRESS, then SizeOfBuffer must be set to the    maximum size supported by TokenName and NULL must be returned.      If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().      @param[in]      TokenNumber   The PCD token number to set a current value for.   @param[in, out] SizeOfBuffer  The size, in bytes, of Buffer.   @param[in]      Buffer        A pointer to the buffer to set.    @return Return the pointer for the buffer been set.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|LibPcdSetPtr
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|UINTN
name|InputSizeOfBuffer
decl_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
name|InputSizeOfBuffer
operator|=
operator|*
name|SizeOfBuffer
expr_stmt|;
name|Status
operator|=
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetPtr
argument_list|(
name|TokenNumber
argument_list|,
name|SizeOfBuffer
argument_list|,
operator|(
name|VOID
operator|*
operator|)
name|Buffer
argument_list|)
expr_stmt|;
if|if
condition|(
name|EFI_ERROR
argument_list|(
name|Status
argument_list|)
operator|&&
operator|(
operator|*
name|SizeOfBuffer
operator|<
name|InputSizeOfBuffer
operator|)
condition|)
block|{
return|return
name|NULL
return|;
block|}
return|return
operator|(
name|VOID
operator|*
operator|)
name|Buffer
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the Boolean value for the token specified by TokenNumber    to the value specified by Value.  Value is returned.    @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The boolean value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|BOOLEAN
name|EFIAPI
name|LibPcdSetBool
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|BOOLEAN
name|Value
parameter_list|)
block|{
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetBool
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 8-bit value for the token specified by TokenNumber and    Guid to the value specified by Value. Value is returned.    If Guid is NULL, then ASSERT().    @param[in]  Guid          The pointer to a 128-bit unique value that                              designates which namespace to set a value from.   @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 8-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT8
name|EFIAPI
name|LibPcdSetEx8
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT8
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set8
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 16-bit value for the token specified by TokenNumber and    Guid to the value specified by Value. Value is returned.    If Guid is NULL, then ASSERT().    @param[in]  Guid          The pointer to a 128-bit unique value that                              designates which namespace to set a value from.   @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 16-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT16
name|EFIAPI
name|LibPcdSetEx16
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT16
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set16
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 32-bit value for the token specified by TokenNumber and    Guid to the value specified by Value. Value is returned.    If Guid is NULL, then ASSERT().    @param[in]  Guid          The pointer to a 128-bit unique value that                              designates which namespace to set a value from.   @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 32-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT32
name|EFIAPI
name|LibPcdSetEx32
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT32
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set32
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the 64-bit value for the token specified by TokenNumber and    Guid to the value specified by Value. Value is returned.    If Guid is NULL, then ASSERT().    @param[in]  Guid          The pointer to a 128-bit unique value that                              designates which namespace to set a value from.   @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The 64-bit value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|UINT64
name|EFIAPI
name|LibPcdSetEx64
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT64
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set64
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets a buffer for the token specified by TokenNumber to the value specified by    Buffer and SizeOfBuffer.  Buffer is returned.  If SizeOfBuffer is greater than    the maximum size support by TokenNumber, then set SizeOfBuffer to the maximum size    supported by TokenNumber and return NULL to indicate that the set operation    was not actually performed.      If Guid is NULL, then ASSERT().   If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().      @param[in]  Guid              The pointer to a 128-bit unique value that                                  designates which namespace to set a value from.   @param[in]  TokenNumber       The PCD token number to set a current value for.   @param[in, out] SizeOfBuffer  The size, in bytes, of Buffer.   @param[in]  Buffer            A pointer to the buffer to set.    @return Return the pinter to the buffer been set.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|LibPcdSetExPtr
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|UINTN
name|InputSizeOfBuffer
decl_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|InputSizeOfBuffer
operator|=
operator|*
name|SizeOfBuffer
expr_stmt|;
name|Status
operator|=
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetPtr
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|SizeOfBuffer
argument_list|,
name|Buffer
argument_list|)
expr_stmt|;
if|if
condition|(
name|EFI_ERROR
argument_list|(
name|Status
argument_list|)
operator|&&
operator|(
operator|*
name|SizeOfBuffer
operator|<
name|InputSizeOfBuffer
operator|)
condition|)
block|{
return|return
name|NULL
return|;
block|}
return|return
name|Buffer
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.      Sets the Boolean value for the token specified by TokenNumber and    Guid to the value specified by Value. Value is returned.    If Guid is NULL, then ASSERT().    @param[in]  Guid          The pointer to a 128-bit unique value that                              designates which namespace to set a value from.   @param[in]  TokenNumber   The PCD token number to set a current value for.   @param[in]  Value         The Boolean value to set.    @return Return the value that was set.  **/
end_comment

begin_function
name|BOOLEAN
name|EFIAPI
name|LibPcdSetExBool
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|BOOLEAN
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetBool
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
expr_stmt|;
return|return
name|Value
return|;
block|}
end_function

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 8-bit value for the token specified by TokenNumber   to the value specified by Value.    @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 8-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSet8S
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT8
name|Value
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set8
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 16-bit value for the token specified by TokenNumber   to the value specified by Value.    @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 16-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSet16S
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT16
name|Value
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set16
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 32-bit value for the token specified by TokenNumber   to the value specified by Value.    @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 32-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSet32S
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT32
name|Value
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set32
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 64-bit value for the token specified by TokenNumber   to the value specified by Value.    @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 64-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSet64S
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT64
name|Value
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set64
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets a buffer for the token specified by TokenNumber to the value specified   by Buffer and SizeOfBuffer. If SizeOfBuffer is greater than the maximum size   support by TokenNumber, then set SizeOfBuffer to the maximum size supported by   TokenNumber and return EFI_INVALID_PARAMETER to indicate that the set operation   was not actually performed.    If SizeOfBuffer is set to MAX_ADDRESS, then SizeOfBuffer must be set to the   maximum size supported by TokenName and EFI_INVALID_PARAMETER must be returned.    If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().    @param[in]      TokenNumber   The PCD token number to set a current value for.   @param[in, out] SizeOfBuffer  The size, in bytes, of Buffer.   @param[in]      Buffer        A pointer to the buffer to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetPtrS
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetPtr
argument_list|(
name|TokenNumber
argument_list|,
name|SizeOfBuffer
argument_list|,
operator|(
name|VOID
operator|*
operator|)
name|Buffer
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the boolean value for the token specified by TokenNumber   to the value specified by Value.    @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The boolean value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetBoolS
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|BOOLEAN
name|Value
parameter_list|)
block|{
return|return
operator|(
name|GetPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetBool
argument_list|(
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 8-bit value for the token specified by TokenNumber   to the value specified by Value.    If Guid is NULL, then ASSERT().    @param[in] Guid           The pointer to a 128-bit unique value that                             designates which namespace to set a value from.   @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 8-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetEx8S
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT8
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set8
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 16-bit value for the token specified by TokenNumber   to the value specified by Value.    If Guid is NULL, then ASSERT().    @param[in] Guid           The pointer to a 128-bit unique value that                             designates which namespace to set a value from.   @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 16-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetEx16S
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT16
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set16
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 32-bit value for the token specified by TokenNumber   to the value specified by Value.    If Guid is NULL, then ASSERT().    @param[in] Guid           The pointer to a 128-bit unique value that                             designates which namespace to set a value from.   @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 32-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetEx32S
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT32
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set32
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the 64-bit value for the token specified by TokenNumber   to the value specified by Value.    If Guid is NULL, then ASSERT().    @param[in] Guid           The pointer to a 128-bit unique value that                             designates which namespace to set a value from.   @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The 64-bit value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetEx64S
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|UINT64
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|Set64
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets a buffer for the token specified by TokenNumber to the value specified by   Buffer and SizeOfBuffer. If SizeOfBuffer is greater than the maximum size   support by TokenNumber, then set SizeOfBuffer to the maximum size supported by   TokenNumber and return EFI_INVALID_PARAMETER to indicate that the set operation   was not actually performed.    If Guid is NULL, then ASSERT().   If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().    @param[in]      Guid          Pointer to a 128-bit unique value that                                 designates which namespace to set a value from.   @param[in]      TokenNumber   The PCD token number to set a current value for.   @param[in, out] SizeOfBuffer  The size, in bytes, of Buffer.   @param[in]      Buffer        A pointer to the buffer to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetExPtrS
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetPtr
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|SizeOfBuffer
argument_list|,
name|Buffer
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   This function provides a means by which to set a value for a given PCD token.    Sets the boolean value for the token specified by TokenNumber   to the value specified by Value.    If Guid is NULL, then ASSERT().    @param[in] Guid           The pointer to a 128-bit unique value that                             designates which namespace to set a value from.   @param[in] TokenNumber    The PCD token number to set a current value for.   @param[in] Value          The boolean value to set.    @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPcdSetExBoolS
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|BOOLEAN
name|Value
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|Guid
operator|!=
name|NULL
argument_list|)
expr_stmt|;
return|return
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|SetBool
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   Set up a notification function that is called when a specified token is set.      When the token specified by TokenNumber and Guid is set,    then notification function specified by NotificationFunction is called.     If Guid is NULL, then the default token space is used.   If NotificationFunction is NULL, then ASSERT().    @param[in]  Guid                  The pointer to a 128-bit unique value that                                      designates which namespace to set a value from.                                       If NULL, then the default token space is used.   @param[in]  TokenNumber           The PCD token number to monitor.   @param[in]  NotificationFunction  The function to call when the token                                      specified by Guid and TokenNumber is set.  **/
end_comment

begin_function
name|VOID
name|EFIAPI
name|LibPcdCallbackOnSet
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|OPTIONAL
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|PCD_CALLBACK
name|NotificationFunction
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|ASSERT
argument_list|(
name|NotificationFunction
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|Status
operator|=
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|CallbackOnSet
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
operator|(
name|EFI_PEI_PCD_PPI_CALLBACK
operator|)
name|NotificationFunction
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return;
block|}
end_function

begin_comment
comment|/**   Disable a notification function that was established with LibPcdCallbackonSet().      Disable a notification function that was previously established with LibPcdCallbackOnSet().   If NotificationFunction is NULL, then ASSERT().   If LibPcdCallbackOnSet() was not previously called with Guid, TokenNumber,    and NotificationFunction, then ASSERT().      @param[in]  Guid                 Specify the GUID token space.   @param[in]  TokenNumber          Specify the token number.   @param[in]  NotificationFunction The callback function to be unregistered.  **/
end_comment

begin_function
name|VOID
name|EFIAPI
name|LibPcdCancelCallback
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|OPTIONAL
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|IN
name|PCD_CALLBACK
name|NotificationFunction
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|ASSERT
argument_list|(
name|NotificationFunction
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|Status
operator|=
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|CancelCallback
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
operator|(
name|EFI_PEI_PCD_PPI_CALLBACK
operator|)
name|NotificationFunction
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return;
block|}
end_function

begin_comment
comment|/**   Retrieves the next token in a token space.      Retrieves the next PCD token number from the token space specified by Guid.     If Guid is NULL, then the default token space is used.  If TokenNumber is 0,    then the first token number is returned.  Otherwise, the token number that    follows TokenNumber in the token space is returned.  If TokenNumber is the last    token number in the token space, then 0 is returned.        If TokenNumber is not 0 and is not in the token space specified by Guid, then ASSERT().    @param[in]  Guid        The pointer to a 128-bit unique value that designates which namespace                            to set a value from.  If NULL, then the default token space is used.   @param[in]  TokenNumber The previous PCD token number.  If 0, then retrieves the first PCD                            token number.    @return The next valid token number.  **/
end_comment

begin_function
name|UINTN
name|EFIAPI
name|LibPcdGetNextToken
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|OPTIONAL
name|IN
name|UINTN
name|TokenNumber
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|Status
operator|=
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetNextToken
argument_list|(
name|Guid
argument_list|,
operator|&
name|TokenNumber
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|!
name|EFI_ERROR
argument_list|(
name|Status
argument_list|)
operator|||
name|TokenNumber
operator|==
literal|0
argument_list|)
expr_stmt|;
return|return
name|TokenNumber
return|;
block|}
end_function

begin_comment
comment|/**   Used to retrieve the list of available PCD token space GUIDs.      Returns the PCD token space GUID that follows TokenSpaceGuid in the list of token spaces   in the platform.   If TokenSpaceGuid is NULL, then a pointer to the first PCD token spaces returned.   If TokenSpaceGuid is the last PCD token space GUID in the list, then NULL is returned.      @param  TokenSpaceGuid  The pointer to the a PCD token space GUID    @return The next valid token namespace.  **/
end_comment

begin_function
name|GUID
modifier|*
name|EFIAPI
name|LibPcdGetNextTokenSpace
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|TokenSpaceGuid
parameter_list|)
block|{
operator|(
name|GetPiPcdPpiPointer
argument_list|()
operator|)
operator|->
name|GetNextTokenSpace
argument_list|(
operator|&
name|TokenSpaceGuid
argument_list|)
expr_stmt|;
return|return
operator|(
name|GUID
operator|*
operator|)
name|TokenSpaceGuid
return|;
block|}
end_function

begin_comment
comment|/**   Sets a value of a patchable PCD entry that is type pointer.      Sets the PCD entry specified by PatchVariable to the value specified by Buffer    and SizeOfBuffer.  Buffer is returned.  If SizeOfBuffer is greater than    MaximumDatumSize, then set SizeOfBuffer to MaximumDatumSize and return    NULL to indicate that the set operation was not actually performed.     If SizeOfBuffer is set to MAX_ADDRESS, then SizeOfBuffer must be set to    MaximumDatumSize and NULL must be returned.      If PatchVariable is NULL, then ASSERT().   If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().    @param[out] PatchVariable     A pointer to the global variable in a module that is                                  the target of the set operation.   @param[in] MaximumDatumSize   The maximum size allowed for the PCD entry specified by PatchVariable.   @param[in, out] SizeOfBuffer  A pointer to the size, in bytes, of Buffer.   @param[in] Buffer             A pointer to the buffer to used to set the target variable.      @return Return the pointer to the buffer been set.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|LibPatchPcdSetPtr
parameter_list|(
name|OUT
name|VOID
modifier|*
name|PatchVariable
parameter_list|,
name|IN
name|UINTN
name|MaximumDatumSize
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|PatchVariable
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
operator|*
name|SizeOfBuffer
operator|>
name|MaximumDatumSize
operator|)
operator|||
operator|(
operator|*
name|SizeOfBuffer
operator|==
name|MAX_ADDRESS
operator|)
condition|)
block|{
operator|*
name|SizeOfBuffer
operator|=
name|MaximumDatumSize
expr_stmt|;
return|return
name|NULL
return|;
block|}
name|CopyMem
argument_list|(
name|PatchVariable
argument_list|,
name|Buffer
argument_list|,
operator|*
name|SizeOfBuffer
argument_list|)
expr_stmt|;
return|return
operator|(
name|VOID
operator|*
operator|)
name|Buffer
return|;
block|}
end_function

begin_comment
comment|/**   Sets a value of a patchable PCD entry that is type pointer.    Sets the PCD entry specified by PatchVariable to the value specified   by Buffer and SizeOfBuffer. If SizeOfBuffer is greater than MaximumDatumSize,   then set SizeOfBuffer to MaximumDatumSize and return RETURN_INVALID_PARAMETER   to indicate that the set operation was not actually performed.   If SizeOfBuffer is set to MAX_ADDRESS, then SizeOfBuffer must be set to   MaximumDatumSize and RETURN_INVALID_PARAMETER must be returned.    If PatchVariable is NULL, then ASSERT().   If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().    @param[out] PatchVariable     A pointer to the global variable in a module that is                                 the target of the set operation.   @param[in] MaximumDatumSize   The maximum size allowed for the PCD entry specified by PatchVariable.   @param[in, out] SizeOfBuffer  A pointer to the size, in bytes, of Buffer.   @param[in] Buffer             A pointer to the buffer to used to set the target variable.      @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPatchPcdSetPtrS
parameter_list|(
name|OUT
name|VOID
modifier|*
name|PatchVariable
parameter_list|,
name|IN
name|UINTN
name|MaximumDatumSize
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|PatchVariable
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
operator|*
name|SizeOfBuffer
operator|>
name|MaximumDatumSize
operator|)
operator|||
operator|(
operator|*
name|SizeOfBuffer
operator|==
name|MAX_ADDRESS
operator|)
condition|)
block|{
operator|*
name|SizeOfBuffer
operator|=
name|MaximumDatumSize
expr_stmt|;
return|return
name|RETURN_INVALID_PARAMETER
return|;
block|}
name|CopyMem
argument_list|(
name|PatchVariable
argument_list|,
name|Buffer
argument_list|,
operator|*
name|SizeOfBuffer
argument_list|)
expr_stmt|;
return|return
name|RETURN_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**   Sets a value and size of a patchable PCD entry that is type pointer.      Sets the PCD entry specified by PatchVariable to the value specified by Buffer    and SizeOfBuffer.  Buffer is returned.  If SizeOfBuffer is greater than    MaximumDatumSize, then set SizeOfBuffer to MaximumDatumSize and return    NULL to indicate that the set operation was not actually performed.     If SizeOfBuffer is set to MAX_ADDRESS, then SizeOfBuffer must be set to    MaximumDatumSize and NULL must be returned.      If PatchVariable is NULL, then ASSERT().   If SizeOfPatchVariable is NULL, then ASSERT().   If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().    @param[out] PatchVariable     A pointer to the global variable in a module that is                                  the target of the set operation.   @param[out] SizeOfPatchVariable A pointer to the size, in bytes, of PatchVariable.   @param[in] MaximumDatumSize   The maximum size allowed for the PCD entry specified by PatchVariable.   @param[in, out] SizeOfBuffer  A pointer to the size, in bytes, of Buffer.   @param[in] Buffer             A pointer to the buffer to used to set the target variable.      @return Return the pointer to the buffer been set.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|LibPatchPcdSetPtrAndSize
parameter_list|(
name|OUT
name|VOID
modifier|*
name|PatchVariable
parameter_list|,
name|OUT
name|UINTN
modifier|*
name|SizeOfPatchVariable
parameter_list|,
name|IN
name|UINTN
name|MaximumDatumSize
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|PatchVariable
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfPatchVariable
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
operator|*
name|SizeOfBuffer
operator|>
name|MaximumDatumSize
operator|)
operator|||
operator|(
operator|*
name|SizeOfBuffer
operator|==
name|MAX_ADDRESS
operator|)
condition|)
block|{
operator|*
name|SizeOfBuffer
operator|=
name|MaximumDatumSize
expr_stmt|;
return|return
name|NULL
return|;
block|}
name|CopyMem
argument_list|(
name|PatchVariable
argument_list|,
name|Buffer
argument_list|,
operator|*
name|SizeOfBuffer
argument_list|)
expr_stmt|;
operator|*
name|SizeOfPatchVariable
operator|=
operator|*
name|SizeOfBuffer
expr_stmt|;
return|return
operator|(
name|VOID
operator|*
operator|)
name|Buffer
return|;
block|}
end_function

begin_comment
comment|/**   Sets a value and size of a patchable PCD entry that is type pointer.    Sets the PCD entry specified by PatchVariable to the value specified   by Buffer and SizeOfBuffer. If SizeOfBuffer is greater than MaximumDatumSize,   then set SizeOfBuffer to MaximumDatumSize and return RETURN_INVALID_PARAMETER   to indicate that the set operation was not actually performed.   If SizeOfBuffer is set to MAX_ADDRESS, then SizeOfBuffer must be set to   MaximumDatumSize and RETURN_INVALID_PARAMETER must be returned.    If PatchVariable is NULL, then ASSERT().   If SizeOfPatchVariable is NULL, then ASSERT().   If SizeOfBuffer is NULL, then ASSERT().   If SizeOfBuffer> 0 and Buffer is NULL, then ASSERT().    @param[out] PatchVariable     A pointer to the global variable in a module that is                                 the target of the set operation.   @param[out] SizeOfPatchVariable A pointer to the size, in bytes, of PatchVariable.   @param[in] MaximumDatumSize   The maximum size allowed for the PCD entry specified by PatchVariable.   @param[in, out] SizeOfBuffer  A pointer to the size, in bytes, of Buffer.   @param[in] Buffer             A pointer to the buffer to used to set the target variable.      @return The status of the set operation.  **/
end_comment

begin_function
name|RETURN_STATUS
name|EFIAPI
name|LibPatchPcdSetPtrAndSizeS
parameter_list|(
name|OUT
name|VOID
modifier|*
name|PatchVariable
parameter_list|,
name|OUT
name|UINTN
modifier|*
name|SizeOfPatchVariable
parameter_list|,
name|IN
name|UINTN
name|MaximumDatumSize
parameter_list|,
name|IN
name|OUT
name|UINTN
modifier|*
name|SizeOfBuffer
parameter_list|,
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|)
block|{
name|ASSERT
argument_list|(
name|PatchVariable
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfPatchVariable
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
name|SizeOfBuffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
if|if
condition|(
operator|*
name|SizeOfBuffer
operator|>
literal|0
condition|)
block|{
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
operator|*
name|SizeOfBuffer
operator|>
name|MaximumDatumSize
operator|)
operator|||
operator|(
operator|*
name|SizeOfBuffer
operator|==
name|MAX_ADDRESS
operator|)
condition|)
block|{
operator|*
name|SizeOfBuffer
operator|=
name|MaximumDatumSize
expr_stmt|;
return|return
name|RETURN_INVALID_PARAMETER
return|;
block|}
name|CopyMem
argument_list|(
name|PatchVariable
argument_list|,
name|Buffer
argument_list|,
operator|*
name|SizeOfBuffer
argument_list|)
expr_stmt|;
operator|*
name|SizeOfPatchVariable
operator|=
operator|*
name|SizeOfBuffer
expr_stmt|;
return|return
name|RETURN_SUCCESS
return|;
block|}
end_function

begin_comment
comment|/**   Retrieve additional information associated with a PCD token.    This includes information such as the type of value the TokenNumber is associated with as well as possible   human readable name that is associated with the token.    If TokenNumber is not in the default token space specified, then ASSERT().    @param[in]    TokenNumber The PCD token number.   @param[out]   PcdInfo     The returned information associated with the requested TokenNumber.                             The caller is responsible for freeing the buffer that is allocated by callee for PcdInfo->PcdName. **/
end_comment

begin_function
name|VOID
name|EFIAPI
name|LibPcdGetInfo
parameter_list|(
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|OUT
name|PCD_INFO
modifier|*
name|PcdInfo
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|Status
operator|=
name|GetPcdInfoPpiPointer
argument_list|()
operator|->
name|GetInfo
argument_list|(
name|TokenNumber
argument_list|,
operator|(
name|EFI_PCD_INFO
operator|*
operator|)
name|PcdInfo
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**   Retrieve additional information associated with a PCD token.    This includes information such as the type of value the TokenNumber is associated with as well as possible   human readable name that is associated with the token.    If TokenNumber is not in the token space specified by Guid, then ASSERT().    @param[in]    Guid        The 128-bit unique value that designates the namespace from which to extract the value.   @param[in]    TokenNumber The PCD token number.   @param[out]   PcdInfo     The returned information associated with the requested TokenNumber.                             The caller is responsible for freeing the buffer that is allocated by callee for PcdInfo->PcdName. **/
end_comment

begin_function
name|VOID
name|EFIAPI
name|LibPcdGetInfoEx
parameter_list|(
name|IN
name|CONST
name|GUID
modifier|*
name|Guid
parameter_list|,
name|IN
name|UINTN
name|TokenNumber
parameter_list|,
name|OUT
name|PCD_INFO
modifier|*
name|PcdInfo
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|Status
operator|=
name|GetPiPcdInfoPpiPointer
argument_list|()
operator|->
name|GetInfo
argument_list|(
name|Guid
argument_list|,
name|TokenNumber
argument_list|,
operator|(
name|EFI_PCD_INFO
operator|*
operator|)
name|PcdInfo
argument_list|)
expr_stmt|;
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
block|}
end_function

begin_comment
comment|/**   Retrieve the currently set SKU Id.    @return   The currently set SKU Id. If the platform has not set at a SKU Id, then the             default SKU Id value of 0 is returned. If the platform has set a SKU Id, then the currently set SKU             Id is returned. **/
end_comment

begin_function
name|UINTN
name|EFIAPI
name|LibPcdGetSku
parameter_list|(
name|VOID
parameter_list|)
block|{
return|return
name|GetPiPcdInfoPpiPointer
argument_list|()
operator|->
name|GetSku
argument_list|()
return|;
block|}
end_function

end_unit

