begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file   Integer division worker functions for Ia32.    Copyright (c) 2006 - 2010, Intel Corporation. All rights reserved.<BR>   This program and the accompanying materials   are licensed and made available under the terms and conditions of the BSD License   which accompanies this distribution.  The full text of the license may be found at   http://opensource.org/licenses/bsd-license.php.    THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS,   WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.  **/
end_comment

begin_include
include|#
directive|include
file|"BaseLibInternals.h"
end_include

begin_comment
comment|/**   Worker function that Divides a 64-bit signed integer by a 64-bit signed integer and   generates a  64-bit signed result and a optional 64-bit signed remainder.    This function divides the 64-bit signed value Dividend by the 64-bit   signed value Divisor and generates a 64-bit signed quotient. If Remainder   is not NULL, then the 64-bit signed remainder is returned in Remainder.   This function returns the 64-bit signed quotient.    @param  Dividend  A 64-bit signed value.   @param  Divisor   A 64-bit signed value.   @param  Remainder A pointer to a 64-bit signed value. This parameter is                     optional and may be NULL.    @return Dividend / Divisor  **/
end_comment

begin_function
name|INT64
name|EFIAPI
name|InternalMathDivRemS64x64
parameter_list|(
name|IN
name|INT64
name|Dividend
parameter_list|,
name|IN
name|INT64
name|Divisor
parameter_list|,
name|OUT
name|INT64
modifier|*
name|Remainder
name|OPTIONAL
parameter_list|)
block|{
name|INT64
name|Quot
decl_stmt|;
name|Quot
operator|=
name|InternalMathDivRemU64x64
argument_list|(
call|(
name|UINT64
call|)
argument_list|(
name|Dividend
operator|>=
literal|0
condition|?
name|Dividend
else|:
operator|-
name|Dividend
argument_list|)
argument_list|,
call|(
name|UINT64
call|)
argument_list|(
name|Divisor
operator|>=
literal|0
condition|?
name|Divisor
else|:
operator|-
name|Divisor
argument_list|)
argument_list|,
operator|(
name|UINT64
operator|*
operator|)
name|Remainder
argument_list|)
expr_stmt|;
if|if
condition|(
name|Remainder
operator|!=
name|NULL
operator|&&
name|Dividend
operator|<
literal|0
condition|)
block|{
operator|*
name|Remainder
operator|=
operator|-
operator|*
name|Remainder
expr_stmt|;
block|}
return|return
operator|(
name|Dividend
operator|^
name|Divisor
operator|)
operator|>=
literal|0
condition|?
name|Quot
else|:
operator|-
name|Quot
return|;
block|}
end_function

end_unit

