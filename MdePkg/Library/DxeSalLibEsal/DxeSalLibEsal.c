begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file   This library implements the SAL Library Class using Extended SAL functions    Copyright (c) 2006 - 2011, Intel Corporation. All rights reserved.<BR>   This program and the accompanying materials   are licensed and made available under the terms and conditions of the BSD License   which accompanies this distribution.  The full text of the license may be found at   http://opensource.org/licenses/bsd-license.php.    THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS,   WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.  **/
end_comment

begin_include
include|#
directive|include
file|<PiDxe.h>
end_include

begin_include
include|#
directive|include
file|<Protocol/ExtendedSalServiceClasses.h>
end_include

begin_include
include|#
directive|include
file|<Library/SalLib.h>
end_include

begin_include
include|#
directive|include
file|<Library/ExtendedSalLib.h>
end_include

begin_comment
comment|/**   Makes a SAL procedure call.      This is a wrapper function to make a SAL procedure call.     No parameter checking is performed on the 8 input parameters,   but there are some common rules that the caller should follow   when making a SAL call.  Any address passed to SAL as buffers   for return parameters must be 8-byte aligned.  Unaligned   addresses may cause undefined results.  For those parameters   defined as reserved or some fields defined as reserved must be   zero filled or the invalid argument return value may be returned   or undefined result may occur during the execution of the procedure.   This function is only available on IPF.    @param  Index       The SAL procedure Index number   @param  Arg2        The 2nd parameter for SAL procedure calls   @param  Arg3        The 3rd parameter for SAL procedure calls   @param  Arg4        The 4th parameter for SAL procedure calls   @param  Arg5        The 5th parameter for SAL procedure calls   @param  Arg6        The 6th parameter for SAL procedure calls   @param  Arg7        The 7th parameter for SAL procedure calls   @param  Arg8        The 8th parameter for SAL procedure calls    @return SAL returned registers.  **/
end_comment

begin_function
name|SAL_RETURN_REGS
name|EFIAPI
name|SalCall
parameter_list|(
name|IN
name|UINT64
name|Index
parameter_list|,
name|IN
name|UINT64
name|Arg2
parameter_list|,
name|IN
name|UINT64
name|Arg3
parameter_list|,
name|IN
name|UINT64
name|Arg4
parameter_list|,
name|IN
name|UINT64
name|Arg5
parameter_list|,
name|IN
name|UINT64
name|Arg6
parameter_list|,
name|IN
name|UINT64
name|Arg7
parameter_list|,
name|IN
name|UINT64
name|Arg8
parameter_list|)
block|{
name|SAL_RETURN_REGS
name|Regs
decl_stmt|;
comment|//
comment|// Initial all members in this structure.
comment|//
name|Regs
operator|.
name|r9
operator|=
literal|0
expr_stmt|;
name|Regs
operator|.
name|r10
operator|=
literal|0
expr_stmt|;
name|Regs
operator|.
name|r11
operator|=
literal|0
expr_stmt|;
name|Regs
operator|.
name|Status
operator|=
name|EFI_SAL_INVALID_ARGUMENT
expr_stmt|;
switch|switch
condition|(
name|Index
condition|)
block|{
case|case
name|EFI_SAL_SET_VECTORS
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalSetVectorsFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_GET_STATE_INFO
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_MCA_LOG_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_MCA_LOG_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalGetStateInfoFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_GET_STATE_INFO_SIZE
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_MCA_LOG_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_MCA_LOG_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalGetStateInfoSizeFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_CLEAR_STATE_INFO
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_MCA_LOG_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_MCA_LOG_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalClearStateInfoFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_MC_RENDEZ
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalMcRendezFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_MC_SET_PARAMS
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalMcSetParamsFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_REGISTER_PHYSICAL_ADDR
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|EsalRegisterPhysicalAddrFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_CACHE_FLUSH
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_CACHE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_CACHE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalCacheFlushFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_CACHE_INIT
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_CACHE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_CACHE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalCacheInitFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_PCI_CONFIG_READ
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_PCI_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_PCI_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalPciConfigReadFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_PCI_CONFIG_WRITE
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_PCI_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_PCI_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|SalPciConfigWriteFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_FREQ_BASE
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|EsalGetPlatformBaseFreqFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_PHYSICAL_ID_INFO
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_BASE_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|EsalPhysicalIdInfoFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
case|case
name|EFI_SAL_UPDATE_PAL
case|:
return|return
name|EsalCall
argument_list|(
name|EFI_EXTENDED_SAL_PAL_SERVICES_PROTOCOL_GUID_LO
argument_list|,
name|EFI_EXTENDED_SAL_PAL_SERVICES_PROTOCOL_GUID_HI
argument_list|,
name|EsalUpdatePalFunctionId
argument_list|,
name|Arg2
argument_list|,
name|Arg3
argument_list|,
name|Arg4
argument_list|,
name|Arg5
argument_list|,
name|Arg6
argument_list|,
name|Arg7
argument_list|,
name|Arg8
argument_list|)
return|;
break|break;
default|default:
return|return
name|Regs
return|;
break|break;
block|}
block|}
end_function

end_unit

