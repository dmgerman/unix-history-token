begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file   Library functions that abstract driver model protocols   installation.    Copyright (c) 2006 - 2013, Intel Corporation. All rights reserved.<BR>   This program and the accompanying materials are   licensed and made available under the terms and conditions of the BSD License   which accompanies this distribution.  The full text of the license may be found at   http://opensource.org/licenses/bsd-license.php.      THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS,   WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.  **/
end_comment

begin_include
include|#
directive|include
file|"UefiLibInternal.h"
end_include

begin_comment
comment|/**   Installs and completes the initialization of a Driver Binding Protocol instance.      Installs the Driver Binding Protocol specified by DriverBinding onto the handle   specified by DriverBindingHandle. If DriverBindingHandle is NULL, then DriverBinding   is installed onto a newly created handle. DriverBindingHandle is typically the same   as the driver's ImageHandle, but it can be different if the driver produces multiple   Driver Binding Protocols.    If DriverBinding is NULL, then ASSERT().    If DriverBinding can not be installed onto a handle, then ASSERT().    @param  ImageHandle          The image handle of the driver.   @param  SystemTable          The EFI System Table that was passed to the driver's entry point.   @param  DriverBinding        A Driver Binding Protocol instance that this driver is producing.   @param  DriverBindingHandle  The handle that DriverBinding is to be installed onto.  If this                                parameter is NULL, then a new handle is created.    @retval EFI_SUCCESS           The protocol installation successfully completed.   @retval EFI_OUT_OF_RESOURCES  There was not enough system resources to install the protocol.   @retval Others                Status from gBS->InstallMultipleProtocolInterfaces().  **/
end_comment

begin_function
name|EFI_STATUS
name|EFIAPI
name|EfiLibInstallDriverBinding
parameter_list|(
name|IN
name|CONST
name|EFI_HANDLE
name|ImageHandle
parameter_list|,
name|IN
name|CONST
name|EFI_SYSTEM_TABLE
modifier|*
name|SystemTable
parameter_list|,
name|IN
name|EFI_DRIVER_BINDING_PROTOCOL
modifier|*
name|DriverBinding
parameter_list|,
name|IN
name|EFI_HANDLE
name|DriverBindingHandle
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|ASSERT
argument_list|(
name|DriverBinding
operator|!=
name|NULL
argument_list|)
expr_stmt|;
comment|//
comment|// Update the ImageHandle and DriverBindingHandle fields of the Driver Binding Protocol
comment|//
name|DriverBinding
operator|->
name|ImageHandle
operator|=
name|ImageHandle
expr_stmt|;
name|DriverBinding
operator|->
name|DriverBindingHandle
operator|=
name|DriverBindingHandle
expr_stmt|;
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
comment|//
comment|// ASSERT if the call to InstallMultipleProtocolInterfaces() failed
comment|//
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|Status
return|;
block|}
end_function

begin_comment
comment|/**   Installs and completes the initialization of a Driver Binding Protocol instance and   optionally installs the Component Name, Driver Configuration and Driver Diagnostics Protocols.    Initializes a driver by installing the Driver Binding Protocol together with the   optional Component Name, optional Driver Configure and optional Driver Diagnostic   Protocols onto the driver's DriverBindingHandle. If DriverBindingHandle is NULL,   then the protocols are  installed onto a newly created handle. DriverBindingHandle   is typically the same as the driver's ImageHandle, but it can be different if the   driver produces multiple Driver Binding Protocols.    If DriverBinding is NULL, then ASSERT().    If the installation fails, then ASSERT().      @param  ImageHandle          The image handle of the driver.   @param  SystemTable          The EFI System Table that was passed to the driver's entry point.   @param  DriverBinding        A Driver Binding Protocol instance that this driver is producing.   @param  DriverBindingHandle  The handle that DriverBinding is to be installed onto.  If this                                parameter is NULL, then a new handle is created.   @param  ComponentName        A Component Name Protocol instance that this driver is producing.   @param  DriverConfiguration  A Driver Configuration Protocol instance that this driver is producing.   @param  DriverDiagnostics    A Driver Diagnostics Protocol instance that this driver is producing.    @retval EFI_SUCCESS           The protocol installation successfully completed.   @retval EFI_OUT_OF_RESOURCES  There was not enough memory in pool to install all the protocols.  **/
end_comment

begin_function
name|EFI_STATUS
name|EFIAPI
name|EfiLibInstallAllDriverProtocols
parameter_list|(
name|IN
name|CONST
name|EFI_HANDLE
name|ImageHandle
parameter_list|,
name|IN
name|CONST
name|EFI_SYSTEM_TABLE
modifier|*
name|SystemTable
parameter_list|,
name|IN
name|EFI_DRIVER_BINDING_PROTOCOL
modifier|*
name|DriverBinding
parameter_list|,
name|IN
name|EFI_HANDLE
name|DriverBindingHandle
parameter_list|,
name|IN
name|CONST
name|EFI_COMPONENT_NAME_PROTOCOL
modifier|*
name|ComponentName
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_DRIVER_CONFIGURATION_PROTOCOL
modifier|*
name|DriverConfiguration
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_DRIVER_DIAGNOSTICS_PROTOCOL
modifier|*
name|DriverDiagnostics
name|OPTIONAL
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|ASSERT
argument_list|(
name|DriverBinding
operator|!=
name|NULL
argument_list|)
expr_stmt|;
comment|//
comment|// Update the ImageHandle and DriverBindingHandle fields of the Driver Binding Protocol
comment|//
name|DriverBinding
operator|->
name|ImageHandle
operator|=
name|ImageHandle
expr_stmt|;
name|DriverBinding
operator|->
name|DriverBindingHandle
operator|=
name|DriverBindingHandle
expr_stmt|;
if|if
condition|(
name|DriverDiagnostics
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnosticsDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|DriverConfiguration
operator|==
name|NULL
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverConfiguration
operator|==
name|NULL
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
comment|//
comment|// ASSERT if the call to InstallMultipleProtocolInterfaces() failed
comment|//
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|Status
return|;
block|}
end_function

begin_comment
comment|/**   Installs Driver Binding Protocol with optional Component Name and Component Name 2 Protocols.    Initializes a driver by installing the Driver Binding Protocol together with the   optional Component Name and optional Component Name 2 protocols onto the driver's   DriverBindingHandle.  If DriverBindingHandle is NULL, then the protocols are installed   onto a newly created handle.  DriverBindingHandle is typically the same as the driver's   ImageHandle, but it can be different if the driver produces multiple Driver Binding Protocols.    If DriverBinding is NULL, then ASSERT().    If the installation fails, then ASSERT().    @param  ImageHandle          The image handle of the driver.   @param  SystemTable          The EFI System Table that was passed to the driver's entry point.   @param  DriverBinding        A Driver Binding Protocol instance that this driver is producing.   @param  DriverBindingHandle  The handle that DriverBinding is to be installed onto.  If this                                parameter is NULL, then a new handle is created.   @param  ComponentName        A Component Name Protocol instance that this driver is producing.   @param  ComponentName2       A Component Name 2 Protocol instance that this driver is producing.    @retval EFI_SUCCESS           The protocol installation successfully completed.   @retval EFI_OUT_OF_RESOURCES  There was not enough memory in pool to install all the protocols.  **/
end_comment

begin_function
name|EFI_STATUS
name|EFIAPI
name|EfiLibInstallDriverBindingComponentName2
parameter_list|(
name|IN
name|CONST
name|EFI_HANDLE
name|ImageHandle
parameter_list|,
name|IN
name|CONST
name|EFI_SYSTEM_TABLE
modifier|*
name|SystemTable
parameter_list|,
name|IN
name|EFI_DRIVER_BINDING_PROTOCOL
modifier|*
name|DriverBinding
parameter_list|,
name|IN
name|EFI_HANDLE
name|DriverBindingHandle
parameter_list|,
name|IN
name|CONST
name|EFI_COMPONENT_NAME_PROTOCOL
modifier|*
name|ComponentName
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_COMPONENT_NAME2_PROTOCOL
modifier|*
name|ComponentName2
name|OPTIONAL
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|ASSERT
argument_list|(
name|DriverBinding
operator|!=
name|NULL
argument_list|)
expr_stmt|;
comment|//
comment|// Update the ImageHandle and DriverBindingHandle fields of the Driver Binding Protocol
comment|//
name|DriverBinding
operator|->
name|ImageHandle
operator|=
name|ImageHandle
expr_stmt|;
name|DriverBinding
operator|->
name|DriverBindingHandle
operator|=
name|DriverBindingHandle
expr_stmt|;
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
comment|//
comment|// ASSERT if the call to InstallMultipleProtocolInterfaces() failed
comment|//
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|Status
return|;
block|}
end_function

begin_comment
comment|/**   Installs Driver Binding Protocol with optional Component Name, Component Name 2, Driver   Configuration, Driver Configuration 2, Driver Diagnostics, and Driver Diagnostics 2 Protocols.    Initializes a driver by installing the Driver Binding Protocol together with the optional   Component Name, optional Component Name 2, optional Driver Configuration, optional Driver Configuration 2,   optional Driver Diagnostic, and optional Driver Diagnostic 2 Protocols onto the driver's DriverBindingHandle.   DriverBindingHandle is typically the same as the driver's ImageHandle, but it can be different if the driver   produces multiple Driver Binding Protocols.    If DriverBinding is NULL, then ASSERT().    If the installation fails, then ASSERT().     @param  ImageHandle           The image handle of the driver.   @param  SystemTable           The EFI System Table that was passed to the driver's entry point.   @param  DriverBinding         A Driver Binding Protocol instance that this driver is producing.   @param  DriverBindingHandle   The handle that DriverBinding is to be installed onto.  If this                                 parameter is NULL, then a new handle is created.   @param  ComponentName         A Component Name Protocol instance that this driver is producing.   @param  ComponentName2        A Component Name 2 Protocol instance that this driver is producing.   @param  DriverConfiguration   A Driver Configuration Protocol instance that this driver is producing.   @param  DriverConfiguration2  A Driver Configuration Protocol 2 instance that this driver is producing.   @param  DriverDiagnostics     A Driver Diagnostics Protocol instance that this driver is producing.   @param  DriverDiagnostics2    A Driver Diagnostics Protocol 2 instance that this driver is producing.    @retval EFI_SUCCESS           The protocol installation successfully completed.   @retval EFI_OUT_OF_RESOURCES  There was not enough memory in pool to install all the protocols.  **/
end_comment

begin_function
name|EFI_STATUS
name|EFIAPI
name|EfiLibInstallAllDriverProtocols2
parameter_list|(
name|IN
name|CONST
name|EFI_HANDLE
name|ImageHandle
parameter_list|,
name|IN
name|CONST
name|EFI_SYSTEM_TABLE
modifier|*
name|SystemTable
parameter_list|,
name|IN
name|EFI_DRIVER_BINDING_PROTOCOL
modifier|*
name|DriverBinding
parameter_list|,
name|IN
name|EFI_HANDLE
name|DriverBindingHandle
parameter_list|,
name|IN
name|CONST
name|EFI_COMPONENT_NAME_PROTOCOL
modifier|*
name|ComponentName
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_COMPONENT_NAME2_PROTOCOL
modifier|*
name|ComponentName2
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_DRIVER_CONFIGURATION_PROTOCOL
modifier|*
name|DriverConfiguration
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_DRIVER_CONFIGURATION2_PROTOCOL
modifier|*
name|DriverConfiguration2
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_DRIVER_DIAGNOSTICS_PROTOCOL
modifier|*
name|DriverDiagnostics
parameter_list|,
name|OPTIONAL
name|IN
name|CONST
name|EFI_DRIVER_DIAGNOSTICS2_PROTOCOL
modifier|*
name|DriverDiagnostics2
name|OPTIONAL
parameter_list|)
block|{
name|EFI_STATUS
name|Status
decl_stmt|;
name|ASSERT
argument_list|(
name|DriverBinding
operator|!=
name|NULL
argument_list|)
expr_stmt|;
comment|//
comment|// Update the ImageHandle and DriverBindingHandle fields of the Driver Binding Protocol
comment|//
name|DriverBinding
operator|->
name|ImageHandle
operator|=
name|ImageHandle
expr_stmt|;
name|DriverBinding
operator|->
name|DriverBindingHandle
operator|=
name|DriverBindingHandle
expr_stmt|;
if|if
condition|(
name|DriverConfiguration2
operator|==
name|NULL
condition|)
block|{
if|if
condition|(
name|DriverConfiguration
operator|==
name|NULL
condition|)
block|{
if|if
condition|(
name|DriverDiagnostics
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnosticsDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverDiagnostics
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnosticsDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverConfiguration
operator|==
name|NULL
condition|)
block|{
if|if
condition|(
name|DriverDiagnostics
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnosticsDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverDiagnostics
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnosticsDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|DriverDiagnostics2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdDriverDiagnostics2Disable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentNameDisable
argument_list|)
condition|)
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
if|if
condition|(
name|ComponentName2
operator|==
name|NULL
operator|||
name|FeaturePcdGet
argument_list|(
name|PcdComponentName2Disable
argument_list|)
condition|)
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|Status
operator|=
name|gBS
operator|->
name|InstallMultipleProtocolInterfaces
argument_list|(
operator|&
name|DriverBinding
operator|->
name|DriverBindingHandle
argument_list|,
operator|&
name|gEfiDriverBindingProtocolGuid
argument_list|,
name|DriverBinding
argument_list|,
operator|&
name|gEfiComponentNameProtocolGuid
argument_list|,
name|ComponentName
argument_list|,
operator|&
name|gEfiComponentName2ProtocolGuid
argument_list|,
name|ComponentName2
argument_list|,
operator|&
name|gEfiDriverConfigurationProtocolGuid
argument_list|,
name|DriverConfiguration
argument_list|,
operator|&
name|gEfiDriverConfiguration2ProtocolGuid
argument_list|,
name|DriverConfiguration2
argument_list|,
operator|&
name|gEfiDriverDiagnosticsProtocolGuid
argument_list|,
name|DriverDiagnostics
argument_list|,
operator|&
name|gEfiDriverDiagnostics2ProtocolGuid
argument_list|,
name|DriverDiagnostics2
argument_list|,
name|NULL
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
block|}
block|}
comment|//
comment|// ASSERT if the call to InstallMultipleProtocolInterfaces() failed
comment|//
name|ASSERT_EFI_ERROR
argument_list|(
name|Status
argument_list|)
expr_stmt|;
return|return
name|Status
return|;
block|}
end_function

end_unit

