begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/** @file   ScanMem8() and ScanMemN() implementation.    The following BaseMemoryLib instances contain the same copy of this file:      BaseMemoryLib     BaseMemoryLibMmx     BaseMemoryLibSse2     BaseMemoryLibRepStr     BaseMemoryLibOptDxe     BaseMemoryLibOptPei     PeiMemoryLib     UefiMemoryLib    Copyright (c) 2006 - 2010, Intel Corporation. All rights reserved.<BR>   This program and the accompanying materials   are licensed and made available under the terms and conditions of the BSD License   which accompanies this distribution.  The full text of the license may be found at   http://opensource.org/licenses/bsd-license.php.    THE PROGRAM IS DISTRIBUTED UNDER THE BSD LICENSE ON AN "AS IS" BASIS,   WITHOUT WARRANTIES OR REPRESENTATIONS OF ANY KIND, EITHER EXPRESS OR IMPLIED.  **/
end_comment

begin_include
include|#
directive|include
file|"MemLibInternals.h"
end_include

begin_comment
comment|/**   Scans a target buffer for an 8-bit value, and returns a pointer to the matching 8-bit value   in the target buffer.    This function searches the target buffer specified by Buffer and Length from the lowest   address to the highest address for an 8-bit value that matches Value.  If a match is found,   then a pointer to the matching byte in the target buffer is returned.  If no match is found,   then NULL is returned.  If Length is 0, then NULL is returned.      If Length> 0 and Buffer is NULL, then ASSERT().   If Length is greater than (MAX_ADDRESS - Buffer + 1), then ASSERT().    @param  Buffer      The pointer to the target buffer to scan.   @param  Length      The number of bytes in Buffer to scan.   @param  Value       The value to search for in the target buffer.    @return A pointer to the matching byte in the target buffer or NULL otherwise.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|ScanMem8
parameter_list|(
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|,
name|IN
name|UINTN
name|Length
parameter_list|,
name|IN
name|UINT8
name|Value
parameter_list|)
block|{
if|if
condition|(
name|Length
operator|==
literal|0
condition|)
block|{
return|return
name|NULL
return|;
block|}
name|ASSERT
argument_list|(
name|Buffer
operator|!=
name|NULL
argument_list|)
expr_stmt|;
name|ASSERT
argument_list|(
operator|(
name|Length
operator|-
literal|1
operator|)
operator|<=
operator|(
name|MAX_ADDRESS
operator|-
operator|(
name|UINTN
operator|)
name|Buffer
operator|)
argument_list|)
expr_stmt|;
return|return
operator|(
name|VOID
operator|*
operator|)
name|InternalMemScanMem8
argument_list|(
name|Buffer
argument_list|,
name|Length
argument_list|,
name|Value
argument_list|)
return|;
block|}
end_function

begin_comment
comment|/**   Scans a target buffer for a UINTN sized value, and returns a pointer to the matching    UINTN sized value in the target buffer.    This function searches the target buffer specified by Buffer and Length from the lowest   address to the highest address for a UINTN sized value that matches Value.  If a match is found,   then a pointer to the matching byte in the target buffer is returned.  If no match is found,   then NULL is returned.  If Length is 0, then NULL is returned.      If Length> 0 and Buffer is NULL, then ASSERT().   If Buffer is not aligned on a UINTN boundary, then ASSERT().   If Length is not aligned on a UINTN boundary, then ASSERT().   If Length is greater than (MAX_ADDRESS - Buffer + 1), then ASSERT().    @param  Buffer      The pointer to the target buffer to scan.   @param  Length      The number of bytes in Buffer to scan.   @param  Value       The value to search for in the target buffer.    @return A pointer to the matching byte in the target buffer or NULL otherwise.  **/
end_comment

begin_function
name|VOID
modifier|*
name|EFIAPI
name|ScanMemN
parameter_list|(
name|IN
name|CONST
name|VOID
modifier|*
name|Buffer
parameter_list|,
name|IN
name|UINTN
name|Length
parameter_list|,
name|IN
name|UINTN
name|Value
parameter_list|)
block|{
if|if
condition|(
sizeof|sizeof
argument_list|(
name|UINTN
argument_list|)
operator|==
sizeof|sizeof
argument_list|(
name|UINT64
argument_list|)
condition|)
block|{
return|return
name|ScanMem64
argument_list|(
name|Buffer
argument_list|,
name|Length
argument_list|,
operator|(
name|UINT64
operator|)
name|Value
argument_list|)
return|;
block|}
else|else
block|{
return|return
name|ScanMem32
argument_list|(
name|Buffer
argument_list|,
name|Length
argument_list|,
operator|(
name|UINT32
operator|)
name|Value
argument_list|)
return|;
block|}
block|}
end_function

end_unit

