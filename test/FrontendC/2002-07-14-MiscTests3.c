begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|// RUN: %llvmgcc -w -S %s -o - | llvm-as -f -o /dev/null
end_comment

begin_function_decl
name|void
modifier|*
name|malloc
parameter_list|(
name|unsigned
parameter_list|)
function_decl|;
end_function_decl

begin_comment
comment|//#include<stdio.h>
end_comment

begin_function_decl
name|int
name|puts
parameter_list|(
specifier|const
name|char
modifier|*
name|s
parameter_list|)
function_decl|;
end_function_decl

begin_struct
struct|struct
name|FunStructTest
block|{
name|int
name|Test1
decl_stmt|;
name|char
modifier|*
name|Pointer
decl_stmt|;
name|int
name|Array
index|[
literal|12
index|]
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|SubStruct
block|{
name|short
name|X
decl_stmt|,
name|Y
decl_stmt|;
block|}
struct|;
end_struct

begin_struct
struct|struct
name|Quad
block|{
name|int
name|w
decl_stmt|;
name|struct
name|SubStruct
name|SS
decl_stmt|;
name|struct
name|SubStruct
modifier|*
name|SSP
decl_stmt|;
name|char
name|c
decl_stmt|;
name|int
name|y
decl_stmt|;
block|}
struct|;
end_struct

begin_decl_stmt
name|struct
name|Quad
name|GlobalQuad
init|=
block|{
literal|4
block|,
block|{
literal|1
block|,
literal|2
block|}
block|,
literal|0
block|,
literal|3
block|,
literal|156
block|}
decl_stmt|;
end_decl_stmt

begin_typedef
typedef|typedef
name|int
function_decl|(
modifier|*
name|FuncPtr
function_decl|)
parameter_list|(
name|int
parameter_list|)
function_decl|;
end_typedef

begin_function
name|unsigned
name|PtrFunc
parameter_list|(
name|int
function_decl|(
modifier|*
name|Func
function_decl|)
parameter_list|(
name|int
parameter_list|)
parameter_list|,
name|int
name|X
parameter_list|)
block|{
return|return
name|Func
argument_list|(
name|X
argument_list|)
return|;
block|}
end_function

begin_function
name|char
name|PtrFunc2
parameter_list|(
name|FuncPtr
name|FuncTab
index|[
literal|30
index|]
parameter_list|,
name|int
name|Num
parameter_list|)
block|{
return|return
name|FuncTab
index|[
name|Num
index|]
operator|(
literal|'b'
operator|)
return|;
block|}
end_function

begin_function_decl
specifier|extern
name|char
name|SmallArgs2
parameter_list|(
name|char
name|w
parameter_list|,
name|char
name|x
parameter_list|,
name|long
name|long
name|Zrrk
parameter_list|,
name|char
name|y
parameter_list|,
name|char
name|z
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
specifier|extern
name|int
name|SomeFunc
parameter_list|(
name|void
parameter_list|)
function_decl|;
end_function_decl

begin_function
name|char
name|SmallArgs
parameter_list|(
name|char
name|w
parameter_list|,
name|char
name|x
parameter_list|,
name|char
name|y
parameter_list|,
name|char
name|z
parameter_list|)
block|{
name|SomeFunc
argument_list|()
expr_stmt|;
return|return
name|SmallArgs2
argument_list|(
name|w
operator|-
literal|1
argument_list|,
name|x
operator|+
literal|1
argument_list|,
name|y
argument_list|,
name|z
argument_list|,
name|w
argument_list|)
return|;
block|}
end_function

begin_function
specifier|static
name|int
name|F0
parameter_list|(
name|struct
name|Quad
name|Q
parameter_list|,
name|int
name|i
parameter_list|)
block|{
comment|/* Pass Q by value */
name|struct
name|Quad
name|R
decl_stmt|;
if|if
condition|(
name|i
condition|)
name|R
operator|.
name|SS
operator|=
name|Q
operator|.
name|SS
expr_stmt|;
name|Q
operator|.
name|SSP
operator|=
operator|&
name|R
operator|.
name|SS
expr_stmt|;
name|Q
operator|.
name|w
operator|=
name|Q
operator|.
name|y
operator|=
name|Q
operator|.
name|c
operator|=
literal|1
expr_stmt|;
return|return
name|Q
operator|.
name|SS
operator|.
name|Y
operator|+
name|i
operator|+
name|R
operator|.
name|y
operator|-
name|Q
operator|.
name|c
return|;
block|}
end_function

begin_function
name|int
name|F1
parameter_list|(
name|struct
name|Quad
modifier|*
name|Q
parameter_list|,
name|int
name|i
parameter_list|)
block|{
comment|/* Pass Q by address */
name|struct
name|Quad
name|R
decl_stmt|;
if|#
directive|if
literal|0
block|if (i) R.SS = Q->SS;
else|#
directive|else
if|if
condition|(
name|i
condition|)
name|R
operator|=
operator|*
name|Q
expr_stmt|;
endif|#
directive|endif
name|Q
operator|->
name|w
operator|=
name|Q
operator|->
name|y
operator|=
name|Q
operator|->
name|c
operator|=
literal|1
expr_stmt|;
return|return
name|Q
operator|->
name|SS
operator|.
name|Y
operator|+
name|i
operator|+
name|R
operator|.
name|y
operator|-
name|Q
operator|->
name|c
return|;
block|}
end_function

begin_function
name|int
name|BadFunc
parameter_list|(
name|float
name|Val
parameter_list|)
block|{
name|int
name|Result
decl_stmt|;
if|if
condition|(
name|Val
operator|>
literal|12.345
condition|)
name|Result
operator|=
literal|4
expr_stmt|;
return|return
name|Result
return|;
comment|/* Test use of undefined value */
block|}
end_function

begin_function
name|int
name|RealFunc
parameter_list|(
name|void
parameter_list|)
block|{
return|return
name|SomeUndefinedFunction
argument_list|(
literal|1
argument_list|,
literal|4
argument_list|,
literal|5
argument_list|)
return|;
block|}
end_function

begin_function_decl
specifier|extern
name|int
name|EF1
parameter_list|(
name|int
modifier|*
parameter_list|,
name|char
modifier|*
parameter_list|,
name|int
modifier|*
parameter_list|)
function_decl|;
end_function_decl

begin_function
name|int
name|Func
parameter_list|(
name|int
name|Param
parameter_list|,
name|long
name|long
name|Param2
parameter_list|)
block|{
name|int
name|Result
init|=
name|Param
decl_stmt|;
block|{
block|{
block|{
block|{
name|char
name|c
decl_stmt|;
name|int
name|X
decl_stmt|;
name|EF1
argument_list|(
operator|&
name|Result
argument_list|,
operator|&
name|c
argument_list|,
operator|&
name|X
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|{
comment|// c& X are duplicate names!
name|char
name|c
decl_stmt|;
name|int
name|X
decl_stmt|;
name|EF1
argument_list|(
operator|&
name|Result
argument_list|,
operator|&
name|c
argument_list|,
operator|&
name|X
argument_list|)
expr_stmt|;
block|}
block|}
return|return
name|Result
return|;
block|}
end_function

begin_function
name|short
name|FunFunc
parameter_list|(
name|long
name|long
name|x
parameter_list|,
name|char
name|z
parameter_list|)
block|{
return|return
name|x
operator|+
name|z
return|;
block|}
end_function

begin_function
name|unsigned
name|castTest
parameter_list|(
name|int
name|X
parameter_list|)
block|{
return|return
name|X
return|;
block|}
end_function

begin_function
name|double
name|TestAdd
parameter_list|(
name|double
name|X
parameter_list|,
name|float
name|Y
parameter_list|)
block|{
return|return
name|X
operator|+
name|Y
operator|+
literal|.5
return|;
block|}
end_function

begin_function
name|int
name|func
parameter_list|(
name|int
name|i
parameter_list|,
name|int
name|j
parameter_list|)
block|{
while|while
condition|(
name|i
operator|!=
literal|20
condition|)
name|i
operator|+=
literal|2
expr_stmt|;
name|j
operator|+=
name|func
argument_list|(
literal|2
argument_list|,
name|i
argument_list|)
expr_stmt|;
return|return
operator|(
name|i
operator|*
literal|3
operator|+
name|j
operator|*
literal|2
operator|)
operator|*
name|j
return|;
block|}
end_function

begin_function
name|int
name|SumArray
parameter_list|(
name|int
name|Array
index|[]
parameter_list|,
name|int
name|Num
parameter_list|)
block|{
name|int
name|i
decl_stmt|,
name|Result
init|=
literal|0
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|Num
condition|;
operator|++
name|i
control|)
name|Result
operator|+=
name|Array
index|[
name|i
index|]
expr_stmt|;
return|return
name|Result
return|;
block|}
end_function

begin_function
name|int
name|ArrayParam
parameter_list|(
name|int
name|Values
index|[
literal|100
index|]
parameter_list|)
block|{
return|return
name|EF1
argument_list|(
operator|(
name|int
operator|*
operator|)
name|Values
index|[
literal|50
index|]
argument_list|,
operator|(
name|char
operator|*
operator|)
literal|1
argument_list|,
operator|&
name|Values
index|[
literal|50
index|]
argument_list|)
return|;
block|}
end_function

begin_function
name|int
name|ArrayToSum
parameter_list|(
name|void
parameter_list|)
block|{
name|int
name|A
index|[
literal|100
index|]
decl_stmt|,
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|100
condition|;
operator|++
name|i
control|)
name|A
index|[
name|i
index|]
operator|=
name|i
operator|*
literal|4
expr_stmt|;
return|return
name|A
index|[
name|A
index|[
literal|0
index|]
index|]
return|;
comment|//SumArray(A, 100);
block|}
end_function

begin_function_decl
name|int
name|ExternFunc
parameter_list|(
name|long
name|long
parameter_list|,
name|unsigned
modifier|*
parameter_list|,
name|short
parameter_list|,
name|unsigned
name|char
parameter_list|)
function_decl|;
end_function_decl

begin_function
name|int
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|char
modifier|*
name|argv
index|[]
parameter_list|)
block|{
name|unsigned
name|i
decl_stmt|;
name|puts
argument_list|(
literal|"Hello world!\n"
argument_list|)
expr_stmt|;
name|ExternFunc
argument_list|(
operator|-
literal|1
argument_list|,
literal|0
argument_list|,
operator|(
name|short
operator|)
name|argc
argument_list|,
literal|2
argument_list|)
expr_stmt|;
comment|//func(argc, argc);
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
literal|10
condition|;
name|i
operator|++
control|)
name|puts
argument_list|(
name|argv
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

begin_function
name|double
name|MathFunc
parameter_list|(
name|double
name|X
parameter_list|,
name|double
name|Y
parameter_list|,
name|double
name|Z
parameter_list|,
name|double
name|AA
parameter_list|,
name|double
name|BB
parameter_list|,
name|double
name|CC
parameter_list|,
name|double
name|DD
parameter_list|,
name|double
name|EE
parameter_list|,
name|double
name|FF
parameter_list|,
name|double
name|GG
parameter_list|,
name|double
name|HH
parameter_list|,
name|double
name|aAA
parameter_list|,
name|double
name|aBB
parameter_list|,
name|double
name|aCC
parameter_list|,
name|double
name|aDD
parameter_list|,
name|double
name|aEE
parameter_list|,
name|double
name|aFF
parameter_list|)
block|{
return|return
name|X
operator|+
name|Y
operator|+
name|Z
operator|+
name|AA
operator|+
name|BB
operator|+
name|CC
operator|+
name|DD
operator|+
name|EE
operator|+
name|FF
operator|+
name|GG
operator|+
name|HH
operator|+
name|aAA
operator|+
name|aBB
operator|+
name|aCC
operator|+
name|aDD
operator|+
name|aEE
operator|+
name|aFF
return|;
block|}
end_function

begin_function
name|void
name|strcpy
parameter_list|(
name|char
modifier|*
name|s1
parameter_list|,
name|char
modifier|*
name|s2
parameter_list|)
block|{
while|while
condition|(
operator|*
name|s1
operator|++
operator|=
operator|*
name|s2
operator|++
condition|)
empty_stmt|;
block|}
end_function

begin_function
name|void
name|strcat
parameter_list|(
name|char
modifier|*
name|s1
parameter_list|,
name|char
modifier|*
name|s2
parameter_list|)
block|{
while|while
condition|(
operator|*
name|s1
operator|++
condition|)
empty_stmt|;
name|s1
operator|--
expr_stmt|;
while|while
condition|(
operator|*
name|s1
operator|++
operator|=
operator|*
name|s2
operator|++
condition|)
empty_stmt|;
block|}
end_function

begin_function
name|int
name|strcmp
parameter_list|(
name|char
modifier|*
name|s1
parameter_list|,
name|char
modifier|*
name|s2
parameter_list|)
block|{
while|while
condition|(
operator|*
name|s1
operator|++
operator|==
operator|*
name|s2
operator|++
condition|)
empty_stmt|;
if|if
condition|(
operator|*
name|s1
operator|==
literal|0
condition|)
block|{
if|if
condition|(
operator|*
name|s2
operator|==
literal|0
condition|)
block|{
return|return
literal|0
return|;
block|}
else|else
block|{
return|return
operator|-
literal|1
return|;
block|}
block|}
else|else
block|{
if|if
condition|(
operator|*
name|s2
operator|==
literal|0
condition|)
block|{
return|return
literal|1
return|;
block|}
else|else
block|{
return|return
operator|(
operator|*
operator|(
operator|--
name|s1
operator|)
operator|-
operator|*
operator|(
operator|--
name|s2
operator|)
operator|)
return|;
block|}
block|}
block|}
end_function

end_unit

