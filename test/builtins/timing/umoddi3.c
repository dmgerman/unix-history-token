begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"timing.h"
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_define
define|#
directive|define
name|INPUT_TYPE
value|uint64_t
end_define

begin_define
define|#
directive|define
name|INPUT_SIZE
value|256
end_define

begin_define
define|#
directive|define
name|FUNCTION_NAME
value|__umoddi3
end_define

begin_ifndef
ifndef|#
directive|ifndef
name|LIBNAME
end_ifndef

begin_define
define|#
directive|define
name|LIBNAME
value|UNKNOWN
end_define

begin_endif
endif|#
directive|endif
end_endif

begin_define
define|#
directive|define
name|LIBSTRING
value|LIBSTRINGX(LIBNAME)
end_define

begin_define
define|#
directive|define
name|LIBSTRINGX
parameter_list|(
name|a
parameter_list|)
value|LIBSTRINGXX(a)
end_define

begin_define
define|#
directive|define
name|LIBSTRINGXX
parameter_list|(
name|a
parameter_list|)
value|#a
end_define

begin_function_decl
name|INPUT_TYPE
name|FUNCTION_NAME
parameter_list|(
name|INPUT_TYPE
name|input1
parameter_list|,
name|INPUT_TYPE
name|input2
parameter_list|)
function_decl|;
end_function_decl

begin_function
name|int
name|main
parameter_list|(
name|int
name|argc
parameter_list|,
name|char
modifier|*
name|argv
index|[]
parameter_list|)
block|{
name|INPUT_TYPE
name|input1
index|[
name|INPUT_SIZE
index|]
decl_stmt|;
name|INPUT_TYPE
name|input2
index|[
name|INPUT_SIZE
index|]
decl_stmt|;
name|int
name|i
decl_stmt|,
name|j
decl_stmt|;
name|srand
argument_list|(
literal|42
argument_list|)
expr_stmt|;
comment|// Initialize the input array with data of various sizes.
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|INPUT_SIZE
condition|;
operator|++
name|i
control|)
block|{
name|input1
index|[
name|i
index|]
operator|=
operator|(
operator|(
operator|(
name|uint64_t
operator|)
name|rand
argument_list|()
operator|<<
literal|36
operator|)
operator||
operator|(
name|uint64_t
operator|)
name|rand
argument_list|()
operator|)
operator|>>
operator|(
name|rand
argument_list|()
operator|&
literal|63
operator|)
expr_stmt|;
name|input2
index|[
name|i
index|]
operator|=
operator|(
operator|(
operator|(
operator|(
name|uint64_t
operator|)
name|rand
argument_list|()
operator|<<
literal|36
operator|)
operator||
operator|(
name|uint64_t
operator|)
name|rand
argument_list|()
operator|)
operator|>>
operator|(
name|rand
argument_list|()
operator|&
literal|63
operator|)
operator|)
operator|+
literal|1LL
expr_stmt|;
block|}
name|int64_t
name|fixedInput
init|=
name|INT64_C
argument_list|(
literal|0x1234567890ABCDEF
argument_list|)
decl_stmt|;
name|double
name|bestTime
init|=
name|__builtin_inf
argument_list|()
decl_stmt|;
name|void
modifier|*
name|dummyp
decl_stmt|;
for|for
control|(
name|j
operator|=
literal|0
init|;
name|j
operator|<
literal|1024
condition|;
operator|++
name|j
control|)
block|{
name|uint64_t
name|startTime
init|=
name|mach_absolute_time
argument_list|()
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|INPUT_SIZE
condition|;
operator|++
name|i
control|)
name|FUNCTION_NAME
argument_list|(
name|input1
index|[
name|i
index|]
argument_list|,
name|input2
index|[
name|i
index|]
argument_list|)
expr_stmt|;
name|uint64_t
name|endTime
init|=
name|mach_absolute_time
argument_list|()
decl_stmt|;
name|double
name|thisTime
init|=
name|intervalInCycles
argument_list|(
name|startTime
argument_list|,
name|endTime
argument_list|)
decl_stmt|;
name|bestTime
operator|=
name|__builtin_fmin
argument_list|(
name|thisTime
argument_list|,
name|bestTime
argument_list|)
expr_stmt|;
comment|// Move the stack alignment between trials to eliminate (mostly) aliasing effects
name|dummyp
operator|=
name|alloca
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|"%16s: %f cycles.\n"
argument_list|,
name|LIBSTRING
argument_list|,
name|bestTime
operator|/
operator|(
name|double
operator|)
name|INPUT_SIZE
argument_list|)
expr_stmt|;
return|return
literal|0
return|;
block|}
end_function

end_unit

