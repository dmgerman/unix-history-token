begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|// RUN: %clang_cc1 %s -fsyntax-only -Wmicrosoft -verify -fms-extensions
end_comment

begin_comment
comment|// expected-no-diagnostics
end_comment

begin_struct
struct|struct
name|Type
block|{ }
struct|;
end_struct

begin_function
name|void
name|test_if_exists_stmts
parameter_list|()
block|{
name|int
name|b
init|=
literal|0
decl_stmt|;
name|__if_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|b
operator|++
expr_stmt|;
name|b
operator|++
expr_stmt|;
block|}
name|__if_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|this
name|will
name|not
name|compile
operator|.
expr|}
name|__if_not_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|this
name|will
name|not
name|compile
operator|.
expr|}
name|__if_not_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|b
operator|++
block|;
name|b
operator|++
block|;   }
block|}
name|int
name|if_exists_creates_no_scope
argument_list|()
block|{
name|__if_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|int
name|x
block|;
comment|// 'x' is declared in the parent scope.
block|}
name|__if_not_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|x
operator|++
block|;   }
return|return
name|x
return|;
block|}
name|__if_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|int
name|var23
decl_stmt|;
block|}
name|__if_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|this
name|will
name|not
name|compile
operator|.
expr|}
name|__if_not_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|this
name|will
name|not
name|compile
operator|.
expr|}
name|__if_not_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|int
name|var244
block|; }
name|void
name|test_if_exists_init_list
argument_list|()
block|{
name|int
name|array1
index|[]
operator|=
block|{
literal|0
block|,
name|__if_exists
argument_list|(
argument|Type
argument_list|)
block|{
literal|2
block|, }
literal|3
block|}
block|;
name|int
name|array2
index|[]
operator|=
block|{
literal|0
block|,
name|__if_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|this
name|will
name|not
name|compile
block|}
literal|3
block|}
block|;
name|int
name|array3
index|[]
operator|=
block|{
literal|0
block|,
name|__if_not_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
literal|2
block|, }
literal|3
block|}
block|;
name|int
name|array4
index|[]
operator|=
block|{
literal|0
block|,
name|__if_not_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|this
name|will
name|not
name|compile
block|}
literal|3
block|}
block|;  }
name|void
name|test_nested_if_exists
argument_list|()
block|{
name|__if_exists
argument_list|(
argument|Type
argument_list|)
block|{
name|int
name|x
operator|=
literal|42
block|;
name|__if_not_exists
argument_list|(
argument|Type_not
argument_list|)
block|{
name|x
operator|++
block|;     }
block|}
block|}
end_function

end_unit

