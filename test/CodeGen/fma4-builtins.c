begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|// RUN: %clang_cc1 %s -O3 -triple=x86_64-apple-darwin -target-feature +fma4 -emit-llvm -o - | FileCheck %s
end_comment

begin_comment
comment|// Don't include mm_malloc.h, it's system specific.
end_comment

begin_define
define|#
directive|define
name|__MM_MALLOC_H
end_define

begin_include
include|#
directive|include
file|<x86intrin.h>
end_include

begin_function
name|__m128
name|test_mm_macc_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.ps
return|return
name|_mm_macc_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_macc_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.pd
return|return
name|_mm_macc_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_macc_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.ss
return|return
name|_mm_macc_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_macc_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.sd
return|return
name|_mm_macc_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_msub_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.ps
return|return
name|_mm_msub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_msub_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.pd
return|return
name|_mm_msub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_msub_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.ss
return|return
name|_mm_msub_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_msub_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.sd
return|return
name|_mm_msub_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_nmacc_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.ps
return|return
name|_mm_nmacc_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_nmacc_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.pd
return|return
name|_mm_nmacc_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_nmacc_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.ss
return|return
name|_mm_nmacc_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_nmacc_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.sd
return|return
name|_mm_nmacc_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_nmsub_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.ps
return|return
name|_mm_nmsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_nmsub_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.pd
return|return
name|_mm_nmsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_nmsub_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.ss
return|return
name|_mm_nmsub_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_nmsub_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.sd
return|return
name|_mm_nmsub_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_maddsub_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.ps
return|return
name|_mm_maddsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_maddsub_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.pd
return|return
name|_mm_maddsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_msubadd_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.ps
return|return
name|_mm_msubadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_msubadd_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.pd
return|return
name|_mm_msubadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_macc_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.ps.256
return|return
name|_mm256_macc_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_macc_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.pd.256
return|return
name|_mm256_macc_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_msub_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.ps.256
return|return
name|_mm256_msub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_msub_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.pd.256
return|return
name|_mm256_msub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_nmacc_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.ps.256
return|return
name|_mm256_nmacc_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_nmacc_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.pd.256
return|return
name|_mm256_nmacc_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_nmsub_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.ps.256
return|return
name|_mm256_nmsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_nmsub_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.pd.256
return|return
name|_mm256_nmsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_maddsub_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.ps.256
return|return
name|_mm256_maddsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_maddsub_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.pd.256
return|return
name|_mm256_maddsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_msubadd_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.ps.256
return|return
name|_mm256_msubadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_msubadd_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.pd.256
return|return
name|_mm256_msubadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

end_unit

