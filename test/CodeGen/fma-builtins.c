begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|// RUN: %clang_cc1 %s -triple=x86_64-apple-darwin -target-feature +fma -emit-llvm -o - | FileCheck %s
end_comment

begin_comment
comment|// Don't include mm_malloc.h, it's system specific.
end_comment

begin_define
define|#
directive|define
name|__MM_MALLOC_H
end_define

begin_include
include|#
directive|include
file|<immintrin.h>
end_include

begin_function
name|__m128
name|test_mm_fmadd_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.ps
return|return
name|_mm_fmadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fmadd_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.pd
return|return
name|_mm_fmadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fmadd_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.ss
return|return
name|_mm_fmadd_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fmadd_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.sd
return|return
name|_mm_fmadd_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fmsub_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.ps
return|return
name|_mm_fmsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fmsub_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.pd
return|return
name|_mm_fmsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fmsub_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.ss
return|return
name|_mm_fmsub_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fmsub_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.sd
return|return
name|_mm_fmsub_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fnmadd_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.ps
return|return
name|_mm_fnmadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fnmadd_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.pd
return|return
name|_mm_fnmadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fnmadd_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.ss
return|return
name|_mm_fnmadd_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fnmadd_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.sd
return|return
name|_mm_fnmadd_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fnmsub_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.ps
return|return
name|_mm_fnmsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fnmsub_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.pd
return|return
name|_mm_fnmsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fnmsub_ss
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.ss
return|return
name|_mm_fnmsub_ss
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fnmsub_sd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.sd
return|return
name|_mm_fnmsub_sd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fmaddsub_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.ps
return|return
name|_mm_fmaddsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fmaddsub_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.pd
return|return
name|_mm_fmaddsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128
name|test_mm_fmsubadd_ps
parameter_list|(
name|__m128
name|a
parameter_list|,
name|__m128
name|b
parameter_list|,
name|__m128
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.ps
return|return
name|_mm_fmsubadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m128d
name|test_mm_fmsubadd_pd
parameter_list|(
name|__m128d
name|a
parameter_list|,
name|__m128d
name|b
parameter_list|,
name|__m128d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.pd
return|return
name|_mm_fmsubadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_fmadd_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.ps.256
return|return
name|_mm256_fmadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_fmadd_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmadd.pd.256
return|return
name|_mm256_fmadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_fmsub_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.ps.256
return|return
name|_mm256_fmsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_fmsub_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsub.pd.256
return|return
name|_mm256_fmsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_fnmadd_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.ps.256
return|return
name|_mm256_fnmadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_fnmadd_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmadd.pd.256
return|return
name|_mm256_fnmadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_fnmsub_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.ps.256
return|return
name|_mm256_fnmsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_fnmsub_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfnmsub.pd.256
return|return
name|_mm256_fnmsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_fmaddsub_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.ps.256
return|return
name|_mm256_fmaddsub_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_fmaddsub_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmaddsub.pd.256
return|return
name|_mm256_fmaddsub_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256
name|test_mm256_fmsubadd_ps
parameter_list|(
name|__m256
name|a
parameter_list|,
name|__m256
name|b
parameter_list|,
name|__m256
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.ps.256
return|return
name|_mm256_fmsubadd_ps
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

begin_function
name|__m256d
name|test_mm256_fmsubadd_pd
parameter_list|(
name|__m256d
name|a
parameter_list|,
name|__m256d
name|b
parameter_list|,
name|__m256d
name|c
parameter_list|)
block|{
comment|// CHECK: @llvm.x86.fma.vfmsubadd.pd.256
return|return
name|_mm256_fmsubadd_pd
argument_list|(
name|a
argument_list|,
name|b
argument_list|,
name|c
argument_list|)
return|;
block|}
end_function

end_unit

