begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|// RUN: %clang_cc1 -emit-llvm-only  -triple i386-apple-darwin9 -fdump-record-layouts %s | FileCheck %s
end_comment

begin_comment
comment|// rdar://8823265
end_comment

begin_pragma
pragma|#
directive|pragma
name|pack
name|(
name|1
name|)
end_pragma

begin_struct
struct|struct
name|_one_ms
block|{
name|short
name|m
range|:
literal|9
decl_stmt|;
comment|// size is 2
name|int
name|q
range|:
literal|27
decl_stmt|;
comment|// size is 6
name|short
name|w
range|:
literal|13
decl_stmt|;
comment|// size is 8
name|short
name|e
range|:
literal|3
decl_stmt|;
comment|// size is 8
name|char
name|r
range|:
literal|4
decl_stmt|;
comment|// size is 9
name|char
name|t
range|:
literal|7
decl_stmt|;
comment|// size is 10
name|short
name|y
range|:
literal|16
decl_stmt|;
comment|// size is 12
name|short
name|u
range|:
literal|1
decl_stmt|;
comment|// size is 14
name|char
name|i
range|:
literal|2
decl_stmt|;
comment|// size is 15
name|int
name|a
decl_stmt|;
comment|// size is 19
name|char
name|o
range|:
literal|6
decl_stmt|;
comment|// size is 20
name|char
name|s
range|:
literal|2
decl_stmt|;
comment|// size is 20
name|short
name|d
range|:
literal|10
decl_stmt|;
comment|// size is 22
name|short
name|f
range|:
literal|4
decl_stmt|;
comment|// size is 22
name|char
name|b
decl_stmt|;
comment|// size is 23
name|char
name|g
range|:
literal|1
decl_stmt|;
comment|// size is 24
name|short
name|h
range|:
literal|13
decl_stmt|;
comment|// size is 26
name|char
name|j
range|:
literal|8
decl_stmt|;
comment|// size is 27
name|char
name|k
range|:
literal|5
decl_stmt|;
comment|// size is 28
name|char
name|c
decl_stmt|;
comment|// size is 29
name|int
name|l
range|:
literal|28
decl_stmt|;
comment|// size is 33
name|char
name|z
range|:
literal|7
decl_stmt|;
comment|// size is 34
name|int
name|x
range|:
literal|20
decl_stmt|;
comment|// size is 38
block|}
name|__attribute__
argument_list|(
operator|(
name|__ms_struct__
operator|)
argument_list|)
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|_one_ms
name|one_ms
typedef|;
end_typedef

begin_decl_stmt
specifier|static
name|int
name|a1
index|[
operator|(
sizeof|sizeof
argument_list|(
name|one_ms
argument_list|)
operator|==
literal|38
operator|)
operator|-
literal|1
index|]
decl_stmt|;
end_decl_stmt

begin_pragma
pragma|#
directive|pragma
name|pack
name|(
name|2
name|)
end_pragma

begin_struct
struct|struct
name|_two_ms
block|{
name|short
name|m
range|:
literal|9
decl_stmt|;
name|int
name|q
range|:
literal|27
decl_stmt|;
name|short
name|w
range|:
literal|13
decl_stmt|;
name|short
name|e
range|:
literal|3
decl_stmt|;
name|char
name|r
range|:
literal|4
decl_stmt|;
name|char
name|t
range|:
literal|7
decl_stmt|;
name|short
name|y
range|:
literal|16
decl_stmt|;
name|short
name|u
range|:
literal|1
decl_stmt|;
name|char
name|i
range|:
literal|2
decl_stmt|;
name|int
name|a
decl_stmt|;
name|char
name|o
range|:
literal|6
decl_stmt|;
name|char
name|s
range|:
literal|2
decl_stmt|;
name|short
name|d
range|:
literal|10
decl_stmt|;
name|short
name|f
range|:
literal|4
decl_stmt|;
name|char
name|b
decl_stmt|;
name|char
name|g
range|:
literal|1
decl_stmt|;
name|short
name|h
range|:
literal|13
decl_stmt|;
name|char
name|j
range|:
literal|8
decl_stmt|;
name|char
name|k
range|:
literal|5
decl_stmt|;
name|char
name|c
decl_stmt|;
name|int
name|l
range|:
literal|28
decl_stmt|;
name|char
name|z
range|:
literal|7
decl_stmt|;
name|int
name|x
range|:
literal|20
decl_stmt|;
block|}
name|__attribute__
argument_list|(
operator|(
name|__ms_struct__
operator|)
argument_list|)
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|_two_ms
name|two_ms
typedef|;
end_typedef

begin_decl_stmt
specifier|static
name|int
name|a2
index|[
operator|(
sizeof|sizeof
argument_list|(
name|two_ms
argument_list|)
operator|==
literal|42
operator|)
operator|-
literal|1
index|]
decl_stmt|;
end_decl_stmt

begin_pragma
pragma|#
directive|pragma
name|pack
name|(
name|4
name|)
end_pragma

begin_struct
struct|struct
name|_four_ms
block|{
name|short
name|m
range|:
literal|9
decl_stmt|;
name|int
name|q
range|:
literal|27
decl_stmt|;
name|short
name|w
range|:
literal|13
decl_stmt|;
name|short
name|e
range|:
literal|3
decl_stmt|;
name|char
name|r
range|:
literal|4
decl_stmt|;
name|char
name|t
range|:
literal|7
decl_stmt|;
name|short
name|y
range|:
literal|16
decl_stmt|;
name|short
name|u
range|:
literal|1
decl_stmt|;
name|char
name|i
range|:
literal|2
decl_stmt|;
name|int
name|a
decl_stmt|;
name|char
name|o
range|:
literal|6
decl_stmt|;
name|char
name|s
range|:
literal|2
decl_stmt|;
name|short
name|d
range|:
literal|10
decl_stmt|;
name|short
name|f
range|:
literal|4
decl_stmt|;
name|char
name|b
decl_stmt|;
name|char
name|g
range|:
literal|1
decl_stmt|;
name|short
name|h
range|:
literal|13
decl_stmt|;
name|char
name|j
range|:
literal|8
decl_stmt|;
name|char
name|k
range|:
literal|5
decl_stmt|;
name|char
name|c
decl_stmt|;
name|int
name|l
range|:
literal|28
decl_stmt|;
name|char
name|z
range|:
literal|7
decl_stmt|;
name|int
name|x
range|:
literal|20
decl_stmt|;
block|}
name|__attribute__
argument_list|(
operator|(
name|__ms_struct__
operator|)
argument_list|)
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|_four_ms
name|four_ms
typedef|;
end_typedef

begin_decl_stmt
specifier|static
name|int
name|a4
index|[
operator|(
sizeof|sizeof
argument_list|(
name|four_ms
argument_list|)
operator|==
literal|48
operator|)
operator|-
literal|1
index|]
decl_stmt|;
end_decl_stmt

begin_pragma
pragma|#
directive|pragma
name|pack
name|(
name|8
name|)
end_pragma

begin_struct
struct|struct
name|_eight_ms
block|{
name|short
name|m
range|:
literal|9
decl_stmt|;
name|int
name|q
range|:
literal|27
decl_stmt|;
name|short
name|w
range|:
literal|13
decl_stmt|;
name|short
name|e
range|:
literal|3
decl_stmt|;
name|char
name|r
range|:
literal|4
decl_stmt|;
name|char
name|t
range|:
literal|7
decl_stmt|;
name|short
name|y
range|:
literal|16
decl_stmt|;
name|short
name|u
range|:
literal|1
decl_stmt|;
name|char
name|i
range|:
literal|2
decl_stmt|;
name|int
name|a
decl_stmt|;
name|char
name|o
range|:
literal|6
decl_stmt|;
name|char
name|s
range|:
literal|2
decl_stmt|;
name|short
name|d
range|:
literal|10
decl_stmt|;
name|short
name|f
range|:
literal|4
decl_stmt|;
name|char
name|b
decl_stmt|;
name|char
name|g
range|:
literal|1
decl_stmt|;
name|short
name|h
range|:
literal|13
decl_stmt|;
name|char
name|j
range|:
literal|8
decl_stmt|;
name|char
name|k
range|:
literal|5
decl_stmt|;
name|char
name|c
decl_stmt|;
name|int
name|l
range|:
literal|28
decl_stmt|;
name|char
name|z
range|:
literal|7
decl_stmt|;
name|int
name|x
range|:
literal|20
decl_stmt|;
block|}
name|__attribute__
argument_list|(
operator|(
name|__ms_struct__
operator|)
argument_list|)
struct|;
end_struct

begin_typedef
typedef|typedef
name|struct
name|_eight_ms
name|eight_ms
typedef|;
end_typedef

begin_decl_stmt
specifier|static
name|int
name|a8
index|[
operator|(
sizeof|sizeof
argument_list|(
name|eight_ms
argument_list|)
operator|==
literal|48
operator|)
operator|-
literal|1
index|]
decl_stmt|;
end_decl_stmt

begin_comment
comment|// rdar://15926990
end_comment

begin_pragma
pragma|#
directive|pragma
name|pack
name|(
name|2
name|)
end_pragma

begin_struct
struct|struct
name|test0
block|{
name|unsigned
name|long
name|a
range|:
literal|8
decl_stmt|;
name|unsigned
name|long
name|b
range|:
literal|8
decl_stmt|;
name|unsigned
name|long
name|c
range|:
literal|8
decl_stmt|;
name|unsigned
name|long
name|d
range|:
literal|10
decl_stmt|;
name|unsigned
name|long
name|e
range|:
literal|1
decl_stmt|;
block|}
name|__attribute__
argument_list|(
operator|(
name|__ms_struct__
operator|)
argument_list|)
struct|;
end_struct

begin_comment
comment|// CHECK:      Type: struct test0
end_comment

begin_comment
comment|// CHECK-NEXT: Record:
end_comment

begin_comment
comment|// CHECK-NEXT: Layout:
end_comment

begin_comment
comment|// CHECK-NEXT:   Size:64
end_comment

begin_comment
comment|// CHECK-NEXT:   DataSize:64
end_comment

begin_comment
comment|// CHECK-NEXT:   Alignment:16
end_comment

begin_comment
comment|// CHECK-NEXT:   FieldOffsets: [0, 8, 16, 32, 42]>
end_comment

begin_decl_stmt
specifier|static
name|int
name|test0
index|[
operator|(
sizeof|sizeof
argument_list|(
expr|struct
name|test0
argument_list|)
operator|==
literal|8
operator|)
condition|?
literal|1
else|:
operator|-
literal|1
index|]
decl_stmt|;
end_decl_stmt

end_unit

