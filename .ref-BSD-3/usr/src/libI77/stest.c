begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_include
include|#
directive|include
file|"fio.h"
end_include

begin_define
define|#
directive|define
name|out
parameter_list|(
name|a
parameter_list|,
name|b
parameter_list|)
value|{n=b;if(n==0) fprintf(stderr,"%s:%d\n",a,errno);else \ 		fprintf(stderr,"%s:%d %d\n",a,errno,n);}
end_define

begin_extern
extern|extern errno;
end_extern

begin_decl_stmt
name|olist
name|xopen
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|cllist
name|xclose
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|alist
name|xaux
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|cilist
name|xio
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|long
name|one
init|=
literal|1
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|xx
index|[]
init|=
literal|"1234"
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|char
name|yy
index|[]
init|=
literal|"terrible junk"
decl_stmt|;
end_decl_stmt

begin_function
name|main
parameter_list|()
block|{
name|int
name|n
decl_stmt|;
name|setolist
argument_list|(
operator|&
name|xopen
argument_list|,
literal|9
argument_list|,
literal|"junk"
argument_list|,
literal|"o"
argument_list|,
literal|"u"
argument_list|,
literal|0
argument_list|,
name|NULL
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"open"
argument_list|,
name|f_open
argument_list|(
operator|&
name|xopen
argument_list|)
argument_list|)
expr_stmt|;
name|setalist
argument_list|(
operator|&
name|xaux
argument_list|,
literal|9
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"rew"
argument_list|,
name|f_rew
argument_list|(
operator|&
name|xaux
argument_list|)
argument_list|)
expr_stmt|;
name|setcilist
argument_list|(
operator|&
name|xio
argument_list|,
literal|9
argument_list|,
name|NULL
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"start"
argument_list|,
name|s_wsue
argument_list|(
operator|&
name|xio
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"io"
argument_list|,
name|do_uio
argument_list|(
operator|&
name|one
argument_list|,
name|xx
argument_list|,
operator|(
name|long
operator|)
sizeof|sizeof
argument_list|(
name|xx
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"endw"
argument_list|,
name|e_wsue
argument_list|()
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"enf"
argument_list|,
name|f_end
argument_list|(
operator|&
name|xaux
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"bck"
argument_list|,
name|f_back
argument_list|(
operator|&
name|xaux
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"bck"
argument_list|,
name|f_back
argument_list|(
operator|&
name|xaux
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"startr"
argument_list|,
name|s_rsue
argument_list|(
operator|&
name|xio
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"rio"
argument_list|,
name|do_uio
argument_list|(
operator|&
name|one
argument_list|,
name|yy
argument_list|,
operator|(
name|long
operator|)
sizeof|sizeof
argument_list|(
name|xx
argument_list|)
operator|-
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|out
argument_list|(
literal|"endr"
argument_list|,
name|e_rsue
argument_list|()
argument_list|)
expr_stmt|;
name|fprintf
argument_list|(
name|stdout
argument_list|,
literal|"yy: %s\n"
argument_list|,
name|yy
argument_list|)
expr_stmt|;
block|}
end_function

end_unit

