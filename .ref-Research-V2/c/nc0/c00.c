begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/* C compiler  Copyright 1972 Bell Telephone Laboratories, Inc.   */
end_comment

begin_expr_stmt
name|ossiz
literal|250
expr_stmt|;
end_expr_stmt

begin_macro
name|ospace
argument_list|()
end_macro

begin_block
block|{}
end_block

begin_comment
comment|/* fake */
end_comment

begin_macro
name|init
argument_list|(
argument|s
argument_list|,
argument|t
argument_list|)
end_macro

begin_decl_stmt
name|char
name|s
index|[]
decl_stmt|;
end_decl_stmt

begin_block
block|{
extern|extern lookup
operator|,
extern|symbuf
operator|,
extern|namsiz;
name|char
name|symbuf
index|[]
decl_stmt|,
name|sp
index|[]
decl_stmt|;
name|int
name|np
index|[]
decl_stmt|,
name|i
decl_stmt|;
name|i
operator|=
name|namsiz
expr_stmt|;
name|sp
operator|=
name|symbuf
expr_stmt|;
while|while
condition|(
name|i
operator|--
condition|)
if|if
condition|(
operator|(
operator|*
name|sp
operator|++
operator|=
operator|*
name|s
operator|++
operator|)
operator|==
literal|'\0'
condition|)
operator|--
name|s
expr_stmt|;
name|np
operator|=
name|lookup
argument_list|()
expr_stmt|;
operator|*
name|np
operator|++
operator|=
literal|1
expr_stmt|;
operator|*
name|np
operator|=
name|t
expr_stmt|;
block|}
end_block

begin_function
name|main
parameter_list|(
name|argc
parameter_list|,
name|argv
parameter_list|)
name|int
name|argv
index|[]
decl_stmt|;
block|{
extern|extern init
operator|,
extern|flush;
extern|extern extdef
operator|,
extern|eof
operator|,
extern|open
operator|,
extern|creat;
extern|extern fout
operator|,
extern|fin
operator|,
extern|error
operator|,
extern|exit
operator|,
extern|nerror
operator|,
extern|tmpfil;
if|if
condition|(
name|argc
operator|<
literal|4
condition|)
block|{
name|error
argument_list|(
literal|"Arg count"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|fin
operator|=
name|open
argument_list|(
name|argv
index|[
literal|1
index|]
argument_list|,
literal|0
argument_list|)
operator|)
operator|<
literal|0
condition|)
block|{
name|error
argument_list|(
literal|"Can't find %s"
argument_list|,
name|argv
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
operator|(
name|fout
operator|=
name|creat
argument_list|(
name|argv
index|[
literal|2
index|]
argument_list|,
literal|017
argument_list|)
operator|)
operator|<
literal|0
condition|)
block|{
name|error
argument_list|(
literal|"Can't create %s"
argument_list|,
name|argv
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|tmpfil
operator|=
name|argv
index|[
literal|3
index|]
expr_stmt|;
name|init
argument_list|(
literal|"int"
argument_list|,
literal|0
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"char"
argument_list|,
literal|1
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"float"
argument_list|,
literal|2
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"double"
argument_list|,
literal|3
argument_list|)
expr_stmt|;
comment|/*	init("long", 4);  */
name|init
argument_list|(
literal|"auto"
argument_list|,
literal|5
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"extern"
argument_list|,
literal|6
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"static"
argument_list|,
literal|7
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"goto"
argument_list|,
literal|10
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"return"
argument_list|,
literal|11
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"if"
argument_list|,
literal|12
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"while"
argument_list|,
literal|13
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"else"
argument_list|,
literal|14
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"switch"
argument_list|,
literal|15
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"case"
argument_list|,
literal|16
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"break"
argument_list|,
literal|17
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"continue"
argument_list|,
literal|18
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"do"
argument_list|,
literal|19
argument_list|)
expr_stmt|;
name|init
argument_list|(
literal|"default"
argument_list|,
literal|20
argument_list|)
expr_stmt|;
while|while
condition|(
operator|!
name|eof
condition|)
block|{
name|extdef
argument_list|()
expr_stmt|;
name|blkend
argument_list|()
expr_stmt|;
block|}
name|flush
argument_list|()
expr_stmt|;
name|flshw
argument_list|()
expr_stmt|;
name|exit
argument_list|(
name|nerror
operator|!=
literal|0
argument_list|)
expr_stmt|;
block|}
end_function

begin_macro
name|lookup
argument_list|()
end_macro

begin_block
block|{
extern|extern hshtab[]
operator|,
extern|hshsiz
operator|,
extern|pssiz
operator|,
extern|symbuf[];
extern|extern hshlen
operator|,
extern|hshused
operator|,
extern|exit
operator|,
extern|error
operator|,
extern|nwps;
name|auto
name|i
decl_stmt|,
name|j
decl_stmt|,
name|np
index|[]
decl_stmt|,
name|sp
index|[]
decl_stmt|,
name|rp
index|[]
decl_stmt|;
name|i
operator|=
literal|0
expr_stmt|;
name|sp
operator|=
name|symbuf
expr_stmt|;
name|j
operator|=
name|nwps
expr_stmt|;
while|while
condition|(
name|j
operator|--
condition|)
name|i
operator|=
operator|+
operator|*
name|sp
operator|++
expr_stmt|;
if|if
condition|(
name|i
operator|<
literal|0
condition|)
name|i
operator|=
operator|-
name|i
expr_stmt|;
name|i
operator|=
operator|%
name|hshsiz
expr_stmt|;
name|i
operator|=
operator|*
name|pssiz
expr_stmt|;
while|while
condition|(
operator|*
operator|(
name|np
operator|=
operator|&
name|hshtab
index|[
name|i
operator|+
literal|4
index|]
operator|)
condition|)
block|{
name|sp
operator|=
name|symbuf
expr_stmt|;
name|j
operator|=
name|nwps
expr_stmt|;
while|while
condition|(
name|j
operator|--
condition|)
if|if
condition|(
operator|*
name|np
operator|++
operator|!=
operator|*
name|sp
operator|++
condition|)
goto|goto
name|no
goto|;
return|return
operator|(
operator|&
name|hshtab
index|[
name|i
index|]
operator|)
return|;
name|no
label|:
if|if
condition|(
operator|(
name|i
operator|=
operator|+
name|pssiz
operator|)
operator|>=
name|hshlen
condition|)
name|i
operator|=
literal|0
expr_stmt|;
block|}
if|if
condition|(
name|hshused
operator|++
operator|>
name|hshsiz
condition|)
block|{
name|error
argument_list|(
literal|"Symbol table overflow"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
name|rp
operator|=
name|np
operator|=
operator|&
name|hshtab
index|[
name|i
index|]
expr_stmt|;
name|sp
operator|=
name|symbuf
expr_stmt|;
name|j
operator|=
literal|4
expr_stmt|;
while|while
condition|(
name|j
operator|--
condition|)
operator|*
name|np
operator|++
operator|=
literal|0
expr_stmt|;
name|j
operator|=
name|nwps
expr_stmt|;
while|while
condition|(
name|j
operator|--
condition|)
operator|*
name|np
operator|++
operator|=
operator|*
name|sp
operator|++
expr_stmt|;
return|return
operator|(
name|rp
operator|)
return|;
block|}
end_block

begin_macro
name|symbol
argument_list|()
end_macro

begin_block
block|{
extern|extern peeksym
operator|,
extern|peekc
operator|,
extern|eof
operator|,
extern|getchar
operator|,
extern|subseq
operator|,
extern|error
operator|,
extern|line;
extern|extern csym[]
operator|,
extern|getstr
operator|,
extern|symbuf
operator|,
extern|namsiz
operator|,
extern|lookup[]
operator|,
extern|ctab
operator|,
extern|cval;
name|auto
name|b
decl_stmt|,
name|c
decl_stmt|;
name|char
name|symbuf
index|[]
decl_stmt|,
name|sp
index|[]
decl_stmt|,
name|ctab
index|[]
decl_stmt|;
if|if
condition|(
name|peeksym
operator|>=
literal|0
condition|)
block|{
name|c
operator|=
name|peeksym
expr_stmt|;
name|peeksym
operator|=
operator|-
literal|1
expr_stmt|;
return|return
operator|(
name|c
operator|)
return|;
block|}
if|if
condition|(
name|peekc
condition|)
block|{
name|c
operator|=
name|peekc
expr_stmt|;
name|peekc
operator|=
literal|0
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|eof
condition|)
return|return
operator|(
literal|0
operator|)
return|;
else|else
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
name|loop
label|:
switch|switch
condition|(
name|ctab
index|[
name|c
index|]
condition|)
block|{
case|case
literal|125
case|:
comment|/* newline */
name|line
operator|++
expr_stmt|;
case|case
literal|126
case|:
comment|/* white space */
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
goto|goto
name|loop
goto|;
case|case
literal|0
case|:
comment|/* EOF */
name|eof
operator|++
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
case|case
literal|40
case|:
comment|/* + */
return|return
operator|(
name|subseq
argument_list|(
name|c
argument_list|,
literal|40
argument_list|,
literal|30
argument_list|)
operator|)
return|;
case|case
literal|41
case|:
comment|/* - */
return|return
operator|(
name|subseq
argument_list|(
name|c
argument_list|,
literal|41
argument_list|,
literal|31
argument_list|)
operator|)
return|;
case|case
literal|80
case|:
comment|/* = */
if|if
condition|(
name|subseq
argument_list|(
literal|' '
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
condition|)
return|return
operator|(
literal|80
operator|)
return|;
name|c
operator|=
name|symbol
argument_list|()
expr_stmt|;
if|if
condition|(
name|c
operator|>=
literal|40
operator|&
name|c
operator|<=
literal|49
condition|)
return|return
operator|(
name|c
operator|+
literal|30
operator|)
return|;
if|if
condition|(
name|c
operator|==
literal|80
condition|)
return|return
operator|(
literal|60
operator|)
return|;
name|peeksym
operator|=
name|c
expr_stmt|;
return|return
operator|(
literal|80
operator|)
return|;
case|case
literal|63
case|:
comment|/*< */
if|if
condition|(
name|subseq
argument_list|(
name|c
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
condition|)
return|return
operator|(
literal|46
operator|)
return|;
return|return
operator|(
name|subseq
argument_list|(
literal|'='
argument_list|,
literal|63
argument_list|,
literal|62
argument_list|)
operator|)
return|;
case|case
literal|65
case|:
comment|/*> */
if|if
condition|(
name|subseq
argument_list|(
name|c
argument_list|,
literal|0
argument_list|,
literal|1
argument_list|)
condition|)
return|return
operator|(
literal|45
operator|)
return|;
return|return
operator|(
name|subseq
argument_list|(
literal|'='
argument_list|,
literal|65
argument_list|,
literal|64
argument_list|)
operator|)
return|;
case|case
literal|34
case|:
comment|/* ! */
return|return
operator|(
name|subseq
argument_list|(
literal|'='
argument_list|,
literal|34
argument_list|,
literal|61
argument_list|)
operator|)
return|;
case|case
literal|43
case|:
comment|/* / */
if|if
condition|(
name|subseq
argument_list|(
literal|'*'
argument_list|,
literal|1
argument_list|,
literal|0
argument_list|)
condition|)
return|return
operator|(
literal|43
operator|)
return|;
name|com
label|:
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
name|com1
label|:
if|if
condition|(
name|c
operator|==
literal|'\0'
condition|)
block|{
name|eof
operator|++
expr_stmt|;
name|error
argument_list|(
literal|"Nonterminated comment"
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
if|if
condition|(
name|c
operator|==
literal|'\n'
condition|)
name|line
operator|++
expr_stmt|;
if|if
condition|(
name|c
operator|!=
literal|'*'
condition|)
goto|goto
name|com
goto|;
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|c
operator|!=
literal|'/'
condition|)
goto|goto
name|com1
goto|;
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
goto|goto
name|loop
goto|;
case|case
literal|124
case|:
comment|/* number */
name|cval
operator|=
literal|0
expr_stmt|;
if|if
condition|(
name|c
operator|==
literal|'0'
condition|)
name|b
operator|=
literal|8
expr_stmt|;
else|else
name|b
operator|=
literal|10
expr_stmt|;
while|while
condition|(
name|ctab
index|[
name|c
index|]
operator|==
literal|124
condition|)
block|{
name|cval
operator|=
name|cval
operator|*
name|b
operator|+
name|c
operator|-
literal|'0'
expr_stmt|;
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
block|}
name|peekc
operator|=
name|c
expr_stmt|;
return|return
operator|(
literal|21
operator|)
return|;
case|case
literal|122
case|:
comment|/* " */
return|return
operator|(
name|getstr
argument_list|()
operator|)
return|;
case|case
literal|121
case|:
comment|/* ' */
return|return
operator|(
name|getcc
argument_list|()
operator|)
return|;
case|case
literal|123
case|:
comment|/* letter */
name|sp
operator|=
name|symbuf
expr_stmt|;
while|while
condition|(
name|ctab
index|[
name|c
index|]
operator|==
literal|123
operator||
name|ctab
index|[
name|c
index|]
operator|==
literal|124
condition|)
block|{
if|if
condition|(
name|sp
operator|<
name|symbuf
operator|+
name|namsiz
condition|)
operator|*
name|sp
operator|++
operator|=
name|c
expr_stmt|;
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
block|}
while|while
condition|(
name|sp
operator|<
name|symbuf
operator|+
name|namsiz
condition|)
operator|*
name|sp
operator|++
operator|=
literal|'\0'
expr_stmt|;
name|peekc
operator|=
name|c
expr_stmt|;
name|csym
operator|=
name|lookup
argument_list|()
expr_stmt|;
if|if
condition|(
name|csym
index|[
literal|0
index|]
operator|==
literal|1
condition|)
block|{
comment|/* keyword */
name|cval
operator|=
name|csym
index|[
literal|1
index|]
expr_stmt|;
return|return
operator|(
literal|19
operator|)
return|;
block|}
return|return
operator|(
literal|20
operator|)
return|;
case|case
literal|127
case|:
comment|/* unknown */
name|error
argument_list|(
literal|"Unknown character"
argument_list|)
expr_stmt|;
name|c
operator|=
name|getchar
argument_list|()
expr_stmt|;
goto|goto
name|loop
goto|;
block|}
return|return
operator|(
name|ctab
index|[
name|c
index|]
operator|)
return|;
block|}
end_block

begin_macro
name|subseq
argument_list|(
argument|c
argument_list|,
argument|a
argument_list|,
argument|b
argument_list|)
end_macro

begin_block
block|{
extern|extern getchar
operator|,
extern|peekc;
if|if
condition|(
operator|!
name|peekc
condition|)
name|peekc
operator|=
name|getchar
argument_list|()
expr_stmt|;
if|if
condition|(
name|peekc
operator|!=
name|c
condition|)
return|return
operator|(
name|a
operator|)
return|;
name|peekc
operator|=
literal|0
expr_stmt|;
return|return
operator|(
name|b
operator|)
return|;
block|}
end_block

begin_macro
name|getstr
argument_list|()
end_macro

begin_block
block|{
extern|extern isn
operator|,
extern|cval;
name|auto
name|c
decl_stmt|;
name|printf
argument_list|(
literal|".data;L%d:.byte "
argument_list|,
name|cval
operator|=
name|isn
operator|++
argument_list|)
expr_stmt|;
while|while
condition|(
operator|(
name|c
operator|=
name|mapch
argument_list|(
literal|'"'
argument_list|)
operator|)
operator|>=
literal|0
condition|)
name|printf
argument_list|(
literal|"%o,"
argument_list|,
name|c
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"0;.even;.text\n"
argument_list|)
expr_stmt|;
return|return
operator|(
literal|22
operator|)
return|;
block|}
end_block

begin_macro
name|getcc
argument_list|()
end_macro

begin_block
block|{
extern|extern cval
operator|,
extern|ncpw;
name|auto
name|c
decl_stmt|,
name|cc
decl_stmt|;
name|char
name|cp
index|[]
decl_stmt|;
name|cval
operator|=
literal|0
expr_stmt|;
name|cp
operator|=
operator|&
name|cval
expr_stmt|;
name|cc
operator|=
literal|0
expr_stmt|;
while|while
condition|(
operator|(
name|c
operator|=
name|mapch
argument_list|(
literal|'\''
argument_list|)
operator|)
operator|>=
literal|0
condition|)
if|if
condition|(
name|cc
operator|++
operator|<
name|ncpw
condition|)
operator|*
name|cp
operator|++
operator|=
name|c
expr_stmt|;
if|if
condition|(
name|cc
operator|>
name|ncpw
condition|)
name|error
argument_list|(
literal|"Long character constant"
argument_list|)
expr_stmt|;
return|return
operator|(
literal|21
operator|)
return|;
block|}
end_block

begin_macro
name|mapch
argument_list|(
argument|c
argument_list|)
end_macro

begin_block
block|{
extern|extern peekc
operator|,
extern|line;
name|auto
name|a
decl_stmt|;
if|if
condition|(
operator|(
name|a
operator|=
name|getchar
argument_list|()
operator|)
operator|==
name|c
condition|)
return|return
operator|(
operator|-
literal|1
operator|)
return|;
switch|switch
condition|(
name|a
condition|)
block|{
case|case
literal|'\n'
case|:
case|case
literal|0
case|:
name|error
argument_list|(
literal|"Nonterminated string"
argument_list|)
expr_stmt|;
name|peekc
operator|=
name|a
expr_stmt|;
return|return
operator|(
operator|-
literal|1
operator|)
return|;
case|case
literal|'\\'
case|:
switch|switch
condition|(
name|a
operator|=
name|getchar
argument_list|()
condition|)
block|{
case|case
literal|'t'
case|:
return|return
operator|(
literal|'\t'
operator|)
return|;
case|case
literal|'n'
case|:
return|return
operator|(
literal|'\n'
operator|)
return|;
case|case
literal|'0'
case|:
return|return
operator|(
literal|'\0'
operator|)
return|;
case|case
literal|'r'
case|:
return|return
operator|(
literal|'\r'
operator|)
return|;
case|case
literal|'\n'
case|:
name|line
operator|++
expr_stmt|;
return|return
operator|(
literal|'\n'
operator|)
return|;
block|}
block|}
return|return
operator|(
name|a
operator|)
return|;
block|}
end_block

begin_macro
name|tree
argument_list|()
end_macro

begin_block
block|{
extern|extern symbol
operator|,
extern|block
operator|,
extern|csym[]
operator|,
extern|ctyp
operator|,
extern|isn
operator|,
extern|peeksym
operator|,
extern|opdope[]
operator|,
extern|build
operator|,
extern|error
operator|,
extern|cp[]
operator|,
extern|cmst[]
operator|,
extern|space
operator|,
extern|ospace
operator|,
extern|cval
operator|,
extern|ossiz
operator|,
extern|exit
operator|,
extern|errflush
operator|,
extern|cmsiz;
name|auto
name|op
index|[]
decl_stmt|,
name|opst
index|[
literal|20
index|]
decl_stmt|,
name|pp
index|[]
decl_stmt|,
name|prst
index|[
literal|20
index|]
decl_stmt|,
name|andflg
decl_stmt|,
name|o
decl_stmt|,
name|p
decl_stmt|,
name|ps
decl_stmt|,
name|os
decl_stmt|;
name|space
operator|=
name|ospace
expr_stmt|;
name|op
operator|=
name|opst
expr_stmt|;
name|pp
operator|=
name|prst
expr_stmt|;
name|cp
operator|=
name|cmst
expr_stmt|;
operator|*
name|op
operator|=
literal|200
expr_stmt|;
comment|/* stack EOF */
operator|*
name|pp
operator|=
literal|06
expr_stmt|;
name|andflg
operator|=
literal|0
expr_stmt|;
name|advanc
label|:
switch|switch
condition|(
name|o
operator|=
name|symbol
argument_list|()
condition|)
block|{
comment|/* name */
case|case
literal|20
case|:
if|if
condition|(
operator|*
name|csym
operator|==
literal|0
condition|)
if|if
condition|(
operator|(
name|peeksym
operator|=
name|symbol
argument_list|()
operator|)
operator|==
literal|6
condition|)
operator|*
name|csym
operator|=
literal|6
expr_stmt|;
comment|/* extern */
else|else
block|{
if|if
condition|(
name|csym
index|[
literal|2
index|]
operator|==
literal|0
condition|)
comment|/* unseen so far */
name|csym
index|[
literal|2
index|]
operator|=
name|isn
operator|++
expr_stmt|;
block|}
if|if
condition|(
operator|*
name|csym
operator|==
literal|6
condition|)
comment|/* extern */
operator|*
name|cp
operator|++
operator|=
name|block
argument_list|(
literal|5
argument_list|,
literal|20
argument_list|,
name|csym
index|[
literal|1
index|]
argument_list|,
literal|0
argument_list|,
operator|*
name|csym
argument_list|,
name|csym
index|[
literal|4
index|]
argument_list|,
name|csym
index|[
literal|5
index|]
argument_list|,
name|csym
index|[
literal|6
index|]
argument_list|,
name|csym
index|[
literal|7
index|]
argument_list|)
expr_stmt|;
else|else
operator|*
name|cp
operator|++
operator|=
name|block
argument_list|(
literal|2
argument_list|,
literal|20
argument_list|,
name|csym
index|[
literal|1
index|]
argument_list|,
literal|0
argument_list|,
operator|*
name|csym
argument_list|,
name|csym
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
goto|goto
name|tand
goto|;
comment|/* short constant */
case|case
literal|21
case|:
name|case21
label|:
operator|*
name|cp
operator|++
operator|=
name|block
argument_list|(
literal|1
argument_list|,
literal|21
argument_list|,
name|ctyp
argument_list|,
literal|0
argument_list|,
name|cval
argument_list|)
expr_stmt|;
goto|goto
name|tand
goto|;
comment|/* string constant */
case|case
literal|22
case|:
operator|*
name|cp
operator|++
operator|=
name|block
argument_list|(
literal|1
argument_list|,
literal|22
argument_list|,
literal|17
argument_list|,
literal|0
argument_list|,
name|cval
argument_list|)
expr_stmt|;
name|tand
label|:
if|if
condition|(
name|cp
operator|>=
name|cmst
operator|+
name|cmsiz
condition|)
block|{
name|error
argument_list|(
literal|"Expression overflow"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|andflg
condition|)
goto|goto
name|syntax
goto|;
name|andflg
operator|=
literal|1
expr_stmt|;
goto|goto
name|advanc
goto|;
comment|/* ++, -- */
case|case
literal|30
case|:
case|case
literal|31
case|:
if|if
condition|(
name|andflg
condition|)
name|o
operator|=
operator|+
literal|2
expr_stmt|;
goto|goto
name|oponst
goto|;
comment|/* ! */
case|case
literal|34
case|:
if|if
condition|(
name|andflg
condition|)
goto|goto
name|syntax
goto|;
goto|goto
name|oponst
goto|;
comment|/* - */
case|case
literal|41
case|:
if|if
condition|(
operator|!
name|andflg
condition|)
block|{
name|peeksym
operator|=
name|symbol
argument_list|()
expr_stmt|;
if|if
condition|(
name|peeksym
operator|==
literal|21
condition|)
block|{
name|peeksym
operator|=
operator|-
literal|1
expr_stmt|;
name|cval
operator|=
operator|-
name|cval
expr_stmt|;
goto|goto
name|case21
goto|;
block|}
name|o
operator|=
literal|37
expr_stmt|;
block|}
name|andflg
operator|=
literal|0
expr_stmt|;
goto|goto
name|oponst
goto|;
comment|/*& */
comment|/* * */
case|case
literal|47
case|:
case|case
literal|42
case|:
if|if
condition|(
name|andflg
condition|)
name|andflg
operator|=
literal|0
expr_stmt|;
elseif|else
if|if
condition|(
name|o
operator|==
literal|47
condition|)
name|o
operator|=
literal|35
expr_stmt|;
else|else
name|o
operator|=
literal|36
expr_stmt|;
goto|goto
name|oponst
goto|;
comment|/* ( */
case|case
literal|6
case|:
if|if
condition|(
name|andflg
condition|)
block|{
name|o
operator|=
name|symbol
argument_list|()
expr_stmt|;
if|if
condition|(
name|o
operator|==
literal|7
condition|)
name|o
operator|=
literal|101
expr_stmt|;
else|else
block|{
name|peeksym
operator|=
name|o
expr_stmt|;
name|o
operator|=
literal|100
expr_stmt|;
name|andflg
operator|=
literal|0
expr_stmt|;
block|}
block|}
goto|goto
name|oponst
goto|;
comment|/* ) */
comment|/* ] */
case|case
literal|5
case|:
case|case
literal|7
case|:
if|if
condition|(
operator|!
name|andflg
condition|)
goto|goto
name|syntax
goto|;
goto|goto
name|oponst
goto|;
block|}
comment|/* binaries */
if|if
condition|(
operator|!
name|andflg
condition|)
goto|goto
name|syntax
goto|;
name|andflg
operator|=
literal|0
expr_stmt|;
name|oponst
label|:
name|p
operator|=
operator|(
name|opdope
index|[
name|o
index|]
operator|>>
literal|9
operator|)
operator|&
literal|077
expr_stmt|;
name|opon1
label|:
name|ps
operator|=
operator|*
name|pp
expr_stmt|;
if|if
condition|(
name|p
operator|>
name|ps
operator||
name|p
operator|==
name|ps
operator|&
operator|(
name|opdope
index|[
name|o
index|]
operator|&
literal|0200
operator|)
operator|!=
literal|0
condition|)
block|{
comment|/* right-assoc */
name|putin
label|:
switch|switch
condition|(
name|o
condition|)
block|{
case|case
literal|6
case|:
comment|/* ( */
case|case
literal|4
case|:
comment|/* [ */
case|case
literal|100
case|:
comment|/* call */
name|p
operator|=
literal|04
expr_stmt|;
block|}
if|if
condition|(
name|op
operator|>=
name|opst
operator|+
literal|20
condition|)
block|{
comment|/* opstack size */
name|error
argument_list|(
literal|"expression overflow"
argument_list|)
expr_stmt|;
name|exit
argument_list|(
literal|1
argument_list|)
expr_stmt|;
block|}
operator|*
operator|++
name|op
operator|=
name|o
expr_stmt|;
operator|*
operator|++
name|pp
operator|=
name|p
expr_stmt|;
goto|goto
name|advanc
goto|;
block|}
operator|--
name|pp
expr_stmt|;
switch|switch
condition|(
name|os
operator|=
operator|*
name|op
operator|--
condition|)
block|{
comment|/* EOF */
case|case
literal|200
case|:
name|peeksym
operator|=
name|o
expr_stmt|;
return|return
operator|(
operator|*
operator|--
name|cp
operator|)
return|;
comment|/* call */
case|case
literal|100
case|:
if|if
condition|(
name|o
operator|!=
literal|7
condition|)
goto|goto
name|syntax
goto|;
name|build
argument_list|(
name|os
argument_list|)
expr_stmt|;
goto|goto
name|advanc
goto|;
comment|/* mcall */
case|case
literal|101
case|:
operator|*
name|cp
operator|++
operator|=
literal|0
expr_stmt|;
comment|/* 0 arg call */
name|os
operator|=
literal|100
expr_stmt|;
goto|goto
name|fbuild
goto|;
comment|/* ( */
case|case
literal|6
case|:
if|if
condition|(
name|o
operator|!=
literal|7
condition|)
goto|goto
name|syntax
goto|;
goto|goto
name|advanc
goto|;
comment|/* [ */
case|case
literal|4
case|:
if|if
condition|(
name|o
operator|!=
literal|5
condition|)
goto|goto
name|syntax
goto|;
name|build
argument_list|(
literal|4
argument_list|)
expr_stmt|;
goto|goto
name|advanc
goto|;
block|}
name|fbuild
label|:
name|build
argument_list|(
name|os
argument_list|)
expr_stmt|;
goto|goto
name|opon1
goto|;
name|syntax
label|:
name|error
argument_list|(
literal|"Expression syntax"
argument_list|)
expr_stmt|;
name|errflush
argument_list|(
name|o
argument_list|)
expr_stmt|;
return|return
operator|(
literal|0
operator|)
return|;
block|}
end_block

begin_macro
name|declare
argument_list|(
argument|kw
argument_list|)
end_macro

begin_block
block|{
extern|extern csym[]
operator|,
extern|symbol
operator|,
extern|paraml[]
operator|,
extern|parame[];
extern|extern error
operator|,
extern|cval
operator|,
extern|errflush
operator|,
extern|peeksym
operator|,
extern|exit;
name|int
name|t
index|[]
decl_stmt|,
name|n
decl_stmt|,
name|o
decl_stmt|;
while|while
condition|(
operator|(
name|o
operator|=
name|symbol
argument_list|()
operator|)
operator|==
literal|20
condition|)
block|{
comment|/* name */
if|if
condition|(
name|kw
operator|>=
literal|5
condition|)
block|{
comment|/* type or sort? */
if|if
condition|(
operator|*
name|csym
operator|>
literal|0
condition|)
name|error
argument_list|(
literal|"%p redeclared"
argument_list|,
name|csym
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
operator|*
name|csym
operator|=
name|kw
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
operator|(
name|csym
index|[
literal|1
index|]
operator|&
literal|017
operator|)
operator|!=
literal|0
condition|)
name|error
argument_list|(
literal|"%p redeclared"
argument_list|,
operator|&
name|csym
index|[
literal|4
index|]
argument_list|)
expr_stmt|;
name|csym
index|[
literal|1
index|]
operator|=
operator||
name|csym
index|[
literal|1
index|]
operator|&
literal|0760
operator||
name|kw
expr_stmt|;
if|if
condition|(
operator|*
name|csym
operator|==
literal|0
condition|)
operator|*
name|csym
operator|=
operator|-
literal|2
expr_stmt|;
block|}
while|while
condition|(
operator|(
name|o
operator|=
name|symbol
argument_list|()
operator|)
operator|==
literal|4
condition|)
block|{
comment|/* [ */
if|if
condition|(
operator|(
name|o
operator|=
name|symbol
argument_list|()
operator|)
operator|==
literal|21
condition|)
block|{
comment|/* const */
if|if
condition|(
name|csym
index|[
literal|1
index|]
operator|>=
literal|020
condition|)
name|error
argument_list|(
literal|"Bad vector"
argument_list|)
expr_stmt|;
name|csym
index|[
literal|3
index|]
operator|=
name|cval
expr_stmt|;
name|o
operator|=
name|symbol
argument_list|()
expr_stmt|;
block|}
if|if
condition|(
name|o
operator|!=
literal|5
condition|)
comment|/* ] */
goto|goto
name|syntax
goto|;
name|csym
index|[
literal|1
index|]
operator|=
operator|+
literal|020
expr_stmt|;
block|}
if|if
condition|(
name|kw
operator|==
literal|8
condition|)
block|{
comment|/* parameter */
operator|*
name|csym
operator|=
operator|-
literal|1
expr_stmt|;
if|if
condition|(
name|paraml
operator|==
literal|0
condition|)
name|paraml
operator|=
name|csym
expr_stmt|;
else|else
operator|*
name|parame
operator|=
name|csym
expr_stmt|;
name|parame
operator|=
name|csym
expr_stmt|;
block|}
if|if
condition|(
name|o
operator|!=
literal|9
condition|)
comment|/* , */
break|break;
block|}
if|if
condition|(
name|o
operator|==
literal|1
operator|&
name|kw
operator|!=
literal|8
operator||
name|o
operator|==
literal|7
operator|&
name|kw
operator|==
literal|8
condition|)
return|return;
name|syntax
label|:
name|error
argument_list|(
literal|"Declaration syntax"
argument_list|)
expr_stmt|;
name|errflush
argument_list|(
name|o
argument_list|)
expr_stmt|;
block|}
end_block

begin_comment
comment|/* storage */
end_comment

begin_expr_stmt
name|regtab
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|efftab
literal|1
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|cctab
literal|2
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|sptab
literal|3
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|symbuf
index|[
literal|4
index|]
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|pssiz
literal|8
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|namsiz
literal|8
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|nwps
literal|4
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|hshused
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|hshsiz
literal|100
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|hshlen
literal|800
expr_stmt|;
end_expr_stmt

begin_comment
comment|/* 8*hshsiz */
end_comment

begin_expr_stmt
name|hshtab
index|[
literal|800
index|]
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|space
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|cp
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|cmsiz
literal|40
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|cmst
index|[
literal|40
index|]
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|ctyp
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|isn
literal|1
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|swsiz
literal|120
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|swtab
index|[
literal|120
index|]
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|swp
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|contlab
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|brklab
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|deflab
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|nreg
literal|4
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|maprel
index|[]
literal|60
operator|,
literal|61
operator|,
literal|64
operator|,
literal|65
operator|,
literal|62
operator|,
literal|63
operator|,
literal|68
operator|,
literal|69
operator|,
literal|66
operator|,
literal|67
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|nauto
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|stack
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|peeksym
literal|0177777
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|peekc
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|eof
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|line
literal|1
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|csym
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|cval
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|ncpw
literal|2
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|nerror
literal|0
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|paraml
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|parame
expr_stmt|;
end_expr_stmt

begin_expr_stmt
name|tmpfil
expr_stmt|;
end_expr_stmt

end_unit

