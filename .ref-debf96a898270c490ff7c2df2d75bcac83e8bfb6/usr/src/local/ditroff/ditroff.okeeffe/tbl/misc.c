begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_ifndef
ifndef|#
directive|ifndef
name|lint
end_ifndef

begin_decl_stmt
specifier|static
name|char
name|sccsid
index|[]
init|=
literal|"@(#)misc.c	1.2 (CWI) 85/10/02"
decl_stmt|;
end_decl_stmt

begin_endif
endif|#
directive|endif
endif|lint
end_endif

begin_include
include|#
directive|include
file|"defs.h"
end_include

begin_include
include|#
directive|include
file|"ext.h"
end_include

begin_comment
comment|/*  * Number register alocation  *  * This array must have at least 3*qcol entries or  * illegal register names will result. (bwk)  */
end_comment

begin_comment
comment|/*   * This will counts for the restriction on MAXCOL   */
end_comment

begin_decl_stmt
name|char
modifier|*
name|nregs
index|[]
init|=
block|{
literal|"40"
block|,
literal|"41"
block|,
literal|"42"
block|,
literal|"43"
block|,
literal|"44"
block|,
literal|"45"
block|,
literal|"46"
block|,
literal|"47"
block|,
literal|"48"
block|,
literal|"49"
block|,
literal|"50"
block|,
literal|"51"
block|,
literal|"52"
block|,
literal|"53"
block|,
literal|"54"
block|,
literal|"55"
block|,
literal|"56"
block|,
literal|"57"
block|,
literal|"58"
block|,
literal|"59"
block|,
literal|"60"
block|,
literal|"61"
block|,
literal|"62"
block|,
literal|"63"
block|,
literal|"64"
block|,
literal|"65"
block|,
literal|"66"
block|,
literal|"67"
block|,
literal|"68"
block|,
literal|"69"
block|,
literal|"70"
block|,
literal|"71"
block|,
literal|"72"
block|,
literal|"73"
block|,
literal|"74"
block|,
literal|"75"
block|,
literal|"76"
block|,
literal|"77"
block|,
literal|"78"
block|,
literal|"79"
block|,
literal|"80"
block|,
literal|"81"
block|,
literal|"82"
block|,
literal|"83"
block|,
literal|"84"
block|,
literal|"85"
block|,
literal|"86"
block|,
literal|"87"
block|,
literal|"88"
block|,
literal|"89"
block|,
literal|"90"
block|,
literal|"91"
block|,
literal|"92"
block|,
literal|"93"
block|,
literal|"94"
block|,
literal|"95"
block|,
literal|"96"
block|,
literal|"97"
block|,
literal|"4q"
block|,
literal|"4r"
block|,
literal|"4s"
block|,
literal|"4t"
block|,
literal|"4u"
block|,
literal|"4v"
block|,
literal|"4w"
block|,
literal|"4x"
block|,
literal|"4y"
block|,
literal|"4z"
block|,
literal|"4;"
block|,
literal|"4."
block|,
literal|"4a"
block|,
literal|"4b"
block|,
literal|"4c"
block|,
literal|"4d"
block|,
literal|"4e"
block|,
literal|"4f"
block|,
literal|"4g"
block|,
literal|"4h"
block|,
literal|"4i"
block|,
literal|"4j"
block|,
literal|"4k"
block|,
literal|"4l"
block|,
literal|"4m"
block|,
literal|"4n"
block|,
literal|"4o"
block|,
literal|"4p"
block|,
literal|"5a"
block|,
literal|"5b"
block|,
literal|"5c"
block|,
literal|"5d"
block|,
literal|"5e"
block|,
literal|"5f"
block|,
literal|"5g"
block|,
literal|"5h"
block|,
literal|"5i"
block|,
literal|"5j"
block|,
literal|"5k"
block|,
literal|"5l"
block|,
literal|"5m"
block|,
literal|"5n"
block|,
literal|"5o"
block|,
literal|"5p"
block|,
literal|"5q"
block|,
literal|"5r"
block|,
literal|"5s"
block|,
literal|"5t"
block|,
literal|"5u"
block|,
literal|"5v"
block|,
literal|"5w"
block|,
literal|"5x"
block|,
literal|0
block|}
decl_stmt|;
end_decl_stmt

begin_function
name|char
modifier|*
name|reg
parameter_list|(
name|col
parameter_list|,
name|place
parameter_list|)
block|{
specifier|register
name|int
name|i
decl_stmt|;
name|i
operator|=
sizeof|sizeof
argument_list|(
name|nregs
argument_list|)
expr_stmt|;
if|if
condition|(
name|i
operator|<
literal|2
operator|*
literal|3
operator|*
name|qcol
condition|)
name|error
argument_list|(
literal|"Too many columns for registers"
argument_list|)
expr_stmt|;
if|if
condition|(
name|i
operator|<
name|qcol
operator|*
name|place
operator|+
name|col
condition|)
name|error
argument_list|(
literal|"Out of registers"
argument_list|)
expr_stmt|;
return|return
operator|(
name|nregs
index|[
name|qcol
operator|*
name|place
operator|+
name|col
index|]
operator|)
return|;
block|}
end_function

end_unit

