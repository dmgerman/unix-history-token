begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_expr_stmt
operator|.
name|LS
operator|.
name|ID
operator|.
name|nf
name|statement
argument_list|(
name|s
argument_list|)
operator|\
operator|*
name|bregister
operator|\
name|fP
operator|\
operator|*
name|bint
operator|\
name|fR
operator|*
name|s
expr_stmt|;
end_expr_stmt

begin_block
block|{
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|s == NIL
argument_list|)
block|{
name|ppitem
argument_list|()
block|;
name|ppid
argument_list|(
literal|"null"
argument_list|)
block|;
operator|\
operator|*
name|breturn
operator|\
name|fP
block|;         }
name|line
operator|=
name|s
index|[
literal|1
index|]
expr_stmt|;
operator|\
operator|*
name|bswitch
operator|\
name|fP
argument_list|(
argument|s[
literal|0
argument|]
argument_list|)
block|{
operator|\
operator|*
name|bdefault
operator|\
name|fP
operator|:
name|panic
argument_list|(
literal|"stat"
argument_list|)
block|;
operator|\
operator|*
name|bcase
operator|\
name|fP
name|T_IF
operator|:
operator|\
operator|*
name|bcase
operator|\
name|fP
name|T_IFEL
operator|:
name|ppnl
argument_list|()
block|;
name|indent
argument_list|()
block|;
name|ifop
argument_list|(
name|s
argument_list|)
block|;
operator|\
operator|*
name|breturn
operator|\
name|fP
block|;
operator|\
operator|*
name|bcase
operator|\
name|fP
name|T_ASGN
operator|:
name|ppitem
argument_list|()
block|;
name|asgnop
argument_list|(
name|s
argument_list|)
block|;
operator|\
operator|*
name|breturn
operator|\
name|fP
block|;         }
block|}
end_block

begin_expr_stmt
name|asgnop
argument_list|(
name|r
argument_list|)
operator|\
operator|*
name|bregister
operator|\
name|fP
operator|\
operator|*
name|bint
operator|\
name|fR
operator|*
name|r
expr_stmt|;
end_expr_stmt

begin_block
block|{
name|lvalue
argument_list|(
name|r
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|ppsep
argument_list|(
literal|" := "
argument_list|)
expr_stmt|;
name|rvalue
argument_list|(
name|r
index|[
literal|3
index|]
argument_list|,
name|NIL
argument_list|)
expr_stmt|;
block|}
end_block

begin_expr_stmt
name|ifop
argument_list|(
name|r
argument_list|)
operator|\
operator|*
name|bregister
operator|\
name|fP
operator|\
operator|*
name|bint
operator|\
name|fR
operator|*
name|r
expr_stmt|;
end_expr_stmt

begin_block
block|{
operator|\
operator|*
name|bregister
operator|\
name|fP
operator|\
operator|*
name|bint
operator|\
name|fR
operator|*
name|s
expr_stmt|;
operator|\
operator|*
name|bstruct
operator|\
name|fP
name|pxcnt
name|scnt
expr_stmt|;
name|ppkw
argument_list|(
literal|"if"
argument_list|)
expr_stmt|;
name|ppspac
argument_list|()
expr_stmt|;
name|rvalue
argument_list|(
name|r
index|[
literal|2
index|]
argument_list|,
name|NIL
argument_list|)
expr_stmt|;
name|ppspac
argument_list|()
expr_stmt|;
name|ppkw
argument_list|(
literal|"then"
argument_list|)
expr_stmt|;
name|ppspac
argument_list|()
expr_stmt|;
name|s
operator|=
name|r
index|[
literal|3
index|]
expr_stmt|;
name|savecnt
argument_list|(
operator|&
name|scnt
argument_list|)
expr_stmt|;
name|getcnt
argument_list|()
expr_stmt|;
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|s != NIL&& s[
literal|0
argument|] == T_BLOCK
argument_list|)
name|ppstbl1
argument_list|(
name|s
argument_list|,
name|STAT
argument_list|)
expr_stmt|;
operator|\
operator|*
name|b
operator|\
operator|*
name|belse
operator|\
name|fP
operator|\
name|fR
block|{
name|ppgoin
argument_list|(
name|STAT
argument_list|)
block|;
name|statement
argument_list|(
name|s
argument_list|)
block|;
name|ppgoout
argument_list|(
name|STAT
argument_list|)
block|;         }
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|r[
literal|0
argument|] == T_IFEL
argument_list|)
block|{
name|setcnt
argument_list|(
name|cntof
argument_list|(
operator|&
name|scnt
argument_list|)
operator|-
name|nowcnt
argument_list|()
argument_list|)
block|;
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|s == NIL || s[
literal|0
argument|] != T_BLOCK
argument_list|)
block|{
name|ppnl
argument_list|()
block|;
name|indent
argument_list|()
block|;                 }
operator|\
operator|*
name|belse
operator|\
name|fP
block|{
name|ppstbl2
argument_list|()
block|;
name|ppspac
argument_list|()
block|;                 }
name|s
operator|=
name|r
index|[
literal|4
index|]
block|;
name|ppkw
argument_list|(
literal|"else"
argument_list|)
block|;
name|unprint
argument_list|()
block|;
name|ppspac
argument_list|()
block|;
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
name|s
operator|==
name|NIL
argument_list|)
operator|\
operator|*
name|bgoto
operator|\
name|fP
name|burp
block|;
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|s[
literal|0
argument|] == T_BLOCK
argument_list|)
name|ppstbl1
argument_list|(
name|s
argument_list|,
name|STAT
argument_list|)
block|;
operator|\
operator|*
name|belse
operator|\
name|fP
operator|\
operator|*
name|bif
operator|\
name|fR
argument_list|(
argument|s[
literal|0
argument|] == T_IF || s[
literal|0
argument|] == T_IFEL
argument_list|)
name|ifop
argument_list|(
name|s
argument_list|)
block|;
operator|\
operator|*
name|belse
operator|\
name|fP
block|{
name|burp
operator|:
name|ppgoin
argument_list|(
name|STAT
argument_list|)
block|;
name|statement
argument_list|(
name|s
argument_list|)
block|;
name|ppgoout
argument_list|(
name|STAT
argument_list|)
block|;                 }
block|}
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|rescnt(&scnt)
argument_list|)
name|getcnt
argument_list|()
expr_stmt|;
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|r[
literal|4
argument|] != NIL
argument_list|)
name|unprint
argument_list|()
expr_stmt|;
operator|\
operator|*
name|bif
operator|\
name|fP
argument_list|(
argument|s != NIL&& s[
literal|0
argument|] == T_BLOCK
argument_list|)
name|ppstbl2
argument_list|()
expr_stmt|;
block|}
end_block

begin_expr_stmt
name|ppstbl1
argument_list|(
name|r
argument_list|,
name|m
argument_list|)
operator|\
operator|*
name|bint
operator|\
name|fP
operator|*
name|r
operator|,
name|m
expr_stmt|;
end_expr_stmt

begin_block
block|{
name|ppkw
argument_list|(
literal|"begin"
argument_list|)
expr_stmt|;
name|ppgoin
argument_list|(
name|m
argument_list|)
expr_stmt|;
name|statlist
argument_list|(
name|r
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
name|ppgoout
argument_list|(
name|m
argument_list|)
expr_stmt|;
block|}
end_block

begin_macro
name|ppstbl2
argument_list|()
end_macro

begin_block
block|{
name|ppnl
argument_list|()
expr_stmt|;
name|indent
argument_list|()
expr_stmt|;
name|ppkw
argument_list|(
literal|"end"
argument_list|)
expr_stmt|;
block|}
end_block

begin_expr_stmt
operator|.
name|fi
operator|.
name|LE
end_expr_stmt

end_unit

