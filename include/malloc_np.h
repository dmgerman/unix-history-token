begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (C) 2006 Jason Evans<jasone@FreeBSD.org>.  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice(s), this list of conditions and the following disclaimer as  *    the first lines of this file unmodified other than the possible  *    addition of one or more copyright notices.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice(s), this list of conditions and the following disclaimer in  *    the documentation and/or other materials provided with the  *    distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER(S) ``AS IS'' AND ANY  * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR  * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT HOLDER(S) BE  * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR  * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF  * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR  * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,  * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE  * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,  * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *  * $FreeBSD$  */
end_comment

begin_ifndef
ifndef|#
directive|ifndef
name|_MALLOC_NP_H_
end_ifndef

begin_define
define|#
directive|define
name|_MALLOC_NP_H_
end_define

begin_include
include|#
directive|include
file|<sys/cdefs.h>
end_include

begin_include
include|#
directive|include
file|<sys/types.h>
end_include

begin_include
include|#
directive|include
file|<stdbool.h>
end_include

begin_include
include|#
directive|include
file|<strings.h>
end_include

begin_macro
name|__BEGIN_DECLS
end_macro

begin_typedef
typedef|typedef
name|struct
name|extent_hooks_s
name|extent_hooks_t
typedef|;
end_typedef

begin_typedef
typedef|typedef
name|void
modifier|*
function_decl|(
name|extent_alloc_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|bool
modifier|*
parameter_list|,
name|bool
modifier|*
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|bool
function_decl|(
name|extent_dalloc_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|bool
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|void
function_decl|(
name|extent_destroy_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|bool
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|bool
function_decl|(
name|extent_commit_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|bool
function_decl|(
name|extent_decommit_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|bool
function_decl|(
name|extent_purge_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|bool
function_decl|(
name|extent_split_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|size_t
parameter_list|,
name|bool
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_typedef
typedef|typedef
name|bool
function_decl|(
name|extent_merge_t
function_decl|)
parameter_list|(
name|extent_hooks_t
modifier|*
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|void
modifier|*
parameter_list|,
name|size_t
parameter_list|,
name|bool
parameter_list|,
name|unsigned
parameter_list|)
function_decl|;
end_typedef

begin_struct
struct|struct
name|extent_hooks_s
block|{
name|extent_alloc_t
modifier|*
name|alloc
decl_stmt|;
name|extent_dalloc_t
modifier|*
name|dalloc
decl_stmt|;
name|extent_destroy_t
modifier|*
name|destroy
decl_stmt|;
name|extent_commit_t
modifier|*
name|commit
decl_stmt|;
name|extent_decommit_t
modifier|*
name|decommit
decl_stmt|;
name|extent_purge_t
modifier|*
name|purge_lazy
decl_stmt|;
name|extent_purge_t
modifier|*
name|purge_forced
decl_stmt|;
name|extent_split_t
modifier|*
name|split
decl_stmt|;
name|extent_merge_t
modifier|*
name|merge
decl_stmt|;
block|}
struct|;
end_struct

begin_function_decl
name|size_t
name|malloc_usable_size
parameter_list|(
specifier|const
name|void
modifier|*
name|ptr
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|malloc_stats_print
parameter_list|(
name|void
function_decl|(
modifier|*
name|write_cb
function_decl|)
parameter_list|(
name|void
modifier|*
parameter_list|,
specifier|const
name|char
modifier|*
parameter_list|)
parameter_list|,
name|void
modifier|*
name|cbopaque
parameter_list|,
specifier|const
name|char
modifier|*
name|opts
parameter_list|)
function_decl|;
end_function_decl

begin_define
define|#
directive|define
name|MALLCTL_ARENAS_ALL
value|4096
end_define

begin_define
define|#
directive|define
name|MALLCTL_ARENAS_DESTROYED
value|4097
end_define

begin_function_decl
name|int
name|mallctl
parameter_list|(
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|void
modifier|*
name|oldp
parameter_list|,
name|size_t
modifier|*
name|oldlenp
parameter_list|,
name|void
modifier|*
name|newp
parameter_list|,
name|size_t
name|newlen
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mallctlnametomib
parameter_list|(
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|size_t
modifier|*
name|mibp
parameter_list|,
name|size_t
modifier|*
name|miblenp
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|mallctlbymib
parameter_list|(
specifier|const
name|size_t
modifier|*
name|mib
parameter_list|,
name|size_t
name|miblen
parameter_list|,
name|void
modifier|*
name|oldp
parameter_list|,
name|size_t
modifier|*
name|oldlenp
parameter_list|,
name|void
modifier|*
name|newp
parameter_list|,
name|size_t
name|newlen
parameter_list|)
function_decl|;
end_function_decl

begin_define
define|#
directive|define
name|MALLOCX_LG_ALIGN
parameter_list|(
name|la
parameter_list|)
value|((int)(la))
end_define

begin_define
define|#
directive|define
name|MALLOCX_ALIGN
parameter_list|(
name|a
parameter_list|)
value|((int)(ffsl((int)(a))-1))
end_define

begin_define
define|#
directive|define
name|MALLOCX_ZERO
value|((int)0x40)
end_define

begin_define
define|#
directive|define
name|MALLOCX_TCACHE
parameter_list|(
name|tc
parameter_list|)
value|((int)(((tc)+2)<< 8))
end_define

begin_define
define|#
directive|define
name|MALLOCX_TCACHE_NONE
value|MALLOCX_TCACHE(-1)
end_define

begin_define
define|#
directive|define
name|MALLOCX_ARENA
parameter_list|(
name|a
parameter_list|)
value|((((int)(a))+1)<< 20)
end_define

begin_function_decl
name|void
modifier|*
name|mallocx
parameter_list|(
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
modifier|*
name|rallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|xallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|size_t
name|extra
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|sallocx
parameter_list|(
specifier|const
name|void
modifier|*
name|ptr
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|dallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|sdallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|nallocx
parameter_list|(
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_decl_stmt
name|void
modifier|*
name|__calloc
argument_list|(
name|size_t
name|number
argument_list|,
name|size_t
name|size
argument_list|)
name|__malloc_like
decl_stmt|;
end_decl_stmt

begin_decl_stmt
name|void
modifier|*
name|__malloc
argument_list|(
name|size_t
name|size
argument_list|)
name|__malloc_like
decl_stmt|;
end_decl_stmt

begin_function_decl
name|void
modifier|*
name|__realloc
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|__free
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|__posix_memalign
parameter_list|(
name|void
modifier|*
modifier|*
name|ptr
parameter_list|,
name|size_t
name|alignment
parameter_list|,
name|size_t
name|size
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
modifier|*
name|__aligned_alloc
parameter_list|(
name|size_t
name|alignment
parameter_list|,
name|size_t
name|size
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|__malloc_usable_size
parameter_list|(
specifier|const
name|void
modifier|*
name|ptr
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|__malloc_stats_print
parameter_list|(
name|void
function_decl|(
modifier|*
name|write_cb
function_decl|)
parameter_list|(
name|void
modifier|*
parameter_list|,
specifier|const
name|char
modifier|*
parameter_list|)
parameter_list|,
name|void
modifier|*
name|cbopaque
parameter_list|,
specifier|const
name|char
modifier|*
name|opts
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|__mallctl
parameter_list|(
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|void
modifier|*
name|oldp
parameter_list|,
name|size_t
modifier|*
name|oldlenp
parameter_list|,
name|void
modifier|*
name|newp
parameter_list|,
name|size_t
name|newlen
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|__mallctlnametomib
parameter_list|(
specifier|const
name|char
modifier|*
name|name
parameter_list|,
name|size_t
modifier|*
name|mibp
parameter_list|,
name|size_t
modifier|*
name|miblenp
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|int
name|__mallctlbymib
parameter_list|(
specifier|const
name|size_t
modifier|*
name|mib
parameter_list|,
name|size_t
name|miblen
parameter_list|,
name|void
modifier|*
name|oldp
parameter_list|,
name|size_t
modifier|*
name|oldlenp
parameter_list|,
name|void
modifier|*
name|newp
parameter_list|,
name|size_t
name|newlen
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
modifier|*
name|__mallocx
parameter_list|(
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
modifier|*
name|__rallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|__xallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|size_t
name|extra
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|__sallocx
parameter_list|(
specifier|const
name|void
modifier|*
name|ptr
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|__dallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|void
name|__sdallocx
parameter_list|(
name|void
modifier|*
name|ptr
parameter_list|,
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_function_decl
name|size_t
name|__nallocx
parameter_list|(
name|size_t
name|size
parameter_list|,
name|int
name|flags
parameter_list|)
function_decl|;
end_function_decl

begin_macro
name|__END_DECLS
end_macro

begin_endif
endif|#
directive|endif
end_endif

begin_comment
comment|/* _MALLOC_NP_H_ */
end_comment

end_unit

