begin_unit|revision:0.9.5;language:C;cregit-version:0.0.1
begin_comment
comment|/*-  * Copyright (c) 1999 Doug Rabson  * Copyright (c) 2000 Mitsuru IWASAKI<iwasaki@FreeBSD.org>  * All rights reserved.  *  * Redistribution and use in source and binary forms, with or without  * modification, are permitted provided that the following conditions  * are met:  * 1. Redistributions of source code must retain the above copyright  *    notice, this list of conditions and the following disclaimer.  * 2. Redistributions in binary form must reproduce the above copyright  *    notice, this list of conditions and the following disclaimer in the  *    documentation and/or other materials provided with the distribution.  *  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND  * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE  * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE  * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF  * SUCH DAMAGE.  *  *	$Id: asl_dump.c,v 1.6 2000/08/09 14:47:52 iwasaki Exp $  *	$FreeBSD$  */
end_comment

begin_include
include|#
directive|include
file|<sys/param.h>
end_include

begin_include
include|#
directive|include
file|<assert.h>
end_include

begin_include
include|#
directive|include
file|<err.h>
end_include

begin_include
include|#
directive|include
file|<stdio.h>
end_include

begin_include
include|#
directive|include
file|"acpidump.h"
end_include

begin_include
include|#
directive|include
file|"aml/aml_env.h"
end_include

begin_decl_stmt
name|struct
name|aml_environ
name|asl_env
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|u_int32_t
name|asl_dump_pkglength
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|pkglength
operator|=
operator|*
name|dp
operator|++
expr_stmt|;
switch|switch
condition|(
name|pkglength
operator|>>
literal|6
condition|)
block|{
case|case
literal|0
case|:
break|break;
case|case
literal|1
case|:
name|pkglength
operator|=
operator|(
name|pkglength
operator|&
literal|0xf
operator|)
operator|+
operator|(
name|dp
index|[
literal|0
index|]
operator|<<
literal|4
operator|)
expr_stmt|;
name|dp
operator|+=
literal|1
expr_stmt|;
break|break;
case|case
literal|2
case|:
name|pkglength
operator|=
operator|(
name|pkglength
operator|&
literal|0xf
operator|)
operator|+
operator|(
name|dp
index|[
literal|0
index|]
operator|<<
literal|4
operator|)
operator|+
operator|(
name|dp
index|[
literal|1
index|]
operator|<<
literal|12
operator|)
expr_stmt|;
name|dp
operator|+=
literal|2
expr_stmt|;
break|break;
case|case
literal|3
case|:
name|pkglength
operator|=
operator|(
name|pkglength
operator|&
literal|0xf
operator|)
operator|+
operator|(
name|dp
index|[
literal|0
index|]
operator|<<
literal|4
operator|)
operator|+
operator|(
name|dp
index|[
literal|1
index|]
operator|<<
literal|12
operator|)
operator|+
operator|(
name|dp
index|[
literal|2
index|]
operator|<<
literal|20
operator|)
expr_stmt|;
name|dp
operator|+=
literal|3
expr_stmt|;
break|break;
block|}
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
return|return
operator|(
name|pkglength
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|print_nameseg
parameter_list|(
name|u_int8_t
modifier|*
name|dp
parameter_list|)
block|{
if|if
condition|(
name|dp
index|[
literal|3
index|]
operator|!=
literal|'_'
condition|)
name|printf
argument_list|(
literal|"%c%c%c%c"
argument_list|,
name|dp
index|[
literal|0
index|]
argument_list|,
name|dp
index|[
literal|1
index|]
argument_list|,
name|dp
index|[
literal|2
index|]
argument_list|,
name|dp
index|[
literal|3
index|]
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|dp
index|[
literal|2
index|]
operator|!=
literal|'_'
condition|)
name|printf
argument_list|(
literal|"%c%c%c_"
argument_list|,
name|dp
index|[
literal|0
index|]
argument_list|,
name|dp
index|[
literal|1
index|]
argument_list|,
name|dp
index|[
literal|2
index|]
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|dp
index|[
literal|1
index|]
operator|!=
literal|'_'
condition|)
name|printf
argument_list|(
literal|"%c%c__"
argument_list|,
name|dp
index|[
literal|0
index|]
argument_list|,
name|dp
index|[
literal|1
index|]
argument_list|)
expr_stmt|;
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|!=
literal|'_'
condition|)
name|printf
argument_list|(
literal|"%c___"
argument_list|,
name|dp
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|u_int8_t
name|asl_dump_bytedata
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
name|data
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|data
operator|=
name|dp
index|[
literal|0
index|]
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
operator|+
literal|1
expr_stmt|;
return|return
operator|(
name|data
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|u_int16_t
name|asl_dump_worddata
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int16_t
name|data
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|data
operator|=
name|dp
index|[
literal|0
index|]
operator|+
operator|(
name|dp
index|[
literal|1
index|]
operator|<<
literal|8
operator|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
operator|+
literal|2
expr_stmt|;
return|return
operator|(
name|data
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|u_int32_t
name|asl_dump_dworddata
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int32_t
name|data
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|data
operator|=
name|dp
index|[
literal|0
index|]
operator|+
operator|(
name|dp
index|[
literal|1
index|]
operator|<<
literal|8
operator|)
operator|+
operator|(
name|dp
index|[
literal|2
index|]
operator|<<
literal|16
operator|)
operator|+
operator|(
name|dp
index|[
literal|3
index|]
operator|<<
literal|24
operator|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
operator|+
literal|4
expr_stmt|;
return|return
operator|(
name|data
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|u_int8_t
modifier|*
name|asl_dump_namestring
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|name
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|name
operator|=
name|dp
expr_stmt|;
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|'\\'
condition|)
name|dp
operator|++
expr_stmt|;
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|'^'
condition|)
while|while
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|'^'
condition|)
name|dp
operator|++
expr_stmt|;
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|0x00
condition|)
comment|/* NullName */
name|dp
operator|++
expr_stmt|;
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|0x2e
condition|)
comment|/* DualNamePrefix */
name|dp
operator|+=
literal|1
operator|+
literal|4
operator|+
literal|4
expr_stmt|;
comment|/* NameSeg, NameSeg */
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|0x2f
condition|)
block|{
comment|/* MultiNamePrefix */
name|int
name|segcount
init|=
name|dp
index|[
literal|1
index|]
decl_stmt|;
name|dp
operator|+=
literal|1
operator|+
literal|1
operator|+
name|segcount
operator|*
literal|4
expr_stmt|;
comment|/* segcount * NameSeg */
block|}
else|else
name|dp
operator|+=
literal|4
expr_stmt|;
comment|/* NameSeg */
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
return|return
operator|(
name|name
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|print_namestring
parameter_list|(
name|u_int8_t
modifier|*
name|dp
parameter_list|)
block|{
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|'\\'
condition|)
block|{
name|putchar
argument_list|(
name|dp
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|dp
operator|++
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|'^'
condition|)
block|{
while|while
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|'^'
condition|)
block|{
name|putchar
argument_list|(
name|dp
index|[
literal|0
index|]
argument_list|)
expr_stmt|;
name|dp
operator|++
expr_stmt|;
block|}
block|}
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|0x00
condition|)
block|{
comment|/* NullName */
comment|/* printf("<null>"); */
name|dp
operator|++
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|0x2e
condition|)
block|{
comment|/* DualNamePrefix */
name|print_nameseg
argument_list|(
name|dp
operator|+
literal|1
argument_list|)
expr_stmt|;
name|putchar
argument_list|(
literal|'.'
argument_list|)
expr_stmt|;
name|print_nameseg
argument_list|(
name|dp
operator|+
literal|5
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|dp
index|[
literal|0
index|]
operator|==
literal|0x2f
condition|)
block|{
comment|/* MultiNamePrefix */
name|int
name|segcount
init|=
name|dp
index|[
literal|1
index|]
decl_stmt|;
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
operator|,
name|dp
operator|+=
literal|2
init|;
name|i
operator|<
name|segcount
condition|;
name|i
operator|++
operator|,
name|dp
operator|+=
literal|4
control|)
block|{
if|if
condition|(
name|i
operator|>
literal|0
condition|)
name|putchar
argument_list|(
literal|'.'
argument_list|)
expr_stmt|;
name|print_nameseg
argument_list|(
name|dp
argument_list|)
expr_stmt|;
block|}
block|}
else|else
comment|/* NameSeg */
name|print_nameseg
argument_list|(
name|dp
argument_list|)
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|print_indent
parameter_list|(
name|int
name|indent
parameter_list|)
block|{
name|int
name|i
decl_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|indent
condition|;
name|i
operator|++
control|)
name|printf
argument_list|(
literal|"    "
argument_list|)
expr_stmt|;
block|}
end_function

begin_define
define|#
directive|define
name|ASL_ENTER_SCOPE
parameter_list|(
name|dp_orig
parameter_list|,
name|old_name
parameter_list|)
value|do {				\ 	u_int8_t	*dp_copy;					\ 	u_int8_t	*name;						\ 	old_name = asl_env.curname;					\ 	dp_copy = dp_orig;						\ 	name = asl_dump_namestring(&dp_copy);				\ 	asl_env.curname = aml_search_name(&asl_env, name);		\ } while(0)
end_define

begin_define
define|#
directive|define
name|ASL_LEAVE_SCOPE
parameter_list|(
name|old_name
parameter_list|)
value|do {					\ 	asl_env.curname = old_name;					\ } while(0)
end_define

begin_function
specifier|static
name|void
name|asl_dump_defscope
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|oname
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"Scope("
argument_list|)
expr_stmt|;
name|ASL_ENTER_SCOPE
argument_list|(
name|dp
argument_list|,
name|oname
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|") {\n"
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
name|ASL_LEAVE_SCOPE
argument_list|(
name|oname
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defbuffer
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Buffer("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|") {"
argument_list|)
expr_stmt|;
while|while
condition|(
name|dp
operator|<
name|end
condition|)
block|{
name|printf
argument_list|(
literal|"0x%x"
argument_list|,
operator|*
name|dp
operator|++
argument_list|)
expr_stmt|;
if|if
condition|(
name|dp
operator|<
name|end
condition|)
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
block|}
name|printf
argument_list|(
literal|" }"
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defpackage
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|numelements
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|numelements
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Package(0x%x) {\n"
argument_list|,
name|numelements
argument_list|)
expr_stmt|;
while|while
condition|(
name|dp
operator|<
name|end
condition|)
block|{
name|print_indent
argument_list|(
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|",\n"
argument_list|)
expr_stmt|;
block|}
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|dp
operator|=
name|end
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_decl_stmt
name|int
name|scope_within_method
init|=
literal|0
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|void
name|asl_dump_defmethod
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|flags
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|oname
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"Method("
argument_list|)
expr_stmt|;
name|ASL_ENTER_SCOPE
argument_list|(
name|dp
argument_list|,
name|oname
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|flags
operator|=
operator|*
name|dp
operator|++
expr_stmt|;
if|if
condition|(
name|flags
condition|)
block|{
name|printf
argument_list|(
literal|", %d"
argument_list|,
name|flags
operator|&
literal|7
argument_list|)
expr_stmt|;
if|if
condition|(
name|flags
operator|&
literal|8
condition|)
block|{
name|printf
argument_list|(
literal|", Serialized"
argument_list|)
expr_stmt|;
block|}
block|}
name|printf
argument_list|(
literal|") {\n"
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|scope_within_method
operator|=
literal|1
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|scope_within_method
operator|=
literal|0
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
name|ASL_LEAVE_SCOPE
argument_list|(
name|oname
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defopregion
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
specifier|const
name|char
modifier|*
name|regions
index|[]
init|=
block|{
literal|"SystemMemory"
block|,
literal|"SystemIO"
block|,
literal|"PCI_Config"
block|,
literal|"EmbeddedControl"
block|,
literal|"SMBus"
block|, 	}
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|printf
argument_list|(
literal|"OperationRegion("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Name */
name|printf
argument_list|(
literal|", %s, "
argument_list|,
name|regions
index|[
operator|*
name|dp
operator|++
index|]
argument_list|)
expr_stmt|;
comment|/* Space */
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Offset */
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Length */
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_decl_stmt
specifier|static
specifier|const
name|char
modifier|*
name|accessnames
index|[]
init|=
block|{
literal|"AnyAcc"
block|,
literal|"ByteAcc"
block|,
literal|"WordAcc"
block|,
literal|"DWordAcc"
block|,
literal|"BlockAcc"
block|,
literal|"SMBSendRecvAcc"
block|,
literal|"SMBQuickAcc"
block|}
decl_stmt|;
end_decl_stmt

begin_function
specifier|static
name|int
name|asl_dump_field
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|u_int32_t
name|offset
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|name
decl_stmt|;
name|u_int8_t
name|access
decl_stmt|,
name|attribute
decl_stmt|;
name|u_int32_t
name|width
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
switch|switch
condition|(
operator|*
name|dp
condition|)
block|{
case|case
literal|'\\'
case|:
case|case
literal|'^'
case|:
case|case
literal|'A'
operator|...
literal|'Z'
case|:
case|case
literal|'_'
case|:
case|case
literal|'.'
case|:
name|name
operator|=
name|asl_dump_namestring
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|width
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|offset
operator|+=
name|width
expr_stmt|;
name|print_namestring
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|",\t%d"
argument_list|,
name|width
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x00
case|:
name|dp
operator|++
expr_stmt|;
name|width
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|offset
operator|+=
name|width
expr_stmt|;
if|if
condition|(
operator|(
name|offset
operator|%
literal|8
operator|)
operator|==
literal|0
condition|)
block|{
name|printf
argument_list|(
literal|"Offset(0x%x)"
argument_list|,
name|offset
operator|/
literal|8
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|printf
argument_list|(
literal|",\t%d"
argument_list|,
name|width
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|0x01
case|:
name|access
operator|=
name|dp
index|[
literal|1
index|]
expr_stmt|;
name|attribute
operator|=
name|dp
index|[
literal|2
index|]
expr_stmt|;
name|dp
operator|+=
literal|3
expr_stmt|;
name|printf
argument_list|(
literal|"AccessAs(%s, %d)"
argument_list|,
name|accessnames
index|[
name|access
index|]
argument_list|,
name|attribute
argument_list|)
expr_stmt|;
break|break;
block|}
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
return|return
operator|(
name|offset
operator|)
return|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_fieldlist
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|u_int8_t
modifier|*
name|end
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int32_t
name|offset
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|offset
operator|=
literal|0
expr_stmt|;
while|while
condition|(
name|dp
operator|<
name|end
condition|)
block|{
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|offset
operator|=
name|asl_dump_field
argument_list|(
operator|&
name|dp
argument_list|,
name|offset
argument_list|)
expr_stmt|;
if|if
condition|(
name|dp
operator|<
name|end
condition|)
name|printf
argument_list|(
literal|",\n"
argument_list|)
expr_stmt|;
else|else
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_deffield
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|flags
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|lockrules
index|[]
init|=
block|{
literal|"NoLock"
block|,
literal|"Lock"
block|}
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|updaterules
index|[]
init|=
block|{
literal|"Preserve"
block|,
literal|"WriteAsOnes"
block|,
literal|"WriteAsZeros"
block|,
literal|"*Error*"
block|}
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Field("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Name */
name|flags
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %s, %s, %s) {\n"
argument_list|,
name|accessnames
index|[
name|flags
operator|&
literal|0xf
index|]
argument_list|,
name|lockrules
index|[
operator|(
name|flags
operator|>>
literal|4
operator|)
operator|&
literal|1
index|]
argument_list|,
name|updaterules
index|[
operator|(
name|flags
operator|>>
literal|5
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
name|asl_dump_fieldlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defindexfield
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|flags
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|lockrules
index|[]
init|=
block|{
literal|"NoLock"
block|,
literal|"Lock"
block|}
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|updaterules
index|[]
init|=
block|{
literal|"Preserve"
block|,
literal|"WriteAsOnes"
block|,
literal|"WriteAsZeros"
block|,
literal|"*Error*"
block|}
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"IndexField("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Name1 */
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Name2 */
name|flags
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %s, %s, %s) {\n"
argument_list|,
name|accessnames
index|[
name|flags
operator|&
literal|0xf
index|]
argument_list|,
name|lockrules
index|[
operator|(
name|flags
operator|>>
literal|4
operator|)
operator|&
literal|1
index|]
argument_list|,
name|updaterules
index|[
operator|(
name|flags
operator|>>
literal|5
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
name|asl_dump_fieldlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defbankfield
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|flags
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|lockrules
index|[]
init|=
block|{
literal|"NoLock"
block|,
literal|"Lock"
block|}
decl_stmt|;
specifier|static
specifier|const
name|char
modifier|*
name|updaterules
index|[]
init|=
block|{
literal|"Preserve"
block|,
literal|"WriteAsOnes"
block|,
literal|"WriteAsZeros"
block|,
literal|"*Error*"
block|}
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Field("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Name1 */
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* Name2 */
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
comment|/* BankValue */
name|flags
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %s, %s, %s) {\n"
argument_list|,
name|accessnames
index|[
name|flags
operator|&
literal|0xf
index|]
argument_list|,
name|lockrules
index|[
operator|(
name|flags
operator|>>
literal|4
operator|)
operator|&
literal|1
index|]
argument_list|,
name|updaterules
index|[
operator|(
name|flags
operator|>>
literal|5
operator|)
operator|&
literal|3
index|]
argument_list|)
expr_stmt|;
name|asl_dump_fieldlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defdevice
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|oname
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Device("
argument_list|)
expr_stmt|;
name|ASL_ENTER_SCOPE
argument_list|(
name|dp
argument_list|,
name|oname
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|") {\n"
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
name|ASL_LEAVE_SCOPE
argument_list|(
name|oname
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defprocessor
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|procid
decl_stmt|;
name|u_int8_t
name|pblklen
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|u_int32_t
name|pblkaddr
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|oname
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Processor("
argument_list|)
expr_stmt|;
name|ASL_ENTER_SCOPE
argument_list|(
name|dp
argument_list|,
name|oname
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|procid
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|pblkaddr
operator|=
name|asl_dump_dworddata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|pblklen
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %d, 0x%x, 0x%x) {\n"
argument_list|,
name|procid
argument_list|,
name|pblkaddr
argument_list|,
name|pblklen
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
name|ASL_LEAVE_SCOPE
argument_list|(
name|oname
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defpowerres
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int8_t
name|systemlevel
decl_stmt|;
name|u_int16_t
name|resourceorder
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|oname
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"PowerResource("
argument_list|)
expr_stmt|;
name|ASL_ENTER_SCOPE
argument_list|(
name|dp
argument_list|,
name|oname
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|systemlevel
operator|=
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|resourceorder
operator|=
name|asl_dump_worddata
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %d, %d) {\n"
argument_list|,
name|systemlevel
argument_list|,
name|resourceorder
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
name|ASL_LEAVE_SCOPE
argument_list|(
name|oname
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defthermalzone
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|oname
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"ThermalZone("
argument_list|)
expr_stmt|;
name|ASL_ENTER_SCOPE
argument_list|(
name|dp
argument_list|,
name|oname
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|") {\n"
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
name|ASL_LEAVE_SCOPE
argument_list|(
name|oname
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defif
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"If("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|") {\n"
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defelse
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"Else {\n"
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
specifier|static
name|void
name|asl_dump_defwhile
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|start
decl_stmt|;
name|u_int8_t
modifier|*
name|end
decl_stmt|;
name|u_int32_t
name|pkglength
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|start
operator|=
name|dp
expr_stmt|;
name|pkglength
operator|=
name|asl_dump_pkglength
argument_list|(
operator|&
name|dp
argument_list|)
expr_stmt|;
name|end
operator|=
name|start
operator|+
name|pkglength
expr_stmt|;
name|printf
argument_list|(
literal|"While("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|") {\n"
argument_list|)
expr_stmt|;
name|asl_dump_objectlist
argument_list|(
operator|&
name|dp
argument_list|,
name|end
argument_list|,
name|indent
operator|+
literal|1
argument_list|)
expr_stmt|;
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"}"
argument_list|)
expr_stmt|;
name|assert
argument_list|(
name|dp
operator|==
name|end
argument_list|)
expr_stmt|;
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_comment
comment|/*  * Public interfaces  */
end_comment

begin_function
name|void
name|asl_dump_termobj
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|u_int8_t
modifier|*
name|name
decl_stmt|;
name|u_int8_t
name|opcode
decl_stmt|;
name|struct
name|aml_name
modifier|*
name|method
decl_stmt|;
specifier|const
name|char
modifier|*
name|matchstr
index|[]
init|=
block|{
literal|"MTR"
block|,
literal|"MEQ"
block|,
literal|"MLE"
block|,
literal|"MLT"
block|,
literal|"MGE"
block|,
literal|"MGT"
block|, 	}
decl_stmt|;
define|#
directive|define
name|OPTARG
parameter_list|()
value|do {						\ 	printf(", ");						\ 	if (*dp == 0x00) {					\ 	    dp++;						\ 	} else { 						\ 	    asl_dump_termobj(&dp, indent);			\ 	}							\ } while (0)
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
name|opcode
operator|=
operator|*
name|dp
operator|++
expr_stmt|;
switch|switch
condition|(
name|opcode
condition|)
block|{
case|case
literal|'\\'
case|:
case|case
literal|'^'
case|:
case|case
literal|'A'
operator|...
literal|'Z'
case|:
case|case
literal|'_'
case|:
case|case
literal|'.'
case|:
name|dp
operator|--
expr_stmt|;
name|print_namestring
argument_list|(
operator|(
name|name
operator|=
name|asl_dump_namestring
argument_list|(
operator|&
name|dp
argument_list|)
operator|)
argument_list|)
expr_stmt|;
if|if
condition|(
name|scope_within_method
operator|==
literal|1
condition|)
block|{
name|method
operator|=
name|aml_search_name
argument_list|(
operator|&
name|asl_env
argument_list|,
name|name
argument_list|)
expr_stmt|;
if|if
condition|(
name|method
operator|!=
name|NULL
operator|&&
name|method
operator|->
name|property
operator|!=
name|NULL
operator|&&
name|method
operator|->
name|property
operator|->
name|type
operator|==
name|aml_t_method
condition|)
block|{
name|int
name|i
decl_stmt|,
name|argnum
decl_stmt|;
name|argnum
operator|=
name|method
operator|->
name|property
operator|->
name|meth
operator|.
name|argnum
operator|&
literal|7
expr_stmt|;
name|printf
argument_list|(
literal|"("
argument_list|)
expr_stmt|;
for|for
control|(
name|i
operator|=
literal|0
init|;
name|i
operator|<
name|argnum
condition|;
name|i
operator|++
control|)
block|{
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
if|if
condition|(
name|i
operator|<
operator|(
name|argnum
operator|-
literal|1
operator|)
condition|)
block|{
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
block|}
block|}
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
block|}
block|}
break|break;
case|case
literal|0x0a
case|:
comment|/* BytePrefix */
name|printf
argument_list|(
literal|"0x%x"
argument_list|,
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x0b
case|:
comment|/* WordPrefix */
name|printf
argument_list|(
literal|"0x%04x"
argument_list|,
name|asl_dump_worddata
argument_list|(
operator|&
name|dp
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x0c
case|:
comment|/* DWordPrefix */
name|printf
argument_list|(
literal|"0x%08x"
argument_list|,
name|asl_dump_dworddata
argument_list|(
operator|&
name|dp
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x0d
case|:
comment|/* StringPrefix */
name|printf
argument_list|(
literal|"\"%s\""
argument_list|,
operator|(
specifier|const
name|char
operator|*
operator|)
name|dp
argument_list|)
expr_stmt|;
while|while
condition|(
operator|*
name|dp
condition|)
name|dp
operator|++
expr_stmt|;
name|dp
operator|++
expr_stmt|;
comment|/* NUL terminate */
break|break;
case|case
literal|0x00
case|:
comment|/* ZeroOp */
name|printf
argument_list|(
literal|"Zero"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x01
case|:
comment|/* OneOp */
name|printf
argument_list|(
literal|"One"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xff
case|:
comment|/* OnesOp */
name|printf
argument_list|(
literal|"Ones"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x06
case|:
comment|/* AliasOp */
name|printf
argument_list|(
literal|"Alias("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x08
case|:
comment|/* NameOp */
name|printf
argument_list|(
literal|"Name("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x10
case|:
comment|/* ScopeOp */
name|asl_dump_defscope
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x11
case|:
comment|/* BufferOp */
name|asl_dump_defbuffer
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x12
case|:
comment|/* PackageOp */
name|asl_dump_defpackage
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x14
case|:
comment|/* MethodOp */
name|asl_dump_defmethod
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x5b
case|:
comment|/* ExtOpPrefix */
name|opcode
operator|=
operator|*
name|dp
operator|++
expr_stmt|;
switch|switch
condition|(
name|opcode
condition|)
block|{
case|case
literal|0x01
case|:
comment|/* MutexOp */
name|printf
argument_list|(
literal|"Mutex("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %d)"
argument_list|,
operator|*
name|dp
operator|++
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x02
case|:
comment|/* EventOp */
name|printf
argument_list|(
literal|"Event("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x12
case|:
comment|/* CondRefOfOp */
name|printf
argument_list|(
literal|"CondRefOf("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x13
case|:
comment|/* CreateFieldOp */
name|printf
argument_list|(
literal|"CreateField("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x20
case|:
comment|/* LoadOp */
name|printf
argument_list|(
literal|"Load("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x21
case|:
comment|/* StallOp */
name|printf
argument_list|(
literal|"Stall("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x22
case|:
comment|/* SleepOp */
name|printf
argument_list|(
literal|"Sleep("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x23
case|:
comment|/* AcquireOp */
name|printf
argument_list|(
literal|"Acquire("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", 0x%x)"
argument_list|,
name|asl_dump_worddata
argument_list|(
operator|&
name|dp
argument_list|)
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x24
case|:
comment|/* SignalOp */
name|printf
argument_list|(
literal|"Signal("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x25
case|:
comment|/* WaitOp */
name|printf
argument_list|(
literal|"Wait("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x26
case|:
comment|/* ResetOp */
name|printf
argument_list|(
literal|"Reset("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x27
case|:
comment|/* ReleaseOp */
name|printf
argument_list|(
literal|"Release("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x28
case|:
comment|/* FromBCDOp */
name|printf
argument_list|(
literal|"FromBCD("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x29
case|:
comment|/* ToBCDOp */
name|printf
argument_list|(
literal|"ToBCD("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x2a
case|:
comment|/* UnloadOp */
name|printf
argument_list|(
literal|"Unload("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x30
case|:
name|printf
argument_list|(
literal|"Revision"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x31
case|:
name|printf
argument_list|(
literal|"Debug"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x32
case|:
comment|/* FatalOp */
name|printf
argument_list|(
literal|"Fatal("
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"0x%x, "
argument_list|,
name|asl_dump_bytedata
argument_list|(
operator|&
name|dp
argument_list|)
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"0x%x, "
argument_list|,
name|asl_dump_dworddata
argument_list|(
operator|&
name|dp
argument_list|)
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x80
case|:
comment|/* OpRegionOp */
name|asl_dump_defopregion
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x81
case|:
comment|/* FieldOp */
name|asl_dump_deffield
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x82
case|:
comment|/* DeviceOp */
name|asl_dump_defdevice
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x83
case|:
comment|/* ProcessorOp */
name|asl_dump_defprocessor
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x84
case|:
comment|/* PowerResOp */
name|asl_dump_defpowerres
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x85
case|:
comment|/* ThermalZoneOp */
name|asl_dump_defthermalzone
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x86
case|:
comment|/* IndexFieldOp */
name|asl_dump_defindexfield
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x87
case|:
comment|/* BankFieldOp */
name|asl_dump_defbankfield
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
default|default:
name|errx
argument_list|(
literal|1
argument_list|,
literal|"strange opcode 0x5b, 0x%x\n"
argument_list|,
name|opcode
argument_list|)
expr_stmt|;
block|}
break|break;
case|case
literal|0x68
operator|...
literal|0x6e
case|:
comment|/* ArgN */
name|printf
argument_list|(
literal|"Arg%d"
argument_list|,
name|opcode
operator|-
literal|0x68
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x60
operator|...
literal|0x67
case|:
name|printf
argument_list|(
literal|"Local%d"
argument_list|,
name|opcode
operator|-
literal|0x60
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x70
case|:
comment|/* StoreOp */
name|printf
argument_list|(
literal|"Store("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x71
case|:
comment|/* RefOfOp */
name|printf
argument_list|(
literal|"RefOf("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x72
case|:
comment|/* AddOp */
name|printf
argument_list|(
literal|"Add("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x73
case|:
comment|/* ConcatenateOp */
name|printf
argument_list|(
literal|"Concatenate("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x74
case|:
comment|/* SubtractOp */
name|printf
argument_list|(
literal|"Subtract("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x75
case|:
comment|/* IncrementOp */
name|printf
argument_list|(
literal|"Increment("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x76
case|:
comment|/* DecrementOp */
name|printf
argument_list|(
literal|"Decrement("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x77
case|:
comment|/* MultiplyOp */
name|printf
argument_list|(
literal|"Multiply("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x78
case|:
comment|/* DivideOp */
name|printf
argument_list|(
literal|"Divide("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x79
case|:
comment|/* ShiftLeftOp */
name|printf
argument_list|(
literal|"ShiftLeft("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x7a
case|:
comment|/* ShiftRightOp */
name|printf
argument_list|(
literal|"ShiftRight("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x7b
case|:
comment|/* AndOp */
name|printf
argument_list|(
literal|"And("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x7c
case|:
comment|/* NAndOp */
name|printf
argument_list|(
literal|"NAnd("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x7d
case|:
comment|/* OrOp */
name|printf
argument_list|(
literal|"Or("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x7e
case|:
comment|/* NOrOp */
name|printf
argument_list|(
literal|"NOr("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x7f
case|:
comment|/* XOrOp */
name|printf
argument_list|(
literal|"XOr("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x80
case|:
comment|/* NotOp */
name|printf
argument_list|(
literal|"Not("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x81
case|:
comment|/* FindSetLeftBitOp */
name|printf
argument_list|(
literal|"FindSetLeftBit("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x82
case|:
comment|/* FindSetRightBitOp */
name|printf
argument_list|(
literal|"FindSetRightBit("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x83
case|:
comment|/* DerefOp */
name|printf
argument_list|(
literal|"DerefOf("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x86
case|:
comment|/* NotifyOp */
name|printf
argument_list|(
literal|"Notify("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x87
case|:
comment|/* SizeOfOp */
name|printf
argument_list|(
literal|"SizeOf("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x88
case|:
comment|/* IndexOp */
name|printf
argument_list|(
literal|"Index("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|OPTARG
argument_list|()
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x89
case|:
comment|/* MatchOp */
name|printf
argument_list|(
literal|"Match("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %s, "
argument_list|,
name|matchstr
index|[
operator|*
name|dp
operator|++
index|]
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", %s, "
argument_list|,
name|matchstr
index|[
operator|*
name|dp
operator|++
index|]
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x8a
case|:
comment|/* CreateDWordFieldOp */
name|printf
argument_list|(
literal|"CreateDWordField("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x8b
case|:
comment|/* CreateWordFieldOp */
name|printf
argument_list|(
literal|"CreateWordField("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x8c
case|:
comment|/* CreateByteFieldOp */
name|printf
argument_list|(
literal|"CreateByteField("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x8d
case|:
comment|/* CreateBitFieldOp */
name|printf
argument_list|(
literal|"CreateBitField("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x8e
case|:
comment|/* ObjectTypeOp */
name|printf
argument_list|(
literal|"ObjectType("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x90
case|:
name|printf
argument_list|(
literal|"LAnd("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x91
case|:
name|printf
argument_list|(
literal|"LOr("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x92
case|:
name|printf
argument_list|(
literal|"LNot("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x93
case|:
name|printf
argument_list|(
literal|"LEqual("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x94
case|:
name|printf
argument_list|(
literal|"LGreater("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0x95
case|:
name|printf
argument_list|(
literal|"LLess("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|", "
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xa0
case|:
comment|/* IfOp */
name|asl_dump_defif
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xa1
case|:
comment|/* ElseOp */
name|asl_dump_defelse
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xa2
case|:
comment|/* WhileOp */
name|asl_dump_defwhile
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xa3
case|:
comment|/* NoopOp */
name|printf
argument_list|(
literal|"Noop"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xa5
case|:
comment|/* BreakOp */
name|printf
argument_list|(
literal|"Break"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xa4
case|:
comment|/* ReturnOp */
name|printf
argument_list|(
literal|"Return("
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|")"
argument_list|)
expr_stmt|;
break|break;
case|case
literal|0xcc
case|:
comment|/* BreakPointOp */
name|printf
argument_list|(
literal|"BreakPoint"
argument_list|)
expr_stmt|;
break|break;
default|default:
name|errx
argument_list|(
literal|1
argument_list|,
literal|"strange opcode 0x%x\n"
argument_list|,
name|opcode
argument_list|)
expr_stmt|;
block|}
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

begin_function
name|void
name|asl_dump_objectlist
parameter_list|(
name|u_int8_t
modifier|*
modifier|*
name|dpp
parameter_list|,
name|u_int8_t
modifier|*
name|end
parameter_list|,
name|int
name|indent
parameter_list|)
block|{
name|u_int8_t
modifier|*
name|dp
decl_stmt|;
name|dp
operator|=
operator|*
name|dpp
expr_stmt|;
while|while
condition|(
name|dp
operator|<
name|end
condition|)
block|{
name|print_indent
argument_list|(
name|indent
argument_list|)
expr_stmt|;
name|asl_dump_termobj
argument_list|(
operator|&
name|dp
argument_list|,
name|indent
argument_list|)
expr_stmt|;
name|printf
argument_list|(
literal|"\n"
argument_list|)
expr_stmt|;
block|}
operator|*
name|dpp
operator|=
name|dp
expr_stmt|;
block|}
end_function

end_unit

